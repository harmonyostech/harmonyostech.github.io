<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention1. How to modify the system brightness in Harmon">
<meta property="og:type" content="article">
<meta property="og:title" content="【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/25/505%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Brightness-Adjustment-Margin-Settings-Scroll-Calculation-Units-Dialog-Safe-Area-Issues-and-Flex-Overflow-Prevention/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention1. How to modify the system brightness in Harmon">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-06-25T00:07:56.000Z">
<meta property="article:modified_time" content="2025-06-25T04:25:10.664Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/25/505%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Brightness-Adjustment-Margin-Settings-Scroll-Calculation-Units-Dialog-Safe-Area-Issues-and-Flex-Overflow-Prevention/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/505%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Brightness-Adjustment-Margin-Settings-Scroll-Calculation-Units-Dialog-Safe-Area-Issues-and-Flex-Overflow-Prevention/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:07:56 / Modified: 12:25:10" itemprop="dateCreated datePublished" datetime="2025-06-25T08:07:56+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Brightness-Adjustment-Margin-Settings-Scroll-Calculation-Units-Dialog-Safe-Area-Issues-and-Flex-Overflow-Prevention"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Brightness-Adjustment-Margin-Settings-Scroll-Calculation-Units-Dialog-Safe-Area-Issues-and-Flex-Overflow-Prevention" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention"></a>【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention</h3><h4 id="1-How-to-modify-the-system-brightness-in-HarmonyOS"><a href="#1-How-to-modify-the-system-brightness-in-HarmonyOS" class="headerlink" title="1. How to modify the system brightness in HarmonyOS?"></a>1. How to modify the system brightness in HarmonyOS?</h4><p>You can check the documentation related to windows and use <code>setWindowBrightness</code>. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowbrightness9-1">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowbrightness9-1</a>  </p>
<p><code>setWindowBrightness(brightness: number): Promise&lt;void&gt;</code><br>Allows the application’s main window to set the screen brightness value using a Promise for asynchronous callbacks.<br><strong>Current screen brightness specifications</strong>: When the window sets the screen brightness, the control center cannot adjust the system screen brightness. After the window restores the default system brightness, the control center can adjust the system screen brightness.  </p>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>brightness</td>
<td>number</td>
<td>Yes</td>
<td>Screen brightness value. This parameter is a floating-point number, with a value range of [0.0, 1.0] or -1.0. 1.0 represents the brightest, and -1.0 represents the default brightness.</td>
</tr>
</tbody></table>
<h4 id="2-Issues-with-setting-margins-as-percentages-in-HarmonyOS"><a href="#2-Issues-with-setting-margins-as-percentages-in-HarmonyOS" class="headerlink" title="2. Issues with setting margins as percentages in HarmonyOS"></a>2. Issues with setting margins as percentages in HarmonyOS</h4><p>Setting <code>margin top 40%</code> does not appear to have the correct spacing (incorrect in both portrait and landscape orientations).  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// window.getLastWindow(getContext(this)).then((lastWindow) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   // Landscape</span></span><br><span class="line">    <span class="comment">//   lastWindow.setPreferredOrientation(window.Orientation.LANDSCAPE_INVERTED);</span></span><br><span class="line">    <span class="comment">//   // Full screen</span></span><br><span class="line">    <span class="comment">//   lastWindow.setWindowLayoutFullScreen(true);</span></span><br><span class="line">    <span class="comment">//   // Hide status bar and navigation bar</span></span><br><span class="line">    <span class="comment">//   lastWindow.setSpecificSystemBarEnabled(&#x27;status&#x27;, false);</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;__container__&quot;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">          <span class="attr">middle</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;__container__&quot;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&#x27;40%&#x27;</span> &#125;)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">**Explanation**: The margin of `</span><span class="title class_">RelativeContainer</span><span class="string">` is calculated from the anchor point. When setting margins as percentages, the reference is the parent container&#x27;s width, not its length or height.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- `</span><span class="title class_">RelativeContainer</span><span class="string">` reference: https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-container-relativecontainer.md  </span></span><br><span class="line"><span class="string">- `</span>margin<span class="string">` reference: https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-size.md#margin  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="title function_">margin</span>(<span class="attr">value</span>: <span class="title class_">Margin</span> | <span class="title class_">Length</span> | <span class="title class_">LocalizedMargin</span>)<span class="string">`  </span></span><br><span class="line"><span class="string">Sets the margin attribute.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Parameter Name | Type                                     | Required | Description                                                                                                                                                                                                                        |</span></span><br><span class="line"><span class="string">|----------|----------------------------------------|------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|</span></span><br><span class="line"><span class="string">| value      | Margin \| Length \| LocalizedMargin12+ | Yes  | Sets the component&#x27;s margin. &lt;br&gt;When the parameter is of type Length, margins for all four directions take effect simultaneously. &lt;br&gt;Default value: 0 &lt;br&gt;Unit: vp &lt;br&gt;When setting the margin as a percentage, the top, bottom, left, and right margins are all based on the parent container&#x27;s width. When laying out in the cross-axis of Row, Column, or Flex, the sum of the child component&#x27;s cross-axis size and margin equals the overall size. &lt;br&gt;For example, if a Column container is 100 units wide, and a child component is 50 units wide with a margin of 10 on the left and 20 on the right, the child component will be offset by 10 units horizontally. |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Unit issues in HarmonyOS scroll calculations  </span></span><br><span class="line"><span class="string">What is the unit of `</span>yOffset<span class="string">` in `</span><span class="title function_">onScroll</span>(<span class="function">(<span class="params"><span class="attr">xOffset</span>: <span class="built_in">number</span>, <span class="attr">yOffset</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="string">`? It needs to be compared with the `</span>avoidArea.<span class="property">topRect</span>.<span class="property">height</span><span class="string">` (status bar height), requiring unit consistency.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Unit**: vp. Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-scroll-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Can BaseDialogOptions in HarmonyOS support extending the dialog layout to non-safe areas?  </span></span><br><span class="line"><span class="string">**Requirement**: When the dialog is displayed at the bottom, can it be configured to extend the background to non-safe areas (e.g., navigation bar)?  </span></span><br><span class="line"><span class="string">**Current behavior**: The dialog avoids non-safe areas at the bottom, causing the background to not fully cover the area.  </span></span><br><span class="line"><span class="string">**Solution**: Use `</span>offset<span class="string">` to override the navigation bar. Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to prevent content overflow in a HarmonyOS Flex container?  </span></span><br><span class="line"><span class="string">In the following demo, search history content overflows. How to restrict this?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Queue</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkTS&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StartupConfigEntry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;inputArrayProp&#x27;</span>, [])</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TestPersistPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;inputArrayProp&#x27;</span>) <span class="attr">inputArr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; =</span><br><span class="line">    [<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>))]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">searchHistory</span>: <span class="title class_">Array</span>&lt;<span class="title class_">StockSearchModel</span>&gt; = []</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">gridItems</span>: <span class="title class_">Array</span>&lt;<span class="title class_">StockSearchModel</span>&gt; =</span><br><span class="line">    [<span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>), <span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>)</span><br><span class="line">      , <span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>), <span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">&#x27;StockSearchModel&#x27;</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>)]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">i</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputArr</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">searchHistory</span>.<span class="title function_">push</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(element))</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">tempArr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">searchHistory</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      tempArr.<span class="title function_">push</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputArr</span> = tempArr</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Scroll</span>() &#123;</span><br><span class="line">      <span class="title class_">Flex</span>(&#123;</span><br><span class="line">        <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>,</span><br><span class="line">        <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>,</span><br><span class="line">        <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Start</span>,</span><br><span class="line">        <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">NoWrap</span></span><br><span class="line">      &#125;) &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;点击添加一只股票的搜索历史&#x27;</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">searchHistory</span>.<span class="title function_">unshift</span>(<span class="keyword">new</span> <span class="title class_">StockSearchModel</span>(<span class="string">`StockSearchModel<span class="subst">$&#123;<span class="variable language_">this</span>.i++&#125;</span>`</span>, <span class="string">&#x27;300033&#x27;</span>, <span class="string">&#x27;33&#x27;</span>))</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="string">&#x27;#D6000000&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">            .<span class="title function_">lineHeight</span>(<span class="number">22</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.app_icon&#x27;</span>))</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">searchHistory</span> = [];</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">22</span>)</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">searchHistory</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">StockSearchModel</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item.<span class="property">stockName</span>)</span><br><span class="line">              .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="string">&#x27;#D600000&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">              .<span class="title function_">padding</span>(&#123;</span><br><span class="line">                <span class="attr">left</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">right</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">bottom</span>: <span class="number">4</span>,</span><br><span class="line">                <span class="attr">top</span>: <span class="number">4</span></span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: <span class="number">12</span>, <span class="attr">top</span>: <span class="number">12</span> &#125;)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0a000000&#x27;</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">4</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">28</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">400</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxHeight</span>: <span class="number">200</span>, <span class="attr">minHeight</span>: <span class="number">100</span> &#125;)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;热门搜索&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="string">&#x27;#D600000&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">          .<span class="title function_">lineHeight</span>(<span class="number">22</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">        <span class="title class_">Grid</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">gridItems</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">StockSearchModel</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(item.<span class="property">stockName</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">        .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">        .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>)</span><br><span class="line">        .<span class="title function_">columnsGap</span>(<span class="number">0</span>)</span><br><span class="line">        .<span class="title function_">rowsGap</span>(<span class="number">0</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;30%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">constraintSize</span>(&#123;</span><br><span class="line">          <span class="attr">minHeight</span>: <span class="number">200</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">constraintSize</span>(&#123;</span><br><span class="line">        <span class="attr">minHeight</span>: <span class="number">500</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#FFFFFFFF&#x27;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123;</span><br><span class="line">        <span class="attr">top</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="attr">bottom</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="attr">left</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="attr">right</span>: <span class="number">16</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Observed</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">StockSearchModel</span> &#123;</span><br><span class="line">  <span class="attr">stockCode</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">stockMarket</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">stockName</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">stockName</span>: <span class="built_in">string</span>, <span class="attr">stockCode</span>?: <span class="built_in">string</span>, <span class="attr">stockMarket</span>?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stockName</span> = stockName;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stockCode</span> = stockCode || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stockMarket</span> = <span class="variable language_">this</span>.<span class="property">stockMarket</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">**Solution**: Add the `</span>.<span class="title function_">clip</span>(<span class="literal">true</span>)<span class="string">` attribute to the Flex container for historical records to truncate overflowing content. Pseudocode example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">.<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxHeight</span>: <span class="number">200</span>, <span class="attr">minHeight</span>: <span class="number">100</span> &#125;)</span><br><span class="line">.<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/25/504%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Getting-Keyboard-Height-Animation-Methods-Text-Component-Overflow-Anchor-Points-in-Relative-Layout-Attribute-Declaration/" rel="prev" title="【Daily HarmonyOS Next Knowledge】Getting Keyboard Height, Animation Methods, Text Component Overflow, Anchor Points in Relative Layout, Attribute Declaration">
      <i class="fa fa-chevron-left"></i> 【Daily HarmonyOS Next Knowledge】Getting Keyboard Height, Animation Methods, Text Component Overflow, Anchor Points in Relative Layout, Attribute Declaration
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/25/506%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Popup-Components-Object-Passing-Obtaining-Current-Route-Component-Instances-Irregular-Polygon-Drawing-and-Checkbox-Groups/" rel="next" title="【Daily HarmonyOS Next Knowledge】Popup Components, Object Passing, Obtaining Current Route Component Instances, Irregular Polygon Drawing, and Checkbox Groups">
      【Daily HarmonyOS Next Knowledge】Popup Components, Object Passing, Obtaining Current Route Component Instances, Irregular Polygon Drawing, and Checkbox Groups <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Brightness-Adjustment-Margin-Settings-Scroll-Calculation-Units-Dialog-Safe-Area-Issues-and-Flex-Overflow-Prevention"><span class="nav-number">1.</span> <span class="nav-text">【Daily HarmonyOS Next Knowledge】 Brightness Adjustment, Margin Settings, Scroll Calculation Units, Dialog Safe Area Issues, and Flex Overflow Prevention</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-How-to-modify-the-system-brightness-in-HarmonyOS"><span class="nav-number">1.1.</span> <span class="nav-text">1. How to modify the system brightness in HarmonyOS?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Issues-with-setting-margins-as-percentages-in-HarmonyOS"><span class="nav-number">1.2.</span> <span class="nav-text">2. Issues with setting margins as percentages in HarmonyOS</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">344</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
