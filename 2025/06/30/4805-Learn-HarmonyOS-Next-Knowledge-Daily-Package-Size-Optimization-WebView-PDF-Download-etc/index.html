<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc.1. How to Configure Package Size Optimization for Large Packaging?Problem Scenario:The package size of a pro">
<meta property="og:type" content="article">
<meta property="og:title" content="[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc.">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/30/4805-Learn-HarmonyOS-Next-Knowledge-Daily-Package-Size-Optimization-WebView-PDF-Download-etc/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc.1. How to Configure Package Size Optimization for Large Packaging?Problem Scenario:The package size of a pro">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-06-30T09:12:22.000Z">
<meta property="article:modified_time" content="2025-06-30T09:13:24.903Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOS Next">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/30/4805-Learn-HarmonyOS-Next-Knowledge-Daily-Package-Size-Optimization-WebView-PDF-Download-etc/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc. | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/30/4805-Learn-HarmonyOS-Next-Knowledge-Daily-Package-Size-Optimization-WebView-PDF-Download-etc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc.
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-30 17:12:22 / Modified: 17:13:24" itemprop="dateCreated datePublished" datetime="2025-06-30T17:12:22+08:00">2025-06-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Learn-HarmonyOS-Next-Knowledge-Daily-Package-Size-Optimization-WebView-PDF-Download-etc"><a href="#Learn-HarmonyOS-Next-Knowledge-Daily-Package-Size-Optimization-WebView-PDF-Download-etc" class="headerlink" title="[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc."></a>[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc.</h1><h2 id="1-How-to-Configure-Package-Size-Optimization-for-Large-Packaging"><a href="#1-How-to-Configure-Package-Size-Optimization-for-Large-Packaging" class="headerlink" title="1. How to Configure Package Size Optimization for Large Packaging?"></a>1. How to Configure Package Size Optimization for Large Packaging?</h2><p><strong>Problem Scenario:</strong><br>The package size of a program containing SO libraries is excessively large after packaging, exceeding expectations.  </p>
<p><strong>Reference Response:</strong>  </p>
<ol>
<li><strong>Check the packaging type first</strong>: Debug compilation includes debugging information, making the package larger than the release version. You can reduce the SO size by configuring <code>&quot;strip&quot;: true</code> to remove debug information from SO files. This configuration should be applied to both HAP and HSP modules, and works for both release and debug modes. Refer to the <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-cpp-0000001733922376-V5">configuration guide</a>:</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;nativeLib&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;debugSymbol&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// This configuration strips debug information and symbol tables from compiled C++ SO files</span></span><br><span class="line">    <span class="attr">&quot;strip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// Enable stripping</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span> <span class="comment">// Regular expression rules for stripping exclusions</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> **Compress SO libraries**<span class="punctuation">:</span> By default<span class="punctuation">,</span> DevEco Studio does not compress SO files during packaging. Enabling the SO compression option will package SO files in a compressed format<span class="punctuation">,</span> reducing the app package size. Modify the `compressNativeLibs` field in the module configuration file `module.json5` to `<span class="literal"><span class="keyword">true</span></span>`<span class="punctuation">,</span> then recompile and package the app<span class="punctuation">:</span>  </span><br><span class="line">```json</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">&quot;compressNativeLibs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// Indicate that libs should be packaged in compressed storage mode</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## <span class="number">2.</span> PDF Download and Preview Based on WebDownloadDelegate  </span><br><span class="line">First<span class="punctuation">,</span> use the web page interception interface `onInterceptRequest` to determine if the PDF needs to be downloaded and viewed. The identifier is whether the URL&#x27;s response header contains the `Content-Disposition` attribute<span class="punctuation">,</span> such as `<span class="string">&quot;attachment; filename=XXXX.pdf&quot;</span>`.  </span><br><span class="line">```typescript</span><br><span class="line">try <span class="punctuation">&#123;</span></span><br><span class="line">  if (event) <span class="punctuation">&#123;</span></span><br><span class="line">    const webResponse = new WebResourceResponse();</span><br><span class="line">    let url = event.request.getRequestUrl()</span><br><span class="line">    let headers = event.request.getRequestHeader()</span><br><span class="line">    if(headers<span class="punctuation">[</span>&#x27;content-disposition&#x27;<span class="punctuation">]</span>)<span class="punctuation">&#123;</span></span><br><span class="line">      AlertDialog.show(<span class="punctuation">&#123;</span></span><br><span class="line">        title<span class="punctuation">:</span> &#x27;File Download&#x27;<span class="punctuation">,</span> cancel<span class="punctuation">:</span> () =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.log(&#x27;Cancel download&#x27;);</span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        message<span class="punctuation">:</span> &#x27;Download now?&#x27;<span class="punctuation">,</span> confirm<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          value<span class="punctuation">:</span> &#x27;Confirm&#x27;<span class="punctuation">,</span> action<span class="punctuation">:</span> () =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            this.setDownloadDelegate()</span><br><span class="line">            this.controller.startDownload(&#x27;https<span class="punctuation">:</span><span class="comment">//example.com&#x27;);</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">To preview the PDF after download<span class="punctuation">,</span> use the `startDownload()` interface to initiate a download task<span class="punctuation">,</span> which will notify the app of the download progress via the configured `DownloadDelegate`. First<span class="punctuation">,</span> register a `DownloadDelegate` with the Web component using `setDownloadDelegate()` to listen for download tasks triggered by the page. The Web component handles the download and notifies the app of the progress through `DownloadDelegate`<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">setDownloadDelegate() <span class="punctuation">&#123;</span></span><br><span class="line">  try <span class="punctuation">&#123;</span></span><br><span class="line">    this.delegate.onBeforeDownload((webDownloadItem<span class="punctuation">:</span> web_webview.WebDownloadItem) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      console.log(&#x27;Will start a download&#x27;);</span><br><span class="line">      <span class="comment">// Specify a download path (sandbox path) and start downloading</span></span><br><span class="line">      webDownloadItem.start((getContext(this) as common.UIAbilityContext).filesDir + &#x27;/test.pdf&#x27;);</span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="comment">// Callback during download, providing progress information</span></span><br><span class="line">    this.delegate.onDownloadUpdated((webDownloadItem<span class="punctuation">:</span> web_webview.WebDownloadItem) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      console.log(&#x27;Download update guid<span class="punctuation">:</span> &#x27; + webDownloadItem.getGuid());</span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="comment">// Notification for download failure</span></span><br><span class="line">    this.delegate.onDownloadFailed((webDownloadItem<span class="punctuation">:</span> web_webview.WebDownloadItem) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      console.log(&#x27;Download failed guid<span class="punctuation">:</span> &#x27; + webDownloadItem.getGuid());</span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="comment">// Notification for download completion</span></span><br><span class="line">    this.delegate.onDownloadFinish(async (webDownloadItem<span class="punctuation">:</span> web_webview.WebDownloadItem) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      console.log(&#x27;Download finish guid<span class="punctuation">:</span> &#x27; + webDownloadItem.getGuid());</span><br><span class="line">      let file = fs.statSync((getContext(this) as common.UIAbilityContext).filesDir + &#x27;/test.pdf&#x27;)</span><br><span class="line">      console.log(&#x27;testTag - size<span class="punctuation">:</span> &#x27; + file.size + &#x27;path<span class="punctuation">:</span>&#x27;);</span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line">    let fileuri = &#x27;file<span class="punctuation">:</span><span class="comment">//’ + (getContext(this) as common.UIAbilityContext).filesDir + ‘/test.pdf&#x27;</span></span><br><span class="line">    console.log(&#x27;testTag - &#x27; + fileuri);</span><br><span class="line">    this.controller.setDownloadDelegate(this.delegate);</span><br><span class="line">    web_webview.WebDownloadManager.setDownloadDelegate(this.delegate)</span><br><span class="line">    this.controller.loadUrl(fileuri)</span><br><span class="line">  <span class="punctuation">&#125;</span> catch (error) <span class="punctuation">&#123;</span></span><br><span class="line">    console.log(JSON.stringify(error))</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">If download is unnecessary<span class="punctuation">,</span> create an HTTP task using `http.createHttp()`<span class="punctuation">,</span> then initiate an HTTP request with `request`. Set custom response data in the asynchronous callback<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">let httpRequest = http.createHttp();</span><br><span class="line">let promise = httpRequest.request(url<span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">  method<span class="punctuation">:</span> http.RequestMethod.GET<span class="punctuation">,</span></span><br><span class="line">  connectTimeout<span class="punctuation">:</span> <span class="number">60000</span><span class="punctuation">,</span></span><br><span class="line">  readTimeout<span class="punctuation">:</span> <span class="number">60000</span><span class="punctuation">,</span></span><br><span class="line">  header<span class="punctuation">:</span> headers</span><br><span class="line"><span class="punctuation">&#125;</span>);</span><br><span class="line">promise.then((data<span class="punctuation">:</span> http.HttpResponse) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">  let result = data?.result as ArrayBuffer</span><br><span class="line">  webResponse.setResponseCode(<span class="number">200</span>);</span><br><span class="line">  webResponse.setReasonMessage(&#x27;OK&#x27;);</span><br><span class="line">  webResponse.setResponseData(result);</span><br><span class="line">  webResponse.setResponseEncoding(&#x27;UTF_8&#x27;)</span><br><span class="line"><span class="punctuation">&#125;</span>).catch((err<span class="punctuation">:</span> Error) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">  console.info(&#x27;error<span class="punctuation">:</span>&#x27; + JSON.stringify(err));</span><br><span class="line"><span class="punctuation">&#125;</span>);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## <span class="number">3.</span> Project Compilation Error<span class="punctuation">:</span> TypeError<span class="punctuation">:</span> Cannot read properties of undefined (reading &#x27;newFileToResourceList&#x27;)  </span><br><span class="line"><span class="number">1.</span> **Enable detailed logging**<span class="punctuation">:</span> Uncomment the `logging` section in `hvigor/hvigor-config.json5` and set `level` to `debug`. Uncomment the `debugging` section and set `stacktrace` to `<span class="literal"><span class="keyword">true</span></span>` to see the specific error location during compilation.  </span><br><span class="line"><span class="number">2.</span> **Modify system file code**<span class="punctuation">:</span> If the error occurs in `collectResourceInFile`<span class="punctuation">,</span> add a log line to the specific error file<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">collectResourceInFile(e<span class="punctuation">,</span> t) <span class="punctuation">&#123;</span></span><br><span class="line">  if (!this.wholeFileInfo<span class="punctuation">[</span>t<span class="punctuation">]</span>) <span class="punctuation">&#123;</span></span><br><span class="line">    console.log(&#x27;info&#x27; + t);</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  this.wholeFileInfo<span class="punctuation">[</span>t<span class="punctuation">]</span>.newFileToResourceList.add(e)</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"><span class="number">3.</span> **Recompile** to view the printed error file location in the build output. Check for yellow warnings in import/export paths (common issues include case sensitivity and missing paths).  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## <span class="number">4.</span> Does Asynchrony Affect the Main Thread?  </span><br><span class="line">**Problem Description**<span class="punctuation">:</span>  </span><br><span class="line"><span class="number">1.</span> Is `setInterval` executed asynchronously? Does frequent timing via `setInterval` affect the main thread and screen refresh rate?  </span><br><span class="line"><span class="number">2.</span> How to independently determine if an interface is asynchronous?  </span><br><span class="line"><span class="number">3.</span> How to check if a task is running on the main thread or another thread?  </span><br><span class="line"></span><br><span class="line">**Solutions**<span class="punctuation">:</span>  </span><br><span class="line"><span class="number">1.</span> **`setInterval` is asynchronous**. Its impact on the main thread depends on the callback logic<span class="punctuation">:</span>  </span><br><span class="line">   - Minor data processing<span class="punctuation">:</span> Minimal impact.  </span><br><span class="line">   - Heavy data processing<span class="punctuation">:</span> Use `worker` or `taskpool`.  </span><br><span class="line">   - Frequent UI data updates<span class="punctuation">:</span> May affect the main thread<span class="punctuation">,</span> as rendering occurs on the main thread.  </span><br><span class="line"><span class="number">2.</span> **Asynchronous interfaces in HarmonyOS** are implemented via `Promise` and `async/await`. Refer to the <span class="punctuation">[</span>Asynchronous Concurrency Overview (Promise and async/await)<span class="punctuation">]</span>(https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/async-concurrency-overview-V5?catalogVersion=V5).  </span></span><br><span class="line"><span class="number">3.</span> **Check thread type** by comparing thread IDs<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">function isMainThread()<span class="punctuation">:</span> boolean <span class="punctuation">&#123;</span></span><br><span class="line">  return process.pid === process.tid;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## <span class="number">5.</span> How to Switch Root Views in an HSP Module?  </span><br><span class="line">To switch root views in an HSP module<span class="punctuation">,</span> obtain the `WindowStage` of the program entry and use it for switching. Refer to the sample code<span class="punctuation">:</span>  </span><br><span class="line"></span><br><span class="line">**HspPage Index Code**<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">import <span class="punctuation">&#123;</span> window <span class="punctuation">&#125;</span> from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry(<span class="punctuation">&#123;</span> routeName<span class="punctuation">:</span> <span class="string">&quot;HspPage&quot;</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">@Component</span><br><span class="line">struct Index <span class="punctuation">&#123;</span></span><br><span class="line">  @State message<span class="punctuation">:</span> string = &#x27;This is Hsp Page&#x27;;</span><br><span class="line">  @State windowStage<span class="punctuation">:</span> window.WindowStage | undefined = AppStorage.get&lt;window.WindowStage&gt;(<span class="string">&quot;windowStage&quot;</span>)</span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Row() <span class="punctuation">&#123;</span></span><br><span class="line">      Column() <span class="punctuation">&#123;</span></span><br><span class="line">        Text(this.message)</span><br><span class="line">          .fontSize(<span class="number">50</span>)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">          .onClick(() =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            if (this.windowStage) <span class="punctuation">&#123;</span></span><br><span class="line">              this.windowStage.getMainWindowSync()</span><br><span class="line">                .getUIContext()</span><br><span class="line">                .getRouter()</span><br><span class="line">                .pushUrl(<span class="punctuation">&#123;</span></span><br><span class="line">                  url<span class="punctuation">:</span> <span class="string">&quot;pages/Page&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span>)</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Root Page <span class="number">1</span>**<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">import <span class="punctuation">&#123;</span> router <span class="punctuation">&#125;</span> from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line"></span><br><span class="line">import(<span class="string">&quot;lib1/src/main/ets/pages/Index&quot;</span>)</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index <span class="punctuation">&#123;</span></span><br><span class="line">  @State message<span class="punctuation">:</span> string = &#x27;Hello World&#x27;;</span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    RelativeContainer() <span class="punctuation">&#123;</span></span><br><span class="line">      Text(this.message)</span><br><span class="line">        .id(&#x27;HelloWorld&#x27;)</span><br><span class="line">        .fontSize(<span class="number">50</span>)</span><br><span class="line">        .fontWeight(FontWeight.Bold)</span><br><span class="line">        .alignRules(<span class="punctuation">&#123;</span></span><br><span class="line">          center<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> &#x27;container&#x27;<span class="punctuation">,</span> align<span class="punctuation">:</span> VerticalAlign.Center <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          middle<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> &#x27;container&#x27;<span class="punctuation">,</span> align<span class="punctuation">:</span> HorizontalAlign.Center <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">        .onClick(() =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.log(<span class="string">&quot;Clicked&quot;</span>)</span><br><span class="line">          router.pushNamedRoute(<span class="punctuation">&#123;</span></span><br><span class="line">            name<span class="punctuation">:</span> <span class="string">&quot;HspPage&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">    .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Root Page <span class="number">2</span>**<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">import <span class="punctuation">&#123;</span> router <span class="punctuation">&#125;</span> from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line"></span><br><span class="line">import(<span class="string">&quot;lib1/src/main/ets/pages/Index&quot;</span>)</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index <span class="punctuation">&#123;</span></span><br><span class="line">  @State message<span class="punctuation">:</span> string = &#x27;Hello World&#x27;;</span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    RelativeContainer() <span class="punctuation">&#123;</span></span><br><span class="line">      Text(this.message)</span><br><span class="line">        .id(&#x27;HelloWorld&#x27;)</span><br><span class="line">        .fontSize(<span class="number">50</span>)</span><br><span class="line">        .fontWeight(FontWeight.Bold)</span><br><span class="line">        .alignRules(<span class="punctuation">&#123;</span></span><br><span class="line">          center<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> &#x27;container&#x27;<span class="punctuation">,</span> align<span class="punctuation">:</span> VerticalAlign.Center <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          middle<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> &#x27;container&#x27;<span class="punctuation">,</span> align<span class="punctuation">:</span> HorizontalAlign.Center <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">        .onClick(() =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.log(<span class="string">&quot;Clicked&quot;</span>)</span><br><span class="line">          router.pushNamedRoute(<span class="punctuation">&#123;</span></span><br><span class="line">            name<span class="punctuation">:</span> <span class="string">&quot;HspPage&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">    .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HarmonyOS-Next/" rel="tag"># HarmonyOS Next</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/30/4804-Learn-HarmonyOS-Next-Knowledge-Every-Day-Push-and-UI-Layout/" rel="prev" title="[Learn HarmonyOS Next Knowledge Every Day] Push and UI Layout">
      <i class="fa fa-chevron-left"></i> [Learn HarmonyOS Next Knowledge Every Day] Push and UI Layout
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/30/4806-Learn-HarmonyOS-Next-Knowledge-Daily-Debugging-Network-Caching-Rich-Text-Editing-etc/" rel="next" title="[Learn HarmonyOS Next Knowledge Daily] Debugging, Network, Caching, Rich Text Editing, etc.">
      [Learn HarmonyOS Next Knowledge Daily] Debugging, Network, Caching, Rich Text Editing, etc. <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Learn-HarmonyOS-Next-Knowledge-Daily-Package-Size-Optimization-WebView-PDF-Download-etc"><span class="nav-number">1.</span> <span class="nav-text">[Learn HarmonyOS Next Knowledge Daily] Package Size Optimization, WebView PDF Download, etc.</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-How-to-Configure-Package-Size-Optimization-for-Large-Packaging"><span class="nav-number">1.1.</span> <span class="nav-text">1. How to Configure Package Size Optimization for Large Packaging?</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">342</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
