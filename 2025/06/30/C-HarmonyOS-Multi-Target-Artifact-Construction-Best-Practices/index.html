<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="HarmonyOS Multi-Target Artifact Construction Best PracticesBackgroundIn Android or iOS development, there is often a need to create “马甲” packages (reskinned apps) from a single codebase for different">
<meta property="og:type" content="article">
<meta property="og:title" content="HarmonyOS Multi-Target Artifact Construction Best Practices">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/30/C-HarmonyOS-Multi-Target-Artifact-Construction-Best-Practices/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="HarmonyOS Multi-Target Artifact Construction Best PracticesBackgroundIn Android or iOS development, there is often a need to create “马甲” packages (reskinned apps) from a single codebase for different">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://harmonyostech.github.io/images/HarmonyOS%E5%A4%9A%E7%9B%AE%E6%A0%87%E4%BA%A7%E7%89%A9%E6%9E%84%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/HarmonyOS%E5%A4%9A%E7%9B%AE%E6%A0%87%E4%BA%A7%E7%89%A9%E6%9E%84%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png">
<meta property="article:published_time" content="2025-06-30T14:31:41.000Z">
<meta property="article:modified_time" content="2025-07-13T01:43:59.247Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOS Next">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://harmonyostech.github.io/images/HarmonyOS%E5%A4%9A%E7%9B%AE%E6%A0%87%E4%BA%A7%E7%89%A9%E6%9E%84%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/30/C-HarmonyOS-Multi-Target-Artifact-Construction-Best-Practices/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS Multi-Target Artifact Construction Best Practices | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/30/C-HarmonyOS-Multi-Target-Artifact-Construction-Best-Practices/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          HarmonyOS Multi-Target Artifact Construction Best Practices
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-30 22:31:41" itemprop="dateCreated datePublished" datetime="2025-06-30T22:31:41+08:00">2025-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-07-13 09:43:59" itemprop="dateModified" datetime="2025-07-13T09:43:59+08:00">2025-07-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="HarmonyOS-Multi-Target-Artifact-Construction-Best-Practices"><a href="#HarmonyOS-Multi-Target-Artifact-Construction-Best-Practices" class="headerlink" title="HarmonyOS Multi-Target Artifact Construction Best Practices"></a>HarmonyOS Multi-Target Artifact Construction Best Practices</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>In Android or iOS development, there is often a need to create “马甲” packages (reskinned apps) from a single codebase for different themes or user groups. For example, Douyin has domestic and international versions, while Didi has personal and enterprise editions. Similarly, the HarmonyOS platform has similar requirements. This article discusses multi-artifact construction for HarmonyOS.  </p>
<h2 id="HarmonyOS-Project-Configuration-File-Description"><a href="#HarmonyOS-Project-Configuration-File-Description" class="headerlink" title="HarmonyOS Project Configuration File Description"></a>HarmonyOS Project Configuration File Description</h2><p>Below is a screenshot of the simplest HarmonyOS project:  </p>
<p><img src="/../images/HarmonyOS%E5%A4%9A%E7%9B%AE%E6%A0%87%E4%BA%A7%E7%89%A9%E6%9E%84%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png"></p>
<h3 id="Project-build-profile-json5"><a href="#Project-build-profile-json5" class="headerlink" title="Project build-profile.json5"></a>Project <code>build-profile.json5</code></h3><p>In a standard Android project, modules are declared in <code>setting.gradle</code>. For HarmonyOS, module configurations are in <code>build-profile.json5</code>:  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>  </span><br><span class="line">  <span class="attr">&quot;app&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  </span><br><span class="line">    <span class="attr">&quot;signingConfigs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;products&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">      <span class="punctuation">&#123;</span>  </span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;signingConfig&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;compatibleSdkVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5.0.0(12)&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;runtimeOS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HarmonyOS&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="punctuation">&#125;</span>  </span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;buildModeSet&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">      <span class="punctuation">&#123;</span>  </span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;debug&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="punctuation">&#123;</span>  </span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;release&quot;</span>  </span><br><span class="line">      <span class="punctuation">&#125;</span>  </span><br><span class="line">    <span class="punctuation">]</span>  </span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span>  </span><br><span class="line">  <span class="attr">&quot;modules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">    <span class="punctuation">&#123;</span>  </span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;entry&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="attr">&quot;srcPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./entry&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="attr">&quot;targets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">        <span class="punctuation">&#123;</span>  </span><br><span class="line">          <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">          <span class="attr">&quot;applyToProducts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">            <span class="string">&quot;default&quot;</span>  </span><br><span class="line">          <span class="punctuation">]</span>  </span><br><span class="line">        <span class="punctuation">&#125;</span>  </span><br><span class="line">      <span class="punctuation">]</span>  </span><br><span class="line">    <span class="punctuation">&#125;</span>  </span><br><span class="line">  <span class="punctuation">]</span>  </span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>


<p>The <code>modules</code> list declares modules with:  </p>
<ul>
<li><code>name</code>: Module name  </li>
<li><code>srcPath</code>: Module path  </li>
<li><code>targets</code>: Build targets</li>
</ul>
<p><strong>Notes</strong>: Differences from Android:  </p>
<ol>
<li>Only one <code>entry</code> module is allowed per project (e.g., creating two demo modules in an SDK project is prohibited).  </li>
<li><code>srcPath</code> can only point to the project root or subdirectories (e.g., source dependency on modules from another project is not allowed).</li>
</ol>
<h3 id="Module-build-profile-json5"><a href="#Module-build-profile-json5" class="headerlink" title="Module build-profile.json5"></a>Module <code>build-profile.json5</code></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>  </span><br><span class="line">  <span class="attr">&quot;apiType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stageMode&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">  <span class="attr">&quot;buildOption&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  </span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span>  </span><br><span class="line">  <span class="attr">&quot;buildOptionSet&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">    <span class="punctuation">&#123;</span>  </span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;release&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="attr">&quot;arkOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  </span><br><span class="line">        <span class="attr">&quot;obfuscation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  </span><br><span class="line">          <span class="attr">&quot;ruleOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  </span><br><span class="line">            <span class="attr">&quot;enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>  </span><br><span class="line">            <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">              <span class="string">&quot;./obfuscation-rules.txt&quot;</span>  </span><br><span class="line">            <span class="punctuation">]</span>  </span><br><span class="line">          <span class="punctuation">&#125;</span>  </span><br><span class="line">        <span class="punctuation">&#125;</span>  </span><br><span class="line">      <span class="punctuation">&#125;</span>  </span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span>  </span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">  <span class="attr">&quot;targets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">    <span class="punctuation">&#123;</span>  </span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span>  </span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="punctuation">&#123;</span>  </span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ohosTest&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="punctuation">&#125;</span>  </span><br><span class="line">  <span class="punctuation">]</span>  </span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>apiType</code>: API model type  <ul>
<li><code>stageMode</code>: Long-term evolution model (official recommendation)  </li>
<li><code>faMode</code>: FA model</li>
</ul>
</li>
<li><code>buildOptionSet</code>: Compilation configuration (e.g., obfuscation rules)  </li>
<li><code>targets</code>: Build targets</li>
</ul>
<h3 id="module-json5"><a href="#module-json5" class="headerlink" title="module.json5"></a><code>module.json5</code></h3><p>Example in <code>module/main/module.json5</code>:  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>  </span><br><span class="line">  <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  </span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;entry&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;entry&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$string:module_desc&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;mainElement&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EntryAbility&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;deviceTypes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">      <span class="string">&quot;phone&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="string">&quot;tablet&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="string">&quot;2in1&quot;</span>  </span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;deliveryWithInstall&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;installationFree&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$profile:main_pages&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;abilities&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">      <span class="punctuation">&#123;</span>  </span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EntryAbility&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;srcEntry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./ets/entryability/EntryAbility.ets&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$string:EntryAbility_desc&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$media:layered_image&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$string:EntryAbility_label&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;startWindowIcon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$media:startIcon&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;startWindowBackground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$color:start_window_background&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;exported&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;skills&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">          <span class="punctuation">&#123;</span>  </span><br><span class="line">            <span class="attr">&quot;entities&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">              <span class="string">&quot;entity.system.home&quot;</span>  </span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">            <span class="attr">&quot;actions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">              <span class="string">&quot;action.system.home&quot;</span>  </span><br><span class="line">            <span class="punctuation">]</span>  </span><br><span class="line">          <span class="punctuation">&#125;</span>  </span><br><span class="line">        <span class="punctuation">]</span>  </span><br><span class="line">      <span class="punctuation">&#125;</span>  </span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;extensionAbilities&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">      <span class="punctuation">&#123;</span>  </span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EntryBackupAbility&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;srcEntry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./ets/entrybackupability/EntryBackupAbility.ets&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;backup&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;exported&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span>  </span><br><span class="line">        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  </span><br><span class="line">          <span class="punctuation">&#123;</span>  </span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ohos.extension.backup&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">            <span class="attr">&quot;resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$profile:backup_config&quot;</span>  </span><br><span class="line">          <span class="punctuation">&#125;</span>  </span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="punctuation">&#125;</span>  </span><br><span class="line">    <span class="punctuation">]</span>  </span><br><span class="line">  <span class="punctuation">&#125;</span>  </span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Similar to AndroidManifest, it declares module information and device types:  </p>
<ul>
<li><code>name</code>: Unique module identifier (≤31 bytes, no Chinese)  </li>
<li><code>type</code>: Module type (e.g., <code>entry</code>, <code>feature</code>, <code>har</code>, <code>shared</code>)  </li>
<li><code>srcEntry</code>: Code path (≤127 bytes)  </li>
<li><code>deviceTypes</code>: Supported device categories  </li>
<li><code>deliveryWithInstall</code>: Whether to install with the app (true&#x2F;false)  </li>
<li>For more details, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5</a></li>
</ul>
<h2 id="Official-Recommended-Module-Structure"><a href="#Official-Recommended-Module-Structure" class="headerlink" title="Official Recommended Module Structure"></a>Official Recommended Module Structure</h2><p>Flat directory module management has two drawbacks:  </p>
<ol>
<li>Messy project logic structure  </li>
<li>Unclear dependency relationships</li>
</ol>
<p>The official recommends a three-layer structure:  </p>
<pre><code>/application
 ├── common                  # Common features directory
 │
 ├── features                # Functional modules directory
 │   ├── feature1            # Sub-feature 1
 │   ├── feature2            # Sub-feature 2
 │   └── ...                 # Sub-feature n
 │
 └── product                 # Product layer directory
     ├── wearable            # Wearable devices directory
     ├── default             # Default devices directory
     └── ...
</code></pre>
<h2 id="Introduction-to-Product-and-Target"><a href="#Introduction-to-Product-and-Target" class="headerlink" title="Introduction to Product and Target"></a>Introduction to Product and Target</h2><p>Before discussing multi-target artifact construction, understand <code>target</code> and <code>product</code>:  </p>
<ul>
<li><strong>Target</strong>: Each Entry&#x2F;Feature module in a project, with build artifacts as HAPs (runnable on devices). A module can define multiple targets for customized HAPs (e.g., different functions&#x2F;resources for the same module).  </li>
<li><strong>Product</strong>: The build artifact of a HarmonyOS project is an APP package (for app market release). A project can define multiple products for customized APP packages.</li>
</ul>
<h2 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h2><h3 id="Objective"><a href="#Objective" class="headerlink" title="Objective"></a>Objective</h3><p>Develop an SDK with two encapsulated sub-SDKs for ToB and ToC businesses. The three SDKs need to be debugged via three separate Demo projects in one workspace.  </p>
<p><img src="/../images/HarmonyOS%E5%A4%9A%E7%9B%AE%E6%A0%87%E4%BA%A7%E7%89%A9%E6%9E%84%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png"></p>
<h3 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h3><p>Since only one runnable <code>entry</code> module is allowed per HarmonyOS project, creating three separate demo modules is infeasible:  </p>
<pre><code class="language-json">&quot;modules&quot;: [  
  &#123;  
    &quot;name&quot;: &quot;app&quot;,  
    &quot;srcPath&quot;: &quot;./app&quot;,  
    &quot;targets&quot;: [  
      &#123;  
        &quot;name&quot;: &quot;default&quot;,  
        &quot;applyToProducts&quot;: [  
          &quot;default&quot;  
        ]  
      &#125;
    ]  
  &#125;,  
 &#123;  
    &quot;name&quot;: &quot;app_c&quot;,  
    &quot;srcPath&quot;: &quot;./app_c&quot;,  
    &quot;targets&quot;: [  
      &#123;  
        &quot;name&quot;: &quot;default&quot;,  
        &quot;applyToProducts&quot;: [  
          &quot;default&quot;  
        ]  
      &#125;  
    ]  
  &#125;,  
  &#123;  
    &quot;name&quot;: &quot;app_b&quot;,  
    &quot;srcPath&quot;: &quot;./app_b&quot;,  
    &quot;targets&quot;: [  
      &#123;  
        &quot;name&quot;: &quot;default&quot;,  
        &quot;applyToProducts&quot;: [  
          &quot;default&quot;  
        ]  
      &#125;  
    ]  
  &#125;
]
</code></pre>
<p>Only the first module can run, even with three declared modules.  </p>
<h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution 1"></a>Solution 1</h4><p>Comment&#x2F;uncomment modules for debugging. Drawback: Requires code modifications for each debug switch.  </p>
<h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution 2"></a>Solution 2</h4><p>Combine Biz2B and Biz2C into one module with two targets (2B&#x2F;2C) via different code paths. Drawback: Incompatible with independent SDK requirements.  </p>
<h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution 3"></a>Solution 3</h4><p>Define separate targets for Biz2B and Biz2C, configuring source paths in module-level <code>build_profile.json5</code> with <code>sourceRoots</code>. For example, the 2C target of the Biz2B module points to an empty path, ensuring no Biz2B code is included in 2C debugging.  </p>
<h2 id="Reference-Documents"><a href="#Reference-Documents" class="headerlink" title="Reference Documents"></a>Reference Documents</h2><ol>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-customized-multi-targets-and-products-guides-0000001731595144-V5#section2554174114463">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-customized-multi-targets-and-products-guides-0000001731595144-V5#section2554174114463</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-using-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-using-V5</a></li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HarmonyOS-Next/" rel="tag"># HarmonyOS Next</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/30/C-HarmonyOS-IM-System-Practice-One-Development-Multi-Endpoint-Deployment/" rel="prev" title="HarmonyOS IM System Practice: One Development, Multi-Endpoint Deployment">
      <i class="fa fa-chevron-left"></i> HarmonyOS IM System Practice: One Development, Multi-Endpoint Deployment
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#HarmonyOS-Multi-Target-Artifact-Construction-Best-Practices"><span class="nav-number">1.</span> <span class="nav-text">HarmonyOS Multi-Target Artifact Construction Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Background"><span class="nav-number">1.1.</span> <span class="nav-text">Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HarmonyOS-Project-Configuration-File-Description"><span class="nav-number">1.2.</span> <span class="nav-text">HarmonyOS Project Configuration File Description</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-build-profile-json5"><span class="nav-number">1.2.1.</span> <span class="nav-text">Project build-profile.json5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Module-build-profile-json5"><span class="nav-number">1.2.2.</span> <span class="nav-text">Module build-profile.json5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#module-json5"><span class="nav-number">1.2.3.</span> <span class="nav-text">module.json5</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Official-Recommended-Module-Structure"><span class="nav-number">1.3.</span> <span class="nav-text">Official Recommended Module Structure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-to-Product-and-Target"><span class="nav-number">1.4.</span> <span class="nav-text">Introduction to Product and Target</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Best-Practices"><span class="nav-number">1.5.</span> <span class="nav-text">Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Objective"><span class="nav-number">1.5.1.</span> <span class="nav-text">Objective</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solutions"><span class="nav-number">1.5.2.</span> <span class="nav-text">Solutions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution-1"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">Solution 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution-2"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">Solution 2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Solution-3"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">Solution 3</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference-Documents"><span class="nav-number">1.6.</span> <span class="nav-text">Reference Documents</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">364</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
