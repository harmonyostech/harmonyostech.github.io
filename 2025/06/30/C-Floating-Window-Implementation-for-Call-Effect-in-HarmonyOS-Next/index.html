<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Floating Window Implementation for Call Effect in HarmonyOS NextIn mobile application development, floating windows are a common feature. For example, during WeChat audio&#x2F;video calls, to ensure u">
<meta property="og:type" content="article">
<meta property="og:title" content="Floating Window Implementation for Call Effect in HarmonyOS Next">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/30/C-Floating-Window-Implementation-for-Call-Effect-in-HarmonyOS-Next/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Floating Window Implementation for Call Effect in HarmonyOS NextIn mobile application development, floating windows are a common feature. For example, during WeChat audio&#x2F;video calls, to ensure u">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://harmonyostech.github.io/images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0-3.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0-2.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0-1.png">
<meta property="article:published_time" content="2025-06-30T13:58:33.000Z">
<meta property="article:modified_time" content="2025-06-30T14:01:26.487Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOS Next">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://harmonyostech.github.io/images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0.png">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/30/C-Floating-Window-Implementation-for-Call-Effect-in-HarmonyOS-Next/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Floating Window Implementation for Call Effect in HarmonyOS Next | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/30/C-Floating-Window-Implementation-for-Call-Effect-in-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Floating Window Implementation for Call Effect in HarmonyOS Next
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-30 21:58:33 / Modified: 22:01:26" itemprop="dateCreated datePublished" datetime="2025-06-30T21:58:33+08:00">2025-06-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Floating-Window-Implementation-for-Call-Effect-in-HarmonyOS-Next"><a href="#Floating-Window-Implementation-for-Call-Effect-in-HarmonyOS-Next" class="headerlink" title="Floating Window Implementation for Call Effect in HarmonyOS Next"></a>Floating Window Implementation for Call Effect in HarmonyOS Next</h1><p>In mobile application development, floating windows are a common feature. For example, during WeChat audio&#x2F;video calls, to ensure users can view and handle other functions while on a call, the call page can be displayed as a floating window. This article discusses how to implement such a floating window function for call effects in HarmonyOS Next.  </p>
<p>The window system is the core capability supporting floating windows. Let’s first introduce the window module of HarmonyOS Next.  </p>
<h3 id="Window-Module"><a href="#Window-Module" class="headerlink" title="Window Module"></a>Window Module</h3><h4 id="Fundamental-Role-of-the-Window-Module"><a href="#Fundamental-Role-of-the-Window-Module" class="headerlink" title="Fundamental Role of the Window Module"></a>Fundamental Role of the Window Module</h4><p>The window module plays a core role in HarmonyOS Next. For application developers, it provides a complete framework for interface display and interaction, facilitating the construction of creative applications. End users can use it to control application interfaces freely, focusing on single tasks or flexibly switching and coordinating multiple tasks. From an operating system perspective, the window module acts as a smart “dispatcher,” orderly organizing different application interfaces to ensure smooth and stable system operation.  </p>
<h4 id="Diverse-Uses-of-the-Window-Module"><a href="#Diverse-Uses-of-the-Window-Module" class="headerlink" title="Diverse Uses of the Window Module"></a>Diverse Uses of the Window Module</h4><ol>
<li><strong>Provider of Window Objects</strong>: The window module of HarmonyOS Next is the foundation for application and system interface presentation. Developers use it to load colorful UI interfaces, perfectly integrating application functions and visuals to let users intuitively experience the application’s charm.  </li>
<li><strong>Organizer of Display Relationships</strong>: The system has various window types. System windows such as volume bars, notification bars, etc., ensure system functions are accessible; application windows include main windows and sub-windows. The application main window is the “main stage” of the application, clearly visible in the task management interface; application sub-windows, like pop-ups and floating windows, assist the main window. The window module accurately maintains their stacking hierarchy and position attributes, and users can adjust them as needed to create a personalized desktop layout.  </li>
<li><strong>Giver of Window Decoration and Animation Effects</strong>: The default window title bar and border integrate practical operation buttons and convenient drag-and-resize functions, simplifying user operations. Window animations enhance interaction, with smooth animations during window display, hiding, and switching, presented automatically by the system without developer intervention.  </li>
<li><strong>Precise Dispatcher of Input Events</strong>: Touch and mouse events are delivered precisely by position and size based on window status and focus, while keyboard events go directly to the focused window. Developers can also customize a window’s touch and focus attributes through interfaces to meet diverse interaction needs.</li>
</ol>
<h4 id="Flexible-Switching-of-Application-Window-Modes"><a href="#Flexible-Switching-of-Application-Window-Modes" class="headerlink" title="Flexible Switching of Application Window Modes"></a>Flexible Switching of Application Window Modes</h4><p>HarmonyOS Next supports three application window modes—full-screen, split-screen, and free window—demonstrating powerful multi-window capabilities. The full-screen mode allows an application to occupy the entire view for an immersive experience; the split-screen mode lets two applications run side by side with a draggable dividing line for resource comparison and collaborative processing; the free window mode gives users ultimate freedom to adjust size and position, keeping multiple windows organized on the screen with quick focus on click, boosting multi-tasking efficiency.  </p>
<p><img src="/../images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0.png"></p>
<h3 id="Introduction-to-Window-APIs"><a href="#Introduction-to-Window-APIs" class="headerlink" title="Introduction to Window APIs"></a>Introduction to Window APIs</h3><p>Windows provide basic capabilities for window management, including creating, destroying, setting attributes, and scheduling between windows. The window module offers the following common window-related functions:  </p>
<ul>
<li><code>Window</code>: The current window instance, the basic unit managed by the window manager.  </li>
<li><code>WindowStage</code>: The window manager, managing each basic window unit.<br>The following is a list of methods extracted from the link:</li>
</ul>
<h4 id="WindowStage-Methods"><a href="#WindowStage-Methods" class="headerlink" title="WindowStage Methods"></a>WindowStage Methods</h4><ul>
<li><code>getMainWindow(callback: AsyncCallback&lt;Window&gt;): void</code>: Get the main window under this WindowStage instance using an asynchronous callback.  </li>
<li><code>getMainWindow(): Promise&lt;Window&gt;</code>: Get the main window under this WindowStage instance using a Promise-based asynchronous callback.  </li>
<li><code>getMainWindowSync(): Window</code>: Get the main window under this WindowStage instance synchronously.  </li>
<li><code>createSubWindow(name: string, callback: AsyncCallback&lt;Window&gt;): void</code>: Create a subwindow under this WindowStage instance using an asynchronous callback.  </li>
<li><code>createSubWindow(name: string): Promise&lt;Window&gt;</code>: Create a subwindow under this WindowStage instance using a Promise-based asynchronous callback.  </li>
<li><code>createSubWindowWithOptions(name: string, options: SubWindowOptions): Promise&lt;Window&gt;</code>: Create a subwindow under this WindowStage instance with set parameters using a Promise-based asynchronous callback.  </li>
<li><code>getSubWindow(callback: AsyncCallback&lt;Array&lt;Window&gt;&gt;): void</code>: Get all subwindows under this WindowStage instance using an asynchronous callback.  </li>
<li><code>getSubWindow(): Promise&lt;Array&lt;Window&gt;&gt;</code>: Get all subwindows under this WindowStage instance using a Promise-based asynchronous callback.  </li>
<li><code>loadContent(path: string, storage: LocalStorage, callback: AsyncCallback&lt;void&gt;): void</code>: Load specific page content for the main window of the current WindowStage, passing state attributes via LocalStorage with an asynchronous callback.  </li>
<li><code>loadContent(path: string, storage?: LocalStorage): Promise&lt;void&gt;</code>: Load specific page content for the main window of the current WindowStage, passing state attributes via LocalStorage with a Promise-based asynchronous callback.  </li>
<li><code>loadContent(path: string, callback: AsyncCallback&lt;void&gt;): void</code>: Load specific page content for the main window of the current WindowStage using an asynchronous callback.  </li>
<li><code>loadContentByName(name: string, storage: LocalStorage, callback: AsyncCallback&lt;void&gt;): void</code>: Load a named route page for the current WindowStage, passing state attributes via LocalStorage with an asynchronous callback.  </li>
<li><code>loadContentByName(name: string, callback: AsyncCallback&lt;void&gt;): void</code>: Load a named route page for the current WindowStage using an asynchronous callback.  </li>
<li><code>loadContentByName(name: string, storage?: LocalStorage): Promise&lt;void&gt;</code>: Load a named route page for the current WindowStage, passing state attributes via LocalStorage with a Promise-based asynchronous callback.  </li>
<li><code>on(eventType: &#39;windowStageEvent&#39;, callback: Callback&lt;WindowStageEventType&gt;): void</code>: Enable listening for WindowStage lifecycle changes.  </li>
<li><code>off(eventType: &#39;windowStageEvent&#39;, callback?: Callback&lt;WindowStageEventType&gt;): void</code>: Disable listening for WindowStage lifecycle changes.  </li>
<li><code>setDefaultDensityEnabled(enabled: boolean): void</code>: Set whether the application uses the system’s default density.</li>
</ul>
<h4 id="Window-Methods"><a href="#Window-Methods" class="headerlink" title="Window Methods"></a>Window Methods</h4><ul>
<li><code>showWindow(callback: AsyncCallback&lt;void&gt;): void</code>: Show the current window using an asynchronous callback, supporting system windows, application subwindows, or elevating the hierarchy of a displayed application main window to the top.  </li>
<li><code>showWindow(): Promise&lt;void&gt;</code>: Show the current window using a Promise-based asynchronous callback.  </li>
<li><code>destroyWindow(callback: AsyncCallback&lt;void&gt;): void</code>: Destroy the current window using an asynchronous callback.  </li>
<li><code>destroyWindow(): Promise&lt;void&gt;</code>: Destroy the current window using a Promise-based asynchronous callback.  </li>
<li><code>moveWindowTo(x: number, y: number, callback: AsyncCallback&lt;void&gt;): void</code>: Move the window position using an asynchronous callback.  </li>
<li><code>moveWindowTo(x: number, y: number): Promise&lt;void&gt;</code>: Move the window position using a Promise-based asynchronous callback.  </li>
<li><code>resize(width: number, height: number, callback: AsyncCallback&lt;void&gt;): void</code>: Change the current window size using an asynchronous callback.  </li>
<li><code>resize(width: number, height: number): Promise&lt;void&gt;</code>: Change the current window size using a Promise-based asynchronous callback.  </li>
<li><code>getWindowProperties(): WindowProperties</code>: Get the properties of the current window.  </li>
<li><code>getWindowAvoidArea(type: AvoidAreaType): AvoidArea</code>: Get the area that the current window content should avoid.  </li>
<li><code>setWindowFocusable(isFocusable: boolean, callback: AsyncCallback&lt;void&gt;): void</code>: Set whether the window is touchable using an asynchronous callback.  </li>
<li><code>setWindowFocusable(isFocusable: boolean): Promise&lt;void&gt;</code>: Set whether the window is touchable using a Promise-based asynchronous callback.  </li>
<li><code>setWindowBackgroundColor(color: string): void</code>: Set the window background color.  </li>
<li><code>setWindowBrightness(brightness: number, callback: AsyncCallback&lt;void&gt;): void</code>: Allow the application main window to set the screen brightness using an asynchronous callback.  </li>
<li><code>setWindowBrightness(brightness: number): Promise&lt;void&gt;</code>: Allow the application main window to set the screen brightness using a Promise-based asynchronous callback.  </li>
<li><code>setWindowSystemBarProperties(systemBarProperties: SystemBarProperties, callback: AsyncCallback&lt;void&gt;): void</code>: Set the properties of the main window’s three-key navigation bar and status bar using an asynchronous callback.  </li>
<li><code>setWindowSystemBarProperties(systemBarProperties: SystemBarProperties): Promise&lt;void&gt;</code>: Set the properties of the main window’s three-key navigation bar and status bar using a Promise-based asynchronous callback.  </li>
<li><code>setWindowLayoutFullScreen(isLayoutFullScreen: boolean, callback: AsyncCallback&lt;void&gt;): void</code>: Set whether the main or subwindow layout is immersive using an asynchronous callback.  </li>
<li><code>setWindowLayoutFullScreen(isLayoutFullScreen: boolean): Promise&lt;void&gt;</code>: Set whether the main or subwindow layout is immersive using a Promise-based asynchronous callback.  </li>
<li><code>isWindowShowing(): boolean</code>: Check if the current window is displayed.  </li>
<li><code>on(type: &#39;windowSizeChange&#39;, callback: Callback&lt;Size&gt;): void</code>: Enable listening for window size changes.  </li>
<li><code>off(type: &#39;windowSizeChange&#39;, callback?: Callback&lt;Size&gt;): void</code>: Disable listening for window size changes.  </li>
<li><code>on(type: &#39;avoidAreaChange&#39;, callback: Callback&lt;AvoidAreaOptions&gt;): void</code>: Enable listening for changes in the current application window’s system avoidance area.  </li>
<li><code>off(type: &#39;avoidAreaChange&#39;, callback?: Callback&lt;AvoidAreaOptions&gt;): void</code>: Disable listening for changes in the current application window’s system avoidance area.  </li>
<li><code>on(type: &#39;keyboardHeightChange&#39;, callback: Callback&lt;number&gt;): void</code>: Enable listening for changes in the fixed soft keyboard height.  </li>
<li><code>off(type: &#39;keyboardHeightChange&#39;, callback?: Callback&lt;number&gt;): void</code>: Disable listening for changes in the fixed soft keyboard height.  </li>
<li><code>on(type: &#39;touchOutside&#39;, callback: Callback&lt;void&gt;): void</code>: Enable listening for click events outside the current window area.  </li>
<li><code>off(type: &#39;touchOutside&#39;, callback?: Callback&lt;void&gt;): void</code>: Disable listening for click events outside the current window area.  </li>
<li><code>on(type: &#39;screenshot&#39;, callback: Callback&lt;void&gt;): void</code>: Enable listening for screenshot events.  </li>
<li><code>off(type: &#39;screenshot&#39;, callback?: Callback&lt;void&gt;): void</code>: Disable listening for screenshot events.  </li>
<li><code>on(type: &#39;windowEvent&#39;, callback: Callback&lt;WindowEventType&gt;): void</code>: Enable listening for window lifecycle changes.  </li>
<li><code>off(type: &#39;windowEvent&#39;, callback?: Callback&lt;WindowEventType&gt;): void</code>: Disable listening for window lifecycle changes.  </li>
<li><code>on(type: &#39;windowVisibilityChange&#39;, callback: Callback&lt;boolean&gt;): void</code>: Enable listening for changes in the current window’s visibility status.  </li>
<li><code>off(type: &#39;windowVisibilityChange&#39;, callback?: Callback&lt;boolean&gt;): void</code>: Disable listening for changes in the current window’s visibility status.  </li>
<li><code>on(type: &#39;noInteractionDetected&#39;, timeout: number, callback: Callback&lt;void&gt;): void</code>: Enable listening for no interaction events within a specified timeout for the current window.  </li>
<li><code>off(type: &#39;noInteractionDetected&#39;, callback?: Callback&lt;void&gt;): void</code>: Disable listening for no interaction events within a specified timeout for the current window.  </li>
<li><code>on(type: &#39;windowStatusChange&#39;, callback: Callback&lt;WindowStatusType&gt;): void</code>: Enable listening for window mode changes.  </li>
<li><code>off(type: &#39;windowStatusChange&#39;, callback?: Callback&lt;WindowStatusType&gt;): void</code>: Disable listening for window mode changes.  </li>
<li><code>on(type: &#39;windowRectChange&#39;, callback: Callback&lt;RectChangeOptions&gt;): void</code>: Enable listening for window rectangle changes.  </li>
<li><code>off(type: &#39;windowRectChange&#39;, callback?: Callback&lt;RectChangeOptions&gt;): void</code>: Disable listening for window rectangle changes.  </li>
<li><code>on(type: &#39;subWindowClose&#39;, callback: Callback&lt;void&gt;): void</code>: Trigger this event when a subwindow closes.  </li>
<li><code>off(type: &#39;subWindowClose&#39;, callback?: Callback&lt;void&gt;): void</code>: Disable listening for subwindow close events.  </li>
<li><code>minimize(callback: AsyncCallback&lt;void&gt;): void</code>: Minimize the window using an asynchronous callback.  </li>
<li><code>minimize(): Promise&lt;void&gt;</code>: Minimize the window using a Promise-based asynchronous callback.  </li>
<li><code>maximize(presentation?: MaximizePresentation): Promise&lt;void&gt;</code>: Called by the main window to maximize, using a Promise-based asynchronous callback.  </li>
<li><code>recover(): Promise&lt;void&gt;</code>: Restore the main window from full-screen, maximized, or split-screen mode to a floating window, resuming its size and position before entering the mode.  </li>
<li><code>getWindowLimits(): WindowLimits</code>: Get the size limits of the current application window.  </li>
<li><code>setWindowLimits(windowLimits: WindowLimits): Promise&lt;WindowLimits&gt;</code>: Set the size limits of the current application window.  </li>
<li><code>setWindowMask(windowMask: Array&lt;Array&lt;number&gt;&gt;): Promise&lt;void&gt;</code>: Set the mask for an irregular window.  </li>
<li><code>keepKeyboardOnFocus(keepKeyboardFlag: boolean): void</code>: Retain the soft keyboard created by other windows when the window gains focus.  </li>
<li><code>setWindowDecorVisible(isVisible: boolean): void</code>: Set whether the window title bar is visible.  </li>
<li><code>setSubWindowModal(isModal: boolean): Promise&lt;void&gt;</code>: Set whether the subwindow’s modal attribute is enabled.  </li>
<li><code>setWindowDecorHeight(height: number): void</code>: Set the height of the window title bar.  </li>
<li><code>getTitleButtonRect(): TitleButtonRect</code>: Get the rectangular area of the minimize, maximize, and close buttons on the title bar of the main window or a decorated subwindow.  </li>
<li><code>getWindowStatus(): WindowStatusType</code>: Get the mode of the current application window.  </li>
<li><code>isFocused(): boolean</code>: Check if the current window has focus.  </li>
<li><code>createSubWindowWithOptions(name: string, options: SubWindowOptions): Promise&lt;Window&gt;</code>: Create a subwindow under the main window or subwindow.  </li>
<li><code>enableLandscapeMultiWindow(): Promise&lt;void&gt;</code>: Enable landscape multi-window support when entering an interface that supports landscape layout.  </li>
<li><code>disableLandscapeMultiWindow(): Promise&lt;void&gt;</code>: Disable landscape multi-window support when exiting an interface that supports landscape layout.  </li>
<li><code>setDialogBackGestureEnabled(enabled: boolean): Promise&lt;void&gt;</code>: Set whether a modal window responds to gesture back events.</li>
</ul>
<h3 id="Implementation-Methods-for-Floating-Window-Capabilities-in-HarmonyOS-Next"><a href="#Implementation-Methods-for-Floating-Window-Capabilities-in-HarmonyOS-Next" class="headerlink" title="Implementation Methods for Floating Window Capabilities in HarmonyOS Next"></a>Implementation Methods for Floating Window Capabilities in HarmonyOS Next</h3><p>Before introducing floating window implementation, let’s understand the window types provided by HarmonyOS Next.  </p>
<h4 id="Window-Types"><a href="#Window-Types" class="headerlink" title="Window Types"></a>Window Types</h4><p>The window module of HarmonyOS divides window interfaces into two basic types: system windows and application windows.  </p>
<ul>
<li><strong>System Windows</strong>: These refer to windows that complete specific system functions, such as volume bars, wallpapers, notification bars, status bars, and navigation bars.  </li>
<li><strong>Application Windows</strong>: Different from system windows, these refer to windows related to application display. Depending on the displayed content, application windows are further divided into application main windows and application subwindows.  <ul>
<li>Application Main Window: Displays the application interface and appears in the “task management interface.”  </li>
<li>Application Subwindow: Displays application pop-ups.</li>
</ul>
</li>
</ul>
<p>System restrictions on application windows are as follows:  </p>
<ul>
<li>Application main and subwindows have size limits: width range <code>[320, 2560]</code> vp, height range <code>[240, 2560]</code> vp.  </li>
<li>System windows have size limits: width range <code>(0, 2560]</code> vp, height range <code>(0, 2560]</code> vp.</li>
</ul>
<p>Management of application windows is mainly reflected in:  </p>
<ul>
<li>Window Immersive Capability: Controls system windows like status bars and navigation bars to reduce their abruptness, providing the best user experience. This capability only takes effect when the application main window is in full-screen mode. Typically, application subwindows (auxiliary windows like pop-ups and floating windows) and application main windows in free window mode cannot use immersive capabilities.  </li>
<li>Floating Window: A global floating window is a special application window that can remain visible in the foreground even when the application main window and corresponding Ability go to the background. It can be used for continuing video playback in a small window after the application goes to the background or creating quick entrances like floating balls for specific applications. Applications need to apply for corresponding permissions before creating floating windows.</li>
</ul>
<h4 id="Smart-Multi-Window"><a href="#Smart-Multi-Window" class="headerlink" title="Smart Multi-Window"></a>Smart Multi-Window</h4><p>Smart multi-window is a multi-tasking solution allowing users to run multiple application windows simultaneously in floating or split-screen mode on the same screen. In smart multi-window display mode, users can arrange application window positions and sizes as needed, mainly in two forms:  </p>
<ul>
<li>Floating Window: A non-full-screen application window floating on the device screen, typically used for temporarily handling another task or short-term multi-tasking while a full-screen task is running, such as replying to messages while browsing the web.  <ul>
<li><img src="/../images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0-3.png"></li>
</ul>
</li>
<li>Split-Screen: Usually used for long-term parallel use of two applications, such as viewing shopping guides while browsing products, watching videos while playing games, or taking notes while watching educational videos.  <ul>
<li><img src="/../images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0-2.png"><br>Smart multi-window is a system capability that can be set and adapted for the entire APP, not suitable for our page-level floating window scenario.</li>
</ul>
</li>
</ul>
<h4 id="Picture-in-Picture-PiP"><a href="#Picture-in-Picture-PiP" class="headerlink" title="Picture-in-Picture (PiP)"></a>Picture-in-Picture (PiP)</h4><p>In scenarios like video playback, video conferences, and video calls, applications can use PiP capability to present video content in a small window (PiP mode). After switching to PiP mode, users can perform other interface operations to enhance the experience. Common use cases for PiP include:  </p>
<ul>
<li>Video playback  </li>
<li>Video calls  </li>
<li>Video conferences  </li>
<li>Live broadcasts</li>
</ul>
<p>Effect display:<br><img src="/../images/HarmonyOS%20Next%20%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%A7%86%E9%A2%91%E9%80%9A%E8%AF%9D%E6%82%AC%E6%B5%AE%E7%AA%97%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0-1.png"></p>
<p>PiP windows provide the following interaction methods:  </p>
<ul>
<li>Single-click: If the PiP control layer is not displayed, show it; if displayed, hide it (auto-hide after 3 seconds).  </li>
<li>Double-click: Enlarge or reduce the PiP window.  </li>
<li>Drag: Move the PiP window anywhere on the screen. Dragging to the left&#x2F;right edge hides the window, which can be restored by clicking the hidden icon on the edge.</li>
</ul>
<p>PiP restrictions:  </p>
<ul>
<li>Requires a system supporting the SystemCapability.Window.SessionManager capability (refer to the system capability usage guide).  </li>
<li>For security, applications cannot start PiP via <code>startPiP</code> when in the background. For scenarios requiring starting PiP when the application returns to the background, use <code>setAutoStartEnabled(true)</code> for automatic start.<br>Additionally, PiP is suitable for video scenes. Voice call scenes without video are unsuitable, and PiP has minimum width&#x2F;height requirements that may not meet our needs.</li>
</ul>
<h4 id="Floating-Window"><a href="#Floating-Window" class="headerlink" title="Floating Window"></a>Floating Window</h4><p>Based on window capabilities, a floating window can be created as a foreground window on top of existing tasks. Even if the task creating the floating window goes to the background, the floating window remains in the foreground, usually above all application windows. Developers can</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HarmonyOS-Next/" rel="tag"># HarmonyOS Next</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/30/C-HarmonyOS-Native-Intelligence-Speech-Recognition-Practice/" rel="prev" title="HarmonyOS Native Intelligence: Speech Recognition Practice">
      <i class="fa fa-chevron-left"></i> HarmonyOS Native Intelligence: Speech Recognition Practice
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/30/C-Introduction-to-HarmonyOS-Next-Build-Tool-Lycium-Principles/" rel="next" title="Introduction to HarmonyOS Next Build Tool Lycium Principles">
      Introduction to HarmonyOS Next Build Tool Lycium Principles <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Floating-Window-Implementation-for-Call-Effect-in-HarmonyOS-Next"><span class="nav-number">1.</span> <span class="nav-text">Floating Window Implementation for Call Effect in HarmonyOS Next</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Window-Module"><span class="nav-number">1.0.1.</span> <span class="nav-text">Window Module</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Fundamental-Role-of-the-Window-Module"><span class="nav-number">1.0.1.1.</span> <span class="nav-text">Fundamental Role of the Window Module</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Diverse-Uses-of-the-Window-Module"><span class="nav-number">1.0.1.2.</span> <span class="nav-text">Diverse Uses of the Window Module</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flexible-Switching-of-Application-Window-Modes"><span class="nav-number">1.0.1.3.</span> <span class="nav-text">Flexible Switching of Application Window Modes</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Introduction-to-Window-APIs"><span class="nav-number">1.0.2.</span> <span class="nav-text">Introduction to Window APIs</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#WindowStage-Methods"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">WindowStage Methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Window-Methods"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">Window Methods</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-Methods-for-Floating-Window-Capabilities-in-HarmonyOS-Next"><span class="nav-number">1.0.3.</span> <span class="nav-text">Implementation Methods for Floating Window Capabilities in HarmonyOS Next</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Window-Types"><span class="nav-number">1.0.3.1.</span> <span class="nav-text">Window Types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Smart-Multi-Window"><span class="nav-number">1.0.3.2.</span> <span class="nav-text">Smart Multi-Window</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Picture-in-Picture-PiP"><span class="nav-number">1.0.3.3.</span> <span class="nav-text">Picture-in-Picture (PiP)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Floating-Window"><span class="nav-number">1.0.3.4.</span> <span class="nav-text">Floating Window</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">364</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
