<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Introduction to HarmonyOS Next Data Base Vector DatabaseBackgroundAt this year’s HDC, I met the architect of the HarmonyOS data base in the exhibition hall, who introduced an intelligent assistant bas">
<meta property="og:type" content="article">
<meta property="og:title" content="Introduction to HarmonyOS Next Data Base Vector Database">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/30/25630-Introduction-to-HarmonyOS-Next-Data-Base-Vector-Database/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Introduction to HarmonyOS Next Data Base Vector DatabaseBackgroundAt this year’s HDC, I met the architect of the HarmonyOS data base in the exhibition hall, who introduced an intelligent assistant bas">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-06-30T09:55:32.000Z">
<meta property="article:modified_time" content="2025-06-30T09:55:58.033Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOS Next">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/30/25630-Introduction-to-HarmonyOS-Next-Data-Base-Vector-Database/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Introduction to HarmonyOS Next Data Base Vector Database | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/30/25630-Introduction-to-HarmonyOS-Next-Data-Base-Vector-Database/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Introduction to HarmonyOS Next Data Base Vector Database
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-30 17:55:32 / Modified: 17:55:58" itemprop="dateCreated datePublished" datetime="2025-06-30T17:55:32+08:00">2025-06-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Introduction-to-HarmonyOS-Next-Data-Base-Vector-Database"><a href="#Introduction-to-HarmonyOS-Next-Data-Base-Vector-Database" class="headerlink" title="Introduction to HarmonyOS Next Data Base Vector Database"></a>Introduction to HarmonyOS Next Data Base Vector Database</h2><h3 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h3><p>At this year’s HDC, I met the architect of the HarmonyOS data base in the exhibition hall, who introduced an intelligent assistant based on the data base to achieve edge-side capabilities. It was very appealing to hear that HarmonyOS has integrated edge-side AI into the system layer, creating unlimited possibilities for developers. After returning, I quickly checked the updated documents and found that HarmonyOS provides two language interfaces: ArkTS and C++. This article will deeply explore the technical characteristics, core concepts, operation interfaces, and advanced functions of the vector database to help developers comprehensively master this emerging technology.  </p>
<h3 id="Overview-of-Vector-Database"><a href="#Overview-of-Vector-Database" class="headerlink" title="Overview of Vector Database"></a>Overview of Vector Database</h3><p>A vector database is a database system that supports the storage, management, and retrieval of vector data, while being compatible with traditional relational data processing capabilities. Its core data type <code>floatvector</code> is used to store vectorized results, enabling the system to efficiently implement similarity search and fast retrieval functions.  </p>
<p>Starting from API version 18, the vector database officially supports data persistence through standardized interfaces, providing developers with a reliable data storage solution.  </p>
<h3 id="Basic-Concepts-and-Architecture"><a href="#Basic-Concepts-and-Architecture" class="headerlink" title="Basic Concepts and Architecture"></a>Basic Concepts and Architecture</h3><h4 id="ResultSet-Mechanism"><a href="#ResultSet-Mechanism" class="headerlink" title="ResultSet Mechanism"></a>ResultSet Mechanism</h4><p>The result set returned by a query operation is called a <strong>ResultSet</strong>, which provides a flexible way to access data, allowing developers to easily obtain the required information. The result set adopts a lazy loading strategy, loading data from the storage layer only when it is actually accessed, effectively reducing memory consumption.  </p>
<h4 id="Vector-Data-Representation"><a href="#Vector-Data-Representation" class="headerlink" title="Vector Data Representation"></a>Vector Data Representation</h4><p><code>floatvector</code> is the core data type of the vector database, used to represent high-dimensional vector data. For example, a numerical array like <code>[1.0, 3.0, 2.4, 5.1, 6.2, 11.7]</code> is a typical vector representation, widely used in fields such as image recognition and natural language processing.  </p>
<h4 id="System-Constraints-and-Limitations"><a href="#System-Constraints-and-Limitations" class="headerlink" title="System Constraints and Limitations"></a>System Constraints and Limitations</h4><p>The vector database considers the balance between performance and resources in its design, with the following key constraints:  </p>
<ul>
<li><strong>Logging Mode</strong>: The default is WAL (Write Ahead Log) mode to ensure the atomicity and durability of data writing.  </li>
<li><strong>Disk Persistence Strategy</strong>: The FULL mode ensures that data is completely written to the storage medium.  </li>
<li><strong>Connection Management</strong>: The system maintains 4 read connections and 1 write connection by default, using connection pool technology to optimize resource usage.  </li>
<li><strong>Write Concurrency</strong>: Only one write operation is supported at a time, and concurrent write requests are automatically serialized.  </li>
<li><strong>Data Size Limit</strong>: It is recommended that a single piece of data does not exceed 2MB, as exceeding this may cause reading failures.</li>
</ul>
<h4 id="Data-Cleaning-Mechanism"><a href="#Data-Cleaning-Mechanism" class="headerlink" title="Data Cleaning Mechanism"></a>Data Cleaning Mechanism</h4><p>When an application is uninstalled, the relevant database files and temporary files on the device are automatically cleared. This design simplifies application lifecycle management and avoids residual file issues.  </p>
<h3 id="Data-Types-and-Constraints"><a href="#Data-Types-and-Constraints" class="headerlink" title="Data Types and Constraints"></a>Data Types and Constraints</h3><h4 id="Supported-Data-Types"><a href="#Supported-Data-Types" class="headerlink" title="Supported Data Types"></a>Supported Data Types</h4><p>The vector database supports a rich set of field types to meet diverse data storage needs:  </p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Supported</th>
</tr>
</thead>
<tbody><tr>
<td>NULL</td>
<td>Null value</td>
<td>Yes</td>
</tr>
<tr>
<td>INTEGER</td>
<td>Integer type</td>
<td>Yes</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>Floating-point type</td>
<td>Yes</td>
</tr>
<tr>
<td>TEXT</td>
<td>String type</td>
<td>Yes</td>
</tr>
<tr>
<td>BLOB</td>
<td>Binary type</td>
<td>Yes</td>
</tr>
<tr>
<td>FLOATVECTOR</td>
<td>Vector data type</td>
<td>Yes</td>
</tr>
</tbody></table>
<h4 id="Field-Constraint-Mechanism"><a href="#Field-Constraint-Mechanism" class="headerlink" title="Field Constraint Mechanism"></a>Field Constraint Mechanism</h4><p>To ensure data integrity, the system provides various field constraints:  </p>
<ul>
<li><strong>NOT NULL</strong>: Ensures that the field is not empty.  </li>
<li><strong>DEFAULT</strong>: Sets the default value for the field.  </li>
<li><strong>UNIQUE</strong>: Ensures the uniqueness of the field value.  </li>
<li><strong>PRIMARY KEY</strong>: Defines the primary key index.</li>
</ul>
<p>Note: The system currently does not support foreign key constraints (FOREIGN) and CHECK constraints.  </p>
<h3 id="Query-Language-Features"><a href="#Query-Language-Features" class="headerlink" title="Query Language Features"></a>Query Language Features</h3><h4 id="Supported-Query-Clauses"><a href="#Supported-Query-Clauses" class="headerlink" title="Supported Query Clauses"></a>Supported Query Clauses</h4><p>The vector database supports rich SQL query clauses:  </p>
<ul>
<li><strong>WHERE</strong>: Conditional filtering.  </li>
<li><strong>LIMIT</strong>: Result quantity limitation.  </li>
<li><strong>ORDER BY</strong>: Multi-column sorting, especially supporting vector distance sorting.  </li>
<li><strong>GROUP BY</strong>: Data grouping.  </li>
<li><strong>HAVING</strong>: Aggregate result filtering.  </li>
<li><strong>INDEXED BY</strong>: Forces the use of a specific index.  </li>
<li><strong>DISTINCT</strong>: Deduplication (not yet supported).</li>
</ul>
<p>It is particularly noteworthy that the vector distance sorting function supports two distance metrics:  </p>
<ul>
<li><code>&lt;-&gt;</code>: L2 Euclidean distance.  </li>
<li><code>&lt;=&gt;</code>: Cosine similarity.</li>
</ul>
<h4 id="Set-Operations"><a href="#Set-Operations" class="headerlink" title="Set Operations"></a>Set Operations</h4><p>Supports standard set operations:  </p>
<ul>
<li><strong>UNION</strong>: Merges results and removes duplicates.  </li>
<li><strong>UNION ALL</strong>: Merges results and retains duplicate items.</li>
</ul>
<h4 id="Operator-System"><a href="#Operator-System" class="headerlink" title="Operator System"></a>Operator System</h4><p>The system provides comprehensive operator support:  </p>
<ul>
<li><strong>Arithmetic Operations</strong>: +, -, *, &#x2F;, %.  </li>
<li><strong>Comparison Operations</strong>: &#x3D;&#x3D;, &#x3D;, !&#x3D;, &gt;, &gt;&#x3D;, &lt;, &lt;&#x3D;.  </li>
<li><strong>Logical Operations</strong>: AND, BETWEEN, EXISTS, etc. (12 types in total).  </li>
<li><strong>String Concatenation</strong>: ||.  </li>
<li><strong>Bitwise Operations</strong>: &amp;, |, ~, &lt;&lt;, &gt;&gt;.  </li>
<li><strong>Vector Distance Operations</strong>: &lt;-&gt;, &lt;&#x3D; (support use in aggregate functions).</li>
</ul>
<h4 id="Time-and-Date-Functions"><a href="#Time-and-Date-Functions" class="headerlink" title="Time and Date Functions"></a>Time and Date Functions</h4><p>Built-in multiple time processing functions:  </p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Format</th>
</tr>
</thead>
<tbody><tr>
<td>DATE</td>
<td>Date</td>
<td>“YYYY-MM-DD”</td>
</tr>
<tr>
<td>TIME</td>
<td>Time</td>
<td>“HH:MM:SS”</td>
</tr>
<tr>
<td>DATETIME</td>
<td>Date and time</td>
<td>“YYYY-MM-DD HH:MM:SS”</td>
</tr>
<tr>
<td>JULIANDAY</td>
<td>Julian day</td>
<td>Number of days</td>
</tr>
<tr>
<td>STRFTIME</td>
<td>Format date</td>
<td>Custom format</td>
</tr>
</tbody></table>
<h3 id="Aggregation-and-Analysis-Functions"><a href="#Aggregation-and-Analysis-Functions" class="headerlink" title="Aggregation and Analysis Functions"></a>Aggregation and Analysis Functions</h3><p>The system provides rich analysis functions:  </p>
<ul>
<li><strong>COUNT</strong>: Row count statistics.  </li>
<li><strong>MAX&#x2F;MIN</strong>: Extreme value calculation.  </li>
<li><strong>AVG</strong>: Average value.  </li>
<li><strong>SUM</strong>: Total sum.  </li>
<li><strong>RANDOM</strong>: Random number generation.  </li>
<li><strong>ABS</strong>: Absolute value.  </li>
<li><strong>UPPER&#x2F;LOWER</strong>: String case conversion.  </li>
<li><strong>LENGTH</strong>: String length.</li>
</ul>
<p>These functions can be combined with vector operations to implement complex data analysis requirements.  </p>
<h3 id="Development-Interfaces-and-Practices"><a href="#Development-Interfaces-and-Practices" class="headerlink" title="Development Interfaces and Practices"></a>Development Interfaces and Practices</h3><h4 id="Environment-Detection-and-Initialization"><a href="#Environment-Detection-and-Initialization" class="headerlink" title="Environment Detection and Initialization"></a>Environment Detection and Initialization</h4><p>The first step in development is to detect whether the system supports the vector database:  </p>
<pre><code class="language-typescript">import &#123; relationalStore &#125; from &#39;@kit.ArkData&#39;;
import &#123; UIAbility &#125; from &#39;@kit.AbilityKit&#39;;

class EntryAbility extends UIAbility &#123;
  async onWindowStageCreate(windowStage: window.WindowStage) &#123;
    let ret = relationalStore.isVectorSupported();
    if (!ret) &#123;
      console.error(`vectorDB is not supported.`);
      return;
    &#125;
    // Initialize the database
  &#125;
&#125;
</code></pre>
<h4 id="Database-Creation-and-Configuration"><a href="#Database-Creation-and-Configuration" class="headerlink" title="Database Creation and Configuration"></a>Database Creation and Configuration</h4><p>Create a database instance through the <code>getRdbStore</code> interface:  </p>
<pre><code class="language-typescript">const STORE_CONFIG: relationalStore.StoreConfig = &#123;
  name: &#39;VectorTest.db&#39;,
  securityLevel: relationalStore.SecurityLevel.S1,
  vector: true // Enable vector support
&#125;;

relationalStore.getRdbStore(this.context, STORE_CONFIG)
  .then(async (rdbStore) =&gt; &#123;
    // Table creation operation
    const SQL_CREATE_TABLE = &#39;CREATE TABLE IF NOT EXISTS test (id INTEGER PRIMARY KEY, repr floatvector(2));&#39;;
    await rdbStore.execute(SQL_CREATE_TABLE, 0, undefined);
  &#125;)
  .catch((err) =&gt; &#123;
    console.error(`Get RdbStore failed: $&#123;err.code&#125;, $&#123;err.message&#125;`);
  &#125;);
</code></pre>
<h4 id="Data-Operation-Practices"><a href="#Data-Operation-Practices" class="headerlink" title="Data Operation Practices"></a>Data Operation Practices</h4><h5 id="Insert-Data"><a href="#Insert-Data" class="headerlink" title="Insert Data"></a>Insert Data</h5><p>Supports two methods: parameter binding and non-binding:  </p>
<pre><code class="language-typescript">// Parameter binding method
const vectorValue: Float32Array = Float32Array.from([1.2, 2.3]);
await store.execute(&quot;insert into test VALUES(?, ?);&quot;, 0, [0, vectorValue]);

// Non-binding method
await store.execute(&quot;insert into test VALUES(1, &#39;[1.3, 2.4]&#39;);&quot;, 0, undefined);
</code></pre>
<h5 id="Update-and-Delete"><a href="#Update-and-Delete" class="headerlink" title="Update and Delete"></a>Update and Delete</h5><pre><code class="language-typescript">// Vector update
const vectorValue1: Float32Array = Float32Array.from([2.1, 3.2]);
await store.execute(&quot;update test set repr = ? where id = ?&quot;, 0, [vectorValue1, 0]);

// Data deletion
await store.execute(&quot;delete from test where id = ?&quot;, 0, [0]);
</code></pre>
<h4 id="Query-Operations"><a href="#Query-Operations" class="headerlink" title="Query Operations"></a>Query Operations</h4><h5 id="Basic-Query"><a href="#Basic-Query" class="headerlink" title="Basic Query"></a>Basic Query</h5><pre><code class="language-typescript">// Parameterized query
const vectorValue2: Float32Array = Float32Array.from([6.2, 7.3]);
let resultSet = await store.querySql(
  &quot;select id, repr &lt;-&gt; ? as distance from test where id &gt; ? order by repr &lt;-&gt; ? limit 5;&quot;,
  [vectorValue2, 0, vectorValue2]
);

while (resultSet.goToNextRow()) &#123;
  let id = resultSet.getValue(0);
  let dis = resultSet.getValue(1);
&#125;
resultSet.close();
</code></pre>
<h5 id="Subquery-and-Aggregation"><a href="#Subquery-and-Aggregation" class="headerlink" title="Subquery and Aggregation"></a>Subquery and Aggregation</h5><pre><code class="language-typescript">// Subquery example
let resultSet = await store.querySql(
  &quot;select * from test where id in (select id from test1);&quot;
);
resultSet.close();

// Aggregation query
resultSet = await store.querySql(
  &quot;select * from test where repr &lt;-&gt; &#39;[1.0, 1.0]&#39; &gt; 0 group by id having max(repr &lt;=&gt; &#39;[1.0, 1.0]&#39;);&quot;
);
resultSet.close();
</code></pre>
<h3 id="Advanced-Features"><a href="#Advanced-Features" class="headerlink" title="Advanced Features"></a>Advanced Features</h3><h4 id="Vector-Index-Optimization"><a href="#Vector-Index-Optimization" class="headerlink" title="Vector Index Optimization"></a>Vector Index Optimization</h4><p>Vector indexing is a key technology to improve query performance. The system supports the following index types:  </p>
<table>
<thead>
<tr>
<th>Index Type</th>
<th>Description</th>
<th>Applicable Scenarios</th>
</tr>
</thead>
<tbody><tr>
<td>gsdiskann</td>
<td>High-dimensional dense vector index</td>
<td>Text embeddings, image features, etc.</td>
</tr>
</tbody></table>
<h5 id="Index-Creation-Syntax"><a href="#Index-Creation-Syntax" class="headerlink" title="Index Creation Syntax"></a>Index Creation Syntax</h5><p>Basic syntax:  </p>
<pre><code class="language-sql">CREATE INDEX [IF NOT EXISTS] index_name ON table_name USING index_type (column_name dist_function);
</code></pre>
<p>Extended syntax (with parameters):  </p>
<pre><code class="language-sql">CREATE INDEX [basic syntax] WITH(parameter = value [, ...]);
</code></pre>
<p>Parameter configuration:  </p>
<ul>
<li><code>QUEUE_SIZE</code>: [10, 1000], default 20.  </li>
<li><code>OUT_DEGREE</code>: [1, 1200], default 60.</li>
</ul>
<h5 id="Index-Management-Example"><a href="#Index-Management-Example" class="headerlink" title="Index Management Example"></a>Index Management Example</h5><pre><code class="language-typescript">// Create an L2 distance index
await store.execute(
  &quot;CREATE INDEX diskann_l2_idx ON test USING GSDISKANN(repr L2);&quot;
);

// Create an index with parameters
await store.execute(
  &quot;CREATE INDEX diskann_l2_idx ON test USING GSDISKANN(repr L2) WITH (queue_size=20, out_degree=50);&quot;
);

// Delete an index
await store.execute(&quot;DROP INDEX test.diskann_l2_idx;&quot;);
</code></pre>
<h4 id="Index-Hit-Conditions"><a href="#Index-Hit-Conditions" class="headerlink" title="Index Hit Conditions"></a>Index Hit Conditions</h4><p>To ensure that queries can utilize vector indexes, the following conditions must be met:  </p>
<ol>
<li>The query must be of the <code>ORDER BY + LIMIT</code> type.  </li>
<li><code>ORDER BY</code> can only have one vector distance sorting condition.  </li>
<li><code>DESC</code> descending order cannot be used.  </li>
<li>The query distance metric must be consistent with that when the index was created.</li>
</ol>
<h4 id="Disk-Fragment-Management"><a href="#Disk-Fragment-Management" class="headerlink" title="Disk Fragment Management"></a>Disk Fragment Management</h4><p>Starting from API version 20, manual fragment recovery is supported:  </p>
<pre><code class="language-typescript">// Manually trigger fragment recovery
await store.execute(&quot;PRAGMA DISKANN_ASYNC_COLLECTING;&quot;);
</code></pre>
<p>This function solves problems in the following scenarios:  </p>
<ul>
<li>Closing the database immediately after deleting vectors.  </li>
<li>No subsequent operations after batch deletions.</li>
</ul>
<h3 id="Data-Management-Strategies"><a href="#Data-Management-Strategies" class="headerlink" title="Data Management Strategies"></a>Data Management Strategies</h3><h4 id="Data-Aging-Configuration"><a href="#Data-Aging-Configuration" class="headerlink" title="Data Aging Configuration"></a>Data Aging Configuration</h4><p>Implement automated data cleaning through table creation parameters:  </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>time_col</td>
<td>Yes</td>
<td>Time column name (integer type)</td>
</tr>
<tr>
<td>interval</td>
<td>No</td>
<td>Aging check interval (default 1 day)</td>
</tr>
<tr>
<td>ttl</td>
<td>No</td>
<td>Data retention time (default 3 months)</td>
</tr>
<tr>
<td>max_num</td>
<td>No</td>
<td>Maximum data volume limit (default 1024)</td>
</tr>
</tbody></table>
<p>Example configuration:  </p>
<pre><code class="language-sql">await store.execute(
  &quot;CREATE TABLE test2(rec_time integer not null) WITH (time_col = &#39;rec_time&#39;, interval = &#39;5 minute&#39;);&quot;
);
</code></pre>
<h4 id="Data-Compression-Function"><a href="#Data-Compression-Function" class="headerlink" title="Data Compression Function"></a>Data Compression Function</h4><p>Supports compressed storage of TEXT type columns:  </p>
<pre><code class="language-sql">await store.execute(
  &quot;CREATE TABLE IF NOT EXISTS test3 (time integer not null, content text) with (time_col = &#39;time&#39;, interval = &#39;5 minute&#39;, compress_col = &#39;content&#39;);&quot;
);
</code></pre>
<h3 id="Summary-and-Outlook"><a href="#Summary-and-Outlook" class="headerlink" title="Summary and Outlook"></a>Summary and Outlook</h3><p>As an emerging data management technology, vector databases are reshaping the data infrastructure of the AI era. This article has provided a detailed introduction to the core features, development interfaces, and advanced functions of vector databases, offering a comprehensive technical guide for developers.  </p>
<p>With the popularity of large models and generative AI, the importance of vector databases will further increase. In the future, we can expect to see smarter indexing algorithms, more efficient query optimization, and tighter integration with AI frameworks, making vector databases the core component of AI-native applications.  </p>
<p>Developers should pay close attention to the development of vector database technology, master its core principles and usage skills, and thus gain an advantage in AI-driven application development.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HarmonyOS-Next/" rel="tag"># HarmonyOS Next</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/30/25630-Guide-to-Developing-the-First-Cangjie-and-ArkTS-Hybrid-HarmonyOS-Next-Application/" rel="prev" title="Guide to Developing the First Cangjie and ArkTS Hybrid HarmonyOS Next Application">
      <i class="fa fa-chevron-left"></i> Guide to Developing the First Cangjie and ArkTS Hybrid HarmonyOS Next Application
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/30/C-HarmonyOS-Next-Layout-Practice-1-Implementation-of-Common-TitleBar/" rel="next" title="HarmonyOS Next Layout Practice 1: Implementation of Common TitleBar">
      HarmonyOS Next Layout Practice 1: Implementation of Common TitleBar <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-to-HarmonyOS-Next-Data-Base-Vector-Database"><span class="nav-number">1.</span> <span class="nav-text">Introduction to HarmonyOS Next Data Base Vector Database</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Background"><span class="nav-number">1.1.</span> <span class="nav-text">Background</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overview-of-Vector-Database"><span class="nav-number">1.2.</span> <span class="nav-text">Overview of Vector Database</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Basic-Concepts-and-Architecture"><span class="nav-number">1.3.</span> <span class="nav-text">Basic Concepts and Architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ResultSet-Mechanism"><span class="nav-number">1.3.1.</span> <span class="nav-text">ResultSet Mechanism</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vector-Data-Representation"><span class="nav-number">1.3.2.</span> <span class="nav-text">Vector Data Representation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#System-Constraints-and-Limitations"><span class="nav-number">1.3.3.</span> <span class="nav-text">System Constraints and Limitations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Cleaning-Mechanism"><span class="nav-number">1.3.4.</span> <span class="nav-text">Data Cleaning Mechanism</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-Types-and-Constraints"><span class="nav-number">1.4.</span> <span class="nav-text">Data Types and Constraints</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Supported-Data-Types"><span class="nav-number">1.4.1.</span> <span class="nav-text">Supported Data Types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Field-Constraint-Mechanism"><span class="nav-number">1.4.2.</span> <span class="nav-text">Field Constraint Mechanism</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Query-Language-Features"><span class="nav-number">1.5.</span> <span class="nav-text">Query Language Features</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Supported-Query-Clauses"><span class="nav-number">1.5.1.</span> <span class="nav-text">Supported Query Clauses</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Set-Operations"><span class="nav-number">1.5.2.</span> <span class="nav-text">Set Operations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Operator-System"><span class="nav-number">1.5.3.</span> <span class="nav-text">Operator System</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Time-and-Date-Functions"><span class="nav-number">1.5.4.</span> <span class="nav-text">Time and Date Functions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Aggregation-and-Analysis-Functions"><span class="nav-number">1.6.</span> <span class="nav-text">Aggregation and Analysis Functions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Development-Interfaces-and-Practices"><span class="nav-number">1.7.</span> <span class="nav-text">Development Interfaces and Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Environment-Detection-and-Initialization"><span class="nav-number">1.7.1.</span> <span class="nav-text">Environment Detection and Initialization</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Database-Creation-and-Configuration"><span class="nav-number">1.7.2.</span> <span class="nav-text">Database Creation and Configuration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Operation-Practices"><span class="nav-number">1.7.3.</span> <span class="nav-text">Data Operation Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Insert-Data"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">Insert Data</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Update-and-Delete"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">Update and Delete</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Query-Operations"><span class="nav-number">1.7.4.</span> <span class="nav-text">Query Operations</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Basic-Query"><span class="nav-number">1.7.4.1.</span> <span class="nav-text">Basic Query</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Subquery-and-Aggregation"><span class="nav-number">1.7.4.2.</span> <span class="nav-text">Subquery and Aggregation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Features"><span class="nav-number">1.8.</span> <span class="nav-text">Advanced Features</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vector-Index-Optimization"><span class="nav-number">1.8.1.</span> <span class="nav-text">Vector Index Optimization</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Index-Creation-Syntax"><span class="nav-number">1.8.1.1.</span> <span class="nav-text">Index Creation Syntax</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Index-Management-Example"><span class="nav-number">1.8.1.2.</span> <span class="nav-text">Index Management Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Index-Hit-Conditions"><span class="nav-number">1.8.2.</span> <span class="nav-text">Index Hit Conditions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Disk-Fragment-Management"><span class="nav-number">1.8.3.</span> <span class="nav-text">Disk Fragment Management</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-Management-Strategies"><span class="nav-number">1.9.</span> <span class="nav-text">Data Management Strategies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Aging-Configuration"><span class="nav-number">1.9.1.</span> <span class="nav-text">Data Aging Configuration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Compression-Function"><span class="nav-number">1.9.2.</span> <span class="nav-text">Data Compression Function</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary-and-Outlook"><span class="nav-number">1.10.</span> <span class="nav-text">Summary and Outlook</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">364</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
