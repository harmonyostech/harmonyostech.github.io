<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Mastering Image and Video Selection in HarmonyOS NextBackgroundIn chat applications, sending photos and videos from the album or capturing them via the camera is a common function. On Android and iOS,">
<meta property="og:type" content="article">
<meta property="og:title" content="Mastering Image and Video Selection in HarmonyOS Next">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/30/C-Mastering-Image-and-Video-Selection-in-HarmonyOS-Next/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Mastering Image and Video Selection in HarmonyOS NextBackgroundIn chat applications, sending photos and videos from the album or capturing them via the camera is a common function. On Android and iOS,">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9-1.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9.jpg">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9-5.jpg">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9-3.jpg">
<meta property="article:published_time" content="2025-06-30T14:10:39.000Z">
<meta property="article:modified_time" content="2025-07-13T09:06:24.600Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOS Next">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://harmonyostech.github.io/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9.png">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/30/C-Mastering-Image-and-Video-Selection-in-HarmonyOS-Next/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Mastering Image and Video Selection in HarmonyOS Next | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/30/C-Mastering-Image-and-Video-Selection-in-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Mastering Image and Video Selection in HarmonyOS Next
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-30 22:10:39" itemprop="dateCreated datePublished" datetime="2025-06-30T22:10:39+08:00">2025-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-07-13 17:06:24" itemprop="dateModified" datetime="2025-07-13T17:06:24+08:00">2025-07-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Mastering-Image-and-Video-Selection-in-HarmonyOS-Next"><a href="#Mastering-Image-and-Video-Selection-in-HarmonyOS-Next" class="headerlink" title="Mastering Image and Video Selection in HarmonyOS Next"></a>Mastering Image and Video Selection in HarmonyOS Next</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>In chat applications, sending photos and videos from the album or capturing them via the camera is a common function. On Android and iOS, most apps use API-defined UIs to implement album photo&#x2F;video selection and camera capture, supporting:  </p>
<ol>
<li><strong>Album selection</strong>:  <ul>
<li>Single or multiple selection.  </li>
<li>Option to select original image quality.  </li>
<li>Filters for video file size and duration.  </li>
<li>Tap to enlarge and preview images.</li>
</ul>
</li>
<li><strong>Camera capture</strong>:  <ul>
<li>Tap to take photos, long-press to record videos.  </li>
<li>Video recording with max&#x2F;min duration limits.  </li>
<li>Preview after capture&#x2F;recording.</li>
</ul>
</li>
</ol>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9.png"><br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9-1.png"></p>
<p>To implement these features in HarmonyOS apps, the system provides corresponding APIs requiring several permissions:  </p>
<ul>
<li>System album read permission  </li>
<li>Microphone permission  </li>
<li>Camera permission</li>
</ul>
<h2 id="Introduction-to-HarmonyOS-Permission-System"><a href="#Introduction-to-HarmonyOS-Permission-System" class="headerlink" title="Introduction to HarmonyOS Permission System"></a>Introduction to HarmonyOS Permission System</h2><p>Compared to Android, HarmonyOS offers stricter permission control, governed by its application permission management strategy. It provides a universal way for apps to access system resources (e.g., contacts) and capabilities (e.g., camera, microphone) to protect data (including user personal data) and functions from misuse or malicious use. Permission protection objects fall into two categories:  </p>
<ul>
<li><strong>Data</strong>: Personal data (photos, contacts, calendar, location) and device data (device ID, camera, microphone).  </li>
<li><strong>Functions</strong>: Device functions (accessing camera&#x2F;microphone, making calls, networking) and app functions (floating windows, creating shortcuts).</li>
</ul>
<p>HarmonyOS classifies permissions by authorization method into:  </p>
<ol>
<li><strong>system_grant (System authorization)</strong>: For non-sensitive data&#x2F;operations with controlled impacts. The system automatically grants these permissions during app installation.  </li>
<li><strong>user_grant (User authorization)</strong>: For sensitive data&#x2F;operations with potential severe impacts. Requires both manifest declaration and dynamic runtime user authorization via a pop-up.</li>
</ol>
<p>For example, microphone and camera permissions are user-grant types, with detailed usage rationales listed in the <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/permissions-for-all-V5">Application Permission List</a>. Apps must display requested user-grant permissions on the AppGallery detail page.  </p>
<p>Another key concept is <strong>APL (Ability Privilege Level)</strong>:  </p>
<table>
<thead>
<tr>
<th align="left">APL Level</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">normal</td>
<td align="left">Default level for all apps.</td>
</tr>
<tr>
<td align="left">system_basic</td>
<td align="left">Provides basic system services.</td>
</tr>
<tr>
<td align="left">system_core</td>
<td align="left">Provides core OS capabilities (cannot be configured for normal apps).</td>
</tr>
</tbody></table>
<p>Permissions are categorized by APL with varying access scopes:  </p>
<table>
<thead>
<tr>
<th align="left">APL Level</th>
<th align="left">Description</th>
<th align="left">Access Scope</th>
</tr>
</thead>
<tbody><tr>
<td align="left">normal</td>
<td align="left">Access to ordinary system resources (e.g., Wi-Fi config, camera capture) with low privacy risk.</td>
<td align="left">Apps with APL ≥ normal.</td>
</tr>
<tr>
<td align="left">system_basic</td>
<td align="left">Access to basic OS services (e.g., system settings, authentication) with higher risk.</td>
<td align="left">1. Apps with APL ≥ system_basic.<br>2. Some permissions are restrictively open to normal apps (described as <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/restricted-permissions-V5">Restricted Permissions</a>).</td>
</tr>
<tr>
<td align="left">system_core</td>
<td align="left">Access to core OS resources critical for system operation.</td>
<td align="left">1. System apps with APL &#x3D; system_core.</td>
</tr>
</tbody></table>
<h3 id="Design-Rationale"><a href="#Design-Rationale" class="headerlink" title="Design Rationale"></a>Design Rationale</h3><ul>
<li><p><strong>Authorization methods</strong>:  </p>
<ul>
<li>system_grant is similar to Android’s normal permissions (declared in the manifest), avoiding unnecessary user prompts for non-sensitive operations (e.g., network access).  </li>
<li>user_grant requires explicit user consent for sensitive operations (e.g., camera access), aligning with privacy best practices.</li>
</ul>
</li>
<li><p><strong>Permission levels</strong>:  </p>
<ul>
<li>normal: For common app functions (e.g., camera, microphone) with clear usage scenarios.  </li>
<li>system_core: Exclusive to system apps to prevent critical system damage (e.g., like Android’s root permissions).  </li>
<li>system_basic: For system apps, with restricted openness to normal apps (e.g., album read permission is restricted because it allows silent data transmission, unlike camera&#x2F;microphone which require active user interaction).</li>
</ul>
</li>
</ul>
<h2 id="System-Picker-Permission-Free-Resource-Access"><a href="#System-Picker-Permission-Free-Resource-Access" class="headerlink" title="System Picker: Permission-Free Resource Access"></a>System Picker: Permission-Free Resource Access</h2><p>Selecting images&#x2F;videos requires system_basic restricted permissions, while camera&#x2F;microphone access needs user authorization. To streamline workflows, HarmonyOS provides system Pickers—components allowing permission-free resource selection:  </p>
<ul>
<li>The system Picker (file&#x2F;photo&#x2F;contact selector) is implemented by an independent system process.  </li>
<li>Apps obtain resources via cross-process scheduling, with temporary and restricted access rights granted by the user’s explicit actions.</li>
</ul>
<h2 id="Selecting-from-Album"><a href="#Selecting-from-Album" class="headerlink" title="Selecting from Album"></a>Selecting from Album</h2><p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9.jpg"><br>HarmonyOS provides <code>photoAccessHelper.PhotoViewPicker()</code> to access album content. Example usage:  </p>
<pre><code class="language-typescript">import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;
async function example01() &#123;
  try &#123;
    let photoSelectOptions = new photoAccessHelper.PhotoSelectOptions();
    photoSelectOptions.MIMEType = photoAccessHelper.PhotoViewMIMETypes.IMAGE_TYPE;
    photoSelectOptions.maxSelectNumber = 5;
    
    let photoPicker = new photoAccessHelper.PhotoViewPicker();
    photoPicker.select(photoSelectOptions).then((photoSelectResult: photoAccessHelper.PhotoSelectResult) =&gt; &#123;
      console.info(&#39;PhotoViewPicker.select successfully, PhotoSelectResult uri: &#39; + JSON.stringify(photoSelectResult));
    &#125;).catch((err: BusinessError) =&gt; &#123;
      console.error(`PhotoViewPicker.select failed with err: $&#123;err.code&#125;, $&#123;err.message&#125;`);
    &#125;);
  &#125; catch (error) &#123;
    let err: BusinessError = error as BusinessError;
    console.error(`PhotoViewPicker failed with err: $&#123;err.code&#125;, $&#123;err.message&#125;`);
  &#125;
&#125;
</code></pre>
<h3 id="Key-Objects"><a href="#Key-Objects" class="headerlink" title="Key Objects"></a>Key Objects</h3><h4 id="PhotoSelectOptions-selection-parameters"><a href="#PhotoSelectOptions-selection-parameters" class="headerlink" title="PhotoSelectOptions (selection parameters)"></a><code>PhotoSelectOptions</code> (selection parameters)</h4><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">isEditSupported11+</td>
<td align="left">boolean</td>
<td align="left">No</td>
<td align="left">Enable photo editing (default: true).</td>
</tr>
<tr>
<td align="left">isOriginalSupported12+</td>
<td align="left">boolean</td>
<td align="left">No</td>
<td align="left">Show “Select Original” button (default: true).<br><br><strong>Feature API:</strong> Available in ability models from API version 12.</td>
</tr>
<tr>
<td align="left">subWindowName12+</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">Subwindow name.<br><br><strong>Feature API:</strong> Available in ability models from API version 12.</td>
</tr>
</tbody></table>
<p>Inherits from <code>BaseSelectOptions</code> with additional configs:  </p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">MIMEType10+</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-photoaccesshelper-V5#photoviewmimetypes">PhotoViewMIMETypes</a></td>
<td align="left">No</td>
<td align="left">Allowed media types (default: images + videos).<br><br><strong>Feature API:</strong> Available in ability models from API version 11.</td>
</tr>
<tr>
<td align="left">maxSelectNumber10+</td>
<td align="left">number</td>
<td align="left">No</td>
<td align="left">Max selection count (max: 500, default: 50).<br><br><strong>Feature API:</strong> Available in ability models from API version 11.</td>
</tr>
<tr>
<td align="left">isPhotoTakingSupported11+</td>
<td align="left">boolean</td>
<td align="left">No</td>
<td align="left">Enable in-picker camera (default: true).<br><br><strong>Feature API:</strong> Available in ability models from API version 11.</td>
</tr>
<tr>
<td align="left">isSearchSupported11+</td>
<td align="left">boolean</td>
<td align="left">No</td>
<td align="left">Enable search (default: true).<br><br><strong>Feature API:</strong> Available in ability models from API version 11.</td>
</tr>
<tr>
<td align="left">recommendationOptions11+</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-photoaccesshelper-V5#recommendationoptions11">RecommendationOptions</a></td>
<td align="left">No</td>
<td align="left">Photo recommendation configs.<br><br><strong>Feature API:</strong> Available in ability models from API version 11.</td>
</tr>
<tr>
<td align="left">preselectedUris11+</td>
<td align="left">Array<string></td>
<td align="left">No</td>
<td align="left">Preselected media URIs.<br><br><strong>Feature API:</strong> Available in ability models from API version 11.</td>
</tr>
<tr>
<td align="left">isPreviewForSingleSelectionSupported12+</td>
<td align="left">boolean</td>
<td align="left">No</td>
<td align="left">Enable full-screen preview for single selection (default: true).<br><br><strong>Feature API:</strong> Available in ability models from API version 12.</td>
</tr>
</tbody></table>
<h4 id="PhotoSelectResult-selection-result"><a href="#PhotoSelectResult-selection-result" class="headerlink" title="PhotoSelectResult (selection result)"></a><code>PhotoSelectResult</code> (selection result)</h4><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Readable</th>
<th align="left">Writable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">photoUris</td>
<td align="left">Array<string></td>
<td align="left">Yes</td>
<td align="left">Yes</td>
<td align="left">URIs of selected media (usable via temporary authorization with <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-photoaccesshelper-V5#getassets">photoAccessHelper.getAssets</a>).</td>
</tr>
<tr>
<td align="left">isOriginalPhoto</td>
<td align="left">boolean</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
<td align="left">Whether original quality was selected.</td>
</tr>
</tbody></table>
<h3 id="Distinguishing-Image-and-Video-URIs"><a href="#Distinguishing-Image-and-Video-URIs" class="headerlink" title="Distinguishing Image and Video URIs"></a>Distinguishing Image and Video URIs</h3><p>Use <code>photoAccessHelper</code> to parse media info:  </p>
<pre><code class="language-typescript">public async uriGetAssets(uri: string): Promise&lt;photoAccessHelper.PhotoAsset | undefined&gt; &#123;  
  try &#123;  
    const context = getContext(this) as common.UIAbilityContext;  
    const phAccessHelper = photoAccessHelper.getPhotoAccessHelper(context);  
    const predicates: dataSharePredicates.DataSharePredicates = new dataSharePredicates.DataSharePredicates();  
    predicates.equalTo(&#39;uri&#39;, uri);  
    const fetchOption: photoAccessHelper.FetchOptions = &#123;  
      fetchColumns: [photoAccessHelper.PhotoKeys.WIDTH, photoAccessHelper.PhotoKeys.HEIGHT, photoAccessHelper.PhotoKeys.TITLE, photoAccessHelper.PhotoKeys.DURATION],  
      predicates: predicates  
    &#125;;  
    const fetchResult: photoAccessHelper.FetchResult&lt;photoAccessHelper.PhotoAsset&gt; = await phAccessHelper.getAssets(fetchOption);  
    const asset: photoAccessHelper.PhotoAsset = await fetchResult.getFirstObject();  
    Logg.i(TAG, `asset displayName: $&#123;asset.displayName&#125;`);  
    Logg.i(TAG, `asset uri: $&#123;asset.uri&#125;`);  
    Logg.i(TAG, `asset photoType: $&#123;asset.photoType&#125;`);  
    return asset;  
  &#125; catch (error) &#123;  
    Logg.e(TAG, `uriGetAssets failed: $&#123;JSON.stringify(error)&#125;`);  
  &#125;  
  return undefined;  
&#125;
</code></pre>
<p>The <code>photoType</code> property of <code>photoAccessHelper.PhotoAsset</code> indicates media type (image&#x2F;video).  </p>
<h3 id="Obtaining-Video-Thumbnails"><a href="#Obtaining-Video-Thumbnails" class="headerlink" title="Obtaining Video Thumbnails"></a>Obtaining Video Thumbnails</h3><p>Use <code>getThumbnail()</code> on <code>photoAccessHelper.PhotoAsset</code> to get a <code>PixelMap</code>, then convert it to an image:  </p>
<pre><code class="language-typescript">import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;
async function Demo() &#123;
  const readBuffer = new ArrayBuffer(96); // height * width * 4  
  if (pixelMap) &#123;
    pixelMap.readPixelsToBuffer(readBuffer, (error: BusinessError, res: void) =&gt; &#123;
      if (error) &#123;
        console.error(`Failed to read pixel data: $&#123;error.code&#125;, $&#123;error.message&#125;`);
        return;
      &#125;
      console.info(&#39;Pixel data read successfully.&#39;);
    &#125;);
  &#125;
&#125;
</code></pre>
<p>Use <code>image.createImagePacker()</code> to write the <code>PixelMap</code> to a file:  </p>
<pre><code class="language-typescript">let imagePath: string | undefined = undefined;  
const pixelMap = await matedata.getThumbnail();  
const cacheDir = getContext().cacheDir;  
imagePath = `$&#123;cacheDir&#125;/thumbnail$&#123;Date.now()&#125;.jpg`;  
const dstFile = fs.openSync(imagePath, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);  
const packOpts: image.PackingOption = &#123; format: &quot;image/jpeg&quot;, quality: 98 &#125;;  
await image.createImagePacker().packToFile(pixelMap, dstFile.fd, packOpts);  
fs.close(dstFile);  
</code></pre>
<h2 id="Capturing-via-Camera"><a href="#Capturing-via-Camera" class="headerlink" title="Capturing via Camera"></a>Capturing via Camera</h2><p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9-5.jpg"><br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.09.10%20-%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%80%89%E6%8B%A9-3.jpg"><br>Two methods to launch the system camera:  </p>
<h3 id="Using-Want"><a href="#Using-Want" class="headerlink" title="Using Want"></a>Using Want</h3><pre><code class="language-typescript">invokeCamera(callback: (uri: string) =&gt; void) &#123;  
  const context = getContext(this) as common.UIAbilityContext;  
  const want: Want = &#123;  
    action: &#39;ohos.want.action.imageCapture&#39;,  
    parameters: &#123;  
      &quot;callBundleName&quot;: context.abilityInfo.bundleName,  
    &#125;  
  &#125;;  
  const result: (error: BusinessError, data: common.AbilityResult) =&gt; void =  
    (error: BusinessError, data: common.AbilityResult) =&gt; &#123;  
      if (error &amp;&amp; error.code !== 0) &#123;  
        console.log(`$&#123;TAG_CAMERA_ERROR&#125; $&#123;JSON.stringify(error.message)&#125;`);  
        return;  
      &#125;  
      const resultUri: string = data.want?.parameters?.resourceUri as string;  
      if (callback &amp;&amp; resultUri) &#123;  
        callback(resultUri);  
      &#125;  
    &#125;;  
  context.startAbilityForResult(want, result);  
&#125;
</code></pre>
<p>This method (referencing <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-camera-14-V5">How to Call System Camera</a>) doesn’t support video duration settings.  </p>
<h3 id="Using-cameraPicker"><a href="#Using-cameraPicker" class="headerlink" title="Using cameraPicker"></a>Using cameraPicker</h3><pre><code class="language-typescript">import &#123; cameraPicker as picker &#125; from &#39;@kit.CameraKit&#39;;
import &#123; camera &#125; from &#39;@kit.CameraKit&#39;;
import &#123; common &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;
const mContext = getContext(this) as common.Context;

async function demo() &#123;
  try &#123;
    const pickerProfile: picker.PickerProfile = &#123;
      cameraPosition: camera.CameraPosition.CAMERA_POSITION_BACK
    &#125;;
    const pickerResult: picker.PickerResult = await picker.pick(mContext,
      [picker.PickerMediaType.PHOTO, picker.PickerMediaType.VIDEO], pickerProfile);
    console.log(`Picker result: $&#123;JSON.stringify(pickerResult)&#125;`);
  &#125; catch (error) &#123;
    const err = error as BusinessError;
    console.error(`Picker failed: $&#123;err.code&#125;`);
  &#125;
&#125;
</code></pre>
<h4 id="PickerProfile-camera-settings"><a href="#PickerProfile-camera-settings" class="headerlink" title="PickerProfile (camera settings)"></a><code>PickerProfile</code> (camera settings)</h4><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">cameraPosition</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-camera-V5#cameraposition">camera.CameraPosition</a></td>
<td align="left">Yes</td>
<td align="left">Front&#x2F;back camera.</td>
</tr>
<tr>
<td align="left">saveUri</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">URI to save captured media.</td>
</tr>
<tr>
<td align="left">videoDuration</td>
<td align="left">number</td>
<td align="left">No</td>
<td align="left">Max video recording duration.</td>
</tr>
</tbody></table>
<h4 id="PickerResult-capture-result"><a href="#PickerResult-capture-result" class="headerlink" title="PickerResult (capture result)"></a><code>PickerResult</code> (capture result)</h4><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">resultCode</td>
<td align="left">number</td>
<td align="left">Yes</td>
<td align="left">0 for success, -1 for failure.</td>
</tr>
<tr>
<td align="left">resultUri</td>
<td align="left">string</td>
<td align="left">Yes</td>
<td align="left">Captured media URI (public path if saveUri is empty; same as saveUri if writable).</td>
</tr>
<tr>
<td align="left">mediaType</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-camerapicker-V5#pickermediatype">PickerMediaType</a></td>
<td align="left">Yes</td>
<td align="left">Media type (photo&#x2F;video).</td>
</tr>
</tbody></table>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>This article introduces image&#x2F;video selection and capture capabilities in HarmonyOS Next, focusing on permission-free implementations via <code>photoAccessHelper</code> and <code>cameraPicker</code>.  </p>
<h2 id="Reference-Resources"><a href="#Reference-Resources" class="headerlink" title="Reference Resources"></a>Reference Resources</h2><ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/permissions-for-all-V5">Permissions for All Apps</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/restricted-permissions-V5">Restricted Permissions</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/permissions-for-mdm-apps-V5">Permissions for MDM Apps</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/system-app-startup-V5">Launching System Apps</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-image-V5#readpixelstobuffersync12">@ohos.multimedia.image (Image Processing)</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HarmonyOS-Next/" rel="tag"># HarmonyOS Next</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/30/C-Mastering-the-HarmonyOS-Next-Signature-Verification-Mechanism/" rel="prev" title="Mastering the HarmonyOS Next Signature Verification Mechanism">
      <i class="fa fa-chevron-left"></i> Mastering the HarmonyOS Next Signature Verification Mechanism
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/30/C-HarmonyOS-Next-Audio-Video-Practice-OPUS-Audio-Encoding/" rel="next" title="HarmonyOS Next Audio-Video Practice: OPUS Audio Encoding">
      HarmonyOS Next Audio-Video Practice: OPUS Audio Encoding <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Mastering-Image-and-Video-Selection-in-HarmonyOS-Next"><span class="nav-number">1.</span> <span class="nav-text">Mastering Image and Video Selection in HarmonyOS Next</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Background"><span class="nav-number">1.1.</span> <span class="nav-text">Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-to-HarmonyOS-Permission-System"><span class="nav-number">1.2.</span> <span class="nav-text">Introduction to HarmonyOS Permission System</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Design-Rationale"><span class="nav-number">1.2.1.</span> <span class="nav-text">Design Rationale</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#System-Picker-Permission-Free-Resource-Access"><span class="nav-number">1.3.</span> <span class="nav-text">System Picker: Permission-Free Resource Access</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Selecting-from-Album"><span class="nav-number">1.4.</span> <span class="nav-text">Selecting from Album</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Objects"><span class="nav-number">1.4.1.</span> <span class="nav-text">Key Objects</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PhotoSelectOptions-selection-parameters"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">PhotoSelectOptions (selection parameters)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PhotoSelectResult-selection-result"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">PhotoSelectResult (selection result)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Distinguishing-Image-and-Video-URIs"><span class="nav-number">1.4.2.</span> <span class="nav-text">Distinguishing Image and Video URIs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Obtaining-Video-Thumbnails"><span class="nav-number">1.4.3.</span> <span class="nav-text">Obtaining Video Thumbnails</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Capturing-via-Camera"><span class="nav-number">1.5.</span> <span class="nav-text">Capturing via Camera</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Want"><span class="nav-number">1.5.1.</span> <span class="nav-text">Using Want</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-cameraPicker"><span class="nav-number">1.5.2.</span> <span class="nav-text">Using cameraPicker</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PickerProfile-camera-settings"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">PickerProfile (camera settings)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PickerResult-capture-result"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">PickerResult (capture result)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">1.6.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference-Resources"><span class="nav-number">1.7.</span> <span class="nav-text">Reference Resources</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">364</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
