<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++1. Background IntroductionHarmonyOS primarily offers two development languages: ArkTS and C++.  ArkTS is the preferred">
<meta property="og:type" content="article">
<meta property="og:title" content="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++">
<meta property="og:url" content="https://harmonyostech.github.io/2025/06/27/A-Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++1. Background IntroductionHarmonyOS primarily offers two development languages: ArkTS and C++.  ArkTS is the preferred">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-1.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-2.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-3.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-4.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-5.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-6.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-7.png">
<meta property="og:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-8.png">
<meta property="article:published_time" content="2025-06-27T06:13:57.000Z">
<meta property="article:modified_time" content="2025-06-27T06:16:36.913Z">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOS Next">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://harmonyostech.github.io/images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81.png">

<link rel="canonical" href="https://harmonyostech.github.io/2025/06/27/A-Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ | HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 14:13:57 / Modified: 14:16:36" itemprop="dateCreated datePublished" datetime="2025-06-27T14:13:57+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C"><a href="#Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C" class="headerlink" title="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++"></a>Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++</h1><h3 id="1-Background-Introduction"><a href="#1-Background-Introduction" class="headerlink" title="1. Background Introduction"></a>1. Background Introduction</h3><p>HarmonyOS primarily offers two development languages: ArkTS and C++.</p>
<ul>
<li><p><strong>ArkTS</strong> is the preferred main application development language for HarmonyOS. It extends the TypeScript (TS) ecosystem with additional features tailored for application development, maintaining the basic style of TS while enhancing static checks and analysis during development through standardized definitions. This improves program stability and performance. ArkTS is well-suited for efficient UI interface development scenarios.</p>
</li>
<li><p><strong>C++</strong> is supported through the NDK (Native Development Kit) toolset. The NDK is a collection of native APIs, corresponding compilation scripts, and toolchains provided by the HarmonyOS SDK, enabling developers to implement critical application functionalities using C or C++. The NDK only covers some of HarmonyOS’s basic underlying capabilities, such as the C runtime base library (libc), graphics libraries, window systems, multimedia, compression libraries, and Node-API for cross-language interoperability between ArkTS&#x2F;JS and C. It does not provide the complete capabilities of ArkTS&#x2F;JS APIs. C++ is suitable for the following scenarios:</p>
<ul>
<li>Performance-sensitive scenarios, such as gaming and physics simulations, which are compute-intensive.</li>
<li>Scenarios requiring the reuse of existing C or C++ libraries.</li>
<li>Scenarios needing specialized libraries tailored to CPU features, such as Neon acceleration.</li>
</ul>
</li>
</ul>
<p>Some capabilities in HarmonyOS are only available through C++ interfaces, such as audio and video encoding&#x2F;decoding. Notably, the latest HarmonyOS 5.0.1 version primarily introduces new capabilities through C APIs. To fully leverage HarmonyOS’s capabilities and become a proficient HarmonyOS developer, mastering mixed development with ArkTS and C++ is essential.</p>
<p>Calling C++ from ArkTS involves a series of complex processes. This article focuses on introducing a one-click tool provided by DevEco Studio to generate cross-language “glue” code, helping developers improve efficiency.</p>
<h3 id="2-ArkTS-Calling-C-Methods-Process"><a href="#2-ArkTS-Calling-C-Methods-Process" class="headerlink" title="2. ArkTS Calling C++ Methods Process"></a>2. ArkTS Calling C++ Methods Process</h3><p>Similar to Android’s JNI, HarmonyOS enables ArkTS to call C++ methods primarily through NAPI. This section uses a Native C++ project demo created in DevEco Studio to illustrate the process of ArkTS calling C++ methods. The following diagram shows the code structure after creating a Native C++ project:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++"></p>
<p>The project mainly consists of three parts:</p>
<ul>
<li><p><strong>types</strong>:</p>
<ul>
<li><code>Index.d.ts</code>: Contains the C++ interfaces exposed to ArkTS.</li>
<li><code>oh-package.json5</code>: Specifies the dynamic library name and the path to the <code>Index.d.ts</code> file.</li>
</ul>
</li>
<li><p><strong>CMakeLists.txt</strong>: The C++ code build script.</p>
</li>
<li><p><strong>napi_init.cpp</strong>: The C++ implementation code.</p>
</li>
</ul>
<p>Developing a Native module generally involves implementing the corresponding modules mentioned above.</p>
<h4 id="2-1-Declaring-C-Interfaces-in-Index-d-ts"><a href="#2-1-Declaring-C-Interfaces-in-Index-d-ts" class="headerlink" title="2.1 Declaring C++ Interfaces in Index.d.ts"></a>2.1 Declaring C++ Interfaces in Index.d.ts</h4><p>The declared functions are used for both C++ implementation and ArkTS calls.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">add</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-Registering-and-Implementing-Declared-Methods-in-C"><a href="#2-2-Registering-and-Implementing-Declared-Methods-in-C" class="headerlink" title="2.2 Registering and Implementing Declared Methods in C++"></a>2.2 Registering and Implementing Declared Methods in C++</h4><p>First, register the methods declared in <code>Index.d.ts</code> in the NAPI’s <code>Init</code> method:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">EXTERN_C_START  </span></span><br><span class="line"><span class="function"><span class="type">static</span> napi_value <span class="title">Init</span><span class="params">(napi_env env, napi_value exports)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    napi_property_descriptor desc[] = &#123;  </span><br><span class="line">        &#123; <span class="string">&quot;add&quot;</span>, <span class="literal">nullptr</span>, Add, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, napi_default, <span class="literal">nullptr</span> &#125;  </span><br><span class="line">    &#125;;  </span><br><span class="line">    <span class="built_in">napi_define_properties</span>(env, exports, <span class="built_in">sizeof</span>(desc) / <span class="built_in">sizeof</span>(desc[<span class="number">0</span>]), desc);  </span><br><span class="line">    <span class="keyword">return</span> exports;  </span><br><span class="line">&#125;  </span><br><span class="line">EXTERN_C_END</span><br></pre></td></tr></table></figure>

<p><code>napi_property_descriptor</code> is an array that can implement multiple methods. In the example, the string <code>&quot;add&quot;</code> represents the <code>add</code> method declared in <code>Index.d.ts</code>, and the third parameter <code>Add</code> is the name of the method implemented in C++. Next, implement the <code>Add</code> method:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> napi_value <span class="title">Add</span><span class="params">(napi_env env, napi_callback_info info)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="type">size_t</span> argc = <span class="number">2</span>;  </span><br><span class="line">    napi_value args[<span class="number">2</span>] = &#123;<span class="literal">nullptr</span>&#125;;  </span><br><span class="line">  </span><br><span class="line">    <span class="built_in">napi_get_cb_info</span>(env, info, &amp;argc, args , <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype0;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">0</span>], &amp;valuetype0);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype1;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">1</span>], &amp;valuetype1);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value0;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">0</span>], &amp;value0);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value1;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">1</span>], &amp;value1);  </span><br><span class="line">  </span><br><span class="line">    napi_value sum;  </span><br><span class="line">    <span class="built_in">napi_create_double</span>(env, value0 + value1, &amp;sum);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> sum;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The structure of the NAPI implementation method is fixed. The return value must be <code>napi_value</code>, and the parameters must be <code>napi_env</code> and <code>napi_callback_info</code>. The method parses specific parameter information from <code>napi_callback_info</code> to implement the desired functionality.</p>
<h4 id="2-3-Configuring-the-Dynamic-Library-Name-and-C-Source-List-in-CMakeLists-txt"><a href="#2-3-Configuring-the-Dynamic-Library-Name-and-C-Source-List-in-CMakeLists-txt" class="headerlink" title="2.3 Configuring the Dynamic Library Name and C++ Source List in CMakeLists.txt"></a>2.3 Configuring the Dynamic Library Name and C++ Source List in CMakeLists.txt</h4><p><code>add_library</code> specifies the name of the compiled library and the list of C++ code files to be compiled:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_library</span>(entry SHARED napi_init.cpp)</span><br></pre></td></tr></table></figure>

<p>For more information on this, refer to the CMake build tool documentation: <a target="_blank" rel="noopener" href="https://cmake.org/">https://cmake.org/</a></p>
<h4 id="2-4-Calling-the-Declared-Methods-in-ArkTS"><a href="#2-4-Calling-the-Declared-Methods-in-ArkTS" class="headerlink" title="2.4 Calling the Declared Methods in ArkTS"></a>2.4 Calling the Declared Methods in ArkTS</h4><p>Once implemented, you can call the corresponding methods in ArkTS:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// First, import the dynamic library:</span></span><br><span class="line"><span class="keyword">import</span> testNapi <span class="keyword">from</span> <span class="string">&#x27;libentry.so&#x27;</span>;</span><br><span class="line"><span class="comment">// Call the corresponding add method</span></span><br><span class="line">hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Test NAPI 2 + 3 = %&#123;public&#125;d&#x27;</span>, testNapi.<span class="title function_">add</span>(<span class="number">2</span>, <span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<h3 id="3-DevEco-Studio’s-One-Click-Generation-of-Glue-Code"><a href="#3-DevEco-Studio’s-One-Click-Generation-of-Glue-Code" class="headerlink" title="3. DevEco Studio’s One-Click Generation of Glue Code"></a>3. DevEco Studio’s One-Click Generation of Glue Code</h3><p>From the ArkTS calling C++ methods process outlined above, it’s evident that the process is somewhat cumbersome, requiring handling in three places across two files. Is there a more convenient method? Don’t worry; the highlight of this article is the <strong>cross-language code editing</strong> feature provided by DevEco Studio IDE.</p>
<p>DevEco Studio IDE offers two creation methods:</p>
<ol>
<li>Write function declarations in <code>Index.d.ts</code> and generate C++ functions with one click.</li>
<li>Write C++ function declarations in a C++ header file and generate registration code with one click.</li>
</ol>
<p>The following sections provide detailed explanations of each method.</p>
<h4 id="3-1-Writing-Function-Declarations-in-Index-d-ts-and-Generating-C-Functions-with-One-Click"><a href="#3-1-Writing-Function-Declarations-in-Index-d-ts-and-Generating-C-Functions-with-One-Click" class="headerlink" title="3.1 Writing Function Declarations in Index.d.ts and Generating C++ Functions with One Click"></a>3.1 Writing Function Declarations in Index.d.ts and Generating C++ Functions with One Click</h4><p>After declaring methods in <code>Index.d.ts</code>, the IDE will prompt an error. Hovering over it will display the following prompt:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-1.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 1"></p>
<p>Clicking “Generate native implementation” will quickly generate the registration code and implementation code in C++:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-2.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 2"></p>
<p>This reduces three manual implementations to one, significantly improving efficiency by more than two-thirds.</p>
<h4 id="3-2-Writing-C-Function-Declarations-in-a-C-Header-File-and-Generating-Registration-Code-with-One-Click"><a href="#3-2-Writing-C-Function-Declarations-in-a-C-Header-File-and-Generating-Registration-Code-with-One-Click" class="headerlink" title="3.2 Writing C++ Function Declarations in a C++ Header File and Generating Registration Code with One Click"></a>3.2 Writing C++ Function Declarations in a C++ Header File and Generating Registration Code with One Click</h4><p>To create registration code with one click via C++ function declarations, you first need to create a header file and declare methods within it:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-3.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 3"></p>
<p>Right-click the method and select “Generate”:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-4.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 4"></p>
<p>Then, click on “NAPI”:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-5.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 5"></p>
<p>The registration function and the corresponding NAPI function implementation are automatically generated:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-6.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 6"></p>
<p>The method declaration in <code>Index.d.ts</code> is also automatically generated:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-7.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 7"></p>
<p>With the IDE’s assistance, writing cross-language “glue” code significantly improves efficiency. It’s fair to say that this feature provided by DevEco Studio is quite impressive and considerate for developers.</p>
<p>There are three points to note:</p>
<ol>
<li>The header files supported for one-click code generation include <code>.hpp</code>, <code>.hxx</code>, <code>.hh</code>, and <code>.h</code>.</li>
<li>The NAPI function declarations that can be quickly generated currently support parameter types such as <code>bool</code>, <code>int</code>, <code>string</code>, <code>void</code>, <code>float</code>, <code>double</code>, <code>std::array</code>, and <code>std::vector</code>.</li>
<li>If the project already has a <code>napi_init.cpp</code> file, the <code>Init</code> function within it will be appended. If not, the IDE will automatically create it for you.</li>
</ol>
<h3 id="4-Enhancing-NAPI-Type-Conversion-Code-Writing-in-C-with-AI"><a href="#4-Enhancing-NAPI-Type-Conversion-Code-Writing-in-C-with-AI" class="headerlink" title="4. Enhancing NAPI Type Conversion Code Writing in C++ with AI"></a>4. Enhancing NAPI Type Conversion Code Writing in C++ with AI</h3><p>While the IDE’s automatic generation of cross-language glue code greatly aids Native code development, some developers may still find the TODO code generated to be cumbersome, with many ArkTS and C++ cross-language conversion codes being template-heavy and tedious. Is there a way to improve efficiency?</p>
<p>Taking the automatically generated <code>add</code> code as an example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> napi_value <span class="title">Add</span><span class="params">(napi_env env, napi_callback_info info)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="type">size_t</span> argc = <span class="number">2</span>;  </span><br><span class="line">    napi_value args[<span class="number">2</span>] = &#123;<span class="literal">nullptr</span>&#125;;  </span><br><span class="line">  </span><br><span class="line">    <span class="built_in">napi_get_cb_info</span>(env, info, &amp;argc, args , <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype0;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">0</span>], &amp;valuetype0);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype1;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">1</span>], &amp;valuetype1);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value0;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">0</span>], &amp;value0);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value1;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">1</span>], &amp;value1);  </span><br><span class="line">  </span><br><span class="line">    napi_value sum;  </span><br><span class="line">    <span class="built_in">napi_create_double</span>(env, value0 + value1, &amp;sum);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> sum;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This code requires parsing two <code>int</code> type parameters from <code>napi_callback_info</code>, performing the operation, and then generating an <code>napi_value</code> to return.</p>
<p>Since this cross-language data type conversion is part of the NAPI protocol, the DevEco CodeGenie plugin also provides excellent support. You can install the Genie plugin in DevEco Studio to help quickly generate C++ implementation code:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-8.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 8"></p>
<p>With just a few “TAB” key presses, the code is almost complete, and you can then implement your business logic as needed.</p>
<h3 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5. Conclusion"></a>5. Conclusion</h3><p>This article primarily introduced the implementation steps for Native C++ code and the cross-language code editing tools provided by DevEco Studio IDE. These tools enable developers to write only function declarations and generate corresponding initialization registration methods and C++ implementation methods with one click. We hope you will explore and experience these tools to enhance your development efficiency.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HarmonyOS-Next/" rel="tag"># HarmonyOS Next</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/27/A-Embracing-HarmonyOS-Next-Efficient-Use-of-DevEco/" rel="prev" title="Embracing HarmonyOS Next: Efficient Use of DevEco">
      <i class="fa fa-chevron-left"></i> Embracing HarmonyOS Next: Efficient Use of DevEco
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/28/AI-Detailed-Explanation-of-HarmonyOS-Next-Module-json5-Configuration/" rel="next" title="Detailed Explanation of HarmonyOS Next Module.json5 Configuration">
      Detailed Explanation of HarmonyOS Next Module.json5 Configuration <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C"><span class="nav-number">1.</span> <span class="nav-text">Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Background-Introduction"><span class="nav-number">1.0.1.</span> <span class="nav-text">1. Background Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ArkTS-Calling-C-Methods-Process"><span class="nav-number">1.0.2.</span> <span class="nav-text">2. ArkTS Calling C++ Methods Process</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-Declaring-C-Interfaces-in-Index-d-ts"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">2.1 Declaring C++ Interfaces in Index.d.ts</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-Registering-and-Implementing-Declared-Methods-in-C"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">2.2 Registering and Implementing Declared Methods in C++</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-Configuring-the-Dynamic-Library-Name-and-C-Source-List-in-CMakeLists-txt"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">2.3 Configuring the Dynamic Library Name and C++ Source List in CMakeLists.txt</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-Calling-the-Declared-Methods-in-ArkTS"><span class="nav-number">1.0.2.4.</span> <span class="nav-text">2.4 Calling the Declared Methods in ArkTS</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-DevEco-Studio%E2%80%99s-One-Click-Generation-of-Glue-Code"><span class="nav-number">1.0.3.</span> <span class="nav-text">3. DevEco Studio’s One-Click Generation of Glue Code</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-Writing-Function-Declarations-in-Index-d-ts-and-Generating-C-Functions-with-One-Click"><span class="nav-number">1.0.3.1.</span> <span class="nav-text">3.1 Writing Function Declarations in Index.d.ts and Generating C++ Functions with One Click</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-Writing-C-Function-Declarations-in-a-C-Header-File-and-Generating-Registration-Code-with-One-Click"><span class="nav-number">1.0.3.2.</span> <span class="nav-text">3.2 Writing C++ Function Declarations in a C++ Header File and Generating Registration Code with One Click</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Enhancing-NAPI-Type-Conversion-Code-Writing-in-C-with-AI"><span class="nav-number">1.0.4.</span> <span class="nav-text">4. Enhancing NAPI Type Conversion Code Writing in C++ with AI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Conclusion"><span class="nav-number">1.0.5.</span> <span class="nav-text">5. Conclusion</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">364</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
