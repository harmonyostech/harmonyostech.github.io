<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/19/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/19/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-App-Configuration-Information-Map-Type-Global-Popup-Dynamic-Import-Reflection-Default-Keyboard-Popup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-App-Configuration-Information-Map-Type-Global-Popup-Dynamic-Import-Reflection-Default-Keyboard-Popup/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Obtaining App Configuration Information, Map Type, Global Popup, Dynamic Import Reflection, Default Keyboard Popup</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 06:55:15 / Modified: 12:25:18" itemprop="dateCreated datePublished" datetime="2025-06-25T06:55:15+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Obtaining-App-Configuration-Information-Map-Type-Global-Popup-Dynamic-Import-Reflection-Default-Keyboard-Popup"><a href="#Daily-HarmonyOS-Next-Knowledge-Obtaining-App-Configuration-Information-Map-Type-Global-Popup-Dynamic-Import-Reflection-Default-Keyboard-Popup" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Obtaining App Configuration Information, Map Type, Global Popup, Dynamic Import Reflection, Default Keyboard Popup"></a>[Daily HarmonyOS Next Knowledge] Obtaining App Configuration Information, Map Type, Global Popup, Dynamic Import Reflection, Default Keyboard Popup</h3><h4 id="1-How-to-obtain-data-from-app-json5-in-HarmonyOS-such-as-bundleName-and-versionName"><a href="#1-How-to-obtain-data-from-app-json5-in-HarmonyOS-such-as-bundleName-and-versionName" class="headerlink" title="1. How to obtain data from app.json5 in HarmonyOS, such as bundleName and versionName?"></a>1. How to obtain data from app.json5 in HarmonyOS, such as bundleName and versionName?</h4><p>To obtain data from app.json5 (e.g., bundleName, versionName), retrieve information via <code>BundleInfo</code>:<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-bundlemanager-bundleinfo-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-bundlemanager-bundleinfo-V5</a>  </p>
<h4 id="2-What-is-the-Map-type-in-HarmonyOS"><a href="#2-What-is-the-Map-type-in-HarmonyOS" class="headerlink" title="2. What is the Map type in HarmonyOS?"></a>2. What is the Map type in HarmonyOS?</h4><p>When making network requests, how to declare and assign parameters externally.  </p>
<p>Sample declaration:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ob &#123;</span><br><span class="line">  <span class="string">&quot;phone&quot;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>: ob = &#123;</span><br><span class="line">  <span class="string">&quot;phone&quot;</span>: <span class="string">&quot;123142&quot;</span>,</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Error when opening a global popup in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Opening a global popup in a normal class throws an error:  </span></span><br></pre></td></tr></table></figure>
<p>Reason: TypeError<br>Error name: TypeError<br>Error message: is not callable<br>SourceCode:<br>  (parent ? parent : this).observeComponentCreation2((elmtId, isInitialRender) &#x3D;&gt; {<br>    ^  </p>
<pre><code>
Reference demo:  

**OpenDialogDemo.ets**  
```typescript
import &#123; TestDialog &#125; from &#39;./DialogHelper&#39;;

@Entry
@Component
struct OpenDialogDemo &#123;
  build() &#123;
    Column() &#123;
      Text(&#39;Click to Popup&#39;)
        .margin(&#123; top: 25 &#125;)
        .fontSize(25)
        .onClick(() =&gt; &#123;
          TestDialog();
        &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<p><strong>TestDialog.ets</strong>  </p>
<pre><code class="language-typescript">import &#123; ComponentContent, window &#125; from &#39;@kit.ArkUI&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;
import &#123; openOcrBottomDialog &#125; from &#39;./OpenOcrBottomDialog&#39;;

export function TestDialog() &#123;
  let windowClass = AppStorage.get(&quot;windowStage&quot;) as window.WindowStage;
  let uiContext = windowClass.getMainWindowSync().getUIContext();
  let promptAction = uiContext.getPromptAction();
  let contentNode = new ComponentContent(uiContext, wrapBuilder(openOcrBottomDialog));
  try &#123;
    AppStorage.setOrCreate(&quot;contentNode&quot;, contentNode);
    promptAction.openCustomDialog(contentNode);
  &#125; catch (error) &#123;
    let message = (error as BusinessError).message;
    let code = (error as BusinessError).code;
    console.error(`OpenCustomDialog args error code is $&#123;code&#125;, message is $&#123;message&#125;`);
  &#125;
&#125;
</code></pre>
<p><strong>openOcrBottomDialog.ets</strong>  </p>
<pre><code class="language-typescript">import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;
import &#123; window &#125; from &#39;@kit.ArkUI&#39;;

@Builder
export function openOcrBottomDialog() &#123;
  Column() &#123;
    Text(&#39;Content&#39;).fontSize(20).margin(&#123; top: 10, bottom: 10 &#125;);

    Image(&quot;&quot;)
      .height(1)
      .width(&#39;100%&#39;)
      .margin(&#123; left: 10, right: 10 &#125;)
      .backgroundColor(0xDFDFDF);

    Text(&#39;Take Photo&#39;)
      .fontSize(20)
      .margin(&#123; top: 10, bottom: 10 &#125;)
      .onClick(() =&gt; &#123;
        let sasasa: ComponentContent = AppStorage.get(&quot;contentNode&quot;) as ComponentContent;
        console.log(&quot;Test contentNode= &quot; + sasasa);
        try &#123;
          let windowClass = AppStorage.get(&quot;windowStage&quot;) as window.WindowStage;
          let uiContext = windowClass.getMainWindowSync().getUIContext();
          let promptAction = uiContext.getPromptAction();
          promptAction.closeCustomDialog(sasasa);
        &#125; catch (error) &#123;
          let message = (error as BusinessError).message;
          let code = (error as BusinessError).code;
          console.error(`:::OpenCustomDialog args error code is $&#123;code&#125;, message is $&#123;message&#125;`);
        &#125;
      &#125;);

    Image(&quot;&quot;)
      .height(1)
      .width(&#39;100%&#39;)
      .margin(&#123; left: 10, right: 10 &#125;)
      .backgroundColor(0xDFDFDF);

    // Text(&#39;Get from Album&#39;)
    // .fontSize(20)
    // .margin(&#123; top: 10, bottom: 10 &#125;)
    // .onClick(() =&gt; &#123;
    //   promptAction.closeCustomDialog(contentNode);
    // &#125;)

    Image(&quot;&quot;)
      .height(1)
      .width(&#39;100%&#39;)
      .margin(&#123; left: 10, right: 10 &#125;)
      .backgroundColor(0xDFDFDF);

    // Text(&#39;Cancel&#39;)
    // .fontSize(20)
    // .margin(&#123; top: 10, bottom: 10 &#125;)
    // .onClick(() =&gt; &#123;
    //   promptAction.closeCustomDialog(contentNode);
    // &#125;)
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-dynamically-insert-method-names-in-reflected-classes-using-dynamic-import-reflection-in-HarmonyOS"><a href="#4-How-to-dynamically-insert-method-names-in-reflected-classes-using-dynamic-import-reflection-in-HarmonyOS" class="headerlink" title="4. How to dynamically insert method names in reflected classes using dynamic import reflection in HarmonyOS?"></a>4. How to dynamically insert method names in reflected classes using dynamic import reflection in HarmonyOS?</h4><p>Problem description: When using dynamic import reflection, how to insert method names dynamically (e.g., via variables)?  </p>
<pre><code class="language-typescript">let filePath = &#39;../plugins/DialogPlugin&#39;;
let method = &#39;showConfirmDialog&#39;;
import(filePath).then((ns: ESObject) =&gt; &#123;
  new ns.default().$(method)() // Not effective  
  new ns.default().showConfirmDialog() // Effective  
&#125;);
</code></pre>
<p><strong>Solutions</strong>:  </p>
<ul>
<li>ArkTS does not support dynamic method calls; use a TS file for dynamic invocation.  </li>
<li>Alternatively, use template strings to create dynamic method references: <code>variable$&#123;&#125;</code>.</li>
</ul>
<h4 id="5-How-to-make-the-keyboard-pop-up-by-default-on-a-SMS-verification-code-interface-in-HarmonyOS"><a href="#5-How-to-make-the-keyboard-pop-up-by-default-on-a-SMS-verification-code-interface-in-HarmonyOS" class="headerlink" title="5. How to make the keyboard pop up by default on a SMS verification code interface in HarmonyOS?"></a>5. How to make the keyboard pop up by default on a SMS verification code interface in HarmonyOS?</h4><p>To enable the keyboard by default:  </p>
<ul>
<li>Set <code>.enableKeyboardOnFocus(false)</code> to prevent the keyboard from popping up initially.  </li>
<li>Use a click event on a blank area to dynamically modify the focus property.  </li>
<li>For multiple TextInputs, set <code>defaultFocus</code> on the target TextInput to make it the default focus on the page.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Bottom-Placement-Adding-Search-Component-to-Custom-Dialog-Modifying-APP-Name-and-Icon-Page-Navigation-Animation-Options/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Bottom-Placement-Adding-Search-Component-to-Custom-Dialog-Modifying-APP-Name-and-Icon-Page-Navigation-Animation-Options/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Bottom Placement, Adding Search Component to Custom Dialog, Modifying APP Name and Icon, Page Navigation, Animation Options</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 06:53:43 / Modified: 12:25:19" itemprop="dateCreated datePublished" datetime="2025-06-25T06:53:43+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Bottom-Placement-Adding-Search-Component-to-Custom-Dialog-Modifying-APP-Name-and-Icon-Page-Navigation-Animation-Options"><a href="#Daily-HarmonyOS-Next-Knowledge-Bottom-Placement-Adding-Search-Component-to-Custom-Dialog-Modifying-APP-Name-and-Icon-Page-Navigation-Animation-Options" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Bottom Placement, Adding Search Component to Custom Dialog, Modifying APP Name and Icon, Page Navigation, Animation Options"></a>[Daily HarmonyOS Next Knowledge] Bottom Placement, Adding Search Component to Custom Dialog, Modifying APP Name and Icon, Page Navigation, Animation Options</h3><h4 id="1-Why-does-setting-the-bottom-position-with-the-initialIndex-property-in-HarmonyOS-not-work-perfectly"><a href="#1-Why-does-setting-the-bottom-position-with-the-initialIndex-property-in-HarmonyOS-not-work-perfectly" class="headerlink" title="1. Why does setting the bottom position with the initialIndex property in HarmonyOS not work perfectly?"></a>1. Why does setting the bottom position with the initialIndex property in HarmonyOS not work perfectly?</h4><p>The bottom position is set using the <code>initialIndex</code> property, but there is a slight offset.  </p>
<p>Check the height settings between list items and whether dividers are set. Refer to the API documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-service-widget-container-list-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-service-widget-container-list-V5</a>  </p>
<h4 id="2-When-adding-a-Search-component-to-a-CustomDialogController-in-HarmonyOS-the-soft-keyboard-pushes-the-interface-off-the-screen-when-the-Search-component-is-focused"><a href="#2-When-adding-a-Search-component-to-a-CustomDialogController-in-HarmonyOS-the-soft-keyboard-pushes-the-interface-off-the-screen-when-the-Search-component-is-focused" class="headerlink" title="2. When adding a Search component to a CustomDialogController in HarmonyOS, the soft keyboard pushes the interface off the screen when the Search component is focused?"></a>2. When adding a Search component to a CustomDialogController in HarmonyOS, the soft keyboard pushes the interface off the screen when the Search component is focused?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#ZH-CN_TOPIC_0000001884917674__bindsheet">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#ZH-CN_TOPIC_0000001884917674__bindsheet</a>  </p>
<p>Bind a semi-modal page to a component using the <code>bindSheet</code> property. The size of the semi-modal page can be determined by setting a custom or default built-in height when inserting the component.  </p>
<p><strong>Replace the custom popup with a semi-modal page using the following demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Click to Show Dialog&#39;;
  scroller: Scroller = new Scroller();
  private arr: number[] = [0, 1, 2, 3, 4, 5];
  controllera: TextInputController = new TextInputController();
  @State flag: boolean = false;
  @State TextTest: string = &#39;&#39;;
  @State TextTest1: string = &#39;&#39;;
  @State screenHeight: number = 0;
  // Control the display/hide of the semi-modal transition
  @State isShowSheet: boolean = false;

  // Build the semi-modal display interface using @Builder
  @Builder
  mySheet() &#123;
    // Use a Stack container to fix the Navigation bar
    Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;
      Scroll(this.scroller) &#123;
        Column() &#123;
          TextInput(&#123; placeholder: &#39;search...&#39;, controller: this.controllera &#125;)
            // Disable focus by default
            .focusable(this.flag)
            .width(&#39;90%&#39;)
            .height(40)
            .backgroundColor(&#39;#FFFFFF&#39;)
            .margin(&#123; top: 8, bottom: 20 &#125;)
            // Re-acquire focus on click
            .onClick(() =&gt; &#123;
              this.flag = true;
              this.TextTest1 = &#39;1&#39;;
            &#125;);
          
          ForEach(this.arr, (item: number) =&gt; &#123;
            Text(item.toString())
              .width(&#39;90%&#39;)
              .height(150)
              .backgroundColor(0xFFFFFF)
              .borderRadius(15)
              .fontSize(16)
              .textAlign(TextAlign.Center)
              .margin(&#123; top: 10 &#125;);
          &#125;, (item: number) =&gt; item.toString());

          // Space for the keyboard; pushes up content when not empty
          Text(this.TextTest)
            .lineHeight(300)
            .fontColor(&#39;#DCDCDC&#39;);
          Text(this.TextTest1)
            .lineHeight(300)
            .fontColor(&#39;#DCDCDC&#39;);
        &#125;.width(&#39;100%&#39;);
      &#125;
      // Top margin based on the Navigation bar height
      .margin(&#123; top: 110 &#125;)
      .scrollable(ScrollDirection.Vertical)
      .scrollBar(BarState.On)
      .scrollBarColor(Color.Gray)
      .scrollBarWidth(0)
      .onScroll((xOffset: number, yOffset: number) =&gt; &#123;
        console.info(xOffset + &#39; &#39; + yOffset);
      &#125;);
      
      // Second child component in the Stack; Navigation overlays the Scroll container
      Navigation() &#123;
      &#125;
      .title(&#39;Navigation Title&#39;)
      .backgroundColor(Color.Yellow)
      .height(110)
      .titleMode(NavigationTitleMode.Full)
      .hideTitleBar(false)
      .hideToolBar(false);
      
      // A button concept to handle keyboard dismissal (not implemented due to lack of keyboard event)
      Button(&#39;Dismiss Keyboard&#39;)
        .onClick(() =&gt; &#123;
          this.TextTest1 = &#39;&#39;;
          this.flag = false;
        &#125;)
        .margin(&#123; top: 10, left: 20 &#125;);
    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(0xDCDCDC);
  &#125;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .bindSheet(this.isShowSheet, this.mySheet(), &#123;
            showClose: false,
            height: 700,
            dragBar: false,
            onDisappear: () =&gt; &#123;
              this.isShowSheet = !this.isShowSheet;
            &#125;
          &#125;)
          .onClick(() =&gt; &#123;
            this.isShowSheet = !this.isShowSheet;
          &#125;);
      &#125;
      .width(&#39;100%&#39;);
    &#125;
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
<h4 id="3-Changes-to-the-APP-name-and-icon-in-HarmonyOS-are-not-taking-effect"><a href="#3-Changes-to-the-APP-name-and-icon-in-HarmonyOS-are-not-taking-effect" class="headerlink" title="3. Changes to the APP name and icon in HarmonyOS are not taking effect?"></a>3. Changes to the APP name and icon in HarmonyOS are not taking effect?</h4><p>In a Flutter project, changes to the icon and APP name under the <code>ohos\AppScope\resources</code> path are not reflected.  </p>
<p><strong>Solution</strong>:  </p>
<ul>
<li>In <code>app.json5</code>, <code>icon</code> corresponds to the APP launch icon, and <code>label</code> corresponds to the APP name.</li>
</ul>
<h4 id="4-How-to-navigate-between-pages-in-modular-development-in-HarmonyOS"><a href="#4-How-to-navigate-between-pages-in-modular-development-in-HarmonyOS" class="headerlink" title="4. How to navigate between pages in modular development in HarmonyOS?"></a>4. How to navigate between pages in modular development in HarmonyOS?</h4><p>How to navigate between pages when developing modularly using the HAR method? How can the main module use <code>router.pushUrl</code> to navigate to a page in a sub-module?  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-routing-V5#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-routing-V5#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1</a>  </p>
<p>To navigate to a page in a shared package (HAR or HSP), use <code>router.pushNamedRoute</code>:  </p>
<pre><code class="language-typescript">router.pushNamedRoute(&#123;
  name: &#39;targetRouteName&#39;, // Name of the target route
  parameters: &#123;
    // Parameters to pass
  &#125;
&#125;);
</code></pre>
<h4 id="5-The-local-code-dependency-for-AnimationOptions-in-HarmonyOS-cannot-be-found"><a href="#5-The-local-code-dependency-for-AnimationOptions-in-HarmonyOS-cannot-be-found" class="headerlink" title="5. The local code dependency for AnimationOptions in HarmonyOS cannot be found?"></a>5. The local code dependency for AnimationOptions in HarmonyOS cannot be found?</h4><p><strong>Reference for AnimationOptions</strong>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-drawabledescriptor-V5#animationoptions12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-drawabledescriptor-V5#animationoptions12</a>  </p>
<p><code>AnimationOptions</code> is used to control the playback of animations when displaying an array of <code>PixelMap</code> objects using the <code>Image</code> component:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-drawabledescriptor-V5#ZH-CN_TOPIC_0000001884757686__animationoptions12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-drawabledescriptor-V5#ZH-CN_TOPIC_0000001884757686__animationoptions12</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Using-Semi-modal-in-Lists-Custom-Toast-Popup-Following-Image-Base64-Encoding-Routing-Optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Using-Semi-modal-in-Lists-Custom-Toast-Popup-Following-Image-Base64-Encoding-Routing-Optimization/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Using Semi-modal in Lists, Custom Toast, Popup Following, Image Base64 Encoding, Routing Optimization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 06:45:07 / Modified: 12:25:20" itemprop="dateCreated datePublished" datetime="2025-06-25T06:45:07+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Using-Semi-modal-in-Lists-Custom-Toast-Popup-Following-Image-Base64-Encoding-Routing-Optimization"><a href="#【Daily-HarmonyOS-Next-Knowledge】Using-Semi-modal-in-Lists-Custom-Toast-Popup-Following-Image-Base64-Encoding-Routing-Optimization" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Using Semi-modal in Lists, Custom Toast, Popup Following, Image Base64 Encoding, Routing Optimization"></a>【Daily HarmonyOS Next Knowledge】Using Semi-modal in Lists, Custom Toast, Popup Following, Image Base64 Encoding, Routing Optimization</h3><h4 id="1-How-to-use-semi-modal-bindSheet-in-List-or-Grid-in-HarmonyOS"><a href="#1-How-to-use-semi-modal-bindSheet-in-List-or-Grid-in-HarmonyOS" class="headerlink" title="1. How to use semi-modal bindSheet in List or Grid in HarmonyOS?"></a>1. How to use semi-modal bindSheet in List or Grid in HarmonyOS?</h4><p>There is a sharing popup-like page that needs to pop up a semi-modal page when clicking each item.  </p>
<p>Refer to the following code:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct BindSheetDemo &#123;
  // Semi-modal transition display/hide control
  @State isShowSheet: boolean = false;
  @State isShowDetailSheet: boolean = false;
  private menuList: string[] = [&#39;Live Room&#39;, &#39;Related Content&#39;, &#39;More&#39;];
  private detailList: string[] = [&#39;Live Room 111111&#39;, &#39;Related Content 22222222&#39;, &#39;More 334455665&#39;];
  
  // Build the semi-modal display interface via @Builder
  @Builder
  mySheet() &#123;
    Column() &#123;
      Flex(&#123; direction: FlexDirection.Row, wrap: FlexWrap.Wrap &#125;) &#123;
        ForEach(this.menuList, (item: string) =&gt; &#123;
          Text(item)
            .fontSize(16)
            .fontColor(0x333333)
            .backgroundColor(0xf1f1f1)
            .borderRadius(8)
            .margin(10)
            .padding(10)
            .onClick(() =&gt; &#123;
              this.isShowDetailSheet = !this.isShowDetailSheet;
            &#125;)
        &#125;)
      &#125;
      .bindSheet(this.isShowDetailSheet, this.myDetailSheet(), &#123;
        // height: 550,
        dragBar: true,
        onDisappear: () =&gt; &#123;
          this.isShowDetailSheet = !this.isShowDetailSheet;
        &#125;
      &#125;)
      .padding(&#123; top: 18 &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(Color.White)
  &#125;
  
  @Builder
  myDetailSheet() &#123;
    Column() &#123;
      Flex(&#123; direction: FlexDirection.Row, wrap: FlexWrap.Wrap &#125;) &#123;
        ForEach(this.detailList, (item: string) =&gt; &#123;
          Text(item)
            .fontSize(16)
            .fontColor(0x333333)
            .backgroundColor(0xf1f1f1)
            .borderRadius(8)
            .margin(10)
            .padding(10)
        &#125;)
      &#125;
      .padding(&#123; top: 18 &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(Color.White)
  &#125;
  
  build() &#123;
    Column() &#123;
      Text(&#39;Live Room&#39;)
        .fontSize(28)
        .padding(&#123; top: 30, bottom: 30 &#125;)
      Column() &#123;
        Row() &#123;
          Row()
            .width(10)
            .height(10)
            .backgroundColor(&#39;#a8a8a8&#39;)
            .margin(&#123; right: 12 &#125;)
            .borderRadius(20)

          Column() &#123;
            Text(&#39;Click to View&#39;)
              .fontSize(16)
              .fontWeight(FontWeight.Medium)
          &#125;
          .alignItems(HorizontalAlign.Start)

          Blank()

          Row()
            .width(12)
            .height(12)
            .margin(&#123; right: 15 &#125;)
            .border(&#123;
              width: &#123; top: 2, right: 2 &#125;,
              color: 0xcccccc
            &#125;)
            .rotate(&#123; angle: 45 &#125;)
        &#125;
        .borderRadius(15)
        .shadow(&#123; radius: 100, color: &#39;#ededed&#39; &#125;)
        .width(&#39;90%&#39;)
        .alignItems(VerticalAlign.Center)
        .padding(&#123; left: 15, top: 15, bottom: 15 &#125;)
        .backgroundColor(Color.White)
        .bindSheet(this.isShowSheet, this.mySheet(), &#123;
          height: 150,
          dragBar: false,
          onDisappear: () =&gt; &#123;
            this.isShowSheet = !this.isShowSheet;
          &#125;
        &#125;)
        .onClick(() =&gt; &#123;
          this.isShowSheet = !this.isShowSheet;
        &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(0xf1f1f1)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-customize-the-toast-style-in-HarmonyOS"><a href="#2-How-to-customize-the-toast-style-in-HarmonyOS" class="headerlink" title="2. How to customize the toast style in HarmonyOS?"></a>2. How to customize the toast style in HarmonyOS?</h4><p>CustomDialog supports customization for popups. Is there a way to customize the UI style for toasts? If the system currently lacks toast customization capabilities, what official recommendations are there to implement toast-like functionality?  </p>
<p>Toasts do not support customization, but CustomDialog can be used for full customization. <code>PromptAction.openCustomdialog</code> is recommended, which supports decoupling from the page and only requires passing UIContext to implement popups.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-arkui-UIContext.md#opencustomdialog12">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-arkui-UIContext.md#opencustomdialog12</a>  </p>
<p><code>openCustomDialog&lt;T extends Object&gt;(dialogContent: ComponentContent&lt;T&gt;, options?: promptAction.BaseDialogOptions): Promise&lt;void&gt;</code>  </p>
<p>Creates and pops up a custom dialog corresponding to dialogContent with a Promise async callback. The dialog style fully follows the settings in dialogContent, similar to setting <code>customStyle: true</code> for CustomDialog. Currently, <code>isModal = true</code> and <code>showInSubWindow = true</code> cannot be used simultaneously.  </p>
<h4 id="3-When-pushing-to-the-next-page-from-a-HarmonyOS-popup-the-popup-follows-to-the-next-page-How-to-bind-the-popup-to-the-current-page"><a href="#3-When-pushing-to-the-next-page-from-a-HarmonyOS-popup-the-popup-follows-to-the-next-page-How-to-bind-the-popup-to-the-current-page" class="headerlink" title="3. When pushing to the next page from a HarmonyOS popup, the popup follows to the next page. How to bind the popup to the current page?"></a>3. When pushing to the next page from a HarmonyOS popup, the popup follows to the next page. How to bind the popup to the current page?</h4><p>When pushing to the next page from a popup, the popup follows, but we want the popup to bind to the current page.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-common-components-custom-dialog-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-common-components-custom-dialog-V5</a>  </p>
<p>Reference demo:  </p>
<pre><code class="language-typescript">import router from &#39;@ohos.router&#39;;
@CustomDialog
export default struct UserPrivacyDialog &#123;
  controller: CustomDialogController = new CustomDialogController(&#123; builder: &#39;&#39; &#125;);
  cancel: Function = () =&gt; &#123;
  &#125;;
  confirm: Function = () =&gt; &#123;
  &#125;;
  visible: Visibility = Visibility.None
  
  build() &#123;
    Column() &#123;
      Text(&#39;This is a Popup&#39;)
      Button(&#39;Jump&#39;)
        .onClick(() =&gt; &#123;
          router.pushUrl(&#123;
            url: &#39;pages/Second&#39;
          &#125;)
        &#125;).backgroundColor(0xffffff).fontColor(Color.Red)
    &#125;
    .margin(&#123; top: 22 &#125;)
    .justifyContent(FlexAlign.SpaceEvenly)
  &#125;
&#125;

@Entry
@Component
struct Index &#123;
  @State textValue: string = &#39;Hello World&#39;
  @State visible: Visibility = Visibility.None
  
  build() &#123;
    Stack() &#123;
      Row() &#123;
        Column() &#123;
          Button(&#39;Click&#39;)
            .onClick(() =&gt; &#123;
              if (this.visible == Visibility.Visible) &#123;
                this.visible = Visibility.None
              &#125; else &#123;
                this.visible = Visibility.Visible
              &#125;
            &#125;)
            .backgroundColor(0x777474)
            .fontColor(0x000000)
        &#125;
        .width(&#39;100%&#39;)
      &#125;
      .height(&#39;100%&#39;)
      .backgroundColor(0x885555)
      Text(&#39;&#39;)
        .onClick(() =&gt; &#123;
          if (this.visible == Visibility.Visible) &#123;
            this.visible = Visibility.None
          &#125; else &#123;
            this.visible = Visibility.Visible
          &#125;
        &#125;)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;)// Transparency can be adjusted
        .opacity(0.16)
        .backgroundColor(0x000000)
        .visibility(this.visible)
      Column() &#123;
        GridRow(&#123;
          columns: &#123; xs: 1, sm: 4, md: 8, lg: 12 &#125;,
          breakpoints: &#123;
            value: [&quot;400vp&quot;, &quot;600vp&quot;, &quot;800vp&quot;],
            reference: BreakpointsReference.WindowSize
          &#125;,
        &#125;) &#123;
          GridCol(&#123;
            span: &#123; xs: 1, sm: 2, md: 4, lg: 8 &#125;,
            offset: &#123; xs: 0, sm: 1, md: 2, lg: 2 &#125;
          &#125;) &#123;
            Column() &#123;
              Flex(&#123; justifyContent: FlexAlign.SpaceAround &#125;) &#123;
                UserPrivacyDialog();
              &#125;.margin(&#123; bottom: 10 &#125;)
            &#125;
            .backgroundColor(0xffffff)
            .visibility(this.visible)
            .clip(true)
            .borderRadius(20)
          &#125;
        &#125;
      &#125;.width(&#39;95%&#39;) // Set popup width
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-encode-images-as-Base64-in-HarmonyOS"><a href="#4-How-to-encode-images-as-Base64-in-HarmonyOS" class="headerlink" title="4. How to encode images as Base64 in HarmonyOS?"></a>4. How to encode images as Base64 in HarmonyOS?</h4><p>How to encode images obtained via CameraKit pick as Base64.  </p>
<p>Reference demo:  </p>
<pre><code class="language-typescript">let packOpts: image.PackingOption = &#123; format: &quot;image/jpeg&quot;, quality: 98 &#125;;
let imagePackerApi = image.createImagePacker();
const context: Context = getContext(this);
const resourceMgr = context.resourceManager;
let imageBuffer = await resourceMgr.getMediaContent($r(&#39;app.media.ic_low&#39;));
const imageSource: image.ImageSource = image.createImageSource(imageBuffer.buffer);
let decodingOptions: image.DecodingOptions = &#123;
  editable: true,
  desiredPixelFormat: 3,
  rotate: 90
&#125;

// Create PixelMap and perform simple rotation and scaling
imageSource.createPixelMap(decodingOptions).then((pixelMap: PixelMap) =&gt; &#123;
  this.pixelMap = pixelMap;
  // Convert PixelMap to Base64 (requires a packing process first)
  imagePackerApi.packing(pixelMap, packOpts).then((data: ArrayBuffer) =&gt; &#123;
    let base64Str = buffer.from(data).toString(&#39;base64&#39;);
    let resultBase64Str = &quot;data:image/png;base64,&quot; + base64Str;
    this.resultBase64Str = resultBase64Str;
  &#125;).catch((error: BusinessError) =&gt; &#123;
    console.error(&#39;Failed to pack the image. Error: &#39; + error);
  &#125;);
  pixelMap.release();
&#125;);

// Key tip: Directly converting PixelMap to Base64 is incorrect (example of wrong approach):
let pixelMap = await imageSource.createPixelMap(opts);
console.log(&quot;pixelMap.getPixelBytesNumber():&quot; + pixelMap.getPixelBytesNumber());
let arrayBuffer = new ArrayBuffer(pixelMap.getPixelBytesNumber());
pixelMap.readPixelsToBuffer(arrayBuffer);
console.log(&quot;arrayBuffer&quot; + arrayBuffer);
let base64Str = buffer.from(arrayBuffer).toString(Constants.BASE_64);
let resultBase64Str = &quot;data:image/png;base64,&quot; + base64Str;
</code></pre>
<p>Obtaining sandbox paths:  </p>
<pre><code class="language-typescript">import UIAbility from &#39;@ohos.app.ability.UIAbility&#39;;
export default class EntryAbility extends UIAbility &#123;
  onWindowStageCreate(windowStage) &#123;
    let context = this.context;
    let pathDir = context.filesDir;
  &#125;
&#125;
</code></pre>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-sandbox-directory-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-sandbox-directory-V5</a><br>The app sandbox is a security isolation mechanism to prevent malicious path traversal. The visible directory range for an app is the “app sandbox directory”, which includes:  </p>
<ul>
<li>A dedicated directory mapped in internal storage for each app, consisting of the “app file directory” and essential system files.  </li>
<li>Restricted visibility to protect app data from other apps.  </li>
<li>App files can be saved and processed in the “app file directory”; system files are read-only; user files require specific APIs and user authorization.</li>
</ul>
<h4 id="5-How-to-optimize-routing-usage-in-HarmonyOS"><a href="#5-How-to-optimize-routing-usage-in-HarmonyOS" class="headerlink" title="5. How to optimize routing usage in HarmonyOS?"></a>5. How to optimize routing usage in HarmonyOS?</h4><p>Can RouterModule be optimized to automatically determine the current NavStack, or will using a unified NavStack cause performance issues?  </p>
<p>Currently, router does not support returning to a specified index page. It is recommended to replace router with Navigation, whose <code>popToIndex</code> method meets this scenario.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Getting App Package Name, Popup Background Color, Decorator Nesting Issues, Regex Problems, Text Component Max Width Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:54:49 / Modified: 23:56:24" itemprop="dateCreated datePublished" datetime="2025-06-24T23:54:49+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Getting App Package Name, Popup Background Color, Decorator Nesting Issues, Regex Problems, Text Component Max Width Setting"></a>【Daily HarmonyOS Next Knowledge】 Getting App Package Name, Popup Background Color, Decorator Nesting Issues, Regex Problems, Text Component Max Width Setting</h3><h4 id="1-How-to-obtain-the-current-app-package-name-active-AbilityName-and-active-ModuleName-in-a-HAR-package-in-HarmonyOS"><a href="#1-How-to-obtain-the-current-app-package-name-active-AbilityName-and-active-ModuleName-in-a-HAR-package-in-HarmonyOS" class="headerlink" title="1. How to obtain the current app package name, active AbilityName, and active ModuleName in a HAR package in HarmonyOS?"></a>1. How to obtain the current app package name, active AbilityName, and active ModuleName in a HAR package in HarmonyOS?</h4><p>The NFC card reading interface requires passing bundleManager.ElementName, which includes bundleName, abilityName, and moduleName. If the card reading logic is written in a HAR package, how to obtain these values?  </p>
<pre><code class="language-typescript">import &#123; MainPage &#125; from &#39;harApp/Index&#39;;
import &#123; common &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; hilog &#125; from &#39;@kit.PerformanceAnalysisKit&#39;;
const TAG: string = &#39;testTag&#39;

@Entry
@Component
struct OutPage &#123;
  @State message: string = &#39;OutPage&#39;;
  private bundleName: string = &#39;&#39;
  private abilityName: string = &#39;&#39;
  private moduleName: string = &#39;&#39;

  aboutToAppear(): void &#123;
    let context = getContext() as common.UIAbilityContext
    hilog.info(0x0000, TAG, &#39;OutPage-bundleName: %&#123;public&#125;s&#39;, context.abilityInfo.bundleName)
    hilog.info(0x0000, TAG, &#39;OutPage-abilityName: %&#123;public&#125;s&#39;, context.abilityInfo.name)
    hilog.info(0x0000, TAG, &#39;OutPage-moduleName: %&#123;public&#125;s&#39;, context.abilityInfo.moduleName)
    this.bundleName = context.abilityInfo.bundleName
    this.abilityName = context.abilityInfo.name
    this.moduleName = context.abilityInfo.moduleName
  &#125;

  build() &#123;
    Column() &#123;
      MainPage(&#123; bundleName: this.bundleName, abilityName: this.abilityName, moduleName: this.moduleName &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-Does-the-HarmonyOS-popup-window-have-a-built-in-background-color"><a href="#2-Does-the-HarmonyOS-popup-window-have-a-built-in-background-color" class="headerlink" title="2. Does the HarmonyOS popup window have a built-in background color?"></a>2. Does the HarmonyOS popup window have a built-in background color?</h4><p>Currently, custom popups have a default blurred material. To set <code>backgroundColor: Color.Transparent</code>, also disable the blur effect with <code>backgroundBlurStyle: BlurStyle.NONE</code>.  </p>
<h4 id="3-When-nesting-second-level-decorators-in-HarmonyOS-why-isn’t-the-list-item-control联动-dynamically-updated"><a href="#3-When-nesting-second-level-decorators-in-HarmonyOS-why-isn’t-the-list-item-control联动-dynamically-updated" class="headerlink" title="3. When nesting second-level decorators in HarmonyOS, why isn’t the list item control联动 (dynamically updated)?"></a>3. When nesting second-level decorators in HarmonyOS, why isn’t the list item control联动 (dynamically updated)?</h4><p>Issues with @Observed and @ObjectLink decorators: Nesting class object properties doesn’t trigger updates even with the same annotation format.  </p>
<p><strong>Cause</strong>: When assigning <code>this.titleList = response.data?.form_info!!</code>, the objects in titleList are not of the “Form_info” type, so @Observed can’t monitor changes.<br><strong>Solution</strong>: Use the third-party library <code>class-transformer</code> to convert data to the “Form_info” type:<br><code>this.titleList = plainToClass(Form_info, response.data?.form_info!!)</code>  </p>
<h4 id="4-Why-does-TS-code-execute-differently-in-VSCode-and-HarmonyOS-ArkTS"><a href="#4-Why-does-TS-code-execute-differently-in-VSCode-and-HarmonyOS-ArkTS" class="headerlink" title="4. Why does TS code execute differently in VSCode and HarmonyOS ArkTS?"></a>4. Why does TS code execute differently in VSCode and HarmonyOS ArkTS?</h4><p>TS code behaves differently in VSCode and HarmonyOS ArkTS due to ArkTS’s adaptation of regular expressions.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-more-cases-V5#arkts-no-regexp-literals">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-more-cases-V5#arkts-no-regexp-literals</a>  </p>
<p><strong>Example</strong>:  </p>
<pre><code class="language-typescript">// Not recommended in ArkTS
let regex: RegExp = /\s*/g;

// Recommended
let regexp: RegExp = new RegExp(&#39;\\s*&#39;, &#39;g&#39;);

// Alternative for regex with flags
const combinedPattern = new RegExp(&quot;&lt;[&gt;]+&gt;(?:[\s\S]*?)&lt;\/[&gt;]+&gt;|\[[^\]]+\]&quot;, &#39;g&#39;);
</code></pre>
<h4 id="5-How-to-set-the-maximum-display-width-for-a-HarmonyOS-Text-component"><a href="#5-How-to-set-the-maximum-display-width-for-a-HarmonyOS-Text-component" class="headerlink" title="5. How to set the maximum display width for a HarmonyOS Text component?"></a>5. How to set the maximum display width for a HarmonyOS Text component?</h4><p><strong>Demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TextInputExample2 &#123;
  controller: TextInputController = new TextInputController()
  @State text: string = &#39;&#39;

  build() &#123;
    Column(&#123; space: 20 &#125;) &#123;
      Text(&#39;1111111111111111111111111111111&#39;.split(&#39;&#39;).join(&#39;\u200B&#39;))
        .textOverflow(&#123; overflow: TextOverflow.Ellipsis &#125;)
        .maxLines(1)
        .fontSize(12)
        .border(&#123; width: 1 &#125;)
        .margin(100)
        .constraintSize(&#123; maxWidth: 200 &#125;)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-size-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-size-V5</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] URL Encoding, Resource Adaptation, Routing Mixing, Custom Root Container, News-related Examples</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-24 23:49:41" itemprop="dateCreated datePublished" datetime="2025-06-24T23:49:41+08:00">2025-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-25 00:06:32" itemprop="dateModified" datetime="2025-06-25T00:06:32+08:00">2025-06-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples"><a href="#Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples" class="headerlink" title="[Daily HarmonyOS Next Knowledge] URL Encoding, Resource Adaptation, Routing Mixing, Custom Root Container, News-related Examples"></a>[Daily HarmonyOS Next Knowledge] URL Encoding, Resource Adaptation, Routing Mixing, Custom Root Container, News-related Examples</h3><h4 id="1-HarmonyOS-encodeURIComponent"><a href="#1-HarmonyOS-encodeURIComponent" class="headerlink" title="1. HarmonyOS encodeURIComponent?"></a>1. HarmonyOS encodeURIComponent?</h4><p>How to implement similar functionality: <code>const imgParams = encodeURIComponent(imgBase64Str)</code>  </p>
<p>String encoding demo:  </p>
<pre><code class="language-typescript">@Entry 
@Component struct Index &#123; 
  @State message: string = &#39;Hello World&#39;; 
  name: string = &quot;张三&quot;;
  
  build() &#123;
    Row() &#123; 
      Column() &#123;
        Text(this.message) 
          .fontSize(25) 
          .fontWeight(FontWeight.Bold) 
        
        Button(&#123;
          type: ButtonType.Capsule,
          margin: &#123; bottom: 20 &#125;
        &#125;) &#123;
          Text(&#39;encodeURIComponent&#39;)
            .fontSize(25)
        &#125;
        .onClick(() =&gt; &#123;
          this.message = &quot;http://example.com/index.html?url=&quot; + encodeURIComponent(&quot;http://example.com?name=&quot; + this.name); 
        &#125;) 
        
        Button(&#123;
          type: ButtonType.Capsule,
          margin: &#123; bottom: 20 &#125;
        &#125;) &#123;
          Text(&#39;encodeURI&#39;)
            .fontSize(25)
        &#125;
        .onClick(() =&gt; &#123;
          this.message = encodeURI(&quot;http://example.com/index.html?name=&quot; + this.name); 
        &#125;) 
      &#125;
      .width(&#39;100%&#39;) 
    &#125; 
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-HarmonyOS-resource-adaptation"><a href="#2-HarmonyOS-resource-adaptation" class="headerlink" title="2. HarmonyOS resource adaptation?"></a>2. HarmonyOS resource adaptation?</h4><p>If only one set of float resources is defined in the <code>resources</code> directory, do references to these resources need to be converted to the corresponding dimensions for mobile devices?  </p>
<ul>
<li>If there is only one set of UI resources, the adaptation of width&#x2F;height in formal projects requires manual conversion decisions, as the system does not automatically convert based on mobile device dimensions.  </li>
<li>For better adaptation without conversion, consider:  <ul>
<li>Using <code>vp</code> for pixel units, <code>fp</code> for text, and responsive layouts.  </li>
<li>Using <code>designWidth</code> to define the design baseline width, then scaling elements based on the actual device width.</li>
</ul>
</li>
</ul>
<p><strong>Virtual pixel unit (vp)</strong>:<br>Virtual pixels provide a flexible way to adapt to different screen densities, differing from hardware pixel units.  </p>
<p><strong>Font pixel unit (fp)</strong>:<br>Fp is identical to vp by default (1fp &#x3D; 1vp). If users enable larger fonts in settings, fp scales by the system font ratio (1fp &#x3D; 1vp * scale).  </p>
<p><strong>Best practices</strong>:  </p>
<ul>
<li>Use <code>fp</code> for text (default unit is <code>px</code>, which may cause layout deviations on different devices; <code>fp</code> handles screen density automatically).  </li>
<li>Use <code>vp</code> for distance units (similar to <code>sp/dp</code> in other frameworks).  </li>
<li><code>vp</code> is unaffected by <code>designWidth</code> configuration, while <code>lpx</code> is scaled based on <code>designWidth</code>.  <ul>
<li>Example: If <code>designWidth</code> is changed from 720 to 750, a container with <code>720lpx</code> width will:  <ul>
<li>Fill the screen when <code>designWidth: 720</code>.  </li>
<li>Not fill the screen when <code>designWidth: 750</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-Can-HarmonyOS-Navigation-and-router-be-used-mixedly"><a href="#3-Can-HarmonyOS-Navigation-and-router-be-used-mixedly" class="headerlink" title="3. Can HarmonyOS Navigation and router be used mixedly?"></a>3. Can HarmonyOS Navigation and router be used mixedly?</h4><p>Navigation and router can be used mixedly with specific restrictions and recommended strategies:  </p>
<ol>
<li><p><strong>router use cases</strong>:  </p>
<ul>
<li>Suitable for simple page jumps without complex animations, interactions, or multi-level routing.  </li>
<li>Ideal for scenarios requiring UIContext of the main window for navigation.</li>
</ul>
</li>
<li><p><strong>Navigation use cases</strong>:  </p>
<ul>
<li>Suitable for complex scenarios needing to replace router capabilities, offering more robust routing and navigation features.  </li>
<li>Handles complex interaction logic and multi-level routing requirements.</li>
</ul>
</li>
<li><p><strong>Mixed usage strategies</strong>:  </p>
<ul>
<li><strong>Recommendation</strong>: Use <code>router</code> for simple scenarios; use <code>Navigation</code> for complex needs to ensure consistency and user experience.  </li>
<li><strong>Evolution</strong>: <code>router</code> will continue to be maintained, but new routing features will prioritize <code>Navigation</code>.</li>
</ul>
</li>
<li><p><strong>Mixed usage restrictions</strong>:  </p>
<ul>
<li>When using <code>Navigation</code>, pay attention to details like hiding the title bar (<code>hideTitleBar</code>) and handling large icons.  </li>
<li>Ensure routing consistency and correctness to avoid errors.</li>
</ul>
</li>
</ol>
<h4 id="4-How-to-define-a-root-container-in-HarmonyOS"><a href="#4-How-to-define-a-root-container-in-HarmonyOS" class="headerlink" title="4. How to define a root container in HarmonyOS?"></a>4. How to define a root container in HarmonyOS?</h4><p>How to define a root component&#x2F;container similar to <code>Column</code>&#x2F;<code>Row</code>?  </p>
<p>ArkTS supports TypeScript decorator syntax prior to TS5.0. For decorator definitions and runtime behavior, refer to the <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/decorators.html">TS official documentation</a>. Note that decorators defined in <code>.ets</code> files must comply with ArkTS syntax (e.g., no <code>any</code> types).  </p>
<p><strong>Decorator examples (class, property, method, parameter)</strong>:  </p>
<pre><code class="language-typescript">function TestClassDecorator(target: Function) &#123;&#125;
function TestMemberDecorator(target: testClass, memberName: String) &#123;&#125;
function TestFunDecorator(target: testClass, propertyName: String, descriptor: PropertyDescriptor) &#123;&#125;
function TestArgDecorator(target: Function, methodName: String, paramIndex: Number) &#123;&#125;

@TestClassDecorator
class testClass &#123;
  @TestMemberDecorator
  count: number = 123;
  
  @TestFunDecorator
  TestFun(@TestArgDecorator param: string) &#123;&#125;
&#125;
</code></pre>
<p><strong>Root container demo with decorators</strong>:  </p>
<pre><code class="language-typescript">import &#123; MyDescriptor &#125; from ‘…/common/decorators’

@Entry
@Component
struct Index_231129191721035 &#123;
  @State message: string = ‘Hello World’;
  
  aboutToAppear() &#123;
    this.demo()
  &#125;
  
  build() &#123;
    Flex() &#123;
      // Content
    &#125;
    .backgroundColor(Color.Green)
    .constraintSize(&#123;
      minWidth: 100,
      maxWidth: 200,
      minHeight: 0,
      maxHeight: 200
    &#125;)
    .height(‘100%’)
  &#125;
  
  @MyDescriptor
  demo() &#123;
    console.log(‘ccc’)
    return ‘cccc’
  &#125;
&#125;

export function MyDescriptor(target: Object, key: string, descriptor: PropertyDescriptor) &#123;
  const originalMethod: Function = descriptor.value;
  descriptor.value = (...args: Object[]) =&gt; &#123;
    console.log(`Calling $&#123;target.constructor.name&#125; method $&#123;key&#125; with argument: $&#123;args&#125;`);
    const result: Object = originalMethod(...args);
    console.log(`Method $&#123;key&#125; returned: $&#123;result&#125;`);
    return result;
  &#125;
  return descriptor;
&#125;
</code></pre>
<p><strong>Note</strong>: A class decorated by a decorator (e.g., <code>class A</code>) requires <code>new A()</code> to trigger the decorator.  </p>
<h4 id="5-HarmonyOS-news-related-demo-reference"><a href="#5-HarmonyOS-news-related-demo-reference" class="headerlink" title="5. HarmonyOS news-related demo reference?"></a>5. HarmonyOS news-related demo reference?</h4><p>Refer to <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos_samples/multi-news-read">UI Framework - Multi-news Reading</a>.  </p>
<p><strong>Media news interface (repeating layout)</strong>:  </p>
<ul>
<li>Uses grid layout, controlling column count via breakpoints.  </li>
<li>The <code>onBreakChange</code> callback of <code>GridRow</code> updates breakpoints and data source counts when the interface size changes.  </li>
<li><code>columns = 1</code> for <code>sm/md</code> breakpoints; <code>columns = 2</code> for <code>lg</code> and above.</li>
</ul>
<p><strong>News channel interface (repeating layout)</strong>:  </p>
<ul>
<li>Similarly uses grid layout with column count controlled by breakpoints.  </li>
<li>For <code>sm/md</code> breakpoints: <code>columns = 1</code>, hide news summaries; for <code>lg</code> and above: <code>columns = 2</code>, display summaries with max 2 lines and ellipsis.</li>
</ul>
<p><strong>News list interface (list to grid conversion)</strong>:  </p>
<ul>
<li>Uses <code>List</code> for <code>sm</code> breakpoints; uses grid layout for breakpoints above <code>sm</code>.  </li>
<li><code>md</code> breakpoint: 2 columns; <code>lg</code> breakpoint: 4 columns, with <code>GridCol</code> width adjusted as needed.</li>
</ul>
<p><img src="/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.09.png" alt="text"><br><img src="/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.09-1.png" alt="text"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Text Content Font, Half-screen Routing, Input Cursor Movement Monitoring, DidBuild</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:47:26 / Modified: 23:47:52" itemprop="dateCreated datePublished" datetime="2025-06-24T23:47:26+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild"><a href="#【Daily-HarmonyOS-Next-Knowledge】Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Text Content Font, Half-screen Routing, Input Cursor Movement Monitoring, DidBuild"></a>【Daily HarmonyOS Next Knowledge】Text Content Font, Half-screen Routing, Input Cursor Movement Monitoring, DidBuild</h3><h4 id="1-HarmonyOS-Text-content-not-displayed-when-using-fontFamily"><a href="#1-HarmonyOS-Text-content-not-displayed-when-using-fontFamily" class="headerlink" title="1. HarmonyOS Text content not displayed when using fontFamily?"></a>1. HarmonyOS Text content not displayed when using fontFamily?</h4><p>To globally use custom fonts in an app, register them via the <code>windowStage.loadContent</code> callback in the <code>onWindowStageCreate</code> lifecycle of the <code>EntryAbility.ets</code> file.  </p>
<h4 id="2-How-to-open-a-half-screen-via-routing-in-HarmonyOS"><a href="#2-How-to-open-a-half-screen-via-routing-in-HarmonyOS" class="headerlink" title="2. How to open a half-screen via routing in HarmonyOS?"></a>2. How to open a half-screen via routing in HarmonyOS?</h4><p>In scenarios like live broadcast rooms or feed streams, clicking a button opens a half-screen container with an RNView. Clicking within RN opens a new half-screen, allowing multiple half-screens to be stacked. Routing simplifies this by abstracting the jump logic, eliminating the need for business parties to care about the entry point or write separate components for each scenario.  </p>
<p>Use consistent component navigation with the <code>NavDestinationMode.DIALOG</code> display type:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5</a>  </p>
<h4 id="3-HarmonyOS-router-replaceUrl-issue"><a href="#3-HarmonyOS-router-replaceUrl-issue" class="headerlink" title="3. HarmonyOS router.replaceUrl issue?"></a>3. HarmonyOS router.replaceUrl issue?</h4><p>When page A uses <code>pushUrl</code> with <code>router.RouterMode.Single</code> to navigate to page B, and page B uses <code>replaceUrl</code> with <code>router.RouterMode.Single</code> to return to page A, clicking the back button in page A or the system back button may fail to navigate properly (e.g., returning directly to the desktop).  </p>
<p><strong>Solution</strong>: Replace <code>router.replaceUrl()</code> with <code>router.pushUrl()</code>. <code>replaceUrl</code> replaces the current page and destroys the replaced page, while <code>pushUrl</code> maintains the page stack.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5#routerback">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5#routerback</a>  </p>
<p><strong>Demo example</strong>:  </p>
<pre><code class="language-typescript">// searchDetail.ets
import &#123; router &#125; from &#39;@kit.ArkUI&#39;

@Entry
@Component
struct searchDeatil &#123;
  onPageHide(): void &#123;
    router.clear() // Clear all historical pages, keeping only the current page at the stack top.
  &#125;
  @State message: string = &#39;Return&#39;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(&#39;Page B&#39;)
        Button(this.message).fontSize(20).onClick(() =&gt; &#123;
          router.replaceUrl(&#123;
            url: &#39;pages/Index&#39;
          &#125;, router.RouterMode.Single, (err) =&gt; &#123;
            if (err) &#123;
              console.error(`Invoke replaceUrl failed, code is $&#123;err.code&#125;, message is $&#123;err.message&#125;`);
              return;
            &#125;
            console.info(&#39;Invoke replaceUrl succeeded.&#39;);
          &#125;)
        &#125;)
      &#125;
    &#125;
  &#125;
&#125;

// index.ets
import router from &#39;@ohos.router&#39;;
@Entry
@Component
struct Index &#123;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(&#39;Page A&#39;)
        Button(&#39;Jump to B&#39;).onClick(() =&gt; &#123;
          router.pushUrl(&#123;
            url: &#39;pages/SearchDetail&#39; // Target URL
          &#125;, router.RouterMode.Single, (err) =&gt; &#123;
            if (err) &#123;
              console.error(`Invoke replaceUrl failed, code is $&#123;err.code&#125;, message is $&#123;err.message&#125;`);
              return;
            &#125;
            console.info(&#39;Invoke replaceUrl succeeded.&#39;);
          &#125;)
        &#125;)
        Button(&#39;Return&#39;).onClick(() =&gt; &#123;
          router.back()
        &#125;)
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-HarmonyOS-input-cursor-movement-monitoring"><a href="#4-HarmonyOS-input-cursor-movement-monitoring" class="headerlink" title="4. HarmonyOS input cursor movement monitoring?"></a>4. HarmonyOS input cursor movement monitoring?</h4><p>When using a custom keyboard with <code>TextInput</code>, setting <code>maxLength</code>, and inputting beyond the limit, deleting characters may not trigger the <code>onChange</code> callback until excess inputs are cleared. Monitoring cursor movement to reset it to the end is needed.  </p>
<p>Use the <code>@ohos.inputMethodEngine</code> service’s <code>KeyboardDelegate.on(&#39;cursorContextChange&#39;)</code> to subscribe to cursor events:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inputmethodengine-V5#oncursorcontextchange">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inputmethodengine-V5#oncursorcontextchange</a>  </p>
<p><code>on(type: &#39;cursorContextChange&#39;, callback: (x: number, y: number, height: number) =&gt; void): void</code>  </p>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">type</td>
<td align="left">string</td>
<td align="left">Yes</td>
<td align="left">Cursor change event, fixed as <code>&#39;cursorContextChange&#39;</code>.</td>
</tr>
<tr>
<td align="left">callback</td>
<td align="left"><code>(x: number, y: number, height: number) =&gt; void</code></td>
<td align="left">Yes</td>
<td align="left">Callback returning cursor info: <br>- <code>x</code>: X-coordinate of the cursor top <br>- <code>y</code>: Y-coordinate of the cursor top <br>- <code>height</code>: Cursor height</td>
</tr>
</tbody></table>
<p><strong>Example</strong>:  </p>
<pre><code class="language-typescript">try &#123;
  inputMethodEngine.getKeyboardDelegate().on(&#39;cursorContextChange&#39;, (x: number, y: number, height: number) =&gt; &#123;
    console.log(&#39;inputMethodEngine cursorContextChange x:&#39; + x);
    console.log(&#39;inputMethodEngine cursorContextChange y:&#39; + y);
    console.log(&#39;inputMethodEngine cursorContextChange height:&#39; + height);
  &#125;);
&#125; catch (err) &#123;
  console.error(`Failed to cursorContextChange: $&#123;JSON.stringify(err)&#125;`);
&#125;
</code></pre>
<h4 id="5-What-is-the-role-and-application-scenario-of-HarmonyOS-onDidBuild"><a href="#5-What-is-the-role-and-application-scenario-of-HarmonyOS-onDidBuild" class="headerlink" title="5. What is the role and application scenario of HarmonyOS onDidBuild?"></a>5. What is the role and application scenario of HarmonyOS onDidBuild?</h4><p>The <code>build()</code> method is for defining UI components, while <code>onDidBuild</code> runs after <code>build()</code> completes, making it suitable for non-UI logic (e.g.,埋点 (tracking), simple calculations). Avoid modifying components in <code>onDidBuild</code> since the UI structure is finalized. In contrast, <code>aboutToAppear</code> runs before <code>build()</code>.  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Box Focus Color, Text Overflow Handling, Device-Aware Screen Rotation, Basic Control Encapsulation, Global Font Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:45:36 / Modified: 23:46:06" itemprop="dateCreated datePublished" datetime="2025-06-24T23:45:36+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting"><a href="#Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Input Box Focus Color, Text Overflow Handling, Device-Aware Screen Rotation, Basic Control Encapsulation, Global Font Setting"></a>[Daily HarmonyOS Next Knowledge] Input Box Focus Color, Text Overflow Handling, Device-Aware Screen Rotation, Basic Control Encapsulation, Global Font Setting</h3><h4 id="1-Does-HarmonyOS-support-modifying-the-focus-cursor-color-for-input-boxes"><a href="#1-Does-HarmonyOS-support-modifying-the-focus-cursor-color-for-input-boxes" class="headerlink" title="1. Does HarmonyOS support modifying the focus cursor color for input boxes?"></a>1. Does HarmonyOS support modifying the focus cursor color for input boxes?</h4><ul>
<li>RichEditor: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5#ZH-CN_TOPIC_0000001930676557__caretcolor12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5#ZH-CN_TOPIC_0000001930676557__caretcolor12</a>  </li>
<li>TextInput: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5</a>  </li>
<li>Search: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5</a></li>
</ul>
<h4 id="2-How-to-display-an-“ellipsis-more”-when-text-exceeds-the-limit-in-HarmonyOS"><a href="#2-How-to-display-an-“ellipsis-more”-when-text-exceeds-the-limit-in-HarmonyOS" class="headerlink" title="2. How to display an “ellipsis + more” when text exceeds the limit in HarmonyOS?"></a>2. How to display an “ellipsis + more” when text exceeds the limit in HarmonyOS?</h4><p>Control text overflow with <code>overflow: TextOverflow.Ellipsis</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-text-V5#textoverflow">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-text-V5#textoverflow</a>  </p>
<p><code>textOverflow(value: &#123; overflow: TextOverflow &#125;)</code>  </p>
<ul>
<li>Sets the display mode for overflow text, truncating by character (e.g., words for English). To truncate by letter, use zero-width spaces (<code>\u200B</code>). From API version 11, combine with <code>wordBreak: WordBreak.BREAK_ALL</code> for letter-level truncation.  </li>
<li>When <code>overflow</code> is set to <code>TextOverflow.None</code>, <code>TextOverflow.Clip</code>, or <code>TextOverflow.Ellipsis</code>, <code>maxLines</code> must be configured; otherwise, it fails. <code>TextOverflow.None</code> and <code>TextOverflow.Clip</code> have the same effect.  </li>
<li>When <code>overflow</code> is set to <code>TextOverflow.MARQUEE</code>, text scrolls in a single line. <code>maxLines</code> and <code>copyOption</code> are ignored. <code>textAlign</code> works only when text is non-scrollable. The <code>clip</code> property defaults to <code>true</code> in marquee mode, and <code>CustomSpan</code> in attribute strings is unsupported.</li>
</ul>
<h4 id="3-How-to-enable-screen-rotation-based-on-device-settings-in-HarmonyOS"><a href="#3-How-to-enable-screen-rotation-based-on-device-settings-in-HarmonyOS" class="headerlink" title="3. How to enable screen rotation based on device settings in HarmonyOS?"></a>3. How to enable screen rotation based on device settings in HarmonyOS?</h4><p>Dynamically detect device types and configure auto-rotation support: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setpreferredorientation9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setpreferredorientation9</a>  </p>
<p><code>setPreferredOrientation(orientation: Orientation, callback: AsyncCallback&lt;void&gt;): void</code>  </p>
<ul>
<li>Sets the main window’s display orientation with an async callback. Effective only on devices supporting sensor-driven rotation, not on 2-in-1 devices, free multi-window mode, or sub-windows.</li>
</ul>
<p>Use device information APIs to distinguish device types and enable auto-rotation accordingly:<br>Reference: <code>@ohos.distributedDeviceManager</code> (Device Management): <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-distributeddevicemanager-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-distributeddevicemanager-V5</a>  </p>
<p>Key capabilities:  </p>
<ul>
<li>Register&#x2F;unregister device online&#x2F;offline listeners.  </li>
<li>Discover nearby untrusted devices.  </li>
<li>Authenticate&#x2F;取消认证设备.  </li>
<li>Query trusted device lists.  </li>
<li>Retrieve local device info (name, type, ID, etc.).</li>
</ul>
<h4 id="4-How-to-encapsulate-commonly-used-basic-controls-e-g-Button-Text-Column-in-HarmonyOS-projects"><a href="#4-How-to-encapsulate-commonly-used-basic-controls-e-g-Button-Text-Column-in-HarmonyOS-projects" class="headerlink" title="4. How to encapsulate commonly used basic controls (e.g., Button, Text, Column) in HarmonyOS projects?"></a>4. How to encapsulate commonly used basic controls (e.g., Button, Text, Column) in HarmonyOS projects?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-create-custom-components-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-create-custom-components-V5</a>  </p>
<p>In ArkUI, UI elements are components: system-provided or developer-defined (custom components). Custom components enhance code reusability, separate business logic from UI, and facilitate version evolution.  </p>
<p>Key features:  </p>
<ul>
<li><strong>Composability</strong>: Combine system components, properties, and methods.  </li>
<li><strong>Reusability</strong>: Reuse custom components as instances in different parent components&#x2F;containers.  </li>
<li><strong>Data-driven UI update</strong>: Modify state variables to trigger UI refreshes.</li>
</ul>
<h4 id="5-How-to-set-global-fonts-in-HarmonyOS"><a href="#5-How-to-set-global-fonts-in-HarmonyOS" class="headerlink" title="5. How to set global fonts in HarmonyOS?"></a>5. How to set global fonts in HarmonyOS?</h4><ul>
<li><strong>Text components</strong>: Use <code>Text.Font.family</code> for custom fonts.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-types-V5#font">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-types-V5#font</a>  </li>
<li><strong>Canvas</strong>: Does not support custom fonts. Use <code>RenderingContextSettings.font</code> with supported families (e.g., <code>&#39;sans-serif&#39;</code>, <code>&#39;serif&#39;</code>, <code>&#39;monospace&#39;</code>).<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-canvasrenderingcontext2d-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-canvasrenderingcontext2d-V5</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Pixel-Unit-Conversion-Dialog-Declaration-Issues-List-Nesting-Byte-Stream-to-Image-Builder-Function-State-Not-Triggering-UI-Changes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Pixel-Unit-Conversion-Dialog-Declaration-Issues-List-Nesting-Byte-Stream-to-Image-Builder-Function-State-Not-Triggering-UI-Changes/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Pixel Unit Conversion, Dialog Declaration Issues, List Nesting, Byte Stream to Image, Builder Function State Not Triggering UI Changes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:44:24 / Modified: 23:44:49" itemprop="dateCreated datePublished" datetime="2025-06-24T23:44:24+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Pixel-Unit-Conversion-Dialog-Declaration-Issues-List-Nesting-Byte-Stream-to-Image-Builder-Function-State-Not-Triggering-UI-Changes"><a href="#【Daily-HarmonyOS-Next-Knowledge】Pixel-Unit-Conversion-Dialog-Declaration-Issues-List-Nesting-Byte-Stream-to-Image-Builder-Function-State-Not-Triggering-UI-Changes" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Pixel Unit Conversion, Dialog Declaration Issues, List Nesting, Byte Stream to Image, Builder Function State Not Triggering UI Changes"></a>【Daily HarmonyOS Next Knowledge】Pixel Unit Conversion, Dialog Declaration Issues, List Nesting, Byte Stream to Image, Builder Function State Not Triggering UI Changes</h3><h4 id="1-Which-pixel-unit-should-be-used-in-HarmonyOS"><a href="#1-Which-pixel-unit-should-be-used-in-HarmonyOS" class="headerlink" title="1. Which pixel unit should be used in HarmonyOS?"></a>1. Which pixel unit should be used in HarmonyOS?</h4><p>The UI provides an image with 750 pixels. When developing, for a button with a width of 100px&#x2F;100dp, should we use <code>px2vp(100)</code>, <code>100/2 = 50vp</code>, or another approach?  </p>
<p>For specific conversion between vp and px, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5#%E5%83%8F%E7%B4%A0%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5#%E5%83%8F%E7%B4%A0%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2</a>  </p>
<table>
<thead>
<tr>
<th align="left">Interface</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>vp2px(value: number): number</code></td>
<td align="left">Converts a value in vp units to px units.<br><br><strong>Note:</strong><br><br>Uses the virtual pixel ratio of the current UI instance’s screen by default. If the UI instance is not created, uses the default screen’s virtual pixel ratio.</td>
</tr>
<tr>
<td align="left"><code>px2vp(value: number): number</code></td>
<td align="left">Converts a value in px units to vp units.<br><br><strong>Note:</strong><br><br>Uses the virtual pixel ratio of the current UI instance’s screen by default. If the UI instance is not created, uses the default screen’s virtual pixel ratio.</td>
</tr>
<tr>
<td align="left"><code>fp2px(value: number): number</code></td>
<td align="left">Converts a value in fp units to px units.</td>
</tr>
<tr>
<td align="left"><code>px2fp(value: number): number</code></td>
<td align="left">Converts a value in px units to fp units.</td>
</tr>
<tr>
<td align="left"><code>lpx2px(value: number): number</code></td>
<td align="left">Converts a value in lpx units to px units.</td>
</tr>
<tr>
<td align="left"><code>px2lpx(value: number): number</code></td>
<td align="left">Converts a value in px units to lpx units.</td>
</tr>
</tbody></table>
<h4 id="2-Why-can’t-CustomDialogController-be-declared-outside-a-Component-in-HarmonyOS"><a href="#2-Why-can’t-CustomDialogController-be-declared-outside-a-Component-in-HarmonyOS" class="headerlink" title="2. Why can’t CustomDialogController be declared outside a Component in HarmonyOS?"></a>2. Why can’t CustomDialogController be declared outside a Component in HarmonyOS?</h4><p>I want to create a project-wide LoadingDialog for convenient calling, such as <code>globalDialogController.show()</code>.  </p>
<p>The custom dialog <code>CustomDialogController</code> is only valid when used as a member variable of <code>@CustomDialog</code> and <code>@Component</code> structs and assigned within the <code>@Component</code> struct. Use <code>promptAction.openCustomDialog</code> for dialog rendering instead of <code>CustomDialogController</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a>  </p>
<h4 id="3-Can-the-HarmonyOS-List-component-not-be-nested-with-the-Grid-component"><a href="#3-Can-the-HarmonyOS-List-component-not-be-nested-with-the-Grid-component" class="headerlink" title="3. Can the HarmonyOS List component not be nested with the Grid component?"></a>3. Can the HarmonyOS List component not be nested with the Grid component?</h4><p>Rendering Grid components within ListItem of the List component is invalid.  </p>
<p>Sample code for testing:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index6</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">List</span>() &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&quot;I am a ListItem&quot;</span>)</span><br><span class="line">          &#125;.<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Grid</span>() &#123;</span><br><span class="line">              <span class="title class_">ForEach</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>], <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">                  <span class="title class_">Column</span>() &#123;</span><br><span class="line">                    <span class="title class_">Text</span>(<span class="string">`number:<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                  &#125;</span><br><span class="line">                  .<span class="title function_">backgroundColor</span>(<span class="string">`#87<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">            .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">            .<span class="title function_">rowsGap</span>(<span class="number">30</span>)</span><br><span class="line">            .<span class="title function_">columnsGap</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#987&quot;</span>)</span><br><span class="line">          &#125;.<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="4-How-to-display-image-data-in-byte-format-in-an-Image-component-in-HarmonyOS"><a href="#4-How-to-display-image-data-in-byte-format-in-an-Image-component-in-HarmonyOS" class="headerlink" title="4. How to display image data in byte[] format in an Image component in HarmonyOS?"></a>4. How to display image data in byte[] format in an Image component in HarmonyOS?</h4><p>Convert the buffer to a PixelMap and then load it. Example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> imageSource = image.<span class="title function_">createImageSource</span>(buffer)</span><br><span class="line"><span class="keyword">let</span> options = &#123;</span><br><span class="line">  <span class="attr">alphaType</span>: <span class="number">0</span>,                    <span class="comment">// Transparency</span></span><br><span class="line">  <span class="attr">editable</span>: <span class="literal">false</span>,                 <span class="comment">// Editable status</span></span><br><span class="line">  <span class="attr">pixelFormat</span>: <span class="number">3</span>,                  <span class="comment">// Pixel format</span></span><br><span class="line">  <span class="attr">scaleMode</span>: <span class="number">1</span>,                    <span class="comment">// Scaling mode</span></span><br><span class="line">  <span class="attr">size</span>: &#123; <span class="attr">height</span>: <span class="number">100</span>, <span class="attr">width</span>: <span class="number">100</span> &#125; <span class="comment">// Created image size</span></span><br><span class="line">&#125;</span><br><span class="line">imageSource.<span class="title function_">createPixelMap</span>(options).<span class="title function_">then</span>(<span class="function">(<span class="params">pixelMap</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">image</span> = pixelMap</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<h4 id="5-Why-doesn’t-the-state-variable-received-by-a-HarmonyOS-Builder-function-trigger-internal-UI-changes"><a href="#5-Why-doesn’t-the-state-variable-received-by-a-HarmonyOS-Builder-function-trigger-internal-UI-changes" class="headerlink" title="5. Why doesn’t the state variable received by a HarmonyOS @Builder function trigger internal UI changes?"></a>5. Why doesn’t the state variable received by a HarmonyOS @Builder function trigger internal UI changes?</h4><p>The ChangePinPage interface invokes a custom keyboard. Modifying <code>currentKeyboardType</code> (keyboard type) in the custom keyboard’s button component to switch between Chinese and English keyboards does not update the value of <code>Text($\&#123;$$.currentKeyboardType&#125;)</code> in CustomKeyboard.ets.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxxModel.ets</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Tmp</span> &#123;</span><br><span class="line">  <span class="attr">inputController</span>: <span class="title class_">TextInputController</span>;</span><br><span class="line">  <span class="attr">currentKeyboardType</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">inputController</span>: <span class="title class_">TextInputController</span>, <span class="attr">currentKeyboardType</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputController</span> = inputController;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentKeyboardType</span> = currentKeyboardType</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"># <span class="title class_">ChangePinPage</span>.<span class="property">ets</span>:</span><br><span class="line"><span class="meta">@Provide</span> <span class="attr">currentKeyboardType</span>: <span class="built_in">number</span> = <span class="title class_">Const</span>.<span class="property">KEYBOARD_TYPE_NUMBER</span>; </span><br><span class="line">...</span><br><span class="line"><span class="title class_">TextInput</span>()</span><br><span class="line">.<span class="title function_">customKeyboard</span>(<span class="title class_">KeyBoardWindow</span>(<span class="keyword">new</span> <span class="title class_">Tmp</span>(<span class="variable language_">this</span>.<span class="property">oldPinController</span>, <span class="variable language_">this</span>.<span class="property">currentKeyboardType</span>)))</span><br><span class="line"># <span class="title class_">CustomKeyboard</span>.<span class="property">ets</span>:</span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">KeyBoardWindow</span>(<span class="params"><span class="attr">$$</span>: <span class="title class_">Tmp</span></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&quot;app.media.ic_keyboard_down&quot;</span>))<span class="comment">// &quot;Collapse&quot; icon in the title row</span></span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          $$.<span class="property">inputController</span>.<span class="title function_">stopEditing</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;$$.currentKeyboardType&#125;</span>`</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// xxxChild.ets ...</span></span><br><span class="line"><span class="meta">@Consume</span> <span class="attr">currentKeyboardType</span>: <span class="built_in">number</span>;</span><br><span class="line">...</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">currentKeyboardType</span> = <span class="number">2</span>;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For global @Builder custom build functions using reference passing, if placed within Navigation()&#x27;s menus, state variable changes will not trigger UI refresh in the @Builder method.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">When passing parameters by reference, the parameters can be state variables, and state variable changes will trigger UI refresh in the @Builder method.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builder-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Related demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Builder</span> <span class="keyword">function</span> <span class="title function_">ABuilder</span>(<span class="params"><span class="attr">$$</span>: &#123; paramA1: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">`UseStateVarByReference: <span class="subst">$&#123;$$.paramA1&#125;</span> `</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">label</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// When calling ABuilder in the Parent component, pass this.label by reference to ABuilder</span></span><br><span class="line">      <span class="title class_">ABuilder</span>(&#123; <span class="attr">paramA1</span>: <span class="variable language_">this</span>.<span class="property">label</span> &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Click me&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// After clicking &quot;Click me&quot;, the UI refreshes from &quot;Hello&quot; to &quot;ArkUI&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">label</span> = <span class="string">&#x27;ArkUI&#x27;</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Global-Prompts-Text-Size-Changes-Tab-Subpage-Lifecycle-Routing-Parameter-Acquisition-State-Monitoring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Global-Prompts-Text-Size-Changes-Tab-Subpage-Lifecycle-Routing-Parameter-Acquisition-State-Monitoring/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Global Prompts, Text Size Changes, Tab Subpage Lifecycle, Routing Parameter Acquisition, State Monitoring</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:42:37 / Modified: 23:43:04" itemprop="dateCreated datePublished" datetime="2025-06-24T23:42:37+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Global-Prompts-Text-Size-Changes-Tab-Subpage-Lifecycle-Routing-Parameter-Acquisition-State-Monitoring"><a href="#Daily-HarmonyOS-Next-Knowledge-Global-Prompts-Text-Size-Changes-Tab-Subpage-Lifecycle-Routing-Parameter-Acquisition-State-Monitoring" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Global Prompts, Text Size Changes, Tab Subpage Lifecycle, Routing Parameter Acquisition, State Monitoring"></a>[Daily HarmonyOS Next Knowledge] Global Prompts, Text Size Changes, Tab Subpage Lifecycle, Routing Parameter Acquisition, State Monitoring</h3><h4 id="1-Does-HarmonyOS-support-a-global-toast-like-pop-up-window-that-allows-custom-layouts-and-entry-exit-animations"><a href="#1-Does-HarmonyOS-support-a-global-toast-like-pop-up-window-that-allows-custom-layouts-and-entry-exit-animations" class="headerlink" title="1. Does HarmonyOS support a global toast-like pop-up window that allows custom layouts and entry&#x2F;exit animations?"></a>1. Does HarmonyOS support a global toast-like pop-up window that allows custom layouts and entry&#x2F;exit animations?</h4><p>Is there a pop-up window similar to a global toast that supports custom layouts and entry&#x2F;exit animations?<br>Since the default toast has limited customization, it is recommended to use <code>promptAction.openCustomDialog</code> to implement a transparent toast-like effect with custom layouts.<br><strong>Reference Documentation</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#promptactionopencustomdialog11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#promptactionopencustomdialog11</a>  </p>
<p><code>openCustomDialog(options: CustomDialogOptions): Promise&lt;number&gt;</code>  </p>
<ul>
<li>Opens a custom pop-up window.  </li>
<li>Currently, <code>isModal = true</code> and <code>showInSubWindow = true</code> cannot be used simultaneously.  </li>
<li>The pop-up width in portrait mode defaults to <code>window width - left/right margin (16vp, 40vp for 2-in-1 devices)</code>, with a maximum default width of 400vp.</li>
</ul>
<h4 id="2-How-to-convert-the-component-size-obtained-via-the-onSizeChange-interface-to-pixels-in-HarmonyOS"><a href="#2-How-to-convert-the-component-size-obtained-via-the-onSizeChange-interface-to-pixels-in-HarmonyOS" class="headerlink" title="2. How to convert the component size obtained via the onSizeChange interface to pixels in HarmonyOS?"></a>2. How to convert the component size obtained via the <code>onSizeChange</code> interface to pixels in HarmonyOS?</h4><p>When obtaining the component size through the <code>onSizeChange</code> interface, how to convert the <code>sizeoptions</code> to pixels?<br><strong>Reference for pixel unit conversion</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5</a><br>ArkUI provides 4 pixel units, with <code>vp</code> as the base unit.  </p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">px</td>
<td align="left">Physical screen pixel unit.</td>
</tr>
<tr>
<td align="left">vp</td>
<td align="left">Density-related pixel unit, converted to physical pixels based on screen density. Default unit when no unit is specified. <br><br><strong>Note</strong>: The vp-to-px ratio depends on screen density.</td>
</tr>
<tr>
<td align="left">fp</td>
<td align="left">Font pixel unit, similar to vp but adapts to system font size settings.</td>
</tr>
<tr>
<td align="left">lpx</td>
<td align="left">Logical pixel unit relative to the viewport, calculated as <code>actual screen width / logical width (configured by designWidth)</code>. The default <code>designWidth</code> is 720. For a screen with 1440 physical pixels, 1lpx equals 2px when <code>designWidth = 720</code>.</td>
</tr>
</tbody></table>
<h4 id="3-When-loading-multiple-entry-pages-via-Tab-in-HarmonyOS-why-are-the-lifecycle-methods-onPageShow-and-onPageHide-not-called-for-tab-subpages"><a href="#3-When-loading-multiple-entry-pages-via-Tab-in-HarmonyOS-why-are-the-lifecycle-methods-onPageShow-and-onPageHide-not-called-for-tab-subpages" class="headerlink" title="3. When loading multiple @entry pages via Tab in HarmonyOS, why are the lifecycle methods onPageShow and onPageHide not called for tab subpages?"></a>3. When loading multiple @entry pages via Tab in HarmonyOS, why are the lifecycle methods <code>onPageShow</code> and <code>onPageHide</code> not called for tab subpages?</h4><p><code>onPageShow</code> and <code>onPageHide</code> are page-level lifecycle methods, but <code>TabContent</code> is a subcomponent and does not trigger these lifecycles. To implement monitoring, use the <code>@Watch</code> decorator: change the watched variable in the tab click callback and implement monitoring in the subcomponent.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-watch-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-watch-V5</a>  </p>
<h4 id="4-How-to-convert-the-type-of-results-from-getParamByName-in-HarmonyOS"><a href="#4-How-to-convert-the-type-of-results-from-getParamByName-in-HarmonyOS" class="headerlink" title="4. How to convert the type of results from getParamByName in HarmonyOS?"></a>4. How to convert the type of results from <code>getParamByName</code> in HarmonyOS?</h4><p>When passing parameters between components via Navigation, <code>getParamByName</code> returns <code>Array&lt;unknown&gt;</code>. Even if a string is passed, type casting (e.g., <code>as string</code>) fails.<br><strong>Solution</strong>: Use <code>String(XXX.getParamByName())</code> to cast the unknown type to a string.  </p>
<h4 id="5-In-HarmonyOS-state-management-how-can-watch-monitor-a-specific-property-within-an-observed-class-object"><a href="#5-In-HarmonyOS-state-management-how-can-watch-monitor-a-specific-property-within-an-observed-class-object" class="headerlink" title="5. In HarmonyOS state management, how can @watch monitor a specific property within an observed class object?"></a>5. In HarmonyOS state management, how can <code>@watch</code> monitor a specific property within an observed class object?</h4><p>Currently, <code>@watch</code> can only monitor a single property. If there is a class <code>A</code> decorated with <code>@observe</code>, how to monitor only the <code>a</code> property of <code>A</code>?<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-new-observedv2-and-trace-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-new-observedv2-and-trace-V5</a><br>To enhance state management for nested object properties, use the <code>@ObservedV2</code> and <code>@Trace</code> decorators:  </p>
<ul>
<li><code>@ObservedV2</code> and <code>@Trace</code> enable direct monitoring of nested property changes, a core capability of State Management V2.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Page-Parameter-Passing-Popup-Disable-Blank-Click-to-Close-Two-way-Binding-Data-Error-Destroy-Custom-Components-Image-Blur-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Page-Parameter-Passing-Popup-Disable-Blank-Click-to-Close-Two-way-Binding-Data-Error-Destroy-Custom-Components-Image-Blur-Setting/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Page Parameter Passing, Popup Disable Blank Click to Close, Two-way Binding Data Error, Destroy Custom Components, Image Blur Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:40:44 / Modified: 23:41:09" itemprop="dateCreated datePublished" datetime="2025-06-24T23:40:44+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Page-Parameter-Passing-Popup-Disable-Blank-Click-to-Close-Two-way-Binding-Data-Error-Destroy-Custom-Components-Image-Blur-Setting"><a href="#【Daily-HarmonyOS-Next-Knowledge】Page-Parameter-Passing-Popup-Disable-Blank-Click-to-Close-Two-way-Binding-Data-Error-Destroy-Custom-Components-Image-Blur-Setting" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Page Parameter Passing, Popup Disable Blank Click to Close, Two-way Binding Data Error, Destroy Custom Components, Image Blur Setting"></a>【Daily HarmonyOS Next Knowledge】Page Parameter Passing, Popup Disable Blank Click to Close, Two-way Binding Data Error, Destroy Custom Components, Image Blur Setting</h3><h4 id="1-How-to-pass-parameters-to-the-corresponding-Page-when-using-window-setUIContent-in-HarmonyOS"><a href="#1-How-to-pass-parameters-to-the-corresponding-Page-when-using-window-setUIContent-in-HarmonyOS" class="headerlink" title="1. How to pass parameters to the corresponding Page when using window.setUIContent in HarmonyOS?"></a>1. How to pass parameters to the corresponding Page when using window.setUIContent in HarmonyOS?</h4><p>How to pass parameters to WindowContent through window.setUIContent?  </p>
<p>Try the following interface: <code>loadContent(path: string, storage: LocalStorage): Promise&lt;void&gt;</code>. This loads specific page content for the window based on the path of a page in the current project and passes state attributes to the loaded page via LocalStorage using a Promise asynchronous callback.<br>Specific documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#loadcontent9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#loadcontent9</a>  </p>
<h4 id="2-How-to-disable-the-function-of-closing-a-custom-popup-by-clicking-the-blank-area-in-HarmonyOS"><a href="#2-How-to-disable-the-function-of-closing-a-custom-popup-by-clicking-the-blank-area-in-HarmonyOS" class="headerlink" title="2. How to disable the function of closing a custom popup by clicking the blank area in HarmonyOS?"></a>2. How to disable the function of closing a custom popup by clicking the blank area in HarmonyOS?</h4><p>Reference documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__basedialogoptions11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__basedialogoptions11</a>  </p>
<h4 id="3-Compilation-error-occurs-when-using-two-way-binding-with-the-Slider-component-in-an-HSP-package-in-HarmonyOS"><a href="#3-Compilation-error-occurs-when-using-two-way-binding-with-the-Slider-component-in-an-HSP-package-in-HarmonyOS" class="headerlink" title="3. Compilation error occurs when using $$ two-way binding with the Slider component in an HSP package in HarmonyOS?"></a>3. Compilation error occurs when using <code>$$</code> two-way binding with the Slider component in an HSP package in HarmonyOS?</h4><p>In an HSP package page, using two-way data binding with the Slider component throws a compilation error <code>Cannot find name &#39;this&#39;</code>. This works normally in a HAP package. The page code is as follows:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SliderPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">value</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">      <span class="comment">// Using $$ two-way binding here causes a compilation error</span></span><br><span class="line">      <span class="title class_">Slider</span>(&#123; <span class="attr">value</span>: $$this.<span class="property">value</span>, <span class="attr">step</span>: <span class="number">0.01</span> &#125;)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;slider&#x27;</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span> &#125;,</span><br><span class="line">          <span class="attr">middle</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">blockSize</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;20&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;20&#x27;</span> &#125;)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value, mode</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (mode === <span class="title class_">SliderChangeMode</span>.<span class="property">End</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;settimeout&#x27;</span>)</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">value</span> = <span class="number">90</span></span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`this.value <span class="subst">$&#123;<span class="variable language_">this</span>.value&#125;</span>`</span>)</span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Variables decorated with @State do not require `</span>$$<span class="string">` operation—use `</span><span class="variable language_">this</span>.<span class="property">value</span><span class="string">` directly. Remove the `</span>$$<span class="string">` attempt or use @Link.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to actively destroy a custom component in HarmonyOS?  </span></span><br><span class="line"><span class="string">How to actively destroy a custom component? Add a destruction method `</span>destroy<span class="string">` to the component. How to implement this method to destroy the component itself?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Demo</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">switch</span>: <span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">switch</span> = !<span class="variable language_">this</span>.<span class="property">switch</span></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">switch</span>) &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">message</span>: <span class="keyword">new</span> <span class="title class_">Message</span>(<span class="string">&#x27;Child&#x27;</span>) &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the lifecycle and deletion of custom components: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84%E5%88%A0%E9%99%A4  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A component will be deleted if:  </span></span><br><span class="line"><span class="string">- The branch of an if statement changes.  </span></span><br><span class="line"><span class="string">- The number of elements in a ForEach loop changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Before deletion, the `</span>aboutToDisappear<span class="string">` lifecycle function is called, marking that the node will be destroyed. ArkUI&#x27;s node deletion mechanism:  </span></span><br><span class="line"><span class="string">- Backend nodes are directly removed from the component tree and destroyed.  </span></span><br><span class="line"><span class="string">- Frontend nodes are dereferenced and garbage-collected by the JS virtual machine when no references remain.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Custom components and their variables are deleted. If they have synchronized variables (e.g., @Link, @Prop, @StorageLink), they are unregistered from the synchronization source.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Note**: Avoid using `</span><span class="keyword">async</span>/<span class="keyword">await</span><span class="string">` in `</span>aboutToDisappear<span class="string">`. Asynchronous operations (Promises or callback methods) in `</span>aboutToDisappear<span class="string">` keep the component in the Promise closure until the callback completes, preventing garbage collection.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to set Gaussian blur for an Image in HarmonyOS?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;30%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">  .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  .<span class="title function_">backdropBlur</span>(<span class="number">50</span>) <span class="comment">// Apply blur to the background</span></span><br><span class="line">  .<span class="title function_">backgroundImage</span>($r(<span class="string">&#x27;app.media.image1&#x27;</span>))</span><br><span class="line">  .<span class="title function_">backgroundImageSize</span>(&#123; <span class="attr">width</span>: <span class="number">400</span>, <span class="attr">height</span>: <span class="number">300</span> &#125;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/18/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/20/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">200</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
