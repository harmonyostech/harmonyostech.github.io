<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/14/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/14/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41211-Daily-HarmonyOS-Next-Knowledge-Popup-Encapsulation-as-a-Method-Setting-Default-Tabcontent-in-Tabs-rawfile-Path-Default-Component-Width-Height-and-Color-for-Different-States/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41211-Daily-HarmonyOS-Next-Knowledge-Popup-Encapsulation-as-a-Method-Setting-Default-Tabcontent-in-Tabs-rawfile-Path-Default-Component-Width-Height-and-Color-for-Different-States/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Popup Encapsulation as a Method, Setting Default Tabcontent in Tabs, rawfile Path, Default Component Width/Height, and Color for Different States</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:12:57 / Modified: 00:14:01" itemprop="dateCreated datePublished" datetime="2025-06-29T00:12:57+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Popup-Encapsulation-as-a-Method-Setting-Default-Tabcontent-in-Tabs-rawfile-Path-Default-Component-Width-Height-and-Color-for-Different-States"><a href="#Daily-HarmonyOS-Knowledge-Popup-Encapsulation-as-a-Method-Setting-Default-Tabcontent-in-Tabs-rawfile-Path-Default-Component-Width-Height-and-Color-for-Different-States" class="headerlink" title="[Daily HarmonyOS Knowledge] Popup Encapsulation as a Method, Setting Default Tabcontent in Tabs, rawfile Path, Default Component Width&#x2F;Height, and Color for Different States"></a>[Daily HarmonyOS Knowledge] Popup Encapsulation as a Method, Setting Default Tabcontent in Tabs, rawfile Path, Default Component Width&#x2F;Height, and Color for Different States</h1><h4 id="1-How-to-encapsulate-a-HarmonyOS-popup-as-a-method-for-direct-invocation-elsewhere"><a href="#1-How-to-encapsulate-a-HarmonyOS-popup-as-a-method-for-direct-invocation-elsewhere" class="headerlink" title="1. How to encapsulate a HarmonyOS popup as a method for direct invocation elsewhere?"></a>1. How to encapsulate a HarmonyOS popup as a method for direct invocation elsewhere?</h4><p>For popup scenarios, it is recommended to use <code>promptAction.openCustomDialog</code>, which will be the primary evolution direction for popups. Developers mainly need to customize the popup content via a builder. For usage, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a>  </p>
<p>Using <code>promptAction.openCustomDialog</code>, you can set the popup as non-modal (<code>isModal: false</code>) to prevent it from closing automatically when clicking outside the popup.  </p>
<h4 id="2-How-to-set-the-default-tabcontent-of-a-HarmonyOS-Tabs-component-to-a-position-other-than-index-0"><a href="#2-How-to-set-the-default-tabcontent-of-a-HarmonyOS-Tabs-component-to-a-position-other-than-index-0" class="headerlink" title="2. How to set the default tabcontent of a HarmonyOS Tabs component to a position other than index 0?"></a>2. How to set the default tabcontent of a HarmonyOS Tabs component to a position other than index 0?</h4><p>When using the Tabs component, the business scenario may require displaying a tabcontent that is not the first one (e.g., the third tabcontent by default).  </p>
<p><strong>Solution</strong>: Use the <code>index</code> parameter of the Tabs component.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-container-tabs-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-container-tabs-V5</a>  </p>
<pre><code class="language-typescript">Tabs(&#123; barPosition?: BarPosition, index?: number, controller?: TabsController &#125;)
</code></pre>
<h4 id="3-In-which-directory-of-the-project-should-the-index-html-file-be-placed-for-rawfile-“index-html”-in-HarmonyOS"><a href="#3-In-which-directory-of-the-project-should-the-index-html-file-be-placed-for-rawfile-“index-html”-in-HarmonyOS" class="headerlink" title="3. In which directory of the project should the index.html file be placed for $rawfile(“index.html”) in HarmonyOS?"></a>3. In which directory of the project should the index.html file be placed for $rawfile(“index.html”) in HarmonyOS?</h4><p>As shown in the figure:<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.12.11.png"></p>
<h4 id="4-Why-does-setting-width-height-to-“auto”-for-a-HarmonyOS-component-not-take-effect-and-the-component-uses-the-full-width-height-of-the-parent-container"><a href="#4-Why-does-setting-width-height-to-“auto”-for-a-HarmonyOS-component-not-take-effect-and-the-component-uses-the-full-width-height-of-the-parent-container" class="headerlink" title="4. Why does setting width&#x2F;height to “auto” for a HarmonyOS component not take effect, and the component uses the full width&#x2F;height of the parent container?"></a>4. Why does setting width&#x2F;height to “auto” for a HarmonyOS component not take effect, and the component uses the full width&#x2F;height of the parent container?</h4><p>When <code>width</code> is set to <code>auto</code>, if the child component anchors to the container in the horizontal direction, <code>auto</code> will not take effect (the same applies vertically).<br>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a>  </p>
<pre><code class="language-typescript">@Builder
heatmapExampleLayout() &#123;
  RelativeContainer() &#123;
    Image($r(&#39;app.media.startIcon&#39;))
      .fitOriginalSize(true)
      .margin(&#123; bottom: 10 &#125;)
      .id(&#39;example_img&#39;)
    
    Text(`事实上`)
      .fontColor(Color.Red)
      .fontSize(12)
      .id(&#39;example_less&#39;)
    
    Text(`测试`)
      .fontColor(Color.Blue)
      .fontSize(12)
      .id(&#39;example_more&#39;)
  &#125;
  .padding(&#123; left: 8, right: 8, top: 5, bottom: 5 &#125;)
  .margin(&#123; left: 8, bottom: 12 &#125;)
  .border(&#123; width: 2, color: Color.White, radius: 8 &#125;)
  .backgroundColor(Color.Gray)
  .width(`auto`)
  .height(`auto`)
&#125;
</code></pre>
<h4 id="5-Why-does-a-HarmonyOS-button-only-display-the-font-color-for-the-Normal-state-even-when-different-states-are-set"><a href="#5-Why-does-a-HarmonyOS-button-only-display-the-font-color-for-the-Normal-state-even-when-different-states-are-set" class="headerlink" title="5. Why does a HarmonyOS button only display the font color for the Normal state, even when different states are set?"></a>5. Why does a HarmonyOS button only display the font color for the Normal state, even when different states are set?</h4><p>The <code>stateStyles</code> interface only supports universal attributes, and <code>fontColor</code> is not a universal attribute, so it does not take effect when set. For non-universal attributes, use <code>attributeModifier</code>.<br>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5#attributemodifier">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5#attributemodifier</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41210-Daily-HarmonyOS-Next-Knowledge-Stopping-Animations-Controlling-Swipe-Gestures-Login-Page-Navigation-Web-Component-Album-Access-and-Disabling-Edge-Swipes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41210-Daily-HarmonyOS-Next-Knowledge-Stopping-Animations-Controlling-Swipe-Gestures-Login-Page-Navigation-Web-Component-Album-Access-and-Disabling-Edge-Swipes/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Stopping Animations, Controlling Swipe Gestures, Login Page Navigation, Web Component Album Access, and Disabling Edge Swipes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:12:04 / Modified: 00:12:17" itemprop="dateCreated datePublished" datetime="2025-06-29T00:12:04+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Stopping-Animations-Controlling-Swipe-Gestures-Login-Page-Navigation-Web-Component-Album-Access-and-Disabling-Edge-Swipes"><a href="#Daily-HarmonyOS-Knowledge-Stopping-Animations-Controlling-Swipe-Gestures-Login-Page-Navigation-Web-Component-Album-Access-and-Disabling-Edge-Swipes" class="headerlink" title="[Daily HarmonyOS Knowledge] Stopping Animations, Controlling Swipe Gestures, Login Page Navigation, Web Component Album Access, and Disabling Edge Swipes"></a>[Daily HarmonyOS Knowledge] Stopping Animations, Controlling Swipe Gestures, Login Page Navigation, Web Component Album Access, and Disabling Edge Swipes</h1><h4 id="1-Is-there-a-way-to-actively-stop-an-infinitely-looping-animateTo-animation-in-HarmonyOS"><a href="#1-Is-there-a-way-to-actively-stop-an-infinitely-looping-animateTo-animation-in-HarmonyOS" class="headerlink" title="1. Is there a way to actively stop an infinitely looping animateTo animation in HarmonyOS?"></a>1. Is there a way to actively stop an infinitely looping <code>animateTo</code> animation in HarmonyOS?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">opacityValue</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">opacity</span>(<span class="variable language_">this</span>.<span class="property">opacityValue</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;Start Animation&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">animateTo</span>(&#123; <span class="attr">duration</span>: <span class="number">1000</span>, <span class="attr">iterations</span>: -<span class="number">1</span>, <span class="attr">playMode</span>: <span class="title class_">PlayMode</span>.<span class="property">AlternateReverse</span> &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacityValue</span> = <span class="number">0</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;Stop Animation&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">iterations</span>: <span class="number">1</span>, <span class="attr">onFinish</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">opacityValue</span> = <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacityValue</span> = <span class="number">0.9</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to disable or modify the system&#x27;s right/left swipe gestures in HarmonyOS?  </span></span><br><span class="line"><span class="string">On certain pages, you may need to disable or modify the system&#x27;s edge swipe gestures.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Intercept the `</span>onBackPress<span class="string">` event. Return `</span><span class="literal">true</span><span class="string">` to handle navigation logic within the page.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-29-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to manage page navigation after logging in on a HarmonyOS login page?  </span></span><br><span class="line"><span class="string">**Scenario**: After logging in, the app enters the home page, then navigates to a subpage. If the user needs to log in again from a subpage, the app should return to the home page after successful login.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Clear the navigation stack and push the home page:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Button</span>(<span class="string">&quot;Login&quot;</span>)</span><br><span class="line">  .<span class="title function_">onClick</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">ClickEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Business logic: Login verification</span></span><br><span class="line">    <span class="comment">// Clear the navigation stack and navigate to the home page</span></span><br><span class="line">    router.<span class="title function_">clear</span>()</span><br><span class="line">    router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;pages/Index&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to launch the album, camera, or file manager from a HarmonyOS Web component?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> web_webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; common &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; uri, util &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkTS&#x27;</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;@ohos.file.fs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> picker <span class="keyword">from</span> <span class="string">&#x27;@ohos.file.picker&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">testClass</span> &#123;</span><br><span class="line">  <span class="attr">base64Str</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">base64Str</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">base64Str</span> = base64Str;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">test</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;2123&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toString</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Web Component toString&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">uris</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = []</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">base64Str</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">testObj</span>: testClass = <span class="keyword">new</span> <span class="title function_">testClass</span>(<span class="variable language_">this</span>.<span class="property">base64Str</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    web_webview.<span class="property">WebviewController</span>.<span class="title function_">setWebDebuggingAccess</span>(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&#x27;TestonShowFileSelector.html&#x27;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">javaScriptAccess</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">domStorageAccess</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">onShowFileSelector</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// //-------Invoke album-------------------------</span></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MyFileUploader onShowFileSelector invoked&#x27;</span>)</span><br><span class="line">          <span class="keyword">const</span> photoSelectOptions = <span class="keyword">new</span> picker.<span class="title class_">PhotoSelectOptions</span>();</span><br><span class="line">          photoSelectOptions.<span class="property">MIMEType</span> = picker.<span class="property">PhotoViewMIMETypes</span>.<span class="property">IMAGE_VIDEO_TYPE</span>;</span><br><span class="line">          photoSelectOptions.<span class="property">maxSelectNumber</span> = <span class="number">8</span>;</span><br><span class="line">          <span class="keyword">const</span> photoViewPicker = <span class="keyword">new</span> picker.<span class="title class_">PhotoViewPicker</span>();</span><br><span class="line">          photoViewPicker.<span class="title function_">select</span>(photoSelectOptions).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">photoSelectResult</span>: picker.<span class="title class_">PhotoSelectResult</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">uris</span> = photoSelectResult.<span class="property">photoUris</span>;</span><br><span class="line">            <span class="keyword">let</span> file1 = fs.<span class="title function_">openSync</span>(<span class="variable language_">this</span>.<span class="property">uris</span>[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">array</span>: <span class="title class_">ArrayBuffer</span> = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(fs.<span class="title function_">statSync</span>(file1.<span class="property">fd</span>).<span class="property">size</span>)</span><br><span class="line">            fs.<span class="title function_">readSync</span>(file1.<span class="property">fd</span>, array)</span><br><span class="line">            <span class="keyword">let</span> unit = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(array)</span><br><span class="line">            <span class="keyword">let</span> base64 = <span class="keyword">new</span> util.<span class="title class_">Base64Helper</span>();</span><br><span class="line">            <span class="keyword">let</span> mystr = base64.<span class="title function_">encodeToStringSync</span>(unit);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">base64Str</span> = <span class="string">&quot;myFunction(\&quot;&quot;</span> + mystr + <span class="string">&quot;\&quot;)&quot;</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">runJavaScript</span>(<span class="variable language_">this</span>.<span class="property">base64Str</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;photoViewPicker.select to file succeed and uris are:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">uris</span>);</span><br><span class="line">          &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Invoke photoViewPicker.select failed, code is <span class="subst">$&#123;err.code&#125;</span>, message is <span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment">//----Invoke file manager-----------------</span></span><br><span class="line">          <span class="comment">// ... [Code omitted for brevity]</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment">////-----Camera--------------------------------</span></span><br><span class="line">          <span class="comment">// ... [Code omitted for brevity]</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">**HTML part**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>html</span><br><span class="line">&lt;form id=<span class="string">&quot;upload-form&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    &lt;!-- <span class="title class_">Change</span> <span class="keyword">type</span> to <span class="string">&quot;camera&quot;</span> --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;upload&quot;</span> <span class="attr">name</span>=<span class="string">&quot;upload&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span> <span class="attr">capture</span>=<span class="string">&quot;camera&quot;</span> /&gt;</span></span></span><br><span class="line">    &lt;!-- <span class="title class_">Add</span> an image element to preview selected images --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;preview&quot;</span>/&gt;</span></span></span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;155134&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to disable edge swipes in HarmonyOS?  </span></span><br><span class="line"><span class="string">Override the `</span><span class="title function_">onBackPress</span>()<span class="string">` method in the page lifecycle and return `</span><span class="literal">true</span><span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onBackPress</span>(<span class="params"></span>) &#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4129-Daily-HarmonyOS-Next-Knowledge-Web-Jumps-to-System-Apps-Dynamic-Page-Navigation-Observation-in-Non-UI-Contexts-MVVM-Pattern-Timing-Issues-in-Loops/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4129-Daily-HarmonyOS-Next-Knowledge-Web-Jumps-to-System-Apps-Dynamic-Page-Navigation-Observation-in-Non-UI-Contexts-MVVM-Pattern-Timing-Issues-in-Loops/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Jumps to System Apps, Dynamic Page Navigation, Observation in Non-UI Contexts, MVVM Pattern, Timing Issues in Loops</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:10:55 / Modified: 08:38:02" itemprop="dateCreated datePublished" datetime="2025-06-29T00:10:55+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Web-Jumps-to-System-Apps-Dynamic-Page-Navigation-Observation-in-Non-UI-Contexts-MVVM-Pattern-Timing-Issues-in-Loops"><a href="#Daily-HarmonyOS-Knowledge-Web-Jumps-to-System-Apps-Dynamic-Page-Navigation-Observation-in-Non-UI-Contexts-MVVM-Pattern-Timing-Issues-in-Loops" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Jumps to System Apps, Dynamic Page Navigation, Observation in Non-UI Contexts, MVVM Pattern, Timing Issues in Loops"></a>[Daily HarmonyOS Knowledge] Web Jumps to System Apps, Dynamic Page Navigation, Observation in Non-UI Contexts, MVVM Pattern, Timing Issues in Loops</h1><h4 id="1-How-to-make-phone-calls-and-jump-to-the-app-store-in-HarmonyOS-Web-components"><a href="#1-How-to-make-phone-calls-and-jump-to-the-app-store-in-HarmonyOS-Web-components" class="headerlink" title="1. How to make phone calls and jump to the app store in HarmonyOS Web components?"></a>1. How to make phone calls and jump to the app store in HarmonyOS Web components?</h4><p><strong>Phone call demo</strong>:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import web_webview from &#x27;@ohos.web.webview&#x27;;</span><br><span class="line">import call from &#x27;@ohos.telephony.call&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@ohos.base&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct WebComponent &#123;</span><br><span class="line">  webviewController: web_webview.WebviewController = new web_webview.WebviewController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Web(&#123; src: $rawfile(&#x27;call.html&#x27;), controller: this.webviewController &#125;)</span><br><span class="line">        .onLoadIntercept((event) =&gt; &#123;</span><br><span class="line">          if (event) &#123;</span><br><span class="line">            let url: string = event.data.getRequestUrl();</span><br><span class="line">            // Determine if the link is a dialing link</span><br><span class="line">            if (url.indexOf(&#x27;tel://&#x27;) === 0) &#123;</span><br><span class="line">              call.makeCall(url.substring(6), (err: BusinessError) =&gt; &#123;</span><br><span class="line">                if (!err) &#123;</span><br><span class="line">                  console.log(&quot;make call success.&quot;);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                  console.log(&quot;make call fail, err is:&quot; + JSON.stringify(err));</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">              return true;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          return false;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line">**call.html**:  </span><br></pre></td></tr></table></figure>
<!DOCTYPE html>
<html>
<body>
<div>
  <a href="tel://10086">拨打电话</a>
</div>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**App store jump demo**:  </span><br></pre></td></tr></table></figure>
import Want from '@ohos.app.ability.Want';
import common from '@ohos.app.ability.common';

<p>@Entry<br>@Component<br>struct Index {<br>  @State appId: string &#x3D; “要跳转的AppID”;<br>  controller: TextInputController &#x3D; new TextInputController();</p>
<p>  build() {<br>    Row() {<br>      Column() {<br>        TextInput({ text: this.appId, placeholder: ‘请输入应用的appId’, controller: this.controller })<br>          .width(‘90%’)<br>          .onChange((value: string) &#x3D;&gt; {<br>            this.appId &#x3D; value<br>          })<br>        Button(‘点击跳转到HarmonyOS版应用市场详情页面’)<br>          .margin({ top: 50 })<br>          .onClick(() &#x3D;&gt; {<br>            const want: Want &#x3D; {<br>              uri: <code>store://appgallery.huawei.com/app/id=$&#123;this.appId&#125;</code><br>            };<br>            const context &#x3D; getContext(this) as common.UIAbilityContext;<br>            context.startAbility(want).then(() &#x3D;&gt; {<br>              &#x2F;&#x2F; Successful launch<br>            }).catch(() &#x3D;&gt; {<br>              &#x2F;&#x2F; Failed to launch<br>            });<br>          })<br>      }<br>      .width(‘100%’)<br>    }<br>    .height(‘100%’)<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2. In HarmonyOS, how to dynamically display different page components based on logic for part of a page?  </span><br></pre></td></tr></table></figure>
<p>class Tmp {<br>  paramA1: string &#x3D; ‘’<br>}</p>
<p>@Builder function overBuilder(params: Tmp) {<br>  Row() {<br>    Text(<code>overBuilder: $&#123;params.paramA1&#125; </code>)<br>  }<br>}</p>
<p>@Builder function overBuilder2(params: Tmp) {<br>  Row() {<br>    Text(<code>overBuilder2: $&#123;params.paramA1&#125; </code>)<br>  }<br>}</p>
<p>@Entry<br>@Component<br>struct Index123 {<br>  @State label: string &#x3D; ‘Hello’;<br>  @State buildSet: boolean &#x3D; false;</p>
<p>  build() {<br>    Row() {<br>      Column() {<br>        if (this.buildSet) {<br>          overBuilder({ paramA1: this.label })<br>        } else {<br>          overBuilder2({ paramA1: this.label })<br>        }<br>      }<br>      .width(‘100%’)<br>    }<br>    .height(‘100%’)<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. How to observe changes in non-UI contexts (e.g., aboutToAppear) for variables decorated with @ObservedV2 in HarmonyOS?  </span><br><span class="line">The `aboutToAppear` lifecycle is triggered only when a page is created. It executes after a custom component&#x27;s new instance is created and before its `build()` function. You can change state variables in `aboutToAppear`, and the changes will take effect when `build()` is executed subsequently.  </span><br><span class="line">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-lifecycle-V5#abouttoappear  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. What is the MVVM pattern in HarmonyOS, and how does ViewModel relate to View? How does ViewModel notify View decorators of data changes?  </span><br><span class="line">**Application example: Address book demo**  </span><br><span class="line">Variables decorated with `@State` trigger UI re-rendering when updated, re-executing the `build` method to display real-time data. `@Provide` shares `@State` characteristics and works with `@Consume` to synchronize data across parent, child, and descendant components.  </span><br><span class="line">For details on these decorators, refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-component-state-management-V5  </span><br><span class="line"></span><br><span class="line">**Address book demo code (Index.ets)**:  </span><br></pre></td></tr></table></figure>
<p>import { Person, Address, AddressBook, ObservedArray } from ‘..&#x2F;viewmodel&#x2F;ListViewModel’<br>import emitter from ‘@ohos.events.emitter’;</p>
<p>&#x2F;&#x2F; Renders the name of a Person object and the first number in an ObservedArray<string><br>&#x2F;&#x2F; To update phone numbers, use @ObjectLink for person and phones;<br>&#x2F;&#x2F; Using this.person.phones directly won’t observe internal array changes.<br>&#x2F;&#x2F; The onClick in AddressBookView and PersonEditView updates selectedPerson<br>@Component<br>struct PersonView {<br>  @ObjectLink person: Person;<br>  @ObjectLink phones: ObservedArray<string>;<br>  @Link selectedPerson: Person;</p>
<p>  build() {<br>    Flex({ direction: FlexDirection.Row, justifyContent: FlexAlign.SpaceBetween }) {<br>      Text(this.person.name)<br>      if (this.phones.length) {<br>        Text(this.phones[0])<br>      }<br>    }<br>    .height(55)<br>    .backgroundColor(this.selectedPerson.name &#x3D;&#x3D; this.person.name ? “#ffa0a0” : “#ffffff”)<br>    .onClick(() &#x3D;&gt; {<br>      this.selectedPerson &#x3D; this.person;<br>    })<br>  }<br>}</p>
<p>@Component<br>struct phonesNumber {<br>  @ObjectLink phoneNumber: ObservedArray<string></p>
<p>  build() {<br>    Column() {<br>      ForEach(this.phoneNumber,<br>        (phone: ResourceStr, index?: number) &#x3D;&gt; {<br>          TextInput({ text: phone })<br>            .width(150)<br>            .onChange((value) &#x3D;&gt; {<br>              console.log(<code>$&#123;index&#125;. $&#123;value&#125; value has changed</code>)<br>              this.phoneNumber[index!] &#x3D; value;<br>            })<br>        },<br>        (phone: ResourceStr, index: number) &#x3D;&gt; <code>$&#123;this.phoneNumber[index] + index&#125;</code><br>      )<br>    }<br>  }<br>}</p>
<p>&#x2F;&#x2F; Renders detailed Person information<br>&#x2F;&#x2F; The @Prop-decorated variable DeepCopy data from the parent component AddressBookView, retaining changes locally;<br>&#x2F;&#x2F; TextInput changes only modify the local copy.<br>&#x2F;&#x2F; Clicking “Save Changes” syncs all copied data from @Prop to @Link for synchronization with other components<br>@Component<br>struct PersonEditView {<br>  @Consume addrBook: AddressBook;<br>  &#x2F;* Reference to the parent component’s selectedPerson <em>&#x2F;<br>  @Link selectedPerson: Person;<br>  &#x2F;</em> Edit on the local copy until saving *&#x2F;<br>  @Prop name: string &#x3D; “”;<br>  @Prop address: Address &#x3D; new Address(“”, 0, “”);<br>  @Prop phones: ObservedArray<string> &#x3D; [];</p>
<p>  selectedPersonIndex(): number {<br>    return this.addrBook.contacts.findIndex((person: Person) &#x3D;&gt; person.id_ &#x3D;&#x3D; this.selectedPerson.id_);<br>  }</p>
<p>  build() {<br>    Column() {<br>      TextInput({ text: this.name })<br>        .onChange((value) &#x3D;&gt; {<br>          this.name &#x3D; value;<br>        })<br>      TextInput({ text: this.address.street })<br>        .onChange((value) &#x3D;&gt; {<br>          this.address.street &#x3D; value;<br>        })<br>      TextInput({ text: this.address.city })<br>        .onChange((value) &#x3D;&gt; {<br>          this.address.city &#x3D; value;<br>        })<br>      TextInput({ text: this.address.zip.toString() })<br>        .onChange((value) &#x3D;&gt; {<br>          const result &#x3D; Number.parseInt(value);<br>          this.address.zip &#x3D; Number.isNaN(result) ? 0 : result;<br>        })<br>      if (this.phones.length &gt; 0) {<br>        phonesNumber({ phoneNumber: this.phones })<br>      }<br>      Flex({ direction: FlexDirection.Row, justifyContent: FlexAlign.SpaceBetween }) {<br>        Text(“Save Changes”)<br>          .onClick(() &#x3D;&gt; {<br>            &#x2F;&#x2F; Assign updated local copy values to the reference pointing to the parent component’s selectedPerson<br>            &#x2F;&#x2F; Avoid creating new objects; modify existing properties<br>            this.selectedPerson.name &#x3D; this.name;<br>            this.selectedPerson.address &#x3D; new Address(this.address.street, this.address.zip, this.address.city)<br>            this.phones.forEach((phone: string, index: number) &#x3D;&gt; {<br>              this.selectedPerson.phones[index] &#x3D; phone<br>            });<br>            emitter.emit(‘setModelData’, {<br>              data: {<br>                id: this.selectedPerson.id_,<br>                name: this.name<br>              }<br>            })<br>          })<br>        Button(‘getData’)<br>          .onClick(() &#x3D;&gt; {<br>            emitter.emit(‘getModelData’);<br>            this.selectedPerson &#x3D; this.addrBook.me;<br>          })<br>        if (this.selectedPersonIndex() !&#x3D; -1) {<br>          Text(“Delete Contact”)<br>            .onClick(() &#x3D;&gt; {<br>              let index &#x3D; this.selectedPersonIndex();<br>              console.log(<code>delete contact at index $&#123;index&#125;</code>);<br>              &#x2F;&#x2F; Delete the current contact<br>              this.addrBook.contacts.splice(index, 1);<br>              &#x2F;&#x2F; Delete the current selectedPerson and shift the selection forward by one<br>              index &#x3D; (index &lt; this.addrBook.contacts.length) ? index : index - 1;<br>              &#x2F;&#x2F; If no contacts remain, set me as the selected state<br>              this.selectedPerson &#x3D; (index &gt;&#x3D; 0) ? this.addrBook.contacts[index] : this.addrBook.me;<br>            })<br>        }<br>      }<br>    }<br>  }<br>}</p>
<p>@Component<br>struct AddressBookView {<br>  @ObjectLink me: Person;<br>  @ObjectLink contacts: ObservedArray<Person>;<br>  @State selectedPerson: Person &#x3D; new Person(“”, “”, 0, “”, []);</p>
<p>  aboutToAppear() {<br>    this.selectedPerson &#x3D; this.me;<br>  }</p>
<p>  build() {<br>    Flex({ direction: FlexDirection.Column, justifyContent: FlexAlign.Start }) {<br>      Text(“Me:”)<br>      PersonView({<br>        person: this.me,<br>        phones: this.me.phones,<br>        selectedPerson: this.selectedPerson<br>      })<br>      Divider().height(8)<br>      ForEach(this.contacts, (contact: Person) &#x3D;&gt; {<br>        PersonView({<br>          person: contact,<br>          phones: contact.phones as ObservedArray<string>,<br>          selectedPerson: this.selectedPerson<br>        })<br>      },<br>        (contact: Person): string &#x3D;&gt; {<br>          return contact.id_;<br>        }<br>      )<br>      Divider().height(8)<br>      Text(“Edit:”)<br>      PersonEditView({<br>        selectedPerson: this.selectedPerson,<br>        name: this.selectedPerson.name,<br>        address: this.selectedPerson.address,<br>        phones: this.selectedPerson.phones<br>      })<br>    }<br>    .borderStyle(BorderStyle.Solid).borderWidth(5).borderColor(0xAFEEEE).borderRadius(5)<br>  }<br>}</p>
<p>@Entry<br>@Component<br>struct Index {<br>  @StorageLink(“contacts”) @Watch(“contactsChange”) contacts: Array<Person> &#x3D; [];<br>  @Provide addrBook: AddressBook &#x3D; new AddressBook(<br>    new Person(“Gigi”, “Itamerenkatu 9”, 180, “Helsinki”, [“18*********”, “18*********”, “18*********”]),<br>    [<br>      new Person(“Oly”, “Itamerenkatu 9”, 180, “Helsinki”, [“11*********”, “12*********”]),<br>      new Person(“Sam”, “Itamerenkatu 9”, 180, “Helsinki”, [“13*********”, “14*********”]),<br>      new Person(“Vivi”, “Itamerenkatu 9”, 180, “Helsinki”, [“15*********”, “168*********”]),<br>    ]);</p>
<p>  contactsChange(propName: string): void {<br>    this.addrBook.contacts &#x3D; AppStorage.get(propName) as ObservedArray<Person>;<br>  }</p>
<p>  build() {<br>    Column() {<br>      AddressBookView({<br>        me: this.addrBook.me,<br>        contacts: this.addrBook.contacts,<br>        selectedPerson: this.addrBook.me<br>      })<br>    }<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**MVVM mechanism**:  </span><br><span class="line">- ViewModel and Model update data through state variables.  </span><br><span class="line">- ViewModel triggers the `build` method of the View page and the execution of `@Builder` custom build functions via state variable updates.  </span><br><span class="line">- The execution of `build` and `@Builder` functions changes corresponding state variables, achieving &quot;updating the view directly when data is updated.&quot;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. Why does using setTimeout in a for loop fail in HarmonyOS, and how to construct delays in a for loop?  </span><br><span class="line">**Problem**: Using `setTimeout` in a for loop is ineffective, and empty loops with `data` cause crashes.  </span><br><span class="line"></span><br><span class="line">**Solution**: Wrap `setTimeout` as a Promise and use related APIs.  </span><br><span class="line">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V2/async-concurrency-overview-0000001632690002-V2  </span><br><span class="line"></span><br><span class="line">**Example (non-blocking delay)**:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; Wait asynchronously<br>const delay &#x3D; (ms: number) &#x3D;&gt; new Promise(resolve &#x3D;&gt; setTimeout(resolve, ms));</p>
<p>for (let i &#x3D; 0; i &lt; 5; i++) {<br>  console.log(<code>Start iteration $&#123;i&#125;</code>);<br>  await delay(1000); &#x2F;&#x2F; Wait 1 second per iteration<br>  console.log(<code>End iteration $&#123;i&#125;</code>);<br>}<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4128-Daily-HarmonyOS-Next-Knowledge-Listening-for-Input-Box-Delete-Key-Network-Requests-Before-Page-Entry-Same-Layer-Rendering-GridCol-Left-Alignment-and-Custom-Popup-Gesture-Prevention/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4128-Daily-HarmonyOS-Next-Knowledge-Listening-for-Input-Box-Delete-Key-Network-Requests-Before-Page-Entry-Same-Layer-Rendering-GridCol-Left-Alignment-and-Custom-Popup-Gesture-Prevention/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Listening for Input Box Delete Key, Network Requests Before Page Entry, Same-Layer Rendering, GridCol Left Alignment, and Custom Popup Gesture Prevention</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:10:09 / Modified: 00:10:23" itemprop="dateCreated datePublished" datetime="2025-06-29T00:10:09+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Listening-for-Input-Box-Delete-Key-Network-Requests-Before-Page-Entry-Same-Layer-Rendering-GridCol-Left-Alignment-and-Custom-Popup-Gesture-Prevention"><a href="#Daily-HarmonyOS-Knowledge-Listening-for-Input-Box-Delete-Key-Network-Requests-Before-Page-Entry-Same-Layer-Rendering-GridCol-Left-Alignment-and-Custom-Popup-Gesture-Prevention" class="headerlink" title="[Daily HarmonyOS Knowledge] Listening for Input Box Delete Key, Network Requests Before Page Entry, Same-Layer Rendering, GridCol Left Alignment, and Custom Popup Gesture Prevention"></a>[Daily HarmonyOS Knowledge] Listening for Input Box Delete Key, Network Requests Before Page Entry, Same-Layer Rendering, GridCol Left Alignment, and Custom Popup Gesture Prevention</h1><h4 id="1-How-to-listen-for-the-delete-key-in-a-HarmonyOS-input-box"><a href="#1-How-to-listen-for-the-delete-key-in-a-HarmonyOS-input-box" class="headerlink" title="1. How to listen for the delete key in a HarmonyOS input box?"></a>1. How to listen for the delete key in a HarmonyOS input box?</h4><p>You can adopt the following solutions:  </p>
<ul>
<li><p>Listen to the <code>onChange</code> event of <code>TextInput</code>. When the user presses the delete key in the input box, the <code>onChange</code> event is triggered, and the passed parameter includes the new text value. By comparing the old and new text values, you can determine whether the user pressed the delete key (i.e., whether the text length decreases).  </p>
</li>
<li><p>Another solution is implemented using a verification code input box. Refer to: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/verifycode">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/verifycode</a></p>
</li>
</ul>
<h4 id="2-Can-HarmonyOS-execute-interface-request-logic-before-a-page-enters-instead-of-within-the-page-lifecycle-to-reduce-page-waiting-time"><a href="#2-Can-HarmonyOS-execute-interface-request-logic-before-a-page-enters-instead-of-within-the-page-lifecycle-to-reduce-page-waiting-time" class="headerlink" title="2. Can HarmonyOS execute interface request logic before a page enters instead of within the page lifecycle to reduce page waiting time?"></a>2. Can HarmonyOS execute interface request logic before a page enters instead of within the page lifecycle to reduce page waiting time?</h4><p>For page-level operations, the earliest lifecycle function loaded is <code>aboutToAppear</code>. For numerous requests, you can use <code>LazyForEach</code>. Use DevEco Profiler for performance tuning to identify requests with excessive latency and optimize them.  </p>
<h4 id="3-How-does-the-xcomponent-for-same-layer-rendering-in-HarmonyOS-perform-rendering-at-the-underlying-layer"><a href="#3-How-does-the-xcomponent-for-same-layer-rendering-in-HarmonyOS-perform-rendering-at-the-underlying-layer" class="headerlink" title="3. How does the xcomponent for same-layer rendering in HarmonyOS perform rendering at the underlying layer?"></a>3. How does the xcomponent for same-layer rendering in HarmonyOS perform rendering at the underlying layer?</h4><p>Xcomponent supports two rendering methods:  </p>
<ul>
<li>One method specifies <code>libraryName</code>, and the C++ side listens for and obtains the native window, allowing the business to render onto the native window.</li>
</ul>
<p>Regarding the same-layer rendering document, does it retrieve the xcomponent’s ID? How can I obtain the corresponding native window?  </p>
<p>Related API links:  </p>
<ol>
<li>Native XComponent Development Guide: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/napi-xcomponent-guidelines-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/napi-xcomponent-guidelines-V5</a>  </li>
<li>NativeWindow Development Guide: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/native-window-guidelines-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/native-window-guidelines-V5</a>  </li>
<li>Defining Functions for Obtaining and Using NativeWindow: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/native-window-guidelines-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/native-window-guidelines-V5</a></li>
</ol>
<h4 id="4-How-to-left-align-GridCol-subcomponents-in-a-HarmonyOS-grid-layout"><a href="#4-How-to-left-align-GridCol-subcomponents-in-a-HarmonyOS-grid-layout" class="headerlink" title="4. How to left-align GridCol subcomponents in a HarmonyOS grid layout?"></a>4. How to left-align GridCol subcomponents in a HarmonyOS grid layout?</h4><p>Set the width of the <code>Row</code> in the <code>IconWithSubTitle</code> component to prevent adaptive sizing. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-layout-development-grid-layout-V5#span">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-layout-development-grid-layout-V5#span</a>  </p>
<h4 id="5-How-to-prevent-gesture-back-cancellation-for-custom-popups-in-HarmonyOS"><a href="#5-How-to-prevent-gesture-back-cancellation-for-custom-popups-in-HarmonyOS" class="headerlink" title="5. How to prevent gesture back cancellation for custom popups in HarmonyOS?"></a>5. How to prevent gesture back cancellation for custom popups in HarmonyOS?</h4><p>Use <code>onwilldismiss</code>. Refer to: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-methods-custom-dialog-box.md#customdialogcontrolleroptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-methods-custom-dialog-box.md#customdialogcontrolleroptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4127-Daily-HarmonyOS-Next-Knowledge-Navigation-Jump-Anomalies-Default-Mobile-Version-Webpage-Loading-Menu-Positioning-View-to-Image-Saving-and-H5-Native-Interaction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4127-Daily-HarmonyOS-Next-Knowledge-Navigation-Jump-Anomalies-Default-Mobile-Version-Webpage-Loading-Menu-Positioning-View-to-Image-Saving-and-H5-Native-Interaction/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Navigation Jump Anomalies, Default Mobile Version Webpage Loading, Menu Positioning, View-to-Image Saving, and H5-Native Interaction</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:09:01 / Modified: 00:09:34" itemprop="dateCreated datePublished" datetime="2025-06-29T00:09:01+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Hext-Knowledge-Navigation-Jump-Anomalies-Default-Mobile-Version-Webpage-Loading-Menu-Positioning-View-to-Image-Saving-and-H5-Native-Interaction"><a href="#Daily-HarmonyOS-Hext-Knowledge-Navigation-Jump-Anomalies-Default-Mobile-Version-Webpage-Loading-Menu-Positioning-View-to-Image-Saving-and-H5-Native-Interaction" class="headerlink" title="[Daily HarmonyOS Hext Knowledge] Navigation Jump Anomalies, Default Mobile Version Webpage Loading, Menu Positioning, View-to-Image Saving, and H5-Native Interaction"></a>[Daily HarmonyOS Hext Knowledge] Navigation Jump Anomalies, Default Mobile Version Webpage Loading, Menu Positioning, View-to-Image Saving, and H5-Native Interaction</h1><h4 id="1-HarmonyOS-When-navigating-to-a-non-existent-URL-no-exception-is-thrown-and-it-jumps-to-a-blank-page"><a href="#1-HarmonyOS-When-navigating-to-a-non-existent-URL-no-exception-is-thrown-and-it-jumps-to-a-blank-page" class="headerlink" title="1. HarmonyOS: When navigating to a non-existent URL, no exception is thrown, and it jumps to a blank page?"></a>1. HarmonyOS: When navigating to a non-existent URL, no exception is thrown, and it jumps to a blank page?</h4><p>Using <code>pushDestinationByName</code> can catch exceptions. Refer to the following:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">this.pageStack.pushDestinationByName(&#x27;PageOne&#x27;, &quot;PageOne Param&quot;)</span><br><span class="line">  .catch((error: BusinessError) =&gt; &#123;</span><br><span class="line">    console.error(`Push destination failed, error code = $&#123;error.code&#125;, error.message = $&#123;error.message&#125;.`);</span><br><span class="line">  &#125;).then(() =&gt; &#123;</span><br><span class="line">  console.error(&#x27;Push destination succeed.&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. HarmonyOS: How to set the webview to load the mobile version of a webpage by default?  </span><br></pre></td></tr></table></figure>
<p>import webview from ‘@ohos.web.webview’;</p>
<p>@Entry<br>@Component<br>struct Page2 {<br>  webController: webview.WebviewController &#x3D; new webview.WebviewController();<br>  aboutToAppear(): void {<br>    webview.WebviewController.setWebDebuggingAccess(true)<br>  }<br>  build() {<br>    Row() {<br>      Column() {<br>        Web({src: “<a target="_blank" rel="noopener" href="https://www.huawei.com/">https://www.huawei.com</a>“, controller: this.webController}).domStorageAccess(true)<br>          .onControllerAttached(() &#x3D;&gt; {<br>          let newAgent &#x3D; “Mozilla&#x2F;5.0 (Phone; OpenHarmony 4.1) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;114.0.0.0 Safari&#x2F;537.36 ArkWeb&#x2F;4.1.6.1 Mobile”;<br>          this.webController.setCustomUserAgent(newAgent)<br>        })<br>      }<br>      .width(‘100%’)<br>    }<br>    .height(‘100%’)<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 3. HarmonyOS: How to control the position of a popped Menu?  </span><br><span class="line">When clicking a button to pop up a Menu, the position cannot be controlled—it sometimes appears below the button, sometimes on the left/right. To fix the Menu position, configure the `placement` attribute. For example, `Placement.BottomLeft` displays the Menu below the bound component with the left edge aligned.  </span><br><span class="line">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ui-js-components-menu-V5#%E5%88%9B%E5%BB%BAmenu%E7%BB%84%E4%BB%B6  </span><br><span class="line"></span><br><span class="line">#### 4. HarmonyOS: How to generate an image from a View and save it to the album?  </span><br><span class="line">**Implementation Steps**:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; 1. Poster layout<br>Column() {<br>  &#x2F;&#x2F; Top image<br>  this.renderImage(this.isHiresSong)</p>
<p>  &#x2F;&#x2F; Hi-Res quality label<br>  if (this.labelInfoJson !&#x3D;&#x3D; null || this.labelInfoJson !&#x3D;&#x3D; undefined) {<br>    this.renderHiresLabel()<br>  }</p>
<p>  &#x2F;&#x2F; Lyrics<br>  if (this.selectLyricList.length &gt; 0) {<br>    this.renderLyric()<br>  }</p>
<p>  &#x2F;&#x2F; Title and author<br>  this.renderTitleInfo(this.selectLyricList.length &gt; 0)</p>
<p>  &#x2F;&#x2F; Watermark and QR code<br>  this.renderWatermarkQrc()<br>}<br>.id(‘placard_layout’)<br>.backgroundColor(this.bgColor)<br>.margin({ top: ‘25vp’, bottom: ‘48vp’, left: ‘30vp’, right: ‘30vp’ })<br>.padding({ top: ‘16vp’, bottom: ‘16vp’, left: ‘16vp’, right: ‘16vp’ })</p>
<p>&#x2F;&#x2F; 2. Check permissions before saving (no permission needed for in-app storage)<br>&#x2F;&#x2F; Note: ohos.permission.WRITE_IMAGEVIDEO is a system_basic permission. Ordinary apps need ACL elevation.<br>let content: Context &#x3D; getContext(this)<br>let permissions: Array<Permissions> &#x3D; [‘ohos.permission.WRITE_IMAGEVIDEO’]<br>let atManager &#x3D; abilityAccessCtrl.createAtManager();<br>let promise &#x3D; atManager.requestPermissionsFromUser(content, permissions);<br>let rejectNum &#x3D; 0;<br>promise.then(async (data) &#x3D;&gt; {<br>  let grant: number[] &#x3D; data.authResults;<br>  let grantName: string[] &#x3D; data.permissions;<br>  for (let i &#x3D; 0; i &lt; grant.length; i++) {<br>    if (grant[i] !&#x3D;&#x3D; 0) {<br>      console.info(TAG, ‘user reject permission request ‘ + grantName[i]);<br>      rejectNum++;<br>    }<br>  }<br>  if (rejectNum &gt; 0) {<br>    promptAction.showToast({ message: ‘拒绝权限’ })<br>  } else {<br>    this.savePlacard()<br>  }<br>}).catch((err: Error) &#x3D;&gt; {<br>  console.error(TAG, ‘ requestPermissionsFromUser, error &#x3D; ‘ + err);<br>});</p>
<p>&#x2F;&#x2F; 3. Save the image<br>&#x2F;&#x2F; Capture the component screenshot via componentSnapshot.get(“placard_layout”), returning image.PixelMap<br>componentSnapshot.get(“placard_layout”)<br>  .then((pixmap: image.PixelMap) &#x3D;&gt; {<br>    this.pixmap &#x3D; pixmap;<br>    &#x2F;&#x2F; Choose storage method<br>    …<br>  })</p>
<p>&#x2F;&#x2F; 1) Save directly to app storage<br>image.createImagePacker().packing(pixmap, { format: “image&#x2F;jpeg”, quality: 98 })<br>  .then(((data: ArrayBuffer): void &#x3D;&gt; {<br>    let dir &#x3D; getContext().cacheDir<br>    let file &#x3D; fs.openSync(<code>$&#123;dir&#125;/xxx.jpg</code>, fs.OpenMode.WRITE_ONLY | fs.OpenMode.CREATE | fs.OpenMode.TRUNC)<br>    let len: number &#x3D; fs.writeSync(file.fd, data, { encoding: “utf-8” })<br>    console.log(<code>$&#123;len&#125;</code>)<br>  }))</p>
<p>&#x2F;&#x2F; 2) Use ohos.file.picker to open the system file manager for the user to select a save path, returning a URI<br>const photoSaveOptions &#x3D; new picker.PhotoSaveOptions();<br>photoSaveOptions.newFileNames &#x3D; [fileName + ‘.png’];<br>const photoViewPicker &#x3D; new picker.PhotoViewPicker();<br>photoViewPicker.save(photoSaveOptions)<br>  .then((photoSaveResult) &#x3D;&gt; {<br>    console.log(TAG, “photoSaveUri  photoSaveResult[0]” + JSON.stringify(photoSaveResult[0]))<br>    this.photoSaveUri &#x3D; photoSaveResult[0]<br>  })<br>  .catch((err:Error) &#x3D;&gt; {<br>    console.log(TAG, “photoSaveUri  fail” + JSON.stringify(err))<br>    promptAction.showToast({message:’保存失败’})<br>  })</p>
<p>&#x2F;&#x2F; 3) Save to the album via photoAccessHelper<br>let photoType &#x3D; photoAccessHelper.PhotoType.IMAGE;<br>let extension &#x3D; ‘jpg’;<br>const context &#x3D; getContext(this);<br>let phAccessHelper &#x3D; photoAccessHelper.getPhotoAccessHelper(context);</p>
<p>phAccessHelper.createAsset(photoType, extension, {<br>  title: fileName<br>}, (err, uri) &#x3D;&gt; {<br>  if (uri !&#x3D; undefined) {<br>    console.info(TAG + ‘createAsset uri’ + uri);<br>    this.photoSaveUri &#x3D; uri<br>    console.info(TAG + ‘createAsset successfully’);<br>  } else {<br>    console.error(TAG + ‘createAsset failed, message &#x3D; ‘, err);<br>  }<br>});</p>
<p>&#x2F;&#x2F; After creating the URI, perform file writing<br>pixmap: image.PixelMap | undefined &#x3D; undefined;<br>@State @Watch(“onPhotoSaveUriUpdate”) photoSaveUri: string &#x3D; ‘’;</p>
<p>&#x2F;&#x2F; Listen for URI updates to perform file read&#x2F;write operations<br>onPhotoSaveUriUpdate() {<br>  if (this.photoSaveUri) {<br>    console.error(TAG, ‘photoSaveUri is: ‘ + JSON.stringify(this.photoSaveUri));<br>    const imagePacker &#x3D; image.createImagePacker();<br>    if (this.pixmap &#x3D;&#x3D;&#x3D; undefined) {<br>      return<br>    }<br>    imagePacker.packing(this.pixmap, { format: “image&#x2F;jpeg”, quality: 100 })<br>      .then(data &#x3D;&gt; {<br>        let file &#x3D; fs.openSync(this.photoSaveUri, fs.OpenMode.WRITE_ONLY);<br>        fs.writeSync(file.fd, data);<br>        fs.closeSync(file);<br>        promptAction.showToast({<br>          message: ‘已成功保存至相册’,<br>          duration: 1000<br>        })<br>      })<br>      .catch((error: Error) &#x3D;&gt; {<br>        console.error(TAG, ‘Failed to pack the image. And the error is: ‘ + error);<br>      })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 5. HarmonyOS: How does H5 communicate with HarmonyOS?  </span><br><span class="line">Refer to the document: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-app-page-data-channel-V5  </span><br><span class="line"></span><br><span class="line">Frontend pages and the app can use the `createWebMessagePorts()` API to create message ports for two-way communication.  </span><br><span class="line"></span><br><span class="line">**App-side code**:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; xxx.ets<br>import { webview } from ‘@kit.ArkWeb’;<br>import { BusinessError } from ‘@kit.BasicServicesKit’;</p>
<p>@Entry<br>@Component<br>struct WebComponent {<br>  controller: webview.WebviewController &#x3D; new webview.WebviewController();<br>  ports: webview.WebMessagePort[] &#x3D; [];<br>  @State sendFromEts: string &#x3D; ‘Send this message from ets to HTML’;<br>  @State receivedFromHtml: string &#x3D; ‘Display received message send from HTML’;</p>
<p>  build() {<br>    Column() {<br>      Text(this.receivedFromHtml)<br>      TextInput({ placeholder: ‘Send this message from ets to HTML’ })<br>        .onChange((value: string) &#x3D;&gt; {<br>          this.sendFromEts &#x3D; value;<br>        })</p>
<pre><code>  Button(&#39;postMessage&#39;)
    .onClick(() =&gt; &#123;
      try &#123;
        this.ports = this.controller.createWebMessagePorts();
        this.ports[1].onMessageEvent((result: webview.WebMessage) =&gt; &#123;
          let msg = &#39;Got msg from HTML:&#39;;
          if (typeof (result) === &#39;string&#39;) &#123;
            console.info(`received string message from html5, string is: $&#123;result&#125;`);
            msg = msg + result;
          &#125; else if (typeof (result) === &#39;object&#39;) &#123;
            if (result instanceof ArrayBuffer) &#123;
              console.info(`received arraybuffer from html5, length is: $&#123;result.byteLength&#125;`);
              msg = msg + &#39;length is &#39; + result.byteLength;
            &#125; else &#123;
              console.info(&#39;not support&#39;);
            &#125;
          &#125; else &#123;
            console.info(&#39;not support&#39;);
          &#125;
          this.receivedFromHtml = msg;
        &#125;)
        this.controller.postMessage(&#39;__init_port__&#39;, [this.ports[0]], &#39;*&#39;);
      &#125; catch (error) &#123;
        console.error(`ErrorCode: $&#123;(error as BusinessError).code&#125;,  Message: $&#123;(error as BusinessError).message&#125;`);
      &#125;
    &#125;)

  Button(&#39;SendDataToHTML&#39;)
    .onClick(() =&gt; &#123;
      try &#123;
        if (this.ports &amp;&amp; this.ports[1]) &#123;
          this.ports[1].postMessageEvent(this.sendFromEts);
        &#125; else &#123;
          console.error(`ports is null, Please initialize first`);
        &#125;
      &#125; catch (error) &#123;
        console.error(`ErrorCode: $&#123;(error as BusinessError).code&#125;,  Message: $&#123;(error as BusinessError).message&#125;`);
      &#125;
    &#125;)
  Web(&#123; src: $rawfile(&#39;index.html&#39;), controller: this.controller &#125;)
&#125;
</code></pre>
<p>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**Frontend page code (index.html)**:  </span><br></pre></td></tr></table></figure>
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebView Message Port Demo</title>
</head>
<body>
    <h1>WebView Message Port Demo</h1>
    <div>
        <input type="button" value="SendToEts" onclick="PostMsgToEts(msgFromJS.value);"/><br/>
        <input id="msgFromJS" type="text" value="send this message from HTML to ets"/><br/>
    </div>
    <p class="output">display received message send from ets</p>
</body>
<script>
var h5Port;
var output = document.querySelector('.output');
window.addEventListener('message', function (event) {
    if (event.data === '__init_port__') {
        if (event.ports[0] !== null) {
            h5Port = event.ports[0];
            h5Port.onmessage = function (event) {
              var msg = 'Got message from ets:';
              var result = event.data;
              if (typeof(result) === 'string') {
                console.info(`received string message from html5, string is: ${result}`);
                msg = msg + result;
              } else if (typeof(result) === 'object') {
                if (result instanceof ArrayBuffer) {
                  console.info(`received arraybuffer from html5, length is: ${result.byteLength}`);
                  msg = msg + 'length is ' + result.byteLength;
                } else {
                  console.info('not support');
                }
              } else {
                console.info('not support');
              }
              output.innerHTML = msg;
            }
        }
    }
})
function PostMsgToEts(data) {
    if (h5Port) {
      h5Port.postMessage(data);
    } else {
      console.error('h5Port is null, Please initialize first');
    }
}
</script>
</html>
```
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4126-Daily-HarmonyOS-Next-Knowledge-Desktop-Shortcut-API-Swiper-Display-Anomalies-Page-Screenshot-Prevention-Tabs-Component-Show-Hide-Listening-PDF-Page-Turning-Callbacks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4126-Daily-HarmonyOS-Next-Knowledge-Desktop-Shortcut-API-Swiper-Display-Anomalies-Page-Screenshot-Prevention-Tabs-Component-Show-Hide-Listening-PDF-Page-Turning-Callbacks/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Desktop Shortcut API, Swiper Display Anomalies, Page Screenshot Prevention, Tabs Component Show/Hide Listening, PDF Page Turning Callbacks</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:08:05 / Modified: 00:08:24" itemprop="dateCreated datePublished" datetime="2025-06-29T00:08:05+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Desktop-Shortcut-API-Swiper-Display-Anomalies-Page-Screenshot-Prevention-Tabs-Component-Show-Hide-Listening-PDF-Page-Turning-Callbacks"><a href="#Daily-HarmonyOS-Knowledge-Desktop-Shortcut-API-Swiper-Display-Anomalies-Page-Screenshot-Prevention-Tabs-Component-Show-Hide-Listening-PDF-Page-Turning-Callbacks" class="headerlink" title="[Daily HarmonyOS Knowledge] Desktop Shortcut API, Swiper Display Anomalies, Page Screenshot Prevention, Tabs Component Show&#x2F;Hide Listening, PDF Page Turning Callbacks"></a>[Daily HarmonyOS Knowledge] Desktop Shortcut API, Swiper Display Anomalies, Page Screenshot Prevention, Tabs Component Show&#x2F;Hide Listening, PDF Page Turning Callbacks</h1><h4 id="1-API-Description-for-HarmonyOS-desktop-shortcut-handling"><a href="#1-API-Description-for-HarmonyOS-desktop-shortcut-handling" class="headerlink" title="1. API Description for HarmonyOS desktop shortcut handling?"></a>1. API Description for HarmonyOS desktop shortcut handling?</h4><p>HarmonyOS does not consider opening desktop shortcut capabilities. It is recommended to use service cards to customize corresponding scenarios.  </p>
<p>Shortcuts displayed by long-pressing the app icon can be configured through the <code>shortcuts</code> tag in the <code>module.json5</code> file. These shortcuts only allow jumping to a specific UIAbility, cannot directly jump to non-entry pages, and can configure up to four shortcuts.  </p>
<p>For app shortcuts, developers can currently implement similar capabilities through service cards. Clicking a service card can jump to a specified UIAbility, and developers can launch different pages based on passed parameters. However, service cards cannot be created within the app and can only be added to the desktop by users through the steps: long-press the app -&gt; preview -&gt; add.  </p>
<p>Reference documents:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/formkit-overview-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/formkit-overview-V5</a></li>
</ul>
<h4 id="2-HarmonyOS-Swiper-shows-anomalies-after-using-customContentTransition-cards-overlap-instead-of-switching"><a href="#2-HarmonyOS-Swiper-shows-anomalies-after-using-customContentTransition-cards-overlap-instead-of-switching" class="headerlink" title="2. HarmonyOS Swiper shows anomalies after using customContentTransition (cards overlap instead of switching)?"></a>2. HarmonyOS Swiper shows anomalies after using customContentTransition (cards overlap instead of switching)?</h4><pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State cardChangeAnimationDuration: number = 0
  swiperController: SwiperController = new SwiperController()
  @State autoPlay: boolean = true
  userScrolled: boolean = false
  dataList: Color[] = [Color.Red, Color.Yellow, Color.Blue]

  aboutToAppear(): void &#123;
    setInterval(() =&gt; &#123;
      if (this.autoPlay) &#123;
        this.swiperController.showNext()
        promptAction.showToast(&#123; message: &#39;Switch to next card&#39; &#125;)
      &#125;
    &#125;, 2000);
  &#125;

  build() &#123;
    Stack() &#123;
      Swiper(this.swiperController) &#123;
        ForEach(this.dataList, (item: Color, index) =&gt; &#123;
          Text(`Card $&#123;index&#125;`)
            .textAlign(TextAlign.Center)
            .font(&#123; size: 17, weight: 500 &#125;)
            .backgroundColor(item)
            .opacity(0.5)
        &#125;)
      &#125;
      .autoPlay(false) // The component does not autoplay; autoplay logic is handled by VM calling scrollToIndex/showNext
      .loop(this.autoPlay)
      .indicator(false)
      .duration(this.cardChangeAnimationDuration) // Switching duration can be configured
      .curve(Curve.Linear) // Note: &lt;=API12 requires .curve(Curve.Linear) for duration to take effect
      .cachedCount(3)
      .width(&#39;100%&#39;)
      .height(&#39;100%&#39;)
      .nestedScroll(SwiperNestedScrollMode.SELF_FIRST)
      .onClick(() =&gt; &#123;
        this.cardChangeAnimationDuration = !this.autoPlay ? 700 : 400
        this.autoPlay = !this.autoPlay
        if (this.autoPlay) &#123;
          this.userScrolled = false
        &#125;
      &#125;)
      .onGestureSwipe((index: number, extraInfo: SwiperAnimationEvent) =&gt; &#123;
        this.userScrolled = true
      &#125;)
      .onAnimationEnd((index: number, extraInfo: SwiperAnimationEvent) =&gt; &#123;
        if (extraInfo.currentOffset == 0 &amp;&amp; this.userScrolled) &#123;
          this.autoPlay = false
        &#125;
      &#125;)
      .customContentTransition(&#123;
        timeout: 1000,
        transition: (proxy: SwiperContentTransitionProxy) =&gt; &#123;

        &#125;
      &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<p>Custom animations require handling relevant logic when implementing <code>customContentTransition</code>. Please refer to Example 4:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-swiper-V5#swipercontentanimatedtransition12%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-swiper-V5#swipercontentanimatedtransition12%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E</a>  </p>
<h4 id="3-How-to-prevent-screenshot-for-a-specific-page-in-an-HSP-app-on-HarmonyOS"><a href="#3-How-to-prevent-screenshot-for-a-specific-page-in-an-HSP-app-on-HarmonyOS" class="headerlink" title="3. How to prevent screenshot for a specific page in an HSP app on HarmonyOS?"></a>3. How to prevent screenshot for a specific page in an HSP app on HarmonyOS?</h4><p>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<p>Implementation steps: Some pages require screenshot prevention. First, apply for privacy window permissions in <code>module.json5</code>. Then, obtain the current window object and set privacy mode in <code>onPageShow()</code>. Cancel privacy mode in the <code>onPageHide()</code> lifecycle when exiting the page.  </p>
<h4 id="4-How-to-listen-for-component-show-hide-when-switching-components-in-HarmonyOS-Tabs"><a href="#4-How-to-listen-for-component-show-hide-when-switching-components-in-HarmonyOS-Tabs" class="headerlink" title="4. How to listen for component show&#x2F;hide when switching components in HarmonyOS Tabs?"></a>4. How to listen for component show&#x2F;hide when switching components in HarmonyOS Tabs?</h4><p>Want to perform operations when components are displayed, but find that the <code>aboutToAppear</code> method is not triggered.  </p>
<p>Use <code>visibility</code> for show&#x2F;hide control:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct VisibilityExample &#123;
  build() &#123;
    Column() &#123;
      Column() &#123;
        // Hidden without occupying space
        Text(&#39;None&#39;).fontSize(9).width(&#39;90%&#39;).fontColor(0xCCCCCC)
        Row().visibility(Visibility.None).width(&#39;90%&#39;).height(80).backgroundColor(0xAFEEEE)

        // Hidden but occupying space
        Text(&#39;Hidden&#39;).fontSize(9).width(&#39;90%&#39;).fontColor(0xCCCCCC)
        Row().visibility(Visibility.Hidden).width(&#39;90%&#39;).height(80).backgroundColor(0xAFEEEE)

        // Normally displayed, the default display mode for components
        Text(&#39;Visible&#39;).fontSize(9).width(&#39;90%&#39;).fontColor(0xCCCCCC)
        Row().visibility(Visibility.Visible).width(&#39;90%&#39;).height(80).backgroundColor(0xAFEEEE)
      &#125;.width(&#39;90%&#39;).border(&#123; width: 1 &#125;)
    &#125;.width(&#39;100%&#39;).margin(&#123; top: 5 &#125;)
  &#125;
&#125;
</code></pre>
<h4 id="5-Can-HarmonyOS-PDF-Kit-support-PDF-page-turning-callbacks"><a href="#5-Can-HarmonyOS-PDF-Kit-support-PDF-page-turning-callbacks" class="headerlink" title="5. Can HarmonyOS PDF Kit support PDF page turning callbacks?"></a>5. Can HarmonyOS PDF Kit support PDF page turning callbacks?</h4><p>PDF Kit currently does not support PDF page turning callbacks. It mainly provides functions such as opening PDF files, adding annotations to pages, headers&#x2F;footers, watermarks, backgrounds, and bookmarks.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4125-Daily-HarmonyOS-Next-Knowledge-Gradient-Effects-Web-Component-Object-Registration-Errors-Deep-Copying-Lists-loadContent-Data-Sharing-and-Half-Screen-Popups/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4125-Daily-HarmonyOS-Next-Knowledge-Gradient-Effects-Web-Component-Object-Registration-Errors-Deep-Copying-Lists-loadContent-Data-Sharing-and-Half-Screen-Popups/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Gradient Effects, Web Component Object Registration Errors, Deep Copying Lists, loadContent Data Sharing, and Half-Screen Popups</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:07:03 / Modified: 00:07:23" itemprop="dateCreated datePublished" datetime="2025-06-29T00:07:03+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Gradient-Effects-Web-Component-Object-Registration-Errors-Deep-Copying-Lists-loadContent-Data-Sharing-and-Half-Screen-Popups"><a href="#Daily-HarmonyOS-Next-Knowledge-Gradient-Effects-Web-Component-Object-Registration-Errors-Deep-Copying-Lists-loadContent-Data-Sharing-and-Half-Screen-Popups" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Gradient Effects, Web Component Object Registration Errors, Deep Copying Lists, loadContent Data Sharing, and Half-Screen Popups"></a>[Daily HarmonyOS Next Knowledge] Gradient Effects, Web Component Object Registration Errors, Deep Copying Lists, loadContent Data Sharing, and Half-Screen Popups</h1><h4 id="1-Does-HarmonyOS-have-gradient-effects-similar-to-other-platforms"><a href="#1-Does-HarmonyOS-have-gradient-effects-similar-to-other-platforms" class="headerlink" title="1. Does HarmonyOS have gradient effects similar to other platforms?"></a>1. Does HarmonyOS have gradient effects similar to other platforms?</h4><p>To achieve gradient effects, refer to the following code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page240126155113078</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">            .<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">DST_IN</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">        &#125;.<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">          <span class="attr">direction</span>: <span class="title class_">GradientDirection</span>.<span class="property">Right</span>,</span><br><span class="line">          <span class="attr">colors</span>: [[<span class="number">0x000000</span>, <span class="number">0.0</span>], [<span class="number">0xffffff</span>, <span class="number">1.0</span>]]</span><br><span class="line">        &#125;).<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">SRC_OVER</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>After testing, the following code produces a similar effect to the provided screenshot. Here’s the example code with minor adjustments:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page240126155113078</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;文化莞&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">            .<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">DST_IN</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">          <span class="attr">direction</span>: <span class="title class_">GradientDirection</span>.<span class="property">Right</span>,</span><br><span class="line">          <span class="attr">colors</span>: [[<span class="number">0x000000</span>, <span class="number">0.0</span>], [<span class="number">0xffffff</span>, <span class="number">0.8</span>]]</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">SRC_OVER</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// .backgroundColor(Color.Blue)</span></span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Based on your description, here’s a reference implementation for a horizontal list with gradient effects:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ListExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;Film&#x27;</span>, <span class="string">&#x27;Life&#x27;</span>, <span class="string">&#x27;Military&#x27;</span>, <span class="string">&#x27;History&#x27;</span>, <span class="string">&#x27;Novel&#x27;</span>, <span class="string">&#x27;Movie&#x27;</span>, <span class="string">&#x27;Reveal&#x27;</span>, <span class="string">&#x27;Star&#x27;</span>, <span class="string">&#x27;Society&#x27;</span>, <span class="string">&#x27;Explosion&#x27;</span>, <span class="string">&#x27;Good&#x27;</span>, <span class="string">&#x27;Featured&#x27;</span>];</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">64</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Horizontal</span>)</span><br><span class="line">      .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">20</span>, <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&quot;80%&quot;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Stack</span>() &#123;&#125;</span><br><span class="line">      .<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">        <span class="attr">angle</span>: <span class="number">90</span>,</span><br><span class="line">        <span class="attr">colors</span>: [ [<span class="string">&#x27;rgba(255,255,255,0)&#x27;</span>, <span class="number">0.9</span>], [<span class="number">0xffffff</span>, <span class="number">1.0</span>]]</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&quot;80%&quot;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">      .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">None</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="2-When-registering-an-object-in-the-HarmonyOS-Web-component-the-object-declaration-reports-an-“ArkTS-no-untyped-obj-literals”-error"><a href="#2-When-registering-an-object-in-the-HarmonyOS-Web-component-the-object-declaration-reports-an-“ArkTS-no-untyped-obj-literals”-error" class="headerlink" title="2. When registering an object in the HarmonyOS Web component, the object declaration reports an “ArkTS-no-untyped-obj-literals” error?"></a>2. When registering an object in the HarmonyOS Web component, the object declaration reports an “ArkTS-no-untyped-obj-literals” error?</h4><p>To resolve the “ArkTS-no-untyped-obj-literals” error, refer to:<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-more-cases.md#arkts-no-untyped-obj-literals">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-more-cases.md#arkts-no-untyped-obj-literals</a>  </p>
<p>Import the type from the SDK and annotate the object literal:  </p>
<p><strong>Original Code</strong>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> area = &#123;</span><br><span class="line">  <span class="attr">pixels</span>: <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">8</span>),</span><br><span class="line">  <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">stride</span>: <span class="number">8</span>,</span><br><span class="line">  <span class="attr">region</span>: &#123; <span class="attr">size</span>: &#123; <span class="attr">height</span>: <span class="number">1</span>, <span class="attr">width</span>: <span class="number">2</span> &#125;, <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Recommended Fix</strong>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; image &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ImageKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">area</span>: image.<span class="property">PositionArea</span> = &#123;</span><br><span class="line">  <span class="attr">pixels</span>: <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">8</span>),</span><br><span class="line">  <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">stride</span>: <span class="number">8</span>,</span><br><span class="line">  <span class="attr">region</span>: &#123; <span class="attr">size</span>: &#123; <span class="attr">height</span>: <span class="number">1</span>, <span class="attr">width</span>: <span class="number">2</span> &#125;, <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-How-to-perform-a-deep-copy-of-a-list-in-HarmonyOS"><a href="#3-How-to-perform-a-deep-copy-of-a-list-in-HarmonyOS" class="headerlink" title="3. How to perform a deep copy of a list in HarmonyOS?"></a>3. How to perform a deep copy of a list in HarmonyOS?</h4><p>Currently, ArkTS does not support the <code>any</code> type, making it challenging to write deep copy logic directly in .ets files. When implementing deep copy in .ts files, list data types may not be fully supported. Here’s a workaround:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params"><span class="attr">obj</span>: <span class="title class_">ESObject</span></span>): <span class="title class_">ESObject</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span> || obj === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">copy</span>: <span class="title class_">ESObject</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)) &#123;</span><br><span class="line">    copy = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; obj.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      copy[i] = <span class="title function_">deepCopy</span>(obj[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    copy = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        copy[key] = <span class="title function_">deepCopy</span>(obj[key]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = <span class="title function_">deepCopy</span>(arr1);</span><br><span class="line">arr2[<span class="number">2</span>] = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;arr1: &#x27;</span> + <span class="title class_">String</span>(arr1)); <span class="comment">// Output: arr1: 1,2,3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;arr2: &#x27;</span> + <span class="title class_">String</span>(arr2)); <span class="comment">// Output: arr2: 1,2,4</span></span><br></pre></td></tr></table></figure>


<h4 id="4-How-to-share-data-between-the-EntryAbility-and-its-loaded-content-page-in-HarmonyOS"><a href="#4-How-to-share-data-between-the-EntryAbility-and-its-loaded-content-page-in-HarmonyOS" class="headerlink" title="4. How to share data between the EntryAbility and its loaded content page in HarmonyOS?"></a>4. How to share data between the EntryAbility and its loaded content page in HarmonyOS?</h4><p>Use <code>LocalStorage</code> to share data between EntryAbility and loaded pages. Refer to the <code>loadContent</code> documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#loadcontent9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#loadcontent9</a>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">loadContent</span>(<span class="attr">path</span>: <span class="built_in">string</span>, <span class="attr">storage</span>: <span class="title class_">LocalStorage</span>, <span class="attr">callback</span>: <span class="title class_">AsyncCallback</span>&lt;<span class="built_in">void</span>&gt;): <span class="built_in">void</span></span><br></pre></td></tr></table></figure>

<p>Loads a specific page into the window and passes state properties via <code>LocalStorage</code> with an asynchronous callback.  </p>
<p><strong>Parameters</strong>:  </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>path</td>
<td>string</td>
<td>Yes</td>
<td>Path to the page content to load (must be listed in <code>main_pages.json</code>).</td>
</tr>
<tr>
<td>storage</td>
<td>LocalStorage</td>
<td>Yes</td>
<td>Page-level UI state storage for passing properties to the loaded page.</td>
</tr>
<tr>
<td>callback</td>
<td><code>AsyncCallback&lt;void&gt;</code></td>
<td>Yes</td>
<td>Callback function.</td>
</tr>
</tbody></table>
<h4 id="5-How-to-create-a-half-screen-popup-with-CustomDialogController-in-HarmonyOS-allowing-interaction-outside-the-popup"><a href="#5-How-to-create-a-half-screen-popup-with-CustomDialogController-in-HarmonyOS-allowing-interaction-outside-the-popup" class="headerlink" title="5. How to create a half-screen popup with CustomDialogController in HarmonyOS, allowing interaction outside the popup?"></a>5. How to create a half-screen popup with CustomDialogController in HarmonyOS, allowing interaction outside the popup?</h4><ol>
<li><strong>Set the popup’s masking area</strong> to prevent event propagation within the mask but allow it outside.  </li>
<li><strong>Set <code>isModal</code> to <code>false</code></strong> and manually control the overlay’s visibility using <code>hitTestBehavior(HitTestMode.None)</code> to make the overlay non-interactive.</li>
</ol>
<p><strong>Sample Code</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line">struct <span class="title class_">MyDialog</span> &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">visible</span>: <span class="title class_">Visibility</span>;</span><br><span class="line">  <span class="attr">controller1</span>: <span class="title class_">CustomDialogController</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Custom Popup&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">25</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>);</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;Cancel&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller1</span>.<span class="title function_">close</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">visible</span> = <span class="title class_">Visibility</span>.<span class="property">None</span>;</span><br><span class="line">          &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xffffff</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>);</span><br><span class="line">          </span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;Confirm&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller1</span>.<span class="title function_">close</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">visible</span> = <span class="title class_">Visibility</span>.<span class="property">None</span>;</span><br><span class="line">          &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xffffff</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>);</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">visible</span>: <span class="title class_">Visibility</span> = <span class="title class_">Visibility</span>.<span class="property">None</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="attr">dialogController1</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">MyDialog</span>(&#123; <span class="attr">visible</span>: <span class="variable language_">this</span>.<span class="property">visible</span> &#125;),</span><br><span class="line">    <span class="attr">offset</span>: &#123; <span class="attr">dx</span>: <span class="number">0</span>, <span class="attr">dy</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    <span class="attr">autoCancel</span>: <span class="literal">false</span>,  <span class="comment">// Prevent closing when clicking outside</span></span><br><span class="line">    <span class="attr">isModal</span>: <span class="literal">false</span>,     <span class="comment">// Disable default modal behavior</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Open Popup&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dialogController1</span>.<span class="title function_">open</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">visible</span> = <span class="title class_">Visibility</span>.<span class="property">Visible</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      </span><br><span class="line">      <span class="title class_">List</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;Text&#x27;</span>)</span><br><span class="line">            &#125;.<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>).<span class="title function_">height</span>(<span class="number">100</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;.<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="string">&#x27;#F1F3F5&#x27;</span> &#125;).<span class="title function_">height</span>(<span class="string">&#x27;90%&#x27;</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="title class_">Column</span>()</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;)</span><br><span class="line">        .<span class="title function_">zIndex</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0x33000000</span>)</span><br><span class="line">        .<span class="title function_">visibility</span>(<span class="variable language_">this</span>.<span class="property">visible</span>)</span><br><span class="line">        .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">None</span>);</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4124-Daily-HarmonyOS-Next-Knowledge-App-Icon-Errors-ObservedV2-Best-Practices-Web-SSL-Errors-Taskpool-Issues-and-Network-Image-Downloading/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4124-Daily-HarmonyOS-Next-Knowledge-App-Icon-Errors-ObservedV2-Best-Practices-Web-SSL-Errors-Taskpool-Issues-and-Network-Image-Downloading/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] App Icon Errors, @ObservedV2 Best Practices, Web SSL Errors, Taskpool Issues, and Network Image Downloading</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:05:52 / Modified: 00:07:30" itemprop="dateCreated datePublished" datetime="2025-06-29T00:05:52+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-App-Icon-Errors-ObservedV2-Best-Practices-Web-SSL-Errors-Taskpool-Issues-and-Network-Image-Downloading"><a href="#Daily-HarmonyOS-Next-Knowledge-App-Icon-Errors-ObservedV2-Best-Practices-Web-SSL-Errors-Taskpool-Issues-and-Network-Image-Downloading" class="headerlink" title="[Daily HarmonyOS Next Knowledge] App Icon Errors, @ObservedV2 Best Practices, Web SSL Errors, Taskpool Issues, and Network Image Downloading"></a>[Daily HarmonyOS Next Knowledge] App Icon Errors, @ObservedV2 Best Practices, Web SSL Errors, Taskpool Issues, and Network Image Downloading</h1><h4 id="1-HarmonyOS-Occasional-app-icon-display-errors"><a href="#1-HarmonyOS-Occasional-app-icon-display-errors" class="headerlink" title="1. HarmonyOS: Occasional app icon display errors?"></a>1. HarmonyOS: Occasional app icon display errors?</h4><p>The app has set the icon in both <code>app.json5</code> and <code>module.json5</code>, but when returning to the home screen, an occasional image from the Resource folder appears as the icon.  </p>
<p>Possible causes of app icon display errors:  </p>
<ul>
<li><p><strong>Icon configuration error</strong>: The app icon must be configured with the <code>icon</code> tag in the <code>app.json5</code> file under the project’s AppScope directory. Ensure the icon is configured as a resource index of the image. For apps with multiple UIAbilities, configure the entry icon and label in the <code>module.json5</code> file.  </p>
</li>
<li><p><strong>Permission authorization issues</strong>: The app must correctly configure the <code>bundleName</code> tag in <code>app.json5</code> to ensure uniqueness. Incorrect permission configuration may cause the icon to not display or display incorrectly. Ensure user-granted permissions match the app’s actual needs and the correct icon is shown on the authorization page.  </p>
</li>
<li><p><strong>System control</strong>: The system strictly controls apps without icons to prevent malicious apps from hiding entry icons, which may confuse users. If hiding the entry icon is necessary, configure the <code>AllowAppDesktopIconHide</code> privilege.  </p>
</li>
<li><p><strong>Version declaration configuration</strong>: Configure the <code>versionCode</code> and <code>versionName</code> tags in <code>app.json5</code> to ensure correct version number and name settings.</p>
</li>
</ul>
<h4 id="2-Are-there-any-best-practices-or-comprehensive-examples-for-using-ObservedV2"><a href="#2-Are-there-any-best-practices-or-comprehensive-examples-for-using-ObservedV2" class="headerlink" title="2. Are there any best practices or comprehensive examples for using @ObservedV2?"></a>2. Are there any best practices or comprehensive examples for using @ObservedV2?</h4><p>@ObservedV2 enhances the state management framework’s ability to observe properties in class objects. Use the <code>@ObservedV2</code> and <code>@Trace</code> decorators to annotate classes and their properties. For usage scenarios, supported versions, and demos, refer to:<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-new-observedV2-and-trace.md#%E5%B5%8C%E5%A5%97%E7%B1%BB%E5%9C%BA%E6%99%AF">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-new-observedV2-and-trace.md#%E5%B5%8C%E5%A5%97%E7%B1%BB%E5%9C%BA%E6%99%AF</a>  </p>
<h4 id="3-How-to-get-the-exception-URL-when-handling-SSLError-events-in-HarmonyOS-WebView"><a href="#3-How-to-get-the-exception-URL-when-handling-SSLError-events-in-HarmonyOS-WebView" class="headerlink" title="3. How to get the exception URL when handling SSLError events in HarmonyOS WebView?"></a>3. How to get the exception URL when handling SSLError events in HarmonyOS WebView?</h4><p>The <code>onSslErrorEventReceive</code> method of the Web component does not provide a way to get the URL with the certificate exception in the <code>event</code>. How can we obtain and display this URL to the user?  </p>
<p>Use <code>onSslErrorEvent</code> to get the URL during SSLError. Refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001930757269__onsslerrorevent12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001930757269__onsslerrorevent12</a>  </p>
<h4 id="4-Using-taskpool-to-open-a-thread-for-file-operations-and-parsing-with-multiple-singleton-objects-Must-each-singleton-be-set-as-Sendable-for-the-main-thread-to-get-data-Are-there-other-solutions"><a href="#4-Using-taskpool-to-open-a-thread-for-file-operations-and-parsing-with-multiple-singleton-objects-Must-each-singleton-be-set-as-Sendable-for-the-main-thread-to-get-data-Are-there-other-solutions" class="headerlink" title="4. Using taskpool to open a thread for file operations and parsing, with multiple singleton objects. Must each singleton be set as Sendable for the main thread to get data? Are there other solutions?"></a>4. Using taskpool to open a thread for file operations and parsing, with multiple singleton objects. Must each singleton be set as Sendable for the main thread to get data? Are there other solutions?</h4><ul>
<li><p>If the main thread and taskpool need to read&#x2F;write the singleton together, both must set it as Sendable and pass it. If the singleton is obtained via different threads (e.g., calling a singleton getter from both), inconsistencies may occur. Refer to the solution:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-sendable-module-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-sendable-module-V5</a>  </p>
</li>
<li><p>To pass simple-type data from the singleton to the main thread, besides returning via taskpool execution, use Emitter:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/itc-with-emitter-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/itc-with-emitter-V5</a></p>
</li>
</ul>
<h4 id="5-How-to-get-the-size-of-an-image-downloaded-from-the-network-and-convert-the-data-stream-to-a-PixelMap-in-HarmonyOS"><a href="#5-How-to-get-the-size-of-an-image-downloaded-from-the-network-and-convert-the-data-stream-to-a-PixelMap-in-HarmonyOS" class="headerlink" title="5. How to get the size of an image downloaded from the network and convert the data stream to a PixelMap in HarmonyOS?"></a>5. How to get the size of an image downloaded from the network and convert the data stream to a PixelMap in HarmonyOS?</h4><ul>
<li><p>Decode the image stream into a PixelMap using ImageSource. Refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-overview-0000001821000129">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-overview-0000001821000129</a>  </p>
</li>
<li><p>Get the image size via the <code>onComplete</code> event of the Image component, which triggers when image data is loaded and decoded successfully, returning the loaded dimensions. Refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image</a></p>
</li>
</ul>
<p><strong>Note</strong>: For official API details, always refer to the latest HarmonyOS documentation.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4123-Daily-HarmonyOS-Next-Knowledge-Subwindow-Orientation-RichEdit-Center-Alignment-Issue-Offline-Resource-Caching-for-Web-JSON-to-Object-Method-Loss-Listening-to-Content-Changes-in-State-Variable-Arrays/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4123-Daily-HarmonyOS-Next-Knowledge-Subwindow-Orientation-RichEdit-Center-Alignment-Issue-Offline-Resource-Caching-for-Web-JSON-to-Object-Method-Loss-Listening-to-Content-Changes-in-State-Variable-Arrays/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Subwindow Orientation, RichEdit Center Alignment Issue, Offline Resource Caching for Web, JSON to Object Method Loss, Listening to Content Changes in State Variable Arrays</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:04:59 / Modified: 00:05:15" itemprop="dateCreated datePublished" datetime="2025-06-29T00:04:59+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Subwindow-Orientation-RichEdit-Center-Alignment-Issue-Offline-Resource-Caching-for-Web-JSON-to-Object-Method-Loss-Listening-to-Content-Changes-in-State-Variable-Arrays"><a href="#Daily-HarmonyOS-Knowledge-Subwindow-Orientation-RichEdit-Center-Alignment-Issue-Offline-Resource-Caching-for-Web-JSON-to-Object-Method-Loss-Listening-to-Content-Changes-in-State-Variable-Arrays" class="headerlink" title="[Daily HarmonyOS Knowledge] Subwindow Orientation, RichEdit Center Alignment Issue, Offline Resource Caching for Web, JSON to Object Method Loss, Listening to Content Changes in State Variable Arrays"></a>[Daily HarmonyOS Knowledge] Subwindow Orientation, RichEdit Center Alignment Issue, Offline Resource Caching for Web, JSON to Object Method Loss, Listening to Content Changes in State Variable Arrays</h1><h4 id="1-HarmonyOS-Subwindow-display-orientation-setting-does-not-take-effect"><a href="#1-HarmonyOS-Subwindow-display-orientation-setting-does-not-take-effect" class="headerlink" title="1. HarmonyOS: Subwindow display orientation setting does not take effect?"></a>1. HarmonyOS: Subwindow display orientation setting does not take effect?</h4><p>The subwindow’s <code>getPreferredOrientation</code> returns landscape, indicating the setting is correct, but the UI still displays in portrait.  </p>
<p><strong>Solution</strong>: Set the main window’s orientation directly. Refer to the demo:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State message: string = &#x27;Hello World&#x27;;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(&#x27;Reverse Landscape&#x27;)</span><br><span class="line">          .fontSize(50)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">          .onClick(async ()=&gt;&#123;</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line">              const topWindow = await window.getLastWindow(getContext(this));</span><br><span class="line">              console.info(&#x27;Succeeded in obtaining the top window. Data: &#x27; + JSON.stringify(topWindow));</span><br><span class="line">              await topWindow.setPreferredOrientation(window.Orientation.LANDSCAPE_INVERTED);</span><br><span class="line">              console.info(&#x27;Succeeded in setting window orientation.&#x27;);</span><br><span class="line">            &#125; catch (error) &#123;</span><br><span class="line">              console.error(&#x27;Failed to obtain or set the top window. Cause: &#x27; + JSON.stringify(error));</span><br><span class="line">            &#125;</span><br><span class="line">            /*window.getLastWindow(getContext(this),(err,win)=&gt;&#123;</span><br><span class="line">              win.setPreferredOrientation(window.Orientation.LANDSCAPE_INVERTED)</span><br><span class="line">            &#125;)*/</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        Text(&quot;Portrait&quot;)</span><br><span class="line">          .fontSize(50)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">          .onClick(async ()=&gt;&#123;</span><br><span class="line">            try &#123;</span><br><span class="line">              const topWindow = await window.getLastWindow(getContext(this));</span><br><span class="line">              console.info(&#x27;Succeeded in obtaining the top window. Data: &#x27; + JSON.stringify(topWindow));</span><br><span class="line">              await topWindow.setPreferredOrientation(window.Orientation.PORTRAIT);</span><br><span class="line">              console.info(&#x27;Succeeded in setting window orientation.&#x27;);</span><br><span class="line">            &#125; catch (error) &#123;</span><br><span class="line">              console.error(&#x27;Failed to obtain or set the top window. Cause: &#x27; + JSON.stringify(error));</span><br><span class="line">            &#125;</span><br><span class="line">            /*window.getLastWindow(getContext(this),(err,win)=&gt;&#123;</span><br><span class="line">              win.setPreferredOrientation(window.Orientation.PORTRAIT)</span><br><span class="line">            &#125;)*/</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. HarmonyOS: RichEditor content is not centered?  </span><br><span class="line">**Reference code**:  </span><br></pre></td></tr></table></figure>
<p>RichEditor({ controller: this.controllerRich})<br>  .width(‘100%’)<br>  .height(40)<br>  .layoutWeight(1)<br>  .borderRadius(10)<br>  .backgroundColor(Color.Red)<br>  .margin({ top: 20 ,left:14,bottom:5})<br>  .key(‘RichEditor’)<br>  .id(‘id’)<br>  .placeholder(‘Platform advocates civilized language, please speak gently~’,{font:{size:12},fontColor:’#999999’})<br>  .defaultFocus(true)<br>  .onReady(() &#x3D;&gt; {<br>    this.controllerRich.addTextSpan(“0123456789\n”, {<br>      style: {<br>        fontColor: Color.Pink,<br>        fontSize: “32”,<br>      },<br>      paragraphStyle: {<br>        textAlign: TextAlign.Center,<br>        leadingMargin: 16<br>      }<br>    })<br>  })</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 3. HarmonyOS: What is the difference between injectOfflineResources and precompileJavaScript?  </span><br><span class="line">Is `injectOfflineResources` also used to cache local resources for web use, similar to `precompileJavaScript`? Are there differences in underlying implementations, and which has better performance?  </span><br><span class="line"></span><br><span class="line">**Explanation**:  </span><br><span class="line">- `injectOfflineResources`: Injects local offline resources into memory cache to improve initial page loading speed.  </span><br><span class="line">- `precompileJavaScript`: Precompiles JavaScript to generate bytecode cache or updates existing bytecode cache based on provided parameters.  </span><br><span class="line"></span><br><span class="line">These two interfaces differ completely in purpose, definition, and underlying implementation. The former injects resources into memory cache, while the latter compiles JS into bytecode cache. Their performance is not directly comparable.  </span><br><span class="line">**Reference link**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__precompilejavascript12  </span><br><span class="line"></span><br><span class="line">#### 4. HarmonyOS: When converting JSON to a Class in ArkTS, the Class methods are lost?  </span><br><span class="line">**Issue**: `JSON.parse()` returns a plain object rather than an instance of the `DataBean` class, so it does not include class methods.  </span><br><span class="line"></span><br><span class="line">**Solution**: Manually create a class instance and assign JSON object properties to it.  </span><br><span class="line">**Reference**:  </span><br></pre></td></tr></table></figure>
<p>class DataBean {<br>  code &#x3D; -1;<br>  msg &#x3D; ‘’;</p>
<p>  isOK() {<br>    return this.code &#x3D;&#x3D;&#x3D; 0;<br>  }</p>
<p>  &#x2F;&#x2F; Static method to create a DataBean instance from a JSON string<br>  static fromJson(jsonString: string): DataBean {<br>    const jsonData:ESObject &#x3D; JSON.parse(jsonString);<br>    const dataBean &#x3D; new DataBean();<br>    dataBean.code &#x3D; jsonData.code;<br>    dataBean.msg &#x3D; jsonData.msg;<br>    return dataBean;<br>  }<br>}</p>
<p>let json &#x3D; ‘{“code”:0,”msg”:”success”}’;<br>let dataBean &#x3D; DataBean.fromJson(json);<br>console.log(“test”,dataBean.msg); &#x2F;&#x2F; success<br>console.log(“test”,dataBean.isOK()); &#x2F;&#x2F; true</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 5. HarmonyOS: Using the @state decorator to listen for property changes in an Array object—what&#x27;s the best practice without adding/deleting/modifying the array?  </span><br><span class="line">Use the `@Observed` and `@ObjectLink` decorators to nest class object property changes.  </span><br><span class="line">**Reference link**: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84  </span><br><span class="line"></span><br><span class="line">**Demo**:  </span><br></pre></td></tr></table></figure>
<p>@Observed<br>class InnerMessageVo {<br>  id?: number;<br>  readState?: boolean;</p>
<p>  constructor(id: number, readState: boolean) {<br>    this.id &#x3D; id;<br>    this.readState &#x3D; readState;<br>  }<br>}</p>
<p>@Component<br>struct ViweA {<br>  @ObjectLink a: InnerMessageVo;</p>
<p>  build() {<br>    Row() {<br>      Text(<code>$&#123;this.a.readState&#125;</code>)<br>    }<br>  }<br>}</p>
<p>@Entry<br>@Component<br>struct Index {<br>  @State arr1: InnerMessageVo[] &#x3D; [new InnerMessageVo(1, false), new InnerMessageVo(2, false)]</p>
<p>  build() {<br>    Row() {<br>      Column() {<br>        List() {<br>          ForEach(this.arr1, (item: InnerMessageVo, index: number) &#x3D;&gt; {<br>            ViweA({ a: this.arr1[index] })<br>          })<br>          ListItem() {<br>            Button(‘change’)<br>              .onClick(() &#x3D;&gt; {<br>                console.log(‘false’);<br>                this.arr1[1].readState &#x3D; true<br>              })<br>          }<br>        }<br>      }<br>      .width(‘100%’)<br>    }<br>    .height(‘100%’)<br>  }<br>}<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4122%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Passing-Component-Objects-as-Parameters-Using-2D-in-Worker-Threads-Linking-Tabs-Components-Focus-Control-in-Web-Components-and-Loading-Tibetan-Text-in-Text-Components/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4122%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Passing-Component-Objects-as-Parameters-Using-2D-in-Worker-Threads-Linking-Tabs-Components-Focus-Control-in-Web-Components-and-Loading-Tibetan-Text-in-Text-Components/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Passing Component Objects as Parameters, Using 2D in Worker Threads, Linking Tabs Components, Focus Control in Web Components, and Loading Tibetan Text in Text Components</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 00:03:49 / Modified: 09:36:55" itemprop="dateCreated datePublished" datetime="2025-06-29T00:03:49+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="【Daily-HarmonyOS-Next-Knowledge】Passing-Component-Objects-as-Parameters-Using-2D-in-Worker-Threads-Linking-Tabs-Components-Focus-Control-in-Web-Components-and-Loading-Tibetan-Text-in-Text-Components"><a href="#【Daily-HarmonyOS-Next-Knowledge】Passing-Component-Objects-as-Parameters-Using-2D-in-Worker-Threads-Linking-Tabs-Components-Focus-Control-in-Web-Components-and-Loading-Tibetan-Text-in-Text-Components" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Passing Component Objects as Parameters, Using 2D in Worker Threads, Linking Tabs Components, Focus Control in Web Components, and Loading Tibetan Text in Text Components"></a>【Daily HarmonyOS Next Knowledge】Passing Component Objects as Parameters, Using 2D in Worker Threads, Linking Tabs Components, Focus Control in Web Components, and Loading Tibetan Text in Text Components</h1><h3 id="1-How-to-pass-a-Component-object-as-a-parameter-to-a-class-and-modify-element-visibility-within-the-class-in-HarmonyOS"><a href="#1-How-to-pass-a-Component-object-as-a-parameter-to-a-class-and-modify-element-visibility-within-the-class-in-HarmonyOS" class="headerlink" title="1. How to pass a Component object as a parameter to a class and modify element visibility within the class in HarmonyOS?"></a>1. How to pass a Component object as a parameter to a class and modify element visibility within the class in HarmonyOS?</h3><p>Currently, components cannot be directly passed as parameters. For custom components, you can declare the parameter as <code>builderParam</code> and pass a custom builder instead.</p>
<ul>
<li>Custom build functions: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builder-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builder-V5</a></li>
<li>Encapsulating global @Builder: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-wrapbuilder-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-wrapbuilder-V5</a></li>
</ul>
<h3 id="2-Does-CanvasRenderingContext2D-in-HarmonyOS-support-usage-in-TaskPool"><a href="#2-Does-CanvasRenderingContext2D-in-HarmonyOS-support-usage-in-TaskPool" class="headerlink" title="2. Does CanvasRenderingContext2D in HarmonyOS support usage in TaskPool?"></a>2. Does CanvasRenderingContext2D in HarmonyOS support usage in TaskPool?</h3><p>Drawing operations are UI-related and should not be performed in worker threads. If your drawing involves heavy data computation or processing, you can handle the data in a task, return the results to the main thread, and then perform the drawing. Canvas is not officially verified as thread-safe, so direct drawing in worker threads is not recommended.</p>
<p>Reference for thread-safe modules: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-thread-concurrency-overview-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-thread-concurrency-overview-V5</a></p>
<h3 id="3-Tabs-component-inside-bindSheet-does-not联动-with-scroll-events"><a href="#3-Tabs-component-inside-bindSheet-does-not联动-with-scroll-events" class="headerlink" title="3. Tabs component inside bindSheet does not联动 with scroll events?"></a>3. Tabs component inside bindSheet does not联动 with scroll events?</h3><p>This is a layout issue. The Tab and List layouts are not properly overlapped. Scrolling only works when pulling down from the top tabContent. Wrap them in an additional layout layer to fix this, as shown in the code below:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Builder</span><br><span class="line">sheetBuilder() &#123;</span><br><span class="line">  Column() &#123;</span><br><span class="line">    Tabs() &#123;</span><br><span class="line">      ForEach([1, 2], (value: number) =&gt; &#123;</span><br><span class="line">        TabContent() &#123;</span><br><span class="line">          this.listBuilder()</span><br><span class="line">        &#125;.tabBar(value.toString())</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-How-to-prevent-a-web-page-loaded-in-a-HarmonyOS-Web-component-from-automatically-gaining-focus"><a href="#4-How-to-prevent-a-web-page-loaded-in-a-HarmonyOS-Web-component-from-automatically-gaining-focus" class="headerlink" title="4. How to prevent a web page loaded in a HarmonyOS Web component from automatically gaining focus?"></a>4. How to prevent a web page loaded in a HarmonyOS Web component from automatically gaining focus?</h3><p>Refer to the following API: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__oninactive">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__oninactive</a></p>
<p><code>requestFocus(): void</code> - Causes the current web page to gain focus.</p>
<p>Example code:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">import &#123; webview &#125; from &#x27;@kit.ArkWeb&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct WebComponent &#123;</span><br><span class="line">  controller: webview.WebviewController = new webview.WebviewController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Button(&#x27;requestFocus&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          try &#123;</span><br><span class="line">            this.controller.requestFocus();</span><br><span class="line">          &#125; catch (error) &#123;</span><br><span class="line">            console.error(`ErrorCode: $&#123;(error as BusinessError).code&#125;,  Message: $&#123;(error as BusinessError).message&#125;`);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      Web(&#123; src: &#x27;www.example.com&#x27;, controller: this.controller &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-Tibetan-text-displays-abnormally-in-HarmonyOS-Text-components"><a href="#5-Tibetan-text-displays-abnormally-in-HarmonyOS-Text-components" class="headerlink" title="5. Tibetan text displays abnormally in HarmonyOS Text components?"></a>5. Tibetan text displays abnormally in HarmonyOS Text components?</h3><p>When using the Text component to display single-line minority language text (e.g., Tibetan) with <code>.maxLines(1)</code> set, there may be excessive leading whitespace. If both <code>.maxLines(1)</code> and <code>.textOverflow(&#123;overflow: TextOverflow.Ellipsis&#125;)</code> are set, the ellipsis may appear at the beginning instead of the end.</p>
<p>To center the text, use <code>.textAlign(TextAlign.Center)</code>. To fix the leading whitespace issue caused by premature ellipsis, use <code>.wordBreak(WordBreak.BREAK_ALL)</code>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">342</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
