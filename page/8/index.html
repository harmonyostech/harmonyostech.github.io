<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/8/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41125-Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41125-Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Initializing BigInt, Package Size Optimization, Tabs Nested in Grid, Aging Adaptation, Release Packaging Failure</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:36:36 / Modified: 09:37:15" itemprop="dateCreated datePublished" datetime="2025-06-29T09:36:36+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure"><a href="#Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Initializing BigInt, Package Size Optimization, Tabs Nested in Grid, Aging Adaptation, Release Packaging Failure"></a>[Daily HarmonyOS Next Knowledge] Initializing BigInt, Package Size Optimization, Tabs Nested in Grid, Aging Adaptation, Release Packaging Failure</h1><h4 id="1-How-to-initialize-a-BigInt-type-property-in-a-class-in-HarmonyOS"><a href="#1-How-to-initialize-a-BigInt-type-property-in-a-class-in-HarmonyOS" class="headerlink" title="1. How to initialize a BigInt type property in a class in HarmonyOS?"></a>1. How to initialize a BigInt type property in a class in HarmonyOS?</h4><p>BigInt can be initialized using the keyword, for example:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">let a = BigInt(1); let b = BigInt(&quot;2&quot;); </span><br><span class="line">```  </span><br><span class="line">Example of mutual conversion between Uint8Array and string:  </span><br><span class="line">```typescript</span><br><span class="line">// String to Uint8Array  </span><br><span class="line">let text1 = &quot;hello world&quot;;</span><br><span class="line">let buf = new ArrayBuffer(text1.length * 2);</span><br><span class="line">let uint8 = new Uint8Array(buf);</span><br><span class="line">for (let i = 0; i &lt; text1.length; i++) &#123;</span><br><span class="line">  uint8[i] = text1.charCodeAt(i);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;uint8----&#x27;, uint8);</span><br><span class="line"></span><br><span class="line">// Uint8Array to string  </span><br><span class="line">let spArray = uint8.slice(0, 3);</span><br><span class="line">let dataString = &#x27;&#x27;;</span><br><span class="line">for (let i = 0; i &lt; spArray.length; i++) &#123;</span><br><span class="line">  dataString += String.fromCharCode(spArray[i]);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;dataString-----&#x27;, dataString);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2. Can the same so be merged when packaging final apps for different haps? Reduce package size due to duplicate so files.  </span><br><span class="line">Reducing the app package size is crucial for improving download and installation experience. Compressing, streamlining, or reusing code/resources in the app can effectively reduce its size, enhance download/installation speed, and minimize system space occupation.  </span><br><span class="line"></span><br><span class="line">Developers can refer to the following three methods to reduce the app package size:  </span><br><span class="line"></span><br><span class="line">##### Configure so compression options  </span><br><span class="line">By compressing so libraries, the app package size can be reduced. In scenarios with multiple packages (HAP, HSP), use HSP (Harmony Shared Package) to dynamically share code/resources among multiple packages, eliminating duplicate copies caused by HAR (Harmony Archive) static shared packages.  </span><br><span class="line"></span><br><span class="line">**Configuration method**: https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/module-configuration-file.md  </span><br><span class="line">Modify the `compressNativeLibs` field in the module configuration file `module.json5` to `true`:  </span><br><span class="line">```json5</span><br><span class="line">&#123;</span><br><span class="line">  &quot;module&quot;: &#123;</span><br><span class="line">    // ...</span><br><span class="line">    &quot;compressNativeLibs&quot;: true // Indicate that libs should be packaged in compressed form</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">##### So compression effect  </span><br><span class="line">Taking the default C++ library in DevEco Studio as an example, the size comparison before/after compression is as follows:  </span><br><span class="line">| File Name | Original Size | Compressed Size | Compression Rate |  </span><br><span class="line">|-----------|---------------|-----------------|------------------|  </span><br><span class="line">| armeabi-v7a/libc++_shared.so | 1,108k | 386k | 34% |  </span><br><span class="line"></span><br><span class="line">##### Use HSP to share code/resources in multi-package scenarios  </span><br><span class="line">The system provides two shared packages: HAR (static) and HSP (dynamic).  </span><br><span class="line">- HAR code/resources are compiled with the user, leading to duplicate copies in multiple users&#x27; outputs.  </span><br><span class="line">- HSP code/resources are independently compiled, with only one copy existing in a process at runtime.  </span><br><span class="line"></span><br><span class="line">In multi-package scenarios, using HAR for sharing causes redundant copies. Replacing HAR with HSP can reduce the package size when the total size of shared resources exceeds HSP (11k).  </span><br><span class="line"></span><br><span class="line">##### Use scanning tools to analyze app packages  </span><br><span class="line">Scanning tools can:  </span><br><span class="line">- Scan duplicate files.  </span><br><span class="line">- Identify files exceeding specified sizes.  </span><br><span class="line">- Statistically analyze the total size and proportion of each file type.  </span><br><span class="line"></span><br><span class="line">**Optimization measures based on scan results**:  </span><br><span class="line">- Remove duplicate resources within the same package.  </span><br><span class="line">- Use HSP to reuse duplicate resources across multi-packages.  </span><br><span class="line">- Compress large files (e.g., JPG, PNG, GIF).  </span><br><span class="line">- Compress so files by configuring compression options.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. Issues with Tabs nested in Grid in HarmonyOS?  </span><br><span class="line">When using a Grid container in TabContent, the dynamic number of Grid elements causes inconsistent TabContent heights (the height of the TabContent with the most elements is applied to all).  </span><br><span class="line"></span><br><span class="line">**Solution**:  </span><br><span class="line">The TabContent component does not support universal height settings, as its height is determined by the Tabs parent component and TabBar. The Grid component can achieve adaptive height by setting `maxCount` (which acts as a height control switch). For details, refer to:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-V5#example6  </span><br><span class="line"></span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State numbers: string[] = [];</span><br><span class="line"></span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line">    for (let i = 1; i &lt;= 35; i++) &#123;</span><br><span class="line">      this.numbers.push(i + &#x27;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Scroll() &#123;</span><br><span class="line">      Column(&#123; space: 5 &#125;) &#123;</span><br><span class="line">        Blank();</span><br><span class="line">        Text(&#x27;rowsTemplate and columnsTemplate are not set; layoutDirection, maxcount, minCount, and cellLength take effect&#x27;)</span><br><span class="line">          .fontSize(15)</span><br><span class="line">          .fontColor(0xCCCCCC)</span><br><span class="line">          .width(&#x27;90%&#x27;);</span><br><span class="line">        Grid() &#123;</span><br><span class="line">          ForEach(this.numbers, (day: string) =&gt; &#123;</span><br><span class="line">            GridItem() &#123;</span><br><span class="line">              Text(day).fontSize(16).backgroundColor(0xF9CF93);</span><br><span class="line">            &#125;.width(40).height(80).borderWidth(2).borderColor(Color.Red);</span><br><span class="line">          &#125;, (day: string) =&gt; day);</span><br><span class="line">        &#125;</span><br><span class="line">        .columnsGap(10)</span><br><span class="line">        .rowsGap(10)</span><br><span class="line">        .backgroundColor(0xFAEEE0)</span><br><span class="line">        .maxCount(6)</span><br><span class="line">        .minCount(2)</span><br><span class="line">        .cellLength(0)</span><br><span class="line">        .layoutDirection(GridDirection.Row)</span><br><span class="line">        .backgroundColor(Color.Blue);</span><br><span class="line">      &#125;.width(&#x27;90%&#x27;).margin(&#123; top: 5, left: 5, right: 5 &#125;).align(Alignment.Center);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. Are there best practices or demos for aging adaptation in HarmonyOS?  </span><br><span class="line">When the system font size is adjusted, the app layout may become ugly. It is desired to limit the font size within a specific range (min/max) regardless of system settings.  </span><br><span class="line"></span><br><span class="line">```typescript</span><br><span class="line">// xxx.ets</span><br><span class="line">import measure from &#x27;@ohos.measure&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct TextInputExample &#123;</span><br><span class="line">  @State text: string = &#x27;&#x27;;</span><br><span class="line">  @State truncatedHint: string = &quot;Text not truncated&quot;;</span><br><span class="line">  controller: TextInputController = new TextInputController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      TextInput(&#123; text: this.text, placeholder: &#x27;input your word...&#x27;, controller: this.controller &#125;)</span><br><span class="line">        .placeholderColor(Color.Grey)</span><br><span class="line">        .placeholderFont(&#123; size: 14, weight: 400 &#125;)</span><br><span class="line">        .caretColor(Color.Blue)</span><br><span class="line">        .width(400)</span><br><span class="line">        .height(40)</span><br><span class="line">        .margin(20)</span><br><span class="line">        .fontSize(14)</span><br><span class="line">        .fontColor(Color.Black)</span><br><span class="line">        .onChange((value: string) =&gt; &#123;</span><br><span class="line">          this.text = value;</span><br><span class="line">          let textSizeShow1: SizeOptions = measure.measureTextSize(&#123;</span><br><span class="line">            textContent: this.text,</span><br><span class="line">            constraintWidth: 100,</span><br><span class="line">            fontSize: 14,</span><br><span class="line">            overflow: TextOverflow.Ellipsis,</span><br><span class="line">            maxLines: 2</span><br><span class="line">          &#125;);</span><br><span class="line">          let textSizeShow2: SizeOptions = measure.measureTextSize(&#123;</span><br><span class="line">            textContent: this.text + &quot; &quot;,</span><br><span class="line">            constraintWidth: 100,</span><br><span class="line">            fontSize: 14,</span><br><span class="line">            overflow: TextOverflow.Ellipsis,</span><br><span class="line">            maxLines: 2000000</span><br><span class="line">          &#125;);</span><br><span class="line">          console.log(&quot;tag textSizeShow1.height=&quot; + textSizeShow1.height);</span><br><span class="line">          console.log(&quot;tag textSizeShow2.height=&quot; + textSizeShow2.height);</span><br><span class="line"></span><br><span class="line">          if (textSizeShow2 &amp;&amp; textSizeShow1 &amp;&amp; textSizeShow2?.height &amp;&amp; textSizeShow1?.height &amp;&amp; (textSizeShow2?.height &gt; textSizeShow1?.height)) &#123;</span><br><span class="line">            console.log(&quot;tag Text truncated&quot;);</span><br><span class="line">            this.truncatedHint = &quot;Text truncated&quot;;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            console.log(&quot;tag Text not truncated&quot;);</span><br><span class="line">            this.truncatedHint = &quot;Text not truncated&quot;;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      Text(this.text)</span><br><span class="line">        .maxLines(2)</span><br><span class="line">        .width(100)</span><br><span class="line">        .textOverflow(&#123; overflow: TextOverflow.Ellipsis &#125;)</span><br><span class="line">        .border(&#123; width: 1 &#125;)</span><br><span class="line">        .minFontSize(14)</span><br><span class="line">        .maxFontSize(24);</span><br><span class="line">      Text(this.truncatedHint);</span><br><span class="line">    &#125;.width(&#x27;100%&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. Release package compilation failed?  </span><br></pre></td></tr></table></figure>
<p>hvigor ERROR: Failed ::PackageApp…<br>hvigor ERROR: Tools execution failed.<br>2024&#x2F;06&#x2F;17 16:55:38.923 - Ohos BundleTool [Error]: debug is different.<br>2024&#x2F;06&#x2F;17 16:55:38.923 - Ohos BundleTool [Error]: some app variable is different.<br>2024&#x2F;06&#x2F;17 16:55:38.923 - Ohos BundleTool [Error]: Compressor::compressAppMode compress failed.<br>2024&#x2F;06&#x2F;17 16:55:38.926 - Ohos BundleTool [Error]: Compressor::compressProcess Bundle exception.<br>2024&#x2F;06&#x2F;17 16:55:38.926 - Ohos BundleTool [Error]: Compressor::compressProcess compress failed.<br>2024&#x2F;06&#x2F;17 16:55:38.926 - Ohos BundleTool [Error]: CompressEntrance::main exit, compress failed<br>Detail: Please check the message from tools.<br>hvigor ERROR: BUILD FAILED in 23 s 837 ms</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**Cause**: Inconsistent `vendor` fields in `app.json5` of multi-module references.  </span><br><span class="line"></span><br><span class="line">**Troubleshooting steps**:  </span><br><span class="line">1. In File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Hvigor, set Use log level to Debug.  </span><br><span class="line">2. Rebuild the app.  </span><br><span class="line">3. Search the build log for &quot;app_packing_tool&quot; parameters (–hap-path, –hsp-path) to identify all dependent haps/hsps.  </span><br><span class="line">4. Ensure consistent `vendor` fields across haps/hsps.  </span><br><span class="line"></span><br><span class="line">Example build log snippet:  </span><br></pre></td></tr></table></figure>
<p>hvigor DEBUG BasePackAppTask Use tool [PackageApp][‘java’,‘-Dfile.encoding&#x3D;GBK’,‘-jar’,<br>‘D:\DevEco_pakage\Huawei\harmonyos\HarmonyOS-NEXT-DP1\base\toolchains\lib\app_packing_tool.jar’,‘–mode’,‘app’,‘–pack-info-path’,‘D:\demo\MyApplication\build\outputs\default\pack.info’,‘–hap-path’,<br>‘D:\demo\MyApplication\entry\build\default\outputs\default\app\entry-default.hap’,‘–hsp-path’,<br>‘D:\demo\MyApplication\library\build\default\outputs\default\app\library-default.hsp’,‘–force’,‘true’,‘–out-path’,<br>‘D:\demo\MyApplication\build\outputs\default\MyApplication-default-unsigned.app’,‘–main-module-limit’,‘2’,‘–normal-module-limit’,‘2’]</p>
<pre><code>
For specific configuration procedures, refer to: https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-internalrelease-0000001756878768
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41126-Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41126-Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Node Destruction Issues, Distinguishing Between Mobile and Pad, Navigation Routing Problems, Tabs Component Width, and How to Monitor Maps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:35:32 / Modified: 09:36:10" itemprop="dateCreated datePublished" datetime="2025-06-29T09:35:32+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps"><a href="#Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Node Destruction Issues, Distinguishing Between Mobile and Pad, Navigation Routing Problems, Tabs Component Width, and How to Monitor Maps"></a>[Daily HarmonyOS Next Knowledge] Node Destruction Issues, Distinguishing Between Mobile and Pad, Navigation Routing Problems, Tabs Component Width, and How to Monitor Maps</h1><h4 id="1-In-HarmonyOS-if-only-the-root-node’s-dispose-is-called-can-its-child-nodes-be-destroyed-or-do-child-nodes-need-to-be-traversed-and-their-dispose-methods-executed-for-proper-destruction"><a href="#1-In-HarmonyOS-if-only-the-root-node’s-dispose-is-called-can-its-child-nodes-be-destroyed-or-do-child-nodes-need-to-be-traversed-and-their-dispose-methods-executed-for-proper-destruction" class="headerlink" title="1. In HarmonyOS, if only the root node’s dispose is called, can its child nodes be destroyed, or do child nodes need to be traversed and their dispose methods executed for proper destruction?"></a>1. In HarmonyOS, if only the root node’s dispose is called, can its child nodes be destroyed, or do child nodes need to be traversed and their dispose methods executed for proper destruction?</h4><p>Frontend-referenced objects need to be disposed, and builderNodes and FrameNodes created with new also require dispose. Calling only the root node’s dispose cannot guarantee that child nodes will be properly released.  </p>
<h4 id="2-How-to-distinguish-between-mobile-and-pad-devices-in-the-Web-UserAgent-of-HarmonyOS"><a href="#2-How-to-distinguish-between-mobile-and-pad-devices-in-the-Web-UserAgent-of-HarmonyOS" class="headerlink" title="2. How to distinguish between mobile and pad devices in the Web UserAgent of HarmonyOS?"></a>2. How to distinguish between mobile and pad devices in the Web UserAgent of HarmonyOS?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#ZH-CN_TOPIC_0000001884757262__%E5%A6%82%E4%BD%95%E6%9F%A5%E8%AF%A2%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#ZH-CN_TOPIC_0000001884757262__%E5%A6%82%E4%BD%95%E6%9F%A5%E8%AF%A2%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B</a>  </p>
<ol>
<li><p>Query device type via command line.<br>Query the specified system parameter (const.product.devicetype) via command line to determine the device type:  </p>
<pre><code class="language-bash"># Method 1  
hdc shell param get &quot;const.product.devicetype&quot;  
# Method 2  
hdc shell cat /etc/param/ohos.para | grep const.product.devicetype  
</code></pre>
</li>
<li><p>Query device type during application development.  </p>
<pre><code class="language-typescript">import &#123; deviceInfo &#125; from &#39;@kit.BasicServicesKit&#39;;

@Entry
@Component
struct GetDeviceTypeSample &#123;
  @State deviceType: string = &#39;unknown&#39;;

  aboutToAppear() &#123;
    this.deviceType = deviceInfo.deviceType;
  &#125;

  build() &#123;
    Column() &#123;
      Text(this.deviceType).fontSize(24);
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
</li>
</ol>
<h4 id="3-Navigation-routing-issues-in-HarmonyOS"><a href="#3-Navigation-routing-issues-in-HarmonyOS" class="headerlink" title="3. Navigation routing issues in HarmonyOS?"></a>3. Navigation routing issues in HarmonyOS?</h4><p>When navigating from the Index page to the PageOne page, the navigation bar is hidden (hideNavBar), but why does a white screen appear when returning from PageOne to the previous page?  </p>
<pre><code class="language-typescript">// Index.ets  
@Entry
@Component
struct Index &#123;
  @State hideNavBar: boolean = false;
  private pageStack: NavPathStack = new NavPathStack();

  build() &#123;
    Navigation(this.pageStack) &#123;
      Column() &#123;
        Button(&#39;Jump to PageOne, hide NavBar&#39;)
          .onClick(() =&gt; &#123;
            this.hideNavBar = true;
            this.pageStack.replacePath(&#123;
              name: &#39;PageOne&#39;
            &#125;);
          &#125;);
      &#125;
      .height(&#39;100%&#39;)
      .justifyContent(FlexAlign.Center);
    &#125;
    .hideNavBar(this.hideNavBar)
    .hideTitleBar(true)
    .hideBackButton(true);
  &#125;
&#125;

// PageOne.ets  
@Builder
function PageOneBuilder() &#123;
  PageOne();
&#125;

@Component
export struct PageOne &#123;
  pageStack: NavPathStack | null = null;
  build() &#123;
    NavDestination() &#123;
      Column() &#123;
        Button(&#39;Return to previous page&#39;)
          .onClick(() =&gt; &#123;
            // Return to the previous page here  
            this.pageStack?.pop?.();
          &#125;);
      &#125;.height(&#39;100%&#39;);
    &#125;
    .hideTitleBar(true)
    .onReady((ctx: NavDestinationContext) =&gt; &#123;
      this.pageStack = ctx.pathStack;
    &#125;);
  &#125;
&#125;
</code></pre>
<p>API reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5</a>  </p>
<p><strong>White screen cause</strong>: Hiding the navigation bar via hideNavBar(true) leads to this issue. Setting it to false restores the previous page’s navigation bar buttons. Adding a Button component to Navigation ensures visibility even when Navigation is hidden. Refer to the API documentation for details.  </p>
<h4 id="4-Width-issues-with-the-HarmonyOS-Tabs-component"><a href="#4-Width-issues-with-the-HarmonyOS-Tabs-component" class="headerlink" title="4. Width issues with the HarmonyOS Tabs component?"></a>4. Width issues with the HarmonyOS Tabs component?</h4><p>Documentation states that the Tabs component’s indicator matches the view width. The app’s home page has numerous columns, with a semi-transparent cover strip and button on the right, causing operational issues—some columns may be unreachable. Is there a way to separate these elements or use alternative components?  </p>
<p>Refer to the following demo:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct tabTest &#123;
  @State tabArray: Array&lt;number&gt; = [0, 1, 2, 3, 4];
  @State focusIndex: number = 0;
  @State pre: number = 0;
  @State index: number = 0;
  private controller: TabsController = new TabsController();
  @State test: boolean = false;
  @State animationDuration: number = 300;
  @State indicatorLeftMargin: number = 0;
  @State indicatorWidth: number = 0;
  private tabsWidth: number = 0;
  private tabWidth: number = 0;
  private scrollerForScroll: Scroller = new Scroller();

  // Individual tab  
  @Builder
  Tab(tabName: string, tabItem: number, tabIndex: number) &#123;
    Row(&#123; space: 20 &#125;) &#123;
      Text(tabName)
        .fontSize(18)
        .fontColor(tabIndex === this.focusIndex ? Color.Blue : Color.Black)
        .id(tabIndex.toString())
        .onAreaChange((oldValue: Area, newValue: Area) =&gt; &#123;
          if (this.focusIndex === tabIndex &amp;&amp; (this.indicatorLeftMargin === 0 || this.indicatorWidth === 0)) &#123;
            if (newValue.position.x !== undefined) &#123;
              let positionX = Number.parseFloat(newValue.position.x.toString());
              this.indicatorLeftMargin = Number.isNaN(positionX) ? 0 : positionX;
            &#125;
            let width = Number.parseFloat(newValue.width.toString());
            this.tabWidth = Number.isNaN(width) ? 0 : width;
            this.indicatorWidth = this.tabWidth;
          &#125;
        &#125;);
    &#125;
    .justifyContent(FlexAlign.Center)
    .constraintSize(&#123; minWidth: 35 &#125;)
    .width(100)
    .height(30)
    .onClick(() =&gt; &#123;
      this.controller.changeIndex(tabIndex);
      this.focusIndex = tabIndex;
    &#125;)
    .backgroundColor(&quot;#ffb7b7b7&quot;);
  &#125;

  @Builder
  textTest(textName: string) &#123;
    Row(&#123; space: 20 &#125;) &#123;
      Text(textName).fontSize(18);
    &#125;
    .justifyContent(FlexAlign.Center)
    .constraintSize(&#123; minWidth: 35 &#125;)
    .height(30)
    .backgroundColor(&quot;#ffb7b7b7&quot;);
  &#125;

  build() &#123;
    Column() &#123;
      Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;
        Column() &#123;
          // Tabs  
          Row(&#123; space: 8 &#125;) &#123;
            List(&#123; space: 20, initialIndex: 0, scroller: this.scrollerForScroll &#125;) &#123;
              ForEach(this.tabArray, (item: number, index: number) =&gt; &#123;
                ListItem() &#123;
                  this.Tab(&quot;Tab &quot; + item, item, index);
                &#125;
              &#125;, (item: string) =&gt; item);
            &#125;
            .listDirection(Axis.Horizontal)
            .height(30)
            .width(&#39;80%&#39;)
            .friction(0.6)
            .alignListItem(ListItemAlign.Start)
            .scrollBar(BarState.Off)
            .width(&#39;80%&#39;)
            .backgroundColor(&quot;#ffb7b7b7&quot;)
            .onScroll((xOffset: number, yOffset: number) =&gt; &#123;
              this.indicatorLeftMargin -= xOffset;
            &#125;);
            this.textTest(&#39;More&#39;);
          &#125;
          .alignItems(VerticalAlign.Bottom)
          .width(&#39;100%&#39;)
          .backgroundColor(&quot;#ffb7b7b7&quot;);
        &#125;
        .alignItems(HorizontalAlign.Start)
        .width(&#39;100%&#39;);

        Column()
          .height(2)
          .width(this.indicatorWidth)
          .margin(&#123; left: this.indicatorLeftMargin, top: 30 &#125;)
          .backgroundColor(Color.Blue);
        Column()
          .height(10)
          .width(&quot;20%&quot;)
          .margin(&#123; left: &#39;80%&#39;, top: 28 &#125;)
          .backgroundColor(&quot;#ffb7b7b7&quot;);
      &#125;
      .height(40)
      .width(&#39;100%&#39;)
      .backgroundColor(&quot;#ffb7b7b7&quot;);
      // Tabs  
      Tabs(&#123; barPosition: BarPosition.Start, controller: this.controller &#125;) &#123;
        ForEach(this.tabArray, (item: number, index: number) =&gt; &#123;
          TabContent() &#123;
            Text(&#39;Content of Page &#39; + item)
              .height(300)
              .width(&#39;100%&#39;)
              .fontSize(30);
          &#125;
          .backgroundColor(Color.White);
        &#125;, (item: string) =&gt; item);
      &#125;
      .onAreaChange((oldValue: Area, newValue: Area) =&gt; &#123;
        let width = Number.parseFloat(newValue.width.toString());
        this.tabsWidth = Number.isNaN(width) ? 0 : width;
      &#125;)
      .width(&#39;100%&#39;)
      .barHeight(0)
      .animationDuration(100)
      .onChange((index: number) =&gt; &#123;
        console.log(&#39;foo change&#39;);
        this.focusIndex = index;
        this.scrollerForScroll.scrollToIndex(index - 1, true);
      &#125;)
      .onAnimationStart((index: number, targetIndex: number, event: TabsAnimationEvent) =&gt; &#123;
        // Callback triggered at the start of the tab switch animation. The underline slides with the page.  
        this.focusIndex = targetIndex;
        let targetIndexInfo = this.getTextInfo(targetIndex);
        this.startAnimateTo(this.animationDuration, targetIndexInfo.left, targetIndexInfo.width);
      &#125;)
      .onAnimationEnd((index: number, event: TabsAnimationEvent) =&gt; &#123;
        // Callback triggered at the end of the tab switch animation. The underline animation stops.  
        let currentIndicatorInfo = this.getCurrentIndicatorInfo(index, event);
        this.startAnimateTo(0, currentIndicatorInfo.left, currentIndicatorInfo.width);
      &#125;)
      .onGestureSwipe((index: number, event: TabsAnimationEvent) =&gt; &#123;
        // Callback triggered frame-by-frame during page swipe.  
        let currentIndicatorInfo = this.getCurrentIndicatorInfo(index, event);
        this.focusIndex = currentIndicatorInfo.index;
        this.indicatorLeftMargin = currentIndicatorInfo.left;
        this.tabWidth = currentIndicatorInfo.width;
        this.indicatorWidth = currentIndicatorInfo.width;
      &#125;);
    &#125;
    .height(&#39;100%&#39;);
  &#125;

  private getTextInfo(index: number): Record&lt;string, number&gt; &#123;
    let strJson = getInspectorByKey(index.toString());
    try &#123;
      let obj: Record&lt;string, string&gt; = JSON.parse(strJson);
      let rectInfo: number[][] = JSON.parse(&#39;[&#39; + obj.$rect + &#39;]&#39;);
      return &#123; &#39;left&#39;: px2vp(rectInfo[0][0]), &#39;width&#39;: px2vp(rectInfo[1][0] - rectInfo[0][0]) &#125;;
    &#125; catch (error) &#123;
      return &#123; &#39;left&#39;: 0, &#39;width&#39;: 0 &#125;;
    &#125;
  &#125;

  private getCurrentIndicatorInfo(index: number, event: TabsAnimationEvent): Record&lt;string, number&gt; &#123;
    let nextIndex = index;
    if (index &gt; 0 &amp;&amp; event.currentOffset &gt; 0) &#123;
      nextIndex--;
    &#125; else if (index &lt; 4 &amp;&amp; event.currentOffset &lt; 0) &#123;
      nextIndex++;
    &#125;
    let indexInfo = this.getTextInfo(index);
    let nextIndexInfo = this.getTextInfo(nextIndex);
    let swipeRatio = Math.abs(event.currentOffset / this.tabsWidth);
    let currentIndex = swipeRatio &gt; 0.5 ? nextIndex : index; // Switch to the next tab if the page swipe exceeds half.  
    let currentLeft = indexInfo.left + (nextIndexInfo.left - indexInfo.left) * swipeRatio;
    let currentWidth = indexInfo.width + (nextIndexInfo.width - indexInfo.width) * swipeRatio;
    return &#123; &#39;index&#39;: currentIndex, &#39;left&#39;: currentLeft, &#39;width&#39;: currentWidth &#125;;
  &#125;

  private startAnimateTo(duration: number, leftMargin: number, width: number) &#123;
    animateTo(&#123;
      duration: duration, // Animation duration  
      curve: Curve.Linear, // Animation curve  
      iterations: 1, // Number of plays  
      playMode: PlayMode.Normal, // Animation mode  
      onFinish: () =&gt; &#123;
        console.info(&#39;play end&#39;);
      &#125;
    &#125;, () =&gt; &#123;
      this.indicatorLeftMargin = leftMargin;
      this.tabWidth = width;
      this.indicatorWidth = width;
    &#125;);
  &#125;
&#125;
</code></pre>
<h4 id="5-How-to-monitor-Maps-in-HarmonyOS"><a href="#5-How-to-monitor-Maps-in-HarmonyOS" class="headerlink" title="5. How to monitor Maps in HarmonyOS?"></a>5. How to monitor Maps in HarmonyOS?</h4><p>Map variables can be decorated with @State. Currently, Map and Set types are supported, but HashMap is not.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41127-Daily-HarmonyOS-Next-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41127-Daily-HarmonyOS-Next-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Height Adaptation, Variable Declaration Specifications, Animation Cancellation, Signature Files, and Package Size Optimization-related</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:34:25 / Modified: 09:36:44" itemprop="dateCreated datePublished" datetime="2025-06-29T09:34:25+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related"><a href="#Daily-HarmonyOS-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Height Adaptation, Variable Declaration Specifications, Animation Cancellation, Signature Files, and Package Size Optimization-related"></a>[Daily HarmonyOS Knowledge] Web Height Adaptation, Variable Declaration Specifications, Animation Cancellation, Signature Files, and Package Size Optimization-related</h1><h4 id="1-How-to-Adapt-the-Height-of-a-HarmonyOS-Web-Page"><a href="#1-How-to-Adapt-the-Height-of-a-HarmonyOS-Web-Page" class="headerlink" title="1. How to Adapt the Height of a HarmonyOS Web Page?"></a>1. How to Adapt the Height of a HarmonyOS Web Page?</h4><p>When setting the height of a Web page to 100%, it is found that the height is inconsistent with that of the Web control. What needs to be set to make the page height consistent with the Web container height?</p>
<p>Currently, only two web layout modes are supported, namely Web layout following the system WebLayoutMode.NONE and Web adaptive webpage layout based on page size WebLayoutMode.FIT_CONTENT. The default is WebLayoutMode.NONE mode. Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabcontent-V5#layoutmode10%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabcontent-V5#layoutmode10%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Web(&#123; src: $rawfile(&#x27;index.html&#x27;), controller: this.controller &#125;)</span><br><span class="line">  .width(CommonConstants.WIDTH_OR_HEIGHT)</span><br><span class="line">  .layoutMode(WebLayoutMode.FIT_CONTENT)</span><br></pre></td></tr></table></figure>

<h4 id="2-Does-HarmonyOS-ArkTS-have-relevant-specifications-for-variable-type-declaration"><a href="#2-Does-HarmonyOS-ArkTS-have-relevant-specifications-for-variable-type-declaration" class="headerlink" title="2. Does HarmonyOS ArkTS have relevant specifications for variable type declaration?"></a>2. Does HarmonyOS ArkTS have relevant specifications for variable type declaration?</h4><p>Is it necessary to add variable types when declaring variables? Are the requirements consistent for different types? For example:<br>Is let result &#x3D; ‘’ required to be written as let result: string &#x3D; ‘’?<br>Is const TEST_RESULT &#x3D; ‘ok’ required to be written as const TEST_RESULT: string &#x3D; ‘ok’?<br>Are there differences between member variables and temporary variables?</p>
<p>Using let result &#x3D; ‘’; is sufficient, and the engine will infer the type based on the value. let and const are the same, and regardless of the type of variable, the type can be automatically inferred.</p>
<h4 id="3-How-to-cancel-the-animateTo-or-animation-in-HarmonyOS"><a href="#3-How-to-cancel-the-animateTo-or-animation-in-HarmonyOS" class="headerlink" title="3. How to cancel the animateTo or animation in HarmonyOS?"></a>3. How to cancel the animateTo or animation in HarmonyOS?</h4><p>I didn’t see the relevant cancellation method in the document.</p>
<p>If you need to interrupt the animation, you can refer to this demo, which sets an animation with a value of 0 to interrupt the previous animation.<br>Reference demo:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Entry</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State clickNumber: number = 0;</span><br><span class="line">  @State myScale: number = 1.0;</span><br><span class="line">  uiContext: UIContext | undefined = undefined;</span><br><span class="line">  imageIndex: number = 0</span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line">    this.uiContext = this.getUIContext?.();</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Stack(&#123; alignContent: Alignment.TopEnd &#125;) &#123;</span><br><span class="line">      // Wooden fish picture</span><br><span class="line">      Image($r(&#x27;app.media.startIcon&#x27;))</span><br><span class="line">        .zIndex(2)</span><br><span class="line">        .width(200)</span><br><span class="line">        .height(200)</span><br><span class="line">        .margin(&#123; top: 300, right: 130 &#125;)</span><br><span class="line">        .scale(&#123; x: this.myScale, y: this.myScale &#125;)// .clickEffect(&#123;level:ClickEffectLevel.LIGHT,scale:0.5&#125;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          if (!this.uiContext) &#123;</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          // Set an animation with a display animation of 0 to interrupt the previous animation</span><br><span class="line">          animateTo(&#123; duration: 0, iterations: 1&#125;, () =&gt; &#123;</span><br><span class="line">            console.info(&#x27;this.dur0xxx---&#x27;, this.myScale)</span><br><span class="line">            this.myScale = 1;</span><br><span class="line">          &#125;)</span><br><span class="line">          animateTo(&#123; duration: 1500, iterations: 1 ,onFinish: () =&gt; &#123;</span><br><span class="line">            animateTo(&#123; duration: 1500, iterations: 1&#125;, () =&gt;&#123;</span><br><span class="line">              console.info(&#x27;this.dur2---&#x27;, this.myScale)</span><br><span class="line">              this.myScale = 1;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;&#125;, () =&gt; &#123;</span><br><span class="line">            console.info(&#x27;this.dur1---&#x27;, this.myScale)</span><br><span class="line">            this.myScale = 0.8;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.backgroundColor(Color.Black)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-How-to-configure-to-use-one-signature-file-in-debug-mode-and-another-in-release-mode-in-build-profile"><a href="#4-How-to-configure-to-use-one-signature-file-in-debug-mode-and-another-in-release-mode-in-build-profile" class="headerlink" title="4. How to configure to use one signature file in debug mode and another in release mode in build-profile?"></a>4. How to configure to use one signature file in debug mode and another in release mode in build-profile?</h4><p>In the project-level build-profile.json5 file, add customized products and use different signature certificates respectively.</p>
<ol>
<li>Configure the signature file</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;signingConfigs&quot;: [ &#123; &quot;name&quot;: &quot;default&quot;, &quot;type&quot;: &quot;HarmonyOS&quot;, &quot;material&quot;: &#123; &quot;certpath&quot;: &quot;&quot;, &quot;storePassword&quot;: &quot;&quot;, &quot;keyAlias&quot;: &quot;&quot;, &quot;keyPassword&quot;: &quot;&quot;, &quot;profile&quot;: &quot;b&quot;, &quot;signAlg&quot;: &quot;&quot;, &quot;storeFile&quot;: &quot;&quot; &#125; &#125;, &#123; &quot;name&quot;: &quot;useForRelease&quot;, &quot;type&quot;: &quot;HarmonyOS&quot;, &quot;material&quot;: &#123; &quot;certpath&quot;: &quot;&quot;, &quot;storePassword&quot;: &quot;&quot;, &quot;keyAlias&quot;: &quot;&quot;, &quot;keyPassword&quot;: &quot;&quot;, &quot;profile&quot;: &quot;b&quot;, &quot;signAlg&quot;: &quot;&quot;, &quot;storeFile&quot;: &quot;&quot; &#125; &#125;, &#123; &quot;name&quot;: &quot;useForDebug&quot;, &quot;type&quot;: &quot;HarmonyOS&quot;, &quot;material&quot;: &#123; &quot;certpath&quot;: &quot;&quot;, &quot;storePassword&quot;: &quot;&quot;, &quot;keyAlias&quot;: &quot;&quot;, &quot;keyPassword&quot;: &quot;&quot;, &quot;profile&quot;: &quot;b&quot;, &quot;signAlg&quot;: &quot;&quot;, &quot;storeFile&quot;: &quot;&quot; &#125; ] </span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Configure</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;products&quot;: [ &#123; &quot;name&quot;: &quot;default&quot;, &quot;signingConfig&quot;: &quot;default&quot;, &quot;compatibleSdkVersion&quot;: &quot;5.0.0(12)&quot;, &quot;runtimeOS&quot;: &quot;HarmonyOS&quot;, &#125;, &#123; &quot;name&quot;: &quot;useForDebug&quot;, &quot;signingConfig&quot;: &quot;useForDebug&quot;, &quot;compatibleSdkVersion&quot;: &quot;5.0.0(12)&quot;, &quot;runtimeOS&quot;: &quot;HarmonyOS&quot;, &#125;, &#123; &quot;name&quot;: &quot;useForRelease&quot;, &quot;signingConfig&quot;: &quot;useForRelease&quot;, &quot;compatibleSdkVersion&quot;: &quot;5.0.0(12)&quot;, &quot;runtimeOS&quot;: &quot;HarmonyOS&quot;, &#125; ],</span><br></pre></td></tr></table></figure>
<p>Click the Product button in the upper right corner. Select useForDebug in Product to choose the hap using the debug certificate, and select useForRelease-&gt;apply. The built APP will use the release certificate. Do not delete the default configuration item.</p>
<ol start="3">
<li>In the module, add the two parameters useForDebug and useForRelease to the applytoProducts attribute “modules”:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ &#123; &quot;name&quot;: &quot;entry&quot;, &quot;srcPath&quot;: &quot;./entry&quot;, &quot;targets&quot;: [ &#123; &quot;name&quot;: &quot;default&quot;, &quot;applyToProducts&quot;: [ &quot;default&quot;, &quot;default_debug&quot;, &quot;default_realse&quot; ] &#125; ] &#125; ] </span><br></pre></td></tr></table></figure>

<h4 id="5-What-is-the-difference-between-configuring-dependent-third-party-applications-in-the-global-configuration-oh-package-and-configuring-them-in-the-module’s-oh-package-and-will-it-affect-the-package-size"><a href="#5-What-is-the-difference-between-configuring-dependent-third-party-applications-in-the-global-configuration-oh-package-and-configuring-them-in-the-module’s-oh-package-and-will-it-affect-the-package-size" class="headerlink" title="5. What is the difference between configuring dependent third-party applications in the global configuration oh-package and configuring them in the module’s oh-package, and will it affect the package size?"></a>5. What is the difference between configuring dependent third-party applications in the global configuration oh-package and configuring them in the module’s oh-package, and will it affect the package size?</h4><p>Does configuring third-party library dependencies globally or in the module affect the package size?</p>
<p>Configuring dependent third-party applications in the global oh-package can be used throughout the entire project, while configuring them in the module’s oh-package can only be used in that module. Therefore, global configuration will affect the package size of the entire project, while module configuration will only affect the package size of that module.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41128-Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41128-Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] userAgent Identification, StatusBar Color, Operating the Same Object in taskpool, Scroll Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:33:11 / Modified: 09:34:23" itemprop="dateCreated datePublished" datetime="2025-06-29T09:33:11+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component"><a href="#Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component" class="headerlink" title="[Daily HarmonyOS Next Knowledge] userAgent Identification, StatusBar Color, Operating the Same Object in taskpool, Scroll Component"></a>[Daily HarmonyOS Next Knowledge] userAgent Identification, StatusBar Color, Operating the Same Object in taskpool, Scroll Component</h1><h4 id="1-What-values-can-be-obtained-by-HarmonyOS-window-navigator-userAgent-toLowerCase"><a href="#1-What-values-can-be-obtained-by-HarmonyOS-window-navigator-userAgent-toLowerCase" class="headerlink" title="1. What values can be obtained by HarmonyOS window.navigator.userAgent.toLowerCase()?"></a>1. What values can be obtained by HarmonyOS window.navigator.userAgent.toLowerCase()?</h4><p>H5 cannot identify through window.navigator.userAgent for the time being, and can only be identified by injecting fixed fields natively. You can refer to this document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/forum/topic/0201145720536373106?fid=0101587866109860105">https://developer.huawei.com/consumer/cn/forum/topic/0201145720536373106?fid=0101587866109860105</a>  </p>
<h4 id="2-How-to-dynamically-set-the-font-color-in-the-StatusBar-in-HarmonyOS"><a href="#2-How-to-dynamically-set-the-font-color-in-the-StatusBar-in-HarmonyOS" class="headerlink" title="2. How to dynamically set the font color in the StatusBar in HarmonyOS?"></a>2. How to dynamically set the font color in the StatusBar in HarmonyOS?</h4><p>The APP has set an immersive layout, but the status bar font color at the top does not change when switching the theme color. How to handle this? The following code shows our setting method:  </p>
<pre><code class="language-typescript">private checkDarkMode(darkModeConfig: DarkModeSettingsConfig): void &#123;
  AppStorage.setOrCreate&lt;DarkModeSettingsConfig&gt;(&#39;darkModeConfig&#39;, darkModeConfig);
  let applicationContext = getContext(this).getApplicationContext();
  let colorMode: ConfigurationConstant.ColorMode = ConfigurationConstant.ColorMode.COLOR_MODE_NOT_SET;
  if (darkModeConfig.switchType === DarkModeType.FOLLOW_UP) &#123;
    colorMode = (getContext(this) as common.UIAbilityContext).config.colorMode ||
    ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT;
  &#125; else if (darkModeConfig.switchType === DarkModeType.DARK) &#123;
    colorMode = ConfigurationConstant.ColorMode.COLOR_MODE_DARK;
  &#125; else &#123;
    colorMode = ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT;
  &#125;
  AppStorage.setOrCreate(&#39;currentColorMode&#39;, colorMode);
  applicationContext.setColorMode(colorMode);
  try &#123;
    AppUtil.getMainWindow()?.setWindowSystemBarProperties(&#123;
      statusBarContentColor: colorMode === ConfigurationConstant.ColorMode.COLOR_MODE_DARK ?  &#39;0xffffffff&#39; : &#39;0x00000000&#39;,
    &#125;, (err: BusinessError) =&gt; &#123;
      const errCode: number = err.code;
      if (errCode) &#123;
        console.error(&#39;Failed to set the system bar properties. Cause: &#39; + JSON.stringify(err));
        return;
      &#125;
      console.info(&#39;Succeeded in setting the system bar properties.&#39;);
    &#125;);
  &#125; catch (exception) &#123;
    console.error(&#39;Failed to set the system bar properties. Cause: &#39; + JSON.stringify(exception));
  &#125;
&#125;
</code></pre>
<p>Currently, setting the status bar color uses the window’s API, which adjusts the dimension from the entire window. To achieve page-level control, you need to adjust it in the page’s lifecycle and directly call the setWindowSystemBarProperties method on the page that needs to change. You can refer to the official document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9</a>  </p>
<p>Sample code is as follows:  </p>
<pre><code class="language-typescript">onPageShow(): void &#123;
  window.getLastWindow(getContext(), (err, data) =&gt; &#123;
    let win: window.Window;
    if (err.code) &#123;
      console.error(&quot;error code :&quot; + JSON.stringify(err.code))
      return;
    &#125;
    try &#123;
      win = data;
      // Set the window to full-screen mode
      win.setWindowLayoutFullScreen(true);
      // Set the status bar
      win.setWindowSystemBarProperties(&#123;
        // Set the status bar color to another color
        statusBarColor: &#39;#00ff00&#39;,
        // Set the status bar text color to white
        statusBarContentColor: &#39;#353535&#39;
      &#125;)
      console.info(&#39;Immersive window with status bar set up&#39;)
    &#125; catch (expextion) &#123;
      console.error(&quot;error cause :&quot; + JSON.stringify(expextion))
    &#125;
  &#125;)
&#125;
// The demo is implemented using API10, and the complete demo is as follows:
import window1 from &#39;@ohos.window&#39;;
import &#123; BusinessError &#125; from &#39;@ohos.base&#39;;
import Stack from &#39;@ohos.util.Stack&#39;;


class StatusBarColor &#123;
  statusBarColor: string;
  statusBarContentColor: string

  constructor(statusBarColor: string, statusBarContentColor: string) &#123;
    // Status bar background
    this.statusBarColor = statusBarColor;
    // Status bar content
    this.statusBarContentColor = statusBarContentColor;
  &#125;
&#125;

export class StatusBarUtils &#123;
  static testNumber: number = 0;
  private static barColor: Stack&lt;StatusBarColor&gt; = new Stack();

  private static setBarColor(statusBarColor: StatusBarColor) &#123;
    let mainWindow: window1.Window | undefined = AppStorage.get(&quot;mainWindow&quot;)
    let sysBarProps: window1.SystemBarProperties = &#123;
      statusBarColor: statusBarColor.statusBarColor,
      statusBarContentColor: statusBarColor.statusBarContentColor,
    &#125;;
    mainWindow?.setWindowSystemBarProperties(sysBarProps, (err: BusinessError) =&gt; &#123;
      let errCode: number = err.code;
      if (errCode) &#123;
        console.error(&#39;[StaticUtils] Failed to set the system bar properties. Cause: &#39; + JSON.stringify(err));
        return;
      &#125;
      console.info(&#39;[StaticUtils] Succeeded in setting the system bar properties.&#39;);
    &#125;);
  &#125;

  static pushStatusColor(statusBarColor: string, statusBarContentColor: string) &#123;
    StatusBarUtils.barColor.push(new StatusBarColor(statusBarColor, statusBarContentColor))
    StatusBarUtils.setBarColor(StatusBarUtils.barColor.peek());
  &#125;

  static popStatusColor() &#123;
    if (!StatusBarUtils.barColor.isEmpty()) &#123;
      StatusBarUtils.barColor.pop();
      if (!StatusBarUtils.barColor.isEmpty()) &#123;
        StatusBarUtils.setBarColor(StatusBarUtils.barColor.peek());
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-How-to-operate-the-same-object-in-multiple-taskpools-in-HarmonyOS"><a href="#3-How-to-operate-the-same-object-in-multiple-taskpools-in-HarmonyOS" class="headerlink" title="3. How to operate the same object in multiple taskpools in HarmonyOS?"></a>3. How to operate the same object in multiple taskpools in HarmonyOS?</h4><p>The goal here is to jointly operate a cache class in multiple taskpool threads and populate values into the cache class. Since taskpool is thread-isolated, the @sendable annotation is used. After using the @sendable annotation, it is found that certain types of fields cannot be serialized. What is the solution? Or if @sendable is not used, are there other ways to operate the same cache object in multiple threads?  </p>
<p>Only SharedArrayBuffer sharing and @sendable are available, with no other methods.  </p>
<h4 id="4-Issues-with-HarmonyOS-scroll-components"><a href="#4-Issues-with-HarmonyOS-scroll-components" class="headerlink" title="4. Issues with HarmonyOS scroll components?"></a>4. Issues with HarmonyOS scroll components?</h4><ol>
<li><p>How to use the ontouch callback to handle the calculation of the y-axis offset distance for multiple fingers  </p>
</li>
<li><p>Why can’t a scroll nested in relative scroll? The relative contains 2 Row components, the first component is above the second component, and the second component has a height of 100%  </p>
</li>
<li><p>How to use the ontouch callback to handle the calculation of the y-axis offset for multiple fingers: The onActionUpdate method of the PanGesture event can be used to obtain the gesture offset and set the number of fingers triggering the swipe gesture. Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture-0000001815767760#ZH-CN_TOPIC_0000001815767760__%E4%BA%8B%E4%BB%B6">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture-0000001815767760#ZH-CN_TOPIC_0000001815767760__%E4%BA%8B%E4%BB%B6</a><br>If the ontouch callback must be used for processing, record the y-axis coordinate when the finger presses and when the finger lifts, then subtract the two to obtain the y-axis offset. For multiple fingers, the position of each finger will be recorded, which can be obtained through the touches array of the TouchEvent object, where the order of fingers is determined by the order of touching the screen.  </p>
</li>
<li><p>The problem that the RelativeContainer component cannot scroll: Set the second sub-component in the RelativeContainer to use the first sub-component as an anchor and position it below the first sub-component, and set the height attribute of the RelativeContainer to auto. The reason why it does not scroll with two Row components is that the RelativeContainer component itself is rendered starting from the upper-left corner of the screen, and parts exceeding the upper-left corner will be invisible or not rendered, resulting in no scrolling. Therefore, if the RelativeContainer component itself is to be scrollable, the sub-component anchor must be determined as the component at the upper-left corner of the screen.  </p>
</li>
<li><p>No callback when the scrollTo animation ends.</p>
</li>
</ol>
<h4 id="5-When-AppStorage-is-updated-in-HarmonyOS-using-it-in-a-mask-does-not-trigger-re-rendering"><a href="#5-When-AppStorage-is-updated-in-HarmonyOS-using-it-in-a-mask-does-not-trigger-re-rendering" class="headerlink" title="5. When AppStorage is updated in HarmonyOS, using it in a mask does not trigger re-rendering."></a>5. When AppStorage is updated in HarmonyOS, using it in a mask does not trigger re-rendering.</h4><p>When storage is updated, all components that use it will be updated. Therefore, the intention is to encapsulate a mask (overlay), reference the corresponding key, and open&#x2F;close the mask by toggling a switch (updating storage), but in fact, the update is not triggered.  </p>
<p>All parameters of custom pop-ups do not support dynamic refresh. @Link and @Prop have different refresh mechanisms: @Link is equivalent to reference passing, and @State will directly notify @Link after an update. It is recommended to use @Link here.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41129-Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41129-Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Text Filling Parent Control, Native Array Reception, JS Logic Execution Issue, UIAbility Context Problem, Page Navigation Stack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:28:59 / Modified: 09:32:07" itemprop="dateCreated datePublished" datetime="2025-06-29T09:28:59+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack"><a href="#Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Text Filling Parent Control, Native Array Reception, JS Logic Execution Issue, UIAbility Context Problem, Page Navigation Stack"></a>[Daily HarmonyOS Next Knowledge] Text Filling Parent Control, Native Array Reception, JS Logic Execution Issue, UIAbility Context Problem, Page Navigation Stack</h1><h4 id="1-How-to-make-the-Text-component-fill-the-parent-component-in-HarmonyOS"><a href="#1-How-to-make-the-Text-component-fill-the-parent-component-in-HarmonyOS" class="headerlink" title="1. How to make the Text component fill the parent component in HarmonyOS?"></a>1. How to make the Text component fill the parent component in HarmonyOS?</h4><pre><code class="language-typescript">build() &#123;
  Row() &#123;
    Row() &#123;
      Text(this.str)
        .constraintSize(&#123; maxWidth: &#39;100%&#39;, minHeight: &quot;30vp&quot; &#125;)
        .backgroundColor(Color.Gray)
        .fontSize(&#39;24vp&#39;)
    &#125;
    .key(&#39;row1&#39;)
    .constraintSize(&#123; maxWidth: &#39;100%&#39;&#125;)
    .backgroundColor(Color.Green)
  &#125;
  .key(&#39;row2&#39;)
  .backgroundColor(Color.Yellow)
  .width(&#39;90%&#39;)

  Button(&#39;add&#39;)
    .onClick(() =&gt; &#123;
      this.str += &#39;hello&#39;;
    &#125;)
  Button(&#39;reset&#39;)
    .onClick(() =&gt; &#123;
      this.str = &#39;hello&#39;;
    &#125;)
&#125;
</code></pre>
<p><strong>Requirement</strong>: Make row1’s size change with the Text component, auto-wrap when the outermost row2 width is insufficient, and fully fill the row2 container. Currently, there is an unfilled area outside row1 (yellow area on the right in the image). How to modify it to make row1&#x2F;Text fully fill row2?  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.29.png"><br><strong>Solution</strong>: Remove the <code>width</code> attribute from row2. Use <code>margin</code> for layout adjustment if needed.  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.29-1.png"></p>
<h4 id="2-In-HarmonyOS-NAPI-how-to-receive-a-Uint8Array-passed-from-the-ArkTS-side-in-Native"><a href="#2-In-HarmonyOS-NAPI-how-to-receive-a-Uint8Array-passed-from-the-ArkTS-side-in-Native" class="headerlink" title="2. In HarmonyOS NAPI, how to receive a Uint8Array passed from the ArkTS side in Native?"></a>2. In HarmonyOS NAPI, how to receive a Uint8Array passed from the ArkTS side in Native?</h4><p>Refer to the following code:  </p>
<pre><code class="language-c">napi_typedarray_type arr_type;
napi_value arr_buffer;
size_t arr_offset;
size_t arr_i, arr_length;
// Get the length and type of the passed array
napi_status status = napi_get_typedarray_info(env, arr, &amp;arr_type, &amp;arr_length, NULL, &amp;arr_buffer, &amp;arr_offset);
LOGI(&quot;-------arr--%&#123;public&#125;d-------&quot;, arr_length);
void *data;
size_t byte_len;
napi_create_array_with_length(env, arr_length, &amp;arr_buffer);
napi_get_arraybuffer_info(env, arr_buffer, &amp;data, &amp;byte_len);
napi_value output_buffer;
void *output_ptr = NULL;
napi_create_arraybuffer(env, byte_len, &amp;output_ptr, &amp;output_buffer);
napi_value out_arr;
napi_create_typedarray(env, arr_type, arr_length, output_buffer, arr_offset, &amp;out_arr);
if (arr_type == napi_uint8_array) &#123;
  uint8_t *input_bytes = (uint8_t *)(data) + arr_offset;
  uint8_t *output_bytes = (uint8_t *)(output_ptr);
  for (arr_i = 0; arr_i &lt; arr_length; arr_i++) &#123;
    OH_LOG_INFO(LOG_APP, &quot;Multiply_for_arraybuffer input_bytes %&#123;public&#125;d&quot;, input_bytes[arr_i]);
    output_bytes[arr_i] = (uint8_t)(input_bytes[arr_i] * 1);
    LOGI(&quot;Final result,============%&#123;public&#125;zi&quot;, output_bytes[arr_i]);
  &#125;
&#125;
</code></pre>
<h4 id="3-After-opening-a-new-page-via-window-open-hyperlink-blank-in-a-HarmonyOS-H5-page-the-JS-logic-of-the-original-page-does-not-execute-when-returning"><a href="#3-After-opening-a-new-page-via-window-open-hyperlink-blank-in-a-HarmonyOS-H5-page-the-JS-logic-of-the-original-page-does-not-execute-when-returning" class="headerlink" title="3. After opening a new page via window.open(&quot;hyperlink&quot;, &quot;_blank&quot;) in a HarmonyOS H5 page, the JS logic of the original page does not execute when returning."></a>3. After opening a new page via <code>window.open(&quot;hyperlink&quot;, &quot;_blank&quot;)</code> in a HarmonyOS H5 page, the JS logic of the original page does not execute when returning.</h4><p><strong>Cause</strong>: If the Web component supports multi-windows (i.e., <code>multiWindowAccess</code> is set to <code>true</code>), the <code>event.handler.setWebController</code> interface must be called in <code>onWindowNew</code>; otherwise, the Render process will be blocked. The issue occurs because the app did not call this interface.  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkweb/ts-basic-components-web.md#onwindownew9">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkweb/ts-basic-components-web.md#onwindownew9</a>  </p>
<h4 id="4-In-HarmonyOS-TS-BaseAbility-extends-UIAbility-shows-Cannot-find-name-Context"><a href="#4-In-HarmonyOS-TS-BaseAbility-extends-UIAbility-shows-Cannot-find-name-Context" class="headerlink" title="4. In HarmonyOS TS, BaseAbility extends UIAbility shows Cannot find name &#39;Context&#39;."></a>4. In HarmonyOS TS, <code>BaseAbility extends UIAbility</code> shows <code>Cannot find name &#39;Context&#39;</code>.</h4><pre><code class="language-typescript">export default abstract class BaseAbility extends UIAbility &#123;

  static appContext: common.ApplicationContext;

  onWindowStageCreate(windowStage: window.WindowStage): void &#123;
    BaseAbility.appContext = this.context.getApplicationContext()
    Logger.info(&#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;BaseAbility onWindowStageCreate&#39;);
    super.onWindowStageCreate(windowStage)
  &#125;

  static getContext(): common.ApplicationContext &#123;
    return BaseAbility.appContext;
  &#125;
&#125;
</code></pre>
<h4 id="5-How-to-obtain-the-navigation-stack-for-page-transitions-in-HarmonyOS"><a href="#5-How-to-obtain-the-navigation-stack-for-page-transitions-in-HarmonyOS" class="headerlink" title="5. How to obtain the navigation stack for page transitions in HarmonyOS?"></a>5. How to obtain the navigation stack for page transitions in HarmonyOS?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#navpathstack10">Navigation</a><br><code>NavPathStack</code> is the Navigation route stack, allowing inheritance. Developers can add attributes&#x2F;methods to derived classes or override methods of the base <code>NavPathStack</code>. Derived class objects can replace base <code>NavPathStack</code> objects. Provided methods include:  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.29-2.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41130-Daily-HarmonyOS-Next-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41130-Daily-HarmonyOS-Next-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:27:17 / Modified: 09:36:45" itemprop="dateCreated datePublished" datetime="2025-06-29T09:27:17+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings"><a href="#Daily-HarmonyOS-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings" class="headerlink" title="[Daily HarmonyOS Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings"></a>[Daily HarmonyOS Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings</h1><h4 id="1-How-to-upgrade-HarmonyOS-compilation-tool-hvigor-to-version-“hvigorVersion”-“4-2-0”"><a href="#1-How-to-upgrade-HarmonyOS-compilation-tool-hvigor-to-version-“hvigorVersion”-“4-2-0”" class="headerlink" title="1. How to upgrade HarmonyOS compilation tool hvigor to version “hvigorVersion”: “4.2.0”?"></a>1. How to upgrade HarmonyOS compilation tool hvigor to version “hvigorVersion”: “4.2.0”?</h4><p>Manual update to the specified version is supported. Refer to the link below: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5</a>  </p>
<h4 id="2-How-to-modify-the-pop-up-animation-of-a-custom-Dialog-in-HarmonyOS"><a href="#2-How-to-modify-the-pop-up-animation-of-a-custom-Dialog-in-HarmonyOS" class="headerlink" title="2. How to modify the pop-up animation of a custom Dialog in HarmonyOS?"></a>2. How to modify the pop-up animation of a custom Dialog in HarmonyOS?</h4><pre><code class="language-typescript">let anmDuration: number = 300;

// Pop-up interaction
@CustomDialog
struct CustomDialogExample &#123;
  controller: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;&#125;),
    autoCancel: false
  &#125;)
  @State showFlag: Visibility = Visibility.Visible;
  @State isAutoCancel: boolean = false;
  textController: TextAreaController = new TextAreaController()

  build() &#123;
    Column() &#123;
      Row() &#123;
        Text(&quot;Custom animated pop-up&quot;)
      &#125;
      .borderRadius(20)
      .backgroundColor(&#39;#ff6288cb&#39;)
      .height(200)
      .width(&#39;100%&#39;)
    &#125;
    .margin(&#123; top: 10 &#125;)
    .justifyContent(FlexAlign.Center)
    .width(&#39;100%&#39;)
    .height(&quot;100%&quot;)
    .onClick(() =&gt; &#123;
      console.log(&quot;dialogClick&quot;)
      if (this.isAutoCancel) &#123;
        console.log(&quot;dialogClick2&quot;)
        this.cancel();
      &#125;
    &#125;)
    .visibility(this.showFlag)
    // Define entry and exit transition animation effects
    .transition(TransitionEffect.OPACITY.animation(&#123; duration: anmDuration &#125;)
      .combine(TransitionEffect.translate(&#123; y: 500 &#125;)))
  &#125;
  // Delay closing the pop-up to display the custom exit animation
  cancel() &#123;
    this.showFlag = Visibility.Hidden
    console.log(&quot;closeDialog&quot;)
    setTimeout(() =&gt; &#123;
      this.controller.close()
    &#125;, anmDuration)
  &#125;
&#125;

@Entry
@Component
struct CustomDialogUser &#123;
  @State isAutoCancel: boolean = true;
  dialogController: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123; isAutoCancel: this.isAutoCancel &#125;),
    autoCancel: this.isAutoCancel,
    customStyle: true,
  &#125;)

  build() &#123;
    Column() &#123;
      Button(&#39;click me&#39;)
        .onClick(() =&gt; &#123;
          this.dialogController.open()
        &#125;)
    &#125;.width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-Issue-with-LocalStorage-in-HarmonyOS-NavDestination-being-ineffective"><a href="#3-Issue-with-LocalStorage-in-HarmonyOS-NavDestination-being-ineffective" class="headerlink" title="3. Issue with LocalStorage in HarmonyOS NavDestination being ineffective"></a>3. Issue with LocalStorage in HarmonyOS NavDestination being ineffective</h4><p>The project currently uses Navigation for page transitions. The problem is that LocalStorage is ineffective in pages opened via navigation.  </p>
<p>When using localStorage, changes in values decorated by @state will cause page updates:  </p>
<pre><code class="language-typescript">let para: Record&lt;string, number&gt; = &#123; &#39;PropA&#39;: 47 &#125;;
let storage: LocalStorage = new LocalStorage(para);
@Entry(storage)
@Component
export default struct APage &#123;
  @Consume(&#39;navigation&#39;) navigation: NavPathStack;
  @LocalStorageLink(&#39;PropA&#39;) storageLink: number = 0;
  @State testid: number = 0
  number: number = 0

  build() &#123;
    NavDestination() &#123;
      Column() &#123;
        Text(JSON.stringify(this.testid))
          .fontSize(&quot;20vp&quot;)
          .textAlign(TextAlign.Center)
          .width(&#39;100%&#39;)
          .height(&quot;20vp&quot;)
          .onClick(() =&gt; &#123;
            this.navigation.pushPath(&#123;
              name: &quot;BPage&quot;
            &#125;, false);
          &#125;)

        Text(&quot;Click to change testId&quot;)
          .fontSize(&quot;20vp&quot;)
          .textAlign(TextAlign.Center)
          .width(&#39;100%&#39;)
          .height(&quot;20vp&quot;)
          .margin(&#123; top: &#39;20vp&#39; &#125;)
          .onClick(() =&gt; &#123;
            this.number++
            storage.set(&#39;PropA&#39;, this.number)
            this.testid = storage.get(&#39;PropA&#39;) as number
          &#125;)
      &#125;
      .width(&quot;100%&quot;)
      .height(&#39;100%&#39;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-What-is-the-execution-order-of-the-lifecycle-between-the-Entry-page-and-subcomponents-in-HarmonyOS"><a href="#4-What-is-the-execution-order-of-the-lifecycle-between-the-Entry-page-and-subcomponents-in-HarmonyOS" class="headerlink" title="4. What is the execution order of the lifecycle between the Entry page and subcomponents in HarmonyOS?"></a>4. What is the execution order of the lifecycle between the Entry page and subcomponents in HarmonyOS?</h4><p>The Entry lifecycle is aboutToAppear → build → onPageShow. For subcomponents in build, does their aboutToAppear execute after build → component aboutToAppear → onPageShow, or after build → onPageShow → component aboutToAppear?  </p>
<p>Refer to the lifecycle documentation for pages and custom components: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5</a>  </p>
<p>The cold start initialization process is: MyComponent aboutToAppear → MyComponent build → MyComponent onDidBuild → Child aboutToAppear → Child build → Child onDidBuild → Index onPageShow.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.30.png"></p>
<h4 id="5-How-to-retrieve-cookies-set-in-WebCookieManager-on-an-H5-page-in-HarmonyOS"><a href="#5-How-to-retrieve-cookies-set-in-WebCookieManager-on-an-H5-page-in-HarmonyOS" class="headerlink" title="5. How to retrieve cookies set in WebCookieManager on an H5 page in HarmonyOS?"></a>5. How to retrieve cookies set in WebCookieManager on an H5 page in HarmonyOS?</h4><p>Refer to the official documentation for webviewmanager operations: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5?catalogVersion=V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5?catalogVersion=V5</a><br>Use methods like getCookie to obtain cookie values.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4121-Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4121-Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:26:25 / Modified: 09:26:47" itemprop="dateCreated datePublished" datetime="2025-06-29T09:26:25+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists"><a href="#Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists"></a>[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists</h1><h4 id="1-In-HarmonyOS-NAPI-calls-which-method-should-be-used-to-pass-a-gbk2313-encoded-string-from-ArkTS-to-the-Native-layer"><a href="#1-In-HarmonyOS-NAPI-calls-which-method-should-be-used-to-pass-a-gbk2313-encoded-string-from-ArkTS-to-the-Native-layer" class="headerlink" title="1. In HarmonyOS NAPI calls, which method should be used to pass a gbk2313-encoded string from ArkTS to the Native layer?"></a>1. In HarmonyOS NAPI calls, which method should be used to pass a gbk2313-encoded string from ArkTS to the Native layer?</h4><p>To pass a gbk2313-encoded string from ArkTS to the Native layer, use the <code>napi_get_value_string_utf8</code> method. This method allows obtaining the length of the string passed from the ArkTS side into a char array.  </p>
<h4 id="2-HarmonyOS-NAPI-logs-cannot-be-printed-neither-OH-LOG-INFO-nor-printf-work"><a href="#2-HarmonyOS-NAPI-logs-cannot-be-printed-neither-OH-LOG-INFO-nor-printf-work" class="headerlink" title="2. HarmonyOS NAPI logs cannot be printed, neither OH_LOG_INFO nor printf work."></a>2. HarmonyOS NAPI logs cannot be printed, neither OH_LOG_INFO nor printf work.</h4><p>Refer to the following code:  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Macro definition, which can be replaced as needed</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGI(format, args) OH_LOG_Print(LOG_APP, LOG_INFO, 0, <span class="string">&quot;logI&quot;</span>, format, args);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Call the macro, add `public` before print parameters; use `d` for numbers and `s` for strings</span></span><br><span class="line">LOGI(<span class="string">&quot;Calling macro======%&#123;public&#125;d==================&quot;</span>, <span class="number">123</span>);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">3.</span> Does HarmonyOS have a table control?  </span><br><span class="line">Currently, there is no built-in table component. As a workaround, use a Web component to introduce a local HTML file with a table. Demo:  </span><br><span class="line">```typescript</span><br><span class="line">import web_webview from <span class="string">&#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TableHtml</span> &#123;</span></span><br><span class="line">  controller: web_webview.WebviewController = new web_webview.WebviewController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Button(<span class="string">&quot;Click to load HTML rich text&quot;</span>).onClick(() =&gt; &#123;</span><br><span class="line">        this.controller.loadData(`&lt;html&gt; &lt;head&gt; &lt;style&gt; .table-font-size&#123; font-size:<span class="number">20</span>px; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body bgcolor=\<span class="string">&quot;white\&quot;&gt; &lt;table width=&quot;</span><span class="number">1000</span><span class="string">&quot; border=&quot;</span><span class="number">5</span><span class="string">&quot; height=&quot;</span><span class="number">1000</span><span class="string">&quot;&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;/html&gt;`, &quot;</span>text/html<span class="string">&quot;, &quot;</span>UTF<span class="number">-8</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string">      &#125;) </span></span><br><span class="line"><span class="string">      Web(&#123; src: &#x27;www&#x27;, controller: this.controller &#125;).javaScriptAccess(true).domStorageAccess(true).fileAccess(true)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Web freezes when triggering a new window.  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">import webview from &#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"><span class="string">import router from &#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct WebDemo &#123;</span></span><br><span class="line"><span class="string">  controller = new webview.WebviewController</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  getUrl(): string &#123;</span></span><br><span class="line"><span class="string">    const params = router.getParams() as Record&lt;string, string&gt;</span></span><br><span class="line"><span class="string">    return params?.url ?? &#x27;https://www.huawei.com/appview/question/56402307?appview=1&#x27;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Column() &#123;</span></span><br><span class="line"><span class="string">      Web(&#123;</span></span><br><span class="line"><span class="string">        src: this.getUrl(),</span></span><br><span class="line"><span class="string">        controller: this.controller,</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">        .height(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .multiWindowAccess(true)</span></span><br><span class="line"><span class="string">        .onWindowNew((e) =&gt; &#123;</span></span><br><span class="line"><span class="string">          console.log(&#x27;onWindowNew&#x27;, e.targetUrl)</span></span><br><span class="line"><span class="string">          router.pushUrl(&#123;</span></span><br><span class="line"><span class="string">            url: &#x27;pages/WebDemo&#x27;,</span></span><br><span class="line"><span class="string">            params: &#123;</span></span><br><span class="line"><span class="string">              url: e.targetUrl,</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          // Key code: Return the new window&#x27;s WebviewController to the Web kernel.</span></span><br><span class="line"><span class="string">          // Set to null via event.handler.setWebController if the new window is not needed.</span></span><br><span class="line"><span class="string">          // Failing to call this interface will block the render process.</span></span><br><span class="line"><span class="string">          e.handler.setWebController(null)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Application of @State or @Link to decorate Arrays in HarmonyOS.  </span></span><br><span class="line"><span class="string">Given a data Bean type:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">export class TagBean &#123;</span></span><br><span class="line"><span class="string">  title: string = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  id: string = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  is_choose: boolean = false</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string">When decorating an Array of this Bean with @State or @Link (e.g., `@Link tagBeans: TagBean[]`), updating `tagBeans[index].is_choose=true` in a click event does not refresh the UI in real time when using `BackgroundColor($r(item.is_choose ? &quot;</span>Color A<span class="string">&quot; : &quot;</span>Color B<span class="string">&quot;))` in `ForEach(this.tagBeans)`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">However, using a separate string object to record clicked IDs (e.g., `this.chooseIds.indexOf(item.id) &gt;= 0`) enables real-time UI updates.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For bidirectional data synchronization in scenarios involving nested objects or arrays, use the `@ObjectLink` and `@Observed` decorators: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Demo reference:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">import util from &#x27;@ohos.util&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Observed</span></span><br><span class="line"><span class="string">class TagBean &#123;</span></span><br><span class="line"><span class="string">  key: string = util.generateRandomUUID(true);</span></span><br><span class="line"><span class="string">  name: string;</span></span><br><span class="line"><span class="string">  is_Choose: boolean;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  constructor(name: string, is_choose: boolean) &#123;</span></span><br><span class="line"><span class="string">    this.name = name;</span></span><br><span class="line"><span class="string">    this.is_Choose = is_choose;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct ViewListItem &#123;</span></span><br><span class="line"><span class="string">  @ObjectLink tagBean: TagBean;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    ListItem() &#123;</span></span><br><span class="line"><span class="string">      Text(this.tagBean.name)</span></span><br><span class="line"><span class="string">        .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .height(100)</span></span><br><span class="line"><span class="string">        .fontSize(16)</span></span><br><span class="line"><span class="string">        .textAlign(TextAlign.Center)</span></span><br><span class="line"><span class="string">        .borderRadius(10)</span></span><br><span class="line"><span class="string">        .backgroundColor(this.tagBean.is_Choose ? Color.White : Color.Red)</span></span><br><span class="line"><span class="string">    &#125;.onClick(() =&gt; &#123;</span></span><br><span class="line"><span class="string">      this.tagBean.is_Choose = !this.tagBean.is_Choose</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct ObservedDemo &#123;</span></span><br><span class="line"><span class="string">  @State tagBeans: Array&lt;TagBean&gt; = [</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 1&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 2&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 3&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 4&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 5&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 6&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 7&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 8&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 9&#x27;, false),</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Column() &#123;</span></span><br><span class="line"><span class="string">      List(&#123; space: 20, initialIndex: 0 &#125;) &#123;</span></span><br><span class="line"><span class="string">        ForEach(this.tagBeans, (item: TagBean) =&gt; &#123;</span></span><br><span class="line"><span class="string">          ViewListItem(&#123; tagBean: item &#125;)</span></span><br><span class="line"><span class="string">        &#125;, (item: TagBean) =&gt; item.key)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .listDirection(Axis.Vertical)</span></span><br><span class="line"><span class="string">      .friction(0.6)</span></span><br><span class="line"><span class="string">      .divider(&#123;</span></span><br><span class="line"><span class="string">        strokeWidth: 2,</span></span><br><span class="line"><span class="string">        color: 0xFFFFFF,</span></span><br><span class="line"><span class="string">        startMargin: 20,</span></span><br><span class="line"><span class="string">        endMargin: 20</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">      .edgeEffect(EdgeEffect.Spring)</span></span><br><span class="line"><span class="string">      .width(&#x27;90%&#x27;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .backgroundColor(Color.Black)</span></span><br><span class="line"><span class="string">    .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">    .height(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41231-Daily-HarmonyOS-Next-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41231-Daily-HarmonyOS-Next-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground/Background Switching, Long Press Events</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:25:01 / Modified: 09:25:15" itemprop="dateCreated datePublished" datetime="2025-06-29T09:25:01+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events"><a href="#Daily-HarmonyOS-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events" class="headerlink" title="[Daily HarmonyOS Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground&#x2F;Background Switching, Long Press Events"></a>[Daily HarmonyOS Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground&#x2F;Background Switching, Long Press Events</h1><h4 id="1-What-is-the-format-of-confirm-void-in-HarmonyOS"><a href="#1-What-is-the-format-of-confirm-void-in-HarmonyOS" class="headerlink" title="1. What is the format of confirm: () =&gt; void = () =&gt; { } in HarmonyOS?"></a>1. What is the format of <code>confirm: () =&gt; void = () =&gt; &#123; &#125;</code> in HarmonyOS?</h4><p><code>confirm: () =&gt; void = () =&gt; &#123; &#125;</code> is an arrow function. Its type is <code>() =&gt; void</code>, indicating that the function takes no parameters and has no return value. The function body is empty, so it executes no operations and simply returns when called.  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/introduction-to-arkts-V5#arrow-function-lambda-function">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/introduction-to-arkts-V5#arrow-function-lambda-function</a>  </p>
<p><strong>Arrow functions (Lambda functions)</strong>: Functions can be defined as arrow functions. For example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = (<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- The return type of an arrow function can be omitted, and it is inferred from the function body.  </span></span><br><span class="line"><span class="string">- Expressions can be specified as arrow functions for brevity. The following two expressions are equivalent:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum1</span> = (<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) =&gt; &#123; <span class="keyword">return</span> x + y; &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum2</span> = (<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) =&gt; x + y</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. In HarmonyOS, when changing a class in an array, the List does not trigger an update.  </span></span><br><span class="line"><span class="string">Refer to the following demo using a combination of `</span><span class="meta">@Watch</span><span class="string">` and `</span><span class="meta">@Link</span><span class="string">`: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-watch-V5  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PurchaseItem</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title class_">NextId</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">price</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">price</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = <span class="title class_">PurchaseItem</span>.<span class="property">NextId</span>++;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BasketViewer</span> &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="meta">@Watch</span>(<span class="string">&#x27;onBasketUpdated&#x27;</span>) <span class="attr">shopBasket</span>: <span class="title class_">PurchaseItem</span>[];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">totalPurchase</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateTotal</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="variable language_">this</span>.<span class="property">shopBasket</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, i</span>) =&gt;</span> sum + i.<span class="property">price</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 10% discount for totals ≥ 100 euros</span></span><br><span class="line">    <span class="keyword">if</span> (total &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">      total = <span class="number">0.9</span> * total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// @Watch callback</span></span><br><span class="line">  <span class="title function_">onBasketUpdated</span>(<span class="attr">propName</span>: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">totalPurchase</span> = <span class="variable language_">this</span>.<span class="title function_">updateTotal</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">shopBasket</span>,</span><br><span class="line">        <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">PurchaseItem</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Price: <span class="subst">$&#123;item.price.toFixed(<span class="number">2</span>)&#125;</span> €`</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">PurchaseItem</span></span>) =&gt;</span> item.<span class="property">id</span>.<span class="title function_">toString</span>()</span><br><span class="line">      )</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`Total: <span class="subst">$&#123;<span class="variable language_">this</span>.totalPurchase.toFixed(<span class="number">2</span>)&#125;</span> €`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BasketModifier</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">shopBasket</span>: <span class="title class_">PurchaseItem</span>[] = [];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Add to basket&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">shopBasket</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">PurchaseItem</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">100</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>())))</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">BasketViewer</span>(&#123; <span class="attr">shopBasket</span>: $shopBasket &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">**@Watch** is used to monitor state variables. If developers need to track changes in a state variable, they can use `</span><span class="meta">@Watch</span><span class="string">` to set a callback function for the state variable. `</span><span class="meta">@Watch</span><span class="string">` provides state variable monitoring but only detects observable changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. The location data obtained via `</span>getCurrentPosition<span class="string">` in HarmonyOS H5 is an empty object.  </span></span><br><span class="line"><span class="string">Configure the `</span>ohos.<span class="property">permission</span>.<span class="property">LOCATION</span><span class="string">` and `</span>ohos.<span class="property">permission</span>.<span class="property">APPROXIMATELY_LOCATION</span><span class="string">` permissions in the `</span><span class="variable language_">module</span>.<span class="property">json5</span><span class="string">` file:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json5</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.LOCATION&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;$string:reason&quot;</span>,</span><br><span class="line">  <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;FormAbility&quot;</span>],</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;inuse&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.APPROXIMATELY_LOCATION&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;$string:reason&quot;</span>,</span><br><span class="line">  <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;FormAbility&quot;</span>],</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;inuse&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. In HarmonyOS, how to distinguish between route switching and foreground/background switching in `</span>onPageShow<span class="string">`/`</span>onPageHide<span class="string">`?  </span></span><br><span class="line"><span class="string">To perform specific operations when returning from the background to the foreground or from a secondary page, use `</span><span class="title class_">Navigation</span><span class="string">` to control routing:  </span></span><br><span class="line"><span class="string">- `</span><span class="title class_">Navigation</span><span class="string">` has its own lifecycle. Use `</span>onAppear<span class="string">` to handle returns from secondary routes and `</span>onPageShow<span class="string">` for foreground returns.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Does HarmonyOS support long-press events for components?  </span></span><br><span class="line"><span class="string">Long-press events are not supported, but long-press gestures are. Implement similar functionality using long-press gestures:  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-single-gesture-V5#long-press-gesture  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A long-press gesture (`</span><span class="title class_">LongPressGesture</span><span class="string">`) has three optional parameters:  </span></span><br><span class="line"><span class="string">- `</span>fingers<span class="string">`: Minimum number of fingers required (1–10, default: 1).  </span></span><br><span class="line"><span class="string">- `</span>repeat<span class="string">`: Whether to trigger the callback continuously (default: `</span><span class="literal">false</span><span class="string">`).  </span></span><br><span class="line"><span class="string">- `</span>duration<span class="string">`: Minimum duration (ms) to trigger the gesture (default: 500ms).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Example of binding a repeatable long-press gesture to a Text component**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;LongPress OnAction:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">count</span>).<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">gesture</span>(</span><br><span class="line">          <span class="title class_">LongPressGesture</span>(&#123; <span class="attr">repeat</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">            .<span class="title function_">onAction</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span>|<span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event &amp;&amp; event.<span class="property">repeat</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">onActionEnd</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">count</span> = <span class="number">0</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">250</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">    .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">3</span> &#125;)</span><br><span class="line">    .<span class="title function_">margin</span>(<span class="number">30</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41230-Daily-HarmonyOS-Next-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41230-Daily-HarmonyOS-Next-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Box Cursor Display Issue, Web Component Callback Async Problem, Image Loading Process Monitoring, Background Image Size Not Working, Alert Not Functioning</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:23:45 / Modified: 09:36:46" itemprop="dateCreated datePublished" datetime="2025-06-29T09:23:45+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning"><a href="#Daily-HarmonyOS-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning" class="headerlink" title="[Daily HarmonyOS Knowledge] Input Box Cursor Display Issue, Web Component Callback Async Problem, Image Loading Process Monitoring, Background Image Size Not Working, Alert Not Functioning"></a>[Daily HarmonyOS Knowledge] Input Box Cursor Display Issue, Web Component Callback Async Problem, Image Loading Process Monitoring, Background Image Size Not Working, Alert Not Functioning</h1><h4 id="1-In-HarmonyOS-when-setting-the-padding-of-TextInput-to-0-the-cursor-appears-abnormal"><a href="#1-In-HarmonyOS-when-setting-the-padding-of-TextInput-to-0-the-cursor-appears-abnormal" class="headerlink" title="1. In HarmonyOS, when setting the padding of TextInput to 0, the cursor appears abnormal."></a>1. In HarmonyOS, when setting the padding of TextInput to 0, the cursor appears abnormal.</h4><p>When the padding of TextInput is set to 0, the cursor displays abnormally.  </p>
<p>The cursor is clipped due to the default rounded corners. Try setting the rounded corners to 0 (.borderRadius(0)).  </p>
<h4 id="2-In-HarmonyOS-async-is-not-supported-in-the-callbacks-of-web-components-making-it-impossible-to-synchronize-asynchronous-interfaces"><a href="#2-In-HarmonyOS-async-is-not-supported-in-the-callbacks-of-web-components-making-it-impossible-to-synchronize-asynchronous-interfaces" class="headerlink" title="2. In HarmonyOS, async is not supported in the callbacks of web components, making it impossible to synchronize asynchronous interfaces."></a>2. In HarmonyOS, async is not supported in the callbacks of web components, making it impossible to synchronize asynchronous interfaces.</h4><p>The await keyword is not supported in these callbacks, but you can use <code>res.setResponseIsReady(true)</code> to asynchronously return results to the web kernel.  </p>
<h4 id="3-How-to-monitor-the-image-loading-process-in-HarmonyOS"><a href="#3-How-to-monitor-the-image-loading-process-in-HarmonyOS" class="headerlink" title="3. How to monitor the image loading process in HarmonyOS?"></a>3. How to monitor the image loading process in HarmonyOS?</h4><p>Does the system’s Image(‘’) component have APIs to monitor the entire loading process, such as network loading time, URL conversion (e.g., domain name conversion, cropping parameter concatenation), whether the image is from disk, image format, decoding time, etc.?  </p>
<p>For network images, check out the third-party library ImageKnife: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-tpc/ImageKnife">https://gitee.com/openharmony-tpc/ImageKnife</a>  </p>
<p>A dedicated image loading and caching library for OpenHarmony, designed to be more efficient, lightweight, and user-friendly. Inspired by the open-source library Glide:  </p>
<ul>
<li>Supports custom memory caching strategies and setting memory cache size (LRU strategy by default).  </li>
<li>Supports disk secondary caching, saving downloaded images to disk.  </li>
<li>Supports custom implementations for image retrieval&#x2F;network downloads.  </li>
<li>Supports monitoring network download progress callbacks.  </li>
<li>Inherits Image capabilities, supporting border and rounded corner settings via options.  </li>
<li>Inherits Image capabilities, supporting objectFit for image scaling, including adaptive height when objectFit is auto.  </li>
<li>Supports image scaling via transforms.  </li>
<li>Manages concurrent requests with prioritized request queues.  </li>
<li>Prevents requests for images with destroyed lifecycles.  </li>
<li>Supports custom cache keys.  </li>
<li>Supports custom HTTP network request headers.  </li>
<li>Controls cache storage strategies (memory-only or file caching) via writeCacheStrategy.  </li>
<li>Supports preloading images with preLoadCache.  </li>
<li>Supports loading images exclusively from cache with onlyRetrieveFromCache.  </li>
<li>Supports one or more image transformations, such as blurring and highlighting.</li>
</ul>
<h4 id="4-The-backgroundImageSize-ImageSize-Cover-property-does-not-take-effect-in-HarmonyOS"><a href="#4-The-backgroundImageSize-ImageSize-Cover-property-does-not-take-effect-in-HarmonyOS" class="headerlink" title="4. The backgroundImageSize(ImageSize.Cover) property does not take effect in HarmonyOS."></a>4. The backgroundImageSize(ImageSize.Cover) property does not take effect in HarmonyOS.</h4><p>You can use the Stack component to achieve this effect. Example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SafeAreaExample1</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.appbg&#x27;</span>))</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">expandSafeArea</span>([<span class="title class_">SafeAreaType</span>.<span class="property">SYSTEM</span>], [<span class="title class_">SafeAreaEdge</span>.<span class="property">TOP</span>, <span class="title class_">SafeAreaEdge</span>.<span class="property">BOTTOM</span>]) <span class="comment">// Extends the image drawing area to the status bar and navigation bar.</span></span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;LOGIN&quot;</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#3866e9&quot;</span>)</span><br><span class="line">        .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Normal</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&quot;45&quot;</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="number">8</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">30</span>, <span class="attr">right</span>: <span class="number">30</span>, <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section162965215413  </span></span><br><span class="line"><span class="string">Set the background image or video control size to the safe area and configure the expandSafeArea property.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SafeAreaExample1</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.bg&#x27;</span>))</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">expandSafeArea</span>([<span class="title class_">SafeAreaType</span>.<span class="property">SYSTEM</span>], [<span class="title class_">SafeAreaEdge</span>.<span class="property">TOP</span>, <span class="title class_">SafeAreaEdge</span>.<span class="property">BOTTOM</span>]) <span class="comment">// Extends the image drawing area to the status bar and navigation bar.</span></span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. The Web component in HarmonyOS cannot pop up the alert dialog from web pages.  </span></span><br><span class="line"><span class="string">When using the Web component, clicking the alert(&quot;123&quot;) dialog in the web page has no response. How to solve this?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Alerts are blocked in the webview component. You can use a custom dialog instead. Refer to the following code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// xxx.ets (App-side code)</span></span><br><span class="line"><span class="keyword">import</span> web_webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&quot;index.html&quot;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">onAlert</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;event.url:&quot;</span> + event.<span class="property">url</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;event.message:&quot;</span> + event.<span class="property">message</span>);</span><br><span class="line">            <span class="title class_">AlertDialog</span>.<span class="title function_">show</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&#x27;onAlert&#x27;</span>,</span><br><span class="line">              <span class="attr">message</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">              <span class="attr">primaryButton</span>: &#123;</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&#x27;cancel&#x27;</span>,</span><br><span class="line">                <span class="attr">action</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  event.<span class="property">result</span>.<span class="title function_">handleCancel</span>();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">secondaryButton</span>: &#123;</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">                <span class="attr">action</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  event.<span class="property">result</span>.<span class="title function_">handleConfirm</span>();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">cancel</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                event.<span class="property">result</span>.<span class="title function_">handleCancel</span>();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML code (index.html)</span></span><br><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>WebView onAlert Demo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>Click here<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">alert</span>(<span class="string">&quot;Hello World&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41229-Daily-HarmonyOS-Next-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41229-Daily-HarmonyOS-Next-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Face Liveness Detection, NodeController Refresh, Auto-Close Input Box, Row Middle Maximum Width Setting, WebView Singleton</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:22:57 / Modified: 09:36:47" itemprop="dateCreated datePublished" datetime="2025-06-29T09:22:57+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton"><a href="#Daily-HarmonyOS-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton" class="headerlink" title="[Daily HarmonyOS Knowledge] Face Liveness Detection, NodeController Refresh, Auto-Close Input Box, Row Middle Maximum Width Setting, WebView Singleton"></a>[Daily HarmonyOS Knowledge] Face Liveness Detection, NodeController Refresh, Auto-Close Input Box, Row Middle Maximum Width Setting, WebView Singleton</h1><h4 id="1-How-to-invoke-face-liveness-detection-in-HarmonyOS"><a href="#1-How-to-invoke-face-liveness-detection-in-HarmonyOS" class="headerlink" title="1. How to invoke face liveness detection in HarmonyOS?"></a>1. How to invoke face liveness detection in HarmonyOS?</h4><p>For H5 to call app-side methods, refer to the following demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.ets</span></span><br><span class="line"><span class="title class_">Web</span>() <span class="comment">// Register methods</span></span><br><span class="line">  .<span class="title function_">javaScriptProxy</span>(&#123;</span><br><span class="line">    <span class="attr">object</span>: <span class="variable language_">this</span>.<span class="property">testObj</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;testObjName&quot;</span>,</span><br><span class="line">    <span class="attr">methodList</span>: [<span class="string">&quot;getLocationTS&quot;</span>],</span><br><span class="line">    <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">webController</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">testClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getLocationTS</span>(): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// App-side method logic</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// H5 Page</span></span><br><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Get Location Information&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #prize &#123;</span><br><span class="line">            border-radius: 16px 16px 16px 16px;</span><br><span class="line">            background-image: linear-gradient(180deg, #A2DAFF 0%, #EAF5FF 100%);</span><br><span class="line">            margin-left: 1.82%;</span><br><span class="line">            margin-top: 1.43%;</span><br><span class="line">            width: 96.5%;</span><br><span class="line">            height: 96.7%;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style=&quot;width:1000px;height:500px&quot;&gt;</span><br><span class="line">    &lt;input style=&quot;width:1000px;height:100px;font-size:30px&quot; id=&quot;inputText&quot;/&gt;</span><br><span class="line">    &lt;p style=&quot;width:1000px;height:100px;font-size:30px&quot; id=&quot;demo&quot;&gt;p1&lt;/p&gt;</span><br><span class="line">    &lt;button style=&quot;width:1000px;height:100px&quot; onclick=&quot;getLocation()&quot;&gt;</span><br><span class="line">        &lt;span style=&quot;font-size:30px&quot;&gt;Get Location&lt;/span&gt;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function getLocation() &#123;</span><br><span class="line">        // If the ArkTS side returns a promise object, use this method to handle it</span><br><span class="line">        // For details, refer to the API for frontend pages to call app-side functions, including simple and complex types</span><br><span class="line">        // https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-in-page-app-function-invoking-0000001844832802</span><br><span class="line">        </span><br><span class="line">        // H5-side method call</span><br><span class="line">        testObjName.getLocationTS()</span><br><span class="line">        .then((param) =&gt; &#123; document.getElementById(&quot;demo&quot;).innerHTML = &quot;testObjName.getLocationTS()--&quot; + JSON.stringify(param) &#125;)</span><br><span class="line">        .catch((param) =&gt; &#123; document.getElementById(&quot;demo&quot;).innerHTML = &quot;testObjName.getLocationTS()--&quot; + JSON.stringify(param) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. After calling `this.rebuild()` in HarmonyOS NodeController, the screen does not refresh.  </span><br><span class="line">Using NodeController, when first entering the page, `makeNode` is automatically called back to draw three question boxes. Later, an external call to `onSelectBoxChange` updates `nodeArray` and manually calls `this.rebuild()`. `makeNode` is called back again, but the newly drawn boxes do not appear on the page.  </span><br><span class="line"></span><br><span class="line">Reference demo:  </span><br><span class="line">```typescript</span><br><span class="line">import &#123; RenderNode, DrawContext, FrameNode, NodeController &#125; from &quot;@ohos.ArkUI.node&quot;;</span><br><span class="line">import drawing from &quot;@ohos.graphics.drawing&quot;;</span><br><span class="line"></span><br><span class="line">class TextRenderNode extends RenderNode &#123;</span><br><span class="line">  async draw(context: DrawContext) &#123;</span><br><span class="line">    const canvas = context.canvas;</span><br><span class="line">    const pen = new drawing.Pen();</span><br><span class="line">    pen.setStrokeWidth(5);</span><br><span class="line">    pen.setColor(&#123; alpha: 255, red: 255, green: 0, blue: 0 &#125;);</span><br><span class="line">    let path = new drawing.Path();</span><br><span class="line">    path.moveTo(10, 10);</span><br><span class="line">    path.arcTo(10, 10, 200, 200, 0, 150);</span><br><span class="line">    path.close();</span><br><span class="line">    canvas.attachPen(pen);</span><br><span class="line">    canvas.drawPath(path);</span><br><span class="line">    canvas.detachPen();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyNodeController extends NodeController &#123;</span><br><span class="line">  private rootNode: FrameNode | null = null;</span><br><span class="line">  private nodeArray: Array&lt;TextRenderNode&gt; = [];</span><br><span class="line"></span><br><span class="line">  addMyNode(item: TextRenderNode) &#123;</span><br><span class="line">    this.nodeArray.push(item);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  makeNode(uiContext: UIContext): FrameNode | null &#123;</span><br><span class="line">    this.rootNode = new FrameNode(uiContext);</span><br><span class="line">    const renderNode = this.rootNode.getRenderNode();</span><br><span class="line">    if (renderNode === null) &#123;</span><br><span class="line">      return this.rootNode;</span><br><span class="line">    &#125;</span><br><span class="line">    if (renderNode) &#123;</span><br><span class="line">      renderNode.clearChildren();</span><br><span class="line">      this.nodeArray.forEach((item) =&gt; &#123;</span><br><span class="line">        renderNode.appendChild(item);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    return this.rootNode;</span><br><span class="line">  &#125;</span><br><span class="line">  // onTouchEvent(event: TouchEvent): void &#123;</span><br><span class="line">  //   this.nodeArray.forEach((node, index) =&gt; &#123; // this is undefined, cannot access parameters of the current class&lt;---------</span><br><span class="line">  //     console.log(JSON.stringify(this.nodeArray) + &#x27;De-Ma-Xi-Ya&#x27;)</span><br><span class="line">  //   &#125;)</span><br><span class="line">  // &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State newNode: TextRenderNode = new TextRenderNode();</span><br><span class="line">  @State nodeCV: MyNodeController = new MyNodeController();</span><br><span class="line">  tempY = 0;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        NodeContainer(this.nodeCV)</span><br><span class="line">          .width(&#x27;100%&#x27;)</span><br><span class="line">          .height(200);</span><br><span class="line">        Button(&#x27;Invalidate&#x27;)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            let newNode = new TextRenderNode();</span><br><span class="line">            newNode.frame = &#123; x: 0, y: this.tempY, width: 200, height: 100 &#125;;</span><br><span class="line">            this.nodeCV.addMyNode(newNode);</span><br><span class="line">            this.nodeCV.rebuild();</span><br><span class="line">            this.tempY += 100;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 3. In HarmonyOS TextInput, how to automatically close the input box when the text reaches a certain length?  </span><br><span class="line">Demo for automatically closing TextInput when the input character count reaches the set length:  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct FirstTest &#123;</span><br><span class="line">  @State message1: string = &#x27;Hello World&#x27;;</span><br><span class="line">  private controller: TextInputController = new TextInputController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&quot;FirstTest: &quot; + this.message1)</span><br><span class="line">        .fontSize(25)</span><br><span class="line">        .fontWeight(FontWeight.Bold);</span><br><span class="line"></span><br><span class="line">      TextInput(&#123; placeholder: &#x27;Waiting for input&#x27;, text: $$this.message1, controller: this.controller &#125;)</span><br><span class="line">        .fontSize(25)</span><br><span class="line">        .fontWeight(FontWeight.Bold)</span><br><span class="line">        .onChange(() =&gt; &#123;</span><br><span class="line">          if (this.message1.length &gt;= 20) &#123;</span><br><span class="line">            this.controller.stopEditing();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 4. How to set the maximum width for the middle element in a HarmonyOS Row?  </span><br><span class="line">Use `constraintSize(&#123; maxWidth: Infinity &#125;)` to limit the size range.  </span><br><span class="line"></span><br><span class="line">#### 5. How to create a singleton WebView component in HarmonyOS?  </span><br><span class="line">Only a singleton object can be created. Example:  </span><br><span class="line">```typescript</span><br><span class="line">export class GlobalContext &#123;</span><br><span class="line">  private constructor() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private static instance: GlobalContext;</span><br><span class="line">  private _objects = new Map&lt;string, Object&gt;();</span><br><span class="line"></span><br><span class="line">  public static getContext(): GlobalContext &#123;</span><br><span class="line">    if (!GlobalContext.instance) &#123;</span><br><span class="line">      GlobalContext.instance = new GlobalContext();</span><br><span class="line">    &#125;</span><br><span class="line">    return GlobalContext.instance;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getObject(value: string): Object | undefined &#123;</span><br><span class="line">    return this._objects.get(value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setObject(key: string, objectClass: Object): void &#123;</span><br><span class="line">    this._objects.set(key, objectClass);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">305</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
