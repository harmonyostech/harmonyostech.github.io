<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/8/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41130-Daily-HarmonyOS-Next-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41130-Daily-HarmonyOS-Next-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:27:17 / Modified: 09:36:45" itemprop="dateCreated datePublished" datetime="2025-06-29T09:27:17+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings"><a href="#Daily-HarmonyOS-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings" class="headerlink" title="[Daily HarmonyOS Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings"></a>[Daily HarmonyOS Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings</h1><h4 id="1-How-to-upgrade-HarmonyOS-compilation-tool-hvigor-to-version-“hvigorVersion”-“4-2-0”"><a href="#1-How-to-upgrade-HarmonyOS-compilation-tool-hvigor-to-version-“hvigorVersion”-“4-2-0”" class="headerlink" title="1. How to upgrade HarmonyOS compilation tool hvigor to version “hvigorVersion”: “4.2.0”?"></a>1. How to upgrade HarmonyOS compilation tool hvigor to version “hvigorVersion”: “4.2.0”?</h4><p>Manual update to the specified version is supported. Refer to the link below: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5</a>  </p>
<h4 id="2-How-to-modify-the-pop-up-animation-of-a-custom-Dialog-in-HarmonyOS"><a href="#2-How-to-modify-the-pop-up-animation-of-a-custom-Dialog-in-HarmonyOS" class="headerlink" title="2. How to modify the pop-up animation of a custom Dialog in HarmonyOS?"></a>2. How to modify the pop-up animation of a custom Dialog in HarmonyOS?</h4><pre><code class="language-typescript">let anmDuration: number = 300;

// Pop-up interaction
@CustomDialog
struct CustomDialogExample &#123;
  controller: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;&#125;),
    autoCancel: false
  &#125;)
  @State showFlag: Visibility = Visibility.Visible;
  @State isAutoCancel: boolean = false;
  textController: TextAreaController = new TextAreaController()

  build() &#123;
    Column() &#123;
      Row() &#123;
        Text(&quot;Custom animated pop-up&quot;)
      &#125;
      .borderRadius(20)
      .backgroundColor(&#39;#ff6288cb&#39;)
      .height(200)
      .width(&#39;100%&#39;)
    &#125;
    .margin(&#123; top: 10 &#125;)
    .justifyContent(FlexAlign.Center)
    .width(&#39;100%&#39;)
    .height(&quot;100%&quot;)
    .onClick(() =&gt; &#123;
      console.log(&quot;dialogClick&quot;)
      if (this.isAutoCancel) &#123;
        console.log(&quot;dialogClick2&quot;)
        this.cancel();
      &#125;
    &#125;)
    .visibility(this.showFlag)
    // Define entry and exit transition animation effects
    .transition(TransitionEffect.OPACITY.animation(&#123; duration: anmDuration &#125;)
      .combine(TransitionEffect.translate(&#123; y: 500 &#125;)))
  &#125;
  // Delay closing the pop-up to display the custom exit animation
  cancel() &#123;
    this.showFlag = Visibility.Hidden
    console.log(&quot;closeDialog&quot;)
    setTimeout(() =&gt; &#123;
      this.controller.close()
    &#125;, anmDuration)
  &#125;
&#125;

@Entry
@Component
struct CustomDialogUser &#123;
  @State isAutoCancel: boolean = true;
  dialogController: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123; isAutoCancel: this.isAutoCancel &#125;),
    autoCancel: this.isAutoCancel,
    customStyle: true,
  &#125;)

  build() &#123;
    Column() &#123;
      Button(&#39;click me&#39;)
        .onClick(() =&gt; &#123;
          this.dialogController.open()
        &#125;)
    &#125;.width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-Issue-with-LocalStorage-in-HarmonyOS-NavDestination-being-ineffective"><a href="#3-Issue-with-LocalStorage-in-HarmonyOS-NavDestination-being-ineffective" class="headerlink" title="3. Issue with LocalStorage in HarmonyOS NavDestination being ineffective"></a>3. Issue with LocalStorage in HarmonyOS NavDestination being ineffective</h4><p>The project currently uses Navigation for page transitions. The problem is that LocalStorage is ineffective in pages opened via navigation.  </p>
<p>When using localStorage, changes in values decorated by @state will cause page updates:  </p>
<pre><code class="language-typescript">let para: Record&lt;string, number&gt; = &#123; &#39;PropA&#39;: 47 &#125;;
let storage: LocalStorage = new LocalStorage(para);
@Entry(storage)
@Component
export default struct APage &#123;
  @Consume(&#39;navigation&#39;) navigation: NavPathStack;
  @LocalStorageLink(&#39;PropA&#39;) storageLink: number = 0;
  @State testid: number = 0
  number: number = 0

  build() &#123;
    NavDestination() &#123;
      Column() &#123;
        Text(JSON.stringify(this.testid))
          .fontSize(&quot;20vp&quot;)
          .textAlign(TextAlign.Center)
          .width(&#39;100%&#39;)
          .height(&quot;20vp&quot;)
          .onClick(() =&gt; &#123;
            this.navigation.pushPath(&#123;
              name: &quot;BPage&quot;
            &#125;, false);
          &#125;)

        Text(&quot;Click to change testId&quot;)
          .fontSize(&quot;20vp&quot;)
          .textAlign(TextAlign.Center)
          .width(&#39;100%&#39;)
          .height(&quot;20vp&quot;)
          .margin(&#123; top: &#39;20vp&#39; &#125;)
          .onClick(() =&gt; &#123;
            this.number++
            storage.set(&#39;PropA&#39;, this.number)
            this.testid = storage.get(&#39;PropA&#39;) as number
          &#125;)
      &#125;
      .width(&quot;100%&quot;)
      .height(&#39;100%&#39;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-What-is-the-execution-order-of-the-lifecycle-between-the-Entry-page-and-subcomponents-in-HarmonyOS"><a href="#4-What-is-the-execution-order-of-the-lifecycle-between-the-Entry-page-and-subcomponents-in-HarmonyOS" class="headerlink" title="4. What is the execution order of the lifecycle between the Entry page and subcomponents in HarmonyOS?"></a>4. What is the execution order of the lifecycle between the Entry page and subcomponents in HarmonyOS?</h4><p>The Entry lifecycle is aboutToAppear → build → onPageShow. For subcomponents in build, does their aboutToAppear execute after build → component aboutToAppear → onPageShow, or after build → onPageShow → component aboutToAppear?  </p>
<p>Refer to the lifecycle documentation for pages and custom components: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5</a>  </p>
<p>The cold start initialization process is: MyComponent aboutToAppear → MyComponent build → MyComponent onDidBuild → Child aboutToAppear → Child build → Child onDidBuild → Index onPageShow.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.30.png"></p>
<h4 id="5-How-to-retrieve-cookies-set-in-WebCookieManager-on-an-H5-page-in-HarmonyOS"><a href="#5-How-to-retrieve-cookies-set-in-WebCookieManager-on-an-H5-page-in-HarmonyOS" class="headerlink" title="5. How to retrieve cookies set in WebCookieManager on an H5 page in HarmonyOS?"></a>5. How to retrieve cookies set in WebCookieManager on an H5 page in HarmonyOS?</h4><p>Refer to the official documentation for webviewmanager operations: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5?catalogVersion=V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5?catalogVersion=V5</a><br>Use methods like getCookie to obtain cookie values.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4121-Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4121-Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:26:25 / Modified: 09:26:47" itemprop="dateCreated datePublished" datetime="2025-06-29T09:26:25+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists"><a href="#Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists"></a>[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists</h1><h4 id="1-In-HarmonyOS-NAPI-calls-which-method-should-be-used-to-pass-a-gbk2313-encoded-string-from-ArkTS-to-the-Native-layer"><a href="#1-In-HarmonyOS-NAPI-calls-which-method-should-be-used-to-pass-a-gbk2313-encoded-string-from-ArkTS-to-the-Native-layer" class="headerlink" title="1. In HarmonyOS NAPI calls, which method should be used to pass a gbk2313-encoded string from ArkTS to the Native layer?"></a>1. In HarmonyOS NAPI calls, which method should be used to pass a gbk2313-encoded string from ArkTS to the Native layer?</h4><p>To pass a gbk2313-encoded string from ArkTS to the Native layer, use the <code>napi_get_value_string_utf8</code> method. This method allows obtaining the length of the string passed from the ArkTS side into a char array.  </p>
<h4 id="2-HarmonyOS-NAPI-logs-cannot-be-printed-neither-OH-LOG-INFO-nor-printf-work"><a href="#2-HarmonyOS-NAPI-logs-cannot-be-printed-neither-OH-LOG-INFO-nor-printf-work" class="headerlink" title="2. HarmonyOS NAPI logs cannot be printed, neither OH_LOG_INFO nor printf work."></a>2. HarmonyOS NAPI logs cannot be printed, neither OH_LOG_INFO nor printf work.</h4><p>Refer to the following code:  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Macro definition, which can be replaced as needed</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGI(format, args) OH_LOG_Print(LOG_APP, LOG_INFO, 0, <span class="string">&quot;logI&quot;</span>, format, args);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Call the macro, add `public` before print parameters; use `d` for numbers and `s` for strings</span></span><br><span class="line">LOGI(<span class="string">&quot;Calling macro======%&#123;public&#125;d==================&quot;</span>, <span class="number">123</span>);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">3.</span> Does HarmonyOS have a table control?  </span><br><span class="line">Currently, there is no built-in table component. As a workaround, use a Web component to introduce a local HTML file with a table. Demo:  </span><br><span class="line">```typescript</span><br><span class="line">import web_webview from <span class="string">&#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TableHtml</span> &#123;</span></span><br><span class="line">  controller: web_webview.WebviewController = new web_webview.WebviewController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Button(<span class="string">&quot;Click to load HTML rich text&quot;</span>).onClick(() =&gt; &#123;</span><br><span class="line">        this.controller.loadData(`&lt;html&gt; &lt;head&gt; &lt;style&gt; .table-font-size&#123; font-size:<span class="number">20</span>px; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body bgcolor=\<span class="string">&quot;white\&quot;&gt; &lt;table width=&quot;</span><span class="number">1000</span><span class="string">&quot; border=&quot;</span><span class="number">5</span><span class="string">&quot; height=&quot;</span><span class="number">1000</span><span class="string">&quot;&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;/html&gt;`, &quot;</span>text/html<span class="string">&quot;, &quot;</span>UTF<span class="number">-8</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string">      &#125;) </span></span><br><span class="line"><span class="string">      Web(&#123; src: &#x27;www&#x27;, controller: this.controller &#125;).javaScriptAccess(true).domStorageAccess(true).fileAccess(true)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Web freezes when triggering a new window.  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">import webview from &#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"><span class="string">import router from &#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct WebDemo &#123;</span></span><br><span class="line"><span class="string">  controller = new webview.WebviewController</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  getUrl(): string &#123;</span></span><br><span class="line"><span class="string">    const params = router.getParams() as Record&lt;string, string&gt;</span></span><br><span class="line"><span class="string">    return params?.url ?? &#x27;https://www.huawei.com/appview/question/56402307?appview=1&#x27;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Column() &#123;</span></span><br><span class="line"><span class="string">      Web(&#123;</span></span><br><span class="line"><span class="string">        src: this.getUrl(),</span></span><br><span class="line"><span class="string">        controller: this.controller,</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">        .height(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .multiWindowAccess(true)</span></span><br><span class="line"><span class="string">        .onWindowNew((e) =&gt; &#123;</span></span><br><span class="line"><span class="string">          console.log(&#x27;onWindowNew&#x27;, e.targetUrl)</span></span><br><span class="line"><span class="string">          router.pushUrl(&#123;</span></span><br><span class="line"><span class="string">            url: &#x27;pages/WebDemo&#x27;,</span></span><br><span class="line"><span class="string">            params: &#123;</span></span><br><span class="line"><span class="string">              url: e.targetUrl,</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          // Key code: Return the new window&#x27;s WebviewController to the Web kernel.</span></span><br><span class="line"><span class="string">          // Set to null via event.handler.setWebController if the new window is not needed.</span></span><br><span class="line"><span class="string">          // Failing to call this interface will block the render process.</span></span><br><span class="line"><span class="string">          e.handler.setWebController(null)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Application of @State or @Link to decorate Arrays in HarmonyOS.  </span></span><br><span class="line"><span class="string">Given a data Bean type:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">export class TagBean &#123;</span></span><br><span class="line"><span class="string">  title: string = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  id: string = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  is_choose: boolean = false</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string">When decorating an Array of this Bean with @State or @Link (e.g., `@Link tagBeans: TagBean[]`), updating `tagBeans[index].is_choose=true` in a click event does not refresh the UI in real time when using `BackgroundColor($r(item.is_choose ? &quot;</span>Color A<span class="string">&quot; : &quot;</span>Color B<span class="string">&quot;))` in `ForEach(this.tagBeans)`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">However, using a separate string object to record clicked IDs (e.g., `this.chooseIds.indexOf(item.id) &gt;= 0`) enables real-time UI updates.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For bidirectional data synchronization in scenarios involving nested objects or arrays, use the `@ObjectLink` and `@Observed` decorators: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Demo reference:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">import util from &#x27;@ohos.util&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Observed</span></span><br><span class="line"><span class="string">class TagBean &#123;</span></span><br><span class="line"><span class="string">  key: string = util.generateRandomUUID(true);</span></span><br><span class="line"><span class="string">  name: string;</span></span><br><span class="line"><span class="string">  is_Choose: boolean;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  constructor(name: string, is_choose: boolean) &#123;</span></span><br><span class="line"><span class="string">    this.name = name;</span></span><br><span class="line"><span class="string">    this.is_Choose = is_choose;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct ViewListItem &#123;</span></span><br><span class="line"><span class="string">  @ObjectLink tagBean: TagBean;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    ListItem() &#123;</span></span><br><span class="line"><span class="string">      Text(this.tagBean.name)</span></span><br><span class="line"><span class="string">        .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .height(100)</span></span><br><span class="line"><span class="string">        .fontSize(16)</span></span><br><span class="line"><span class="string">        .textAlign(TextAlign.Center)</span></span><br><span class="line"><span class="string">        .borderRadius(10)</span></span><br><span class="line"><span class="string">        .backgroundColor(this.tagBean.is_Choose ? Color.White : Color.Red)</span></span><br><span class="line"><span class="string">    &#125;.onClick(() =&gt; &#123;</span></span><br><span class="line"><span class="string">      this.tagBean.is_Choose = !this.tagBean.is_Choose</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct ObservedDemo &#123;</span></span><br><span class="line"><span class="string">  @State tagBeans: Array&lt;TagBean&gt; = [</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 1&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 2&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 3&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 4&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 5&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 6&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 7&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 8&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 9&#x27;, false),</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Column() &#123;</span></span><br><span class="line"><span class="string">      List(&#123; space: 20, initialIndex: 0 &#125;) &#123;</span></span><br><span class="line"><span class="string">        ForEach(this.tagBeans, (item: TagBean) =&gt; &#123;</span></span><br><span class="line"><span class="string">          ViewListItem(&#123; tagBean: item &#125;)</span></span><br><span class="line"><span class="string">        &#125;, (item: TagBean) =&gt; item.key)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .listDirection(Axis.Vertical)</span></span><br><span class="line"><span class="string">      .friction(0.6)</span></span><br><span class="line"><span class="string">      .divider(&#123;</span></span><br><span class="line"><span class="string">        strokeWidth: 2,</span></span><br><span class="line"><span class="string">        color: 0xFFFFFF,</span></span><br><span class="line"><span class="string">        startMargin: 20,</span></span><br><span class="line"><span class="string">        endMargin: 20</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">      .edgeEffect(EdgeEffect.Spring)</span></span><br><span class="line"><span class="string">      .width(&#x27;90%&#x27;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .backgroundColor(Color.Black)</span></span><br><span class="line"><span class="string">    .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">    .height(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41231-Daily-HarmonyOS-Next-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41231-Daily-HarmonyOS-Next-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground/Background Switching, Long Press Events</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:25:01 / Modified: 09:25:15" itemprop="dateCreated datePublished" datetime="2025-06-29T09:25:01+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events"><a href="#Daily-HarmonyOS-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events" class="headerlink" title="[Daily HarmonyOS Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground&#x2F;Background Switching, Long Press Events"></a>[Daily HarmonyOS Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground&#x2F;Background Switching, Long Press Events</h1><h4 id="1-What-is-the-format-of-confirm-void-in-HarmonyOS"><a href="#1-What-is-the-format-of-confirm-void-in-HarmonyOS" class="headerlink" title="1. What is the format of confirm: () =&gt; void = () =&gt; { } in HarmonyOS?"></a>1. What is the format of <code>confirm: () =&gt; void = () =&gt; &#123; &#125;</code> in HarmonyOS?</h4><p><code>confirm: () =&gt; void = () =&gt; &#123; &#125;</code> is an arrow function. Its type is <code>() =&gt; void</code>, indicating that the function takes no parameters and has no return value. The function body is empty, so it executes no operations and simply returns when called.  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/introduction-to-arkts-V5#arrow-function-lambda-function">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/introduction-to-arkts-V5#arrow-function-lambda-function</a>  </p>
<p><strong>Arrow functions (Lambda functions)</strong>: Functions can be defined as arrow functions. For example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = (<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- The return type of an arrow function can be omitted, and it is inferred from the function body.  </span></span><br><span class="line"><span class="string">- Expressions can be specified as arrow functions for brevity. The following two expressions are equivalent:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum1</span> = (<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) =&gt; &#123; <span class="keyword">return</span> x + y; &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum2</span> = (<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) =&gt; x + y</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. In HarmonyOS, when changing a class in an array, the List does not trigger an update.  </span></span><br><span class="line"><span class="string">Refer to the following demo using a combination of `</span><span class="meta">@Watch</span><span class="string">` and `</span><span class="meta">@Link</span><span class="string">`: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-watch-V5  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PurchaseItem</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title class_">NextId</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">price</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">price</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = <span class="title class_">PurchaseItem</span>.<span class="property">NextId</span>++;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BasketViewer</span> &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="meta">@Watch</span>(<span class="string">&#x27;onBasketUpdated&#x27;</span>) <span class="attr">shopBasket</span>: <span class="title class_">PurchaseItem</span>[];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">totalPurchase</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateTotal</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="variable language_">this</span>.<span class="property">shopBasket</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, i</span>) =&gt;</span> sum + i.<span class="property">price</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 10% discount for totals ≥ 100 euros</span></span><br><span class="line">    <span class="keyword">if</span> (total &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">      total = <span class="number">0.9</span> * total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// @Watch callback</span></span><br><span class="line">  <span class="title function_">onBasketUpdated</span>(<span class="attr">propName</span>: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">totalPurchase</span> = <span class="variable language_">this</span>.<span class="title function_">updateTotal</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">shopBasket</span>,</span><br><span class="line">        <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">PurchaseItem</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Price: <span class="subst">$&#123;item.price.toFixed(<span class="number">2</span>)&#125;</span> €`</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">PurchaseItem</span></span>) =&gt;</span> item.<span class="property">id</span>.<span class="title function_">toString</span>()</span><br><span class="line">      )</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`Total: <span class="subst">$&#123;<span class="variable language_">this</span>.totalPurchase.toFixed(<span class="number">2</span>)&#125;</span> €`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BasketModifier</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">shopBasket</span>: <span class="title class_">PurchaseItem</span>[] = [];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Add to basket&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">shopBasket</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">PurchaseItem</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">100</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>())))</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">BasketViewer</span>(&#123; <span class="attr">shopBasket</span>: $shopBasket &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">**@Watch** is used to monitor state variables. If developers need to track changes in a state variable, they can use `</span><span class="meta">@Watch</span><span class="string">` to set a callback function for the state variable. `</span><span class="meta">@Watch</span><span class="string">` provides state variable monitoring but only detects observable changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. The location data obtained via `</span>getCurrentPosition<span class="string">` in HarmonyOS H5 is an empty object.  </span></span><br><span class="line"><span class="string">Configure the `</span>ohos.<span class="property">permission</span>.<span class="property">LOCATION</span><span class="string">` and `</span>ohos.<span class="property">permission</span>.<span class="property">APPROXIMATELY_LOCATION</span><span class="string">` permissions in the `</span><span class="variable language_">module</span>.<span class="property">json5</span><span class="string">` file:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json5</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.LOCATION&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;$string:reason&quot;</span>,</span><br><span class="line">  <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;FormAbility&quot;</span>],</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;inuse&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.APPROXIMATELY_LOCATION&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;$string:reason&quot;</span>,</span><br><span class="line">  <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;FormAbility&quot;</span>],</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;inuse&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. In HarmonyOS, how to distinguish between route switching and foreground/background switching in `</span>onPageShow<span class="string">`/`</span>onPageHide<span class="string">`?  </span></span><br><span class="line"><span class="string">To perform specific operations when returning from the background to the foreground or from a secondary page, use `</span><span class="title class_">Navigation</span><span class="string">` to control routing:  </span></span><br><span class="line"><span class="string">- `</span><span class="title class_">Navigation</span><span class="string">` has its own lifecycle. Use `</span>onAppear<span class="string">` to handle returns from secondary routes and `</span>onPageShow<span class="string">` for foreground returns.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Does HarmonyOS support long-press events for components?  </span></span><br><span class="line"><span class="string">Long-press events are not supported, but long-press gestures are. Implement similar functionality using long-press gestures:  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-single-gesture-V5#long-press-gesture  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A long-press gesture (`</span><span class="title class_">LongPressGesture</span><span class="string">`) has three optional parameters:  </span></span><br><span class="line"><span class="string">- `</span>fingers<span class="string">`: Minimum number of fingers required (1–10, default: 1).  </span></span><br><span class="line"><span class="string">- `</span>repeat<span class="string">`: Whether to trigger the callback continuously (default: `</span><span class="literal">false</span><span class="string">`).  </span></span><br><span class="line"><span class="string">- `</span>duration<span class="string">`: Minimum duration (ms) to trigger the gesture (default: 500ms).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Example of binding a repeatable long-press gesture to a Text component**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;LongPress OnAction:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">count</span>).<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">gesture</span>(</span><br><span class="line">          <span class="title class_">LongPressGesture</span>(&#123; <span class="attr">repeat</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">            .<span class="title function_">onAction</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span>|<span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event &amp;&amp; event.<span class="property">repeat</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">onActionEnd</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">count</span> = <span class="number">0</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">250</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">    .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">3</span> &#125;)</span><br><span class="line">    .<span class="title function_">margin</span>(<span class="number">30</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41230-Daily-HarmonyOS-Next-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41230-Daily-HarmonyOS-Next-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Box Cursor Display Issue, Web Component Callback Async Problem, Image Loading Process Monitoring, Background Image Size Not Working, Alert Not Functioning</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:23:45 / Modified: 09:36:46" itemprop="dateCreated datePublished" datetime="2025-06-29T09:23:45+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning"><a href="#Daily-HarmonyOS-Knowledge-Input-Box-Cursor-Display-Issue-Web-Component-Callback-Async-Problem-Image-Loading-Process-Monitoring-Background-Image-Size-Not-Working-Alert-Not-Functioning" class="headerlink" title="[Daily HarmonyOS Knowledge] Input Box Cursor Display Issue, Web Component Callback Async Problem, Image Loading Process Monitoring, Background Image Size Not Working, Alert Not Functioning"></a>[Daily HarmonyOS Knowledge] Input Box Cursor Display Issue, Web Component Callback Async Problem, Image Loading Process Monitoring, Background Image Size Not Working, Alert Not Functioning</h1><h4 id="1-In-HarmonyOS-when-setting-the-padding-of-TextInput-to-0-the-cursor-appears-abnormal"><a href="#1-In-HarmonyOS-when-setting-the-padding-of-TextInput-to-0-the-cursor-appears-abnormal" class="headerlink" title="1. In HarmonyOS, when setting the padding of TextInput to 0, the cursor appears abnormal."></a>1. In HarmonyOS, when setting the padding of TextInput to 0, the cursor appears abnormal.</h4><p>When the padding of TextInput is set to 0, the cursor displays abnormally.  </p>
<p>The cursor is clipped due to the default rounded corners. Try setting the rounded corners to 0 (.borderRadius(0)).  </p>
<h4 id="2-In-HarmonyOS-async-is-not-supported-in-the-callbacks-of-web-components-making-it-impossible-to-synchronize-asynchronous-interfaces"><a href="#2-In-HarmonyOS-async-is-not-supported-in-the-callbacks-of-web-components-making-it-impossible-to-synchronize-asynchronous-interfaces" class="headerlink" title="2. In HarmonyOS, async is not supported in the callbacks of web components, making it impossible to synchronize asynchronous interfaces."></a>2. In HarmonyOS, async is not supported in the callbacks of web components, making it impossible to synchronize asynchronous interfaces.</h4><p>The await keyword is not supported in these callbacks, but you can use <code>res.setResponseIsReady(true)</code> to asynchronously return results to the web kernel.  </p>
<h4 id="3-How-to-monitor-the-image-loading-process-in-HarmonyOS"><a href="#3-How-to-monitor-the-image-loading-process-in-HarmonyOS" class="headerlink" title="3. How to monitor the image loading process in HarmonyOS?"></a>3. How to monitor the image loading process in HarmonyOS?</h4><p>Does the system’s Image(‘’) component have APIs to monitor the entire loading process, such as network loading time, URL conversion (e.g., domain name conversion, cropping parameter concatenation), whether the image is from disk, image format, decoding time, etc.?  </p>
<p>For network images, check out the third-party library ImageKnife: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-tpc/ImageKnife">https://gitee.com/openharmony-tpc/ImageKnife</a>  </p>
<p>A dedicated image loading and caching library for OpenHarmony, designed to be more efficient, lightweight, and user-friendly. Inspired by the open-source library Glide:  </p>
<ul>
<li>Supports custom memory caching strategies and setting memory cache size (LRU strategy by default).  </li>
<li>Supports disk secondary caching, saving downloaded images to disk.  </li>
<li>Supports custom implementations for image retrieval&#x2F;network downloads.  </li>
<li>Supports monitoring network download progress callbacks.  </li>
<li>Inherits Image capabilities, supporting border and rounded corner settings via options.  </li>
<li>Inherits Image capabilities, supporting objectFit for image scaling, including adaptive height when objectFit is auto.  </li>
<li>Supports image scaling via transforms.  </li>
<li>Manages concurrent requests with prioritized request queues.  </li>
<li>Prevents requests for images with destroyed lifecycles.  </li>
<li>Supports custom cache keys.  </li>
<li>Supports custom HTTP network request headers.  </li>
<li>Controls cache storage strategies (memory-only or file caching) via writeCacheStrategy.  </li>
<li>Supports preloading images with preLoadCache.  </li>
<li>Supports loading images exclusively from cache with onlyRetrieveFromCache.  </li>
<li>Supports one or more image transformations, such as blurring and highlighting.</li>
</ul>
<h4 id="4-The-backgroundImageSize-ImageSize-Cover-property-does-not-take-effect-in-HarmonyOS"><a href="#4-The-backgroundImageSize-ImageSize-Cover-property-does-not-take-effect-in-HarmonyOS" class="headerlink" title="4. The backgroundImageSize(ImageSize.Cover) property does not take effect in HarmonyOS."></a>4. The backgroundImageSize(ImageSize.Cover) property does not take effect in HarmonyOS.</h4><p>You can use the Stack component to achieve this effect. Example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SafeAreaExample1</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.appbg&#x27;</span>))</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">expandSafeArea</span>([<span class="title class_">SafeAreaType</span>.<span class="property">SYSTEM</span>], [<span class="title class_">SafeAreaEdge</span>.<span class="property">TOP</span>, <span class="title class_">SafeAreaEdge</span>.<span class="property">BOTTOM</span>]) <span class="comment">// Extends the image drawing area to the status bar and navigation bar.</span></span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;LOGIN&quot;</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#3866e9&quot;</span>)</span><br><span class="line">        .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Normal</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&quot;45&quot;</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="number">8</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">30</span>, <span class="attr">right</span>: <span class="number">30</span>, <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section162965215413  </span></span><br><span class="line"><span class="string">Set the background image or video control size to the safe area and configure the expandSafeArea property.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SafeAreaExample1</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.bg&#x27;</span>))</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">expandSafeArea</span>([<span class="title class_">SafeAreaType</span>.<span class="property">SYSTEM</span>], [<span class="title class_">SafeAreaEdge</span>.<span class="property">TOP</span>, <span class="title class_">SafeAreaEdge</span>.<span class="property">BOTTOM</span>]) <span class="comment">// Extends the image drawing area to the status bar and navigation bar.</span></span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. The Web component in HarmonyOS cannot pop up the alert dialog from web pages.  </span></span><br><span class="line"><span class="string">When using the Web component, clicking the alert(&quot;123&quot;) dialog in the web page has no response. How to solve this?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Alerts are blocked in the webview component. You can use a custom dialog instead. Refer to the following code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// xxx.ets (App-side code)</span></span><br><span class="line"><span class="keyword">import</span> web_webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&quot;index.html&quot;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">onAlert</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;event.url:&quot;</span> + event.<span class="property">url</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;event.message:&quot;</span> + event.<span class="property">message</span>);</span><br><span class="line">            <span class="title class_">AlertDialog</span>.<span class="title function_">show</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&#x27;onAlert&#x27;</span>,</span><br><span class="line">              <span class="attr">message</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">              <span class="attr">primaryButton</span>: &#123;</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&#x27;cancel&#x27;</span>,</span><br><span class="line">                <span class="attr">action</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  event.<span class="property">result</span>.<span class="title function_">handleCancel</span>();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">secondaryButton</span>: &#123;</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">                <span class="attr">action</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  event.<span class="property">result</span>.<span class="title function_">handleConfirm</span>();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">cancel</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                event.<span class="property">result</span>.<span class="title function_">handleCancel</span>();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML code (index.html)</span></span><br><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>WebView onAlert Demo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>Click here<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">alert</span>(<span class="string">&quot;Hello World&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41229-Daily-HarmonyOS-Next-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41229-Daily-HarmonyOS-Next-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Face Liveness Detection, NodeController Refresh, Auto-Close Input Box, Row Middle Maximum Width Setting, WebView Singleton</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:22:57 / Modified: 09:36:47" itemprop="dateCreated datePublished" datetime="2025-06-29T09:22:57+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton"><a href="#Daily-HarmonyOS-Knowledge-Face-Liveness-Detection-NodeController-Refresh-Auto-Close-Input-Box-Row-Middle-Maximum-Width-Setting-WebView-Singleton" class="headerlink" title="[Daily HarmonyOS Knowledge] Face Liveness Detection, NodeController Refresh, Auto-Close Input Box, Row Middle Maximum Width Setting, WebView Singleton"></a>[Daily HarmonyOS Knowledge] Face Liveness Detection, NodeController Refresh, Auto-Close Input Box, Row Middle Maximum Width Setting, WebView Singleton</h1><h4 id="1-How-to-invoke-face-liveness-detection-in-HarmonyOS"><a href="#1-How-to-invoke-face-liveness-detection-in-HarmonyOS" class="headerlink" title="1. How to invoke face liveness detection in HarmonyOS?"></a>1. How to invoke face liveness detection in HarmonyOS?</h4><p>For H5 to call app-side methods, refer to the following demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.ets</span></span><br><span class="line"><span class="title class_">Web</span>() <span class="comment">// Register methods</span></span><br><span class="line">  .<span class="title function_">javaScriptProxy</span>(&#123;</span><br><span class="line">    <span class="attr">object</span>: <span class="variable language_">this</span>.<span class="property">testObj</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;testObjName&quot;</span>,</span><br><span class="line">    <span class="attr">methodList</span>: [<span class="string">&quot;getLocationTS&quot;</span>],</span><br><span class="line">    <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">webController</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">testClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getLocationTS</span>(): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// App-side method logic</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// H5 Page</span></span><br><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Get Location Information&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #prize &#123;</span><br><span class="line">            border-radius: 16px 16px 16px 16px;</span><br><span class="line">            background-image: linear-gradient(180deg, #A2DAFF 0%, #EAF5FF 100%);</span><br><span class="line">            margin-left: 1.82%;</span><br><span class="line">            margin-top: 1.43%;</span><br><span class="line">            width: 96.5%;</span><br><span class="line">            height: 96.7%;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style=&quot;width:1000px;height:500px&quot;&gt;</span><br><span class="line">    &lt;input style=&quot;width:1000px;height:100px;font-size:30px&quot; id=&quot;inputText&quot;/&gt;</span><br><span class="line">    &lt;p style=&quot;width:1000px;height:100px;font-size:30px&quot; id=&quot;demo&quot;&gt;p1&lt;/p&gt;</span><br><span class="line">    &lt;button style=&quot;width:1000px;height:100px&quot; onclick=&quot;getLocation()&quot;&gt;</span><br><span class="line">        &lt;span style=&quot;font-size:30px&quot;&gt;Get Location&lt;/span&gt;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function getLocation() &#123;</span><br><span class="line">        // If the ArkTS side returns a promise object, use this method to handle it</span><br><span class="line">        // For details, refer to the API for frontend pages to call app-side functions, including simple and complex types</span><br><span class="line">        // https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-in-page-app-function-invoking-0000001844832802</span><br><span class="line">        </span><br><span class="line">        // H5-side method call</span><br><span class="line">        testObjName.getLocationTS()</span><br><span class="line">        .then((param) =&gt; &#123; document.getElementById(&quot;demo&quot;).innerHTML = &quot;testObjName.getLocationTS()--&quot; + JSON.stringify(param) &#125;)</span><br><span class="line">        .catch((param) =&gt; &#123; document.getElementById(&quot;demo&quot;).innerHTML = &quot;testObjName.getLocationTS()--&quot; + JSON.stringify(param) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. After calling `this.rebuild()` in HarmonyOS NodeController, the screen does not refresh.  </span><br><span class="line">Using NodeController, when first entering the page, `makeNode` is automatically called back to draw three question boxes. Later, an external call to `onSelectBoxChange` updates `nodeArray` and manually calls `this.rebuild()`. `makeNode` is called back again, but the newly drawn boxes do not appear on the page.  </span><br><span class="line"></span><br><span class="line">Reference demo:  </span><br><span class="line">```typescript</span><br><span class="line">import &#123; RenderNode, DrawContext, FrameNode, NodeController &#125; from &quot;@ohos.ArkUI.node&quot;;</span><br><span class="line">import drawing from &quot;@ohos.graphics.drawing&quot;;</span><br><span class="line"></span><br><span class="line">class TextRenderNode extends RenderNode &#123;</span><br><span class="line">  async draw(context: DrawContext) &#123;</span><br><span class="line">    const canvas = context.canvas;</span><br><span class="line">    const pen = new drawing.Pen();</span><br><span class="line">    pen.setStrokeWidth(5);</span><br><span class="line">    pen.setColor(&#123; alpha: 255, red: 255, green: 0, blue: 0 &#125;);</span><br><span class="line">    let path = new drawing.Path();</span><br><span class="line">    path.moveTo(10, 10);</span><br><span class="line">    path.arcTo(10, 10, 200, 200, 0, 150);</span><br><span class="line">    path.close();</span><br><span class="line">    canvas.attachPen(pen);</span><br><span class="line">    canvas.drawPath(path);</span><br><span class="line">    canvas.detachPen();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyNodeController extends NodeController &#123;</span><br><span class="line">  private rootNode: FrameNode | null = null;</span><br><span class="line">  private nodeArray: Array&lt;TextRenderNode&gt; = [];</span><br><span class="line"></span><br><span class="line">  addMyNode(item: TextRenderNode) &#123;</span><br><span class="line">    this.nodeArray.push(item);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  makeNode(uiContext: UIContext): FrameNode | null &#123;</span><br><span class="line">    this.rootNode = new FrameNode(uiContext);</span><br><span class="line">    const renderNode = this.rootNode.getRenderNode();</span><br><span class="line">    if (renderNode === null) &#123;</span><br><span class="line">      return this.rootNode;</span><br><span class="line">    &#125;</span><br><span class="line">    if (renderNode) &#123;</span><br><span class="line">      renderNode.clearChildren();</span><br><span class="line">      this.nodeArray.forEach((item) =&gt; &#123;</span><br><span class="line">        renderNode.appendChild(item);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    return this.rootNode;</span><br><span class="line">  &#125;</span><br><span class="line">  // onTouchEvent(event: TouchEvent): void &#123;</span><br><span class="line">  //   this.nodeArray.forEach((node, index) =&gt; &#123; // this is undefined, cannot access parameters of the current class&lt;---------</span><br><span class="line">  //     console.log(JSON.stringify(this.nodeArray) + &#x27;De-Ma-Xi-Ya&#x27;)</span><br><span class="line">  //   &#125;)</span><br><span class="line">  // &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State newNode: TextRenderNode = new TextRenderNode();</span><br><span class="line">  @State nodeCV: MyNodeController = new MyNodeController();</span><br><span class="line">  tempY = 0;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        NodeContainer(this.nodeCV)</span><br><span class="line">          .width(&#x27;100%&#x27;)</span><br><span class="line">          .height(200);</span><br><span class="line">        Button(&#x27;Invalidate&#x27;)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            let newNode = new TextRenderNode();</span><br><span class="line">            newNode.frame = &#123; x: 0, y: this.tempY, width: 200, height: 100 &#125;;</span><br><span class="line">            this.nodeCV.addMyNode(newNode);</span><br><span class="line">            this.nodeCV.rebuild();</span><br><span class="line">            this.tempY += 100;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 3. In HarmonyOS TextInput, how to automatically close the input box when the text reaches a certain length?  </span><br><span class="line">Demo for automatically closing TextInput when the input character count reaches the set length:  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct FirstTest &#123;</span><br><span class="line">  @State message1: string = &#x27;Hello World&#x27;;</span><br><span class="line">  private controller: TextInputController = new TextInputController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&quot;FirstTest: &quot; + this.message1)</span><br><span class="line">        .fontSize(25)</span><br><span class="line">        .fontWeight(FontWeight.Bold);</span><br><span class="line"></span><br><span class="line">      TextInput(&#123; placeholder: &#x27;Waiting for input&#x27;, text: $$this.message1, controller: this.controller &#125;)</span><br><span class="line">        .fontSize(25)</span><br><span class="line">        .fontWeight(FontWeight.Bold)</span><br><span class="line">        .onChange(() =&gt; &#123;</span><br><span class="line">          if (this.message1.length &gt;= 20) &#123;</span><br><span class="line">            this.controller.stopEditing();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 4. How to set the maximum width for the middle element in a HarmonyOS Row?  </span><br><span class="line">Use `constraintSize(&#123; maxWidth: Infinity &#125;)` to limit the size range.  </span><br><span class="line"></span><br><span class="line">#### 5. How to create a singleton WebView component in HarmonyOS?  </span><br><span class="line">Only a singleton object can be created. Example:  </span><br><span class="line">```typescript</span><br><span class="line">export class GlobalContext &#123;</span><br><span class="line">  private constructor() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private static instance: GlobalContext;</span><br><span class="line">  private _objects = new Map&lt;string, Object&gt;();</span><br><span class="line"></span><br><span class="line">  public static getContext(): GlobalContext &#123;</span><br><span class="line">    if (!GlobalContext.instance) &#123;</span><br><span class="line">      GlobalContext.instance = new GlobalContext();</span><br><span class="line">    &#125;</span><br><span class="line">    return GlobalContext.instance;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getObject(value: string): Object | undefined &#123;</span><br><span class="line">    return this._objects.get(value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setObject(key: string, objectClass: Object): void &#123;</span><br><span class="line">    this._objects.set(key, objectClass);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41228-Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41228-Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Shape Description, Global Loading Component, Checkbox Style, H5 Keyboard Hide Listening, Popup Not Closing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:22:06 / Modified: 09:22:25" itemprop="dateCreated datePublished" datetime="2025-06-29T09:22:06+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing"><a href="#Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Shape Description, Global Loading Component, Checkbox Style, H5 Keyboard Hide Listening, Popup Not Closing"></a>[Daily HarmonyOS Next Knowledge] Shape Description, Global Loading Component, Checkbox Style, H5 Keyboard Hide Listening, Popup Not Closing</h1><h4 id="1-Does-HarmonyOS-have-XML-described-Shapes"><a href="#1-Does-HarmonyOS-have-XML-described-Shapes" class="headerlink" title="1. Does HarmonyOS have XML-described Shapes?"></a>1. Does HarmonyOS have XML-described Shapes?</h4><p>Is there an XML-described Shape?  </p>
<p>The official documentation provides reference materials for corresponding Shapes. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-drawing-components-shape-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-drawing-components-shape-V5</a>  </p>
<ul>
<li>The parent component of drawing components describes common attributes supported by all drawing components.</li>
</ul>
<ol>
<li>Use Shape as the parent component for drawing components to achieve effects similar to SVG.  </li>
<li>Use drawing components individually to draw specified graphics on the page.</li>
</ol>
<p>If XML format is required, use the XML generation method to create an XML Shape. Refer to the XML generation documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/xml-generation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/xml-generation-V5</a>  </p>
<h4 id="2-HarmonyOS-global-loading-component"><a href="#2-HarmonyOS-global-loading-component" class="headerlink" title="2. HarmonyOS global loading component"></a>2. HarmonyOS global loading component</h4><p>A global loading component that starts loading before calling an interface and closes loading when the interface call ends.  </p>
<p>Requires globally reusable loading popup code without rewriting it for each page.  </p>
<p>Currently, declaring a global CustomDialogController is not supported. CustomDialogController is only valid when used as a member variable of @CustomDialog and @Component struct and assigned within the @Component struct.  </p>
<p>It is recommended to use promptAction.openCustomDialog. Related documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a>  </p>
<p>The customDialogId of the dialog should remain consistent. It is recommended to use a global variable. Refer to the demo below:  </p>
<pre><code class="language-typescript">//index.ets
import &#123; promptAction &#125; from &#39;@kit.ArkUI&#39;
import &#123; customDialogBuilder &#125; from &#39;./components&#39;

AppStorage.setOrCreate(&#39;customDialogId&#39;, 0);
@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Hello World&#39;
  @StorageLink(&#39;customDialogId&#39;) customDialogId: number = 1;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .onClick(() =&gt; &#123;
            promptAction.openCustomDialog(&#123;
              builder: customDialogBuilder.bind(this)
            &#125;).then((dialogId: number) =&gt; &#123;
              this.customDialogId = dialogId
            &#125;)
          &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;

//custom.ets
import promptAction from &#39;@ohos.promptAction&#39;

@Builder
export function customDialogBuilder() &#123;
  Column() &#123;
    Text(&#39;Custom dialog Message&#39;).fontSize(10)
    Row() &#123;
      Button(&quot;Confirm&quot;).onClick(() =&gt; &#123;
        promptAction.closeCustomDialog(AppStorage.get&lt;number&gt;(&#39;customDialogId&#39;))
      &#125;)
      Blank().width(50)
      Button(&quot;Cancel&quot;).onClick(() =&gt; &#123;
        promptAction.closeCustomDialog(AppStorage.get&lt;number&gt;(&#39;customDialogId&#39;))
      &#125;)
    &#125;
  &#125;.height(200).padding(5)
&#125;
</code></pre>
<h4 id="3-How-to-switch-the-style-of-Toggle-and-Checkbox-to-rounded-square-in-HarmonyOS"><a href="#3-How-to-switch-the-style-of-Toggle-and-Checkbox-to-rounded-square-in-HarmonyOS" class="headerlink" title="3. How to switch the style of Toggle and Checkbox to rounded square in HarmonyOS?"></a>3. How to switch the style of Toggle and Checkbox to rounded square in HarmonyOS?</h4><p>How to switch the styles of Toggle and Checkbox to rounded square? By default, they appear as circles. How to switch back to rounded square?  </p>
<p>ToggleType currently only supports three types as documented. For rounded square style, use Checkbox.  </p>
<ul>
<li>Toggle reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-basic-toggle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-basic-toggle-V5</a></li>
</ul>
<p>For Checkbox style, checking the underlying code shows that CheckBoxShape has two types: CheckBoxShape.ROUNDED_SQUARE (value 1) represents the rounded square style.  </p>
<ul>
<li>Checkbox reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-checkbox-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-checkbox-V5</a></li>
</ul>
<h4 id="4-Can-HarmonyOS-H5-listen-for-keyboard-hiding-via-document-addEventListener-“keyboardhide”-function"><a href="#4-Can-HarmonyOS-H5-listen-for-keyboard-hiding-via-document-addEventListener-“keyboardhide”-function" class="headerlink" title="4. Can HarmonyOS H5 listen for keyboard hiding via document.addEventListener(“keyboardhide”, function())?"></a>4. Can HarmonyOS H5 listen for keyboard hiding via document.addEventListener(“keyboardhide”, function())?</h4><p>Listening for “resize” can achieve this. Refer to the demo below:  </p>
<pre><code class="language-javascript">// Listen for window changes
var originHeight = window.innerHeight;
window.addEventListener(&quot;resize&quot;, function() &#123;
  if (window.innerHeight &lt; originHeight) &#123;
    // Keyboard is open
  &#125; else &#123;
    // Keyboard is hidden
  &#125;
&#125;);
</code></pre>
<h4 id="5-In-HarmonyOS-when-navigating-to-the-next-page-the-popup-from-the-previous-page-occasionally-appears-on-the-next-page"><a href="#5-In-HarmonyOS-when-navigating-to-the-next-page-the-popup-from-the-previous-page-occasionally-appears-on-the-next-page" class="headerlink" title="5. In HarmonyOS, when navigating to the next page, the popup from the previous page occasionally appears on the next page."></a>5. In HarmonyOS, when navigating to the next page, the popup from the previous page occasionally appears on the next page.</h4><p>Confirm whether the popup has the showInSubWindow attribute set to true. Setting this attribute displays the popup in a sub-window, causing it to remain open after navigation.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41227-Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41227-Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Method Press Effect, Web Component Rebound, H5 Back Issue, Flex Two-Line Limit, Custom Password Input Style</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:21:24 / Modified: 09:36:48" itemprop="dateCreated datePublished" datetime="2025-06-29T09:21:24+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style"><a href="#Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Input Method Press Effect, Web Component Rebound, H5 Back Issue, Flex Two-Line Limit, Custom Password Input Style"></a>[Daily HarmonyOS Next Knowledge] Input Method Press Effect, Web Component Rebound, H5 Back Issue, Flex Two-Line Limit, Custom Password Input Style</h1><h4 id="1-Press-effect-of-input-method-keyboard-keys-in-HarmonyOS"><a href="#1-Press-effect-of-input-method-keyboard-keys-in-HarmonyOS" class="headerlink" title="1. Press effect of input method keyboard keys in HarmonyOS"></a>1. Press effect of input method keyboard keys in HarmonyOS</h4><p>The Button component can use the <code>stateEffect</code> attribute to set whether to enable the press state display effect when the button is pressed. Refer to the links below:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-button-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-button-V5</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/blog/topic/03113927877624007">https://developer.huawei.com/consumer/cn/blog/topic/03113927877624007</a></li>
</ul>
<p>Key events refer to events triggered when components interact with key devices such as keyboards and remote controls, applicable to all focusable components (e.g., Button). For components like Text and Image that are not focusable by default, key events can be used by setting the <code>focusable</code> attribute to <code>true</code>.  </p>
<h4 id="2-Does-the-HarmonyOS-Web-component-have-a-rebound-capability-when-sliding-to-the-boundary"><a href="#2-Does-the-HarmonyOS-Web-component-have-a-rebound-capability-when-sliding-to-the-boundary" class="headerlink" title="2. Does the HarmonyOS Web component have a rebound capability when sliding to the boundary?"></a>2. Does the HarmonyOS Web component have a rebound capability when sliding to the boundary?</h4><p><code>overscrollmode</code> attribute: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#overscrollmode11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#overscrollmode11</a>  </p>
<p><code>overScrollMode(mode: OverScrollMode)</code><br>Sets the Web over-scroll mode (disabled by default). When over-scroll mode is enabled, the Web uses elastic animation to rebound the interface when the user slides to the edge of the Web root page; internal pages within the root page do not trigger rebound.  </p>
<p>Sample code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; webview &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkWeb&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> webview.<span class="title class_">WebviewController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mode</span>: <span class="title class_">OverScrollMode</span> = <span class="title class_">OverScrollMode</span>.<span class="property">ALWAYS</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: <span class="string">&#x27;www.example.com&#x27;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">overScrollMode</span>(<span class="variable language_">this</span>.<span class="property">mode</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Issues with H5 hash routing back navigation in HarmonyOS  </span></span><br><span class="line"><span class="string">When H5 uses hash routing, clicking the back button closes the page directly without performing route back navigation; history routing works normally.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Causes**:  </span></span><br><span class="line"><span class="string">1. Incorrect route configuration: HarmonyOS system route configuration requires correct settings for route paths and data request interfaces. Incorrect route table or data request interface configuration may cause back navigation issues.  </span></span><br><span class="line"><span class="string">2. Improper page lifecycle management: On HarmonyOS, page lifecycle management requires special attention. For example, if a data request interface is called in `</span>onInit<span class="string">` but not handled in `</span>onError<span class="string">` or other lifecycle methods, the data request may not execute correctly, affecting back navigation.  </span></span><br><span class="line"><span class="string">3. Data acquisition and assignment issues: On HarmonyOS, data acquisition and assignment need careful handling. For example, if data returned by the request interface is not correctly assigned to the page data model, data inconsistency may occur, affecting back navigation.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. Check route configuration: Ensure correct route paths and data request interface configurations, and clear route跳转 logic.  </span></span><br><span class="line"><span class="string">2. Properly manage page lifecycles: Handle data requests and assignments in lifecycle methods (e.g., `</span>onInit<span class="string">`, `</span>onError<span class="string">`) to ensure data is processed in the correct lifecycle phase.  </span></span><br><span class="line"><span class="string">3. Properly handle data acquisition and assignment: Ensure data returned by request interfaces is correctly processed and assigned to avoid data inconsistency.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to use Flex to limit content to 2 lines with folding for overflow in HarmonyOS  </span></span><br><span class="line"><span class="string">Refer to the demo below:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> measure <span class="keyword">from</span> <span class="string">&#x27;@ohos.measure&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> display <span class="keyword">from</span> <span class="string">&#x27;@ohos.display&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">childMaxWidth</span>: <span class="built_in">number</span> = <span class="number">500</span>; <span class="comment">// Width in px for subsequent calculations</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">displayClass</span>: display.<span class="property">Display</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">componentWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  displayClass = display.<span class="title function_">getDefaultDisplaySync</span>();</span><br><span class="line">  componentWidth = displayClass.<span class="property">width</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber displayClass.width:&#x27;</span> + displayClass.<span class="property">width</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Flex_overNumber Failed to obtain the default display object. Code: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextItem</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">fontSizeData</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="variable language_">this</span>.<span class="property">fontSizeData</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#c4c2cc&#x27;</span>)</span><br><span class="line">      .<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxWidth</span>: childMaxWidth + <span class="string">&#x27;px&#x27;</span> &#125;)</span><br><span class="line">      .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">      .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Flex</span>_overNumber &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;IndexChange&#x27;</span>) <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;textChange&#x27;</span>) <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">FlexWidth</span>: <span class="built_in">string</span> = <span class="string">&#x27;80%&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">newIndex</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">heightControl</span>: <span class="built_in">number</span> | <span class="built_in">string</span> = <span class="number">100</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">ButtonText</span>: <span class="built_in">string</span> = <span class="string">&#x27;∨&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">AllData</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;333&#x27;</span>, <span class="string">&#x27;44444&#x27;</span>, <span class="string">&#x27;55&#x27;</span>, <span class="string">&#x27;666&#x27;</span>, <span class="string">&#x27;7777&#x27;</span>, <span class="string">&#x27;8888888888888&#x27;</span>, <span class="string">&#x27;99&#x27;</span>, <span class="string">&#x27;3434&#x27;</span>, <span class="string">&#x27;5656&#x27;</span>, <span class="string">&#x27;7878&#x27;</span>, <span class="string">&#x27;141414141&#x27;</span>, <span class="string">&#x27;68681&#x27;</span>];</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">SomeData</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">ShowData</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">fontSizeData</span>: <span class="built_in">number</span> = <span class="number">30</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">AllWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">textWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">restrictWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">IndexChange</span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">AllWidth</span> &gt;= (<span class="variable language_">this</span>.<span class="property">restrictWidth</span> - childMaxWidth) &amp;&amp; <span class="variable language_">this</span>.<span class="property">AllWidth</span> &lt;= (<span class="variable language_">this</span>.<span class="property">restrictWidth</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">newIndex</span> = <span class="variable language_">this</span>.<span class="property">index</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 newIndex&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">textChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">content</span>: <span class="built_in">string</span> = <span class="variable language_">this</span>.<span class="property">message</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textWidth</span> = measure.<span class="title function_">measureText</span>(&#123;</span><br><span class="line">      <span class="attr">textContent</span>: content,</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="variable language_">this</span>.<span class="property">fontSizeData</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">textWidth</span> &gt; childMaxWidth) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">AllWidth</span> += childMaxWidth;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">AllWidth</span> += <span class="variable language_">this</span>.<span class="property">textWidth</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 content&#x27;</span>, content);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 Width&#x27;</span>, <span class="variable language_">this</span>.<span class="property">textWidth</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (componentWidth != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">restrictWidth</span> = componentWidth * <span class="number">1.2</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 componentWidth&#x27;</span>, componentWidth);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 restrictWidth&#x27;</span>, <span class="variable language_">this</span>.<span class="property">restrictWidth</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">AllData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">message</span> = <span class="variable language_">this</span>.<span class="property">AllData</span>[i];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">index</span> = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;text1 change newIndex&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">SomeData</span> = <span class="variable language_">this</span>.<span class="property">AllData</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span> + <span class="number">1</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ShowData</span> = <span class="variable language_">this</span>.<span class="property">SomeData</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ShowData</span>,</span><br><span class="line">            <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="title class_">TextItem</span>(&#123; <span class="attr">message</span>: item, <span class="attr">fontSizeData</span>: <span class="variable language_">this</span>.<span class="property">fontSizeData</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          );</span><br><span class="line">          <span class="title class_">Button</span>(<span class="variable language_">this</span>.<span class="property">ButtonText</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">heightControl</span> === <span class="number">100</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">heightControl</span> = <span class="string">&#x27;100%&#x27;</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ButtonText</span> = <span class="string">&#x27;^&#x27;</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ShowData</span> = <span class="variable language_">this</span>.<span class="property">AllData</span>;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">heightControl</span> = <span class="number">100</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ButtonText</span> = <span class="string">&#x27;v&#x27;</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ShowData</span> = <span class="variable language_">this</span>.<span class="property">SomeData</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">40</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxHeight</span>: <span class="variable language_">this</span>.<span class="property">heightControl</span> &#125;)</span><br><span class="line">        .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">FlexWidth</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&#x27;5%&#x27;</span> &#125;)</span><br><span class="line">        .<span class="title function_">clip</span>(<span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to customize the style of TextInput password input in HarmonyOS  </span></span><br><span class="line"><span class="string">Refer to the code below:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">  <span class="title class_">TextInput</span>(&#123; <span class="attr">placeholder</span>: <span class="string">&quot;请输入密码&quot;</span> &#125;)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">100</span>, <span class="attr">left</span>: <span class="string">&#x27;10%&#x27;</span> &#125;)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">type</span>(<span class="title class_">InputType</span>.<span class="property">Password</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">showPasswordIcon</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="title class_">Line</span>()</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">0.5</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&#x27;10%&#x27;</span> &#125;)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41226-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41226-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Dark Mode, Webview Version Check, Window Brightness Setting, List Cache Node Update, Precompiled JS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:18:17 / Modified: 09:36:49" itemprop="dateCreated datePublished" datetime="2025-06-29T09:18:17+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS"><a href="#Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Dark Mode, Webview Version Check, Window Brightness Setting, List Cache Node Update, Precompiled JS"></a>[Daily HarmonyOS Next Knowledge] Dark Mode, Webview Version Check, Window Brightness Setting, List Cache Node Update, Precompiled JS</h1><h4 id="1-In-HarmonyOS-dark-mode-the-color-obtained-via-resourcemanager-getColor-for-Canvas-drawing-does-not-match-the-actual-dark-mode-color"><a href="#1-In-HarmonyOS-dark-mode-the-color-obtained-via-resourcemanager-getColor-for-Canvas-drawing-does-not-match-the-actual-dark-mode-color" class="headerlink" title="1. In HarmonyOS dark mode, the color obtained via resourcemanager.getColor for Canvas drawing does not match the actual dark mode color."></a>1. In HarmonyOS dark mode, the color obtained via resourcemanager.getColor for Canvas drawing does not match the actual dark mode color.</h4><ol>
<li>Correctly obtain the resource: <code>resourcemanager.getColorSync($r(&#39;app.color.test_color&#39;).id);</code>  </li>
<li>For dark mode Canvas drawing adaptation, listen to <code>onConfigurationUpdate</code> to monitor and save the dark mode status to AppStorage, then use <code>@Watch</code> to listen for state changes and trigger Canvas redrawing: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5</a></li>
</ol>
<p>By default, the app follows the system to switch between light and dark modes. To fix the app’s mode independently:  </p>
<pre><code class="language-typescript">onCreate(): void &#123;
  hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onCreate&#39;);
  this.context.getApplicationContext().setColorMode(ConfigurationConstant.ColorMode.COLOR_MODE_DARK);
&#125;
</code></pre>
<h4 id="2-How-to-check-the-API-version-in-HarmonyOS-Webview"><a href="#2-How-to-check-the-API-version-in-HarmonyOS-Webview" class="headerlink" title="2. How to check the API version in HarmonyOS Webview?"></a>2. How to check the API version in HarmonyOS Webview?</h4><p>When executing <code>hdc shell getprop hw_sc.build.os.apiversion</code>, the command is unavailable. Use the following methods in hdc:  </p>
<pre><code class="language-bash">param get const.ohos.apiversion  # Output: 11
param get const.ohos.releasetype  # Output: Canary1
param get const.ohos.fullname     # Output: OpenHarmony-4.1.1.5
</code></pre>
<p>Version description: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-releases-V5/overview-baseline-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-releases-V5/overview-baseline-V5</a>  </p>
<h4 id="3-After-setting-brightness-via-window-setWindowBrightness-in-HarmonyOS-the-system-brightness-adjustment-becomes-ineffective"><a href="#3-After-setting-brightness-via-window-setWindowBrightness-in-HarmonyOS-the-system-brightness-adjustment-becomes-ineffective" class="headerlink" title="3. After setting brightness via window.setWindowBrightness in HarmonyOS, the system brightness adjustment becomes ineffective."></a>3. After setting brightness via <code>window.setWindowBrightness</code> in HarmonyOS, the system brightness adjustment becomes ineffective.</h4><p><strong>Behavior specification</strong>: When the window sets the screen brightness, the control center cannot adjust the system brightness. The control center resumes functionality after the window restores the default system brightness.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<p><strong>Window module capabilities</strong>:  </p>
<ul>
<li><strong>Window</strong>: The basic unit managed by the window manager.  </li>
<li><strong>WindowStage</strong>: Manages all window units.</li>
</ul>
<p><strong>Method</strong>: <code>setWindowBrightness(brightness: number, callback: AsyncCallback&lt;void&gt;): void</code>  </p>
<ul>
<li>Allows the app’s main window to set the screen brightness asynchronously via a callback.  </li>
<li><strong>Parameters</strong>:  <table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">brightness</td>
<td align="left">number</td>
<td align="left">Yes</td>
<td align="left">Brightness value (float, range: [0.0, 1.0] or -1.0; 1.0 &#x3D; maximum, -1.0 &#x3D; default).</td>
</tr>
<tr>
<td align="left">callback</td>
<td align="left">AsyncCallback<void></td>
<td align="left">Yes</td>
<td align="left">Asynchronous callback.</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="4-In-HarmonyOS-List-updates-refresh-all-cached-nodes-including-invisible-areas"><a href="#4-In-HarmonyOS-List-updates-refresh-all-cached-nodes-including-invisible-areas" class="headerlink" title="4. In HarmonyOS, List updates refresh all cached nodes (including invisible areas)."></a>4. In HarmonyOS, List updates refresh all cached nodes (including invisible areas).</h4><p><strong>Solution</strong>: Use component freezing: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-custom-components-freeze.md#navigation">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-custom-components-freeze.md#navigation</a>  </p>
<p><strong>Freezing principles</strong>:  </p>
<ol>
<li>Enable via <code>freezeWhenInactive</code> to activate the freezing mechanism.  </li>
<li>The system only updates active custom components, narrowing the update scope to visible areas.  </li>
<li>Inactive components refresh when they become active.</li>
</ol>
<p><strong>Applicable scenarios</strong>:  </p>
<ul>
<li>Page routing: Top-of-stack pages are active; others are inactive.  </li>
<li>TabContent: Only the current tab’s components are active.  </li>
<li>LazyForEach: Only visible components are active; cached nodes are inactive.  </li>
<li>Navigation: Only the current NavDestination’s components are active.  </li>
<li>Component reuse: Nodes in the reuse pool are inactive; mounted nodes are active.</li>
</ul>
<h4 id="5-Inquiries-about-HarmonyOS-precompileJavaScript"><a href="#5-Inquiries-about-HarmonyOS-precompileJavaScript" class="headerlink" title="5. Inquiries about HarmonyOS precompileJavaScript."></a>5. Inquiries about HarmonyOS precompileJavaScript.</h4><p><strong>Question 1</strong>: How does the businessWebview use the bytecode cache generated by <code>precompileWebview.controller.precompileJavaScript</code>? Are bytecode caches shared across different Web components?  </p>
<ul>
<li>The businessWebview must set the cache mode. If the local cached JS matches the requested URL, the cache is used first.  </li>
<li>Caches are shared if <code>precompileJavaScript</code> is used.</li>
</ul>
<p><strong>Question 2</strong>: Can thousands of local JS files be precompiled into bytecode for Web components?  </p>
<ul>
<li>Not recommended. Precompile JS files only when needed to avoid performance overhead.</li>
</ul>
<p><strong>Question 3</strong>: Which performs better: ① Using precompiled JS cache for businessWebview; ② Directly loading local resources?  </p>
<ul>
<li>Performance depends on bottlenecks:  <ul>
<li>If JS compilation is slow, use precompilation.  </li>
<li>If resource loading is slow, use resource pre-caching.</li>
</ul>
</li>
<li>These methods are complementary, not mutually exclusive.</li>
</ul>
<p>Performance optimization reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41225-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41225-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:17:22 / Modified: 09:36:50" itemprop="dateCreated datePublished" datetime="2025-06-29T09:17:22+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors"><a href="#Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors" class="headerlink" title="[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors"></a>[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</h1><h4 id="1-HarmonyOS-RichText-Display-Issues"><a href="#1-HarmonyOS-RichText-Display-Issues" class="headerlink" title="1. HarmonyOS RichText Display Issues"></a>1. HarmonyOS RichText Display Issues</h4><pre><code class="language-typescript">build() &#123;
  Column() &#123;
    Row(&#123;space:10&#125;) &#123;
      Column() &#123;
        RichText(  this.item.title ?? &quot;&quot; )
          .width(&quot;100%&quot;)
          .height(80)

        Text(this.item.desc ?? &quot;&quot;)
          .fontSize(12)
          .fontColor(0x9e9e9e)

      &#125;
      .margin(&#123;left: 10&#125;)
      .layoutWeight(1)
      .alignItems(HorizontalAlign.Start)
      .justifyContent(FlexAlign.SpaceAround)
      .height(&#39;100%&#39;)

      Blank()

      Image(this.item.banner ?? &quot;&quot;)
        .width(this.picWidth)
        .objectFit(ImageFit.Fill)
        .height( this.picWidth * 0.75 )
        .borderRadius(4)
    &#125;
    .padding(&#123;left:20,right:20&#125;)
    .height( 20 + this.picWidth * 0.75 )
    .width(&quot;100%&quot;)

  &#125;
&#125;
</code></pre>
<p><strong>Problem</strong>: When content is passed to RichText, the displayed text is too small, and the RichText component allows scrolling. How to display it normally?  </p>
<p><strong>Solution</strong>:  </p>
<ul>
<li>Font size in RichText can be set via styles, e.g., <code>&lt;p style=&quot;font-size: 35px;text-align: center;font-weight: bold; color: rgb(24,78,228)&quot;&gt;Font size 35px, line height 45px&lt;p&gt;</code>.  </li>
<li>The default viewport size for mobile devices is 980px, ensuring most web pages render properly. If the RichText component width is smaller, the HTML content may create a scrollable area within the component. To override the default, add the following tag to the content:<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834</a></li>
</ul>
<h4 id="2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component"><a href="#2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component" class="headerlink" title="2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?"></a>2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?</h4><p><strong>Answer</strong>:  </p>
<ul>
<li>Slider has no default padding.  </li>
<li><strong>Horizontal Slider</strong>: Default height is 40vp, width matches the parent container. The slider is centered with 10vp spacing on both sides. Setting padding does not override this spacing.  </li>
<li><strong>Vertical Slider</strong>: Default width is 40vp, height matches the parent container. The slider is centered with 6vp spacing on both top and bottom. Setting padding does not override this spacing.</li>
</ul>
<p><strong>Note</strong>: The built-in spacing cannot be removed because the slider thumb must remain within the component bounds at both ends.  </p>
<h4 id="3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView"><a href="#3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView" class="headerlink" title="3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView"></a>3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView</h4><p><strong>Solutions</strong>:  </p>
<ul>
<li>For two-way communication in WebView, use JSBridge or port communication technologies.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5</a>  </li>
<li>Related case study: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact</a></li>
</ul>
<h4 id="4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401"><a href="#4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401" class="headerlink" title="4. After successfully creating an AVSession in HarmonyOS, setting metadata via setAVMetadata throws error code 401"></a>4. After successfully creating an AVSession in HarmonyOS, setting metadata via <code>setAVMetadata</code> throws error code 401</h4><p><strong>Cause</strong>: Error 401 indicates incorrect parameter types.<br><strong>Solution</strong>:  </p>
<ul>
<li>Check that all parameters match the required types.  </li>
<li>Fields without values should not be set, as parameters are strictly type-checked.</li>
</ul>
<h4 id="5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS"><a href="#5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS" class="headerlink" title="5. How to resolve the blank screen during Webview page loading in HarmonyOS?"></a>5. How to resolve the blank screen during Webview page loading in HarmonyOS?</h4><p><strong>Solution</strong>: Use preloading to download page resources (main and sub-resources) in advance without executing JavaScript or rendering the page, thus speeding up loading.  </p>
<ul>
<li>Official preloading documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10</a>  </li>
<li>Web performance optimization guide: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a></li>
</ul>
<p><strong>Common optimization methods</strong>:  </p>
<ul>
<li><strong>Web Page Loading Optimization</strong>: Critical for user experience; faster loading improves app fluency.  </li>
<li><strong>JSBridge</strong>: Reduces redundant environment switches between ArkTS and Web, avoiding UI blocking.  </li>
<li><strong>Same-Layer Rendering</strong>: Layers page elements to minimize repaints and reflows, enhancing rendering efficiency.</li>
</ul>
<p><strong>Note</strong>: ArkWeb provides tools to optimize page display speed. Implementing these methods improves performance, user experience, satisfaction, and retention.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41224-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41224-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:16:12 / Modified: 09:36:50" itemprop="dateCreated datePublished" datetime="2025-06-29T09:16:12+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors"><a href="#Daily-HarmonyOS-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors" class="headerlink" title="[Daily HarmonyOS Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors"></a>[Daily HarmonyOS Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</h1><h4 id="1-HarmonyOS-RichText-Display-Issues"><a href="#1-HarmonyOS-RichText-Display-Issues" class="headerlink" title="1. HarmonyOS RichText Display Issues"></a>1. HarmonyOS RichText Display Issues</h4><pre><code class="language-typescript">build() &#123;
  Column() &#123;
    Row(&#123;space:10&#125;) &#123;
      Column() &#123;
        RichText(  this.item.title ?? &quot;&quot; )
          .width(&quot;100%&quot;)
          .height(80)

        Text(this.item.desc ?? &quot;&quot;)
          .fontSize(12)
          .fontColor(0x9e9e9e)

      &#125;
      .margin(&#123;left: 10&#125;)
      .layoutWeight(1)
      .alignItems(HorizontalAlign.Start)
      .justifyContent(FlexAlign.SpaceAround)
      .height(&#39;100%&#39;)

      Blank()

      Image(this.item.banner ?? &quot;&quot;)
        .width(this.picWidth)
        .objectFit(ImageFit.Fill)
        .height( this.picWidth * 0.75 )
        .borderRadius(4)
    &#125;
    .padding(&#123;left:20,right:20&#125;)
    .height( 20 + this.picWidth * 0.75 )
    .width(&quot;100%&quot;)

  &#125;
&#125;
</code></pre>
<p><strong>Problem</strong>: When content is passed to RichText, the displayed text is too small, and the RichText component allows scrolling. How to display it normally?  </p>
<p><strong>Solution</strong>:  </p>
<ul>
<li>Font size in RichText can be set via styles, e.g., <code>&lt;p style=&quot;font-size: 35px;text-align: center;font-weight: bold; color: rgb(24,78,228)&quot;&gt;Font size 35px, line height 45px&lt;p&gt;</code>.  </li>
<li>The default viewport size for mobile devices is 980px, ensuring most web pages render properly. If the RichText component width is smaller, the HTML content may create a scrollable area within the component. To override the default, add the following tag to the content:<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834</a></li>
</ul>
<h4 id="2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component"><a href="#2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component" class="headerlink" title="2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?"></a>2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?</h4><p><strong>Answer</strong>:  </p>
<ul>
<li>Slider has no default padding.  </li>
<li><strong>Horizontal Slider</strong>: Default height is 40vp, width matches the parent container. The slider is centered with 10vp spacing on both sides. Setting padding does not override this spacing.  </li>
<li><strong>Vertical Slider</strong>: Default width is 40vp, height matches the parent container. The slider is centered with 6vp spacing on both top and bottom. Setting padding does not override this spacing.</li>
</ul>
<p><strong>Note</strong>: The built-in spacing cannot be removed because the slider thumb must remain within the component bounds at both ends.  </p>
<h4 id="3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView"><a href="#3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView" class="headerlink" title="3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView"></a>3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView</h4><p><strong>Solutions</strong>:  </p>
<ul>
<li>For two-way communication in WebView, use JSBridge or port communication technologies.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5</a>  </li>
<li>Related case study: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact</a></li>
</ul>
<h4 id="4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401"><a href="#4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401" class="headerlink" title="4. After successfully creating an AVSession in HarmonyOS, setting metadata via setAVMetadata throws error code 401"></a>4. After successfully creating an AVSession in HarmonyOS, setting metadata via <code>setAVMetadata</code> throws error code 401</h4><p><strong>Cause</strong>: Error 401 indicates incorrect parameter types.<br><strong>Solution</strong>:  </p>
<ul>
<li>Check that all parameters match the required types.  </li>
<li>Fields without values should not be set, as parameters are strictly type-checked.</li>
</ul>
<h4 id="5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS"><a href="#5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS" class="headerlink" title="5. How to resolve the blank screen during Webview page loading in HarmonyOS?"></a>5. How to resolve the blank screen during Webview page loading in HarmonyOS?</h4><p><strong>Solution</strong>: Use preloading to download page resources (main and sub-resources) in advance without executing JavaScript or rendering the page, thus speeding up loading.  </p>
<ul>
<li>Official preloading documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10</a>  </li>
<li>Web performance optimization guide: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a></li>
</ul>
<p><strong>Common optimization methods</strong>:  </p>
<ul>
<li><strong>Web Page Loading Optimization</strong>: Critical for user experience; faster loading improves app fluency.  </li>
<li><strong>JSBridge</strong>: Reduces redundant environment switches between ArkTS and Web, avoiding UI blocking.  </li>
<li><strong>Same-Layer Rendering</strong>: Layers page elements to minimize repaints and reflows, enhancing rendering efficiency.</li>
</ul>
<p><strong>Note</strong>: ArkWeb provides tools to optimize page display speed. Implementing these methods improves performance, user experience, satisfaction, and retention.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">300</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
