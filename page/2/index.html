<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/2/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/121-Daily-HarmonyOS-Next-Knowledge-Dialog-Callback-Issues-Input-Area-Max-Lines-Web-Custom-Nodes-Icon-Library-Soft-Keyboard-Toggle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/121-Daily-HarmonyOS-Next-Knowledge-Dialog-Callback-Issues-Input-Area-Max-Lines-Web-Custom-Nodes-Icon-Library-Soft-Keyboard-Toggle/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Dialog Callback Issues, Input Area Max Lines, Web Custom Nodes, Icon Library, Soft Keyboard Toggle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 09:56:23 / Modified: 09:56:39" itemprop="dateCreated datePublished" datetime="2025-06-27T09:56:23+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Dialog-Callback-Issues-Input-Area-Max-Lines-Web-Custom-Nodes-Icon-Library-Soft-Keyboard-Toggle"><a href="#Daily-HarmonyOS-Next-Knowledge-Dialog-Callback-Issues-Input-Area-Max-Lines-Web-Custom-Nodes-Icon-Library-Soft-Keyboard-Toggle" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Dialog Callback Issues, Input Area Max Lines, Web Custom Nodes, Icon Library, Soft Keyboard Toggle"></a>[Daily HarmonyOS Next Knowledge] Dialog Callback Issues, Input Area Max Lines, Web Custom Nodes, Icon Library, Soft Keyboard Toggle</h3><h4 id="1-HarmonyOS-Why-doesn’t-promptAction-openCustomDialog-contentNode-trigger-the-onWillDismiss-callback"><a href="#1-HarmonyOS-Why-doesn’t-promptAction-openCustomDialog-contentNode-trigger-the-onWillDismiss-callback" class="headerlink" title="1. HarmonyOS: Why doesn’t promptAction.openCustomDialog(contentNode) trigger the onWillDismiss callback?"></a>1. HarmonyOS: Why doesn’t promptAction.openCustomDialog(contentNode) trigger the onWillDismiss callback?</h4><p>Using promptAction.openCustomDialog(contentNode) fails to trigger the onWillDismiss callback.  </p>
<ol>
<li>When users close the dialog by clicking the overlay, swiping left&#x2F;right, pressing the back button, or hitting ESC on the keyboard, if this callback is registered, the dialog will not close immediately. In the callback function, you can obtain the operation type that triggered the close via <code>reason</code> to decide whether to allow closing based on the cause. Currently, the <code>reason</code> returned by the component does not support the <code>CLOSE_BUTTON</code> enumeration value.  </li>
<li>You cannot intercept the onWillDismiss callback again within the onWillDismiss callback.</li>
</ol>
<p>Reference:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-alert-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-alert-dialog-box-V5</a>  </p>
<h4 id="2-HarmonyOS-When-TextArea-sets-maxLines-3-why-does-it-continue-to-increase-in-height-beyond-3-lines"><a href="#2-HarmonyOS-When-TextArea-sets-maxLines-3-why-does-it-continue-to-increase-in-height-beyond-3-lines" class="headerlink" title="2. HarmonyOS: When TextArea sets maxLines(3), why does it continue to increase in height beyond 3 lines?"></a>2. HarmonyOS: When TextArea sets maxLines(3), why does it continue to increase in height beyond 3 lines?</h4><p>How to modify the code to achieve: default height is 3 lines when there is no input, and the input box scrolls when the content exceeds 10 lines.  </p>
<p>Refer to the following code example:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">TextArea(&#123; placeholder: &quot;请输入手机号&quot; &#125;)</span><br><span class="line">  .width(300)</span><br><span class="line">  .placeholderColor(Color.Gray)</span><br><span class="line">  .placeholderFont(&#123; size: 20 &#125;)</span><br><span class="line">  .fontColor(Color.Black)</span><br><span class="line">  .fontSize(20)</span><br><span class="line">  .backgroundColor(Color.Orange)</span><br><span class="line">  .margin(&#123; top: 35, left: 25 &#125;)</span><br><span class="line">  .caretColor(Color.Green)</span><br><span class="line">  .maxLines(3)</span><br><span class="line">  .constraintSize(&#123; maxHeight: 90 &#125;)</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. HarmonyOS: In dynamic creation scenarios, after calling dispose on the custom node BuilderNode mounting a web component, will the originally bound webviewController also be unbound?  </span><br><span class="line">In this case, it will not be unbound.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. HarmonyOS: Does the system have a built-in common icon library?  </span><br><span class="line">Reference link: https://developer.huawei.com/consumer/cn/design/harmonyos-icon/  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. HarmonyOS: How to manually open/close the system soft keyboard?  </span><br><span class="line">You can use focusControl.requestFocus to control the input box to gain focus, and the soft keyboard will automatically pop up after the component gains focus.  </span><br><span class="line"></span><br><span class="line">1. To hide the soft keyboard, make the TextInput lose focus, such as by transferring focus to another component. For example, provide a Button component and set it to gain focus when clicked. When the button is clicked, the TextInput loses focus, and the soft keyboard hides.  </span><br><span class="line">2. Use the focusContrl.requestFocus interface to make the specified component gain focus. Refer to the documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-focus-V5  </span><br><span class="line"></span><br><span class="line">TextInput: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5  </span><br><span class="line"></span><br><span class="line">Note: Components like Text and Image are not focusable by default and cannot trigger focus events in this state.  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; xxx.ets<br>@CustomDialog<br>struct CustomDialogExample {<br>  private focusKey &#x3D; ‘name_input’; &#x2F;&#x2F; Input box focus key<br>  controller?: CustomDialogController<br>  cancel: () &#x3D;&gt; void &#x3D; () &#x3D;&gt; {<br>  }<br>  confirm: () &#x3D;&gt; void &#x3D; () &#x3D;&gt; {<br>  }</p>
<p>  &#x2F;&#x2F; onPageHide(): void {<br>  &#x2F;&#x2F;   focusControl.requestFocus(this.focusKey)<br>  &#x2F;&#x2F; }</p>
<p>  build() {<br>    Column() {<br>      Text(‘这是自定义弹窗’)<br>        .fontSize(30)<br>        .height(100)</p>
<pre><code>  Text(&#39;昵称&#39;)
    .fontSize(20)
    .margin(&#123; top: 10, bottom: 10 &#125;)
  // .key(this.focusKey)
  // .id(this.focusKey)

  TextInput(&#123; placeholder: &#39;输入昵称&#39;,text:&#39;&#39;, &#125;)
    .height(60)
    .width(&#39;90%&#39;)
    .defaultFocus(true)

  Button(&#39;测试&#39;)
    .key(this.focusKey)


  Button(&#39;点我关闭弹窗&#39;)
    .onClick(() =&gt; &#123;
      if (this.controller != undefined) &#123;
        this.controller.close()
      &#125;
    &#125;)
    .margin(20)
&#125;
</code></pre>
<p>  }<br>}<br>@Entry<br>@Component<br>struct CustomDialogUser {<br>  dialogController: CustomDialogController | null &#x3D; new CustomDialogController({<br>    builder: CustomDialogExample({<br>      cancel: ()&#x3D;&gt; { this.onCancel() },<br>      confirm: ()&#x3D;&gt; { this.onAccept() }<br>    }),<br>    cancel: this.existApp,<br>    autoCancel: true,<br>    onWillDismiss:(dismissDialogAction: DismissDialogAction)&#x3D;&gt; {<br>      console.info(“reason&#x3D;” + JSON.stringify(dismissDialogAction.reason))<br>      console.log(“dialog onWillDismiss”)<br>      if (dismissDialogAction.reason &#x3D;&#x3D; DismissReason.PRESS_BACK) {<br>        dismissDialogAction.dismiss()<br>      }<br>      if (dismissDialogAction.reason &#x3D;&#x3D; DismissReason.TOUCH_OUTSIDE) {<br>        dismissDialogAction.dismiss()<br>      }<br>    },<br>    alignment: DialogAlignment.Center,<br>    offset: { dx: 0, dy: -20 },<br>    customStyle: false,<br>    cornerRadius: 20,<br>    width: 300,<br>    height: 400,<br>    borderWidth: 1,<br>    borderStyle: BorderStyle.Dashed,&#x2F;&#x2F;使用borderStyle属性，需要和borderWidth属性一起使用<br>    borderColor: Color.Blue,&#x2F;&#x2F;使用borderColor属性，需要和borderWidth属性一起使用<br>    backgroundColor: Color.White,<br>    shadow: ({ radius: 20, color: Color.Grey, offsetX: 50, offsetY: 0}),<br>  })<br>  &#x2F;&#x2F; 在自定义组件即将析构销毁时将dialogController置空<br>  aboutToDisappear() {<br>    this.dialogController &#x3D; null &#x2F;&#x2F; 将dialogController置空<br>  }</p>
<p>  onCancel() {<br>    console.info(‘Callback when the first button is clicked’)<br>  }</p>
<p>  onAccept() {<br>    console.info(‘Callback when the second button is clicked’)<br>  }</p>
<p>  existApp() {<br>    console.info(‘Click the callback in the blank area’)<br>  }</p>
<p>  build() {<br>    Column() {<br>      Button(‘click me’)<br>        .onClick(() &#x3D;&gt; {<br>          if (this.dialogController !&#x3D; null) {<br>            this.dialogController.open()<br>          }<br>        }).backgroundColor(0x317aff)<br>    }.width(‘100%’).margin({ top: 5 })<br>  }<br>}<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/120-Daily-HarmonyOS-Next-Knowledge-JSBridge-Communication-Input-Placeholder-Size-Book-Page-Turning-Effect-Web-Callback-Functions-Auto-Sliding-Carousel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/120-Daily-HarmonyOS-Next-Knowledge-JSBridge-Communication-Input-Placeholder-Size-Book-Page-Turning-Effect-Web-Callback-Functions-Auto-Sliding-Carousel/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] JSBridge Communication, Input Placeholder Size, Book Page Turning Effect, Web Callback Functions, Auto-Sliding Carousel</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 09:54:54 / Modified: 09:55:31" itemprop="dateCreated datePublished" datetime="2025-06-27T09:54:54+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-JSBridge-Communication-Input-Placeholder-Size-Book-Page-Turning-Effect-Web-Callback-Functions-Auto-Sliding-Carousel"><a href="#Daily-HarmonyOS-Next-Knowledge-JSBridge-Communication-Input-Placeholder-Size-Book-Page-Turning-Effect-Web-Callback-Functions-Auto-Sliding-Carousel" class="headerlink" title="[Daily HarmonyOS Next Knowledge] JSBridge Communication, Input Placeholder Size, Book Page Turning Effect, Web Callback Functions, Auto-Sliding Carousel"></a>[Daily HarmonyOS Next Knowledge] JSBridge Communication, Input Placeholder Size, Book Page Turning Effect, Web Callback Functions, Auto-Sliding Carousel</h3><h4 id="1-HarmonyOS-Data-Anomaly-in-JSBridge-Communication-Between-H5-and-App"><a href="#1-HarmonyOS-Data-Anomaly-in-JSBridge-Communication-Between-H5-and-App" class="headerlink" title="1. HarmonyOS: Data Anomaly in JSBridge Communication Between H5 and App"></a>1. HarmonyOS: Data Anomaly in JSBridge Communication Between H5 and App</h4><p>When using JSBridge for H5-app communication, complex or large data transmitted from H5 cannot be observed in the ArkTS console, and specific attributes cannot be obtained.  </p>
<p>The compiler truncates large character strings, but you can use the following methods:<br><strong>Solution 1</strong>: For large JSON strings, parse them into JSON objects before printing:  </p>
<pre><code class="language-javascript">let largeJsonString = &#39;&#123;&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;&#125;&#39;; // Large JSON string
try &#123;
  console.log(JSON.stringify(JSON.parse(largeJsonString), null, 2)); // Beautified JSON printing
&#125; catch (error) &#123;
  console.error(&#39;Error parsing JSON:&#39;, error);
&#125;
</code></pre>
<p><strong>Solution 2</strong>: For ordinary strings, print in chunks:  </p>
<pre><code class="language-javascript">const largeString = ...; // Extremely large string
const chunkSize = 1000; // Chunk size
for (let i = 0; i &lt; largeString.length; i += chunkSize) &#123;
  console.log(largeString.slice(i, i + chunkSize));
&#125;
</code></pre>
<h4 id="2-How-to-Modify-the-Placeholder-Text-Size-in-HarmonyOS-TextInput"><a href="#2-How-to-Modify-the-Placeholder-Text-Size-in-HarmonyOS-TextInput" class="headerlink" title="2. How to Modify the Placeholder Text Size in HarmonyOS TextInput"></a>2. How to Modify the Placeholder Text Size in HarmonyOS TextInput</h4><pre><code class="language-typescript">TextInput(&#123; placeholder: &quot;Search enterprise name&quot; &#125;)
  .fontSize(20)
  .height(30)
  .borderRadius(16)
  .placeholderFont(&#123; size: 10, weight: 400 &#125;)
</code></pre>
<h4 id="3-Does-HarmonyOS-Have-a-Control-for-Book-Page-Turning-Effects"><a href="#3-Does-HarmonyOS-Have-a-Control-for-Book-Page-Turning-Effects" class="headerlink" title="3. Does HarmonyOS Have a Control for Book Page Turning Effects?"></a>3. Does HarmonyOS Have a Control for Book Page Turning Effects?</h4><p>The RecyclerViewPager is a container component that supports custom left-right&#x2F;up-down page turning effects and Material-style interactions.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/RecyclerViewPager">https://gitee.com/openharmony-sig/RecyclerViewPager</a>  </p>
<h4 id="4-Are-There-Callbacks-for-Unbinding-webViewController-from-the-Web-Component-in-HarmonyOS"><a href="#4-Are-There-Callbacks-for-Unbinding-webViewController-from-the-Web-Component-in-HarmonyOS" class="headerlink" title="4. Are There Callbacks for Unbinding webViewController from the Web Component in HarmonyOS?"></a>4. Are There Callbacks for Unbinding webViewController from the Web Component in HarmonyOS?</h4><p>Currently, no callbacks or methods exist to check the binding status of webViewController. It is recommended to use controller methods within the Web component’s lifecycle rather than the page’s lifecycle.  </p>
<h4 id="5-Flickering-Issue-with-Two-Images-in-HarmonyOS-Swiper-Auto-Sliding"><a href="#5-Flickering-Issue-with-Two-Images-in-HarmonyOS-Swiper-Auto-Sliding" class="headerlink" title="5. Flickering Issue with Two Images in HarmonyOS Swiper Auto-Sliding"></a>5. Flickering Issue with Two Images in HarmonyOS Swiper Auto-Sliding</h4><p>When configuring auto-sliding for two images in the Swiper component, the second image flickers with the previous image before loading (using the <code>nextMargin</code> parameter):  </p>
<pre><code class="language-typescript">Swiper() &#123;
  ForEach(this.iconList, (item: CCIcon) =&gt; &#123;
    Row() &#123;
      Image(item.imgUrl)
        .objectFit(ImageFit.Cover)
        .border(&#123; radius: 8 &#125;)
        .width(&#39;100%&#39;)
        .aspectRatio(2.16)
    &#125;
    .width(&#39;100%&#39;)
    .margin(&#123; bottom: 22 &#125;)
  &#125;)
&#125;
.padding(&#123;
  left: $r(&quot;app.float.tab_container_padding_side&quot;)
&#125;)
.width(&#39;100%&#39;)
.autoPlay(true)
.duration(300)
.nextMargin(56)
.itemSpace(8)
.displayMode(SwiperDisplayMode.STRETCH)
.displayCount(1)
.loop(true)
</code></pre>
<p><strong>Recommendation</strong>: Use <code>LazyForEach</code> instead.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/119-Daily-HarmonyOS-Next-Knowledge-Two-way-Data-Binding-Child-Component-Radius-Video-Download-Hide-String-Replacement-Routing-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/119-Daily-HarmonyOS-Next-Knowledge-Two-way-Data-Binding-Child-Component-Radius-Video-Download-Hide-String-Replacement-Routing-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Two-way Data Binding, Child Component Radius, Video Download Hide, String Replacement, Routing Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 09:53:56 / Modified: 09:54:10" itemprop="dateCreated datePublished" datetime="2025-06-27T09:53:56+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Two-way-Data-Binding-Child-Component-Radius-Video-Download-Hide-String-Replacement-Routing-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Two-way-Data-Binding-Child-Component-Radius-Video-Download-Hide-String-Replacement-Routing-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Two-way Data Binding, Child Component Radius, Video Download Hide, String Replacement, Routing Issues"></a>[Daily HarmonyOS Next Knowledge] Two-way Data Binding, Child Component Radius, Video Download Hide, String Replacement, Routing Issues</h3><h4 id="1-HarmonyOS-value-passing-with"><a href="#1-HarmonyOS-value-passing-with" class="headerlink" title="1. HarmonyOS value passing with $$?"></a>1. HarmonyOS value passing with <code>$$</code>?</h4><p><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-two-way-sync-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-two-way-sync-V5</a><br><code>$$</code> is a built-in two-way synchronization operator for components, providing a reference to TS variables for system-built components. This keeps TS variables in sync with the internal state of system-built components, which is different from state variables.  </p>
<h4 id="2-Which-container-component-in-HarmonyOS-can-set-the-angle-and-radius-of-child-components"><a href="#2-Which-container-component-in-HarmonyOS-can-set-the-angle-and-radius-of-child-components" class="headerlink" title="2. Which container component in HarmonyOS can set the angle and radius of child components?"></a>2. Which container component in HarmonyOS can set the angle and radius of child components?</h4><p>Angle and radius of child components can be set using absolute positioning. Coordinates of child component vertices can be calculated via Math functions.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-location-V5#position">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-location-V5#position</a>  </p>
<h4 id="3-How-to-hide-the-download-button-for-video-tags-in-HarmonyOS-Web-components"><a href="#3-How-to-hide-the-download-button-for-video-tags-in-HarmonyOS-Web-components" class="headerlink" title="3. How to hide the download button for video tags in HarmonyOS Web components?"></a>3. How to hide the download button for video tags in HarmonyOS Web components?</h4><p>The download button can be hidden by adding <code>controls controlslist=&quot;nodownload&quot;</code> to the video tag. If this doesn’t work, use CSS to hide it:  </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">video</span>::-internal-media-controls-download-button &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-enclosure &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-panel &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> + <span class="number">30px</span>);</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">4</span>. After using Navigation routing in HarmonyOS, the second-level <span class="attribute">page</span> sets hideToolBar <span class="selector-tag">to</span> true, but the custom navigation bar <span class="selector-tag">header</span> remains blank and doesn’t <span class="attribute">display</span>.  </span><br><span class="line">Example workflow:  </span><br><span class="line"><span class="number">1</span>. In the first-level page, use `pushDestination` to stack the second-level page.  </span><br><span class="line"><span class="number">2</span>. In the second-level page, use `<span class="built_in">hideToolBar</span>(true)` to hide the toolbar.  </span><br><span class="line"><span class="number">3</span>. On pages where the toolbar should be shown, set `hideToolBar` to false.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">5</span>. Is there a way to replace a specific substring in a string with another character in HarmonyOS?  </span><br><span class="line">For example, replace `<span class="number">4</span>` with `<span class="number">0</span>` in `<span class="number">1243456748</span>`.  </span><br><span class="line">Reference demo:  </span><br><span class="line">```typescript</span><br><span class="line">let reg: RegExp = new <span class="built_in">RegExp</span>(<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;g&#x27;</span>);</span><br><span class="line">let str = &#x27;an apple apple apple apple.&#x27;;</span><br><span class="line">let newStr = str<span class="selector-class">.replace</span>(reg, &#x27;fruit&#x27;);</span><br><span class="line">console<span class="selector-class">.log</span>(newStr); // Output: an fruit fruit fruit fruit</span><br><span class="line">this.message = newStr;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/118-Daily-HarmonyOS-Next-Knowledge-Input-Decimal-Limit-List-Offset-Calculation-Web-Request-Header-Issues-Dialog-Width-Web-Permissions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/118-Daily-HarmonyOS-Next-Knowledge-Input-Decimal-Limit-List-Offset-Calculation-Web-Request-Header-Issues-Dialog-Width-Web-Permissions/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Decimal Limit, List Offset Calculation, Web Request Header Issues, Dialog Width, Web Permissions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 09:52:56 / Modified: 09:53:23" itemprop="dateCreated datePublished" datetime="2025-06-27T09:52:56+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Input-Decimal-Limit-List-Offset-Calculation-Web-Request-Header-Issues-Dialog-Width-Web-Permissions"><a href="#Daily-HarmonyOS-Next-Knowledge-Input-Decimal-Limit-List-Offset-Calculation-Web-Request-Header-Issues-Dialog-Width-Web-Permissions" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Input Decimal Limit, List Offset Calculation, Web Request Header Issues, Dialog Width, Web Permissions"></a>[Daily HarmonyOS Next Knowledge] Input Decimal Limit, List Offset Calculation, Web Request Header Issues, Dialog Width, Web Permissions</h3><h4 id="1-How-to-Use-the-inputFilter-Property-in-HarmonyOS-TextInput-to-Restrict-Input-to-Positive-Numbers-with-Two-Decimal-Places"><a href="#1-How-to-Use-the-inputFilter-Property-in-HarmonyOS-TextInput-to-Restrict-Input-to-Positive-Numbers-with-Two-Decimal-Places" class="headerlink" title="1. How to Use the inputFilter Property in HarmonyOS TextInput to Restrict Input to Positive Numbers with Two Decimal Places?"></a>1. How to Use the <code>inputFilter</code> Property in HarmonyOS TextInput to Restrict Input to Positive Numbers with Two Decimal Places?</h4><p>How to use the <code>inputFilter</code> property in TextInput to allow only positive numbers with up to two decimal places?  </p>
<ol>
<li><strong>Positive numbers with two decimal places</strong>. Demo code:</li>
</ol>
<pre><code class="language-typescript">@Entry
@Component
struct TextInputExample &#123;
  @State message: string = &#39;0.3256&#39;
  controller: TextInputController = new TextInputController()
  build() &#123;
    Column() &#123;
      TextInput(&#123;placeholder: &#39;请输入内容&#39;, text: this.message &#125;)
        .width(&#39;100%&#39;)
        // Numeric input mode with decimal support. Note: inputFilter overrides default text filtering of type(InputType.NUMBER_DECIMAL)
        .type(InputType.NUMBER_DECIMAL)
        .maxLength(11)
        // Explicit regular expression
        .inputFilter(&#39;^-?\\d*\\.?\\d&#123;0,2&#125;$&#39;, (e) =&gt; &#123;
          // ^[0-9]+(.[0-9]&#123;0,2&#125;)?$
          // ^-?\\d*\\.?\\d&#123;0,2&#125;$ - This regex allows two decimal places, rejecting invalid inputs like 0.000, 00.10, 001234
          // ^(([1-9]&#123;1&#125;\d*)|([0]&#123;1&#125;))(\.(\d)&#123;0,2&#125;)?$ - This regex does not work here but may work on other platforms
          // Regex for two decimal places
          console.log(&#39;正则表达式-3&#39;, JSON.stringify(e))
        &#125;)
        .backgroundColor(Color.Red)
    &#125;
  &#125;
&#125;
</code></pre>
<ol start="2">
<li><strong>Block emojis and special characters</strong>: Use <code>inputFilter</code> with a regex. Example restricting to letters:</li>
</ol>
<pre><code class="language-typescript">TextInput().inputFilter(&#39;[a-z]&#39;, (e) =&gt; &#123; console.log(JSON.stringify(e)) &#125;)
</code></pre>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5</a>  </p>
<h4 id="2-scroller-currentOffset-yOffset-Returns-Incorrect-Values-After-Loading-More-Items-in-a-List"><a href="#2-scroller-currentOffset-yOffset-Returns-Incorrect-Values-After-Loading-More-Items-in-a-List" class="headerlink" title="2. scroller.currentOffset().yOffset Returns Incorrect Values After Loading More Items in a List"></a>2. <code>scroller.currentOffset().yOffset</code> Returns Incorrect Values After Loading More Items in a List</h4><p>The list monitors scroll distance using <code>scroller.currentOffset()</code>, which works correctly for the first page. However, after loading more items via pull-to-refresh, the reported scroll distance increases abnormally.  </p>
<p><strong>Reference Demo</strong>:  </p>
<pre><code class="language-typescript">.onScroll(() =&gt; &#123;
  this.tabPosY = this.topAreaHeight - this.scroller.currentOffset().yOffset &lt;= 0 ? 0 : this.topAreaHeight - this.scroller.currentOffset().yOffset
&#125;)
</code></pre>
<h4 id="3-How-to-Set-Default-Headers-for-Web-Component-Requests-in-HarmonyOS"><a href="#3-How-to-Set-Default-Headers-for-Web-Component-Requests-in-HarmonyOS" class="headerlink" title="3. How to Set Default Headers for Web Component Requests in HarmonyOS"></a>3. How to Set Default Headers for Web Component Requests in HarmonyOS</h4><p>Set headers using the <code>headers</code> parameter in the <code>loadUrl</code> method. This parameter allows attaching HTTP request headers.  </p>
<p><strong>Usage</strong>: Use the second parameter <code>headers</code>.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#loadurl">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#loadurl</a>  </p>
<h4 id="4-Customizing-Dialog-Width-in-HarmonyOS"><a href="#4-Customizing-Dialog-Width-in-HarmonyOS" class="headerlink" title="4. Customizing Dialog Width in HarmonyOS"></a>4. Customizing Dialog Width in HarmonyOS</h4><p>Refer to the <code>width</code> property:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5#ZH-CN_TOPIC_0000001884757950__customdialogcontrolleroptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5#ZH-CN_TOPIC_0000001884757950__customdialogcontrolleroptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E</a>  </p>
<h4 id="5-Are-Web-Request-Permissions-Available-in-HarmonyOS"><a href="#5-Are-Web-Request-Permissions-Available-in-HarmonyOS" class="headerlink" title="5. Are Web Request Permissions Available in HarmonyOS?"></a>5. Are Web Request Permissions Available in HarmonyOS?</h4><p>Is there an <code>onPermissionRequest</code> callback? Loading a URL that requests location permission does not trigger this callback. Are additional configurations required?  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#once">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#once</a>  </p>
<pre><code class="language-typescript">once(type: string, callback: Callback&lt;void&gt;): void
</code></pre>
<p>Subscribe to a one-time callback for a specified Web event. Currently, only <code>&quot;webInited&quot;</code> is supported, triggered when the Web engine initializes.  </p>
<ul>
<li>The Web engine initializes when the first Web component loads in the app. Subsequent Web components do not re-trigger <code>once</code>.  </li>
<li>If the last Web component is destroyed and a new one is loaded, the Web engine re-initializes.</li>
</ul>
<p><strong>Ensure your web page accesses resources requiring user authorization</strong> (e.g., geolocation, camera):<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ongeolocationshow">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ongeolocationshow</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/117-Daily-HarmonyOS-Next-Knowledge-Input-Method-Cursor-Control-Partial-Rounding-for-Text-Web-Component-Caching-Grid-Issues-PC-Like-Web-Effects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/117-Daily-HarmonyOS-Next-Knowledge-Input-Method-Cursor-Control-Partial-Rounding-for-Text-Web-Component-Caching-Grid-Issues-PC-Like-Web-Effects/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Method Cursor Control, Partial Rounding for Text, Web Component Caching, Grid Issues, PC-Like Web Effects</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 09:52:08 / Modified: 09:52:25" itemprop="dateCreated datePublished" datetime="2025-06-27T09:52:08+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Input-Method-Cursor-Control-Partial-Rounding-for-Text-Web-Component-Caching-Grid-Issues-PC-Like-Web-Effects"><a href="#Daily-HarmonyOS-Next-Knowledge-Input-Method-Cursor-Control-Partial-Rounding-for-Text-Web-Component-Caching-Grid-Issues-PC-Like-Web-Effects" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Input Method Cursor Control, Partial Rounding for Text, Web Component Caching, Grid Issues, PC-Like Web Effects"></a>[Daily HarmonyOS Next Knowledge] Input Method Cursor Control, Partial Rounding for Text, Web Component Caching, Grid Issues, PC-Like Web Effects</h3><h4 id="1-HarmonyOS-Input-Method-Cursor-Control"><a href="#1-HarmonyOS-Input-Method-Cursor-Control" class="headerlink" title="1. HarmonyOS Input Method Cursor Control"></a>1. HarmonyOS Input Method Cursor Control</h4><p>Implement cursor jumping between components in the <code>onSubmit</code> callback. When using <code>.enterKeyType(EnterKeyType.Next)</code>, the keyboard closes by default after pressing Enter, and then <code>focusControl.requestFocus(nextKeyStr)</code> causes the keyboard to close and reopen, resulting in an unsmooth effect. Ideally, setting <code>EnterKeyType.Next</code> should smoothly jump the cursor to the next input field, but <code>onSubmit</code> closes the keyboard by default. How to solve this for a smooth experience? Is custom input method development required?  </p>
<ol>
<li>In <code>EntryAbility</code>:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">      hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content.&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;windowStage&#x27;</span>, windowStage);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Replace code in `</span><span class="title class_">Index</span>.<span class="property">ets</span><span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ListExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">  <span class="attr">selectIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">keyboardHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> = (<span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;windowStage&#x27;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">WindowStage</span>).<span class="title function_">getMainWindowSync</span>()</span><br><span class="line">    windowClass.<span class="title function_">on</span>(<span class="string">&#x27;keyboardHeightChange&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">keyboardHeight</span> = <span class="title function_">px2vp</span>(data)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">initialIndex</span>: <span class="number">0</span>, <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scroller</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;a&#x27;</span> + item + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">keyboardHeight</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">borderRadius</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">              <span class="title class_">TextInput</span>().<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">                .<span class="title function_">id</span>(<span class="string">&#x27;a&#x27;</span> + item)</span><br><span class="line">                .<span class="title function_">onFocus</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;focus:  a&#x27;</span> + item)</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">selectIndex</span> = item</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aaa&#x27;</span> + <span class="variable language_">this</span>.<span class="property">selectIndex</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">onSubmit</span>(<span class="function">(<span class="params"><span class="attr">enterKey</span>: <span class="title class_">EnterKeyType</span>, <span class="attr">event</span>: <span class="title class_">SubmitEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">                  focusControl.<span class="title function_">requestFocus</span>(<span class="string">&#x27;a&#x27;</span> + (<span class="variable language_">this</span>.<span class="property">selectIndex</span> + <span class="number">1</span>));</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">scroller</span>.<span class="title function_">scrollToIndex</span>(<span class="variable language_">this</span>.<span class="property">selectIndex</span> + <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">                  event.<span class="title function_">keepEditableState</span>();</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Vertical</span>)</span><br><span class="line">      .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">      .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="number">0xFFFFFF</span>, <span class="attr">startMargin</span>: <span class="number">20</span>, <span class="attr">endMargin</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      .<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">Spring</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="variable language_">this</span>.<span class="property">keyboardHeight</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="number">0xDCDCDC</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to Achieve Partial Rounding for HarmonyOS Text Components  </span></span><br><span class="line"><span class="string">Requirement: Implement rounded corners for the bottom-left and bottom-right of a Text component, while keeping the top-left and top-right corners square.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Solution: Add the `</span><span class="title function_">borderRadius</span>(&#123; <span class="attr">bottomLeft</span>: <span class="number">10</span>, <span class="attr">bottomRight</span>: <span class="number">10</span> &#125;)<span class="string">` attribute.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextExample6</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;你叫什么名字&#x27;</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">text</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">        .<span class="title function_">lineHeight</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">20</span>, <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(&#123;</span><br><span class="line">          <span class="attr">bottomLeft</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">bottomRight</span>: <span class="number">10</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.<span class="title function_">margin</span>(&#123;</span><br><span class="line">      <span class="attr">top</span>: <span class="number">200</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to Get Cache Size/Details and Delete Local Cache for HarmonyOS Browser Web Components  </span></span><br><span class="line"><span class="string">- Clear cached resources using the `</span><span class="title function_">removeCache</span>()<span class="string">` interface:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mode</span>: <span class="title class_">CacheMode</span> = <span class="title class_">CacheMode</span>.<span class="property">None</span>;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;removeCache&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Set to true to clear both ROM and RAM caches; false to clear only RAM cache</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">removeCache</span>(<span class="literal">true</span>);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">e</span>: business_error.<span class="property">BusinessError</span> = error <span class="keyword">as</span> business_error.<span class="property">BusinessError</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`ErrorCode: <span class="subst">$&#123;e.code&#125;</span>, Message: <span class="subst">$&#123;e.message&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: <span class="string">&#x27;www.huawei.com&#x27;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">cacheMode</span>(<span class="variable language_">this</span>.<span class="property">mode</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- Reference the caching solution document: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cookie-and-data-storage-mgmt-V5  </span></span><br><span class="line"><span class="string">  - Cookies are small data segments sent from the server to the client during network access, used for client identity and status recognition.  </span></span><br><span class="line"><span class="string">  - When the `</span><span class="title class_">SameSite</span><span class="string">` attribute is unspecified, the default is `</span><span class="title class_">SameSite</span>=<span class="title class_">Lax</span><span class="string">`, sending cookies only when navigating to the cookie&#x27;s origin site, not in cross-site requests.  </span></span><br><span class="line"><span class="string">  - The Web component provides the `</span><span class="title class_">WebCookieManager</span><span class="string">` class to manage cookies, stored in the app sandbox path: `</span>/proc/&#123;pid&#125;/root/data/storage/el2/base/cache/web/<span class="title class_">Cookies</span><span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Grid Fails to Trigger `</span>onReachEnd<span class="string">`  </span></span><br><span class="line"><span class="string">Implement using the development guide (code): https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-V5#ZH-CN_TOPIC_0000001930676589__edgeeffect10  </span></span><br><span class="line"><span class="string">Enable the rebound effect with `</span>.<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">Spring</span>, &#123; <span class="attr">alwaysEnabled</span>: <span class="literal">true</span> &#125;)<span class="string">`, which will trigger `</span>onReachEnd<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS Web Loads Local HTML in PC-Like Layout  </span></span><br><span class="line"><span class="string">Add the following meta tag to the head:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>html</span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/116-Daily-HarmonyOS-Next-Knowledge-Tabs-Switching-Lag-Input-Focus-Opening-New-Web-Pages-Password-Input-Type-Illegal-Variable-Value/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/116-Daily-HarmonyOS-Next-Knowledge-Tabs-Switching-Lag-Input-Focus-Opening-New-Web-Pages-Password-Input-Type-Illegal-Variable-Value/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Tabs Switching Lag, Input Focus, Opening New Web Pages, Password Input Type, Illegal Variable Value</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 09:51:13 / Modified: 09:51:28" itemprop="dateCreated datePublished" datetime="2025-06-27T09:51:13+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Tabs-Switching-Lag-Input-Focus-Opening-New-Web-Pages-Password-Input-Type-Illegal-Variable-Value"><a href="#Daily-HarmonyOS-Next-Knowledge-Tabs-Switching-Lag-Input-Focus-Opening-New-Web-Pages-Password-Input-Type-Illegal-Variable-Value" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Tabs Switching Lag, Input Focus, Opening New Web Pages, Password Input Type, Illegal Variable Value"></a>[Daily HarmonyOS Next Knowledge] Tabs Switching Lag, Input Focus, Opening New Web Pages, Password Input Type, Illegal Variable Value</h3><h4 id="1-HarmonyOS-Tabs-Control-Switching-Lag"><a href="#1-HarmonyOS-Tabs-Control-Switching-Lag" class="headerlink" title="1. HarmonyOS Tabs Control Switching Lag?"></a>1. HarmonyOS Tabs Control Switching Lag?</h4><p>The animation when switching Tabs controls feels laggy. Is there a fix for this?  </p>
<p><strong>Root Cause</strong>: The <code>onchange</code> event for tab sliding triggers only after the switch completes, causing the tab bar to appear to switch after the slide animation.  </p>
<p><strong>Solution</strong>: Implement switching logic using the example code here:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-V5#ZH-CN_TOPIC_0000001847050116__%E7%A4%BA%E4%BE%8B9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-V5#ZH-CN_TOPIC_0000001847050116__%E7%A4%BA%E4%BE%8B9</a>  </p>
<h4 id="2-HarmonyOS-Custom-Keyboard-Input-Focus-Issue"><a href="#2-HarmonyOS-Custom-Keyboard-Input-Focus-Issue" class="headerlink" title="2. HarmonyOS Custom Keyboard Input Focus Issue?"></a>2. HarmonyOS Custom Keyboard Input Focus Issue?</h4><p>Calling <code>controller.stopEditing()</code> removes focus from the input and hides the keyboard. However, when navigating back to the page, the input regains focus and shows the keyboard. How to prevent this?  </p>
<p><strong>Solution</strong>: Add a key to the button (e.g., <code>.id(&#39;333&#39;)</code>) and transfer focus using <code>focusControl.requestFocus(&#39;333&#39;)</code>.  </p>
<p><strong>Example Code</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">KeyboadPage2</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">inputValue</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">InputBGColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;#90EE90&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">TextInput</span>(&#123;</span><br><span class="line">        <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">InputBGColor</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;48vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onFocus</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">InputBGColor</span> = <span class="string">&#x27;#FF0000&#x27;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onBlur</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">InputBGColor</span> = <span class="string">&#x27;#90EE90&#x27;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      </span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Hide Keyboard&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">stopEditing</span>();</span><br><span class="line">          &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;333&#x27;</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Push&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          focusControl.<span class="title function_">requestFocus</span>(<span class="string">&#x27;333&#x27;</span>);</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;pages/Keyboad/KeyboadPage3&#x27;</span>,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to Open a New Webview Page with a Given URL in HarmonyOS?  </span></span><br><span class="line"><span class="string">**Demo Code**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> web_webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> business_error <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;loadUrl&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Navigate to local1.html when the button is clicked</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">loadUrl</span>($rawfile(<span class="string">&quot;local1.html&quot;</span>));</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">e</span>: business_error.<span class="property">BusinessError</span> = error <span class="keyword">as</span> business_error.<span class="property">BusinessError</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`ErrorCode: <span class="subst">$&#123;e.code&#125;</span>,  Message: <span class="subst">$&#123;e.message&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Load local.html when the component is created</span></span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&quot;local.html&quot;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS TextInput Password Type?  </span></span><br><span class="line"><span class="string">When using `</span><span class="title class_">InputType</span>.<span class="property">Password</span><span class="string">`, is there an API to toggle password visibility (not using `</span><span class="title class_">PasswordIcon</span><span class="string">`, which only supports icon customization, not sizing)?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Customize a visibility toggle icon.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Demo Code**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextInputExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">password</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">positionInfo</span>: <span class="title class_">CaretOffset</span> = &#123; <span class="attr">index</span>: <span class="number">0</span>, <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isShowPassword</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">text</span>, <span class="attr">placeholder</span>: <span class="string">&#x27;input your word...&#x27;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">placeholderColor</span>(<span class="title class_">Color</span>.<span class="property">Grey</span>)</span><br><span class="line">        .<span class="title function_">placeholderFont</span>(&#123; <span class="attr">size</span>: <span class="number">14</span>, <span class="attr">weight</span>: <span class="number">400</span> &#125;)</span><br><span class="line">        .<span class="title function_">caretColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;95%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">inputFilter</span>(<span class="string">&#x27;[a-z]&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(e));</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">text</span> = value;</span><br><span class="line">        &#125;);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Password Input</span></span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: $$this.<span class="property">password</span>, <span class="attr">placeholder</span>: <span class="string">&#x27;input your password...&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;95%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">8</span>)</span><br><span class="line">          .<span class="title function_">type</span>(<span class="variable language_">this</span>.<span class="property">isShowPassword</span> ? <span class="title class_">InputType</span>.<span class="property">Normal</span> : <span class="title class_">InputType</span>.<span class="property">Password</span>)</span><br><span class="line">          .<span class="title function_">maxLength</span>(<span class="number">9</span>)</span><br><span class="line">          .<span class="title function_">showPasswordIcon</span>(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">isShowPassword</span> ? $r(<span class="string">&#x27;app.media.ic_personal_normal&#x27;</span>) : $r(<span class="string">&#x27;app.media.ic_personal_focus&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;25vp&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;25vp&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: <span class="string">&#x27;80vp&#x27;</span>, <span class="attr">bottom</span>: <span class="string">&#x27;50%&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="string">&#x27;85%&#x27;</span>, <span class="attr">y</span>: <span class="number">15</span> &#125;)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isShowPassword</span> = !<span class="variable language_">this</span>.<span class="property">isShowPassword</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS &quot;Illegal variable value&quot; Error with Decorated Variable &#x27;data&#x27;?  </span></span><br><span class="line"><span class="string">How to set the status bar background to black and text to white?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Code Example**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GlobalContext</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="attr">instance</span>: <span class="title class_">GlobalContext</span>;</span><br><span class="line">  <span class="keyword">private</span> _objects = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Object</span>&gt;();</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/115-Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/115-Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Animated GIF Looping, Tab Switch Monitoring, Rich Text Scroll, Tab Default Centering, A Tag Calling Dialer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:42:10 / Modified: 09:50:05" itemprop="dateCreated datePublished" datetime="2025-06-27T08:42:10+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer"><a href="#Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Animated GIF Looping, Tab Switch Monitoring, Rich Text Scroll, Tab Default Centering, A Tag Calling Dialer"></a>[Daily HarmonyOS Next Knowledge] Animated GIF Looping, Tab Switch Monitoring, Rich Text Scroll, Tab Default Centering, A Tag Calling Dialer</h3><h4 id="1-Image-loads-a-network-animated-GIF-that-stops-playing-after-one-loop-How-to-set-loop-play"><a href="#1-Image-loads-a-network-animated-GIF-that-stops-playing-after-one-loop-How-to-set-loop-play" class="headerlink" title="1. Image loads a network animated GIF that stops playing after one loop. How to set loop play?"></a>1. Image loads a network animated GIF that stops playing after one loop. How to set loop play?</h4><p>Currently, ArkUI does not support setting the loop count for GIF images. You can use the third-party library <code>ohos-gif-drawable</code> to set the loop count. Update the loop count in the callback method <code>getLoopFinish()</code> after one play ends, and set the play rate <code>setSpeedFactor()</code> to 0 to stop playing when the specified count is reached.  </p>
<p><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_gif-drawable">https://gitee.com/openharmony-sig/ohos_gif-drawable</a><br><code>ohos-gif-drawable</code> is drawn based on Canvas, with main capabilities including:  </p>
<ul>
<li>Support for playing GIF images.  </li>
<li>Support for controlling GIF play&#x2F;pause.  </li>
<li>Support for resetting GIF play animation.  </li>
<li>Support for adjusting GIF play rate.  </li>
<li>Support for listening to callbacks after all GIF frames are displayed.  </li>
<li>Support for setting display size.  </li>
<li>Support for 7 different display types.  </li>
<li>Support for setting the display area background color.</li>
</ul>
<h4 id="2-How-to-monitor-when-a-TabContent-page-is-switched-to-in-HarmonyOS"><a href="#2-How-to-monitor-when-a-TabContent-page-is-switched-to-in-HarmonyOS" class="headerlink" title="2. How to monitor when a TabContent page is switched to in HarmonyOS?"></a>2. How to monitor when a TabContent page is switched to in HarmonyOS?</h4><p>When switching TabContent pages, how to monitor that the current page is active? Does switching trigger the lifecycle methods of the page in TabContent?  </p>
<p>Use the <code>onTabBarClick</code> event.<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-V5</a><br>Tab switching should trigger the component-level lifecycle <code>aboutToAppear</code> of the child component.  </p>
<h4 id="3-Can-HarmonyOS-RichText-slide-left-and-up"><a href="#3-Can-HarmonyOS-RichText-slide-left-and-up" class="headerlink" title="3. Can HarmonyOS RichText slide left and up?"></a>3. Can HarmonyOS RichText slide left and up?</h4><p>Use the Web component for display.<br><strong>Reference Link</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5</a>  </p>
<pre><code class="language-typescript">// xxx.ets
import &#123; webview &#125; from &#39;@kit.ArkWeb&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

@Entry
@Component
struct WebComponent &#123;
  controller: webview.WebviewController = new webview.WebviewController();

  build() &#123;
    Column() &#123;
      Button(&#39;loadData&#39;)
        .onClick(() =&gt; &#123;
          try &#123;
            this.controller.loadData(
              &quot;&lt;html&gt;&lt;body&gt; &lt;p style=\&quot;font-size: 100; color: #999999;\&quot;&gt;我是一个richtext&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;,
              &quot;text/html&quot;,
              &quot;UTF-8&quot;, &quot; &quot;, &quot; &quot; // If there are special characters like #, the last two parameters should be changed to a space
            );
            this.controller.setScrollable(false); // Set whether to enable scrolling
          &#125; catch (error) &#123;
            console.error(`ErrorCode: $&#123;(error as BusinessError).code&#125;,  Message: $&#123;(error as BusinessError).message&#125;`);
          &#125;
        &#125;)
      Web(&#123; src: &#39;&#39;, controller: this.controller &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-implement-horizontal-tab-quick-scrolling-in-HarmonyOS-with-tabs-automatically-centered-and-selected-after-stopping"><a href="#4-How-to-implement-horizontal-tab-quick-scrolling-in-HarmonyOS-with-tabs-automatically-centered-and-selected-after-stopping" class="headerlink" title="4. How to implement horizontal tab quick scrolling in HarmonyOS, with tabs automatically centered and selected after stopping?"></a>4. How to implement horizontal tab quick scrolling in HarmonyOS, with tabs automatically centered and selected after stopping?</h4><p>In the List component, use the <code>.scrollSnapAlign(ScrollSnapAlign.CENTER)</code> property of the <code>onScrollIndex</code> method to achieve centering. To position the tab to the middle of the visible area after scrolling stops, use the <code>onScrollStop</code> event to listen for the stop and adjust the position. To keep it centered in the visible area, directly position it to the middle.<br><strong>Reference Link</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#ZH-CN_TOPIC_0000001930756925__onscrollindex">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#ZH-CN_TOPIC_0000001930756925__onscrollindex</a>  </p>
<h4 id="5-Using-the-element-in-an-H5-page-to-invoke-the-system-dialer-does-not-work-in-HarmonyOS-Next"><a href="#5-Using-the-element-in-an-H5-page-to-invoke-the-system-dialer-does-not-work-in-HarmonyOS-Next" class="headerlink" title="5. Using the &lt;a&gt; element in an H5 page to invoke the system dialer does not work in HarmonyOS Next."></a>5. Using the <code>&lt;a&gt;</code> element in an H5 page to invoke the system dialer does not work in HarmonyOS Next.</h4><p>Possible reasons include:  </p>
<ul>
<li><strong>Page loading issues</strong>: If the <code>system.onmessage</code> function in the H5 page has complex logic and relies on external JS library references, incomplete page loading may prevent the system dialer from being called. In this case, trigger the system dialer in the <code>onpagefinish</code> event handler.  </li>
<li><strong>System permission issues</strong>: Ensure the device has enabled the system dialer and the app has the corresponding permissions. Check the app permission configuration in device settings.  </li>
<li><strong>Network issues</strong>: Ensure the device is connected to a network with normal connectivity.  </li>
<li><strong>Page loading order issues</strong>: If the page has resources to load (e.g., images, scripts), the system dialer may not be called until these resources finish loading. Place the system dialer code after resource loading is complete.  </li>
<li><strong>Page lifecycle issues</strong>:  <ul>
<li>Ensure page lifecycle events (e.g., <code>onload</code>, <code>onready</code>) are handled correctly to trigger the system dialer after page loading.  </li>
<li>Check the page loading order to execute the system dialer code after resources are loaded.  </li>
<li>Set page lifecycle events to trigger the system dialer using <code>onload</code> or <code>onready</code> after page loading.  </li>
<li>Verify system permissions in device settings to ensure the app can call the system dialer.  </li>
<li>Ensure the device is connected to a network with normal connectivity.</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/114-Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/114-Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screenshot Component for Lists, Toggle Component, Web Component Request Headers, List Selection Popup, Game Acceleration</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:41:22 / Modified: 09:50:18" itemprop="dateCreated datePublished" datetime="2025-06-27T08:41:22+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration"><a href="#Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screenshot Component for Lists, Toggle Component, Web Component Request Headers, List Selection Popup, Game Acceleration"></a>[Daily HarmonyOS Next Knowledge] Screenshot Component for Lists, Toggle Component, Web Component Request Headers, List Selection Popup, Game Acceleration</h3><h4 id="1-How-does-HarmonyOS-handle-screenshotting-components-that-exceed-the-screen-such-as-lists-and-scrollable-content-using-componentSnapshot"><a href="#1-How-does-HarmonyOS-handle-screenshotting-components-that-exceed-the-screen-such-as-lists-and-scrollable-content-using-componentSnapshot" class="headerlink" title="1. How does HarmonyOS handle screenshotting components that exceed the screen, such as lists and scrollable content, using componentSnapshot?"></a>1. How does HarmonyOS handle screenshotting components that exceed the screen, such as lists and scrollable content, using componentSnapshot?</h4><p>The official componentSnapshot currently does not support capturing ultra-long images of components beyond the screen. For details, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5</a>  </p>
<p>This module provides the ability to capture screenshots of components, including both loaded and unloaded components. Component screenshots can only capture the area within the component’s size. If the component or its child components are drawn beyond their defined areas, the content outside the component’s area will not appear in the screenshot. Sibling nodes stacked within the component’s area will not be displayed in the screenshot.  </p>
<p><strong>Alternative solutions</strong>:  </p>
<ol>
<li>When capturing the screen, control the scroll coordinates of the list or scrollable content to take multiple screenshots, then stitch the images together.  </li>
<li>Draw all UI components in the view onto a canvas, then capture the entire canvas to obtain the image.</li>
</ol>
<h4 id="2-When-switching-dark-mode-within-the-onChange-callback-of-the-HarmonyOS-Toggle-component-the-callback-triggers-twice-with-opposite-states-How-to-handle-this"><a href="#2-When-switching-dark-mode-within-the-onChange-callback-of-the-HarmonyOS-Toggle-component-the-callback-triggers-twice-with-opposite-states-How-to-handle-this" class="headerlink" title="2. When switching dark mode within the onChange callback of the HarmonyOS Toggle component, the callback triggers twice with opposite states. How to handle this?"></a>2. When switching dark mode within the onChange callback of the HarmonyOS Toggle component, the callback triggers twice with opposite states. How to handle this?</h4><p>Clicking the Toggle switch on the page correctly switches the page to dark mode, but the switch state of the button remains unchanged. Investigation shows the callback triggers twice with conflicting states. How to ensure callback correctness in this scenario?  </p>
<p><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TogglePage2 &#123;
  @State isDarkMode: boolean = false
  build() &#123;
    Column() &#123;
      Toggle(&#123; type: ToggleType.Switch, isOn: this.isDarkMode &#125;) // Do not omit the isOn property when the page refresh is triggered.
        .onChange((isOn: boolean) =&gt; &#123;
          console.log(&#39;Toggle.onChange2： isOn&#39;, isOn)
          this.isDarkMode = isOn
          getContext(this).getApplicationContext().setColorMode(this.isDarkMode ? 0 : 1) // Triggers secondary rendering. If isOn is not assigned, the default value (false) will cause incorrect state.
        &#125;)
    &#125;.width(&quot;100%&quot;).height(&quot;100%&quot;).padding(32)
  &#125;
&#125;
</code></pre>
<p><strong>Note</strong>: Do not omit the isOn property of Toggle in scenarios that trigger secondary rendering. Secondary rendering reads the default value, and omitting isOn will use the default value (false), leading to incorrect toggle states.  </p>
<h4 id="3-How-to-attach-request-headers-to-the-HarmonyOS-Web-component"><a href="#3-How-to-attach-request-headers-to-the-HarmonyOS-Web-component" class="headerlink" title="3. How to attach request headers to the HarmonyOS Web component?"></a>3. How to attach request headers to the HarmonyOS Web component?</h4><p>Write the loadUrl method within the Web component’s lifecycle:  </p>
<pre><code class="language-typescript">Web(&#123; src: &quot;&quot;, controller: this.controller &#125;)
  .onControllerAttached(() =&gt; &#123;
    this.controller.loadUrl(&quot;xxxxxxxxx&quot;, header)
  &#125;)
</code></pre>
<h4 id="4-How-to-customize-the-style-of-the-HarmonyOS-list-selection-popup-ActionSheet"><a href="#4-How-to-customize-the-style-of-the-HarmonyOS-list-selection-popup-ActionSheet" class="headerlink" title="4. How to customize the style of the HarmonyOS list selection popup (ActionSheet)?"></a>4. How to customize the style of the HarmonyOS list selection popup (ActionSheet)?</h4><p>ActionSheet does not provide a custom style interface. For custom styles, use the CustomDialog component: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a>  </p>
<p>Display custom popups using the CustomDialogController class. Custom popups are preferred for easier style and content customization.  </p>
<h4 id="5-Does-HarmonyOS-support-game-loading-with-the-TBS-X5-kernel"><a href="#5-Does-HarmonyOS-support-game-loading-with-the-TBS-X5-kernel" class="headerlink" title="5. Does HarmonyOS support game loading with the TBS (X5) kernel?"></a>5. Does HarmonyOS support game loading with the TBS (X5) kernel?</h4><p>You can try using the system’s native webview component.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/113-Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/113-Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Scheme Launching App, List Refresh, Web File Download, Adaptive to Child Elements</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:40:35 / Modified: 08:40:49" itemprop="dateCreated datePublished" datetime="2025-06-27T08:40:35+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Scheme Launching App, List Refresh, Web File Download, Adaptive to Child Elements"></a>[Daily HarmonyOS Next Knowledge] Web Scheme Launching App, List Refresh, Web File Download, Adaptive to Child Elements</h3><h4 id="1-Does-HarmonyOS-currently-support-launching-an-app-via-web-Scheme-in-the-app"><a href="#1-Does-HarmonyOS-currently-support-launching-an-app-via-web-Scheme-in-the-app" class="headerlink" title="1. Does HarmonyOS currently support launching an app via web Scheme in the app?"></a>1. Does HarmonyOS currently support launching an app via web Scheme in the app?</h4><p>Deeplink is supported. Add a button on the web page to guide users to launch the app. The web side directly prompts an “Open App” button bound to the click event <code>window.open(tzptest://www.xxxxx.com?url=XXX)</code>. Clicking this button will open the URL <code>tzptest://www.xxxxx.com?url=XXX</code> received by the web端.  </p>
<p>For the app to be successfully launched, configure the <code>skills</code> of <code>abilities</code> in the project’s <code>model.json5</code> file:  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;actions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;ohos.want.action.viewData&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;uris&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;scheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tzptest&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Notes**<span class="punctuation">:</span>  </span><br><span class="line">- The `scheme` protocol header of the deeplink link must match the app configuration for web launching.  </span><br><span class="line">- Browsers do not parse or process deeplink links<span class="punctuation">,</span> but pass them to the launched app intact. Therefore<span class="punctuation">,</span> third-party apps only need to negotiate URL rules between the web and app sides and parse them to open the corresponding page.  </span><br><span class="line"></span><br><span class="line">Reference<span class="punctuation">:</span> Implicit Want to launch the app<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/want-overview-V5  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">2.</span> How to refresh list data based on the list&#x27;s title in HarmonyOS?  </span><br><span class="line">Refer to the following demo for implementation<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index <span class="punctuation">&#123;</span></span><br><span class="line">  @State focusIndex<span class="punctuation">:</span> number = <span class="number">0</span>;</span><br><span class="line">  private controller<span class="punctuation">:</span> TabsController = new TabsController();</span><br><span class="line">  tabArray = <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Custom tab</span></span><br><span class="line">  @Builder</span><br><span class="line">  Tab(tabName<span class="punctuation">:</span> string<span class="punctuation">,</span> tabItem<span class="punctuation">:</span> number<span class="punctuation">,</span> tabIndex<span class="punctuation">:</span> number) <span class="punctuation">&#123;</span></span><br><span class="line">    Column(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">20</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">      Text(tabName).fontSize(<span class="number">18</span>)</span><br><span class="line">      Image($r(&#x27;app.media.icon&#x27;)).width(<span class="number">20</span>).height(<span class="number">20</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .width(<span class="number">100</span>)</span><br><span class="line">    .height(<span class="number">60</span>)</span><br><span class="line">    .borderRadius(<span class="punctuation">&#123;</span> topLeft<span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span> topRight<span class="punctuation">:</span> <span class="number">10</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">    .onClick(() =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      this.controller.changeIndex(tabIndex);</span><br><span class="line">      this.focusIndex = tabIndex;</span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line">    .backgroundColor(tabIndex === this.focusIndex ? &#x27;#ffffffff&#x27; <span class="punctuation">:</span> &#x27;#ffb7b7b7&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column() <span class="punctuation">&#123;</span></span><br><span class="line">      Column() <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// Tabs</span></span><br><span class="line">        Row(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">6</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          Scroll() <span class="punctuation">&#123;</span></span><br><span class="line">            Row() <span class="punctuation">&#123;</span></span><br><span class="line">              ForEach(this.tabArray<span class="punctuation">,</span> (item<span class="punctuation">:</span> number<span class="punctuation">,</span> index<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">                this.Tab(&#x27;Page &#x27; + item<span class="punctuation">,</span> item<span class="punctuation">,</span> index);</span><br><span class="line">              <span class="punctuation">&#125;</span>)</span><br><span class="line">            <span class="punctuation">&#125;</span>.margin(<span class="punctuation">&#123;</span> right<span class="punctuation">:</span> <span class="number">80</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">            .justifyContent(FlexAlign.Start)</span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="comment">// Set left alignment</span></span><br><span class="line">          .align(Alignment.Start)</span><br><span class="line">          .scrollable(ScrollDirection.Horizontal)</span><br><span class="line">          .scrollBar(BarState.Off)</span><br><span class="line">          .width(&#x27;<span class="number">80</span>%&#x27;)</span><br><span class="line">          .backgroundColor(&#x27;#ffb7b7b7&#x27;)</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">        .backgroundColor(&#x27;#ffb7b7b7&#x27;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Tabs content</span></span><br><span class="line">        Tabs(<span class="punctuation">&#123;</span> barPosition<span class="punctuation">:</span> BarPosition.Start<span class="punctuation">,</span> controller<span class="punctuation">:</span> this.controller <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.tabArray<span class="punctuation">,</span> (item<span class="punctuation">:</span> number<span class="punctuation">,</span> index<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            TabContent() <span class="punctuation">&#123;</span></span><br><span class="line">              Text(&#x27; Content of Page &#x27; + item)</span><br><span class="line">                .height(<span class="number">300</span>)</span><br><span class="line">                .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">                .fontSize(<span class="number">30</span>)</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">            .backgroundColor(Color.Pink)</span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        .barHeight(<span class="number">0</span>)</span><br><span class="line">        .animationDuration(<span class="number">100</span>)</span><br><span class="line">        .onChange((index<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.log(&#x27;foo change&#x27;);</span><br><span class="line">          this.focusIndex = index;</span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .alignItems(HorizontalAlign.Start)</span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">3.</span> No response when clicking to download files in HarmonyOS Web?  </span><br><span class="line">Set all Web permissions to `<span class="literal"><span class="keyword">true</span></span>`<span class="punctuation">,</span> then debug whether the download is successfully triggered on the page. For debugging the page<span class="punctuation">,</span> refer to<span class="punctuation">:</span> Using Devtools to debug front-end pages<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-debugging-with-devtools-V5  </span></span><br><span class="line"></span><br><span class="line">The Web component supports front-end page debugging using DevTools. DevTools is a Web front-end development debugging tool that enables debugging of mobile device front-end pages on a computer. Developers enable Web component front-end page debugging via the `setWebDebuggingAccess()` interface. DevTools can debug front-end web pages on mobile devices (device version <span class="number">4.1</span><span class="number">.0</span> and above).  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">4.</span> How to use `any` in HarmonyOS .ets files?  </span><br><span class="line">Use `ESObject` as an alternative to `any`. Understand the usage scenarios of `ESObject` via the links<span class="punctuation">:</span>  </span><br><span class="line">- https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-coding-9-V5  </span></span><br><span class="line">- https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/typescript-to-arkts-migration-guide-V5#%E9%99%90%E5%88%B6%E4%BD%BF%E7%94%A8esobject%E7%B1%BB%E5%9E%8B  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">5.</span> How does the HarmonyOS Grid component adapt its height to child elements?  </span><br><span class="line">Expect the Grid component&#x27;s overall height to be determined by the total height of its internal elements without a scrollbar. Can this be achieved? (Internal element heights are uncertain<span class="punctuation">,</span> so the Grid height cannot be fixed.)  </span><br><span class="line"></span><br><span class="line">Refer to the following demo<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct GridExample <span class="punctuation">&#123;</span></span><br><span class="line">  @State numbers<span class="punctuation">:</span> String<span class="punctuation">[</span><span class="punctuation">]</span> = <span class="punctuation">[</span>&#x27;<span class="number">0</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">1</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">2</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">3</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">4</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">5</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">6</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">7</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">8</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">9</span>&#x27;<span class="punctuation">]</span></span><br><span class="line">  scroller<span class="punctuation">:</span> Scroller = new Scroller()</span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">      Text(&#x27;scroll&#x27;).fontColor(<span class="number">0xCCCCCC</span>).fontSize(<span class="number">9</span>).width(&#x27;<span class="number">90</span>%&#x27;)</span><br><span class="line">      Grid(this.scroller) <span class="punctuation">&#123;</span></span><br><span class="line">        ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            GridItem() <span class="punctuation">&#123;</span></span><br><span class="line">              Text(day)</span><br><span class="line">                .fontSize(<span class="number">16</span>)</span><br><span class="line">                .backgroundColor(<span class="number">0xF9CF93</span>)</span><br><span class="line">                .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">                .height(<span class="number">80</span>)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .columnsTemplate(&#x27;<span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr&#x27;)</span><br><span class="line">      .columnsGap(<span class="number">10</span>)</span><br><span class="line">      .rowsGap(<span class="number">10</span>)</span><br><span class="line">      .onScrollIndex((first<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">        console.info(first.toString())</span><br><span class="line">      <span class="punctuation">&#125;</span>)</span><br><span class="line">      .width(&#x27;<span class="number">80</span>%&#x27;)</span><br><span class="line">      .layoutDirection(GridDirection.Row)</span><br><span class="line">      .maxCount(<span class="number">3</span>)</span><br><span class="line">      .backgroundColor(<span class="number">0xFAEEE0</span>)</span><br><span class="line">      .scrollBarWidth(<span class="number">0</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span>.width(&#x27;<span class="number">100</span>%&#x27;).margin(<span class="punctuation">&#123;</span> top<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a scroll layout to the outer layer</span></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct GridExample <span class="punctuation">&#123;</span></span><br><span class="line">  @State numbers<span class="punctuation">:</span> String<span class="punctuation">[</span><span class="punctuation">]</span> = <span class="punctuation">[</span>&#x27;<span class="number">0</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">1</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">2</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">3</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">4</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">5</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">6</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">7</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">8</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">9</span>&#x27;<span class="punctuation">]</span></span><br><span class="line">  scroller<span class="punctuation">:</span> Scroller = new Scroller()</span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Scroll() <span class="punctuation">&#123;</span></span><br><span class="line">      Column(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">        Text(&#x27;scroll&#x27;).fontColor(<span class="number">0xCCCCCC</span>).fontSize(<span class="number">9</span>).width(&#x27;<span class="number">90</span>%&#x27;)</span><br><span class="line">        Grid(this.scroller) <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">              GridItem() <span class="punctuation">&#123;</span></span><br><span class="line">                Text(day)</span><br><span class="line">                  .fontSize(<span class="number">16</span>)</span><br><span class="line">                  .backgroundColor(<span class="number">0xF9CF93</span>)</span><br><span class="line">                  .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">                  .height(<span class="number">80</span>)</span><br><span class="line">                  .textAlign(TextAlign.Center)</span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        .columnsTemplate(&#x27;<span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr&#x27;)</span><br><span class="line">        .columnsGap(<span class="number">10</span>)</span><br><span class="line">        .rowsGap(<span class="number">10</span>)</span><br><span class="line">        .onScrollIndex((first<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.info(first.toString())</span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">        .width(&#x27;<span class="number">80</span>%&#x27;)</span><br><span class="line">        .layoutDirection(GridDirection.Row)</span><br><span class="line">        .maxCount(<span class="number">3</span>)</span><br><span class="line">        .backgroundColor(<span class="number">0xFAEEE0</span>)</span><br><span class="line">        .scrollBarWidth(<span class="number">0</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span>.width(&#x27;<span class="number">100</span>%&#x27;).margin(<span class="punctuation">&#123;</span> top<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .scrollBarWidth(<span class="number">0</span>)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/112-Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/112-Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Handwriting Electronic Signature, Waterfall Layout String Height Acquisition, WaterFlow Crash, Web Scrolling Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:39:51 / Modified: 09:50:22" itemprop="dateCreated datePublished" datetime="2025-06-27T08:39:51+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Handwriting Electronic Signature, Waterfall Layout String Height Acquisition, WaterFlow Crash, Web Scrolling Issues"></a>[Daily HarmonyOS Next Knowledge] Handwriting Electronic Signature, Waterfall Layout String Height Acquisition, WaterFlow Crash, Web Scrolling Issues</h3><h4 id="1-Does-HarmonyOS-have-a-demo-for-handwriting-electronic-signatures-and-generating-images"><a href="#1-Does-HarmonyOS-have-a-demo-for-handwriting-electronic-signatures-and-generating-images" class="headerlink" title="1. Does HarmonyOS have a demo for handwriting electronic signatures and generating images?"></a>1. Does HarmonyOS have a demo for handwriting electronic signatures and generating images?</h4><p>Is there a demo for handwriting electronic signatures and generating images? We hope to have one.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/handwritingtoimage">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/handwritingtoimage</a>  </p>
<h4 id="2-How-to-get-the-height-of-a-string-in-HarmonyOS-waterfall-layout"><a href="#2-How-to-get-the-height-of-a-string-in-HarmonyOS-waterfall-layout" class="headerlink" title="2. How to get the height of a string in HarmonyOS waterfall layout?"></a>2. How to get the height of a string in HarmonyOS waterfall layout?</h4><p>Use the component area event <code>onAreaChange(event: (oldValue: Area, newValue: Area) =&gt; void)</code> to get the overall height of the Text component.  </p>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5#onareachange">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5#onareachange</a>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onAreaChange</span>(<span class="attr">event</span>: <span class="function">(<span class="params"><span class="attr">oldValue</span>: <span class="title class_">Area</span>, <span class="attr">newValue</span>: <span class="title class_">Area</span></span>) =&gt;</span> <span class="built_in">void</span>): T</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- This callback is triggered when the component area changes, responding only to changes in component size and position caused by layout changes.  </span></span><br><span class="line"><span class="string">- It does not respond to rendering property changes (e.g., translate, offset) or position changes determined by rendering (e.g., bindSheet).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS WaterFlow crashes when used with WaterFlowSection?  </span></span><br><span class="line"><span class="string">When using WaterFlow + WaterFlowSection as the `</span>customList<span class="string">` of PicturePullDownRefresh, a crash occurs during initialization.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Solution: In the WaterFlowSource.ets page, change `</span><span class="keyword">let</span> r = <span class="variable language_">this</span>.<span class="property">mSections</span>.<span class="title function_">update</span>(index, update)<span class="string">` to `</span><span class="keyword">let</span> r = <span class="variable language_">this</span>.<span class="property">mSections</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>, [update])<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Web component nested scrolling: When web content exceeds the screen length, the bottom content cannot scroll联动 (联动)?  </span></span><br><span class="line"><span class="string">- **Fixed header and footer**: Add an internal height to the outermost Column.  </span></span><br><span class="line"><span class="string">  `</span><span class="string">``</span>typescript</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="comment">/// </span></span><br><span class="line">  &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(&#123; <span class="attr">bottom</span>: <span class="number">40</span> &#125;)</span><br><span class="line">  <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- **Header and footer scroll with web content**: Place the header and footer inside the Scroll component.  </span></span><br><span class="line"><span class="string">  `</span><span class="string">``</span>typescript</span><br><span class="line">  <span class="title class_">Web</span>(&#123;</span><br><span class="line">    <span class="attr">src</span>: $rawfile(<span class="string">&quot;aa.html&quot;</span>),</span><br><span class="line">    <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">SYNC_RENDER</span></span><br><span class="line">  &#125;)</span><br><span class="line">    .<span class="title function_">layoutMode</span>(<span class="title class_">WebLayoutMode</span>.<span class="property">FIT_CONTENT</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">zoomAccess</span>(<span class="literal">false</span>)</span><br><span class="line">    .<span class="title function_">nestedScroll</span>(&#123;</span><br><span class="line">      <span class="attr">scrollForward</span>: <span class="title class_">NestedScrollMode</span>.<span class="property">SELF_FIRST</span>,</span><br><span class="line">      <span class="attr">scrollBackward</span>: <span class="title class_">NestedScrollMode</span>.<span class="property">SELF_FIRST</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Cannot get `</span><span class="variable language_">this</span><span class="string">` in HarmonyOS NodeController&#x27;s onTouchEvent function?  </span></span><br><span class="line"><span class="string">Using QueryImageNodeController (inherited from NodeController), which maintains a `</span>nodeArray<span class="string">`. When `</span>onTouchEvent<span class="string">` is called after a click, a crash occurs: `</span><span class="title class_">Cannot</span> read property nodeArray <span class="keyword">of</span> <span class="literal">undefined</span><span class="string">`. Why is `</span><span class="variable language_">this</span><span class="string">` undefined? Without `</span><span class="variable language_">this</span><span class="string">`, operations after clicking cannot be completed.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">QueryImageNodeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">NodeController</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">rootNode</span>?: <span class="title class_">FrameNode</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">nodeArray</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ImageNode</span>&gt; = []</span><br><span class="line">  <span class="attr">queryImageTouchCallBack</span>?: <span class="title class_">QueryImageTouchCallBack</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">makeNode</span>(<span class="attr">uiContext</span>: <span class="title class_">UIContext</span>): <span class="title class_">FrameNode</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rootNode</span> = <span class="keyword">new</span> <span class="title class_">FrameNode</span>(uiContext)</span><br><span class="line">    <span class="keyword">const</span> rootRenderNode = <span class="variable language_">this</span>.<span class="property">rootNode</span>.<span class="title function_">getRenderNode</span>()</span><br><span class="line">    <span class="keyword">if</span> (rootRenderNode) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">nodeArray</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        rootRenderNode.<span class="title function_">appendChild</span>(item.<span class="property">renderNode</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">rootNode</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onTouchEvent?(<span class="attr">event</span>: <span class="title class_">TouchEvent</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="variable language_">this</span>  <span class="comment">// Store `this` in a closure variable</span></span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">type</span> === <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (event.<span class="property">touches</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> lastTouch = event.<span class="property">touches</span>[event.<span class="property">touches</span>.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">let</span> x = lastTouch.<span class="property">x</span></span><br><span class="line">        <span class="keyword">let</span> y = lastTouch.<span class="property">y</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">nodeArray</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node, index</span>) =&gt;</span> &#123; </span><br><span class="line">          <span class="comment">// `this` may be undefined here; use `that` instead</span></span><br><span class="line">          <span class="keyword">let</span> box = node.<span class="property">boxItem</span>?.<span class="property">box</span></span><br><span class="line">          <span class="keyword">if</span> (!box) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (x &gt; box.<span class="property">x1</span> &amp;&amp; x &lt; box.<span class="property">x2</span> &amp;&amp; y &gt; box.<span class="property">y1</span> &amp;&amp; y &lt; box.<span class="property">y3</span>) &#123;</span><br><span class="line">            that.<span class="property">queryImageTouchCallBack</span>?.<span class="title function_">onRectTouch</span>(node.<span class="property">boxItem</span>?.<span class="property">questionIndex</span> ?? <span class="number">0</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">183</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
