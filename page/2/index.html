<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/2/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/521-Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/521-Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps/" class="post-title-link" itemprop="url">521[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 09:54:37" itemprop="dateCreated datePublished" datetime="2025-06-25T09:54:37+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/520-Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/520-Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Delayed Window Opening, Linear Gradient, Routing Parameters, Fixed Light Mode, Parameter Passing Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:53:02 / Modified: 09:53:38" itemprop="dateCreated datePublished" datetime="2025-06-25T09:53:02+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Delayed Window Opening, Linear Gradient, Routing Parameters, Fixed Light Mode, Parameter Passing Issues"></a>[Daily HarmonyOS Next Knowledge] Delayed Window Opening, Linear Gradient, Routing Parameters, Fixed Light Mode, Parameter Passing Issues</h3><h4 id="1-HarmonyOS-Cannot-open-a-new-window-with-window-open-when-setTimeout-delay-exceeds-5-seconds"><a href="#1-HarmonyOS-Cannot-open-a-new-window-with-window-open-when-setTimeout-delay-exceeds-5-seconds" class="headerlink" title="1. HarmonyOS: Cannot open a new window with window.open when setTimeout delay exceeds 5 seconds?"></a>1. HarmonyOS: Cannot open a new window with <code>window.open</code> when <code>setTimeout</code> delay exceeds 5 seconds?</h4><p>Testing shows the same issue with the window API. In web browsers, when <code>setTimeout</code> exceeds 5 seconds, the browser may block operations like <code>window.open</code> because it considers long-running timers a security risk (e.g., preventing ads or malicious scripts). Consider alternative methods to open windows.  </p>
<h4 id="2-HarmonyOS-linearGradient-property-does-not-work-under-the-Text-component"><a href="#2-HarmonyOS-linearGradient-property-does-not-work-under-the-Text-component" class="headerlink" title="2. HarmonyOS: linearGradient property does not work under the Text component?"></a>2. HarmonyOS: <code>linearGradient</code> property does not work under the <code>Text</code> component?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">  <span class="attr">direction</span>: <span class="title class_">GradientDirection</span>.<span class="property">Right</span>, <span class="comment">// Gradient direction</span></span><br><span class="line">  <span class="attr">repeating</span>: <span class="literal">false</span>, <span class="comment">// Whether gradient colors repeat</span></span><br><span class="line">  <span class="attr">colors</span>: [[<span class="string">&#x27;#F7F8FA&#x27;</span>, <span class="number">0.0</span>], [<span class="string">&#x27;#F7F8FA&#x27;</span>, <span class="number">1.0</span>]]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">This does not work when applied directly to a `</span><span class="title class_">Text</span><span class="string">` component.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference Demo**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">            .<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">DST_IN</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">        &#125;.<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">          <span class="attr">direction</span>: <span class="title class_">GradientDirection</span>.<span class="property">Right</span>,</span><br><span class="line">          <span class="attr">colors</span>: [[<span class="number">0xff0000</span>, <span class="number">0.0</span>], [<span class="number">0x0000ff</span>, <span class="number">0.3</span>], [<span class="number">0xffff00</span>, <span class="number">1.0</span>]]</span><br><span class="line">        &#125;).<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">SRC_OVER</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS: Cannot receive `</span><span class="title class_">Map</span><span class="string">` type parameters when using `</span>router.<span class="title function_">pushUrl</span>(&#123;<span class="attr">url</span>: url, <span class="attr">params</span>: params&#125;)<span class="string">` to pass data between pages?  </span></span><br><span class="line"><span class="string">The router does not support passing `</span><span class="title class_">Map</span><span class="string">` type data. Use `</span><span class="title class_">Record</span><span class="string">` instead, which only allows basic data types in `</span>params<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">private</span> routerParams : <span class="title class_">RouterParams</span> = <span class="keyword">new</span> <span class="title class_">RouterParams</span>()</span><br><span class="line"><span class="keyword">private</span> param : <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">routePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">param</span>[<span class="string">&#x27;vip_source&#x27;</span>] = <span class="string">&#x27;qww&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerParams</span>.<span class="property">pageType</span> = <span class="string">&#x27;11&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerParams</span>.<span class="property">params</span> = <span class="variable language_">this</span>.<span class="property">param</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerParams</span>.<span class="property">title</span> = <span class="string">&#x27;新闻&#x27;</span></span><br><span class="line">    router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;pages/RouterA&#x27;</span>,</span><br><span class="line">      <span class="attr">params</span>: <span class="variable language_">this</span>.<span class="property">routerParams</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">` fail callback, code: <span class="subst">$&#123;err.code&#125;</span>, msg: <span class="subst">$&#123;err.msg&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@State</span> <span class="attr">value</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt; = router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onPageShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hh2:&quot;</span> + <span class="variable language_">this</span>.<span class="property">value</span>[<span class="string">&#x27;title&#x27;</span>])</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hh3:&quot;</span> + <span class="variable language_">this</span>.<span class="property">value</span>[<span class="string">&#x27;params&#x27;</span>][<span class="string">&#x27;vip_source&#x27;</span>])</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS: How to force the app to always use light mode if dark mode is not yet supported?  </span></span><br><span class="line"><span class="string">**Solution**:  </span></span><br><span class="line"><span class="string">By default, apps follow the system&#x27;s light/dark mode. To fix your app to light mode:  </span></span><br><span class="line"><span class="string">1. Set the app&#x27;s color style explicitly.  </span></span><br><span class="line"><span class="string">2. After setting, the app will no longer follow system changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS: Parameter passing issues?  </span></span><br><span class="line"><span class="string">**Problem 1**: `</span><span class="variable language_">this</span>.<span class="property">highSheepNum</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">totalCount</span>()<span class="string">` does not assign the value.  </span></span><br><span class="line"><span class="string">**Problem 2**: After clicking the filter, `</span><span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">totalCount</span>()<span class="string">` updates, but `</span><span class="variable language_">this</span>.<span class="property">highSheepNum</span><span class="string">` in `</span><span class="title class_">Tabs</span> <span class="title class_">TabContent</span><span class="string">` does not refresh dynamically.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution 1**:  </span></span><br><span class="line"><span class="string">In the `</span>changeData<span class="string">` and `</span>init<span class="string">` functions, modify the for loop condition from `</span>i &lt;= <span class="variable language_">this</span>.<span class="property">listDate</span>.<span class="property">length</span><span class="string">` to `</span>i &lt; <span class="variable language_">this</span>.<span class="property">listDate</span>.<span class="property">length</span><span class="string">` to avoid accessing `</span><span class="variable language_">this</span>.<span class="property">listDate</span>[<span class="number">30</span>]<span class="string">`, which exceeds the array bounds.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">listDate</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution 2**:  </span></span><br><span class="line"><span class="string">Remove the third parameter from `</span><span class="title class_">TabRoadBuilder</span><span class="string">` and use `</span><span class="variable language_">this</span>.<span class="property">highSheepNum</span><span class="string">` directly to enable dynamic updates:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">Start</span> &#125;) &#123;</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">highSpeedBuilder</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabRoadBuilder</span>(<span class="number">0</span>, <span class="string">&#x27;优惠券&#x27;</span>)) <span class="comment">// Remove the third parameter</span></span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">tollStationsBuilder</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabRoadBuilder</span>(<span class="number">1</span>, <span class="string">&#x27;收费站&#x27;</span>)) <span class="comment">// Remove the third parameter</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span> <span class="title class_">TabRoadBuilder</span>(<span class="attr">index</span>: <span class="built_in">number</span>, <span class="attr">name</span>: <span class="built_in">string</span>) &#123; <span class="comment">// Remove the original third parameter</span></span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(name + <span class="string">&#x27;(&#x27;</span> + <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.highSheepNum&#125;</span>`</span> + <span class="string">&#x27;)&#x27;</span>) <span class="comment">// Use this.highSheepNum</span></span><br><span class="line">      .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="string">&#x27;#015DFF&#x27;</span> : <span class="string">&#x27;#999999&#x27;</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">      .<span class="title function_">fontWeight</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="number">500</span> : <span class="number">400</span>)</span><br><span class="line">      .<span class="title function_">lineHeight</span>(<span class="number">22</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">6</span>, <span class="attr">bottom</span>: <span class="number">6</span> &#125;)</span><br><span class="line">    <span class="title class_">Divider</span>().<span class="title function_">strokeWidth</span>(<span class="number">3</span>).<span class="title function_">color</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="string">&#x27;#015DFF&#x27;</span> : <span class="string">&#x27;#999999&#x27;</span>).<span class="title function_">width</span>(<span class="number">24</span>)</span><br><span class="line">  &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/519-Daily-HarmonyOS-Next-Knowledge-Click-Event-Not-Responding-Soft-Keyboard-Pop-up-Animation-Effects-Text-Selection-Status-Bar-Font-Settings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/519-Daily-HarmonyOS-Next-Knowledge-Click-Event-Not-Responding-Soft-Keyboard-Pop-up-Animation-Effects-Text-Selection-Status-Bar-Font-Settings/" class="post-title-link" itemprop="url">519[Daily HarmonyOS Next Knowledge] Click Event Not Responding, Soft Keyboard Pop-up, Animation Effects, Text Selection, Status Bar Font Settings</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 09:50:55" itemprop="dateCreated datePublished" datetime="2025-06-25T09:50:55+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/518-Daily-HarmonyOS-Next-Knowledge-List-Component-Copy-Issues-Retrieving-Page-Routing-Information-Component-Exposed-Methods-Page-Destruction-Issues-Status-Bar-Color-Modification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/518-Daily-HarmonyOS-Next-Knowledge-List-Component-Copy-Issues-Retrieving-Page-Routing-Information-Component-Exposed-Methods-Page-Destruction-Issues-Status-Bar-Color-Modification/" class="post-title-link" itemprop="url">518[Daily HarmonyOS Next Knowledge] List Component Copy Issues, Retrieving Page Routing Information, Component Exposed Methods, Page Destruction Issues, Status Bar Color Modification</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 09:49:19" itemprop="dateCreated datePublished" datetime="2025-06-25T09:49:19+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/517-Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/517-Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Singleton Pattern, Routing Warnings, Verification Code Popups, Custom Routing Table Implementation, Querying Screen Orientation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:47:17 / Modified: 09:47:51" itemprop="dateCreated datePublished" datetime="2025-06-25T09:47:17+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Singleton Pattern, Routing Warnings, Verification Code Popups, Custom Routing Table Implementation, Querying Screen Orientation"></a>[Daily HarmonyOS Next Knowledge] Routing Singleton Pattern, Routing Warnings, Verification Code Popups, Custom Routing Table Implementation, Querying Screen Orientation</h3><h4 id="1-Is-there-a-way-in-HarmonyOS-Navigation-to-implement-a-singleton-pattern-similar-to-RouterMode-in-Router"><a href="#1-Is-there-a-way-in-HarmonyOS-Navigation-to-implement-a-singleton-pattern-similar-to-RouterMode-in-Router" class="headerlink" title="1. Is there a way in HarmonyOS Navigation to implement a singleton pattern similar to RouterMode in Router?"></a>1. Is there a way in HarmonyOS Navigation to implement a singleton pattern similar to RouterMode in Router?</h4><p>Reference demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">pushPathsingleTask</span>(<span class="attr">info</span>: <span class="title class_">NavPathInfo</span>, <span class="attr">animated</span>?: <span class="built_in">boolean</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageArray</span> = [];</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageArray</span> = <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">getIndexByName</span>(info.<span class="property">name</span>);</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">pageArray</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">pushPath</span>(info, animated);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">popToIndex</span>(<span class="variable language_">this</span>.<span class="property">pageArray</span>.<span class="title function_">pop</span>(), animated);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-HarmonyOS-Warning-when-using-routeName-Is-there-an-alternative"><a href="#2-HarmonyOS-Warning-when-using-routeName-Is-there-an-alternative" class="headerlink" title="2. HarmonyOS: Warning when using routeName. Is there an alternative?"></a>2. HarmonyOS: Warning when using routeName. Is there an alternative?</h4><p><code>@Entry(&#123; routeName: ‘JLShowPrivacyPage’ &#125;)</code><br>Alert: <em>“It’s not a recommended way to export struct with @Entry decorator, which may cause ACE Engine error in component preview mode”</em>  </p>
<p><strong>Question</strong>: Will this warning cause exceptions during actual use? If so, what’s the alternative?<br><strong>Answer</strong>: This warning can be ignored. It may cause exceptions only in preview mode, but works fine on real devices.  </p>
<h4 id="3-HarmonyOS-Demo-for-preventing-SMS-verification-code-abuse-with-image-captcha-or-slider-verification"><a href="#3-HarmonyOS-Demo-for-preventing-SMS-verification-code-abuse-with-image-captcha-or-slider-verification" class="headerlink" title="3. HarmonyOS: Demo for preventing SMS verification code abuse with image captcha or slider verification?"></a>3. HarmonyOS: Demo for preventing SMS verification code abuse with image captcha or slider verification?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> promptAction <span class="keyword">from</span> <span class="string">&#x27;@ohos.promptAction&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">customDialogId</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> sliderValue = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">customDialogBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;安全验证&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">lineHeight</span>(<span class="number">60</span>);</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.error&#x27;</span>))</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">16</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;请滑到最右端&quot;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId);</span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="title class_">Slider</span>(&#123; <span class="attr">style</span>: <span class="title class_">SliderStyle</span>.<span class="property">InSet</span>, <span class="attr">value</span>: sliderValue &#125;)</span><br><span class="line">        .<span class="title function_">trackColor</span>(<span class="string">&#x27;rgba(40,40,40,0.5)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">selectedColor</span>(<span class="string">&#x27;rgba(200,200,200,1)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">trackThickness</span>(<span class="number">66</span>)</span><br><span class="line">        .<span class="title function_">blockStyle</span>(&#123; <span class="attr">type</span>: <span class="title class_">SliderBlockType</span>.<span class="property">IMAGE</span>, <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.arrow&#x27;</span>) &#125;)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">mode</span>: <span class="title class_">SliderChangeMode</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (value === <span class="number">100</span>) &#123;</span><br><span class="line">            promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">90</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">height</span>(<span class="number">220</span>)</span><br><span class="line">  .<span class="title function_">padding</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;获取验证码&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            promptAction.<span class="title function_">openCustomDialog</span>(&#123;</span><br><span class="line">              <span class="attr">builder</span>: customDialogBuilder.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">            &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">dialogId</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              customDialogId = dialogId;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="4-HarmonyOS-Complete-demo-for-custom-routing-tables-and-dynamic-routing"><a href="#4-HarmonyOS-Complete-demo-for-custom-routing-tables-and-dynamic-routing" class="headerlink" title="4. HarmonyOS: Complete demo for custom routing tables and dynamic routing?"></a>4. HarmonyOS: Complete demo for custom routing tables and dynamic routing?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/samples/#section11434169191">App Navigation Design</a>  </p>
<h4 id="5-HarmonyOS-Query-current-screen-orientation-portrait-landscape"><a href="#5-HarmonyOS-Query-current-screen-orientation-portrait-landscape" class="headerlink" title="5. HarmonyOS: Query current screen orientation (portrait&#x2F;landscape)?"></a>5. HarmonyOS: Query current screen orientation (portrait&#x2F;landscape)?</h4><p><strong>1. Listen for orientation changes</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> listener = mediaquery.<span class="title function_">matchMediaSync</span>(<span class="string">&#x27;(orientation: landscape)&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>2. Query current orientation</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">orientation</span>: <span class="built_in">number</span> = display.<span class="title function_">getDefaultDisplaySync</span>().<span class="property">orientation</span>;</span><br><span class="line"><span class="keyword">switch</span> (orientation) &#123;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;竖屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;横屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">PORTRAIT_INVERTED</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;反向竖屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">LANDSCAPE_INVERTED</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;反向横屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;不知道&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Additional methods</strong>:  </p>
<ul>
<li>Use <code>display.on(&#39;windowSizeChange&#39;)</code> to listen for screen changes.  </li>
<li>Configure <code>orientation: auto_rotation</code> in <code>module.json5</code> for auto-rotation.  </li>
<li>Dynamically set orientation with <code>window.setPreferredOrientation</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5">Display API</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/516-Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/516-Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Listening for Visibility, Loading GIFs, User Page Access Data, Bottom Sliding Pop-ups, Sending Emoji Messages</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:39:20 / Modified: 08:39:45" itemprop="dateCreated datePublished" datetime="2025-06-25T08:39:20+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages"><a href="#Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Listening for Visibility, Loading GIFs, User Page Access Data, Bottom Sliding Pop-ups, Sending Emoji Messages"></a>[Daily HarmonyOS Next Knowledge] Listening for Visibility, Loading GIFs, User Page Access Data, Bottom Sliding Pop-ups, Sending Emoji Messages</h3><h4 id="1-HarmonyOS-Can’t-listen-for-visible-invisible-states-of-Navigation-component-content"><a href="#1-HarmonyOS-Can’t-listen-for-visible-invisible-states-of-Navigation-component-content" class="headerlink" title="1. HarmonyOS: Can’t listen for visible&#x2F;invisible states of Navigation component content?"></a>1. HarmonyOS: Can’t listen for visible&#x2F;invisible states of Navigation component content?</h4><p>Issue: The navbar home page does not trigger the lifecycle. Currently, you can listen for navigation to the home page (named “navBar”) via <code>observer.on(&#39;navDestinationSwitch&#39;)</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12</a>  </p>
<h4 id="2-HarmonyOS-Can-I-control-GIF-playback-when-loading-with-image"><a href="#2-HarmonyOS-Can-I-control-GIF-playback-when-loading-with-image" class="headerlink" title="2. HarmonyOS: Can I control GIF playback when loading with image?"></a>2. HarmonyOS: Can I control GIF playback when loading with image?</h4><p>Yes, use the third-party library <code>ohos_gif-drawable</code> to control GIF play&#x2F;pause.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_gif-drawable">https://gitee.com/openharmony-sig/ohos_gif-drawable</a>  </p>
<h4 id="3-HarmonyOS-How-to-obtain-user-page-access-data-for埋点-tracking"><a href="#3-HarmonyOS-How-to-obtain-user-page-access-data-for埋点-tracking" class="headerlink" title="3. HarmonyOS: How to obtain user page access data for埋点 (tracking)?"></a>3. HarmonyOS: How to obtain user page access data for埋点 (tracking)?</h4><ol>
<li><p>Use the <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-hiviewdfx-hiappevent-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-hiviewdfx-hiappevent-V5</a> interface, a system-level event tracking mechanism for apps to record faults, statistics, security info, and user behaviors.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/2_3hiappevent_u4f7f_u7528_u6307_u5bfc-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/2_3hiappevent_u4f7f_u7528_u6307_u5bfc-V5</a>  </p>
</li>
<li><p>For global page lifecycle listening:  </p>
<ul>
<li>Use <code>observer.on(&#39;routerPageUpdate&#39;)</code> for pages.  </li>
<li>Use <code>observer.on(&#39;navDestinationUpdate&#39;)</code> for NavDestination.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5</a></li>
</ul>
</li>
</ol>
<h4 id="4-HarmonyOS-How-to-implement-a-bottom-sliding-pop-up-attached-to-the-page"><a href="#4-HarmonyOS-How-to-implement-a-bottom-sliding-pop-up-attached-to-the-page" class="headerlink" title="4. HarmonyOS: How to implement a bottom sliding pop-up attached to the page?"></a>4. HarmonyOS: How to implement a bottom sliding pop-up attached to the page?</h4><p>Check if half-modal transitions can meet the requirement. Bind a half-modal page to a component via the <code>bindSheet</code> attribute, and set the size using custom or default built-in heights.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5</a>  </p>
<h4 id="5-HarmonyOS-Demo-for-sending-edited-messages-with-text-and-emoji-in-instant-messaging"><a href="#5-HarmonyOS-Demo-for-sending-edited-messages-with-text-and-emoji-in-instant-messaging" class="headerlink" title="5. HarmonyOS: Demo for sending edited messages with text and emoji in instant messaging?"></a>5. HarmonyOS: Demo for sending edited messages with text and emoji in instant messaging?</h4><p>Use <code>RichEditor</code> to display text and emojis when sending edited messages in IM.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/blob/master/CommonAppDevelopment/feature/chatwithexpression/README.md">https://gitee.com/harmonyos-cases/cases/blob/master/CommonAppDevelopment/feature/chatwithexpression/README.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/515-Daily-HarmonyOS-Next-Knowledge-Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Modifier-Problems/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/515-Daily-HarmonyOS-Next-Knowledge-Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Modifier-Problems/" class="post-title-link" itemprop="url">515[Daily HarmonyOS Next Knowledge] Grid Drag Animation, Timer Control, Routing Selection Issues, State Modifier Problems</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:27:01 / Modified: 08:37:40" itemprop="dateCreated datePublished" datetime="2025-06-25T08:27:01+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-Learn-HarmonyOS-Next-Knowledge】Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Decoration-Problems"><a href="#【Daily-Learn-HarmonyOS-Next-Knowledge】Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Decoration-Problems" class="headerlink" title="【Daily Learn HarmonyOS Next Knowledge】Grid Drag Animation, Timer Control, Routing Selection Issues, State Decoration Problems"></a>【Daily Learn HarmonyOS Next Knowledge】Grid Drag Animation, Timer Control, Routing Selection Issues, State Decoration Problems</h3><h4 id="1-HarmonyOS-Grid-Drag-Animation-Issue"><a href="#1-HarmonyOS-Grid-Drag-Animation-Issue" class="headerlink" title="1. HarmonyOS Grid Drag Animation Issue"></a>1. HarmonyOS Grid Drag Animation Issue</h4><p>The following demo implements partial items that do not respond to dragging, but the animation has issues where items get squeezed together.  </p>
<pre><code class="language-typescript">// Refer to the following Demo  
@Entry  
@Component  
struct GridExample &#123;  
  @State numbers: string[] = []  
  scroller: Scroller = new Scroller()  
  layoutOptions1: GridLayoutOptions = &#123;  
    regularSize: [1, 1], // Only supports [1, 1]  
    irregularIndexes: [0], // The GridItem at index 0 occupies a full row  
  &#125;  
  @State text: string = &#39;drag&#39;  
  @Builder pixelMapBuilder() &#123; // Dragging style during the process  
    Column() &#123;  
      Text(this.text)  
        .fontSize(16)  
        .backgroundColor(0xF9CF93)  
        .width(80)  
        .height(80)  
        .textAlign(TextAlign.Center)  
    &#125;  
  &#125;  
  aboutToAppear() &#123;  
    for (let i = 1; i &lt;= 9; i++) &#123;  
      this.numbers.push(i + &#39;&#39;)  
    &#125;  
  &#125;  
  changeIndex(index1: number, index2: number) &#123; // Swap positions in the array  
    const temp = this.numbers[index1];  
    if (index1 &gt; index2) &#123;  
      this.numbers.splice(index2, 0, temp);  
      this.numbers.splice(index1 + 1, 1);  
    &#125; else &#123;  
      this.numbers.splice(index2 + 1, 0, temp);  
      this.numbers.splice(index1, 1);  
    &#125;  
  &#125;  
  build() &#123;  
    Column(&#123; space: 5 &#125;) &#123;  
      Grid(this.scroller, this.layoutOptions1) &#123;  
        ForEach(this.numbers, (day: string) =&gt; &#123;  
          GridItem() &#123;  
            if (day == &quot;1&quot;) &#123;  
              Text(day)  
                .fontSize(16)  
                .backgroundColor(0xF9CF93)  
                .width(&quot;100%&quot;)  
                .height(80)  
                .textAlign(TextAlign.Center)  
            &#125; else &#123;  
              Text(day)  
                .fontSize(16)  
                .backgroundColor(0xF9CF93)  
                .width(80)  
                .height(80)  
                .textAlign(TextAlign.Center)  
            &#125;  
          &#125;  
        &#125;)  
      &#125;  
      .columnsTemplate(&#39;1fr 1fr 1fr 1fr&#39;)  
      .columnsGap(10)  
      .rowsGap(10)  
      .onScrollIndex((first: number) =&gt; &#123;  
        console.info(first.toString())  
      &#125;)  
      .width(&#39;100%&#39;)  
      .backgroundColor(0xFAEEE0)  
      .height(300)  
      .supportAnimation(true)  
      .editMode(true) // Set whether Grid enters edit mode; in edit mode, GridItems inside can be dragged  
      .onItemDragStart((event: ItemDragInfo, itemIndex: number) =&gt; &#123; // Triggered when dragging the bound component for the first time  
        if (itemIndex == 0) &#123;  
          return;  
        &#125;  
        this.text = this.numbers[itemIndex]  
        return this.pixelMapBuilder() // Set the image displayed during dragging  
      &#125;)  
      .onItemDrop((event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; &#123; // The bound component can act as a drop target; when dragging stops within its bounds, this callback is triggered  
        // If isSuccess=false, the drop position is outside the grid; if insertIndex &gt; length, a new element event occurs  
        if (!isSuccess || insertIndex &gt;= this.numbers.length || insertIndex == 0) &#123;  
          return  
        &#125;  
        console.info(&#39;tag&#39; + itemIndex + &#39;&#39;, insertIndex + &#39;&#39;) // itemIndex: drag start position, insertIndex: drag insert position  
        this.changeIndex(itemIndex, insertIndex)  
      &#125;)  
    &#125;.width(&#39;100%&#39;).margin(&#123; top: 5 &#125;)  
  &#125;  
&#125;  
</code></pre>
<p><strong>Reference Demo:</strong>  </p>
<pre><code class="language-typescript">import curves from &#39;@ohos.curves&#39;  
// xxx.ets  
@Entry  
@Component  
struct GridItemExample &#123;  
  @State numbers: number[] = []  
  @State dragItem: number = -1  
  @State scaleItem: number = -1  
  @State item: number = -1  
  private dragRefOffsetx: number = 0  
  private dragRefOffsety: number = 0  
  @State offsetX: number = 0  
  @State offsetY: number = 0  
  private FIX_VP_X: number = 108  
  private FIX_VP_Y: number = 120  
  aboutToAppear() &#123;  
    for (let i = 1; i &lt;= 11; i++) &#123;  
      this.numbers.push(i)  
    &#125;  
  &#125;  
  itemMove(index: number, newIndex: number): void &#123;  
    console.info(&#39;index:&#39; + index + &#39; newIndex:&#39; + newIndex)  
    if (!this.isDraggable(newIndex)) &#123;  
      return  
    &#125;  
    let tmp = this.numbers.splice(index, 1)  
    this.numbers.splice(newIndex, 0, tmp[0])  
  &#125;  
  // Scroll down  
  down(index: number): void &#123;  
    // Specify fixed GridItems that do not respond to events  
    if (!this.isDraggable(index + 3)) &#123;  
      return  
    &#125;  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 3)  
  &#125;  
  // Scroll down (bottom-right corner empty)  
  down2(index: number): void &#123;  
    if (!this.isDraggable(index + 3)) &#123;  
      return  
    &#125;  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 3)  
  &#125;  
  // Scroll up  
  up(index: number): void &#123;  
    if (!this.isDraggable(index - 3)) &#123;  
      return  
    &#125;  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 3)  
  &#125;  
  // Scroll left  
  left(index: number): void &#123;  
    if (!this.isDraggable(index - 1)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.itemMove(index, index - 1)  
  &#125;  
  // Scroll right  
  right(index: number): void &#123;  
    if (!this.isDraggable(index + 1)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.itemMove(index, index + 1)  
  &#125;  
  // Scroll bottom-right  
  lowerRight(index: number): void &#123;  
    if (!this.isDraggable(index + 4)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 4)  
  &#125;  
  // Scroll top-right  
  upperRight(index: number): void &#123;  
    if (!this.isDraggable(index - 2)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 2)  
  &#125;  
  // Scroll bottom-left  
  lowerLeft(index: number): void &#123;  
    if (!this.isDraggable(index + 2)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 2)  
  &#125;  
  // Scroll top-left  
  upperLeft(index: number): void &#123;  
    if (!this.isDraggable(index - 4)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 4)  
  &#125;  
  isDraggable(index: number): boolean &#123;  
    console.info(&#39;index:&#39; + index)  
    return index &gt; 1  
  &#125;  
  build() &#123;  
    Column(&#123;space:10&#125;) &#123;  
      Column(&#123;space:5&#125;) &#123;  
        Text(&quot;Grid Drag Sorting Animation&quot;)  
        Text(&quot;Components 1 and 2 cannot be dragged&quot;)  
      &#125;  
      Grid() &#123;  
        ForEach(this.numbers, (item: number) =&gt; &#123;  
          GridItem() &#123;  
            Text(item + &#39;&#39;)  
              .fontSize(16)  
              .width(&#39;100%&#39;)  
              .textAlign(TextAlign.Center)  
              .height(100)  
              .borderRadius(10)  
              .backgroundColor(0xFFFFFF)  
              .shadow(this.scaleItem == item ? &#123;  
                radius: 70,  
                color: &#39;#15000000&#39;,  
                offsetX: 0,  
                offsetY: 0  
              &#125; : &#123;  
                radius: 0,  
                color: &#39;#15000000&#39;,  
                offsetX: 0,  
                offsetY: 0  
              &#125;)  
              .animation(&#123; curve: Curve.Sharp, duration: 300 &#125;)  
          &#125;  
          // Specify fixed GridItems that do not respond to events  
          .hitTestBehavior(this.isDraggable(this.numbers.indexOf(item)) ? HitTestMode.Default : HitTestMode.None)  
          .scale(&#123; x: this.scaleItem == item ? 1.05 : 1, y: this.scaleItem == item ? 1.05 : 1 &#125;)  
          .zIndex(this.dragItem == item ? 1 : 0)  
          .translate(this.dragItem == item ? &#123; x: this.offsetX, y: this.offsetY &#125; : &#123; x: 0, y: 0 &#125;)  
          .padding(10)  
          .gesture(  
            // The following combined gestures are recognized in sequence; if the long-press gesture event is not triggered properly, the drag gesture event will not be triggered  
            GestureGroup(GestureMode.Sequence,  
              LongPressGesture(&#123; repeat: true &#125;)  
                .onAction((event?: GestureEvent) =&gt; &#123;  
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;  
                    this.scaleItem = item  
                  &#125;)  
                &#125;)  
                .onActionEnd(() =&gt; &#123;  
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;  
                    this.scaleItem = -1  
                  &#125;)  
                &#125;),  
              PanGesture(&#123; fingers: 1, direction: null, distance: 0 &#125;)  
                .onActionStart(() =&gt; &#123;  
                  this.dragItem = item  
                  this.dragRefOffsetx = 0  
                  this.dragRefOffsety = 0  
                &#125;)  
                .onActionUpdate((event: GestureEvent) =&gt; &#123;  
                  this.offsetY = event.offsetY - this.dragRefOffsety  
                  this.offsetX = event.offsetX - this.dragRefOffsetx  
                  // console.log(&#39;X:&#39; + this.offsetX.toString())  
                  // console.log(&#39;Y:&#39; + this.offsetY.toString())  
                  animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;  
                    let index = this.numbers.indexOf(this.dragItem)  
                    if (this.offsetY &gt;= this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)  
                      &amp;&amp; ![8, 9, 10].includes(index)) &#123;  
                      // Scroll down  
                      this.down(index)  
                    &#125; else if (this.offsetY &lt;= -this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)  
                      &amp;&amp; ![0, 1, 2].includes(index)) &#123;  
                      // Scroll up  
                      this.up(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)  
                      &amp;&amp; ![2, 5, 8, 10].includes(index)) &#123;  
                      // Scroll right  
                      this.right(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)  
                      &amp;&amp; ![0, 3, 6, 9].includes(index)) &#123;  
                      // Scroll left  
                      this.left(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; ![2, 5, 7, 8, 9, 10].includes(index)) &#123;  
                      // Scroll bottom-right  
                      this.lowerRight(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 1, 2, 5, 8].includes(index)) &#123;  
                      // Scroll top-right  
                      this.upperRight(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 3, 6, 9, 10].includes(index)) &#123;  
                      // Scroll bottom-left  
                      this.lowerLeft(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 1, 2, 3, 6, 9].includes(index)) &#123;  
                      // Scroll top-left  
                      this.upperLeft(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; [7].includes(index)) &#123;  
                      // Scroll bottom-right (bottom-right corner empty)  
                      this.down2(index)  
                    &#125;  
</code></pre>
<h4 id="2-HarmonyOS-TextTimer-Usage-Issue"><a href="#2-HarmonyOS-TextTimer-Usage-Issue" class="headerlink" title="2. HarmonyOS TextTimer Usage Issue"></a>2. HarmonyOS TextTimer Usage Issue</h4><p>When using <code>TextTimer</code> as a countdown timer, how to set the starting time? For example, how to start counting from <code>00:01:20</code> (1 minute and 20 seconds)?  </p>
<p>The <code>count</code> property represents the initial countdown value (only valid when <code>isCountDown</code> is <code>true</code>), in milliseconds. The maximum value is <code>86400000</code> milliseconds (24 hours). When <code>0 &lt; count &lt; 86400000</code>, an example is as follows:  </p>
<pre><code class="language-typescript">@Entry  
@Component  
struct Index &#123;  
  textTimerController: TextTimerController = new TextTimerController()  
  @State format: string = &#39;mm:ss.SS&#39;  
  build() &#123;  
    Column() &#123;  
      TextTimer(&#123; isCountDown: true, count: 1200, controller: this.textTimerController &#125;)  
        .format(this.format)  
        .fontColor(Color.Black)  
        .fontSize(50)  
        .onTimer((utc: number, elapsedTime: number) =&gt; &#123;  
          console.info(&#39;textTimer notCountDown utc is：&#39; + utc + &#39;, elapsedTime: &#39; + elapsedTime)  
        &#125;)  
      Row() &#123;  
        Button(&quot;start&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.start()  
        &#125;)  
        Button(&quot;pause&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.pause()  
        &#125;)  
        Button(&quot;reset&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.reset()  
        &#125;)  
      &#125;  
    &#125;  
  &#125;  
&#125;  
</code></pre>
<h4 id="3-HarmonyOS-Navigation-If-onPop-is-Passed-When-A-Navigates-to-B-but-B-Calls-pop-Without-Passing-result-onPop-Is-Not-Triggered"><a href="#3-HarmonyOS-Navigation-If-onPop-is-Passed-When-A-Navigates-to-B-but-B-Calls-pop-Without-Passing-result-onPop-Is-Not-Triggered" class="headerlink" title="3. HarmonyOS Navigation: If onPop is Passed When A Navigates to B, but B Calls pop Without Passing result, onPop Is Not Triggered?"></a>3. HarmonyOS Navigation: If <code>onPop</code> is Passed When A Navigates to B, but B Calls <code>pop</code> Without Passing <code>result</code>, <code>onPop</code> Is Not Triggered?</h4><p>You can pass <code>null</code> when calling <code>pop</code> to trigger the <code>onPop</code> callback.  </p>
<h4 id="4-HarmonyOS-Routing-Management-Should-We-Use-router-or-Navigation"><a href="#4-HarmonyOS-Routing-Management-Should-We-Use-router-or-Navigation" class="headerlink" title="4. HarmonyOS Routing Management: Should We Use router or Navigation?"></a>4. HarmonyOS Routing Management: Should We Use <code>router</code> or <code>Navigation</code>?</h4><p>It is recommended to use <code>Navigation</code>. The <code>RouterModule</code> module includes global routing stack and routing table information. The routing stack is a <code>NavPathStack</code> object, which is bound to the <code>Navigation</code> component in <code>Entry.hap</code>. <code>RouterModule</code> manages the routing information of the <code>Navigation</code> component by holding the <code>NavPathStack</code>. The routing table <code>builderMap</code> is a <code>Map</code> structure, storing page component information in a key-value format, where the key is a custom unique route name, and the value is a <code>WrappedBuilder</code> object wrapping the corresponding page component. The implementation of <code>RouterModule</code> mainly includes the following steps:  </p>
<pre><code class="language-typescript">1. Define the routing table and routing stack.  
export class RouterModule &#123;  
  // WrappedBuilder supports encapsulating components described by @Builder as parameters for storage  
  static builderMap: Map&lt;string, WrappedBuilder&lt;[object]&gt;&gt; = new Map&lt;string, WrappedBuilder&lt;[object]&gt;&gt;();  
  // Initialize the routing stack, which needs to be associated with the Navigation component  
  static navPathStack: NavPathStack = new NavPathStack();  
&#125;  

2. Add routing registration and retrieval methods to the routing table. Business har modules register page components to be routed to `RouterModule` via the registration method.  
export class RouterModule &#123;  
  // ...  
  // Register a page component to the routing table. `builderName` is the route name, and `builder` is the `WrappedBuilder` object wrapping the page component  
  public static registerBuilder(builderName: string, builder: WrappedBuilder&lt;[object]&gt;): void &#123;  
    RouterModule.builderMap.set(builderName, builder);  
  &#125;  

  // Retrieve the specified page component from the routing table  
  public static getBuilder(builderName: string): WrappedBuilder&lt;[object]&gt; &#123;  
    const builder = RouterModule.builderMap.get(builderName);  
    if (!builder) &#123;  
      console.info(&#39;not found builder &#39; + builderName);  
    &#125;  
    return builder as WrappedBuilder&lt;[object]&gt;;  
  &#125;  
&#125;  
export class RouterModule &#123;  
  // ...  
  // Navigate to a specified page by retrieving it from the page stack  
  public static async push(harName: string, builderName: string): Promise&lt;void&gt; &#123;  
    // Dynamically import the har module where the page is located to avoid explicit dependencies between business har modules, enabling on-demand loading  
    await import(harName);  
    // Navigate via the routing stack method by route name  
    RouterModule.navPathStack.pushPathByName(builderName, null);  
  &#125;  
&#125;  
</code></pre>
<h4 id="5-HarmonyOS-Should-State-Decorated-Variables-Be-Mandatory-Initialized"><a href="#5-HarmonyOS-Should-State-Decorated-Variables-Be-Mandatory-Initialized" class="headerlink" title="5. HarmonyOS: Should @State-Decorated Variables Be Mandatory Initialized?"></a>5. HarmonyOS: Should <code>@State</code>-Decorated Variables Be Mandatory Initialized?</h4><p><code>@State</code>-decorated variables should not be mandatory initialized.  </p>
<p>Variables decorated with <code>@State</code>, like other decorated variables in declarative paradigms, are private and can only be accessed within the component. They must specify their type and local initialization upon declaration. Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-V5</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/514-Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/514-Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Cache Clearing, Popup Back Gesture Handling, Routing Configuration File Reading, Relative Layout Height Adaptation, Transparent Background Color</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:25:38 / Modified: 08:26:08" itemprop="dateCreated datePublished" datetime="2025-06-25T08:25:38+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color"><a href="#Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Cache Clearing, Popup Back Gesture Handling, Routing Configuration File Reading, Relative Layout Height Adaptation, Transparent Background Color"></a>[Daily HarmonyOS Next Knowledge] Cache Clearing, Popup Back Gesture Handling, Routing Configuration File Reading, Relative Layout Height Adaptation, Transparent Background Color</h3><h4 id="1-Does-HarmonyOS-have-a-method-to-clear-cache"><a href="#1-Does-HarmonyOS-have-a-method-to-clear-cache" class="headerlink" title="1. Does HarmonyOS have a method to clear cache?"></a>1. Does HarmonyOS have a method to clear cache?</h4><p>Is there an API to directly clear the app’s cache?  </p>
<ol>
<li><p>Currently, there is no dedicated cache-clearing interface. Recommendations:  </p>
<ul>
<li>Use <code>storageStatistics.getCurrentBundleStats()</code> to query cache statistics.  </li>
<li>To clear file cache, obtain the cache directory via <code>context.cacheDir</code>, then use system file <code>fs</code> APIs to identify and delete files&#x2F;folders.  </li>
<li>Detailed usage: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-file-storage-statistics-V5">Query Cache</a></li>
</ul>
</li>
<li><p>Data that may not be cleared includes preferences, web preferences, and Web component caches:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-data-preferences-V5#clear">Clear Preferences</a>:  <ul>
<li><code>delete(key)</code>: Remove a specific key-value pair from the Preferences instance (use <code>flush</code> to persist, with async callback).  </li>
<li><code>clear()</code>: Remove all data from the Preferences instance (use <code>flush</code> to persist, with async callback).</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cookie-and-data-storage-mgmt-V5">Clear Web Cache</a></li>
</ul>
</li>
</ol>
<h4 id="2-How-to-handle-back-gestures-for-popups-in-HarmonyOS"><a href="#2-How-to-handle-back-gestures-for-popups-in-HarmonyOS" class="headerlink" title="2. How to handle back gestures for popups in HarmonyOS?"></a>2. How to handle back gestures for popups in HarmonyOS?</h4><p>Need to implement a universal pop-up layer system across all pages in Taobao-like apps, involving back gesture handling for pop-up layers.  </p>
<p>Aim to manage back gestures for pop-up layers, actively intercepting and determining whether to respond. For example:  </p>
<ul>
<li>Allow users to exit only the topmost popup via back gesture.  </li>
<li>Allow users to exit the entire page via back gesture.</li>
</ul>
<p>Handle gesture interception by calling <code>onBackPressed</code> in the root container <code>NavDestination</code> of the subpage.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navdestination-V5#ZH-CN_TOPIC_0000001884757826__onbackpressed10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navdestination-V5#ZH-CN_TOPIC_0000001884757826__onbackpressed10</a>  </p>
<h4 id="3-How-to-read-the-router-map-json-file-in-HarmonyOS"><a href="#3-How-to-read-the-router-map-json-file-in-HarmonyOS" class="headerlink" title="3. How to read the router_map.json file in HarmonyOS?"></a>3. How to read the router_map.json file in HarmonyOS?</h4><p>After registering new system routes to the <code>router_map.json</code> file in the profile as per Navigation requirements, we need to extend the file by adding custom <code>itemName</code> for jump logic. However, using <code>$r(&quot;app.profile.router_map&quot;)</code> to read the file is prohibited. How to resolve this?  </p>
<p>Current limitation: <code>router_map.json</code> does not support custom configurations.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-basic-components-navigation.md#%E7%A4%BA%E4%BE%8B2">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-basic-components-navigation.md#%E7%A4%BA%E4%BE%8B2</a>  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example router_map.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routerMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;testPage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pageSourceFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main/ets/router/TradeTestPage.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;buildFunction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;getTestPage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;this is PageOne&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;itemName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1-21-13-1-3&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">```json</span><br><span class="line"><span class="comment">// Configuration in module.json5</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routerMap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$profile:route_map&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// route_map.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routerMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pageOne&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pageSourceFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main/ets/pages/PageOne.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;buildFunction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PageOneBuilder&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;this is pageOne&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pageTwo&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pageSourceFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main/ets/pages/PageTwo.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;buildFunction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PageTwoBuilder&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">4.</span> How to achieve height adaptation for RelativeContainer in HarmonyOS?  </span><br><span class="line">When `RelativeContainer` does not set `height`<span class="punctuation">,</span> it occupies the full screen. Which properties should be set for height adaptation to child components?  </span><br><span class="line"></span><br><span class="line">`RelativeContainer` supports width/height adaptation to child components by setting `width`/`height` to `auto`<span class="punctuation">,</span> but with constraints<span class="punctuation">:</span>  </span><br><span class="line">- If `width<span class="punctuation">:</span> auto` is set and child components anchor to the container horizontally<span class="punctuation">,</span> `auto` may not take effect (similar for vertical direction).  </span><br><span class="line">Reference<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5  </span></span><br><span class="line"></span><br><span class="line">Demo<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct MyRelativeContainer <span class="punctuation">&#123;</span></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column() <span class="punctuation">&#123;</span></span><br><span class="line">      Row() <span class="punctuation">&#123;</span></span><br><span class="line">        Text(&#x27;Width and height auto-adaptive&#x27;)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">      RelativeContainer() <span class="punctuation">&#123;</span></span><br><span class="line">        Row()</span><br><span class="line">          .width(<span class="number">100</span>)</span><br><span class="line">          .height(<span class="number">100</span>)</span><br><span class="line">          .backgroundColor(<span class="string">&quot;#FF3333&quot;</span>)</span><br><span class="line">          .alignRules(<span class="punctuation">&#123;</span><span class="punctuation">&#125;</span>)</span><br><span class="line">          .id(<span class="string">&quot;row1&quot;</span>)</span><br><span class="line">        Row()</span><br><span class="line">          .width(<span class="number">100</span>)</span><br><span class="line">          .height(<span class="number">100</span>)</span><br><span class="line">          .backgroundColor(<span class="string">&quot;#FFCC00&quot;</span>)</span><br><span class="line">          .alignRules(<span class="punctuation">&#123;</span></span><br><span class="line">            top<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> VerticalAlign.Top <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            left<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> HorizontalAlign.End <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">          .id(<span class="string">&quot;row2&quot;</span>)</span><br><span class="line">        Row()</span><br><span class="line">          .height(<span class="number">100</span>)</span><br><span class="line">          .width(<span class="number">100</span>)</span><br><span class="line">          .backgroundColor(<span class="string">&quot;#FF6633&quot;</span>)</span><br><span class="line">          .alignRules(<span class="punctuation">&#123;</span></span><br><span class="line">            left<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> HorizontalAlign.Start <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            top<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> VerticalAlign.Bottom <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">          .id(<span class="string">&quot;row3&quot;</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line">      .height(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line">      .margin(<span class="punctuation">&#123;</span> left<span class="punctuation">:</span> <span class="number">50</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">      .border(<span class="punctuation">&#123;</span> width<span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> color<span class="punctuation">:</span> <span class="string">&quot;#6699FF&quot;</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">5.</span> How to set transparent background color in HarmonyOS?  </span><br><span class="line">How to apply transparency to background colors? For example<span class="punctuation">:</span>  </span><br><span class="line">Using `.opacity(<span class="number">0.8</span>)` on a `Text` component affects both the background and text color transparency.  </span><br><span class="line"></span><br><span class="line">Use `rgba` to set background transparency instead of `opacity`<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct ScrollExample <span class="punctuation">&#123;</span></span><br><span class="line">  scroller<span class="punctuation">:</span> Scroller = new Scroller();</span><br><span class="line">  private arr<span class="punctuation">:</span> number<span class="punctuation">[</span><span class="punctuation">]</span> = <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">]</span>;</span><br><span class="line">  @State alpha<span class="punctuation">:</span> string = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column() <span class="punctuation">&#123;</span></span><br><span class="line">      Row() <span class="punctuation">&#123;</span></span><br><span class="line">        Text(&#x27;Test Content&#x27;)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">      .height(<span class="number">100</span>)</span><br><span class="line">      .backgroundColor(this.alpha);</span><br><span class="line">      Scroll(this.scroller) <span class="punctuation">&#123;</span></span><br><span class="line">        Column() <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.arr<span class="punctuation">,</span> (item) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            Text(item.toString())</span><br><span class="line">              .width(&#x27;<span class="number">90</span>%&#x27;)</span><br><span class="line">              .height(<span class="number">150</span>)</span><br><span class="line">              .backgroundColor(<span class="number">0xFFFFFF</span>)</span><br><span class="line">              .borderRadius(<span class="number">15</span>)</span><br><span class="line">              .fontSize(<span class="number">16</span>)</span><br><span class="line">              .textAlign(TextAlign.Center)</span><br><span class="line">              .margin(<span class="punctuation">&#123;</span> top<span class="punctuation">:</span> <span class="number">10</span> <span class="punctuation">&#125;</span>);</span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span> item =&gt; item);</span><br><span class="line">        <span class="punctuation">&#125;</span>.width(&#x27;<span class="number">100</span>%&#x27;);</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">      .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">      .onScroll((xOffset<span class="punctuation">:</span> number<span class="punctuation">,</span> yOffset<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">        let offset = this.scroller.currentOffset().yOffset;</span><br><span class="line">        if (offset &gt;= <span class="number">150</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          this.alpha = &#x27;rgba(<span class="number">255</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0.8</span>)&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span> else if (offset &lt;= <span class="number">0</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          this.alpha = &#x27;rgba(<span class="number">255</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0.6</span>)&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span> else <span class="punctuation">&#123;</span></span><br><span class="line">          this.alpha = &#x27;rgba(<span class="number">255</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0.3</span>)&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span>);</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/513-Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/513-Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Back, Anti-Shake & Throttle, Navigation Without Named Routes, Single-Page Full Screen, Removing Pages from Route Stack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:24:02 / Modified: 08:24:33" itemprop="dateCreated datePublished" datetime="2025-06-25T08:24:02+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Back, Anti-Shake &amp; Throttle, Navigation Without Named Routes, Single-Page Full Screen, Removing Pages from Route Stack"></a>[Daily HarmonyOS Next Knowledge] Routing Back, Anti-Shake &amp; Throttle, Navigation Without Named Routes, Single-Page Full Screen, Removing Pages from Route Stack</h3><h4 id="1-HarmonyOS-How-to-trigger-page-refresh-with-State-annotated-data-when-navigating-back-using-router-back"><a href="#1-HarmonyOS-How-to-trigger-page-refresh-with-State-annotated-data-when-navigating-back-using-router-back" class="headerlink" title="1. HarmonyOS: How to trigger page refresh with @State-annotated data when navigating back using router.back()?"></a>1. HarmonyOS: How to trigger page refresh with @State-annotated data when navigating back using router.back()?</h4><p>Use <code>router.back(url, params)</code> to return to the previous page with parameters for data refresh.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-router-V5#routerback">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-router-V5#routerback</a>  </p>
<h4 id="2-HarmonyOS-How-to-implement-anti-shake-and-throttle-in-a-project"><a href="#2-HarmonyOS-How-to-implement-anti-shake-and-throttle-in-a-project" class="headerlink" title="2. HarmonyOS: How to implement anti-shake and throttle in a project?"></a>2. HarmonyOS: How to implement anti-shake and throttle in a project?</h4><p>For common scenarios like button clicks or API calls requiring debounce&#x2F;throttle:  </p>
<ul>
<li>Are there lodash-like debounce&#x2F;throttle functions in HarmonyOS?  </li>
<li>Should we use <code>timer</code> or <code>setInterval</code> for implementation? Are there performance issues?</li>
</ul>
<p>Throttle has minimal performance impact since it limits execution to once per specified period, preventing rapid consecutive clicks.  </p>
<p><strong>Debounce implementation demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct SearchDemo &#123;
  @State timeout: number = -1;

  build() &#123;
    Column() &#123;
      Text(&#39;Click&#39;)
        .fontSize(&#39;25fp&#39;)
        .fontColor(Color.White)
        .fontWeight(FontWeight.Bold)
        .borderRadius(15)
        .padding(8)
        .backgroundColor(Color.Blue)
        .onClick(() =&gt; &#123;
          this.debounce(this.setFinalInput, 3000);
        &#125;)
    &#125;
  &#125;

  debounce(fn: Function, wait: number = 300) &#123;
    if (this.timeout !== -1) &#123;
      clearTimeout(this.timeout);
    &#125;
    this.timeout = setTimeout(fn.bind(this), wait);
    console.log(&quot;zd--- ==timeout==&quot;, this.timeout);
  &#125;

  setFinalInput() &#123;
    console.log(&quot;zd--- setFinalInput this&quot;, JSON.stringify(this));
    // this.finalSearchInput = this.searchInput;
  &#125;
&#125;
</code></pre>
<p><strong>Throttle implementation demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct ListPage &#123;
  @State pageNumber: number = 1;
  @State running: boolean = false;
  @State list: number[] = [];

  aboutToAppear(): void &#123;
    for (let i = 1; i &lt;= 8; i++) &#123;
      this.list.push(i);
    &#125;
  &#125;

  getData() &#123;
    let number = this.list.length + 1;
    for (let i = number; i &lt;= 8 * this.pageNumber; i++) &#123;
      this.list.push(i);
    &#125;
    this.running = false;
    console.log(this.list.length.toString());
  &#125;

  @Builder
  ListItemBuilder(item: number) &#123;
    Row() &#123;
      Text(item.toString())
    &#125;
    .width(&#39;100%&#39;)
    .padding(50)
    .backgroundColor(Color.Pink)
  &#125;

  build() &#123;
    Column() &#123;
      List(&#123; space: 10 &#125;) &#123;
        ForEach(this.list, (item: number) =&gt; &#123;
          this.ListItemBuilder(item)
        &#125;, (item: number) =&gt; JSON.stringify(item))
      &#125;
      .padding(20)
      .edgeEffect(EdgeEffect.Spring)
      .onReachEnd(() =&gt; &#123;
        if (!this.running) &#123;
          this.running = true;
          this.pageNumber++;
          setTimeout(() =&gt; &#123;
            this.getData();
          &#125;, 2000);
        &#125;
      &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .alignItems(HorizontalAlign.Center)
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-Cannot-use-named-routes-directly-in-Navigation’s-navDestination"><a href="#3-HarmonyOS-Cannot-use-named-routes-directly-in-Navigation’s-navDestination" class="headerlink" title="3. HarmonyOS: Cannot use named routes directly in Navigation’s navDestination?"></a>3. HarmonyOS: Cannot use named routes directly in Navigation’s navDestination?</h4><p>Desired to directly display named route components in <code>navDestination</code> without manual definition:  </p>
<pre><code class="language-typescript">@Builder
function PageMap(name: string, param: object) &#123;
  if (name === WebViewPagesRouter.COMPONENT_WEBVIEW_PAGE) &#123;
    WebViewPage2(&#123; param: param &#125;)
  &#125;
&#125;
</code></pre>
<p>Current issue: Manually defining components in <code>navDestination</code> prevents lifecycle methods like <code>onPageShow</code> from working.  </p>
<p>Previously defined page with router:  </p>
<pre><code class="language-typescript">@Entry(&#123; routeName: WebViewPagesRouter.COMPONENT_WEBVIEW_PAGE &#125;)
@Component
export struct WebViewPage2 &#123;
&#125;
</code></pre>
<p><strong>Solution</strong>:<br>Starting from API version 12, Navigation supports dynamic routing using the system route table. Each module (HSP&#x2F;HAR) must configure a <code>router_map.json</code> file. During navigation, pass the page configuration name to <code>NavPactStack</code> methods. The system handles dynamic module loading, component creation, and route transition, achieving module decoupling.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5#ZH-CN_TOPIC_0000001935135741__%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5#ZH-CN_TOPIC_0000001935135741__%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8</a>  </p>
<h4 id="4-HarmonyOS-Are-there-APIs-to-set-a-single-page-to-full-screen-hide-the-status-bar-or-hide-the-bottom-navigation-bar"><a href="#4-HarmonyOS-Are-there-APIs-to-set-a-single-page-to-full-screen-hide-the-status-bar-or-hide-the-bottom-navigation-bar" class="headerlink" title="4. HarmonyOS: Are there APIs to set a single page to full screen, hide the status bar, or hide the bottom navigation bar?"></a>4. HarmonyOS: Are there APIs to set a single page to full screen, hide the status bar, or hide the bottom navigation bar?</h4><p><strong>Reference</strong>: Safe Area<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5</a>  </p>
<p>The safe area is the default display region that avoids system areas like the status bar and navigation bar. Use <code>expandSafeArea</code> to extend component rendering beyond the safe area without altering layout. Configure keyboard avoidance with <code>setKeyboardAvoidMode</code>. For immersive effects where text (e.g., title bars) should not overlap non-safe areas, use <code>expandSafeArea</code> or <code>setWindowLayoutFullScreen</code>.  </p>
<h4 id="5-HarmonyOS-NavPathStack’s-removeByIndexes-API-does-not-support-silently-removing-non-top-pages-from-the-stack"><a href="#5-HarmonyOS-NavPathStack’s-removeByIndexes-API-does-not-support-silently-removing-non-top-pages-from-the-stack" class="headerlink" title="5. HarmonyOS: NavPathStack’s removeByIndexes API does not support silently removing non-top pages from the stack?"></a>5. HarmonyOS: NavPathStack’s removeByIndexes API does not support silently removing non-top pages from the stack?</h4><p>To remove specific subpages, pass the index(es) to <code>NavPathStack.removeByIndexes([1])</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#removebyindexes11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#removebyindexes11</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/512-Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/512-Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Navigation Issues, Icon Sliding Problems, Font Line Height Settings, Interrupting Infinite Loop Animations, Event Distribution</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:22:51 / Modified: 08:23:46" itemprop="dateCreated datePublished" datetime="2025-06-25T08:22:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Navigation Issues, Icon Sliding Problems, Font Line Height Settings, Interrupting Infinite Loop Animations, Event Distribution"></a>[Daily HarmonyOS Next Knowledge] Routing Navigation Issues, Icon Sliding Problems, Font Line Height Settings, Interrupting Infinite Loop Animations, Event Distribution</h3><h4 id="1-HarmonyOS-Pushing-a-page-immediately-after-popping-causes-the-push-to-fail"><a href="#1-HarmonyOS-Pushing-a-page-immediately-after-popping-causes-the-push-to-fail" class="headerlink" title="1. HarmonyOS: Pushing a page immediately after popping causes the push to fail?"></a>1. HarmonyOS: Pushing a page immediately after popping causes the push to fail?</h4><p>If the first <code>push</code> and the second <code>push</code> target the same page (e.g., a customDialog), and <code>pop</code> and <code>push</code> are called consecutively in the first dialog, the system may not detect page changes and thus not trigger navigation. Recommendations:  </p>
<ol>
<li>Use <code>replace</code> instead of the second <code>push</code> if you want users to perceive page transitions.  </li>
<li>Refresh the customDialog page display if transitions are unnecessary.</li>
</ol>
<h4 id="2-HarmonyOS-How-to-allow-horizontal-but-block-vertical-scrolling-for-a-parent-component-in-ohos-MpChart"><a href="#2-HarmonyOS-How-to-allow-horizontal-but-block-vertical-scrolling-for-a-parent-component-in-ohos-MpChart" class="headerlink" title="2. HarmonyOS: How to allow horizontal but block vertical scrolling for a parent component in @ohos&#x2F;MpChart?"></a>2. HarmonyOS: How to allow horizontal but block vertical scrolling for a parent component in @ohos&#x2F;MpChart?</h4><p><strong>Consulting Description</strong>:<br>How to enable horizontal scrolling while disabling vertical scrolling for a parent component in @ohos&#x2F;MpChart? (<code>HitTestMode.Block</code> blocks both LineChart and parent scrolling in all directions.)  </p>
<p><strong>Scenario</strong>:<br>Child component (LineChart):  </p>
<pre><code class="language-typescript">build() &#123;
  Column() &#123;
    LineChart(&#123; model: this.line &#125;)
      .width(FULL)
      .height(CHART_HEIGHT)
      .hitTestBehavior(HitTestMode.Block)
  &#125;
&#125;
</code></pre>
<p>Parent component (Tabs):  </p>
<pre><code class="language-typescript">@Builder
TabsComponent() &#123;
  // tabs
  Tabs() &#123;
    // weight
    TabContent() &#123;
      Scroll() &#123;
        MineWeightComponent()
          .padding(&#123; top: 1, bottom: 120 &#125;)
      &#125;
      .height(FULL)
      .scrollBar(BarState.Off)
      .nestedScroll(&#123;
        scrollForward: NestedScrollMode.PARENT_FIRST,
        scrollBackward: NestedScrollMode.SELF_FIRST,
      &#125;)
    &#125;
    .tabBar(this.tabBuilder(0, CommonConstants.TAB_NAME_1))
</code></pre>
<p>Add <code>.hitTestBehavior(HitTestMode.None)</code> to the parent component to disable self-event handling while allowing child and sibling components to respond.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5</a><br>This property configures how components respond to touch events. During touch event processing, the ArkUI framework performs a hit test between the touch point and component regions to determine which components should handle the event. The <code>hitTestBehavior</code> property modifies this behavior, affecting event distribution.  </p>
<p><strong>Current Workaround</strong>:<br>Use <code>@Provide</code> and <code>@Consume</code> for state management. Capture <code>TouchType.Down</code> events in the child component to temporarily disable Tab scrolling, allowing the LineChart to handle gestures. Restore Tab scrolling after the gesture ends.  </p>
<p>Example code:  </p>
<pre><code class="language-typescript">// Parent component:
import &#123; Const &#125; from &#39;../common/constants/CommonConstants&#39;;
import &#123; MineWeightComponent &#125; from &#39;../view/MineWeightComponent&#39;;

@Entry
@Component
struct TabTest &#123;
  @Provide tabScrollable: boolean = true;

  build() &#123;
    RelativeContainer() &#123;
      Tabs() &#123;
        TabContent() &#123;
          Scroll() &#123;
            MineWeightComponent()
          &#125;
          .height(Const.FULL_PERCENT)
          .scrollBar(BarState.Off)
          .nestedScroll(&#123;
            scrollForward: NestedScrollMode.PARENT_FIRST,
            scrollBackward: NestedScrollMode.SELF_FIRST,
          &#125;)
        &#125;
        .tabBar(this.tabBuilder(0, &quot;TAB_1&quot;))
      &#125;
      // Bind tabScrollable
      .scrollable(this.tabScrollable)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;

// Child component:
@Component
export struct MineWeightComponent &#123;
  @Consume tabScrollable: boolean;
  //...

  build() &#123;
    Column() &#123;
      LineChart(&#123; model: this.model &#125;)
        .width(FULL)
        .height(400)
        .onTouch((event: TouchEvent) =&gt; &#123;
          // Modify parent Tab&#39;s scroll behavior based on touch events
          switch (event.type) &#123;
            case TouchType.Down:
              this.tabScrollable = false;
              break;
            case TouchType.Cancel:
              this.tabScrollable = true;
              break;
            case TouchType.Up:
              this.tabScrollable = true;
              break;
          &#125;
        &#125;)
      //...
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-How-to-set-font-line-height"><a href="#3-HarmonyOS-How-to-set-font-line-height" class="headerlink" title="3. HarmonyOS: How to set font line height?"></a>3. HarmonyOS: How to set font line height?</h4><p>The height is determined by the font, character content, TextStyle, and font size. There is no direct <code>set</code> method.<br>Reference: <code>heightScale</code><br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/_o_h___drawing___strut_style-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/_o_h___drawing___strut_style-V5</a>  </p>
<h4 id="4-HarmonyOS-How-to-interrupt-an-infinitely-looping-animation"><a href="#4-HarmonyOS-How-to-interrupt-an-infinitely-looping-animation" class="headerlink" title="4. HarmonyOS: How to interrupt an infinitely looping animation?"></a>4. HarmonyOS: How to interrupt an infinitely looping animation?</h4><p>For animations created with <code>animateTo</code>, use <code>animator.pause()</code> to stop them.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-animator-V5#pause">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-animator-V5#pause</a>  </p>
<h4 id="5-HarmonyOS-Updating-a-model-via-EventHub-does-not-trigger-page-refresh"><a href="#5-HarmonyOS-Updating-a-model-via-EventHub-does-not-trigger-page-refresh" class="headerlink" title="5. HarmonyOS: Updating a model via EventHub does not trigger page refresh?"></a>5. HarmonyOS: Updating a model via EventHub does not trigger page refresh?</h4><p>Directly calling model methods to update data triggers page refresh. However, updating data in a model after receiving an EventHub event updates the data but not the UI.  </p>
<p><strong>Explanation</strong>:<br>The <code>constructor</code> executes before the proxy object is created, so <code>@Observed</code> cannot detect changes made there. When a class is decorated with <code>@Observed</code>, a proxy wraps the class to intercept member variable changes. Changes made in the constructor bypass this proxy, so UI updates are not triggered.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%9C%A8observed%E8%A3%85%E9%A5%B0%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%BB%B6%E6%97%B6%E6%9B%B4%E6%94%B9%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%9C%A8observed%E8%A3%85%E9%A5%B0%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%BB%B6%E6%97%B6%E6%9B%B4%E6%94%B9%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
