<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/11/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/530-Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/530-Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Navigation Area Height, Screenshot/Screen Recording Monitoring, Device Auto-Rotation, Notch Screen Adaptation, Passing Page Parameters to Sub-Windows</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:22:13 / Modified: 10:24:00" itemprop="dateCreated datePublished" datetime="2025-06-25T10:22:13+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows"><a href="#Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Navigation Area Height, Screenshot&#x2F;Screen Recording Monitoring, Device Auto-Rotation, Notch Screen Adaptation, Passing Page Parameters to Sub-Windows"></a>[Daily HarmonyOS Next Knowledge] Navigation Area Height, Screenshot&#x2F;Screen Recording Monitoring, Device Auto-Rotation, Notch Screen Adaptation, Passing Page Parameters to Sub-Windows</h3><h4 id="1-Is-the-height-of-the-navigation-area-accurate-in-HarmonyOS-windowClass-getWindowAvoidArea"><a href="#1-Is-the-height-of-the-navigation-area-accurate-in-HarmonyOS-windowClass-getWindowAvoidArea" class="headerlink" title="1. Is the height of the navigation area accurate in HarmonyOS windowClass.getWindowAvoidArea()?"></a>1. Is the height of the navigation area accurate in HarmonyOS windowClass.getWindowAvoidArea()?</h4><p>The following code is used to obtain the position information of the bottom navigation area, and the obtained height value is 91. Is this accurate? What is the logic behind this fixed value?  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const systemArea = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_NAVIGATION_INDICATOR); </span><br><span class="line">console.log(&quot;systemArea&gt;&gt;&gt;&gt;&gt;&gt;&quot;, JSON.stringify(systemArea)) </span><br><span class="line">```  </span><br><span class="line">Print result:  </span><br></pre></td></tr></table></figure>
<p>systemArea&gt;&gt;&gt;&gt;&gt;&gt; {“visible”:true,”leftRect”:{“left”:0,”top”:0,”width”:0,”height”:0},”topRect”:{“left”:0,”top”:0,”width”:0,”height”:0},”rightRect”:{“left”:0,”top”:0,”width”:0,”height”:0},”bottomRect”:{“left”:409,”top”:2629,”width”:442,”height”:91}}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Currently, the obtained 91 is in pixels (px). The navigation bar itself has a height of 6vp and a margin of 10vp from the screen edge.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2. How to distinguish between screenshot and screen recording events in HarmonyOS?  </span><br><span class="line">When using `@ohos.window.on(‘screenshot’)` to monitor screenshot events, both user screenshots and the end of screen recording trigger this event. How to distinguish between screenshot and screen recording events?  </span><br><span class="line"></span><br><span class="line">For monitoring changes in screen capture, casting, and screen recording status, refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#ZH-CN_TOPIC_0000001930756769__displayoncapturestatuschange12  </span><br><span class="line"></span><br><span class="line">`on(type: &#x27;captureStatusChange&#x27;, callback: Callback&lt;boolean&gt;): void`  </span><br><span class="line">Monitors changes in screen capture, casting, and screen recording status.  </span><br><span class="line"></span><br><span class="line">**Parameters:**  </span><br><span class="line"></span><br><span class="line">| Parameter Name | Type                | Required | Description                                                                 |</span><br><span class="line">| :------------- | :------------------ | :------- | :-------------------------------------------------------------------------- |</span><br><span class="line">| type           | string              | Yes      | The event to monitor, fixed as &#x27;captureStatusChange&#x27; indicating changes in device screenshot, casting, or screen recording status. |</span><br><span class="line">| callback       | Callback&lt;boolean&gt;   | Yes      | The callback function. Indicates changes in device screenshot, casting, or screen recording status. `true` means starting screenshot/casting/screen recording, `false` means ending it. |  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. Does HarmonyOS support device auto-rotation?  </span><br><span class="line">Does HarmonyOS support automatic screen rotation? How to monitor device rotation to control portrait/landscape display of pages.  </span><br><span class="line"></span><br><span class="line">**App configuration for auto-rotation:**  </span><br><span class="line">1. In the module configuration file `module.json5`, set &quot;orientation&quot;: &quot;auto_rotation_restricted&quot; for EntryAbility.  </span><br><span class="line">2. Enable the device&#x27;s auto-rotation function.  </span><br><span class="line"></span><br><span class="line">**Implementation in the app:**  </span><br><span class="line">- Obtain the window instance via `window.getLastWindow`.  </span><br><span class="line">- Set the window display orientation using `setPreferredOrientation`.  </span><br><span class="line">- Monitor screen status changes via `display.on`.  </span><br><span class="line">- After setting a specific orientation, use the sensor mode to determine the screen direction.  </span><br><span class="line"></span><br><span class="line">**Demo:**  </span><br><span class="line">```typescript</span><br><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line">import display from &#x27;@ohos.display&#x27;;</span><br><span class="line"></span><br><span class="line">const TAG = &#x27;foo&#x27;</span><br><span class="line">const ORIENTATION: Array&lt;string&gt; = [&#x27;Vertical&#x27;, &#x27;Horizontal&#x27;, &#x27;Reverse Vertical&#x27;, &#x27;Reverse Horizontal&#x27;]</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line"></span><br><span class="line">  @State rotation: number = 0</span><br><span class="line">  @State message: string = ORIENTATION[this.rotation]</span><br><span class="line">  @Watch(&#x27;setWindowLayOut&#x27;) @State isLandscape: boolean = false; // Landscape status</span><br><span class="line"></span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line"></span><br><span class="line">    this.setOrientation(1)</span><br><span class="line">    let callback = async () =&gt; &#123;</span><br><span class="line">      let d = await display.getDefaultDisplaySync()</span><br><span class="line">      this.rotation = d.rotation</span><br><span class="line">      this.message = ORIENTATION[this.rotation]</span><br><span class="line">      console.info(TAG, JSON.stringify(d))</span><br><span class="line">    &#125;</span><br><span class="line">    try &#123;</span><br><span class="line">      display.on(&quot;change&quot;, callback); // Monitor screen status changes</span><br><span class="line">    &#125; catch (exception) &#123;</span><br><span class="line">      console.error(TAG, &#x27;Failed to register callback. Code: &#x27; + JSON.stringify(exception));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setOrientation(type: number) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      window.getLastWindow(getContext(this), (err, data) =&gt; &#123; // Get window instance</span><br><span class="line">        if (err.code) &#123;</span><br><span class="line">          console.error(TAG, &#x27;Failed to obtain the top window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        let windowClass = data;</span><br><span class="line">        console.info(TAG, &#x27;Succeeded in obtaining the top window. Data: &#x27; + JSON.stringify(data));</span><br><span class="line"></span><br><span class="line">        let orientation: number;</span><br><span class="line">        if (type === 1) &#123;</span><br><span class="line">          orientation = window.Orientation.AUTO_ROTATION; // Set window orientation to sensor auto-rotation mode</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          orientation = window.Orientation.UNSPECIFIED; // Set window orientation to sensor lock</span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">          windowClass.setPreferredOrientation(orientation, (err) =&gt; &#123;</span><br><span class="line">            if (err.code) &#123;</span><br><span class="line">              console.error(TAG, &#x27;Failed to set window orientation. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(TAG, &#x27;Succeeded in setting window orientation.&#x27;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; catch (exception) &#123;</span><br><span class="line">          console.error(TAG, &#x27;Failed to set window orientation. Cause: &#x27; + JSON.stringify(exception));</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; catch (exception) &#123;</span><br><span class="line">      console.error(TAG, &#x27;Failed to obtain the top window. Cause: &#x27; + JSON.stringify(exception));</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setWindowLayOut() &#123;</span><br><span class="line">    // Manually change device orientation (set full-screen mode, first force landscape, then add sensor mode)</span><br><span class="line">    window.getLastWindow(getContext(this)).then((windowClass) =&gt; &#123;</span><br><span class="line">      if (this.isLandscape) &#123;</span><br><span class="line">        console.log(&#x27;Set landscape orientation&#x27;)</span><br><span class="line">        windowClass.setPreferredOrientation(window.Orientation.AUTO_ROTATION_LANDSCAPE);</span><br><span class="line"></span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        console.log(&#x27;Set portrait orientation&#x27;)</span><br><span class="line">        windowClass.setPreferredOrientation(window.Orientation.AUTO_ROTATION_PORTRAIT);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(`$&#123;this.rotation&#125;`).fontSize(25)</span><br><span class="line">        Text(`$&#123;this.message&#125;`).fontSize(25)</span><br><span class="line">        Button(&#x27;Full Screen&#x27;)</span><br><span class="line">          .width(140)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            this.isLandscape = !this.isLandscape; // Toggle landscape</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&quot;100%&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. How to adapt to notch screens in HarmonyOS?  </span><br><span class="line">Adapt to notch screens by using the `setWindowLayoutFullScreen` interface to set the window to full-screen layout. Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5#%E4%BD%93%E9%AA%8C%E7%AA%97%E5%8F%A3%E6%B2%89%E6%B5%B8%E5%BC%8F%E8%83%BD%E5%8A%9B  </span><br><span class="line"></span><br><span class="line">In scenarios like watching videos or playing games, users often want to hide unnecessary system windows (status bar, navigation bar) for an immersive experience. This can be achieved using window immersive capabilities (applicable to the app&#x27;s main window):  </span><br><span class="line">- Starting from API version 10, immersive windows are configured as full-screen by default, with layout controlled by the component module. The status bar and navigation bar have transparent backgrounds and black text.  </span><br><span class="line">- The `setWindowLayoutFullScreen` interface controls immersive full-screen layout (ignoring status/navigation bars when `true`) or non-immersive full-screen layout (avoiding status/navigation bars when `false`).  </span><br><span class="line"></span><br><span class="line">**Development steps:**  </span><br><span class="line">1. **Obtain the app&#x27;s main window** via `getMainWindow`.  </span><br><span class="line">2. **Implement immersive effects** in two ways:  </span><br><span class="line">   - **Method 1**: When the main window is full-screen, call `setWindowSystemBarEnable` to hide the navigation and status bars.  </span><br><span class="line">   - **Method 2**: Call `setWindowLayoutFullScreen` to set the main window to full-screen layout, then use `setWindowSystemBarProperties` to configure transparency, background/text colors, and highlight icons for the system bars to match the main window.  </span><br><span class="line">3. **Load and display immersive window content** via `loadContent`.  </span><br><span class="line"></span><br><span class="line">**Code example:**  </span><br><span class="line">```typescript</span><br><span class="line">import &#123; UIAbility &#125; from &#x27;@kit.AbilityKit&#x27;;</span><br><span class="line">import &#123; window &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default class EntryAbility extends UIAbility &#123;</span><br><span class="line">  onWindowStageCreate(windowStage: window.WindowStage) &#123;</span><br><span class="line">    // 1. Obtain the app&#x27;s main window.</span><br><span class="line">    let windowClass: window.Window | null = null;</span><br><span class="line">    windowStage.getMainWindow((err: BusinessError, data) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to obtain the main window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      windowClass = data;</span><br><span class="line">      console.info(&#x27;Succeeded in obtaining the main window. Data: &#x27; + JSON.stringify(data));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      // 2. Implement immersive effects. Method 1: Hide system bars.</span><br><span class="line">      let names: Array&lt;&#x27;status&#x27; | &#x27;navigation&#x27;&gt; = [];</span><br><span class="line">      windowClass.setWindowSystemBarEnable(names)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.info(&#x27;Succeeded in hiding the system bar.&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;Failed to hide the system bar. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">        &#125;);</span><br><span class="line">      // 2. Implement immersive effects. Method 2: Set full-screen layout and configure system bar properties.</span><br><span class="line">      let isLayoutFullScreen = true;</span><br><span class="line">      windowClass.setWindowLayoutFullScreen(isLayoutFullScreen)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.info(&#x27;Succeeded in setting full-screen layout.&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;Failed to set full-screen layout. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">        &#125;);</span><br><span class="line">      let sysBarProps: window.SystemBarProperties = &#123;</span><br><span class="line">        statusBarColor: &#x27;#ff00ff&#x27;,</span><br><span class="line">        navigationBarColor: &#x27;#00ff00&#x27;,</span><br><span class="line">        // The following two properties are supported from API Version 8</span><br><span class="line">        statusBarContentColor: &#x27;#ffffff&#x27;,</span><br><span class="line">        navigationBarContentColor: &#x27;#ffffff&#x27;</span><br><span class="line">      &#125;;</span><br><span class="line">      windowClass.setWindowSystemBarProperties(sysBarProps)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.info(&#x27;Succeeded in setting system bar properties.&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;Failed to set system bar properties. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    // 3. Load the target page for the immersive window.</span><br><span class="line">    windowStage.loadContent(&quot;pages/page2&quot;, (err: BusinessError) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to load content. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.info(&#x27;Succeeded in loading content.&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. How to pass page parameters to a sub-window when creating it in HarmonyOS?  </span><br><span class="line">**Reference demo:**  </span><br><span class="line"></span><br><span class="line">**EntryAbility.ets**  </span><br><span class="line">```typescript</span><br><span class="line">onWindowStageCreate(windowStage: window.WindowStage): void &#123;</span><br><span class="line">  // Main window is created, set main page for this ability</span><br><span class="line">  hilog.info(0x0000, &#x27;testTag&#x27;, &#x27;%&#123;public&#125;s&#x27;, &#x27;Ability onWindowStageCreate&#x27;);</span><br><span class="line"></span><br><span class="line">  windowStage.loadContent(&#x27;pages/Index&#x27;, (err) =&gt; &#123;</span><br><span class="line">  if (err.code) &#123;</span><br><span class="line">  hilog.error(0x0000, &#x27;testTag&#x27;, &#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;, JSON.stringify(err) ?? &#x27;&#x27;);</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line">hilog.info(0x0000, &#x27;testTag&#x27;, &#x27;Succeeded in loading the content.&#x27;);</span><br><span class="line">// Pass windowStage to the Index page</span><br><span class="line">AppStorage.setOrCreate(&#x27;windowStage&#x27;, windowStage);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Index.ets**  </span><br><span class="line">```typescript</span><br><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@ohos.base&#x27;;</span><br><span class="line">let windowStage_: window.WindowStage | undefined = undefined;</span><br><span class="line">let sub_windowClass: window.Window | undefined = undefined;</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State message: string = &#x27;Hello World&#x27;;</span><br><span class="line"></span><br><span class="line">  storage: LocalStorage = new LocalStorage();</span><br><span class="line"></span><br><span class="line">  private CreateSubWindow()&#123;</span><br><span class="line">    // Get windowStage</span><br><span class="line">    windowStage_ = AppStorage.get(&#x27;windowStage&#x27;);</span><br><span class="line">    // 1. Create an app sub-window.</span><br><span class="line">    if (windowStage_ == null) &#123;</span><br><span class="line">      console.error(&#x27;Failed to create subwindow. Cause: windowStage_ is null&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      windowStage_.createSubWindow(&quot;mySubWindow&quot;, (err: BusinessError, data) =&gt; &#123;</span><br><span class="line">        let errCode: number = err.code;</span><br><span class="line">        if (errCode) &#123;</span><br><span class="line">          console.error(&#x27;Failed to create subwindow. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        sub_windowClass = data;</span><br><span class="line">        console.info(&#x27;Succeeded in creating subwindow. Data: &#x27; + JSON.stringify(data));</span><br><span class="line">        // 2. Set sub-window position, size, and properties.</span><br><span class="line">        sub_windowClass.moveWindowTo(300, 300, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to move window. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in moving window.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        sub_windowClass.resize(500, 500, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to resize window. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in resizing window.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        // 3. Load the target page for the sub-window and pass parameters via LocalStorage.</span><br><span class="line">        this.storage.setOrCreate(&#x27;storageSimpleProp&#x27;, 121);</span><br><span class="line">        sub_windowClass.loadContent(&quot;pages/SubWindow&quot;, this.storage, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to load content. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in loading content.&#x27;);</span><br><span class="line">          // 4. Show the sub-window.</span><br><span class="line">          (sub_windowClass as window.Window).showWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">            let errCode: number = err.code;</span><br><span class="line">            if (errCode) &#123;</span><br><span class="line">              console.error(&#x27;Failed to show window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;Succeeded in showing window.&#x27;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  private destroySubWindow()&#123;</span><br><span class="line">    // 5. Destroy the sub-window when no longer needed.</span><br><span class="line">    (sub_windowClass as window.Window).destroyWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to destroy window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.info(&#x27;Succeeded in destroying window.&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .fontSize(50)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">        Button()&#123;</span><br><span class="line">          Text(&#x27;CreateSubWindow&#x27;)</span><br><span class="line">            .fontSize(24)</span><br><span class="line">            .fontWeight(FontWeight.Normal)</span><br><span class="line">        &#125;.width(220).height(68)</span><br><span class="line">        .margin(&#123;left:10, top:60&#125;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.CreateSubWindow()</span><br><span class="line">        &#125;)</span><br><span class="line">        Button()&#123;</span><br><span class="line">          Text(&#x27;destroySubWindow&#x27;)</span><br><span class="line">            .fontSize(24)</span><br><span class="line">            .fontWeight(FontWeight.Normal)</span><br><span class="line">        &#125;.width(220).height(68)</span><br><span class="line">        .margin(&#123;left:10, top:60&#125;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.destroySubWindow()</span><br><span class="line">        &#125;)</span><br><span class="line">        Image($rawfile(&#x27;[library2].mmm.png&#x27;))</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/529-Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/529-Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Free Multi-Window Size Acquisition, Custom Keyboard Screen Recording Prevention, Foldable Screen Width, Tablet Free Multi-Window Activation, App Floating Button</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:19:56 / Modified: 12:24:56" itemprop="dateCreated datePublished" datetime="2025-06-25T10:19:56+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button"><a href="#Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Free Multi-Window Size Acquisition, Custom Keyboard Screen Recording Prevention, Foldable Screen Width, Tablet Free Multi-Window Activation, App Floating Button"></a>[Daily HarmonyOS Next Knowledge] Free Multi-Window Size Acquisition, Custom Keyboard Screen Recording Prevention, Foldable Screen Width, Tablet Free Multi-Window Activation, App Floating Button</h3><h4 id="1-Does-HarmonyOS-have-a-method-to-monitor-and-obtain-the-size-width-and-height-of-a-window-in-free-multi-window-mode"><a href="#1-Does-HarmonyOS-have-a-method-to-monitor-and-obtain-the-size-width-and-height-of-a-window-in-free-multi-window-mode" class="headerlink" title="1. Does HarmonyOS have a method to monitor and obtain the size (width and height) of a window in free multi-window mode?"></a>1. Does HarmonyOS have a method to monitor and obtain the size (width and height) of a window in free multi-window mode?</h4><p>For monitoring application window changes, refer to:<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-window.md#onwindowstatuschange11">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-window.md#onwindowstatuschange11</a>  </p>
<h4 id="2-What-is-the-solution-for-preventing-screen-recording-of-custom-keyboards-in-HarmonyOS"><a href="#2-What-is-the-solution-for-preventing-screen-recording-of-custom-keyboards-in-HarmonyOS" class="headerlink" title="2. What is the solution for preventing screen recording of custom keyboards in HarmonyOS?"></a>2. What is the solution for preventing screen recording of custom keyboards in HarmonyOS?</h4><p>In project development, a custom keyboard is used. There is a security compliance requirement to ensure that the custom keyboard (or specified UI components) are not recorded in screen recordings. Is there a provided solution to prevent screen recording?  </p>
<p>Currently, there is no component-level screen recording prevention solution. Screen recording and screenshot prevention can only be achieved by setting privacy mode for specific windows. This configuration applies to the current window. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9</a>  </p>
<p><code>setWindowPrivacyMode(isPrivacyMode: boolean, callback: AsyncCallback&lt;void&gt;): void</code><br>Sets whether the window is in privacy mode, using an asynchronous callback. The content of a window set to privacy mode cannot be screenshotted or screen recorded. This API is suitable for scenarios requiring screenshot&#x2F;screen recording prohibition.  </p>
<table>
<thead>
<tr>
<th align="left">Parameter Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">isPrivacyMode</td>
<td align="left">boolean</td>
<td align="left">Yes</td>
<td align="left">Whether the window is in privacy mode. <code>true</code> enables the mode; <code>false</code> disables it.</td>
</tr>
<tr>
<td align="left">callback</td>
<td align="left">AsyncCallback<void></td>
<td align="left">Yes</td>
<td align="left">The callback function.</td>
</tr>
</tbody></table>
<h4 id="3-Why-is-the-screen-width-incorrectly-obtained-when-the-foldable-screen-in-HarmonyOS-switches-between-folded-and-unfolded-states"><a href="#3-Why-is-the-screen-width-incorrectly-obtained-when-the-foldable-screen-in-HarmonyOS-switches-between-folded-and-unfolded-states" class="headerlink" title="3. Why is the screen width incorrectly obtained when the foldable screen in HarmonyOS switches between folded and unfolded states?"></a>3. Why is the screen width incorrectly obtained when the foldable screen in HarmonyOS switches between folded and unfolded states?</h4><p>The <code>foldstatus</code> monitoring notifies changes in the fold state. When the fold&#x2F;unfold process exceeds the half-fold threshold, <code>foldstatus</code> updates. After <code>foldstatus</code> changes, the screen must be notified to update its width&#x2F;height and foldable display mode.  </p>
<ul>
<li><code>display.on(foldstatus)</code> notifies <code>foldstatus</code> changes, but querying <code>foldstatus</code> in real-time during fold&#x2F;unfold (before the process completes) returns old values, which are meaningless.  </li>
<li><code>display.on(change)</code> monitors screen property changes, triggered after property updates, but does not distinguish the cause of the change.  </li>
<li><code>display.on(folddisplaymode)</code> monitors screen display mode changes, notifying after the fold&#x2F;unfold display mode switches. Reading screen properties in this callback returns data after the fold&#x2F;unfold process completes.</li>
</ul>
<h4 id="4-How-to-enable-free-multi-window-mode-on-MatePad-devices-in-HarmonyOS"><a href="#4-How-to-enable-free-multi-window-mode-on-MatePad-devices-in-HarmonyOS" class="headerlink" title="4. How to enable free multi-window mode on MatePad devices in HarmonyOS?"></a>4. How to enable free multi-window mode on MatePad devices in HarmonyOS?</h4><p>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E8%87%AA%E7%94%B1%E7%AA%97%E5%8F%A3">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E8%87%AA%E7%94%B1%E7%AA%97%E5%8F%A3</a>  </p>
<p>The free window feature is disabled by default. Enable it as follows:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># Extract the window configuration file and modify &lt;decor enable=&quot;false&quot;&gt;&lt;/decor&gt; to &lt;decor enable=&quot;true&quot;&gt;&lt;/decor&gt;</span><br><span class="line">hdc file recv system/etc/window/resources/window_manager_config.xml ./</span><br><span class="line"># Remount the root directory in read-write mode and update the configuration file</span><br><span class="line">hdc shell mount -o rw,remount /</span><br><span class="line">hdc file send window_manager_config.xml system/etc/window/resources/window_manager_config.xml</span><br><span class="line"># Reboot the device for the configuration to take effect</span><br><span class="line">hdc shell reboot</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">When the screen is small and finger operations are inconvenient, connect an external mouse:  </span><br><span class="line">- Hover the mouse over the app&#x27;s top to summon the window toolbar.  </span><br><span class="line">- Click the zoom button (second from the left) in the window toolbar to display the app in free window mode.  </span><br><span class="line">- In free window mode, drag the window&#x27;s border or corner to resize it, triggering app display refresh.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. What is the development solution for floating buttons within a HarmonyOS app?  </span><br><span class="line">The app requires a floating control (without requesting system floating window permissions) that remains visible across internal pages, enabling quick navigation to specified locations when clicked. Competitors implement this by adding floating controls to each page in `baseActivity`, creating the illusion of cross-page floating. HarmonyOS documentation on floating windows does not seem suitable for this scenario. Implementing cross-page floating via per-page controls is complex due to the lack of inheritance between pages. How to best achieve this in HarmonyOS?  </span><br><span class="line"></span><br><span class="line">Use `createSubWindow` to set a sub-window for floating control functionality. Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5#%E8%AE%BE%E7%BD%AE%E5%BA%94%E7%94%A8%E5%AD%90%E7%AA%97%E5%8F%A3  </span><br><span class="line"></span><br><span class="line">1. **Create an app sub-window**: Use the `createSubWindow` API.  </span><br><span class="line">2. **Set sub-window properties**: Modify size, position, background color, brightness, etc.  </span><br><span class="line">3. **Load and display sub-window content**: Use `setUIContent` and `showWindow`.  </span><br><span class="line">4. **Destroy the sub-window**: Use `destroyWindow` when no longer needed.  </span><br><span class="line"></span><br><span class="line">**Example code for creating a sub-window in `onWindowStageCreate`**:  </span><br><span class="line">```typescript</span><br><span class="line">import &#123; UIAbility &#125; from &#x27;@kit.AbilityKit&#x27;;</span><br><span class="line">import &#123; window &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let windowStage_: window.WindowStage | null = null;</span><br><span class="line">let sub_windowClass: window.Window | null = null;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default class EntryAbility extends UIAbility &#123;</span><br><span class="line">  showSubWindow() &#123;</span><br><span class="line">    // 1. Create an app sub-window.</span><br><span class="line">    if (windowStage_ == null) &#123;</span><br><span class="line">      console.error(&#x27;Failed to create the subwindow. Cause: windowStage_ is null&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      windowStage_.createSubWindow(&quot;mySubWindow&quot;, (err: BusinessError, data) =&gt; &#123;</span><br><span class="line">        let errCode: number = err.code;</span><br><span class="line">        if (errCode) &#123;</span><br><span class="line">          console.error(&#x27;Failed to create the subwindow. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        sub_windowClass = data;</span><br><span class="line">        console.info(&#x27;Succeeded in creating the subwindow. Data: &#x27; + JSON.stringify(data));</span><br><span class="line">        // 2. Set the sub-window&#x27;s position, size, and properties after creation.</span><br><span class="line">        sub_windowClass.moveWindowTo(300, 300, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to move the window. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in moving the window.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        sub_windowClass.resize(500, 500, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to change the window size. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in changing the window size.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        // 3. Load the target page for the sub-window.</span><br><span class="line">        sub_windowClass.setUIContent(&quot;pages/page3&quot;, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to load the content. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in loading the content.&#x27;);</span><br><span class="line">          // 3. Show the sub-window.</span><br><span class="line">          (sub_windowClass as window.Window).showWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">            let errCode: number = err.code;</span><br><span class="line">            if (errCode) &#123;</span><br><span class="line">              console.error(&#x27;Failed to show the window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;Succeeded in showing the window.&#x27;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  destroySubWindow() &#123;</span><br><span class="line">    // 4. Destroy the sub-window when no longer needed.</span><br><span class="line">    (sub_windowClass as window.Window).destroyWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to destroy the window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.info(&#x27;Succeeded in destroying the window.&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  onWindowStageCreate(windowStage: window.WindowStage) &#123;</span><br><span class="line">    windowStage_ = windowStage;</span><br><span class="line">    // Create the sub-window at an appropriate time (e.g., on a main window button click).</span><br><span class="line">    // Calling it in onWindowStageCreate is for demonstration only.</span><br><span class="line">    this.showSubWindow();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  onWindowStageDestroy() &#123;</span><br><span class="line">    // Destroy the sub-window at an appropriate time (e.g., on a sub-window close button click).</span><br><span class="line">    // Calling it in onWindowStageDestroy is for demonstration only.</span><br><span class="line">    this.destroySubWindow();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/528-Daily-HarmonyOS-Next-Knowledge-Portrait-Landscape-Switch-Animation-Context-Acquisition-Issues-Foldable-Screen-Monitoring-Screen-Width-Acquisition-Free-Multi-Window-Mode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/528-Daily-HarmonyOS-Next-Knowledge-Portrait-Landscape-Switch-Animation-Context-Acquisition-Issues-Foldable-Screen-Monitoring-Screen-Width-Acquisition-Free-Multi-Window-Mode/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Portrait-Landscape Switch Animation, Context Acquisition Issues, Foldable Screen Monitoring, Screen Width Acquisition, Free Multi-Window Mode</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:18:17 / Modified: 10:18:35" itemprop="dateCreated datePublished" datetime="2025-06-25T10:18:17+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Portrait-Landscape-Switch-Animation-Context-Acquisition-Issues-Foldable-Screen-Monitoring-Screen-Width-Acquisition-Free-Multi-Window-Mode"><a href="#Daily-HarmonyOS-Next-Knowledge-Portrait-Landscape-Switch-Animation-Context-Acquisition-Issues-Foldable-Screen-Monitoring-Screen-Width-Acquisition-Free-Multi-Window-Mode" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Portrait-Landscape Switch Animation, Context Acquisition Issues, Foldable Screen Monitoring, Screen Width Acquisition, Free Multi-Window Mode"></a>[Daily HarmonyOS Next Knowledge] Portrait-Landscape Switch Animation, Context Acquisition Issues, Foldable Screen Monitoring, Screen Width Acquisition, Free Multi-Window Mode</h3><h4 id="1-How-to-remove-the-rotation-animation-when-entering-the-interface-in-landscape-mode-on-a-HarmonyOS-foldable-screen"><a href="#1-How-to-remove-the-rotation-animation-when-entering-the-interface-in-landscape-mode-on-a-HarmonyOS-foldable-screen" class="headerlink" title="1. How to remove the rotation animation when entering the interface in landscape mode on a HarmonyOS foldable screen?"></a>1. How to remove the rotation animation when entering the interface in landscape mode on a HarmonyOS foldable screen?</h4><p>On a foldable screen, obtain the main window in the <code>onWindowStageCreate</code> method of the ability, then set <code>setPreferredOrientation</code> to <code>window.Orientation.AUTO_ROTATION_RESTRICTED</code>. When entering the interface in landscape mode, a rotation animation from portrait to landscape appears. How to remove this animation?  </p>
<ul>
<li>If the app needs to rotate properly during cold start:  <ol>
<li>For devices supporting rotation (phones and tablets), configure <code>auto_rotation</code> or <code>auto_rotation_restrict</code> in the package information.  </li>
<li>For phones that should not rotate but tablets that should, configure <code>follow_desktop</code> in the package information.</li>
</ol>
</li>
</ul>
<p>For details, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5</a>  </p>
<h4 id="2-How-to-acquire-UIContext-in-HarmonyOS"><a href="#2-How-to-acquire-UIContext-in-HarmonyOS" class="headerlink" title="2. How to acquire UIContext in HarmonyOS?"></a>2. How to acquire UIContext in HarmonyOS?</h4><p>When acquiring the UIContext in the entry, the app crashes occasionally during startup. Is the usage incorrect?  </p>
<p>The <code>loadcontent</code> and <code>getMainWindow</code> interfaces are asynchronous, while <code>getUIContext</code> is a synchronous interface. <code>loadcontent</code> and <code>getMainWindow</code> execute simultaneously, but their callback sequences are not guaranteed. This can lead to scenarios where <code>getMainWindow</code> returns a result before <code>loadcontent</code> completes. It is recommended to call the interface within the <code>loadcontent</code> callback to ensure proper timing.  </p>
<p><strong>Recommended example</strong>:  </p>
<pre><code class="language-typescript">onWindowStageCreate(windowStage: window.WindowStage) &#123;
  // Main window is created, set main page for this ability
  hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onWindowStageCreate&#39;);

  windowStage.loadContent(&#39;pages/Index&#39;, (err, data) =&gt; &#123;
    if (err.code) &#123;
      hilog.error(0x0000, &#39;testTag&#39;, &#39;Failed to load the content. Cause: %&#123;public&#125;s&#39;, JSON.stringify(err) ?? &#39;&#39;);
      return;
    &#125;

    windowStage.getMainWindow((err: BusinessError, data) =&gt; &#123;
      let errCode: number = err.code;
      if (errCode) &#123;
        console.error(&#39;Failed to obtain the main window.Cause:&#39; + JSON.stringify(err))
      &#125;
      let uiContext = data.getUIContext();
      console.log(JSON.stringify(uiContext))
    &#125;)
    hilog.info(0x0000, &#39;testTag&#39;, &#39;Succeeded in loading the content. Data: %&#123;public&#125;s&#39;, JSON.stringify(data) ?? &#39;&#39;);
  &#125;);
&#125;
</code></pre>
<h4 id="3-How-to-monitor-the-unfold-fold-status-of-a-HarmonyOS-foldable-screen"><a href="#3-How-to-monitor-the-unfold-fold-status-of-a-HarmonyOS-foldable-screen" class="headerlink" title="3. How to monitor the unfold&#x2F;fold status of a HarmonyOS foldable screen?"></a>3. How to monitor the unfold&#x2F;fold status of a HarmonyOS foldable screen?</h4><p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#foldstatus10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#foldstatus10</a>  </p>
<h4 id="4-Why-does-display-getDefaultDisplaySync-return-the-same-screen-width-in-HarmonyOS-even-when-the-foldable-screen-is-unfolded-folded"><a href="#4-Why-does-display-getDefaultDisplaySync-return-the-same-screen-width-in-HarmonyOS-even-when-the-foldable-screen-is-unfolded-folded" class="headerlink" title="4. Why does display.getDefaultDisplaySync() return the same screen width in HarmonyOS, even when the foldable screen is unfolded&#x2F;folded?"></a>4. Why does <code>display.getDefaultDisplaySync()</code> return the same screen width in HarmonyOS, even when the foldable screen is unfolded&#x2F;folded?</h4><p>When using <code>display.getDefaultDisplaySync()</code> to acquire the screen width, the value remains unchanged during foldable screen unfold&#x2F;fold operations.  </p>
<p><strong>Solution</strong>: There is a delay in foldable screen state changes; adding a delay resolves this issue.  </p>
<h4 id="5-In-HarmonyOS-PAD-free-multi-window-mode-does-closing-the-app-via-the-multitasking-interface-force-closure-or-follow-the-app’s-closure-process"><a href="#5-In-HarmonyOS-PAD-free-multi-window-mode-does-closing-the-app-via-the-multitasking-interface-force-closure-or-follow-the-app’s-closure-process" class="headerlink" title="5. In HarmonyOS PAD free multi-window mode, does closing the app via the multitasking interface force closure or follow the app’s closure process?"></a>5. In HarmonyOS PAD free multi-window mode, does closing the app via the multitasking interface force closure or follow the app’s closure process?</h4><p>The free multi-window mode on PAD沿用 (adopts) the PC’s pre-closure process, where app destruction requires user confirmation. This design considers file saving and data cleanup needs on PC.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/527-Daily-HarmonyOS-Next-Knowledge-Responding-to-Back-Events-Screen-Rotation-Checking-Screen-Recording-Actively-Opening-Interfaces-Screen-Brightness-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/527-Daily-HarmonyOS-Next-Knowledge-Responding-to-Back-Events-Screen-Rotation-Checking-Screen-Recording-Actively-Opening-Interfaces-Screen-Brightness-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Responding to Back Events, Screen Rotation, Checking Screen Recording, Actively Opening Interfaces, Screen Brightness Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:16:45 / Modified: 10:17:01" itemprop="dateCreated datePublished" datetime="2025-06-25T10:16:45+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Responding-to-Back-Events-Screen-Rotation-Checking-Screen-Recording-Actively-Opening-Interfaces-Screen-Brightness-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Responding-to-Back-Events-Screen-Rotation-Checking-Screen-Recording-Actively-Opening-Interfaces-Screen-Brightness-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Responding to Back Events, Screen Rotation, Checking Screen Recording, Actively Opening Interfaces, Screen Brightness Issues"></a>[Daily HarmonyOS Next Knowledge] Responding to Back Events, Screen Rotation, Checking Screen Recording, Actively Opening Interfaces, Screen Brightness Issues</h3><h4 id="1-How-to-create-a-Window-in-HarmonyOS-that-can-respond-to-back-events-and-allow-click-events-to-penetrate"><a href="#1-How-to-create-a-Window-in-HarmonyOS-that-can-respond-to-back-events-and-allow-click-events-to-penetrate" class="headerlink" title="1. How to create a Window in HarmonyOS that can respond to back events and allow click events to penetrate?"></a>1. How to create a Window in HarmonyOS that can respond to back events and allow click events to penetrate?</h4><p>I want to create a custom View to display Toast or pop-ups above all pages. When showing a Toast, all operations should pass through the Toast’s page. Currently, using a custom Window to load the page, but events in the Window-created page cannot penetrate, and click events are unresponsive.  </p>
<p><strong>Solution</strong>: Use <code>sub_windowClass.setWindowTouchable(false)</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowtouchable9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowtouchable9</a>  </p>
<h4 id="2-When-using-setPreferredOrientation-for-screen-rotation-in-HarmonyOS-the-interface-returns-success-before-the-screen-rotates-even-the-status-bar-hasn’t-adjusted-yet"><a href="#2-When-using-setPreferredOrientation-for-screen-rotation-in-HarmonyOS-the-interface-returns-success-before-the-screen-rotates-even-the-status-bar-hasn’t-adjusted-yet" class="headerlink" title="2. When using setPreferredOrientation for screen rotation in HarmonyOS, the interface returns success before the screen rotates (even the status bar hasn’t adjusted yet)?"></a>2. When using setPreferredOrientation for screen rotation in HarmonyOS, the interface returns success before the screen rotates (even the status bar hasn’t adjusted yet)?</h4><p><code>setPreferredOrientation</code> calls the callback before rotation completes. This interface only issues a rotation command and callbacks immediately after issuance.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setpreferredorientation9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setpreferredorientation9</a>  </p>
<p><strong>Explanation</strong>: Screen rotation involves an animation with variable duration. The success callback is issued once the command is sent, not after the animation finishes. Rotation animations can be interrupted: if a new rotation command is received before the previous animation ends, the prior animation is canceled.  </p>
<h4 id="3-How-to-detect-screen-recording-or-screen-sharing-on-HarmonyOS-devices"><a href="#3-How-to-detect-screen-recording-or-screen-sharing-on-HarmonyOS-devices" class="headerlink" title="3. How to detect screen recording or screen sharing on HarmonyOS devices?"></a>3. How to detect screen recording or screen sharing on HarmonyOS devices?</h4><p>Can we detect if the built-in screen recording function is active or if the device is sharing its screen (e.g., in enterprise meetings)?  </p>
<p><strong>Solution</strong>: Monitor changes in screen capture, casting, and recording status.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#ZH-CN_TOPIC_0000001930756769__displayoncapturestatuschange12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#ZH-CN_TOPIC_0000001930756769__displayoncapturestatuschange12</a>  </p>
<h4 id="4-How-to-actively-open-an-interface-dialog-via-an-API-in-HarmonyOS"><a href="#4-How-to-actively-open-an-interface-dialog-via-an-API-in-HarmonyOS" class="headerlink" title="4. How to actively open an interface&#x2F;dialog via an API in HarmonyOS?"></a>4. How to actively open an interface&#x2F;dialog via an API in HarmonyOS?</h4><p>Currently, the <code>new</code> interface syntax is unsupported. Instead, use implementation classes or <code>@State</code>-typed variables, with specific display and interaction logic handled by the caller through class implementation.<br><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">export interface Month &#123;
  month: string; // Specific year and month
  num: number;   // Month number
  days: number[]; // Dates of the month
  lunarDays: string[]; // Lunar dates
  year: number;  // Year
&#125;

class myMonth implements Month &#123;
  month: string = &#39;&#39;;
  num: number = 0;
  days: number[] = [111];
  lunarDays: string[] = [&#39;1&#39;];
  year: number = 1;
&#125;

@AppRouter(&#123; name: &quot;highlyloadedcomponentrender/MainPage&quot; &#125;)
@Component
export struct MainPage &#123;
  @State mymount: Month = &#123;
    month: &#39;&#39;,
    num: 0,
    days: [],
    lunarDays: [],
    year: 0
  &#125;;
  private month = new myMonth();
  // ...
&#125;
</code></pre>
<h4 id="5-Inconsistent-brightness-causes-poor-experience-in-HarmonyOS"><a href="#5-Inconsistent-brightness-causes-poor-experience-in-HarmonyOS" class="headerlink" title="5. Inconsistent brightness causes poor experience in HarmonyOS?"></a>5. Inconsistent brightness causes poor experience in HarmonyOS?</h4><p>After setting the brightness within an app window, returning to the home screen restores the system brightness. If the app’s brightness differs significantly from the system’s, the sudden change is noticeable.  </p>
<p><strong>Solutions</strong>:  </p>
<ul>
<li>Get screen brightness: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-settings-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-settings-V5</a>  </li>
<li>When exiting the page, reset the screen to the previous brightness (default brightness). Set the value to <code>-1</code> to use the default brightness.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/526-Daily-HarmonyOS-Next-Knowledge-Splash-Screen-Desktop-Shortcut-Menu-HAR-Package-View-Display-Screen-Recording-Prohibition-Full-Screen-Video-Playback-Switch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/526-Daily-HarmonyOS-Next-Knowledge-Splash-Screen-Desktop-Shortcut-Menu-HAR-Package-View-Display-Screen-Recording-Prohibition-Full-Screen-Video-Playback-Switch/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Splash Screen, Desktop Shortcut Menu, HAR Package View Display, Screen Recording Prohibition, Full-Screen Video Playback Switch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:14:59 / Modified: 10:15:15" itemprop="dateCreated datePublished" datetime="2025-06-25T10:14:59+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Splash-Screen-Desktop-Shortcut-Menu-HAR-Package-View-Display-Screen-Recording-Prohibition-Full-Screen-Video-Playback-Switch"><a href="#Daily-HarmonyOS-Next-Knowledge-Splash-Screen-Desktop-Shortcut-Menu-HAR-Package-View-Display-Screen-Recording-Prohibition-Full-Screen-Video-Playback-Switch" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Splash Screen, Desktop Shortcut Menu, HAR Package View Display, Screen Recording Prohibition, Full-Screen Video Playback Switch"></a>[Daily HarmonyOS Next Knowledge] Splash Screen, Desktop Shortcut Menu, HAR Package View Display, Screen Recording Prohibition, Full-Screen Video Playback Switch</h3><h4 id="1-Where-to-configure-the-splash-screen-in-HarmonyOS"><a href="#1-Where-to-configure-the-splash-screen-in-HarmonyOS" class="headerlink" title="1. Where to configure the splash screen in HarmonyOS?"></a>1. Where to configure the splash screen in HarmonyOS?</h4><p>Where can the launch screen (the screen displayed when the app first starts) be configured?  </p>
<p><strong>Solution</strong>: Create a separate launch page and set it as the first page. The launch page uses a timer to jump to the main app page after a fixed display time. Modify the <code>loadContent</code> path in <code>EntryAbility</code> to change the app’s entry file (e.g., set to <code>SplashPage</code>).  </p>
<h4 id="2-Must-the-desktop-shortcut-menu-3D-Touch-in-HarmonyOS-be-implemented-via-a-configuration-file"><a href="#2-Must-the-desktop-shortcut-menu-3D-Touch-in-HarmonyOS-be-implemented-via-a-configuration-file" class="headerlink" title="2. Must the desktop shortcut menu (3D Touch) in HarmonyOS be implemented via a configuration file?"></a>2. Must the desktop shortcut menu (3D Touch) in HarmonyOS be implemented via a configuration file?</h4><p>Do the functions in the desktop shortcut menu (3D Touch) require a separate feature package? Since configuring corresponding functions requires binding the <code>bundleName</code> in the configuration file, does this mean that using these functions directly requires separate packaging? If implemented via a configuration file, can parameters be passed dynamically? Are there alternative methods for 3D Touch?  </p>
<p><strong>Solution</strong>: Implement via the <code>shortcuts</code> tag in <code>module.json5</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5</a>  </p>
<p>Check if floating windows meet the requirements: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5</a>  </p>
<h4 id="3-How-to-display-views-from-a-HAR-package-in-a-sub-window-and-pass-parameters-in-HarmonyOS"><a href="#3-How-to-display-views-from-a-HAR-package-in-a-sub-window-and-pass-parameters-in-HarmonyOS" class="headerlink" title="3. How to display views from a HAR package in a sub-window and pass parameters in HarmonyOS?"></a>3. How to display views from a HAR package in a sub-window and pass parameters in HarmonyOS?</h4><p>When using <code>window.setUIContent</code> to pass a <code>path</code> parameter for a view page in another HAR package module, what is the format for passing this path?  </p>
<p><strong>Solution</strong>: Add the path to the project’s <code>main_pages.json</code> file.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5</a>  </p>
<h4 id="4-How-to-prohibit-screenshot-or-screen-recording-when-users-enter-passwords-payment-codes-in-HarmonyOS"><a href="#4-How-to-prohibit-screenshot-or-screen-recording-when-users-enter-passwords-payment-codes-in-HarmonyOS" class="headerlink" title="4. How to prohibit screenshot or screen recording when users enter passwords&#x2F;payment codes in HarmonyOS?"></a>4. How to prohibit screenshot or screen recording when users enter passwords&#x2F;payment codes in HarmonyOS?</h4><p><strong>Solution</strong>: Refer to the following API: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowprivacymode9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowprivacymode9</a>  </p>
<p><strong>Window Module Capabilities</strong>:<br>The window module provides basic capabilities for managing windows, including creation, destruction, property settings, and scheduling between windows. Key features include:  </p>
<ul>
<li><strong>Window</strong>: The current window instance, the basic unit managed by the window manager.  </li>
<li><strong>WindowStage</strong>: The window manager, responsible for managing basic window units.</li>
</ul>
<h4 id="5-When-playing-a-video-in-HarmonyOS-the-screen-rotates-to-the-“habitual-orientation”-after-entering-full-screen-What-does-“habitual-orientation”-refer-to"><a href="#5-When-playing-a-video-in-HarmonyOS-the-screen-rotates-to-the-“habitual-orientation”-after-entering-full-screen-What-does-“habitual-orientation”-refer-to" class="headerlink" title="5. When playing a video in HarmonyOS, the screen rotates to the “habitual orientation” after entering full-screen. What does “habitual orientation” refer to?"></a>5. When playing a video in HarmonyOS, the screen rotates to the “habitual orientation” after entering full-screen. What does “habitual orientation” refer to?</h4><p><strong>Habitual orientation</strong> means the charging port faces right after full-screen playback:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>), <span class="function">(<span class="params">err, win</span>) =&gt;</span> &#123;</span><br><span class="line">  win.<span class="title function_">setPreferredOrientation</span>(<span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/525-Daily-HarmonyOS-Next-Knowledge-GIF-Color-Setting-Custom-Decorators-Split-Screen-Switching-Bottom-Margin-Window-Acquisition-on-Pages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/525-Daily-HarmonyOS-Next-Knowledge-GIF-Color-Setting-Custom-Decorators-Split-Screen-Switching-Bottom-Margin-Window-Acquisition-on-Pages/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] GIF Color Setting, Custom Decorators, Split-Screen Switching, Bottom Margin, Window Acquisition on Pages</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:12:51 / Modified: 10:13:14" itemprop="dateCreated datePublished" datetime="2025-06-25T10:12:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-GIF-Color-Setting-Custom-Decorators-Split-Screen-Switching-Bottom-Margin-Window-Acquisition-on-Pages"><a href="#Daily-HarmonyOS-Next-Knowledge-GIF-Color-Setting-Custom-Decorators-Split-Screen-Switching-Bottom-Margin-Window-Acquisition-on-Pages" class="headerlink" title="[Daily HarmonyOS Next Knowledge] GIF Color Setting, Custom Decorators, Split-Screen Switching, Bottom Margin, Window Acquisition on Pages"></a>[Daily HarmonyOS Next Knowledge] GIF Color Setting, Custom Decorators, Split-Screen Switching, Bottom Margin, Window Acquisition on Pages</h3><h4 id="1-Does-HarmonyOS-support-setting-colors-for-GIFs"><a href="#1-Does-HarmonyOS-support-setting-colors-for-GIFs" class="headerlink" title="1. Does HarmonyOS support setting colors for GIFs?"></a>1. Does HarmonyOS support setting colors for GIFs?</h4><p>The GIF is red, and the requirement is to change the red color of the GIF to the client’s theme color, which can be any color.  </p>
<p>For specific matrix rules, refer to the colorFilter description in the link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5#colorfilter9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5#colorfilter9</a>  </p>
<p>Set a color filter effect for the image through the colorFilter property. Refer to the following demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageExample1</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Start</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="comment">// Load a GIF format image</span></span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.ic_audio_album_playing&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>).<span class="title function_">height</span>(<span class="number">110</span>).<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;gif&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">            .<span class="title function_">colorFilter</span>(</span><br><span class="line">              [</span><br><span class="line">                <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="comment">// Red channel</span></span><br><span class="line">                <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="comment">// Green channel</span></span><br><span class="line">                <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="comment">// Blue channel</span></span><br><span class="line">                <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span><span class="comment">// Transparency channel</span></span><br><span class="line">              ]</span><br><span class="line">            )</span><br><span class="line">        &#125;.<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">320</span>).<span class="title function_">width</span>(<span class="number">360</span>).<span class="title function_">padding</span>(&#123; <span class="attr">right</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to implement custom decorators in HarmonyOS ArkTS?  </span></span><br><span class="line"><span class="string">How to implement custom decorators in ArkTS? For example, adding a universal function to pages.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the demo for custom decorators:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Custom class decorator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params Decorator parameters</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CustomerDecorator</span>(<span class="params"><span class="attr">params</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="comment">// targetClass is the context of the class</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params"><span class="attr">targetClass</span>: <span class="title class_">Function</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(params);</span><br><span class="line">    targetClass.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">buy</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CustomerDecorator</span>(<span class="string">&#x27;Parameterized class decorator&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomerServeice</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">buy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Purchase`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Creating a new object triggers the custom class decorator</span></span><br><span class="line"><span class="keyword">let</span> customerService = <span class="keyword">new</span> <span class="title class_">CustomerServeice</span>();</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. When using Window in HarmonyOS, after switching to split-screen mode, returning to the app, closing the window, and reopening it, events in the sub-window do not respond?  </span></span><br><span class="line"><span class="string">When the app pops up a sub-window, switches to split-screen with app B, enters the background, closes the sub-window, returns to the app, and pops up the sub-window again, the click events in the sub-window do not respond.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the following code:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**EntryAbility.ets**  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AbilityConstant</span>, <span class="title class_">UIAbility</span>, <span class="title class_">Want</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; hilog &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.PerformanceAnalysisKit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">EntryAbility</span> <span class="keyword">extends</span> <span class="title class_ inherited__">UIAbility</span> &#123;</span><br><span class="line">  <span class="title function_">onCreate</span>(<span class="attr">want</span>: <span class="title class_">Want</span>, <span class="attr">launchParam</span>: <span class="title class_">AbilityConstant</span>.<span class="property">LaunchParam</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onCreate&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onDestroy</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onDestroy&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Main window is created, set main page for this ability</span></span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>);</span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&quot;windowStage&quot;</span>, windowStage);</span><br><span class="line">    windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">        hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content.&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onWindowStageDestroy</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Main window is destroyed, release UI related resources</span></span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageDestroy&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onForeground</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Ability has brought to foreground</span></span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onForeground&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onBackground</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Ability has back to background</span></span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onBackground&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Index.ets**  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> <span class="variable language_">window</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.window&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">windowStage_</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span> = <span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&quot;windowStage&quot;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">WindowStage</span>;</span><br><span class="line">    windowStage_.<span class="title function_">createSubWindow</span>(<span class="string">&quot;subWindow&quot;</span>, <span class="function">(<span class="params">err, win</span>) =&gt;</span> &#123; <span class="comment">// Create and open a transparent sub-window</span></span><br><span class="line">      win.<span class="title function_">setUIContent</span>(<span class="string">&#x27;pages/Page1&#x27;</span>);</span><br><span class="line">      win.<span class="title function_">resize</span>(<span class="number">600</span>, <span class="number">600</span>)</span><br><span class="line">      win.<span class="title function_">moveWindowTo</span>(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">      win.<span class="title function_">showWindow</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">findWindow</span>(<span class="string">&quot;subWindow&quot;</span>).<span class="title function_">destroyWindow</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;Sub-window pop-up&quot;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Page1.ets**  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page1</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;Page1HelloWorld&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span> &#125;,</span><br><span class="line">          <span class="attr">middle</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;===================&gt;Click event&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Can the bottom margin of a HarmonyOS page be filled to make the page full-screen?  </span></span><br><span class="line"><span class="string">Refer to the immersive layout documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to get the windowClass in a HarmonyOS Page?  </span></span><br><span class="line"><span class="string">Refer to the following code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; common &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">context</span>: common.<span class="property">UIAbilityContext</span> = <span class="title function_">getContext</span>(<span class="variable language_">this</span>) <span class="keyword">as</span> common.<span class="property">UIAbilityContext</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>()&#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Get the current page&#x27;s window&quot;</span>,&#123;<span class="attr">type</span>:<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>&#125;).<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// Get the topmost sub-window within the current app; if there are no sub-windows, return the main app window</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="variable language_">this</span>.<span class="property">context</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">lastWindow</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Retrieved current page&#x27;s window：&quot;</span>, lastWindow)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>).<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/524-Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/524-Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Hide Status Bar, Launch Pop-ups in Methods, System Screen Brightness Monitoring, Photo Zooming and Dragging, Prevent Screenshots of Input Interfaces</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:10:51 / Modified: 10:11:17" itemprop="dateCreated datePublished" datetime="2025-06-25T10:10:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces"><a href="#Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Hide Status Bar, Launch Pop-ups in Methods, System Screen Brightness Monitoring, Photo Zooming and Dragging, Prevent Screenshots of Input Interfaces"></a>[Daily HarmonyOS Next Knowledge] Hide Status Bar, Launch Pop-ups in Methods, System Screen Brightness Monitoring, Photo Zooming and Dragging, Prevent Screenshots of Input Interfaces</h3><h4 id="1-How-to-hide-the-status-bar-when-pulling-down-in-HarmonyOS"><a href="#1-How-to-hide-the-status-bar-when-pulling-down-in-HarmonyOS" class="headerlink" title="1. How to hide the status bar when pulling down in HarmonyOS?"></a>1. How to hide the status bar when pulling down in HarmonyOS?</h4><p>To always hide the status bar, you can set relevant properties to transparent via the <code>setWindowSystemBarProperties</code> interface.<br>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9</a>  </p>
<p><code>setWindowSystemBarProperties(systemBarProperties: SystemBarProperties): Promise&lt;void&gt;</code><br>Sets the properties of the main window’s three-key navigation bar and status bar using a Promise asynchronous callback.<br>This interface does not take effect on 2in1 devices. On other devices, it does not take effect immediately in split-screen mode (i.e., window mode is <code>window.WindowStatusType.SPLIT_SCREEN</code>), free-floating window mode (i.e., window mode is <code>window.WindowStatusType.FLOATING</code>), or free multi-window mode (enabled by clicking the free multi-window button in the device control center). It only takes effect when entering the full-screen main window.  </p>
<h4 id="2-How-to-launch-a-custom-pop-up-in-a-class-or-function-in-HarmonyOS-The-built-in-alert-works-but-custom-prompts-cannot-be-used"><a href="#2-How-to-launch-a-custom-pop-up-in-a-class-or-function-in-HarmonyOS-The-built-in-alert-works-but-custom-prompts-cannot-be-used" class="headerlink" title="2. How to launch a custom pop-up in a class or function in HarmonyOS? The built-in alert works, but custom prompts cannot be used."></a>2. How to launch a custom pop-up in a class or function in HarmonyOS? The built-in alert works, but custom prompts cannot be used.</h4><p>Please refer to the following code example:<br><strong>Main page</strong>  </p>
<pre><code class="language-typescript">// Set the builder in @entry first, then directly call showTest  
import &#123; customDialogBuilder, changeDialogBuilder, MyShowTest &#125; from ‘…/pages/Page’  
let myShowTest = new MyShowTest()  
@Entry  
@Component  
struct Index &#123;  
  @State message: string = ‘Hello World’  
  onPageShow(): void &#123;  
    changeDialogBuilder(customDialogBuilder.bind(this))  
  &#125;  

  build() &#123;  
    Row() &#123;  
      Column() &#123;  
        Text(this.message)  
          .fontSize(50)  
          .fontWeight(FontWeight.Bold)  
          .onClick(() =&gt; &#123;  
            myShowTest.showTest()  
          &#125;)  
      &#125;  
      .width(‘100%’)  
    &#125;  
    .height(‘100%’)  
  &#125;  
&#125;  
</code></pre>
<p><strong>Custom class</strong>  </p>
<pre><code class="language-typescript">// custom_dialog.ets  
import promptAction from ‘@ohos.promptAction’  
let myDialogBuilder: CustomBuilder;  
let customDialogId: number = 0  

@Builder  
export function customDialogBuilder() &#123;  
  Column() &#123;  
    Text(‘Custom dialog Message’).fontSize(10)  
    Row() &#123;  
      Button(“Confirm”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
      Blank().width(50)  
      Button(“Cancel”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
    &#125;  
  &#125;.height(200).padding(5)  
&#125;  

export function changeDialogBuilder(builder: CustomBuilder) &#123;  
  myDialogBuilder = builder  
&#125;  

export class MyShowTest&#123;  
  showTest() &#123;  
    if (myDialogBuilder === undefined) &#123;  
      return  
    &#125;  
    promptAction.openCustomDialog(&#123;  
      builder: myDialogBuilder  
    &#125;).then((dialogId: number) =&gt; &#123;  
      customDialogId = dialogId  
    &#125;)  
  &#125;  
&#125;  
</code></pre>
<p>Modify <code>customDialogBuilder()</code> to the following code (add <code>backGroundColor</code> and <code>width</code> properties to Column) to customize the pop-up background color:  </p>
<pre><code class="language-typescript">@Builder  
export function customDialogBuilder() &#123;  
  Column() &#123;  
    Text(‘Custom dialog Message’).fontSize(10)  
    Row() &#123;  
      Button(“Confirm”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
      Blank().width(50)  
      Button(“Cancel”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
    &#125;  
  &#125;.height(200).padding(5).backgroundColor(Color.Green).width(‘100%’)  
&#125;  
</code></pre>
<p>Using <code>backgroundImage</code> and <code>backgroundImageSize(ImageSize.Cover)</code> instead of <code>backgroundColor</code> can achieve similar effects, but the pop-up width cannot be changed currently.  </p>
<h4 id="3-How-to-monitor-the-system-screen-brightness-in-HarmonyOS-After-setting-the-brightness-the-brightness-settings-in-the-system-control-center-no-longer-take-effect"><a href="#3-How-to-monitor-the-system-screen-brightness-in-HarmonyOS-After-setting-the-brightness-the-brightness-settings-in-the-system-control-center-no-longer-take-effect" class="headerlink" title="3. How to monitor the system screen brightness in HarmonyOS? After setting the brightness, the brightness settings in the system control center no longer take effect."></a>3. How to monitor the system screen brightness in HarmonyOS? After setting the brightness, the brightness settings in the system control center no longer take effect.</h4><p><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowbrightness9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowbrightness9</a>  </p>
<p>Allows the application window to set the screen brightness value using a callback asynchronous callback.<br>Current screen brightness specification: When the window sets the screen brightness, the control center cannot adjust the system screen brightness. After the window restores the default system brightness, the control center can adjust the system brightness. The brightness value is a floating-point number, ranging from <code>[0.0, 1.0]</code> or -1.0. 1.0 represents the brightest, and -1.0 represents the default brightness.  </p>
<h4 id="4-How-to-achieve-the-effect-of-dragging-and-browsing-photos-after-zooming-in-similar-to-the-system-photo-album-in-HarmonyOS"><a href="#4-How-to-achieve-the-effect-of-dragging-and-browsing-photos-after-zooming-in-similar-to-the-system-photo-album-in-HarmonyOS" class="headerlink" title="4. How to achieve the effect of dragging and browsing photos after zooming in, similar to the system photo album in HarmonyOS?"></a>4. How to achieve the effect of dragging and browsing photos after zooming in, similar to the system photo album in HarmonyOS?</h4><p>To implement a zooming and browsing effect for images, it is found that using <code>scale</code> to zoom the image can only enlarge the visible part and cannot drag to browse areas outside the image container’s visible area. Setting the image component size to achieve zooming cannot center the anchor point area. What solution should be adopted to achieve the drag-and-browse effect after zooming in, similar to the system photo album?  </p>
<p>The current codelab “Electronic Album” includes scenarios for image zooming and dragging.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-ElectronicAlbum">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-ElectronicAlbum</a><br>In addition, third-party libraries are available: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_image_view_zoom">https://gitee.com/openharmony-sig/ohos_image_view_zoom</a>  </p>
<h4 id="5-How-to-prevent-screenshot-or-screen-recording-of-the-password-input-interface-in-HarmonyOS"><a href="#5-How-to-prevent-screenshot-or-screen-recording-of-the-password-input-interface-in-HarmonyOS" class="headerlink" title="5. How to prevent screenshot or screen recording of the password input interface in HarmonyOS?"></a>5. How to prevent screenshot or screen recording of the password input interface in HarmonyOS?</h4><p>Set the <code>setWindowPrivacyMode</code> under <code>window</code> to privacy mode, which prevents the window content from being screenshot or screen recorded. For specific details, refer to the official document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9</a>  </p>
<p><code>setWindowPrivacyMode(isPrivacyMode: boolean, callback: AsyncCallback&lt;void&gt;): void</code><br>Sets whether the window is in privacy mode using a callback asynchronous callback. The content of a window set to privacy mode cannot be screenshot or screen recorded. This interface can be used in scenarios where screenshot&#x2F;screen recording needs to be prohibited.  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/523-Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/523-Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Foldable Screen Status Judgment, H5 Image Selection, Component Refresh, Click-to-Zoom Images, Interface Update Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:01:40 / Modified: 10:03:59" itemprop="dateCreated datePublished" datetime="2025-06-25T10:01:40+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Foldable Screen Status Judgment, H5 Image Selection, Component Refresh, Click-to-Zoom Images, Interface Update Issues"></a>[Daily HarmonyOS Next Knowledge] Foldable Screen Status Judgment, H5 Image Selection, Component Refresh, Click-to-Zoom Images, Interface Update Issues</h3><h4 id="1-How-to-determine-if-a-HarmonyOS-foldable-phone-is-currently-unfolded-or-folded"><a href="#1-How-to-determine-if-a-HarmonyOS-foldable-phone-is-currently-unfolded-or-folded" class="headerlink" title="1. How to determine if a HarmonyOS foldable phone is currently unfolded or folded?"></a>1. How to determine if a HarmonyOS foldable phone is currently unfolded or folded?</h4><p>Refer to the API to get the fold status of the current foldable device: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#foldstatus10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#foldstatus10</a>  </p>
<p><strong>FoldStatus</strong><br>Enumeration of the fold status of the current foldable device.  </p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Value</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">FOLD_STATUS_UNKNOWN</td>
<td align="left">0</td>
<td align="left">The device’s current fold status is unknown.</td>
</tr>
<tr>
<td align="left">FOLD_STATUS_EXPANDED</td>
<td align="left">1</td>
<td align="left">The device is currently in a fully unfolded state.</td>
</tr>
<tr>
<td align="left">FOLD_STATUS_FOLDED</td>
<td align="left">2</td>
<td align="left">The device is currently in a folded state.</td>
</tr>
<tr>
<td align="left">FOLD_STATUS_HALF_FOLDED</td>
<td align="left">3</td>
<td align="left">The device is currently in a half-folded state (between fully unfolded and folded).</td>
</tr>
</tbody></table>
<h4 id="2-In-HarmonyOS-H5-pages-image-selection-can-be-listened-to-via-onShowFileSelector-but-video-selection-cannot-Are-there-other-methods-for-video-selection"><a href="#2-In-HarmonyOS-H5-pages-image-selection-can-be-listened-to-via-onShowFileSelector-but-video-selection-cannot-Are-there-other-methods-for-video-selection" class="headerlink" title="2. In HarmonyOS H5 pages, image selection can be listened to via onShowFileSelector, but video selection cannot. Are there other methods for video selection?"></a>2. In HarmonyOS H5 pages, image selection can be listened to via onShowFileSelector, but video selection cannot. Are there other methods for video selection?</h4><p>Video selection in H5 pages can also be listened to via <code>onShowFileSelector</code>. Refer to the following documentation and example:  </p>
<ul>
<li>Documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onshowfileselector9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onshowfileselector9</a>  </li>
<li><code>onShowFileSelector(callback: Callback&lt;OnShowFileSelectorEvent, boolean&gt;)</code>: Processes HTML forms with “file” input types. If not called or returns false, the Web component provides a default “select file” interface. If returns true, the app can customize the response behavior.</li>
</ul>
<p><strong>Example</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> webview.<span class="title class_">WebviewController</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&#x27;index.html&#x27;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">onShowFileSelector</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event) &#123;</span><br><span class="line">            <span class="keyword">let</span> photoSelectOptions = <span class="keyword">new</span> photoAccessHelper.<span class="title class_">PhotoSelectOptions</span>();</span><br><span class="line">            <span class="keyword">let</span> photoPicker = <span class="keyword">new</span> photoAccessHelper.<span class="title class_">PhotoViewPicker</span>();</span><br><span class="line">            <span class="comment">// Filter media file types to IMAGE_VIDEO_TYPE</span></span><br><span class="line">            photoSelectOptions.<span class="property">MIMEType</span> = photoAccessHelper.<span class="property">PhotoViewMIMETypes</span>.<span class="property">IMAGE_VIDEO_TYPE</span>;</span><br><span class="line">            <span class="comment">// Set maximum selection count</span></span><br><span class="line">            photoSelectOptions.<span class="property">maxSelectNumber</span> = <span class="number">5</span>;</span><br><span class="line">            photoPicker.<span class="title function_">select</span>(photoSelectOptions).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;asd===&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">photoUris</span>))</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res ===&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(event))</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-How-to-implement-click-to-zoom-images-in-HarmonyOS"><a href="#3-How-to-implement-click-to-zoom-images-in-HarmonyOS" class="headerlink" title="3. How to implement click-to-zoom images in HarmonyOS?"></a>3. How to implement click-to-zoom images in HarmonyOS?</h4><p>Is there a component for large-image browsing that supports double-click zooming?  </p>
<p>Currently, no dedicated component exists, but you can refer to the source code for large-image viewing and left&#x2F;right image browsing in the gallery: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/applications_photos/tree/master">https://gitee.com/openharmony/applications_photos/tree/master</a>  </p>
<p>Alternatively, use the following code:  </p>
<ol>
<li><strong>Page component</strong>:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SharedTransitionExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">active</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageNames</span>: <span class="title class_">Resource</span>[] = [$r(<span class="string">&#x27;app.media.image1&#x27;</span>), $r(<span class="string">&#x27;app.media.image2&#x27;</span>), $r(<span class="string">&#x27;app.media.image3&#x27;</span>)]</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;currentIndex&#x27;</span>) <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">imageNames</span>, <span class="function">(<span class="params"><span class="attr">res</span>: <span class="title class_">Resource</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Image</span>(res)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Contain</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">sharedTransition</span>(<span class="string">&#x27;sharedImage&#x27;</span> + res.<span class="property">id</span>, &#123;</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span>,</span><br><span class="line">          <span class="attr">zIndex</span>: <span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="number">10</span> : -<span class="number">10</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/Index&#x27;</span>, <span class="attr">params</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">imageNames</span>,</span><br><span class="line">          &#125; &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span> &#125;)</span><br><span class="line">      .<span class="title function_">onEnter</span>(<span class="function">(<span class="params"><span class="attr">type</span>?: <span class="title class_">RouteType</span>, <span class="attr">progress</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Ease</span> &#125;)</span><br><span class="line">      .<span class="title function_">onExit</span>(<span class="function">(<span class="params"><span class="attr">type</span>?: <span class="title class_">RouteType</span>, <span class="attr">progress</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. **Index page**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> <span class="variable language_">window</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.window&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Data</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="title class_">Resource</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">None</span>,</span><br><span class="line">  <span class="title class_">Left</span>,</span><br><span class="line">  <span class="title class_">Right</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">swiperController</span>: <span class="title class_">SwiperController</span> = <span class="keyword">new</span> <span class="title class_">SwiperController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageNames</span>: <span class="title class_">Resource</span>[] = []</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;currentIndex&#x27;</span>) <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">screenWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">op</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = (router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Data</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">imageNames</span> = data.<span class="property">data</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>)).<span class="title function_">then</span>(<span class="function"><span class="params">currentWindow</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> property = currentWindow.<span class="title function_">getWindowProperties</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">screenWidth</span> = property.<span class="property">windowRect</span>.<span class="property">width</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Swiper</span>(<span class="variable language_">this</span>.<span class="property">swiperController</span>) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">imageNames</span>, <span class="function">(<span class="params"><span class="attr">name</span>: <span class="title class_">Resource</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">ImageComponent</span>(&#123;</span><br><span class="line">              <span class="attr">image</span>: name,</span><br><span class="line">              <span class="attr">viewWidth</span>: <span class="variable language_">this</span>.<span class="property">screenWidth</span>,</span><br><span class="line">              <span class="attr">isCurrent</span>: <span class="variable language_">this</span>.<span class="property">currentIndex</span> === index,</span><br><span class="line">              <span class="attr">onNeedGoNext</span>: <span class="function">(<span class="params"><span class="attr">dire</span>: <span class="title class_">Direction</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (dire === <span class="title class_">Direction</span>.<span class="property">Right</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">swiperController</span>.<span class="title function_">showNext</span>()</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dire === <span class="title class_">Direction</span>.<span class="property">Left</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">swiperController</span>.<span class="title function_">showPrevious</span>()</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;).<span class="title function_">zIndex</span>(index == <span class="variable language_">this</span>.<span class="property">currentIndex</span> ? <span class="number">2</span> : <span class="number">1</span>)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">index</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span>)</span><br><span class="line">      .<span class="title function_">indicator</span>(<span class="literal">false</span>)</span><br><span class="line">      .<span class="title function_">disableSwipe</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">itemSpace</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">`rgba(0,0,0,<span class="subst">$&#123;<span class="variable language_">this</span>.op&#125;</span>)`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">duration</span>: <span class="number">200</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span> &#125;)</span><br><span class="line">      .<span class="title function_">onEnter</span>(<span class="function">(<span class="params"><span class="attr">type</span>?: <span class="title class_">RouteType</span>, <span class="attr">progress</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (progress) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">op</span> = progress</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageComponent</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">image</span>: <span class="title class_">Resource</span> = $r(<span class="string">&#x27;app.media.icon&#x27;</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preGeometryScale</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">geometryScale</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preOffsetX</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preOffsetY</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">geometryOffsetX</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">geometryOffsetY</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageWidth</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">viewWidth</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">isCurrent</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">dire</span>: <span class="title class_">Direction</span> = <span class="title class_">Direction</span>.<span class="property">None</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">goNext</span>: <span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">pinching</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">onNeedGoNext</span>: <span class="function">(<span class="params"><span class="attr">dire</span>: <span class="title class_">Direction</span></span>) =&gt;</span> <span class="built_in">void</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">reset</span>(): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preGeometryScale</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preOffsetX</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preOffsetY</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dire</span> = <span class="title class_">Direction</span>.<span class="property">None</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">geometryScale</span> === <span class="number">1</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">animateTo</span>(&#123; <span class="attr">duration</span>: <span class="number">200</span>, <span class="attr">onFinish</span>: res &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">geometryScale</span> = <span class="number">1</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span> = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span> = <span class="number">0</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">image</span>)</span><br><span class="line">        .<span class="title function_">onComplete</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">imageWidth</span> = (e?.<span class="property">width</span> || <span class="number">0</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">imageHeight</span> = (e?.<span class="property">height</span> || <span class="number">0</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">imageWidth</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">imageHeight</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">scale</span>(&#123;</span><br><span class="line">          <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">geometryScale</span>,</span><br><span class="line">          <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">geometryScale</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">offset</span>(&#123;</span><br><span class="line">          <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span>,</span><br><span class="line">          <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">focusable</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">autoResize</span>(<span class="literal">false</span>)</span><br><span class="line">        .<span class="title function_">sharedTransition</span>(<span class="string">&#x27;sharedImage&#x27;</span> + <span class="variable language_">this</span>.<span class="property">image</span>.<span class="property">id</span>, &#123;</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span>,</span><br><span class="line">          <span class="attr">zIndex</span>: <span class="variable language_">this</span>.<span class="property">isCurrent</span> ? <span class="number">10</span> : -<span class="number">10</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">Default</span>)</span><br><span class="line">    .<span class="title function_">parallelGesture</span>(</span><br><span class="line">      <span class="title class_">GestureGroup</span>(<span class="title class_">GestureMode</span>.<span class="property">Parallel</span>,</span><br><span class="line">        <span class="title class_">PinchGesture</span>(&#123; <span class="attr">fingers</span>: <span class="number">2</span> &#125;)</span><br><span class="line">          .<span class="title function_">onActionStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pinching</span> = <span class="literal">true</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">false</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> s = <span class="variable language_">this</span>.<span class="property">preGeometryScale</span> * event.<span class="property">scale</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">geometryScale</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0.6</span>, <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">2</span>, s))</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionEnd</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preGeometryScale</span> = <span class="variable language_">this</span>.<span class="property">geometryScale</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">preGeometryScale</span> &lt; <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">reset</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pinching</span> = <span class="literal">false</span></span><br><span class="line">          &#125;),</span><br><span class="line">        <span class="title class_">PanGesture</span>()</span><br><span class="line">          .<span class="title function_">onActionStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> offsetX = <span class="variable language_">this</span>.<span class="property">preOffsetX</span> + (event?.<span class="property">offsetX</span> || <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">let</span> offsetY = <span class="variable language_">this</span>.<span class="property">preOffsetY</span> + (event?.<span class="property">offsetY</span> || <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span> (((<span class="variable language_">this</span>.<span class="property">imageWidth</span> * <span class="variable language_">this</span>.<span class="property">geometryScale</span> - <span class="variable language_">this</span>.<span class="property">viewWidth</span>) / <span class="number">2</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">vp2px</span>(offsetX))) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">pinching</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">dire</span> = offsetX &lt; <span class="number">0</span> ? <span class="title class_">Direction</span>.<span class="property">Right</span> : <span class="title class_">Direction</span>.<span class="property">Left</span></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">false</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span> = offsetX</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span> = offsetY</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionEnd</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="variable language_">this</span>.<span class="property">dire</span> !== <span class="title class_">Direction</span>.<span class="property">None</span>)) &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">goNext</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">onNeedGoNext</span>(<span class="variable language_">this</span>.<span class="property">dire</span>)</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">reset</span>()</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preOffsetX</span> = <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preOffsetY</span> = <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span></span><br><span class="line">          &#125;),</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="4-HarmonyOS-component-refresh-issue-Modifying-item-properties-in-an-array-does-not-trigger-list-update"><a href="#4-HarmonyOS-component-refresh-issue-Modifying-item-properties-in-an-array-does-not-trigger-list-update" class="headerlink" title="4. HarmonyOS component refresh issue: Modifying item properties in an array does not trigger list update"></a>4. HarmonyOS component refresh issue: Modifying item properties in an array does not trigger list update</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">struct <span class="title class_">MyFoldPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">filePaths</span>: <span class="title class_">FolderModel</span>[] = []</span><br><span class="line">   <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title class_">Column</span>()&#123;</span><br><span class="line">            <span class="title class_">Grid</span>() &#123;</span><br><span class="line">            <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">filePaths</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">FolderModel</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title class_">ItemBuilder</span>(index)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">FolderModel</span></span>) =&gt;</span> item.<span class="property">fileName</span>)</span><br><span class="line">          &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">FolderModel</span> &#123;</span><br><span class="line">  <span class="attr">filePath</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">fileName</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">isScreenshot</span>: <span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line">  <span class="attr">thumbnailPath</span>?: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>   <span class="comment">// Thumbnail for videos</span></span><br><span class="line">  <span class="attr">isSelect</span>?: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: Modifying `</span>isSelect<span class="string">` in array items does not trigger list refresh. The list only updates when `</span>filePaths<span class="string">` is reassigned with new items. What&#x27;s a better solution?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use the `</span><span class="meta">@Observed</span><span class="string">` and `</span><span class="meta">@ObjectLink</span><span class="string">` decorators. Refer to the documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS custom component: Interface does not re-render when data updates  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">CardView</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">title</span>: <span class="built_in">string</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">moreText</span>: <span class="built_in">string</span> = <span class="string">&#x27;更多&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">tempBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@BuilderParam</span> <span class="attr">contentBuilder</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="variable language_">this</span>.<span class="property">tempBuilder</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">contentBuilder</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Component usage</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">NoticeCardView</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">noticeList</span>: <span class="title class_">Notice</span>[] = []</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">NoticeRepository</span>().<span class="title function_">getNoticeList</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">noticeList</span> = result</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">ContentBuilder</span>() &#123;</span><br><span class="line">    <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">noticeList</span>, <span class="function">(<span class="params"><span class="attr">notice</span>: <span class="title class_">Notice</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.wb_ic_notice_tip&#x27;</span>)).<span class="title function_">height</span>(<span class="number">11</span>).<span class="title function_">width</span>(<span class="number">9</span>)</span><br><span class="line">        <span class="title class_">Text</span>(notice.<span class="property">title</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">11</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.cm_text_primary&#x27;</span>))</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="string">&#x27;14fp&#x27;</span>)</span><br><span class="line">          .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">      &#125;.<span class="title function_">padding</span>(<span class="number">8</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">CardView</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">contentBuilder</span>: <span class="variable language_">this</span>.<span class="property">ContentBuilder</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: When `</span>noticeList<span class="string">` updates, the interface does not re-render.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference code**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CardView</span>  &#123;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">header</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@Builder</span> <span class="title function_">tempBuilder</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@BuilderParam</span> <span class="attr">contentBuilder</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="variable language_">this</span>.<span class="property">tempBuilder</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">contentBuilder</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CustomContainerUser</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;header&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="built_in">string</span>[] = []</span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Data loaded&#x27;</span>, <span class="variable language_">this</span>.<span class="property">list</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">text</span>)</span><br><span class="line">      <span class="title class_">CardView</span> (&#123; <span class="attr">header</span>: <span class="variable language_">this</span>.<span class="property">text</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title class_">ContentBuilder</span>(<span class="string">&#x27;testA&#x27;</span>, <span class="string">&#x27;testB&#x27;</span>)</span><br><span class="line">        &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Builder</span>  <span class="title class_">ContentBuilder</span>(<span class="attr">label1</span>: <span class="built_in">string</span>, <span class="attr">label2</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params"><span class="attr">text</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Text</span>(text)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/522-Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/522-Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Tables, Lazy Load List UI Refresh, Split-Screen Adaptation, Custom Pop-up and Soft Keyboard Spacing, New Routing Support for Landscape Mode</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:00:16 / Modified: 10:01:50" itemprop="dateCreated datePublished" datetime="2025-06-25T10:00:16+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Tables, Lazy Load List UI Refresh, Split-Screen Adaptation, Custom Pop-up and Soft Keyboard Spacing, New Routing Support for Landscape Mode"></a>[Daily HarmonyOS Next Knowledge] Routing Tables, Lazy Load List UI Refresh, Split-Screen Adaptation, Custom Pop-up and Soft Keyboard Spacing, New Routing Support for Landscape Mode</h3><h4 id="1-HarmonyOS-System-Routing-Table-Home-Page-Cannot-Listen-for-Page-Display-and-Hide"><a href="#1-HarmonyOS-System-Routing-Table-Home-Page-Cannot-Listen-for-Page-Display-and-Hide" class="headerlink" title="1. HarmonyOS System Routing Table - Home Page Cannot Listen for Page Display and Hide?"></a>1. HarmonyOS System Routing Table - Home Page Cannot Listen for Page Display and Hide?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5</a>  </p>
<p><strong>Scenario</strong>: Routing jumps as follows: Index → PageOne, click back from PageOne.  </p>
<p><strong>Code</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">pageStack</span>: <span class="title class_">NavPathStack</span> = <span class="keyword">new</span> <span class="title class_">NavPathStack</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Navigation</span>(<span class="variable language_">this</span>.<span class="property">pageStack</span>) &#123;</span><br><span class="line">    &#125;.<span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageStack</span>.<span class="title function_">pushPathByName</span>(<span class="string">&quot;PageOne&quot;</span>, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">hideNavBar</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onPageShow&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageHide</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onPageHide&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: When jumping from Index to PageOne, `</span>onPageHide<span class="string">` is not called back. When returning from PageOne to Index, `</span>onPageShow<span class="string">` is not called back.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Question**: How to listen for the display and hiding of the Index page? (When Index jumps to PageOne via router, normal page callbacks are visible.)  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Use NavPathStack with the navDestination attribute for page routing, which can carry page information. NavDestination has related `</span>onShown<span class="string">` and `</span>onHidden<span class="string">` methods. Refer to:  </span></span><br><span class="line"><span class="string">- NavPathStack documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#navpathstack10  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span><span class="title function_">onPageShow</span>()<span class="string">` method only takes effect in custom components decorated with @Entry and cannot be triggered when returning to subpages of NavDestination wrapped by Navigation. To listen for the display and hiding of the main page upon return, handle business logic in the callback by listening to the Navigation&#x27;s `</span><span class="title function_">onNavBarStateChange</span>()<span class="string">` event. Reference:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS LazyForEach UI Refresh Issue?  </span></span><br><span class="line"><span class="string">**Scenario**: When using LazyForEach to traverse and generate different entries in the home page List control, the key generation uses business id + index.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- The first entry is a carousel with business id 1 and index 1.  </span></span><br><span class="line"><span class="string">- When the operation background adds resources to the carousel, the business id remains 1, but an additional image is configured for the carousel.  </span></span><br><span class="line"><span class="string">- When notifying the array, the carousel control does not refresh.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Question**: How to handle this? Should a random number be added when generating keys?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: The List refresh strategy is based on bound keys, which correspond to the component tree and refresh the page by updating virtual components. Since adding images does not change the key, the refresh mechanism is not triggered. Adding a random number causes refresh on each load, affecting performance. It is recommended to use `</span><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item) + id + index<span class="string">` as the key.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS Split-Screen Adaptation: Can the Navigation Area Support Multiple PageStacks Based on TabBar to Maintain Page Stacks?  </span></span><br><span class="line"><span class="string">**Requirement**: For split-screen adaptation, can the navigation area support multiple `</span><span class="title class_">PageStacks</span><span class="string">` based on TabBar to maintain page stacks? The effect is similar to xxx devices, where each TabBar corresponds to a `</span><span class="title class_">PageStack</span><span class="string">`, and switching TabBars restores the corresponding Tab&#x27;s page stack.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference structure**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Tabs</span>() &#123;</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="title function_">contentOne</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="string">&#x27;Discover&#x27;</span>)</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="title function_">contentTwo</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="string">&#x27;Mall&#x27;</span>)</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">&#125;.<span class="title function_">barPosition</span>(<span class="title class_">BarPosition</span>.<span class="property">End</span>)</span><br><span class="line">.<span class="title function_">vertical</span>(<span class="literal">false</span>) <span class="comment">// Set tab layout direction to horizontal</span></span><br><span class="line">.<span class="title function_">barMode</span>(<span class="title class_">BarMode</span>.<span class="property">Fixed</span>) <span class="comment">// All sub-tabs equally divide the tab bar width, and the tab bar is not scrollable</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Custom Pop-up and Soft Keyboard Spacing?  </span></span><br><span class="line"><span class="string">**Issue**: A dialog is set at the bottom with a TextInput. When the pop-up is opened, there is spacing between the pop-up and the soft keyboard. The expectation is for the pop-up to be flush with the soft keyboard. Setting the offset dy has no effect.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Adjust the pop-up position by setting `</span>customStyle<span class="string">` to true and adding an offset to the column layout inside the pop-up: `</span>.<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: xx &#125;)<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS: Is There a Way to Apply Landscape Mode Only to a New Route While Other Routes Remain in Portrait Mode?  </span></span><br><span class="line"><span class="string">**Scenario**: When switching from a portrait page to landscape mode by opening a new route, the current landscape implementation sets landscape mode in the new route page using `</span>lastWindow.<span class="title function_">setPreferredOrientation</span>(<span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>)<span class="string">`. This causes an issue where the original portrait primary page is simultaneously changed to landscape, and the original landscape secondary page is changed to portrait, which is visible during route page transitions and considered a defect by our testing team.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Requirement**: When jumping to a secondary landscape page, can we directly open a route container that is already in landscape mode without affecting the primary portrait page?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Steps**:  </span></span><br><span class="line"><span class="string">1. Open the `</span><span class="variable language_">module</span>.<span class="property">json5</span><span class="string">` file under entry and add an `</span>orientation<span class="string">` attribute to the `</span>abilities<span class="string">` node: `</span><span class="string">&quot;orientation&quot;</span>: <span class="string">&#x27;unspecified&#x27;</span><span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. First page:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; router &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct aboutScreen1 &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Home Page, click to jump&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&quot;pages/aboutScreen2&quot;</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Second page:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; router, <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct aboutScreen2 &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> orientation = <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setScreenOrientation</span>(orientation)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> orientation = <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setScreenOrientation</span>(orientation)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setScreenOrientation</span>(<span class="params"><span class="attr">orientation</span>: <span class="variable language_">window</span>.<span class="title class_">Orientation</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> promise = <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>())</span><br><span class="line">      promise.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        windowClass = data</span><br><span class="line">        windowClass.<span class="title function_">setPreferredOrientation</span>(orientation)</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;getLastWindow error&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;setScreenOrientation error&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;I am in landscape!&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;50%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/521-Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/521-Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:54:37 / Modified: 12:25:02" itemprop="dateCreated datePublished" datetime="2025-06-25T09:54:37+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps"><a href="#Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps"></a>[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps</h3><h4 id="1-How-to-listen-for-real-time-changes-in-NavPathStack-size-in-HarmonyOS"><a href="#1-How-to-listen-for-real-time-changes-in-NavPathStack-size-in-HarmonyOS" class="headerlink" title="1. How to listen for real-time changes in NavPathStack size in HarmonyOS?"></a>1. How to listen for real-time changes in NavPathStack size in HarmonyOS?</h4><p><strong>How to listen for real-time changes in NavPathStack size?</strong>  </p>
<p>Current solutions in documentation: <code>navDestinationUpdate</code> has three issues:  </p>
<ol>
<li>Frequent updates trigger continuous callbacks.  </li>
<li>Unnecessary in some scenarios (e.g., screen off or app backgrounding).  </li>
<li>Inaccurate: No notification when pushing a new page changes the stack size.</li>
</ol>
<p>Use <code>observe.on</code> instead. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12</a>  </p>
<h4 id="2-HarmonyOS-Page-blocked-by-pop-up-dialog"><a href="#2-HarmonyOS-Page-blocked-by-pop-up-dialog" class="headerlink" title="2. HarmonyOS: Page blocked by pop-up dialog?"></a>2. HarmonyOS: Page blocked by pop-up dialog?</h4><p><strong>Steps to reproduce</strong>:  </p>
<ol>
<li>Click to pop up a dialog.  </li>
<li>Navigate to a login page within the dialog, resulting in the page being blocked behind the dialog.</li>
</ol>
<p><strong>Solution</strong>: <code>CustomDialog</code> is a global pop-up with a high window hierarchy. Use <code>window</code> to lower the hierarchy.<br>API reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<h4 id="3-HarmonyOS-When-Navigation-uses-NavigationMode-Split-can-bindSheet-adapt-to-split-screen-mode"><a href="#3-HarmonyOS-When-Navigation-uses-NavigationMode-Split-can-bindSheet-adapt-to-split-screen-mode" class="headerlink" title="3. HarmonyOS: When Navigation uses NavigationMode.Split, can bindSheet adapt to split-screen mode?"></a>3. HarmonyOS: When Navigation uses NavigationMode.Split, can bindSheet adapt to split-screen mode?</h4><p><strong>Half-modal behavior</strong>:  </p>
<ul>
<li>When screen width &lt; 600vp: Bottom pop-up.  </li>
<li>When screen width is in <code>[600, 840)</code>: Centered pop-up.  </li>
<li>When screen width &gt; 840vp: Default hand-following pop-up (appears below the bound sheet node).</li>
</ul>
<h4 id="4-HarmonyOS-Does-setting-visibility-to-Visibility-None-on-an-Image-component-prevent-the-onComplete-event-from-firing"><a href="#4-HarmonyOS-Does-setting-visibility-to-Visibility-None-on-an-Image-component-prevent-the-onComplete-event-from-firing" class="headerlink" title="4. HarmonyOS: Does setting visibility to Visibility.None on an Image component prevent the onComplete event from firing?"></a>4. HarmonyOS: Does setting <code>visibility</code> to <code>Visibility.None</code> on an Image component prevent the <code>onComplete</code> event from firing?</h4><p><strong>Issue</strong>: When <code>visibility</code> is set to <code>Visibility.None</code>, the <code>onComplete</code> event does not trigger.  </p>
<p><strong>Explanation</strong>: The <code>onComplete</code> interface returns the component’s width and height (<code>componentWidth</code> and <code>componentHeight</code>), which require measurement to execute. If <code>visible = false</code>, the component is not measured, blocking the <code>onComplete</code> callback.  </p>
<p><strong>Solution</strong>: Keep <code>visible = true</code> by default. When an image fails to load, use the <code>onError</code> interface to set <code>visible = false</code>.  </p>
<h4 id="5-HarmonyOS-What-is-the-difference-between-pushDestinationByName-and-pushPathByName"><a href="#5-HarmonyOS-What-is-the-difference-between-pushDestinationByName-and-pushPathByName" class="headerlink" title="5. HarmonyOS: What is the difference between pushDestinationByName and pushPathByName?"></a>5. HarmonyOS: What is the difference between <code>pushDestinationByName</code> and <code>pushPathByName</code>?</h4><ul>
<li><code>pushDestinationByName</code> binds a context object and verifies context consistency during calls.  </li>
<li><code>pushPathByName</code> does not verify context consistency.</li>
</ul>
<p><strong>Note</strong>: Different windows have different UIContexts. If used within the same window, they differ only in return values, with no other functional differences.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">167</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
