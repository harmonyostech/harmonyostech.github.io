<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/11/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41113-Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41113-Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] HAP Installation Error, App Account Transfer, Local File Import, Remote Package Build Issues, Frontend Page Access Methods</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:53:53 / Modified: 09:55:17" itemprop="dateCreated datePublished" datetime="2025-06-29T09:53:53+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods"><a href="#Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods" class="headerlink" title="[Daily HarmonyOS Next Knowledge] HAP Installation Error, App Account Transfer, Local File Import, Remote Package Build Issues, Frontend Page Access Methods"></a>[Daily HarmonyOS Next Knowledge] HAP Installation Error, App Account Transfer, Local File Import, Remote Package Build Issues, Frontend Page Access Methods</h1><h4 id="1-How-to-solve-the-HAP-installation-error-after-HarmonyOS-packaging"><a href="#1-How-to-solve-the-HAP-installation-error-after-HarmonyOS-packaging" class="headerlink" title="1. How to solve the HAP installation error after HarmonyOS packaging?"></a>1. How to solve the HAP installation error after HarmonyOS packaging?</h4><p>When installing a HAP file generated by build via hdc, an error occurs, and the certificate information is confirmed to be release. How to solve it?  </p>
<p><strong>Solution</strong>: Release certificates cannot be used for installation.  </p>
<h4 id="2-Can-apps-created-under-a-HarmonyOS-ordinary-account-be-deleted-or-transferred-to-another-enterprise-inhouse-account"><a href="#2-Can-apps-created-under-a-HarmonyOS-ordinary-account-be-deleted-or-transferred-to-another-enterprise-inhouse-account" class="headerlink" title="2. Can apps created under a HarmonyOS ordinary account be deleted or transferred to another enterprise inhouse account?"></a>2. Can apps created under a HarmonyOS ordinary account be deleted or transferred to another enterprise inhouse account?</h4><p>They can be deleted and re-created under an enterprise account, but direct transfer is not supported.  </p>
<h4 id="3-How-to-import-local-files-in-HarmonyOS"><a href="#3-How-to-import-local-files-in-HarmonyOS" class="headerlink" title="3. How to import local files in HarmonyOS?"></a>3. How to import local files in HarmonyOS?</h4><p>When importing self-written files in a project, excessive hierarchy issues may occur, such as:  </p>
<pre><code class="language-typescript">import CommonConstants from &#39;../../../commons/constants/CommonConstants&#39;;
</code></pre>
<p>Is there a way to set up shortcut references similar to TS configuration in <code>compilerOptions</code>? Which configuration file needs to be modified?  </p>
<p>Desired reference format:  </p>
<pre><code class="language-typescript">import CommonConstants from &#39;@commons/CommonConstants&#39;
</code></pre>
<p><strong>Solution</strong>: In the <code>oh-package.json5</code> file of the model directory requiring the library, add the library dependency in the <code>dependencies</code> block:  </p>
<pre><code class="language-json5">&quot;dependencies&quot;: &#123;
  &quot;libraryFirst&quot;: &quot;file:../libraryFirst&quot;
&#125;
</code></pre>
<ul>
<li><code>libraryFirst</code> is an alias (arbitrary name), and the value is the path.  </li>
<li>Usage: <code>import &#123; add &#125; from &#39;libraryFirst&#39;</code>.</li>
</ul>
<p><strong>Reference</strong>: Dynamic import documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-dynamic-import-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-dynamic-import-V5</a>  </p>
<ul>
<li>Dynamic import supports conditional lazy loading and partial reflection, improving page loading speed.  </li>
<li>It supports loading HSP modules&#x2F;HAR modules&#x2F;OHPM packages&#x2F;Native libraries, and enables module decoupling when variables are dynamically imported between HAR modules.  </li>
<li>Use cases for dynamic import:  <ul>
<li>When statically imported modules significantly slow down code loading and are rarely used.  </li>
<li>When statically imported modules consume excessive system memory and are rarely used.  </li>
<li>When the imported module does not exist at loading time and needs to be acquired asynchronously.  </li>
<li>When the module specifier needs to be dynamically constructed (static import only supports static specifiers).  </li>
<li>When the imported module has side effects (code that runs directly in the module) required only under certain conditions.</li>
</ul>
</li>
</ul>
<h4 id="4-Remote-package-build-issue-“The-hvigor-depends-on-the-npmrc-file-Configure-the-npmrc-file-first-”"><a href="#4-Remote-package-build-issue-“The-hvigor-depends-on-the-npmrc-file-Configure-the-npmrc-file-first-”" class="headerlink" title="4. Remote package build issue: “The hvigor depends on the npmrc file. Configure the npmrc file first.”"></a>4. Remote package build issue: “The hvigor depends on the npmrc file. Configure the npmrc file first.”</h4><p>Error occurs during remote package build in the pipeline environment:<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.13.png"></p>
<p><strong>Error message</strong>: The hvigor depends on the npmrc file. Configure the npmrc file first.  </p>
<p><strong>Issue</strong>: The npmrc file is already configured in the remote environment. What is the problem?  </p>
<p><strong>Solution</strong>: The <code>.npmrc</code> file must be configured in the user directory, and the current directory must have accessible permissions.  </p>
<h4 id="5-How-does-a-HarmonyOS-app-access-frontend-page-methods"><a href="#5-How-does-a-HarmonyOS-app-access-frontend-page-methods" class="headerlink" title="5. How does a HarmonyOS app access frontend page methods?"></a>5. How does a HarmonyOS app access frontend page methods?</h4><p>The app needs to accept frontend method calls, and after execution, run a JS script to trigger an asynchronous callback. How should frontend methods be registered for normal invocation by the app?  </p>
<p><strong>Solution</strong>: Use the WebView’s <code>runJavaScript</code> method to asynchronously execute JS scripts and return results via callbacks. Call <code>runJavaScript</code> after <code>loadUrl</code> is completed (e.g., in <code>onPageEnd</code>).<br><strong>Official example reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__runjavascript">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__runjavascript</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41114-Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41114-Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Component Loading Blank, C++ Callback to ArkTS, Bottom Banner Hide/Show, Excessive Build Warnings, Real-time Communication Between ArkTS and C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:52:43 / Modified: 09:53:05" itemprop="dateCreated datePublished" datetime="2025-06-29T09:52:43+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Component Loading Blank, C++ Callback to ArkTS, Bottom Banner Hide&#x2F;Show, Excessive Build Warnings, Real-time Communication Between ArkTS and C++"></a>[Daily HarmonyOS Next Knowledge] Web Component Loading Blank, C++ Callback to ArkTS, Bottom Banner Hide&#x2F;Show, Excessive Build Warnings, Real-time Communication Between ArkTS and C++</h1><h4 id="1-HarmonyOS-web-component-loads-a-blank-page"><a href="#1-HarmonyOS-web-component-loads-a-blank-page" class="headerlink" title="1. HarmonyOS web component loads a blank page?"></a>1. HarmonyOS web component loads a blank page?</h4><p>When loading some URLs, the header title and back button of the front-end page are displayed, but the main content is blank.  </p>
<p>Add the attribute <code>.domStorageAccess(true)</code> to the WebView component to enable Document Object Model Storage API permissions (disabled by default).<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#domstorageaccess">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#domstorageaccess</a>  </p>
<p><code>domStorageAccess(domStorageAccess: boolean)</code>: Enables&#x2F;disables Document Object Model Storage API permissions (default: disabled).  </p>
<h4 id="2-How-to-register-a-callback-from-ArkTS-to-C-layer-in-HarmonyOS-and-how-does-the-C-layer-invoke-the-callback-method"><a href="#2-How-to-register-a-callback-from-ArkTS-to-C-layer-in-HarmonyOS-and-how-does-the-C-layer-invoke-the-callback-method" class="headerlink" title="2. How to register a callback from ArkTS to C++ layer in HarmonyOS, and how does the C++ layer invoke the callback method?"></a>2. How to register a callback from ArkTS to C++ layer in HarmonyOS, and how does the C++ layer invoke the callback method?</h4><p>Need to pass the playback status callback from the C++ layer to the ArkTS UI layer. Unsure about implementing this via NAPI, seeking a solution.  </p>
<p>Use the <code>napi_call_function</code> to call JS functions from Native. Reference code:  </p>
<ol>
<li>Link ArkTS and C++ functions in <code>index.d.ts</code>:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">nativeCallArkTS</span>: <span class="function">(<span class="params"><span class="attr">cb</span>: (a: <span class="built_in">string</span>) =&gt; <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>; </span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Call ArkTS function from C++:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">NativeCallArkTS</span>(napi_env env, napi_callback_info info) &#123;</span><br><span class="line">  size_t argc = <span class="number">1</span>;</span><br><span class="line">  napi_value args[<span class="number">1</span>] = &#123;nullptr&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">napi_get_cb_info</span>(env, info, &amp;argc, args, nullptr, nullptr);</span><br><span class="line">  </span><br><span class="line">  napi_value argv = nullptr;</span><br><span class="line">  <span class="title function_">napi_create_string_utf8</span>(env, <span class="string">&quot;yes&quot;</span>, <span class="number">3</span>, &amp;argv);</span><br><span class="line"></span><br><span class="line">  napi_value result = nullptr;</span><br><span class="line">  <span class="title function_">napi_call_function</span>(env, nullptr, args[<span class="number">0</span>], <span class="number">1</span>, &amp;argv, &amp;result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Export the `</span><span class="title class_">NativeCallArkTS</span><span class="string">` interface:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="variable constant_">EXTERN_C_START</span></span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">Init</span>(napi_env env, napi_value <span class="built_in">exports</span>)</span><br><span class="line">&#123;</span><br><span class="line">  napi_property_descriptor desc[] = &#123;</span><br><span class="line">  &#123;<span class="string">&quot;nativeCallArkTS&quot;</span>, nullptr, <span class="title class_">NativeCallArkTS</span>, nullptr, nullptr, nullptr, napi_default, nullptr&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">napi_define_properties</span>(env, <span class="built_in">exports</span>, <span class="title function_">sizeof</span>(desc) / <span class="title function_">sizeof</span>(desc[<span class="number">0</span>]), desc);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">exports</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable constant_">EXTERN_C_END</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. Invoke the function in ArkTS:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> nativeFun <span class="keyword">from</span> <span class="string">&#x27;libentry.so&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;nativeCallArkTS&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">message</span> += nativeFun.<span class="title function_">nativeCallArkTS</span>(<span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">string</span></span>)=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> a &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to show and hide the bottom banner in HarmonyOS?  </span></span><br><span class="line"><span class="string">**Reference Link**: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5  </span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="params"><span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="title class_">WindowStage</span></span>) &#123;</span><br><span class="line">  windowStage.<span class="title function_">getMainWindow</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">windowObj</span>) =&gt;</span> &#123;</span><br><span class="line">    windowObj.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>);</span><br><span class="line">    windowObj.<span class="title function_">setWindowSystemBarEnable</span>([<span class="string">&#x27;status&#x27;</span>])</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Application window concepts**:  </span></span><br><span class="line"><span class="string">- **Window immersive capability**: Controls system windows like the status bar and navigation bar to enhance user experience. Immersive capabilities only take effect when the main application window is in full-screen mode. Sub-windows (pop-ups, floating windows) and main windows in freeform mode typically cannot use immersive capabilities.  </span></span><br><span class="line"><span class="string">- **Floating window**: A special application window that remains visible when the main window and corresponding Ability go to the background. It can be used for background video playback or quick access (e.g., floating balls). Permissions are required before creating a floating window.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Excessive warnings during hap build, sometimes failing to find errors?  </span></span><br><span class="line"><span class="string">How to disable warning echoes when there are too many warnings during hap build, making errors hard to locate.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In &quot;File&quot; -&gt; &quot;Settings&quot;, search for &quot;hvigor&quot; and set &quot;Use log level&quot; to adjust the hvigor output log level.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Real-time communication between HarmonyOS ArkTS and C++?  </span></span><br><span class="line"><span class="string">The C++ layer generates extensive logs output to the console, which need to be real-timely displayed in the ArkTS UI. Should this be implemented via callbacks? Unfamiliar with NAPI and unable to find relevant methods in documentation.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Implement via callbacks. Refer to the following example:  </span></span><br><span class="line"><span class="string">1. Link ArkTS and C++ functions in `</span>index.<span class="property">d</span>.<span class="property">ts</span><span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">nativeCallArkTS</span>: <span class="function">(<span class="params"><span class="attr">cb</span>: (a: <span class="built_in">string</span>) =&gt; <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>; </span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Call ArkTS function from C++ (same as above):  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">NativeCallArkTS</span>(napi_env env, napi_callback_info info) &#123;</span><br><span class="line">  size_t argc = <span class="number">1</span>;</span><br><span class="line">  napi_value args[<span class="number">1</span>] = &#123;nullptr&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">napi_get_cb_info</span>(env, info, &amp;argc, args, nullptr, nullptr);</span><br><span class="line">  </span><br><span class="line">  napi_value argv = nullptr;</span><br><span class="line">  <span class="title function_">napi_create_string_utf8</span>(env, <span class="string">&quot;yes&quot;</span>, <span class="number">3</span>, &amp;argv);</span><br><span class="line"></span><br><span class="line">  napi_value result = nullptr;</span><br><span class="line">  <span class="title function_">napi_call_function</span>(env, nullptr, args[<span class="number">0</span>], <span class="number">1</span>, &amp;argv, &amp;result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Export the interface (same as above):  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="variable constant_">EXTERN_C_START</span></span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">Init</span>(napi_env env, napi_value <span class="built_in">exports</span>)</span><br><span class="line">&#123;</span><br><span class="line">  napi_property_descriptor desc[] = &#123;</span><br><span class="line">  &#123;<span class="string">&quot;nativeCallArkTS&quot;</span>, nullptr, <span class="title class_">NativeCallArkTS</span>, nullptr, nullptr, nullptr, napi_default, nullptr&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">napi_define_properties</span>(env, <span class="built_in">exports</span>, <span class="title function_">sizeof</span>(desc) / <span class="title function_">sizeof</span>(desc[<span class="number">0</span>]), desc);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">exports</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable constant_">EXTERN_C_END</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. Invoke in ArkTS (same as above):  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> nativeFun <span class="keyword">from</span> <span class="string">&#x27;libentry.so&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;nativeCallArkTS&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">message</span> += nativeFun.<span class="title function_">nativeCallArkTS</span>(<span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">string</span></span>)=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> a &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41115-Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41115-Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Drawing Solid Circles, Release Error 7014, Page Navigation, PersistentStorage Issues, App Startup Initialization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:51:38 / Modified: 09:51:58" itemprop="dateCreated datePublished" datetime="2025-06-29T09:51:38+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization"><a href="#Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Drawing Solid Circles, Release Error 7014, Page Navigation, PersistentStorage Issues, App Startup Initialization"></a>[Daily HarmonyOS Next Knowledge] Drawing Solid Circles, Release Error 7014, Page Navigation, PersistentStorage Issues, App Startup Initialization</h1><h4 id="1-How-to-draw-a-solid-circle-in-HarmonyOS-Can-DrawingRenderingContext-be-used"><a href="#1-How-to-draw-a-solid-circle-in-HarmonyOS-Can-DrawingRenderingContext-be-used" class="headerlink" title="1. How to draw a solid circle in HarmonyOS? Can DrawingRenderingContext be used?"></a>1. How to draw a solid circle in HarmonyOS? Can DrawingRenderingContext be used?</h4><p>Reference code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CircleByOneHeart</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentCenterColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentUpColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentDownColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentLeftColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentRightColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">countDown</span>: <span class="built_in">number</span> = <span class="number">0</span>; <span class="comment">// Timer flag to manage timeouts</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">countDown</span>); <span class="comment">// Destroy the timer when component disappears</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">100</span> &#125;) &#123;</span><br><span class="line">        <span class="comment">// Draw a concentric circle with diameter 90</span></span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Top line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">5</span>, <span class="number">0</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">5</span>, <span class="number">20</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">45</span>, <span class="attr">y</span>: <span class="number">5</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentUpColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentUpColor</span> = <span class="variable language_">this</span>.<span class="property">currentUpColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentUpColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>); <span class="comment">// Set timer to reset color</span></span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Bottom line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">5</span>, <span class="number">0</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">5</span>, <span class="number">20</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">45</span>, <span class="attr">y</span>: <span class="number">75</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentDownColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentDownColor</span> = <span class="variable language_">this</span>.<span class="property">currentDownColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentDownColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Left line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">10</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">0</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">20</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">5</span>, <span class="attr">y</span>: <span class="number">45</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentLeftColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentLeftColor</span> = <span class="variable language_">this</span>.<span class="property">currentLeftColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentLeftColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Right line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">10</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">0</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">20</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">75</span>, <span class="attr">y</span>: <span class="number">45</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentRightColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentRightColor</span> = <span class="variable language_">this</span>.<span class="property">currentRightColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentRightColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;OK&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Circle</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">25</span>, <span class="attr">y</span>: <span class="number">25</span> &#125;) <span class="comment">// Absolute positioning</span></span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">currentCenterColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentCenterColor</span> = <span class="variable language_">this</span>.<span class="property">currentCenterColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentCenterColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">        .<span class="title function_">border</span>(&#123;</span><br><span class="line">          <span class="comment">// Border width is inward; larger width reduces internal space</span></span><br><span class="line">          <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Blue</span>,</span><br><span class="line">          <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">radius</span>: <span class="number">100</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TimeSetting</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> stayTime = <span class="number">300</span>; <span class="comment">// Milliseconds</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS shows error 7014 during release. Only two permissions can be selected when creating a Profile?  </span></span><br><span class="line"><span class="string">**Error Code 7014**: Indicates inconsistent permissions between the app package configuration and the Profile.  </span></span><br><span class="line"><span class="string">**Cause**: Permissions configured in the app package do not match those declared in the Profile.  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyoserror-0000001651912985#section9225124218158  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Can the login module page navigate to the &quot;My&quot; module page and vice versa in HarmonyOS?  </span></span><br><span class="line"><span class="string">Yes, navigation between hap packages can be achieved using **named routes**. However, `</span>router<span class="string">` is deprecated; **Navigation** is recommended for unified page navigation configuration.  </span></span><br><span class="line"><span class="string">- **Named Routes**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5#routerpushnamedroute10  </span></span><br><span class="line"><span class="string">- **Navigation**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to choose between PersistentStorage and Preferences in HarmonyOS?  </span></span><br><span class="line"><span class="string">**Use Cases**:  </span></span><br><span class="line"><span class="string">- **User acceptance of privacy policy**: Use **Preferences** to track a simple flag.  </span></span><br><span class="line"><span class="string">- **UI-related state persistence**: Use **PersistentStorage** (requires a明确的UIContext).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Recommendations**:  </span></span><br><span class="line"><span class="string">- Use **Preferences** to track privacy policy acceptance and initialize on first acceptance.  </span></span><br><span class="line"><span class="string">- Use **PersistentStorage** for UI-related states that need direct integration with UI components.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Where should network requests and third-party SDK initialization be placed in HarmonyOS?  </span></span><br><span class="line"><span class="string">Initialize SDKs and perform network requests in the `</span><span class="title function_">onInitialized</span>()<span class="string">` method of the **Ability**. This ensures:  </span></span><br><span class="line"><span class="string">- Initialization occurs once during app startup.  </span></span><br><span class="line"><span class="string">- Errors from runtime re-initialization are avoided.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Example**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyAbility</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Ability</span> &#123;</span><br><span class="line">  <span class="title function_">onInitialized</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Initialize third-party SDKs here</span></span><br><span class="line">    <span class="comment">// Perform initial network requests</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41116-Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41116-Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Single Finger Rotation Gesture, Router Parameters on Page Return, Decorators, IPC Filing Issues, Passing Parameters with runJavaScript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:50:43 / Modified: 09:51:00" itemprop="dateCreated datePublished" datetime="2025-06-29T09:50:43+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript"><a href="#Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Single Finger Rotation Gesture, Router Parameters on Page Return, Decorators, IPC Filing Issues, Passing Parameters with runJavaScript"></a>[Daily HarmonyOS Next Knowledge] Single Finger Rotation Gesture, Router Parameters on Page Return, Decorators, IPC Filing Issues, Passing Parameters with runJavaScript</h1><h4 id="1-Is-there-a-single-finger-rotation-API-in-HarmonyOS"><a href="#1-Is-there-a-single-finger-rotation-API-in-HarmonyOS" class="headerlink" title="1. Is there a single finger rotation API in HarmonyOS?"></a>1. Is there a single finger rotation API in HarmonyOS?</h4><p>In business scenarios, single finger rotation, double finger scaling, and dragging gestures are required. However, using the documented APIs conflicts with custom <code>onTouch</code> implementations.  </p>
<p><strong>Reference</strong>: “RotationGesture”  </p>
<pre><code class="language-typescript">RotationGesture(value?:&#123;fingers?:number; angle?:number&#125;)
</code></pre>
<p>The RotationGesture is used to trigger rotation events with two optional parameters:  </p>
<ul>
<li><code>fingers</code>: Minimum number of fingers required (default 2, range 2-5).  </li>
<li><code>angle</code>: Minimum rotation angle (degrees) to trigger the gesture (default 1deg).</li>
</ul>
<p>Example of binding a rotation gesture to a Text component:  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct Index &#123;
  @State angle: number = 0;
  @State rotateValue: number = 0;

  build() &#123;
    Column() &#123;
      Text(&#39;RotationGesture angle:&#39; + this.angle).fontSize(28)
        // Bind rotation gesture to the component
        .rotate(&#123; angle: this.angle &#125;)
        .gesture(
          RotationGesture()
            .onActionStart((event: GestureEvent|undefined) =&gt; &#123;
              console.info(&#39;RotationGesture is onActionStart&#39;);
            &#125;)
            .onActionUpdate((event: GestureEvent|undefined) =&gt; &#123;
              if(event)&#123;
                this.angle = this.rotateValue + event.angle;
              &#125;
              console.info(&#39;RotationGesture is onActionUpdate&#39;);
            &#125;)
            .onActionEnd(() =&gt; &#123;
              this.rotateValue = this.angle;
              console.info(&#39;RotationGesture is onActionEnd&#39;);
            &#125;)
            .onActionCancel(() =&gt; &#123;
              console.info(&#39;RotationGesture is onActionCancel&#39;);
            &#125;)
        )
        .height(200)
        .width(300)
        .padding(20)
        .border(&#123; width: 3 &#125;)
        .margin(100)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-When-returning-to-a-previous-page-in-HarmonyOS-router-getParams-returns-undefined"><a href="#2-When-returning-to-a-previous-page-in-HarmonyOS-router-getParams-returns-undefined" class="headerlink" title="2. When returning to a previous page in HarmonyOS, router.getParams() returns undefined?"></a>2. When returning to a previous page in HarmonyOS, <code>router.getParams()</code> returns <code>undefined</code>?</h4><p>To pass parameters when navigating back, leave <code>url</code> empty and use <code>router.getParams()</code> in the previous page:  </p>
<pre><code class="language-typescript">.onClick(() =&gt; &#123;
  router.back(&#123;
    url: &#39;&#39;,
    params: &#123;
      &#39;a&#39;: &#39;1&#39;
    &#125;
  &#125;);
&#125;)
</code></pre>
<h4 id="3-Does-ArkTS-support-decorators-Does-hvigor-have-a-feature-similar-to-Gradle’s-Transform-source-code-scanning"><a href="#3-Does-ArkTS-support-decorators-Does-hvigor-have-a-feature-similar-to-Gradle’s-Transform-source-code-scanning" class="headerlink" title="3. Does ArkTS support decorators? Does hvigor have a feature similar to Gradle’s Transform (source code scanning)?"></a>3. Does ArkTS support decorators? Does hvigor have a feature similar to Gradle’s Transform (source code scanning)?</h4><ul>
<li><strong>ArkTS Decorators</strong>: Supported in DevEco Studio V3.1.1 Release via the <code>hvigor-ohos-plugin</code>. Use <code>@Preview</code> to decorate components for preview. Up to 10 <code>@Preview</code> decorators per file are allowed.  </li>
<li><strong>hvigor Custom Plugins</strong>: While hvigor lacks a direct equivalent to Gradle’s Transform, it enables source code processing through npm package management and task management mechanisms.</li>
</ul>
<h4 id="4-HarmonyOS-ICP-filing-and-software-copyright-application-name-requirements"><a href="#4-HarmonyOS-ICP-filing-and-software-copyright-application-name-requirements" class="headerlink" title="4. HarmonyOS ICP filing and software copyright application name requirements?"></a>4. HarmonyOS ICP filing and software copyright application name requirements?</h4><p><strong>Requirements</strong>: If the app name remains unchanged and ICP filing&#x2F;software copyright do not include platform information, they can be reused when publishing on HarmonyOS Next (subject to review).  </p>
<p><strong>Q1</strong>: Does this count as an unchanged app name if ICP filing shows no platform information but other platforms were declared during filing?<br><strong>A1</strong>: Yes, this counts as an unchanged app name.  </p>
<p><strong>Q2</strong>: When must HarmonyOS platform information be added to ICP filing?<br><strong>A2</strong>: Add HarmonyOS platform information before上架 (publishing).<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/50130">https://developer.huawei.com/consumer/cn/doc/app/50130</a>  </p>
<p><strong>Software Copyright Clarification</strong>: “Does not include platform information” refers to the software name, abbreviation, and entire copyright document.  </p>
<p><strong>Filing Process</strong>: HarmonyOS apps&#x2F;atomic services follow the same filing requirements as regular apps, handled by the接入商. Select “HarmonyOS” platform when submitting filing materials.  </p>
<h4 id="5-How-to-pass-parameters-with-runJavaScript-in-HarmonyOS-WebView"><a href="#5-How-to-pass-parameters-with-runJavaScript-in-HarmonyOS-WebView" class="headerlink" title="5. How to pass parameters with runJavaScript in HarmonyOS WebView?"></a>5. How to pass parameters with <code>runJavaScript</code> in HarmonyOS WebView?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41117-Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41117-Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Provider, Navigation Return Parameters, Privacy Statement Issues, Text Judgment Functions, Custom hvigor Plugins</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:46:19 / Modified: 09:50:03" itemprop="dateCreated datePublished" datetime="2025-06-29T09:46:19+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins"><a href="#Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Provider, Navigation Return Parameters, Privacy Statement Issues, Text Judgment Functions, Custom hvigor Plugins"></a>[Daily HarmonyOS Next Knowledge] Provider, Navigation Return Parameters, Privacy Statement Issues, Text Judgment Functions, Custom hvigor Plugins</h1><h4 id="1-Data-interaction-mode-between-HarmonyOS-Provider-and-Consume"><a href="#1-Data-interaction-mode-between-HarmonyOS-Provider-and-Consume" class="headerlink" title="1. Data interaction mode between HarmonyOS @Provider and @Consume"></a>1. Data interaction mode between HarmonyOS @Provider and @Consume</h4><p>This only allows one-way transmission, meaning only an ancestor component can update the variable, while descendant components can only read it. If a descendant component needs to change the data variable, what are the solutions? Passing it back layer by layer to the ancestor is too complicated.  </p>
<p>The @Provide and @Consume decorators enable two-way synchronization with descendant components without needing to pass data back layer by layer to the ancestor.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-provide-and-consume-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-provide-and-consume-V5</a>  </p>
<p>@Provide and @Consume are used for two-way data synchronization with descendant components, suitable for scenarios where state data needs to be passed across multiple levels. Unlike the named parameter mechanism for parent-child components, @Provide and @Consume break free from parameter passing constraints to achieve cross-level transmission.  </p>
<ul>
<li>A variable decorated with @Provide in an ancestor component is “provided” to its descendants. This eliminates the need for developers to repeatedly pass variables between components.  </li>
<li>Descendants use @Consume to obtain the variable provided by @Provide, establishing two-way data synchronization. Unlike @State&#x2F;@Link, @Provide&#x2F;@Consume can pass data across multiple parent-child component levels.  </li>
<li>@Provide and @Consume can be bound via the same variable name or alias. It is recommended that they have the same type to avoid implicit type conversion causing unexpected application behavior.</li>
</ul>
<pre><code class="language-typescript">@Component
struct CompD &#123;
  // The @Consume-decorated variable binds to the @Provide-decorated variable in ancestor component CompA via the same attribute name
  @Consume reviewVotes: number;

  build() &#123;
    Column() &#123;
      Text(`reviewVotes($&#123;this.reviewVotes&#125;)`)
      Button(`reviewVotes($&#123;this.reviewVotes&#125;), give +1`)
        .onClick(() =&gt; this.reviewVotes += 1)
    &#125;
    .width(&#39;50%&#39;)
  &#125;
&#125;

@Component
struct CompC &#123;
  build() &#123;
    Row(&#123; space: 5 &#125;) &#123;
      CompD()
      CompD()
    &#125;
  &#125;
&#125;

@Component
struct CompB &#123;
  build() &#123;
    CompC()
  &#125;
&#125;

@Entry
@Component
struct CompA &#123;
  // The @Provide-decorated variable reviewVotes is provided by the entry component CompA to its descendants
  @Provide reviewVotes: number = 0;

  build() &#123;
    Column() &#123;
      Button(`reviewVotes($&#123;this.reviewVotes&#125;), give +1`)
        .onClick(() =&gt; this.reviewVotes += 1)
      CompB()
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-obtain-return-parameters-when-using-Navigation-to-open-a-page-in-HarmonyOS"><a href="#2-How-to-obtain-return-parameters-when-using-Navigation-to-open-a-page-in-HarmonyOS" class="headerlink" title="2. How to obtain return parameters when using Navigation to open a page in HarmonyOS"></a>2. How to obtain return parameters when using Navigation to open a page in HarmonyOS</h4><p>Scenario: During a network request, if the session expires, a login page is triggered. After login, how to notify the previous network request (which has no UI) to resend the request. Each network request checks if the session is valid, and triggers login if expired.  </p>
<p>Between Navigation pages, data is passed from the source page to the target page via the <code>params</code> attribute in the NavPathInfo object, and the target page’s return is handled via the <code>onPop</code> callback.<br><strong>Step 1</strong>: Construct a NavPathInfo object with parameters to pass to the target page.  </p>
<ul>
<li><code>params</code>: Encapsulates data for transmission (functions in objects cannot be passed). For supported parameters, refer to the guide.  </li>
<li><code>onPop</code>: Callback when the target page triggers pop, using <code>PopInfo.info.param</code> to get the returned object.</li>
</ul>
<pre><code class="language-typescript">// Source page mainPage
let loginParam: LoginParam = new LoginParam()
// Construct pathInfo object
let pathInfo: NavPathInfo = new NavPathInfo(&#39;loginPage&#39;, loginParam, (popInfo: PopInfo) =&gt; &#123;
  let loginParam: LoginParam = popInfo.info.param as LoginParam;
  ...
&#125;)
// Pass parameters to the target page
this.pageStack.pushDestination(pathInfo, true);
</code></pre>
<p><strong>Step 2</strong>: The target page obtains parameters from the source page via <code>NavPathStack.getParamByIndex(0)</code>.  </p>
<pre><code class="language-typescript">@Component
export struct loginPageView &#123;
  @Consume(&#39;pageInfo&#39;) pageStack: NavPathStack;

  aboutToAppear(): void &#123;
    this.loginParam = this.pageStack.getParamByIndex(0) as LoginParam;
  &#125;
  ...
&#125;
</code></pre>
<p><strong>Step 3</strong>: The target page returns to the source page via <code>NavPathStack.pop</code>, using the <code>result</code> parameter to pass the object back.  </p>
<pre><code class="language-typescript">@Component
export struct loginPageView &#123;
  @Consume(&#39;pageInfo&#39;) pageStack: NavPathStack;
  // Object constructed by the page
  private loginParam!: LoginParam;
  ...
  build() &#123;
    NavDestination() &#123;
      ...
      Button(&#39;login&#39;).onClick(() =&gt; &#123;
        // Return the object to the source page
        this.pageStack.pop(this.loginParam, true)
      &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-privacy-statement-consultation"><a href="#3-HarmonyOS-privacy-statement-consultation" class="headerlink" title="3. HarmonyOS privacy statement consultation"></a>3. HarmonyOS privacy statement consultation</h4><p>Point 10 of the release documentation (link below) states: “Provide a privacy statement link in the ‘Privacy Statement’ section.” Can we attach the statement content directly instead of providing a link?<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166">https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166</a>  </p>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/50128#h1-1678351326517-0">https://developer.huawei.com/consumer/cn/doc/app/50128#h1-1678351326517-0</a><br>The document specifies that an APP privacy policy link must be submitted, which must exactly match the privacy policy within the APP.  </p>
<p>When creating an app or updating its version, developers must submit a privacy policy link that fully aligns with the in-APP privacy policy. Update the link content promptly if the in-APP privacy policy is modified.  </p>
<h4 id="4-How-to-make-HarmonyOS-Text-center-when-single-line-and-left-align-when-multi-line"><a href="#4-How-to-make-HarmonyOS-Text-center-when-single-line-and-left-align-when-multi-line" class="headerlink" title="4. How to make HarmonyOS Text center when single-line and left-align when multi-line"></a>4. How to make HarmonyOS Text center when single-line and left-align when multi-line</h4><p>Set different alignment styles by judging the number of lines.  </p>
<p>To get the number of lines:<br>@ohos.measure returns the width and height of multi-line text but not the line count, which can be calculated based on business scenarios.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5</a>  </p>
<p>For text exceeding a specific line count (3 lines as an example), apply different styles (e.g., expand&#x2F;collapse).  </p>
<ol>
<li>Calculate the total text height:</li>
</ol>
<pre><code class="language-typescript">let textSize: SizeOptions = measure.measureTextSize(&#123; textContent: this.content, fontSize: 24, constraintWidth: 300 &#125;)
</code></pre>
<ol start="2">
<li>Calculate the height with a width constraint and max lines (3 lines):</li>
</ol>
<pre><code class="language-typescript">let textSize2: SizeOptions = measure.measureTextSize(&#123; textContent: this.content, fontSize: 24, maxLines: 3, constraintWidth: 300 &#125;)
</code></pre>
<ol start="3">
<li>If <code>textSize.height &gt; textSize2.height</code>, the text exceeds 3 lines. Perform business processing based on this judgment.</li>
</ol>
<h4 id="5-Custom-hvigor-plugin-issues"><a href="#5-Custom-hvigor-plugin-issues" class="headerlink" title="5. Custom hvigor plugin issues"></a>5. Custom hvigor plugin issues</h4><p>In the beta1 version, Node.js is no longer exposed externally, and hvigor code is hidden in the app package with a fixed version. When developing custom hvigor plugins, referencing hvigor code from public npm libraries may cause version inconsistencies with the app package. Will this cause problems?  </p>
<p>For hvigor plugin development, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5</a><br>Try to reference the hvigor version actually used in the project or the version documented.  </p>
<p>Hvigor allows developers to implement custom plugins, define build logic, and share them. It mainly provides two plugin implementation methods:  </p>
<ul>
<li>Plugin development based on hvigorfile scripts.  </li>
<li>Plugin development based on TypeScript projects.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41118-Daily-HarmonyOS-Next-Knowledge-Number-of-Worker-Threads-Determining-User-Permission-Decisions-Image-Upload-Type-Errors-Request-Lock-Release-Timing-H5-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41118-Daily-HarmonyOS-Next-Knowledge-Number-of-Worker-Threads-Determining-User-Permission-Decisions-Image-Upload-Type-Errors-Request-Lock-Release-Timing-H5-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Number of Worker Threads, Determining User Permission Decisions, Image Upload Type Errors, Request Lock Release Timing, H5 Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:45:31 / Modified: 09:45:48" itemprop="dateCreated datePublished" datetime="2025-06-29T09:45:31+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Number-of-Worker-Threads-Determining-User-Permission-Decisions-Image-Upload-Type-Errors-Request-Lock-Release-Timing-H5-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Number-of-Worker-Threads-Determining-User-Permission-Decisions-Image-Upload-Type-Errors-Request-Lock-Release-Timing-H5-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Number of Worker Threads, Determining User Permission Decisions, Image Upload Type Errors, Request Lock Release Timing, H5 Issues"></a>[Daily HarmonyOS Next Knowledge] Number of Worker Threads, Determining User Permission Decisions, Image Upload Type Errors, Request Lock Release Timing, H5 Issues</h1><h4 id="1-How-to-determine-the-number-of-worker-threads-created-in-HarmonyOS"><a href="#1-How-to-determine-the-number-of-worker-threads-created-in-HarmonyOS" class="headerlink" title="1. How to determine the number of worker threads created in HarmonyOS?"></a>1. How to determine the number of worker threads created in HarmonyOS?</h4><p>Since there is a limit on the number of worker threads, we need to query the current number of workers to avoid creation failures. Is there a limit on the number of concurrently running worker threads, or on the number of worker threads that can be created by the same application?  </p>
<ol>
<li>There is currently no interface to query the current number of worker threads, but it can be viewed via <code>ps</code>.  </li>
<li>There is a limit on the number of worker threads that can be created under the same process. If the upper limit is reached, call <code>terminate</code> to destroy one before creating a new one.</li>
</ol>
<h4 id="2-In-HarmonyOS-permission-judgment-can-we-determine-whether-the-user-has-not-yet-made-a-permission-decision"><a href="#2-In-HarmonyOS-permission-judgment-can-we-determine-whether-the-user-has-not-yet-made-a-permission-decision" class="headerlink" title="2. In HarmonyOS permission judgment, can we determine whether the user has not yet made a permission decision?"></a>2. In HarmonyOS permission judgment, can we determine whether the user has not yet made a permission decision?</h4><p>There are only two states: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-abilityaccessctrl-V5#grantstatus">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-abilityaccessctrl-V5#grantstatus</a>  </p>
<p>GrantStatus is an enumeration representing the authorization status:  </p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>PERMISSION_DENIED</td>
<td>-1</td>
<td>Indicates unauthorized.</td>
</tr>
<tr>
<td>PERMISSION_GRANTED</td>
<td>0</td>
<td>Indicates authorized.</td>
</tr>
</tbody></table>
<h4 id="3-HarmonyOS-prompts-an-image-upload-type-error-even-when-app-information-configuration-is-consistent"><a href="#3-HarmonyOS-prompts-an-image-upload-type-error-even-when-app-information-configuration-is-consistent" class="headerlink" title="3. HarmonyOS prompts an image upload type error even when app information configuration is consistent."></a>3. HarmonyOS prompts an image upload type error even when app information configuration is consistent.</h4><ol>
<li>The image format may be incorrect. Convert it again to PNG or JPG format for format validation.  </li>
<li>The image resolution may be unsuitable. It is recommended to ensure a 16:9 resolution.</li>
</ol>
<h4 id="4-When-is-the-lock-added-by-HarmonyOS-ArkTS-Utils-locks-AsyncLock-request-released"><a href="#4-When-is-the-lock-added-by-HarmonyOS-ArkTS-Utils-locks-AsyncLock-request-released" class="headerlink" title="4. When is the lock added by HarmonyOS ArkTS Utils.locks.AsyncLock.request released?"></a>4. When is the lock added by HarmonyOS ArkTS <code>Utils.locks.AsyncLock.request</code> released?</h4><ol>
<li>The added lock is released when the closure ends.  </li>
<li>There is currently no method to release the lock actively.<br>Asynchronous locks are based on micro-task queues. Even after the lock is released, it must wait for other micro-tasks to complete. Consider splitting tasks.</li>
</ol>
<h4 id="5-When-embedding-an-H5-page-in-HarmonyOS-ArkWeb-the-original-functions-fail-to-work"><a href="#5-When-embedding-an-H5-page-in-HarmonyOS-ArkWeb-the-original-functions-fail-to-work" class="headerlink" title="5. When embedding an H5 page in HarmonyOS ArkWeb, the original functions fail to work."></a>5. When embedding an H5 page in HarmonyOS ArkWeb, the original functions fail to work.</h4><ol>
<li>Can the telephone function invoked via an <code>&lt;a&gt;</code> tag in the embedded page take effect directly in HarmonyOS’s WebView?  </li>
<li>Can an <code>&lt;input&gt;</code> tag invoking album image selection take effect directly in HarmonyOS’s WebView?</li>
</ol>
<p><strong>1. For the first question, refer to the following code:</strong>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> web_webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> call <span class="keyword">from</span> <span class="string">&#x27;@ohos.telephony.call&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">webviewController</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&#x27;call.html&#x27;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">webviewController</span> &#125;)</span><br><span class="line">        .<span class="title function_">onLoadIntercept</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">url</span>: <span class="built_in">string</span> = event.<span class="property">data</span>.<span class="title function_">getRequestUrl</span>();</span><br><span class="line">            <span class="comment">// Check if the link is a dialing link</span></span><br><span class="line">            <span class="keyword">if</span> (url.<span class="title function_">indexOf</span>(<span class="string">&#x27;tel://&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="comment">// Navigate to the dialing interface</span></span><br><span class="line">              call.<span class="title function_">makeCall</span>(url.<span class="title function_">substring</span>(<span class="number">6</span>), <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;make call succeeded.&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;make call fail, err is:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**2. For the second question, refer to the following code:**  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct photo &#123;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">webPickImage</span>: pickImage = <span class="keyword">new</span> <span class="title function_">pickImage</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">webCameraImage</span>: cameraImage = <span class="keyword">new</span> <span class="title function_">cameraImage</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Configure Web to enable debug mode</span></span><br><span class="line">    web_webview.<span class="property">WebviewController</span>.<span class="title function_">setWebDebuggingAccess</span>(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;refresh&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">refresh</span>();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">e</span>: business_error.<span class="property">BusinessError</span> = error <span class="keyword">as</span> business_error.<span class="property">BusinessError</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`ErrorCode: <span class="subst">$&#123;e.code&#125;</span>,  Message: <span class="subst">$&#123;e.message&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Register JavaScript To Window&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">registerJavaScriptProxy</span>(<span class="variable language_">this</span>.<span class="property">webPickImage</span>, <span class="string">&quot;pickImageName&quot;</span>, [<span class="string">&quot;testPickImage&quot;</span>]);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">registerJavaScriptProxy</span>(<span class="variable language_">this</span>.<span class="property">webCameraImage</span>, <span class="string">&quot;cameraImageName&quot;</span>, [<span class="string">&quot;testCameraImage&quot;</span>]);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">e</span>: business_error.<span class="property">BusinessError</span> = error <span class="keyword">as</span> business_error.<span class="property">BusinessError</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`ErrorCode: <span class="subst">$&#123;e.code&#125;</span>,  Message: <span class="subst">$&#123;e.message&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&#x27;Test1128.html&#x27;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">javaScriptAccess</span>(<span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">pickImage</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">testPickImage</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> <span class="title class_">PhotoSelectOptions</span> = <span class="keyword">new</span> picker.<span class="title class_">PhotoSelectOptions</span>();</span><br><span class="line">      <span class="title class_">PhotoSelectOptions</span>.<span class="property">MIMEType</span> = picker.<span class="property">PhotoViewMIMETypes</span>.<span class="property">IMAGE_TYPE</span>;</span><br><span class="line">      <span class="title class_">PhotoSelectOptions</span>.<span class="property">maxSelectNumber</span> = <span class="number">5</span>;</span><br><span class="line">      <span class="keyword">let</span> photoPicker = <span class="keyword">new</span> picker.<span class="title class_">PhotoViewPicker</span>();</span><br><span class="line">      photoPicker.<span class="title function_">select</span>(<span class="title class_">PhotoSelectOptions</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="title class_">PhotoSelectResult</span>: picker.<span class="title class_">PhotoSelectResult</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;PhotoViewPicker.select successfully, PhotoSelectResult uri: &#x27;</span> +</span><br><span class="line">        <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title class_">PhotoSelectResult</span>));</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;PhotoViewPicker.select failed with err: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">let</span> <span class="attr">err</span>: <span class="title class_">BusinessError</span> = error <span class="keyword">as</span> <span class="title class_">BusinessError</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;PhotoViewPicker failed with err: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;121&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">cameraImage</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">testCameraImage</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="title function_">getContext</span>(<span class="variable language_">this</span>) <span class="keyword">as</span> common.<span class="property">UIAbilityContext</span></span><br><span class="line">    context.<span class="title function_">startAbilityForResult</span>(&#123;</span><br><span class="line">      <span class="attr">action</span>: <span class="string">&quot;ohos.want.action.imageCapture&quot;</span>,</span><br><span class="line">      <span class="attr">parameters</span>: &#123;</span><br><span class="line">        <span class="attr">callBundleName</span>: <span class="string">&quot;com.hm.imageshow&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;imageCapture:&quot;</span> + <span class="string">`<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;1221&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41119-Daily-HarmonyOS-Next-Knowledge-Grid-Item-Drag-Support-WebView-Callback-Issues-Page-Name-Acquisition-Danmaku-Effect-Implementation-Modifying-App-Output-Path/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41119-Daily-HarmonyOS-Next-Knowledge-Grid-Item-Drag-Support-WebView-Callback-Issues-Page-Name-Acquisition-Danmaku-Effect-Implementation-Modifying-App-Output-Path/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Grid Item Drag Support, WebView Callback Issues, Page Name Acquisition, Danmaku Effect Implementation, Modifying App Output Path</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:44:40 / Modified: 09:45:00" itemprop="dateCreated datePublished" datetime="2025-06-29T09:44:40+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Grid-Item-Drag-Support-WebView-Callback-Issues-Page-Name-Acquisition-Danmaku-Effect-Implementation-Modifying-App-Output-Path"><a href="#Daily-HarmonyOS-Next-Knowledge-Grid-Item-Drag-Support-WebView-Callback-Issues-Page-Name-Acquisition-Danmaku-Effect-Implementation-Modifying-App-Output-Path" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Grid Item Drag Support, WebView Callback Issues, Page Name Acquisition, Danmaku Effect Implementation, Modifying App Output Path"></a>[Daily HarmonyOS Next Knowledge] Grid Item Drag Support, WebView Callback Issues, Page Name Acquisition, Danmaku Effect Implementation, Modifying App Output Path</h1><h4 id="1-Does-HarmonyOS-support-dragging-items-in-a-Grid"><a href="#1-Does-HarmonyOS-support-dragging-items-in-a-Grid" class="headerlink" title="1. Does HarmonyOS support dragging items in a Grid?"></a>1. Does HarmonyOS support dragging items in a Grid?</h4><p>I want the items in the Grid to be draggable and removable after being dragged out. The following code was provided by you last time, which normally works. However, when dragging downward over a TextInput, the <code>onDragMove</code> event of the GridItem stops firing. Setting <code>draggable(false)</code> for the TextInput does not resolve the issue.  </p>
<pre><code class="language-typescript">import &#123; media &#125; from &#39;@kit.MediaKit&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

import util from &#39;@ohos.util&#39;;
import &#123; curves &#125; from &#39;@kit.ArkUI&#39;;

@Entry
@Component
struct Index &#123;
  @State numbers: number[] = []
  @State isTextInputVisible: boolean = true
  @State isGridItemVisible: Visibility = Visibility.Visible
  scroller: Scroller = new Scroller()
  @State enableScroll: boolean = true
  @State scaleItem: number = -1
  @State dragItem: number = -1
  @State offsetX: number = 0
  @State offsetY: number = 0
  @State currentY: number = 0
  private dragRefOffsetx: number = 0
  private dragRefOffsety: number = 0
  private FIX_VP_X: number = 108
  private FIX_VP_Y: number = 120

  aboutToAppear() &#123;
    for (let i = 1; i &lt;= 11; i++) &#123;
      this.numbers.push(i)
    &#125;
  &#125;

  // Slide left
  left(index: number): void &#123;
    this.offsetX += this.FIX_VP_X
    this.dragRefOffsetx -= this.FIX_VP_X
    this.itemMove(index, index - 1)
  &#125;

  // Slide right
  right(index: number): void &#123;
    this.offsetX -= this.FIX_VP_X
    this.dragRefOffsetx += this.FIX_VP_X
    this.itemMove(index, index + 1)
  &#125;

  itemMove(index: number, newIndex: number): void &#123;
    console.info(&#39;index:&#39; + index + &#39; newIndex:&#39; + newIndex)
    let tmp = this.numbers.splice(index, 1)
    this.numbers.splice(newIndex, 0, tmp[0])
  &#125;

  build() &#123;
    Column(&#123; space: 5 &#125;) &#123;
      Grid(this.scroller) &#123;
        ForEach(this.numbers, (item: number) =&gt; &#123;
          GridItem() &#123;
            Text(item + &#39;&#39;)
              .fontSize(16)
              .width(&#39;100%&#39;)
              .textAlign(TextAlign.Center)
              .height(100)
              .borderRadius(10)
              .backgroundColor(0xFFFFFF)
              .animation(&#123; curve: Curve.Sharp, duration: 300 &#125;)
          &#125;
          .visibility(this.dragItem == item ? Visibility.Hidden : Visibility.Visible) // Set visibility based on the dragged item
          .width(100)
          .height(100)
          .padding(5)
          .zIndex(this.dragItem == item ? 1 : 0)
          .scale(&#123; x: this.scaleItem == item ? 1.05 : 1, y: this.scaleItem == item ? 1.05 : 1 &#125;)
          .translate(this.dragItem == item ? &#123; x: this.offsetX, y: this.offsetY &#125; : &#123; x: 0, y: 0 &#125;)
          .onDragStart((event: DragEvent, extraParams?: string) =&gt; &#123;
            animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;
              this.scaleItem = item
            &#125;)
            this.dragItem = item
            this.dragRefOffsetx = event.getWindowX()
            this.dragRefOffsety = event.getWindowY()
          &#125;)
          .onDrop((event: DragEvent, extraParams?: string) =&gt; &#123;
          &#125;)
          .onDragMove((event: DragEvent, extraParams?: string) =&gt; &#123;
            this.enableScroll = false
            console.log(&#39;onDragMove GridItem getWindowX&#39;, event.getWindowX())
            console.log(&#39;onDragMove GridItem getWindowY&#39;, event.getWindowY())
            this.offsetX = event.getWindowX() - this.dragRefOffsetx
            this.offsetY = event.getWindowY() - this.dragRefOffsety
            this.currentY = event.getWindowY()
            console.log(&#39;onDragMove GridItem offsetX&#39;, this.currentY)
            animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
              let index = this.numbers.indexOf(this.dragItem)
              console.log(&#39;index&#39;, index)
              if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt; this.FIX_VP_Y) &#123;
                this.right(index)
              &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt; this.FIX_VP_Y) &#123;
                this.left(index)
              &#125;
            &#125;)
            this.isGridItemVisible = Visibility.Hidden
          &#125;)
          .onDragEnd(() =&gt; &#123;
            this.enableScroll = true
            this.isTextInputVisible = true
            this.isGridItemVisible = Visibility.Visible
            animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
              this.dragItem = -1
              this.scaleItem = -1
            &#125;)
          &#125;)
        &#125;, (item: number) =&gt; item.toString())
      &#125;
      .padding(&#123; left: 20, right: 20 &#125;)
      .width(&#39;100%&#39;)
      .height(&#39;120&#39;)
      .scrollBar(BarState.Off)
      .rowsTemplate(&#39;1fr&#39;)
      .columnsGap(5)
      .editMode(true)
      .edgeEffect(EdgeEffect.Spring)
      .backgroundColor(&#39;#0D182431&#39;)
      .enabled(this.enableScroll)

      // Modified TextInput to ignore drag events
      TextInput(&#123;placeholder: &#39;Add Title&#39;&#125;)
        .width(&#39;100%&#39;)
        .height(200)
      // .visibility(this.isTextInputVisible ? Visibility.Visible : Visibility.Hidden)
      // .onDragMove(() =&gt; &#123;
      // // Hide TextInput
      // this.isTextInputVisible = false
      // &#125;)

      Text(&#39;Delete&#39;)
        .width(&#39;100%&#39;)
        .height(50)
        .backgroundColor(Color.Red)
        .position(&#123; bottom: 0 &#125;)
        .visibility(this.currentY &gt; 580 ? Visibility.Visible : Visibility.Hidden)
        .hitTestBehavior(HitTestMode.None)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .margin(&#123; top: 5 &#125;)
    .backgroundColor(&#39;#0D182431&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-The-error-codes-returned-in-HarmonyOS-Webview’s-onErrorReceive-do-not-match-the-documentation"><a href="#2-The-error-codes-returned-in-HarmonyOS-Webview’s-onErrorReceive-do-not-match-the-documentation" class="headerlink" title="2. The error codes returned in HarmonyOS Webview’s onErrorReceive do not match the documentation."></a>2. The error codes returned in HarmonyOS Webview’s <code>onErrorReceive</code> do not match the documentation.</h4><p>The error codes returned in Webview’s <code>onErrorReceive</code> do not align with the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/errorcode-webview-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/errorcode-webview-V5</a>. Some return <code>-2</code>, others <code>-106</code>, and some <code>-302</code>.  </p>
<p>Refer to the following document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-neterrorlist-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-neterrorlist-V5</a>.  </p>
<h4 id="3-How-to-obtain-the-page-name-and-uniqueness-via-context-common-Context-in-HarmonyOS"><a href="#3-How-to-obtain-the-page-name-and-uniqueness-via-context-common-Context-in-HarmonyOS" class="headerlink" title="3. How to obtain the page name and uniqueness via context: common.Context in HarmonyOS?"></a>3. How to obtain the page name and uniqueness via <code>context: common.Context</code> in HarmonyOS?</h4><ul>
<li>Use <code>router.getstat</code> to get the page name on the current page: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5</a>.  </li>
<li>Use <code>getStringValue</code> to get the identifier: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5</a>.</li>
</ul>
<h4 id="4-How-to-implement-text-animation-effects-in-HarmonyOS-such-as-displaying-text-at-a-specific-position-when-clicked-moving-upward-by-a-certain-distance-and-automatically-hiding-while-supporting-multiple-texts-displayed-in-sequence-with-spacing-based-on-click-intervals-similar-to-danmaku"><a href="#4-How-to-implement-text-animation-effects-in-HarmonyOS-such-as-displaying-text-at-a-specific-position-when-clicked-moving-upward-by-a-certain-distance-and-automatically-hiding-while-supporting-multiple-texts-displayed-in-sequence-with-spacing-based-on-click-intervals-similar-to-danmaku" class="headerlink" title="4. How to implement text animation effects in HarmonyOS, such as displaying text at a specific position when clicked, moving upward by a certain distance, and automatically hiding, while supporting multiple texts displayed in sequence with spacing based on click intervals (similar to danmaku)?"></a>4. How to implement text animation effects in HarmonyOS, such as displaying text at a specific position when clicked, moving upward by a certain distance, and automatically hiding, while supporting multiple texts displayed in sequence with spacing based on click intervals (similar to danmaku)?</h4><p>Implement text animation for the Text component: display text at a specific position when clicked, move upward by a certain distance, and auto-hide. For consecutive quick clicks, display multiple texts that move upward and hide in sequence based on click intervals, similar to danmaku.  </p>
<p>Refer to the following approach:  </p>
<ol>
<li>Create an Image component to show text on click.  </li>
<li>Use <code>@buildParams</code> for text, which appears each time a click occurs.  </li>
<li>Implement text effects with <code>transition</code>.</li>
</ol>
<h4 id="5-How-to-modify-the-output-path-and-name-when-building-an-app-or-hap-in-HarmonyOS"><a href="#5-How-to-modify-the-output-path-and-name-when-building-an-app-or-hap-in-HarmonyOS" class="headerlink" title="5. How to modify the output path and name when building an app or hap in HarmonyOS?"></a>5. How to modify the output path and name when building an app or hap in HarmonyOS?</h4><ul>
<li>For package naming, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-customized-multi-targets-and-products-guides-V5#section329173315468">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-customized-multi-targets-and-products-guides-V5#section329173315468</a>.  </li>
<li>Configure the artifact storage path with <code>ohos.buildDir</code>, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-set-options-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-set-options-V5</a>.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41120-Daily-HarmonyOS-Next-Knowledge-WebView-Event-Listening-Build-Tool-Validation-Rules-Safe-Area-Issues-Grid-Layout-Alignment-String-to-Base64/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41120-Daily-HarmonyOS-Next-Knowledge-WebView-Event-Listening-Build-Tool-Validation-Rules-Safe-Area-Issues-Grid-Layout-Alignment-String-to-Base64/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] WebView Event Listening, Build Tool Validation Rules, Safe Area Issues, Grid Layout Alignment, String to Base64</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:43:34 / Modified: 09:44:02" itemprop="dateCreated datePublished" datetime="2025-06-29T09:43:34+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-WebView-Event-Listening-Build-Tool-Validation-Rules-Safe-Area-Issues-Grid-Layout-Alignment-String-to-Base64"><a href="#Daily-HarmonyOS-Next-Knowledge-WebView-Event-Listening-Build-Tool-Validation-Rules-Safe-Area-Issues-Grid-Layout-Alignment-String-to-Base64" class="headerlink" title="[Daily HarmonyOS Next Knowledge] WebView Event Listening, Build Tool Validation Rules, Safe Area Issues, Grid Layout Alignment, String to Base64"></a>[Daily HarmonyOS Next Knowledge] WebView Event Listening, Build Tool Validation Rules, Safe Area Issues, Grid Layout Alignment, String to Base64</h1><h4 id="1-How-does-HarmonyOS’s-WebView-listen-for-scroll-events-How-can-H5-directly-call-phone-numbers"><a href="#1-How-does-HarmonyOS’s-WebView-listen-for-scroll-events-How-can-H5-directly-call-phone-numbers" class="headerlink" title="1. How does HarmonyOS’s WebView listen for scroll events? How can H5 directly call phone numbers?"></a>1. How does HarmonyOS’s WebView listen for scroll events? How can H5 directly call phone numbers?</h4><p>Code for WebView scroll event listening and phone calling: The first Web component listens for scroll events, and the second Web component calls the phone via H5.  </p>
<pre><code class="language-typescript">// xxx.ets
import webView from &#39;@ohos.web.webview&#39;;
import &#123; call &#125; from &#39;@kit.TelephonyKit&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

@Entry
@Component
struct WebPage &#123;
  controller: webView.WebviewController = new webView.WebviewController();
  aaa: number = 0

  build() &#123;
    Column(&#123; space: 20 &#125;) &#123;
      Web(&#123; src: &#39;https://developer.huawei.com/consumer/cn/&#39;, controller: this.controller &#125;)
        .height(500)
        .javaScriptAccess(true)
        .domStorageAccess(true)
        .verticalScrollBarAccess(true)
        .onScroll((event) =&gt; &#123;
          if (event.yOffset &gt; this.aaa) &#123;
            console.log(&#39;aaa scrolling down&#39;)
          &#125;
          if (this.aaa &gt; event.yOffset) &#123;
            console.log(&#39;aaa scrolling up&#39;);
          &#125;
          this.aaa = event.yOffset
        &#125;)

      Divider()

      Web(&#123; src: $rawfile(&#39;call.html&#39;), controller: this.controller &#125;)
        .height(500)
        .onLoadIntercept((event) =&gt; &#123;
          if (event) &#123;
            let url: string = event.data.getRequestUrl();
            // Check if the link is a dialing link
            if (url.indexOf(&#39;tel://&#39;) === 0) &#123;
              call.makeCall(url.substring(6), (err: BusinessError) =&gt; &#123;
                if (!err) &#123;
                  console.log(&#39;make call success.&#39;);
                &#125; else &#123;
                  console.log(&#39;make call fail, err is:&#39; + JSON.stringify(err));
                &#125;
              &#125;);
              return true;
            &#125;
          &#125;
          return false;
        &#125;)
    &#125;

  &#125;
</code></pre>
<p>call.html:  </p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;body&gt; &lt;div&gt; &lt;a href=&quot;tel://10086&quot;&gt;Call&lt;/a&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;
</code></pre>
<h4 id="2-The-validation-rules-for-macOS-and-Linux-toolchain-builds-are-inconsistent-How-to-modify-them-to-consistent-case-sensitive-rules"><a href="#2-The-validation-rules-for-macOS-and-Linux-toolchain-builds-are-inconsistent-How-to-modify-them-to-consistent-case-sensitive-rules" class="headerlink" title="2. The validation rules for macOS and Linux toolchain builds are inconsistent. How to modify them to consistent case-sensitive rules?"></a>2. The validation rules for macOS and Linux toolchain builds are inconsistent. How to modify them to consistent case-sensitive rules?</h4><p>When only modifying dependencies in <code>dependencies</code> to uppercase while keeping <code>import</code> statements in lowercase, local compilation (macOS) passes, but Linux Commandline packaging fails to find the package.  </p>
<p><strong>Impact</strong>: Developers may mistakenly assume the code is correct after local compilation, leading to pipeline packaging failures.  </p>
<p>Set the <code>strictMode</code> field to <code>true</code> in the configuration file <code>build-profile.json5</code>:  </p>
<pre><code class="language-json5">&quot;strictMode&quot;: &#123;
  &quot;caseSensitiveCheck&quot;: true
&#125;
</code></pre>
<p>The compiler will strictly check the case of imported files, and incorrect file name case will result in compilation errors.<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-build-profile-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-build-profile-V5</a>  </p>
<h4 id="3-Using-expandSafeArea-for-a-HarmonyOS-Web-component-does-not-adapt-the-web-page-rendering-content"><a href="#3-Using-expandSafeArea-for-a-HarmonyOS-Web-component-does-not-adapt-the-web-page-rendering-content" class="headerlink" title="3. Using expandSafeArea for a HarmonyOS Web component does not adapt the web page rendering content."></a>3. Using <code>expandSafeArea</code> for a HarmonyOS Web component does not adapt the web page rendering content.</h4><p>To achieve full-screen web display and hide the status bar and navigation bar, add the following code to avoid safe area adjustments:  </p>
<pre><code class="language-typescript">// 1. Set the window to full screen
let isLayoutFullScreen = true;
windowClass.setWindowLayoutFullScreen(isLayoutFullScreen)
// 2. Set the status bar and navigation bar to hidden
windowClass.setSpecificSystemBarEnabled(&#39;status&#39;, false)
</code></pre>
<p><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114</a>  </p>
<h4 id="4-In-HarmonyOS-Grid-layout-items-are-arranged-by-rows-with-an-unfixed-number-of-columns-and-fixed-GridItem-sizes-How-to-center-all-GridItems-instead-of-left-aligning-them"><a href="#4-In-HarmonyOS-Grid-layout-items-are-arranged-by-rows-with-an-unfixed-number-of-columns-and-fixed-GridItem-sizes-How-to-center-all-GridItems-instead-of-left-aligning-them" class="headerlink" title="4. In HarmonyOS Grid layout, items are arranged by rows with an unfixed number of columns and fixed GridItem sizes. How to center all GridItems instead of left-aligning them?"></a>4. In HarmonyOS Grid layout, items are arranged by rows with an unfixed number of columns and fixed GridItem sizes. How to center all GridItems instead of left-aligning them?</h4><p>To center GridItems relative to the Grid container, use the <code>margin</code> attribute for offset. Set either <code>rowsTemplate</code> or <code>columnsTemplate</code>: elements are arranged in the specified direction, and the Grid can scroll to display overflow content. If <code>rowsTemplate</code> is set, the Grid scrolls horizontally, with the main axis horizontal and the cross axis vertical. The leftmost subcomponent is rendered first.  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Page617 &#123;
  @State message: string = &#39;Hello World&#39;;
  @State numbers1: String[] = [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;]

  build() &#123;
    RelativeContainer() &#123;
      Grid() &#123;
        ForEach(this.numbers1, (day: string) =&gt; &#123;
          ForEach(this.numbers1, (day: string) =&gt; &#123;
            GridItem() &#123;
              Text(day)
                .fontSize(16)
                .backgroundColor(0xF9CF93)
                .width(&#39;50&#39;)
                .height(&#39;50&#39;)
                .textAlign(TextAlign.Center)
            &#125;.margin(&#123; left: 20, right: 20 &#125;)
          &#125;, (day: string) =&gt; day)
        &#125;, (day: string) =&gt; day)
      &#125;

      // .columnsTemplate(&#39;1fr 1fr 1fr&#39;)
      .rowsTemplate(&#39;1fr 1fr 1fr&#39;)
      .columnsGap(20)
      .rowsGap(20)
      .width(&#39;90%&#39;)
      .backgroundColor(0xFAEEE0)
      .height(300)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="5-Calling-base64Helper-decodeSync-to-parse-a-URL-in-HarmonyOS-throws-an-error-Are-there-alternative-methods-to-convert-strings-to-base64"><a href="#5-Calling-base64Helper-decodeSync-to-parse-a-URL-in-HarmonyOS-throws-an-error-Are-there-alternative-methods-to-convert-strings-to-base64" class="headerlink" title="5. Calling base64Helper.decodeSync to parse a URL in HarmonyOS throws an error. Are there alternative methods to convert strings to base64?"></a>5. Calling <code>base64Helper.decodeSync</code> to parse a URL in HarmonyOS throws an error. Are there alternative methods to convert strings to base64?</h4><p>Base64 does not support special characters, which need to be processed first. Consider using <code>TextEncoder</code> and <code>TextDecoder</code> for data handling.<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-util-V5#textencoder">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-util-V5#textencoder</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41121-Daily-HarmonyOS-Next-Knowledge-List-Swipe-Sliding-Conflict-Pull-to-Refresh-Compilation-Error-Location-Lifecycle-Monitoring-App-Market-Listing-Requirements/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41121-Daily-HarmonyOS-Next-Knowledge-List-Swipe-Sliding-Conflict-Pull-to-Refresh-Compilation-Error-Location-Lifecycle-Monitoring-App-Market-Listing-Requirements/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] List+Swipe Sliding Conflict, Pull-to-Refresh, Compilation Error Location, Lifecycle Monitoring, App Market Listing Requirements</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:41:54 / Modified: 09:42:59" itemprop="dateCreated datePublished" datetime="2025-06-29T09:41:54+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-List-Swipe-Sliding-Conflict-Pull-to-Refresh-Compilation-Error-Location-Lifecycle-Monitoring-App-Market-Listing-Requirements"><a href="#Daily-HarmonyOS-Next-Knowledge-List-Swipe-Sliding-Conflict-Pull-to-Refresh-Compilation-Error-Location-Lifecycle-Monitoring-App-Market-Listing-Requirements" class="headerlink" title="[Daily HarmonyOS Next Knowledge] List+Swipe Sliding Conflict, Pull-to-Refresh, Compilation Error Location, Lifecycle Monitoring, App Market Listing Requirements"></a>[Daily HarmonyOS Next Knowledge] List+Swipe Sliding Conflict, Pull-to-Refresh, Compilation Error Location, Lifecycle Monitoring, App Market Listing Requirements</h1><h4 id="1-HarmonyOS-List-Swipe-web-sliding-conflict"><a href="#1-HarmonyOS-List-Swipe-web-sliding-conflict" class="headerlink" title="1. HarmonyOS List+Swipe+web sliding conflict?"></a>1. HarmonyOS List+Swipe+web sliding conflict?</h4><p>When nesting a horizontally sliding Swipe within a List, and then nesting a Web component within Swipe, setting gesture priority may prevent联动 (co联动) interaction between the Web and List.  </p>
<p><strong>Cause</strong>: Sliding conflict may arise from nesting a List component with a Web component. This can be mitigated using touch test control: <code>.hitTestBehavior(HitTestMode.Block)</code>.<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-multi-level-gesture-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-multi-level-gesture-V5</a>  </p>
<h4 id="2-How-to-implement-pull-to-refresh-for-HarmonyOS-Webview"><a href="#2-How-to-implement-pull-to-refresh-for-HarmonyOS-Webview" class="headerlink" title="2. How to implement pull-to-refresh for HarmonyOS Webview?"></a>2. How to implement pull-to-refresh for HarmonyOS Webview?</h4><p>Pull-to-refresh can be achieved using pulltorefresh.<br><strong>Reference Link</strong>: <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Fpulltorefresh">https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Fpulltorefresh</a>  </p>
<h4 id="3-When-compiling-via-Command-Line-how-to-obtain-error-information-or-the-compilation-success-status-in-case-of-errors"><a href="#3-When-compiling-via-Command-Line-how-to-obtain-error-information-or-the-compilation-success-status-in-case-of-errors" class="headerlink" title="3. When compiling via Command Line, how to obtain error information or the compilation success status in case of errors?"></a>3. When compiling via Command Line, how to obtain error information or the compilation success status in case of errors?</h4><ol>
<li><p>When compiling with hvigor, use the following commands to display relevant log information:  </p>
<ul>
<li><code>-d</code> (Set hvigor log level to debug).  </li>
<li><code>--stacktrace</code> (hvigor disables stack trace printing by default; add this option to enable it).<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-commandline-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-commandline-V5</a></li>
</ul>
</li>
<li><p>Command-line compilation returns a status code:  </p>
<ul>
<li>Success: <code>code 0</code>.  </li>
<li>Failure: <code>code 1</code>.<br>Obtain the return code based on the specific platform.</li>
</ul>
</li>
</ol>
<h4 id="4-How-to-monitor-component-lifecycles-for-ordinary-objects-in-HarmonyOS"><a href="#4-How-to-monitor-component-lifecycles-for-ordinary-objects-in-HarmonyOS" class="headerlink" title="4. How to monitor component lifecycles for ordinary objects in HarmonyOS?"></a>4. How to monitor component lifecycles for ordinary objects in HarmonyOS?</h4><p>Refer to: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/7ad8e708cebd3e4a43979e97de160da9c0533316/zh-cn/application-dev/reference/apis/js-apis-arkui-observer.md">https://gitee.com/openharmony/docs/blob/7ad8e708cebd3e4a43979e97de160da9c0533316/zh-cn/application-dev/reference/apis/js-apis-arkui-observer.md</a>  </p>
<pre><code class="language-typescript">// entryability.ets
import window from &#39;@ohos.window&#39;;
import &#123; BusinessError &#125; from &#39;@ohos.base&#39;;


interface Data &#123;
  window: window.Window
&#125;

export default class EntryAbility extends UIAbility &#123;
  private window: window.Window | undefined = undefined
  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void &#123;

    const that: EntryAbility = this
    this.context.eventHub.on(&quot;getWindow&quot;, (data: Data) =&gt; &#123;
      if (that.window != undefined) &#123;
        data.window = that.window
      &#125; else &#123;
        hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;that.subWindowStage == undefined&#39;);
      &#125;
    &#125;)
  &#125;

  onDestroy(): void &#123;
  &#125;

  onWindowStageCreate(windowStage: window.WindowStage): void &#123;
    // Main window is created, set main page for this ability
    hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onWindowStageCreate&#39;);


    windowStage.loadContent(&#39;pages/Index2&#39;, (err, data) =&gt; &#123;
      if (err.code) &#123;
        hilog.error(0x0000, &#39;testTag&#39;, &#39;Failed to load the content. Cause: %&#123;public&#125;s&#39;, JSON.stringify(err) ?? &#39;&#39;);
        return;
      &#125;
      hilog.info(0x0000, &#39;testTag&#39;, &#39;Succeeded in loading the content. Data: %&#123;public&#125;s&#39;, JSON.stringify(data) ?? &#39;&#39;);
      // Get the main window of the application.
      let windowClass: window.Window = window.findWindow(&quot;observer0&quot;);
      this.window = windowClass
      windowStage.getMainWindow((err: BusinessError, data) =&gt; &#123;
        let errCode: number = err.code;
        if (errCode) &#123;
          console.error(&#39;Failed to obtain the main window. Cause: &#39; + JSON.stringify(err));
          return;
        &#125;
      &#125;)
    &#125;);
  &#125;
  onWindowStageDestroy(): void &#123;
  &#125;
&#125;
// index2.ets
import common from &#39;@ohos.app.ability.common&#39;;
import window from &#39;@ohos.window&#39;;
import UIContext, &#123; UIObserver &#125; from &#39;@ohos.ArkUI.UIContext&#39;;
import observer from &#39;@ohos.ArkUI.observer&#39;;
import router from &#39;@ohos.router&#39;;

interface Data11 &#123;
  window: window.Window | null
&#125;

@Entry
@Component
struct Index2 &#123;
  private abilityContext: common.UIAbilityContext | null = null;
  private uiContext: UIContext.UIContext | null = null
  private context = getContext(this) as common.UIAbilityContext;

  testFunc(info: observer.RouterPageInfo) &#123;
    console.log(&quot;[testFunc][UI-in-Pages] called by: Index2: &quot; + `$&#123;info.index&#125;` + &quot;, name: &quot; + `$&#123;info.name&#125;` + &quot;, path: &quot; + `$&#123;info.path&#125;` + &quot;, state: &quot; + `$&#123;info.state&#125;` + &quot;,context: &quot; + `$&#123;info.context&#125;`);
  &#125;
  aboutToAppear() &#123;
    console.log(&quot;[Test] aboutToAppear before createWindow&quot;);
    this.abilityContext = getContext(this) as common.UIAbilityContext;
    let data: Data11 = &#123;
      window: null
    &#125;;
    this.abilityContext.eventHub.emit(&quot;getWindow&quot;, data);
    if (data.window) &#123;
      this.uiContext = data.window.getUIContext()
    &#125; else &#123;
      this.uiContext = null
    &#125;
    router.getState()
  &#125;
  build() &#123;
    Flex(&#123; direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center &#125;) &#123;
      Text(&#39;这是Index&#39;)
        .fontSize(20)
        .fontWeight(FontWeight.Bold)

      Button(&#39;ObserverOn&#39;)
        .margin(&#123; top: 5 &#125;)
        .onClick(() =&gt; &#123;
          let observer: UIObserver | null = this.uiContext ? this.uiContext.getUIObserver() : null
          if (observer) &#123;
            // Register router page monitoring within the current UIContext scope
            console.log(&quot;[Test] set observer to ON&quot;);
            observer.on(&#39;routerPageUpdate&#39;, this.testFunc)
          &#125;
        &#125;)
      Button(&#39;ObserverOff&#39;)
        .margin(&#123; top: 5 &#125;)
        .onClick(() =&gt; &#123;
          let observer: UIObserver | null = this.uiContext ? this.uiContext.getUIObserver() : null
          if (observer) &#123;
            // Register router page monitoring within the current UIContext scope
            console.log(&quot;[Test] set observer to OFF&quot;);
            observer.off(&#39;routerPageUpdate&#39;, this.testFunc)
          &#125;
        &#125;)

      Button(&#39;pushUrl PageOne&#39;)
        .margin(&#123; top: 5 &#125;)
        .onClick(() =&gt; &#123;
          router.pushUrl(&#123;
            url: &#39;pages/PageOne2&#39;,
          &#125;)
        &#125;)

    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(&#39;#FFBFE5C5&#39;)
  &#125;
&#125;
// PageOne2.ets

@Entry
@Component
struct PageOne2 &#123;
  @State message: string = &#39;22222222222&#39;;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="5-What-are-the-conditions-that-the-HarmonyOS-device-fingerprint-App-Market-listing-SDK-must-meet"><a href="#5-What-are-the-conditions-that-the-HarmonyOS-device-fingerprint-App-Market-listing-SDK-must-meet" class="headerlink" title="5. What are the conditions that the HarmonyOS device fingerprint App Market listing SDK must meet?"></a>5. What are the conditions that the HarmonyOS device fingerprint App Market listing SDK must meet?</h4><p>Requirements for listing the SDK on the App Market:  </p>
<ol>
<li>IDE version must be canary4sp1 or above.  </li>
<li>The signing certificate account and the listing SDK account must use an enterprise account to apply for a release certificate via AGC.<br><strong>IDE Signing Guide</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-publish-app-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-publish-app-V5</a><br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.21.png"></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41122-Daily-HarmonyOS-Next-Knowledge-Attribute-Variable-Keys-Waterflow-Lag-Issues-Package-Upload-Failures-Video-Control-Playback-Vue-like-Syntax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41122-Daily-HarmonyOS-Next-Knowledge-Attribute-Variable-Keys-Waterflow-Lag-Issues-Package-Upload-Failures-Video-Control-Playback-Vue-like-Syntax/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Attribute Variable Keys, Waterflow Lag Issues, Package Upload Failures, Video Control Playback, Vue-like Syntax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:40:54 / Modified: 11:19:46" itemprop="dateCreated datePublished" datetime="2025-06-29T09:40:54+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Attribute-Variable-Keys-Waterflow-Lag-Issues-Package-Upload-Failures-Video-Control-Playback-Vue-like-Syntax"><a href="#Daily-HarmonyOS-Next-Knowledge-Attribute-Variable-Keys-Waterflow-Lag-Issues-Package-Upload-Failures-Video-Control-Playback-Vue-like-Syntax" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Attribute Variable Keys, Waterflow Lag Issues, Package Upload Failures, Video Control Playback, Vue-like Syntax"></a>[Daily HarmonyOS Next Knowledge] Attribute Variable Keys, Waterflow Lag Issues, Package Upload Failures, Video Control Playback, Vue-like Syntax</h1><h4 id="1-Can-HarmonyOS-attribute-variable-constants-be-used-as-keys-for-object-objects"><a href="#1-Can-HarmonyOS-attribute-variable-constants-be-used-as-keys-for-object-objects" class="headerlink" title="1. Can HarmonyOS attribute variable constants be used as keys for object objects?"></a>1. Can HarmonyOS attribute variable constants be used as keys for object objects?</h4><p><code>a: object = new Object() this.a[Constants.TEST_KEY] = &quot;456&quot;</code> can be defined first and then assigned.  </p>
<h4 id="2-Clicking-on-the-home-page-to-return-to-the-first-node-of-waterflow-rebuilds-all-nodes-from-0-to-index-causing-lag"><a href="#2-Clicking-on-the-home-page-to-return-to-the-first-node-of-waterflow-rebuilds-all-nodes-from-0-to-index-causing-lag" class="headerlink" title="2. Clicking on the home page to return to the first node of waterflow rebuilds all nodes from 0 to index, causing lag."></a>2. Clicking on the home page to return to the first node of waterflow rebuilds all nodes from 0 to index, causing lag.</h4><p>Using scrollTo recalculates the layout and triggers node reconstruction. Using scrollToIndex can solve this problem.  </p>
<h4 id="3-After-packaging-with-the-new-HarmonyOS-version-the-package-cannot-be-uploaded-remaining-stuck-in-“parsing”-and-then-failing-to-parse"><a href="#3-After-packaging-with-the-new-HarmonyOS-version-the-package-cannot-be-uploaded-remaining-stuck-in-“parsing”-and-then-failing-to-parse" class="headerlink" title="3. After packaging with the new HarmonyOS version, the package cannot be uploaded, remaining stuck in “parsing” and then failing to parse."></a>3. After packaging with the new HarmonyOS version, the package cannot be uploaded, remaining stuck in “parsing” and then failing to parse.</h4><p>This error occurs because the atomic service API call detection fails. Atomic services developed with API 11 and above can only call APIs within the “Atomic Service API Set”.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyoserror-0000001651912985#section182629567266">https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyoserror-0000001651912985#section182629567266</a><br>Check whether the atomic service package calls APIs outside the “Atomic Service API Set”, modify it, repackage, and upload again.<br>Atomic service APIs: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/atomic-references-V5/atomic-apis-intro-V5">https://developer.huawei.com/consumer/cn/doc/atomic-references-V5/atomic-apis-intro-V5</a>  </p>
<h4 id="4-After-placing-a-video-in-the-resource-directory-of-a-HarmonyOS-har-and-introducing-the-har-into-the-project-the-video-cannot-be-played-via-the-Video-control"><a href="#4-After-placing-a-video-in-the-resource-directory-of-a-HarmonyOS-har-and-introducing-the-har-into-the-project-the-video-cannot-be-played-via-the-Video-control" class="headerlink" title="4. After placing a video in the resource directory of a HarmonyOS har and introducing the har into the project, the video cannot be played via the Video control."></a>4. After placing a video in the resource directory of a HarmonyOS har and introducing the har into the project, the video cannot be played via the Video control.</h4><p>After obtaining resources from the har using getContext().resourceManager.getRawFileContentSync, it is found that the Video control does not support setting resources via byte streams, resulting in the inability to play videos in the har.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-media-components-video-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-media-components-video-V5</a><br>Currently, byte stream playback is not supported; please directly pass in resources.<br>It is recommended to expose resources in the har as interface return values in the form of resource return values.  </p>
<h4 id="5-Is-there-a-method-in-HarmonyOS-similar-to-Vue’s-this-nextTick"><a href="#5-Is-there-a-method-in-HarmonyOS-similar-to-Vue’s-this-nextTick" class="headerlink" title="5. Is there a method in HarmonyOS similar to Vue’s this.$nextTick?"></a>5. Is there a method in HarmonyOS similar to Vue’s this.$nextTick?</h4><p>Is there a method similar to Vue’s this.$nextTick?  </p>
<pre><code>this.getUIContext().getUIInspector().createComponentObserver(&quot;Page13HelloWorld&quot;).on(&quot;draw&quot;, () =&gt; &#123;
  console.log(&quot;testTag - draw&quot;)
  let utils = this.getUIContext().getComponentUtils()
  let com = utils.getRectangleById(&quot;Page13HelloWorld&quot;)
  console.log(&quot;testTag - draw - height : &quot;+ com.size.height );
</code></pre>
<p>This interface can listen for component refreshes.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">347</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
