<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/16/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/16/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/115-Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/115-Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Animated GIF Looping, Tab Switch Monitoring, Rich Text Scroll, Tab Default Centering, A Tag Calling Dialer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:42:10 / Modified: 09:50:05" itemprop="dateCreated datePublished" datetime="2025-06-27T08:42:10+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer"><a href="#Daily-HarmonyOS-Next-Knowledge-Animated-GIF-Looping-Tab-Switch-Monitoring-Rich-Text-Scroll-Tab-Default-Centering-A-Tag-Calling-Dialer" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Animated GIF Looping, Tab Switch Monitoring, Rich Text Scroll, Tab Default Centering, A Tag Calling Dialer"></a>[Daily HarmonyOS Next Knowledge] Animated GIF Looping, Tab Switch Monitoring, Rich Text Scroll, Tab Default Centering, A Tag Calling Dialer</h3><h4 id="1-Image-loads-a-network-animated-GIF-that-stops-playing-after-one-loop-How-to-set-loop-play"><a href="#1-Image-loads-a-network-animated-GIF-that-stops-playing-after-one-loop-How-to-set-loop-play" class="headerlink" title="1. Image loads a network animated GIF that stops playing after one loop. How to set loop play?"></a>1. Image loads a network animated GIF that stops playing after one loop. How to set loop play?</h4><p>Currently, ArkUI does not support setting the loop count for GIF images. You can use the third-party library <code>ohos-gif-drawable</code> to set the loop count. Update the loop count in the callback method <code>getLoopFinish()</code> after one play ends, and set the play rate <code>setSpeedFactor()</code> to 0 to stop playing when the specified count is reached.  </p>
<p><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_gif-drawable">https://gitee.com/openharmony-sig/ohos_gif-drawable</a><br><code>ohos-gif-drawable</code> is drawn based on Canvas, with main capabilities including:  </p>
<ul>
<li>Support for playing GIF images.  </li>
<li>Support for controlling GIF play&#x2F;pause.  </li>
<li>Support for resetting GIF play animation.  </li>
<li>Support for adjusting GIF play rate.  </li>
<li>Support for listening to callbacks after all GIF frames are displayed.  </li>
<li>Support for setting display size.  </li>
<li>Support for 7 different display types.  </li>
<li>Support for setting the display area background color.</li>
</ul>
<h4 id="2-How-to-monitor-when-a-TabContent-page-is-switched-to-in-HarmonyOS"><a href="#2-How-to-monitor-when-a-TabContent-page-is-switched-to-in-HarmonyOS" class="headerlink" title="2. How to monitor when a TabContent page is switched to in HarmonyOS?"></a>2. How to monitor when a TabContent page is switched to in HarmonyOS?</h4><p>When switching TabContent pages, how to monitor that the current page is active? Does switching trigger the lifecycle methods of the page in TabContent?  </p>
<p>Use the <code>onTabBarClick</code> event.<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabs-V5</a><br>Tab switching should trigger the component-level lifecycle <code>aboutToAppear</code> of the child component.  </p>
<h4 id="3-Can-HarmonyOS-RichText-slide-left-and-up"><a href="#3-Can-HarmonyOS-RichText-slide-left-and-up" class="headerlink" title="3. Can HarmonyOS RichText slide left and up?"></a>3. Can HarmonyOS RichText slide left and up?</h4><p>Use the Web component for display.<br><strong>Reference Link</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5</a>  </p>
<pre><code class="language-typescript">// xxx.ets
import &#123; webview &#125; from &#39;@kit.ArkWeb&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

@Entry
@Component
struct WebComponent &#123;
  controller: webview.WebviewController = new webview.WebviewController();

  build() &#123;
    Column() &#123;
      Button(&#39;loadData&#39;)
        .onClick(() =&gt; &#123;
          try &#123;
            this.controller.loadData(
              &quot;&lt;html&gt;&lt;body&gt; &lt;p style=\&quot;font-size: 100; color: #999999;\&quot;&gt;我是一个richtext&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;,
              &quot;text/html&quot;,
              &quot;UTF-8&quot;, &quot; &quot;, &quot; &quot; // If there are special characters like #, the last two parameters should be changed to a space
            );
            this.controller.setScrollable(false); // Set whether to enable scrolling
          &#125; catch (error) &#123;
            console.error(`ErrorCode: $&#123;(error as BusinessError).code&#125;,  Message: $&#123;(error as BusinessError).message&#125;`);
          &#125;
        &#125;)
      Web(&#123; src: &#39;&#39;, controller: this.controller &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-implement-horizontal-tab-quick-scrolling-in-HarmonyOS-with-tabs-automatically-centered-and-selected-after-stopping"><a href="#4-How-to-implement-horizontal-tab-quick-scrolling-in-HarmonyOS-with-tabs-automatically-centered-and-selected-after-stopping" class="headerlink" title="4. How to implement horizontal tab quick scrolling in HarmonyOS, with tabs automatically centered and selected after stopping?"></a>4. How to implement horizontal tab quick scrolling in HarmonyOS, with tabs automatically centered and selected after stopping?</h4><p>In the List component, use the <code>.scrollSnapAlign(ScrollSnapAlign.CENTER)</code> property of the <code>onScrollIndex</code> method to achieve centering. To position the tab to the middle of the visible area after scrolling stops, use the <code>onScrollStop</code> event to listen for the stop and adjust the position. To keep it centered in the visible area, directly position it to the middle.<br><strong>Reference Link</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#ZH-CN_TOPIC_0000001930756925__onscrollindex">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#ZH-CN_TOPIC_0000001930756925__onscrollindex</a>  </p>
<h4 id="5-Using-the-element-in-an-H5-page-to-invoke-the-system-dialer-does-not-work-in-HarmonyOS-Next"><a href="#5-Using-the-element-in-an-H5-page-to-invoke-the-system-dialer-does-not-work-in-HarmonyOS-Next" class="headerlink" title="5. Using the &lt;a&gt; element in an H5 page to invoke the system dialer does not work in HarmonyOS Next."></a>5. Using the <code>&lt;a&gt;</code> element in an H5 page to invoke the system dialer does not work in HarmonyOS Next.</h4><p>Possible reasons include:  </p>
<ul>
<li><strong>Page loading issues</strong>: If the <code>system.onmessage</code> function in the H5 page has complex logic and relies on external JS library references, incomplete page loading may prevent the system dialer from being called. In this case, trigger the system dialer in the <code>onpagefinish</code> event handler.  </li>
<li><strong>System permission issues</strong>: Ensure the device has enabled the system dialer and the app has the corresponding permissions. Check the app permission configuration in device settings.  </li>
<li><strong>Network issues</strong>: Ensure the device is connected to a network with normal connectivity.  </li>
<li><strong>Page loading order issues</strong>: If the page has resources to load (e.g., images, scripts), the system dialer may not be called until these resources finish loading. Place the system dialer code after resource loading is complete.  </li>
<li><strong>Page lifecycle issues</strong>:  <ul>
<li>Ensure page lifecycle events (e.g., <code>onload</code>, <code>onready</code>) are handled correctly to trigger the system dialer after page loading.  </li>
<li>Check the page loading order to execute the system dialer code after resources are loaded.  </li>
<li>Set page lifecycle events to trigger the system dialer using <code>onload</code> or <code>onready</code> after page loading.  </li>
<li>Verify system permissions in device settings to ensure the app can call the system dialer.  </li>
<li>Ensure the device is connected to a network with normal connectivity.</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/114-Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/114-Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screenshot Component for Lists, Toggle Component, Web Component Request Headers, List Selection Popup, Game Acceleration</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:41:22 / Modified: 09:50:18" itemprop="dateCreated datePublished" datetime="2025-06-27T08:41:22+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration"><a href="#Daily-HarmonyOS-Next-Knowledge-Screenshot-Component-for-Lists-Toggle-Component-Web-Component-Request-Headers-List-Selection-Popup-Game-Acceleration" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screenshot Component for Lists, Toggle Component, Web Component Request Headers, List Selection Popup, Game Acceleration"></a>[Daily HarmonyOS Next Knowledge] Screenshot Component for Lists, Toggle Component, Web Component Request Headers, List Selection Popup, Game Acceleration</h3><h4 id="1-How-does-HarmonyOS-handle-screenshotting-components-that-exceed-the-screen-such-as-lists-and-scrollable-content-using-componentSnapshot"><a href="#1-How-does-HarmonyOS-handle-screenshotting-components-that-exceed-the-screen-such-as-lists-and-scrollable-content-using-componentSnapshot" class="headerlink" title="1. How does HarmonyOS handle screenshotting components that exceed the screen, such as lists and scrollable content, using componentSnapshot?"></a>1. How does HarmonyOS handle screenshotting components that exceed the screen, such as lists and scrollable content, using componentSnapshot?</h4><p>The official componentSnapshot currently does not support capturing ultra-long images of components beyond the screen. For details, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5</a>  </p>
<p>This module provides the ability to capture screenshots of components, including both loaded and unloaded components. Component screenshots can only capture the area within the component’s size. If the component or its child components are drawn beyond their defined areas, the content outside the component’s area will not appear in the screenshot. Sibling nodes stacked within the component’s area will not be displayed in the screenshot.  </p>
<p><strong>Alternative solutions</strong>:  </p>
<ol>
<li>When capturing the screen, control the scroll coordinates of the list or scrollable content to take multiple screenshots, then stitch the images together.  </li>
<li>Draw all UI components in the view onto a canvas, then capture the entire canvas to obtain the image.</li>
</ol>
<h4 id="2-When-switching-dark-mode-within-the-onChange-callback-of-the-HarmonyOS-Toggle-component-the-callback-triggers-twice-with-opposite-states-How-to-handle-this"><a href="#2-When-switching-dark-mode-within-the-onChange-callback-of-the-HarmonyOS-Toggle-component-the-callback-triggers-twice-with-opposite-states-How-to-handle-this" class="headerlink" title="2. When switching dark mode within the onChange callback of the HarmonyOS Toggle component, the callback triggers twice with opposite states. How to handle this?"></a>2. When switching dark mode within the onChange callback of the HarmonyOS Toggle component, the callback triggers twice with opposite states. How to handle this?</h4><p>Clicking the Toggle switch on the page correctly switches the page to dark mode, but the switch state of the button remains unchanged. Investigation shows the callback triggers twice with conflicting states. How to ensure callback correctness in this scenario?  </p>
<p><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TogglePage2 &#123;
  @State isDarkMode: boolean = false
  build() &#123;
    Column() &#123;
      Toggle(&#123; type: ToggleType.Switch, isOn: this.isDarkMode &#125;) // Do not omit the isOn property when the page refresh is triggered.
        .onChange((isOn: boolean) =&gt; &#123;
          console.log(&#39;Toggle.onChange2： isOn&#39;, isOn)
          this.isDarkMode = isOn
          getContext(this).getApplicationContext().setColorMode(this.isDarkMode ? 0 : 1) // Triggers secondary rendering. If isOn is not assigned, the default value (false) will cause incorrect state.
        &#125;)
    &#125;.width(&quot;100%&quot;).height(&quot;100%&quot;).padding(32)
  &#125;
&#125;
</code></pre>
<p><strong>Note</strong>: Do not omit the isOn property of Toggle in scenarios that trigger secondary rendering. Secondary rendering reads the default value, and omitting isOn will use the default value (false), leading to incorrect toggle states.  </p>
<h4 id="3-How-to-attach-request-headers-to-the-HarmonyOS-Web-component"><a href="#3-How-to-attach-request-headers-to-the-HarmonyOS-Web-component" class="headerlink" title="3. How to attach request headers to the HarmonyOS Web component?"></a>3. How to attach request headers to the HarmonyOS Web component?</h4><p>Write the loadUrl method within the Web component’s lifecycle:  </p>
<pre><code class="language-typescript">Web(&#123; src: &quot;&quot;, controller: this.controller &#125;)
  .onControllerAttached(() =&gt; &#123;
    this.controller.loadUrl(&quot;xxxxxxxxx&quot;, header)
  &#125;)
</code></pre>
<h4 id="4-How-to-customize-the-style-of-the-HarmonyOS-list-selection-popup-ActionSheet"><a href="#4-How-to-customize-the-style-of-the-HarmonyOS-list-selection-popup-ActionSheet" class="headerlink" title="4. How to customize the style of the HarmonyOS list selection popup (ActionSheet)?"></a>4. How to customize the style of the HarmonyOS list selection popup (ActionSheet)?</h4><p>ActionSheet does not provide a custom style interface. For custom styles, use the CustomDialog component: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a>  </p>
<p>Display custom popups using the CustomDialogController class. Custom popups are preferred for easier style and content customization.  </p>
<h4 id="5-Does-HarmonyOS-support-game-loading-with-the-TBS-X5-kernel"><a href="#5-Does-HarmonyOS-support-game-loading-with-the-TBS-X5-kernel" class="headerlink" title="5. Does HarmonyOS support game loading with the TBS (X5) kernel?"></a>5. Does HarmonyOS support game loading with the TBS (X5) kernel?</h4><p>You can try using the system’s native webview component.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/113-Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/113-Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Scheme Launching App, List Refresh, Web File Download, Adaptive to Child Elements</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:40:35 / Modified: 08:40:49" itemprop="dateCreated datePublished" datetime="2025-06-27T08:40:35+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Scheme-Launching-App-List-Refresh-Web-File-Download-Adaptive-to-Child-Elements" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Scheme Launching App, List Refresh, Web File Download, Adaptive to Child Elements"></a>[Daily HarmonyOS Next Knowledge] Web Scheme Launching App, List Refresh, Web File Download, Adaptive to Child Elements</h3><h4 id="1-Does-HarmonyOS-currently-support-launching-an-app-via-web-Scheme-in-the-app"><a href="#1-Does-HarmonyOS-currently-support-launching-an-app-via-web-Scheme-in-the-app" class="headerlink" title="1. Does HarmonyOS currently support launching an app via web Scheme in the app?"></a>1. Does HarmonyOS currently support launching an app via web Scheme in the app?</h4><p>Deeplink is supported. Add a button on the web page to guide users to launch the app. The web side directly prompts an “Open App” button bound to the click event <code>window.open(tzptest://www.xxxxx.com?url=XXX)</code>. Clicking this button will open the URL <code>tzptest://www.xxxxx.com?url=XXX</code> received by the web端.  </p>
<p>For the app to be successfully launched, configure the <code>skills</code> of <code>abilities</code> in the project’s <code>model.json5</code> file:  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;actions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;ohos.want.action.viewData&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;uris&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;scheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tzptest&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Notes**<span class="punctuation">:</span>  </span><br><span class="line">- The `scheme` protocol header of the deeplink link must match the app configuration for web launching.  </span><br><span class="line">- Browsers do not parse or process deeplink links<span class="punctuation">,</span> but pass them to the launched app intact. Therefore<span class="punctuation">,</span> third-party apps only need to negotiate URL rules between the web and app sides and parse them to open the corresponding page.  </span><br><span class="line"></span><br><span class="line">Reference<span class="punctuation">:</span> Implicit Want to launch the app<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/want-overview-V5  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">2.</span> How to refresh list data based on the list&#x27;s title in HarmonyOS?  </span><br><span class="line">Refer to the following demo for implementation<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index <span class="punctuation">&#123;</span></span><br><span class="line">  @State focusIndex<span class="punctuation">:</span> number = <span class="number">0</span>;</span><br><span class="line">  private controller<span class="punctuation">:</span> TabsController = new TabsController();</span><br><span class="line">  tabArray = <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Custom tab</span></span><br><span class="line">  @Builder</span><br><span class="line">  Tab(tabName<span class="punctuation">:</span> string<span class="punctuation">,</span> tabItem<span class="punctuation">:</span> number<span class="punctuation">,</span> tabIndex<span class="punctuation">:</span> number) <span class="punctuation">&#123;</span></span><br><span class="line">    Column(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">20</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">      Text(tabName).fontSize(<span class="number">18</span>)</span><br><span class="line">      Image($r(&#x27;app.media.icon&#x27;)).width(<span class="number">20</span>).height(<span class="number">20</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .width(<span class="number">100</span>)</span><br><span class="line">    .height(<span class="number">60</span>)</span><br><span class="line">    .borderRadius(<span class="punctuation">&#123;</span> topLeft<span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span> topRight<span class="punctuation">:</span> <span class="number">10</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">    .onClick(() =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      this.controller.changeIndex(tabIndex);</span><br><span class="line">      this.focusIndex = tabIndex;</span><br><span class="line">    <span class="punctuation">&#125;</span>)</span><br><span class="line">    .backgroundColor(tabIndex === this.focusIndex ? &#x27;#ffffffff&#x27; <span class="punctuation">:</span> &#x27;#ffb7b7b7&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column() <span class="punctuation">&#123;</span></span><br><span class="line">      Column() <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// Tabs</span></span><br><span class="line">        Row(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">6</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          Scroll() <span class="punctuation">&#123;</span></span><br><span class="line">            Row() <span class="punctuation">&#123;</span></span><br><span class="line">              ForEach(this.tabArray<span class="punctuation">,</span> (item<span class="punctuation">:</span> number<span class="punctuation">,</span> index<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">                this.Tab(&#x27;Page &#x27; + item<span class="punctuation">,</span> item<span class="punctuation">,</span> index);</span><br><span class="line">              <span class="punctuation">&#125;</span>)</span><br><span class="line">            <span class="punctuation">&#125;</span>.margin(<span class="punctuation">&#123;</span> right<span class="punctuation">:</span> <span class="number">80</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">            .justifyContent(FlexAlign.Start)</span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="comment">// Set left alignment</span></span><br><span class="line">          .align(Alignment.Start)</span><br><span class="line">          .scrollable(ScrollDirection.Horizontal)</span><br><span class="line">          .scrollBar(BarState.Off)</span><br><span class="line">          .width(&#x27;<span class="number">80</span>%&#x27;)</span><br><span class="line">          .backgroundColor(&#x27;#ffb7b7b7&#x27;)</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">        .backgroundColor(&#x27;#ffb7b7b7&#x27;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Tabs content</span></span><br><span class="line">        Tabs(<span class="punctuation">&#123;</span> barPosition<span class="punctuation">:</span> BarPosition.Start<span class="punctuation">,</span> controller<span class="punctuation">:</span> this.controller <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.tabArray<span class="punctuation">,</span> (item<span class="punctuation">:</span> number<span class="punctuation">,</span> index<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            TabContent() <span class="punctuation">&#123;</span></span><br><span class="line">              Text(&#x27; Content of Page &#x27; + item)</span><br><span class="line">                .height(<span class="number">300</span>)</span><br><span class="line">                .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">                .fontSize(<span class="number">30</span>)</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">            .backgroundColor(Color.Pink)</span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        .barHeight(<span class="number">0</span>)</span><br><span class="line">        .animationDuration(<span class="number">100</span>)</span><br><span class="line">        .onChange((index<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.log(&#x27;foo change&#x27;);</span><br><span class="line">          this.focusIndex = index;</span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .alignItems(HorizontalAlign.Start)</span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">3.</span> No response when clicking to download files in HarmonyOS Web?  </span><br><span class="line">Set all Web permissions to `<span class="literal"><span class="keyword">true</span></span>`<span class="punctuation">,</span> then debug whether the download is successfully triggered on the page. For debugging the page<span class="punctuation">,</span> refer to<span class="punctuation">:</span> Using Devtools to debug front-end pages<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-debugging-with-devtools-V5  </span></span><br><span class="line"></span><br><span class="line">The Web component supports front-end page debugging using DevTools. DevTools is a Web front-end development debugging tool that enables debugging of mobile device front-end pages on a computer. Developers enable Web component front-end page debugging via the `setWebDebuggingAccess()` interface. DevTools can debug front-end web pages on mobile devices (device version <span class="number">4.1</span><span class="number">.0</span> and above).  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">4.</span> How to use `any` in HarmonyOS .ets files?  </span><br><span class="line">Use `ESObject` as an alternative to `any`. Understand the usage scenarios of `ESObject` via the links<span class="punctuation">:</span>  </span><br><span class="line">- https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-coding-9-V5  </span></span><br><span class="line">- https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/typescript-to-arkts-migration-guide-V5#%E9%99%90%E5%88%B6%E4%BD%BF%E7%94%A8esobject%E7%B1%BB%E5%9E%8B  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">5.</span> How does the HarmonyOS Grid component adapt its height to child elements?  </span><br><span class="line">Expect the Grid component&#x27;s overall height to be determined by the total height of its internal elements without a scrollbar. Can this be achieved? (Internal element heights are uncertain<span class="punctuation">,</span> so the Grid height cannot be fixed.)  </span><br><span class="line"></span><br><span class="line">Refer to the following demo<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct GridExample <span class="punctuation">&#123;</span></span><br><span class="line">  @State numbers<span class="punctuation">:</span> String<span class="punctuation">[</span><span class="punctuation">]</span> = <span class="punctuation">[</span>&#x27;<span class="number">0</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">1</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">2</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">3</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">4</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">5</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">6</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">7</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">8</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">9</span>&#x27;<span class="punctuation">]</span></span><br><span class="line">  scroller<span class="punctuation">:</span> Scroller = new Scroller()</span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">      Text(&#x27;scroll&#x27;).fontColor(<span class="number">0xCCCCCC</span>).fontSize(<span class="number">9</span>).width(&#x27;<span class="number">90</span>%&#x27;)</span><br><span class="line">      Grid(this.scroller) <span class="punctuation">&#123;</span></span><br><span class="line">        ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            GridItem() <span class="punctuation">&#123;</span></span><br><span class="line">              Text(day)</span><br><span class="line">                .fontSize(<span class="number">16</span>)</span><br><span class="line">                .backgroundColor(<span class="number">0xF9CF93</span>)</span><br><span class="line">                .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">                .height(<span class="number">80</span>)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .columnsTemplate(&#x27;<span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr&#x27;)</span><br><span class="line">      .columnsGap(<span class="number">10</span>)</span><br><span class="line">      .rowsGap(<span class="number">10</span>)</span><br><span class="line">      .onScrollIndex((first<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">        console.info(first.toString())</span><br><span class="line">      <span class="punctuation">&#125;</span>)</span><br><span class="line">      .width(&#x27;<span class="number">80</span>%&#x27;)</span><br><span class="line">      .layoutDirection(GridDirection.Row)</span><br><span class="line">      .maxCount(<span class="number">3</span>)</span><br><span class="line">      .backgroundColor(<span class="number">0xFAEEE0</span>)</span><br><span class="line">      .scrollBarWidth(<span class="number">0</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span>.width(&#x27;<span class="number">100</span>%&#x27;).margin(<span class="punctuation">&#123;</span> top<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a scroll layout to the outer layer</span></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct GridExample <span class="punctuation">&#123;</span></span><br><span class="line">  @State numbers<span class="punctuation">:</span> String<span class="punctuation">[</span><span class="punctuation">]</span> = <span class="punctuation">[</span>&#x27;<span class="number">0</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">1</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">2</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">3</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">4</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">5</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">6</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">7</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">8</span>&#x27;<span class="punctuation">,</span> &#x27;<span class="number">9</span>&#x27;<span class="punctuation">]</span></span><br><span class="line">  scroller<span class="punctuation">:</span> Scroller = new Scroller()</span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Scroll() <span class="punctuation">&#123;</span></span><br><span class="line">      Column(<span class="punctuation">&#123;</span> space<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>) <span class="punctuation">&#123;</span></span><br><span class="line">        Text(&#x27;scroll&#x27;).fontColor(<span class="number">0xCCCCCC</span>).fontSize(<span class="number">9</span>).width(&#x27;<span class="number">90</span>%&#x27;)</span><br><span class="line">        Grid(this.scroller) <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            ForEach(this.numbers<span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">              GridItem() <span class="punctuation">&#123;</span></span><br><span class="line">                Text(day)</span><br><span class="line">                  .fontSize(<span class="number">16</span>)</span><br><span class="line">                  .backgroundColor(<span class="number">0xF9CF93</span>)</span><br><span class="line">                  .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">                  .height(<span class="number">80</span>)</span><br><span class="line">                  .textAlign(TextAlign.Center)</span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span> (day<span class="punctuation">:</span> string) =&gt; day)</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        .columnsTemplate(&#x27;<span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr&#x27;)</span><br><span class="line">        .columnsGap(<span class="number">10</span>)</span><br><span class="line">        .rowsGap(<span class="number">10</span>)</span><br><span class="line">        .onScrollIndex((first<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">          console.info(first.toString())</span><br><span class="line">        <span class="punctuation">&#125;</span>)</span><br><span class="line">        .width(&#x27;<span class="number">80</span>%&#x27;)</span><br><span class="line">        .layoutDirection(GridDirection.Row)</span><br><span class="line">        .maxCount(<span class="number">3</span>)</span><br><span class="line">        .backgroundColor(<span class="number">0xFAEEE0</span>)</span><br><span class="line">        .scrollBarWidth(<span class="number">0</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span>.width(&#x27;<span class="number">100</span>%&#x27;).margin(<span class="punctuation">&#123;</span> top<span class="punctuation">:</span> <span class="number">5</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .scrollBarWidth(<span class="number">0</span>)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/112-Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/112-Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Handwriting Electronic Signature, Waterfall Layout String Height Acquisition, WaterFlow Crash, Web Scrolling Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:39:51 / Modified: 09:50:22" itemprop="dateCreated datePublished" datetime="2025-06-27T08:39:51+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Handwriting-Electronic-Signature-Waterfall-Layout-String-Height-Acquisition-WaterFlow-Crash-Web-Scrolling-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Handwriting Electronic Signature, Waterfall Layout String Height Acquisition, WaterFlow Crash, Web Scrolling Issues"></a>[Daily HarmonyOS Next Knowledge] Handwriting Electronic Signature, Waterfall Layout String Height Acquisition, WaterFlow Crash, Web Scrolling Issues</h3><h4 id="1-Does-HarmonyOS-have-a-demo-for-handwriting-electronic-signatures-and-generating-images"><a href="#1-Does-HarmonyOS-have-a-demo-for-handwriting-electronic-signatures-and-generating-images" class="headerlink" title="1. Does HarmonyOS have a demo for handwriting electronic signatures and generating images?"></a>1. Does HarmonyOS have a demo for handwriting electronic signatures and generating images?</h4><p>Is there a demo for handwriting electronic signatures and generating images? We hope to have one.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/handwritingtoimage">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/handwritingtoimage</a>  </p>
<h4 id="2-How-to-get-the-height-of-a-string-in-HarmonyOS-waterfall-layout"><a href="#2-How-to-get-the-height-of-a-string-in-HarmonyOS-waterfall-layout" class="headerlink" title="2. How to get the height of a string in HarmonyOS waterfall layout?"></a>2. How to get the height of a string in HarmonyOS waterfall layout?</h4><p>Use the component area event <code>onAreaChange(event: (oldValue: Area, newValue: Area) =&gt; void)</code> to get the overall height of the Text component.  </p>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5#onareachange">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5#onareachange</a>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onAreaChange</span>(<span class="attr">event</span>: <span class="function">(<span class="params"><span class="attr">oldValue</span>: <span class="title class_">Area</span>, <span class="attr">newValue</span>: <span class="title class_">Area</span></span>) =&gt;</span> <span class="built_in">void</span>): T</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- This callback is triggered when the component area changes, responding only to changes in component size and position caused by layout changes.  </span></span><br><span class="line"><span class="string">- It does not respond to rendering property changes (e.g., translate, offset) or position changes determined by rendering (e.g., bindSheet).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS WaterFlow crashes when used with WaterFlowSection?  </span></span><br><span class="line"><span class="string">When using WaterFlow + WaterFlowSection as the `</span>customList<span class="string">` of PicturePullDownRefresh, a crash occurs during initialization.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Solution: In the WaterFlowSource.ets page, change `</span><span class="keyword">let</span> r = <span class="variable language_">this</span>.<span class="property">mSections</span>.<span class="title function_">update</span>(index, update)<span class="string">` to `</span><span class="keyword">let</span> r = <span class="variable language_">this</span>.<span class="property">mSections</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>, [update])<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Web component nested scrolling: When web content exceeds the screen length, the bottom content cannot scroll联动 (联动)?  </span></span><br><span class="line"><span class="string">- **Fixed header and footer**: Add an internal height to the outermost Column.  </span></span><br><span class="line"><span class="string">  `</span><span class="string">``</span>typescript</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="comment">/// </span></span><br><span class="line">  &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(&#123; <span class="attr">bottom</span>: <span class="number">40</span> &#125;)</span><br><span class="line">  <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- **Header and footer scroll with web content**: Place the header and footer inside the Scroll component.  </span></span><br><span class="line"><span class="string">  `</span><span class="string">``</span>typescript</span><br><span class="line">  <span class="title class_">Web</span>(&#123;</span><br><span class="line">    <span class="attr">src</span>: $rawfile(<span class="string">&quot;aa.html&quot;</span>),</span><br><span class="line">    <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">SYNC_RENDER</span></span><br><span class="line">  &#125;)</span><br><span class="line">    .<span class="title function_">layoutMode</span>(<span class="title class_">WebLayoutMode</span>.<span class="property">FIT_CONTENT</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">zoomAccess</span>(<span class="literal">false</span>)</span><br><span class="line">    .<span class="title function_">nestedScroll</span>(&#123;</span><br><span class="line">      <span class="attr">scrollForward</span>: <span class="title class_">NestedScrollMode</span>.<span class="property">SELF_FIRST</span>,</span><br><span class="line">      <span class="attr">scrollBackward</span>: <span class="title class_">NestedScrollMode</span>.<span class="property">SELF_FIRST</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Cannot get `</span><span class="variable language_">this</span><span class="string">` in HarmonyOS NodeController&#x27;s onTouchEvent function?  </span></span><br><span class="line"><span class="string">Using QueryImageNodeController (inherited from NodeController), which maintains a `</span>nodeArray<span class="string">`. When `</span>onTouchEvent<span class="string">` is called after a click, a crash occurs: `</span><span class="title class_">Cannot</span> read property nodeArray <span class="keyword">of</span> <span class="literal">undefined</span><span class="string">`. Why is `</span><span class="variable language_">this</span><span class="string">` undefined? Without `</span><span class="variable language_">this</span><span class="string">`, operations after clicking cannot be completed.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">QueryImageNodeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">NodeController</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">rootNode</span>?: <span class="title class_">FrameNode</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">nodeArray</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ImageNode</span>&gt; = []</span><br><span class="line">  <span class="attr">queryImageTouchCallBack</span>?: <span class="title class_">QueryImageTouchCallBack</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">makeNode</span>(<span class="attr">uiContext</span>: <span class="title class_">UIContext</span>): <span class="title class_">FrameNode</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rootNode</span> = <span class="keyword">new</span> <span class="title class_">FrameNode</span>(uiContext)</span><br><span class="line">    <span class="keyword">const</span> rootRenderNode = <span class="variable language_">this</span>.<span class="property">rootNode</span>.<span class="title function_">getRenderNode</span>()</span><br><span class="line">    <span class="keyword">if</span> (rootRenderNode) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">nodeArray</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        rootRenderNode.<span class="title function_">appendChild</span>(item.<span class="property">renderNode</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">rootNode</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onTouchEvent?(<span class="attr">event</span>: <span class="title class_">TouchEvent</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="variable language_">this</span>  <span class="comment">// Store `this` in a closure variable</span></span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">type</span> === <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (event.<span class="property">touches</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> lastTouch = event.<span class="property">touches</span>[event.<span class="property">touches</span>.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">let</span> x = lastTouch.<span class="property">x</span></span><br><span class="line">        <span class="keyword">let</span> y = lastTouch.<span class="property">y</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">nodeArray</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node, index</span>) =&gt;</span> &#123; </span><br><span class="line">          <span class="comment">// `this` may be undefined here; use `that` instead</span></span><br><span class="line">          <span class="keyword">let</span> box = node.<span class="property">boxItem</span>?.<span class="property">box</span></span><br><span class="line">          <span class="keyword">if</span> (!box) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (x &gt; box.<span class="property">x1</span> &amp;&amp; x &lt; box.<span class="property">x2</span> &amp;&amp; y &gt; box.<span class="property">y1</span> &amp;&amp; y &lt; box.<span class="property">y3</span>) &#123;</span><br><span class="line">            that.<span class="property">queryImageTouchCallBack</span>?.<span class="title function_">onRectTouch</span>(node.<span class="property">boxItem</span>?.<span class="property">questionIndex</span> ?? <span class="number">0</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/111-Daily-HarmonyOS-Next-Knowledge-Web-Page-Height-Acquisition-Action-Menu-Bottom-Layout-Animation-Issues-Web-Cross-Origin-Image-Loading-System-Dark-Mode-Immunity/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/111-Daily-HarmonyOS-Next-Knowledge-Web-Page-Height-Acquisition-Action-Menu-Bottom-Layout-Animation-Issues-Web-Cross-Origin-Image-Loading-System-Dark-Mode-Immunity/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Page Height Acquisition, Action Menu Bottom Layout, Animation Issues, Web Cross-Origin Image Loading, System Dark Mode Immunity</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:38:46 / Modified: 08:39:01" itemprop="dateCreated datePublished" datetime="2025-06-27T08:38:46+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Web-Page-Height-Acquisition-Action-Menu-Bottom-Layout-Animation-Issues-Web-Cross-Origin-Image-Loading-System-Dark-Mode-Immunity"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Page-Height-Acquisition-Action-Menu-Bottom-Layout-Animation-Issues-Web-Cross-Origin-Image-Loading-System-Dark-Mode-Immunity" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Page Height Acquisition, Action Menu Bottom Layout, Animation Issues, Web Cross-Origin Image Loading, System Dark Mode Immunity"></a>[Daily HarmonyOS Next Knowledge] Web Page Height Acquisition, Action Menu Bottom Layout, Animation Issues, Web Cross-Origin Image Loading, System Dark Mode Immunity</h3><h4 id="1-HarmonyOS-Discrepancy-between-getPageHeight-and-actual-web-page-height-in-Web-control"><a href="#1-HarmonyOS-Discrepancy-between-getPageHeight-and-actual-web-page-height-in-Web-control" class="headerlink" title="1. HarmonyOS: Discrepancy between getPageHeight() and actual web page height in Web control?"></a>1. HarmonyOS: Discrepancy between getPageHeight() and actual web page height in Web control?</h4><p>Calling <code>getWebViewController().getPageHeight()</code> in the Web’s <code>onPageEnd()</code> method returns a height smaller than the actual web content height. Using <code>setTimeout(() =&gt; &#123; let webHeight1 = this.controller.getWebViewController().getPageHeight(); Logger.getInstance().error(&#39;Internal control height time&#39;, &#39; webHeight:&#39; + webHeight1 + &#39; webHeight:&#39; + vp2px(webHeight1)); &#125;, 200)</code> obtains the correct height. Is there a way to get the actual height without delay?  </p>
<p><code>onPageEnd</code> is a callback when page loading completes, not when page rendering finishes, hence the height discrepancy. Use <code>onFirstMeaningfulPaint</code>:<br>Documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001847049744__onfirstmeaningfulpaint12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001847049744__onfirstmeaningfulpaint12</a>  </p>
<h4 id="2-Does-HarmonyOS-promptAction-showActionMenu-support-bottom-layout"><a href="#2-Does-HarmonyOS-promptAction-showActionMenu-support-bottom-layout" class="headerlink" title="2. Does HarmonyOS promptAction.showActionMenu support bottom layout?"></a>2. Does HarmonyOS promptAction.showActionMenu support bottom layout?</h4><p>Does the <code>promptAction.showActionMenu</code> interface support pop-up layout at the bottom? The documentation does not mention alignment settings, and examples show centered layouts.  </p>
<p>Reference demo:  </p>
<pre><code class="language-typescript">import promptAction from &#39;@ohos.promptAction&#39;;
import &#123; BusinessError &#125; from &#39;@ohos.base&#39;;

function showActionMenu() &#123;
  try &#123;
    promptAction.showActionMenu(&#123;
      title: &#39;Title Info&#39;,
      buttons: [
        &#123;
          text: &#39;item1&#39;,
          color: &#39;#666666&#39;
        &#125;,
        &#123;
          text: &#39;item2&#39;,
          color: &#39;#000000&#39;
        &#125;,
      ]
    &#125;, (err, data) =&gt; &#123;
      if (err) &#123;
        console.info(&#39;showActionMenu err: &#39; + err);
        return;
      &#125;
      console.info(&#39;showActionMenu success callback, click button: &#39; + data.index);
    &#125;)
  &#125; catch (error) &#123;
    let message = (error as BusinessError).message;
    let code = (error as BusinessError).code;
    console.error(`showActionMenu args error code is $&#123;code&#125;, message is $&#123;message&#125;`);
  &#125;
&#125;

@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Hello World&#39;;

  build() &#123;
    RelativeContainer() &#123;
      Text(this.message)
        .id(&#39;HelloWorld&#39;)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
        .alignRules(&#123;
          center: &#123; anchor: &#39;__container__&#39;, align: VerticalAlign.Center &#125;,
          middle: &#123; anchor: &#39;__container__&#39;, align: HorizontalAlign.Center &#125;
        &#125;)
        .onClick(() =&gt; &#123;
          showActionMenu();
        &#125;)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-Must-HarmonyOS-animations-be-paired-with-State-decorated-variables-to-take-effect"><a href="#3-Must-HarmonyOS-animations-be-paired-with-State-decorated-variables-to-take-effect" class="headerlink" title="3. Must HarmonyOS animations be paired with @State-decorated variables to take effect?"></a>3. Must HarmonyOS animations be paired with @State-decorated variables to take effect?</h4><p>Generally, animations require <code>@State</code>-decorated variables. The following demo works with <code>Text().width(300).height(300).backgroundColor(Color.Black)</code>:  </p>
<pre><code class="language-typescript">@Entry
@Component
export default struct ParticleStar &#123;
  aboutToAppear(): void &#123;
  &#125;

  build() &#123;
    Stack() &#123;
      Text()
        .width(300).height(300).backgroundColor(Color.Black);
      Particle(&#123;
        particles: [
          &#123;
            emitter: &#123;
              particle: &#123;
                type: ParticleType.POINT, // Particle type
                config: &#123;
                  radius: 10 // Dot radius
                &#125;,
                count: 500, // Total particles
                lifetime: 10000 // Particle lifetime in ms
              &#125;,
              emitRate: 10, // Particles emitted per second
              position: [200, 0],
              shape: ParticleEmitterShape.RECTANGLE // Emitter shape
            &#125;,
            color: &#123;
              range: [Color.Red, Color.Yellow], // Initial color range
              updater: &#123;
                type: ParticleUpdater.CURVE, // Change mode: curve
                config: [
                  &#123;
                    from: Color.White, // Start value
                    to: Color.Pink, // End value
                    startMillis: 0, // Start time
                    endMillis: 3000, // End time
                    curve: Curve.EaseIn // Change curve
                  &#125;,
                  &#123;
                    from: Color.Pink,
                    to: Color.Orange,
                    startMillis: 3000,
                    endMillis: 5000,
                    curve: Curve.EaseIn
                  &#125;,
                  &#123;
                    from: Color.Orange,
                    to: Color.Pink,
                    startMillis: 5000,
                    endMillis: 8000,
                    curve: Curve.EaseIn
                  &#125;,
                ]
              &#125;
            &#125;,
            opacity: &#123;
              range: [0.0, 1.0], // Initial opacity range [0.0 to 1.0]
              updater: &#123;
                type: ParticleUpdater.CURVE, // Opacity change mode: curve
                config: [
                  &#123;
                    from: 0.0,
                    to: 1.0,
                    startMillis: 0,
                    endMillis: 3000,
                    curve: Curve.EaseIn
                  &#125;,
                  &#123;
                    from: 1.0,
                    to: 0.0,
                    startMillis: 5000,
                    endMillis: 10000,
                    curve: Curve.EaseIn
                  &#125;
                ]
              &#125;
            &#125;,
            scale: &#123;
              range: [0.0, 0.0],
              updater: &#123;
                type: ParticleUpdater.CURVE,
                config: [
                  &#123;
                    from: 0.0,
                    to: 0.5,
                    startMillis: 0,
                    endMillis: 3000,
                    curve: Curve.EaseIn
                  &#125;
                ]
              &#125;
            &#125;,
            acceleration: &#123;
              // Acceleration configuration: magnitude and direction
              speed: &#123;
                range: [3, 9],
                updater: &#123;
                  type: ParticleUpdater.RANDOM,
                  config: [1, 20]
                &#125;
              &#125;,
              angle: &#123;
                range: [90, 90]
              &#125;
            &#125;
          &#125;
        ]
      &#125;).width(300).height(300);
    &#125;.width(&quot;100%&quot;).height(&quot;100%&quot;).align(Alignment.Center);
  &#125;
&#125;
</code></pre>
<h4 id="4-HarmonyOS-Web-component-cannot-load-cross-origin-image-resources"><a href="#4-HarmonyOS-Web-component-cannot-load-cross-origin-image-resources" class="headerlink" title="4. HarmonyOS Web component cannot load cross-origin image resources?"></a>4. HarmonyOS Web component cannot load cross-origin image resources?</h4><p>When an app accesses a web page, some images fail to load due to cross-origin restrictions. How to resolve this?  </p>
<p>For cross-origin issues, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cross-origin-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cross-origin-V5</a>  </p>
<p>To enhance security, the ArkWeb kernel prohibits cross-origin requests from file or resource protocols. When loading local offline resources via the Web component, cross-origin access to file&#x2F;resource protocols is blocked. Two solutions:  </p>
<h5 id="Method-1"><a href="#Method-1" class="headerlink" title="Method 1"></a>Method 1</h5><p>Use http&#x2F;https protocols instead of file&#x2F;resource protocols. Intercept and replace local resources using the Web component’s <code>onInterceptRequest</code> method to avoid CORS blocking.  </p>
<h5 id="Method-2"><a href="#Method-2" class="headerlink" title="Method 2"></a>Method 2</h5><p>Set an allowed path list via <code>setPathAllowingUniversalAccess</code> to enable cross-origin access to local files via the file protocol. Path formats must comply with:  </p>
<ol>
<li>Application file directory (via <code>Context.filesDir</code>):  <ul>
<li><code>/data/storage/el2/base/files/example</code>  </li>
<li><code>/data/storage/el2/base/haps/entry/files/example</code></li>
</ul>
</li>
<li>Application resource directory (via <code>Context.resourceDir</code>):  <ul>
<li><code>/data/storage/el1/bundle/entry/resource/resfile</code>  </li>
<li><code>/data/storage/el1/bundle/entry/resource/resfile/example</code></li>
</ul>
</li>
</ol>
<pre><code class="language-typescript">// main/ets/pages/Index.ets
import &#123; webview &#125; from &#39;@kit.ArkWeb&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

@Entry
@Component
struct WebComponent &#123;
  controller: WebviewController = new webview.WebviewController();

  build() &#123;
    Row() &#123;
      Web(&#123; src: &quot;&quot;, controller: this.controller &#125;)
        .onControllerAttached(() =&gt; &#123;
          try &#123;
            // Set allowed cross-origin paths
            this.controller.setPathAllowingUniversalAccess([
              getContext().resourceDir,
              getContext().filesDir + &quot;/example&quot;
            ]);
            this.controller.loadUrl(&quot;file://&quot; + getContext().resourceDir + &quot;/index.html&quot;);
          &#125; catch (error) &#123;
            console.error(`ErrorCode: $&#123;(error as BusinessError).code&#125;,  Message: $&#123;(error as BusinessError).message&#125;`);
          &#125;
        &#125;)
        .javaScriptAccess(true)
        .fileAccess(true)
        .domStorageAccess(true);
    &#125;
  &#125;
&#125;
</code></pre>
<pre><code class="language-html">&lt;!-- main/resource/rawfile/index.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;Demo&lt;/title&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover&quot;&gt;
    &lt;script&gt;
        function getFile() &#123;
            var file = &quot;file:///data/storage/el1/bundle/entry/resources/resfile/js/script.js&quot;;
            var xmlHttpReq = new XMLHttpRequest();
            xmlHttpReq.onreadystatechange = function()&#123;
                console.log(&quot;readyState:&quot; + xmlHttpReq.readyState);
                console.log(&quot;status:&quot; + xmlHttpReq.status);
                if(xmlHttpReq.readyState == 4)&#123;
                    if (xmlHttpReq.status == 200) &#123;
                        const element = document.getElementById(&#39;text&#39;);
                        element.textContent = &quot;load &quot; + file + &quot; success&quot;;
                    &#125; else &#123;
                        const element = document.getElementById(&#39;text&#39;);
                        element.textContent = &quot;load &quot; + file + &quot; failed&quot;;
                    &#125;
                &#125;
            &#125;
            xmlHttpReq.open(&quot;GET&quot;, file);
            xmlHttpReq.send(null);
        &#125;
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;div class=&quot;page&quot;&gt;
    &lt;button id=&quot;example&quot; onclick=&quot;getFile()&quot;&gt;stealFile&lt;/button&gt;
&lt;/div&gt;
&lt;div id=&quot;text&quot;&gt;&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<pre><code class="language-javascript">// main/resources/rawfile/js/script.js
const body = document.body;
const element = document.createElement(&#39;div&#39;);
element.textContent = &#39;success&#39;;
body.appendChild(element);
</code></pre>
<h4 id="5-HarmonyOS-How-to-prevent-adaptation-to-system-dark-mode"><a href="#5-HarmonyOS-How-to-prevent-adaptation-to-system-dark-mode" class="headerlink" title="5. HarmonyOS: How to prevent adaptation to system dark mode?"></a>5. HarmonyOS: How to prevent adaptation to system dark mode?</h4><p>To manually set light&#x2F;dark mode, refer to the official document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/110-Daily-HarmonyOS-Next-Knowledge-Web-Network-Interception-Dialogs-Web-Redirects-Data-Scope-Multithreading/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/110-Daily-HarmonyOS-Next-Knowledge-Web-Network-Interception-Dialogs-Web-Redirects-Data-Scope-Multithreading/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Network Interception, Dialogs, Web Redirects, Data Scope, Multithreading</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:37:30 / Modified: 14:38:14" itemprop="dateCreated datePublished" datetime="2025-06-27T08:37:30+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Web-Network-Interception-Dialogs-Web-Redirects-Data-Scope-Multithreading"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Network-Interception-Dialogs-Web-Redirects-Data-Scope-Multithreading" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Network Interception, Dialogs, Web Redirects, Data Scope, Multithreading"></a>[Daily HarmonyOS Next Knowledge] Web Network Interception, Dialogs, Web Redirects, Data Scope, Multithreading</h1><h4 id="1-HarmonyOS-Neither-onErrorReceive-nor-onHttpErrorReceive-callbacks-are-triggered-for-the-Web-component-when-network-interception-fails"><a href="#1-HarmonyOS-Neither-onErrorReceive-nor-onHttpErrorReceive-callbacks-are-triggered-for-the-Web-component-when-network-interception-fails" class="headerlink" title="1. HarmonyOS: Neither onErrorReceive nor onHttpErrorReceive callbacks are triggered for the Web component when network interception fails?"></a>1. HarmonyOS: Neither onErrorReceive nor onHttpErrorReceive callbacks are triggered for the Web component when network interception fails?</h4><p>When network interception fails, neither the <code>onErrorReceive</code> nor <code>onHttpErrorReceive</code> callbacks of the Web component are triggered. The interception interface is used as follows:  </p>
<pre><code class="language-c">OH_ArkWeb_CreateResponse(&amp;arkResponse);  
OH_ArkWebResponse_SetError(arkResponse, ARKWEB_ERR_FAILED);  
OH_ArkWebResourceHandler_DidReceiveResponse(arkResourceHandler, arkResponse);  
</code></pre>
<p><strong>Solution</strong>:  </p>
<ul>
<li>If an error occurs during the response phase, use <code>response-&gt;seterror</code> to trigger the callback.  </li>
<li>If an error occurs during data transmission, use <code>OH_ArkWebResourceHandler_DidFailWithError</code>.</li>
</ul>
<h4 id="2-HarmonyOS-Dialog-appears-on-the-new-page-after-using-openCustomDialog-to-navigate"><a href="#2-HarmonyOS-Dialog-appears-on-the-new-page-after-using-openCustomDialog-to-navigate" class="headerlink" title="2. HarmonyOS: Dialog appears on the new page after using openCustomDialog to navigate?"></a>2. HarmonyOS: Dialog appears on the new page after using openCustomDialog to navigate?</h4><p>When using <code>openCustomDialog</code> to navigate to a new page, the dialog persists on the new page.  </p>
<p><strong>Solution</strong>:<br>Close the dialog before navigating and reopen it when returning. Use global variables to control the dialog’s visibility.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-appstorage-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-appstorage-V5</a>  </p>
<p><strong>AppStorage Overview</strong>:  </p>
<ul>
<li><strong>AppStorage</strong> is the application-wide UI state storage, bound to the application process. Created by the UI framework at app startup, it provides centralized storage for UI state properties.  </li>
<li><strong>LocalStorage</strong> is page-level, used for intra-page data sharing.  </li>
<li><strong>AppStorage</strong> enables application-wide global state sharing and acts as the app’s “central hub.” Persistent data (<code>PersistentStorage</code>) and environment variables (<code>Environment</code>) interact with the UI through AppStorage.</li>
</ul>
<p>This article covers <strong>AppStorage</strong> use cases and related decorators: <code>@StorageProp</code> and <code>@StorageLink</code>.  </p>
<ul>
<li>Unlike decorators like <code>@State</code> that only propagate within the component tree, <strong>AppStorage</strong> provides broader cross-ability data sharing.  </li>
<li>Recommended pre-reading: <a href="link-to-overview">State Management Overview</a>.  </li>
<li><strong>AppStorage</strong> also offers API interfaces for manual CRUD operations on stored keys. Refer to the <a href="link-to-api">AppStorage API Documentation</a>.</li>
</ul>
<h4 id="3-HarmonyOS-ArkWeb-web-redirect-issue"><a href="#3-HarmonyOS-ArkWeb-web-redirect-issue" class="headerlink" title="3. HarmonyOS ArkWeb web redirect issue?"></a>3. HarmonyOS ArkWeb web redirect issue?</h4><p>For Web components, use <code>onLoadIntercept</code> to detect redirects and perform actions.<br><strong>Documentation</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onloadintercept10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onloadintercept10</a>  </p>
<h4 id="4-HarmonyOS-Incorrect-data-scope-in-custom-layouts-of-custom-components"><a href="#4-HarmonyOS-Incorrect-data-scope-in-custom-layouts-of-custom-components" class="headerlink" title="4. HarmonyOS: Incorrect data scope in custom layouts of custom components?"></a>4. HarmonyOS: Incorrect data scope in custom layouts of custom components?</h4><p><strong>Reference Code</strong>:  </p>
<pre><code class="language-typescript">// TeacherInfoViewModel.ets
import &#123; TeacherInfoModel &#125; from &#39;./TeacherInfoModel&#39;;
import &#123; promptAction &#125; from &#39;@kit.ArkUI&#39;;

@Observed
export class TeacherInfoViewModel &#123;
  teacherInfoModel: TeacherInfoModel = new TeacherInfoModel();

  changeId(id: string): TeacherInfoModel &#123;
    this.teacherInfoModel.id = id;
    return this.teacherInfoModel;
  &#125;

  // Validate
  checkModel(teacherInfoModel: TeacherInfoModel) &#123;
    this.teacherInfoModel = teacherInfoModel;
  &#125;
&#125;
</code></pre>
<pre><code class="language-typescript">// Index.ets
import &#123; getTeacherInfoModel, TeacherInfoModel &#125; from &#39;../comp/TeacherInfoModel&#39;;
import &#123; TeacherInfoViewModel &#125; from &#39;../comp/TeacherInfoViewModel&#39;;
import &#123; CommComponent &#125; from &#39;./CommComponent&#39;;
import &#123; ComponentStatus &#125; from &#39;./CommonEnums&#39;;
import &#123; promptAction &#125; from &#39;@kit.ArkUI&#39;;

@Entry
@Component
struct Index &#123;
  @State teacherInfoViewModel: TeacherInfoViewModel = new TeacherInfoViewModel();
  @State state: ComponentStatus = ComponentStatus.LOADING

  aboutToAppear(): void &#123;
    this.state = ComponentStatus.LOADING;
    this.requestNetWork();
  &#125;

  private requestNetWork() &#123;
    getTeacherInfoModel(&quot;parameters&quot;).then((res: TeacherInfoModel) =&gt; &#123;
      this.teacherInfoViewModel.checkModel(res);
      this.state = ComponentStatus.SUCCESS;
    &#125;);
  &#125;

  build() &#123;
    Row() &#123;
      Column() &#123;
        CommComponent(&#123;
          componentStatus: this.state,
          data: this.teacherInfoViewModel.teacherInfoModel,
          builder: () =&gt; &#123;
            this.successBuild()
          &#125;,
          builderLoading: () =&gt; &#123;
            this.loadingBuild()
          &#125;
        &#125;).onClick((e) =&gt; &#123;
          this.requestNetWork();
        &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;

  @Builder
  successBuild() &#123;
    // Issue 1: ID data does not update
    Column() &#123;
      Text(`Network Data: $&#123;this.teacherInfoViewModel?.teacherInfoModel?.id&#125; `)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
    &#125;
    .width(&#39;100%&#39;)
    .onClick(() =&gt; &#123;
      // Issue: ID does not update after clicking to re-request
      let param = this.teacherInfoViewModel.changeId(&quot;onClickID&quot;) as TeacherInfoModel

      // Using only @State, directly modify the object to trigger UI refresh
      let teacherInfoViewModelTemp: TeacherInfoViewModel = new TeacherInfoViewModel()
      teacherInfoViewModelTemp.teacherInfoModel = param
      this.teacherInfoViewModel = teacherInfoViewModelTemp

      promptAction.showToast(&#123; message: `Updated ID: $&#123;JSON.stringify(param)&#125;` &#125;)
    &#125;)
  &#125;

  @Builder
  loadingBuild() &#123;
    Column() &#123;
      Text(`Loading... `)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
    &#125;
    .width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="5-HarmonyOS-Can-a-function-be-passed-from-the-main-thread-to-a-Worker-for-execution"><a href="#5-HarmonyOS-Can-a-function-be-passed-from-the-main-thread-to-a-Worker-for-execution" class="headerlink" title="5. HarmonyOS: Can a function be passed from the main thread to a Worker for execution?"></a>5. HarmonyOS: Can a function be passed from the main thread to a Worker for execution?</h4><p>Is it possible to pass a function from the main thread to a Worker and execute it in the Worker’s thread?  </p>
<p><strong>Attempted Solution</strong>:<br>Define a function in the main thread and pass it to the Worker thread via the <code>onmessage</code> interface.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-worker-V5#onmessage9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-worker-V5#onmessage9</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/109-Daily-HarmonyOS-Next-Knowledge-getContext-Issue-Web-Cache-Clearance-Popup-Click-Event-Passthrough-Gap-Removal-Swipe-Menu-Settings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/109-Daily-HarmonyOS-Next-Knowledge-getContext-Issue-Web-Cache-Clearance-Popup-Click-Event-Passthrough-Gap-Removal-Swipe-Menu-Settings/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] getContext Issue, Web Cache Clearance, Popup Click Event Passthrough, Gap Removal, Swipe Menu Settings</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:36:31 / Modified: 08:37:10" itemprop="dateCreated datePublished" datetime="2025-06-27T08:36:31+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-getContext-Issue-Web-Cache-Clearance-Popup-Click-Event-Passthrough-Gap-Removal-Swipe-Menu-Settings"><a href="#Daily-HarmonyOS-Next-Knowledge-getContext-Issue-Web-Cache-Clearance-Popup-Click-Event-Passthrough-Gap-Removal-Swipe-Menu-Settings" class="headerlink" title="[Daily HarmonyOS Next Knowledge] getContext Issue, Web Cache Clearance, Popup Click Event Passthrough, Gap Removal, Swipe Menu Settings"></a>[Daily HarmonyOS Next Knowledge] getContext Issue, Web Cache Clearance, Popup Click Event Passthrough, Gap Removal, Swipe Menu Settings</h3><h4 id="1-HarmonyOS-getContext-not-accessible"><a href="#1-HarmonyOS-getContext-not-accessible" class="headerlink" title="1. HarmonyOS getContext() not accessible?"></a>1. HarmonyOS getContext() not accessible?</h4><p>When using bindPopup and bindSheet on two different pages to pop up the same dialog, clicking a button in the dialog to jump to an H5 page causes bindPopup to crash with the error: <code>Error message: Cannot read property resourceManager of undefined</code>. The source code shows <code>const resourceManager = context.resourceManager;</code>, indicating getContext() fails to retrieve the context. bindSheet, however, opens the H5 page normally.  </p>
<p><strong>Issue</strong>: getContext() failure leads to resourceManager being undefined.<br><strong>Solutions</strong>:  </p>
<ul>
<li>Use <code>this.context</code> within the ability.  </li>
<li>Use <code>getContext()</code> on the UI side.</li>
</ul>
<h4 id="2-How-to-clear-Web-cache-in-HarmonyOS"><a href="#2-How-to-clear-Web-cache-in-HarmonyOS" class="headerlink" title="2. How to clear Web cache in HarmonyOS?"></a>2. How to clear Web cache in HarmonyOS?</h4><p>How to clear resources (such as images) cached by the Web component after loading a webpage.  </p>
<p>Use the <code>removeCache()</code> method.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#removecache">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#removecache</a>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">removeCache</span>(<span class="attr">clearRom</span>: <span class="built_in">boolean</span>): <span class="built_in">void</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- This method clears resource cache files for all webviews in the same application.  </span></span><br><span class="line"><span class="string">- Webview cache can be viewed in the `</span>data/storage/el2/base/cache/web/<span class="title class_">Cache</span><span class="string">` directory.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Handling click event passthrough for HarmonyOS popups  </span></span><br><span class="line"><span class="string">Implementing a popup feature across multiple pages requires handling click event passthrough for popups. The goal is to obtain the click position (pixel coordinates within the popup) and transparency to determine if the event should pass through to the underlying scene.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Current challenge**: The component screenshot API is asynchronous, while event interception requires a synchronous API, making the overall chain unfeasible.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference code**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">HitTestPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>()</span><br><span class="line">        .<span class="title function_">onTouch</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>)=&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;Clicked: Bottom interface&quot;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>()</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">          .<span class="title function_">onTouch</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>)=&gt;</span> &#123;</span><br><span class="line">            event.<span class="title function_">stopPropagation</span>()</span><br><span class="line">            <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;Clicked: Text&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">onTouch</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>)=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;Clicked: Upper interface&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">Transparent</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Transparent</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">//Index.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageTwo</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./pageTwo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">NavParam</span> &#123;</span><br><span class="line">  <span class="attr">dialogHeightChangeBack</span>?: <span class="function">(<span class="params"><span class="attr">dialogHeight</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"> <span class="attr">dialogHeightChangeBack</span>?: (dialogHeight: <span class="built_in">number</span>) =&gt; <span class="built_in">void</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogHeightChangeBack</span> = dialogHeightChangeBack</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@Provide</span>(<span class="string">&#x27;pageInfos&#x27;</span>) <span class="attr">pageInfos</span>: <span class="title class_">NavPathStack</span> = <span class="keyword">new</span> <span class="title class_">NavPathStack</span>()</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;windowHeight&quot;</span>) <span class="attr">windowHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">contentHeight</span>: <span class="built_in">number</span> = <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">PageMap</span>(<span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">param</span>: <span class="title class_">NavParam</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (name === <span class="string">&#x27;pageTwo&#x27;</span>) &#123;</span><br><span class="line">      <span class="title class_">PageTwo</span>(&#123;<span class="attr">dialogHeightChangeBlock</span>: param.<span class="property">dialogHeightChangeBack</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;testTag: Current windowHeight&quot;</span> + <span class="variable language_">this</span>,<span class="variable language_">this</span>.<span class="property">windowHeight</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">contentHeight</span> = <span class="title function_">px2vp</span>(<span class="variable language_">this</span>.<span class="property">windowHeight</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Navigation</span>(<span class="variable language_">this</span>.<span class="property">pageInfos</span>) &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>().<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;pageOne&quot;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">pushPath</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;pageTwo&#x27;</span>, <span class="attr">param</span>: <span class="keyword">new</span> <span class="title class_">NavParam</span>(</span><br><span class="line">              <span class="function">(<span class="params"><span class="attr">dialogHeight</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (dialogHeight == <span class="number">0</span>) &#123;</span><br><span class="line">                  <span class="title function_">animateTo</span>(&#123; <span class="attr">duration</span>: <span class="number">250</span> &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">contentHeight</span> = <span class="title function_">px2vp</span>(<span class="variable language_">this</span>.<span class="property">windowHeight</span>);</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">contentHeight</span> = <span class="title function_">px2vp</span>(<span class="variable language_">this</span>.<span class="property">windowHeight</span>) - dialogHeight;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">initialIndex</span>: <span class="number">0</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span> + item)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">borderRadius</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Vertical</span>) </span><br><span class="line">        .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">        .<span class="title function_">friction</span>(<span class="number">0.6</span>)</span><br><span class="line">        .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="number">0xFFFFFF</span>, <span class="attr">startMargin</span>: <span class="number">20</span>, <span class="attr">endMargin</span>: <span class="number">20</span> &#125;) </span><br><span class="line">        .<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">Spring</span>) </span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">contentHeight</span>)</span><br><span class="line">      .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">Transparent</span>)</span><br><span class="line">      .<span class="title function_">onTouch</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Event passthrough: Column clicked&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">navDestination</span>(<span class="variable language_">this</span>.<span class="property">PageMap</span>)</span><br><span class="line">    .<span class="title function_">onTouchIntercept</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Event passthrough: Navigation clicked&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">HitTestMode</span>.<span class="property">Transparent</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">//PageTwo.ets</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">PageTwo</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isShow</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="attr">gravity</span>: <span class="title class_">Alignment</span> = <span class="title class_">Alignment</span>.<span class="property">Bottom</span></span><br><span class="line">  <span class="attr">transitionEdge</span>: <span class="title class_">TransitionEdge</span> = <span class="title class_">TransitionEdge</span>.<span class="property">BOTTOM</span></span><br><span class="line">  <span class="meta">@Consume</span>(<span class="string">&#x27;pageInfos&#x27;</span>) <span class="attr">pageInfos</span>: <span class="title class_">NavPathStack</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">gestureHeight</span>: <span class="built_in">number</span> = <span class="number">500</span>;</span><br><span class="line">  <span class="attr">dialogHeightChangeBlock</span>?: <span class="function">(<span class="params"><span class="attr">dialogHeight</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">  <span class="attr">scrollOffsetY</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">scrollerForList</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">canHandleScroll</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callBackHeight</span>(<span class="variable language_">this</span>.<span class="property">gestureHeight</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">callBackHeight</span>(<span class="params"><span class="attr">height</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dialogHeightChangeBlock</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dialogHeightChangeBlock</span>!(height);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">NavDestination</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="variable language_">this</span>.<span class="property">gravity</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="variable language_">this</span>.<span class="property">gravity</span> &#125;) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isShow</span>) &#123;</span><br><span class="line">            <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">Top</span> &#125;) &#123;</span><br><span class="line">              <span class="title class_">Column</span>() &#123;</span><br><span class="line">                <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">initialIndex</span>: <span class="number">0</span>, <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scrollerForList</span> &#125;) &#123;</span><br><span class="line">                  <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">                      <span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span> + item)</span><br><span class="line">                        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">                        .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                        .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">                        .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                  &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">                &#125;</span><br><span class="line">                .<span class="title function_">enableScrollInteraction</span>(<span class="variable language_">this</span>.<span class="property">canHandleScroll</span>)</span><br><span class="line">                .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Vertical</span>) </span><br><span class="line">                .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">                .<span class="title function_">friction</span>(<span class="number">0.6</span>)</span><br><span class="line">                .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="number">0xFFFFFF</span>, <span class="attr">startMargin</span>: <span class="number">20</span>, <span class="attr">endMargin</span>: <span class="number">20</span> &#125;) </span><br><span class="line">                .<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">Spring</span>) </span><br><span class="line">                .<span class="title function_">onScroll</span>(<span class="function">(<span class="params"><span class="attr">scrollOffset</span>: <span class="built_in">number</span>, <span class="attr">scrollState</span>: <span class="title class_">ScrollState</span></span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">scrollOffsetY</span> += scrollOffset;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;list: y offset &quot;</span> + <span class="variable language_">this</span>.<span class="property">scrollOffsetY</span>);</span><br><span class="line"></span><br><span class="line">                  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">scrollOffsetY</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">scrollerForList</span>.<span class="title function_">scrollTo</span>(&#123;<span class="attr">xOffset</span>:<span class="number">0</span>,<span class="attr">yOffset</span>:<span class="number">0</span>,<span class="attr">animation</span>:<span class="literal">false</span>&#125;);</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">scrollOffsetY</span> = <span class="number">0</span>;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">canHandleScroll</span> = <span class="literal">false</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">                .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">borderRadius</span>(<span class="number">6</span>)</span><br><span class="line">            .<span class="title function_">transition</span>(<span class="title class_">TransitionEffect</span>.<span class="title function_">move</span>(<span class="variable language_">this</span>.<span class="property">transitionEdge</span>).<span class="title function_">animation</span>(&#123; <span class="attr">duration</span>: <span class="number">250</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Smooth</span> &#125;))</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">            .<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">gestureHeight</span>)</span><br><span class="line">        .<span class="title function_">parallelGesture</span>(</span><br><span class="line">          <span class="title class_">PanGesture</span>(&#123; <span class="attr">direction</span>: <span class="title class_">PanDirection</span>.<span class="property">Vertical</span>, <span class="attr">fingers</span>: <span class="number">1</span> &#125;)</span><br><span class="line">            .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">canHandleScroll</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;testTag: y offset &quot;</span> + event.<span class="property">offsetY</span>);</span><br><span class="line">                <span class="keyword">let</span> temHeight = <span class="number">500</span>;</span><br><span class="line">                temHeight -= event.<span class="property">offsetY</span>;</span><br><span class="line">                <span class="keyword">if</span> (temHeight &gt;= <span class="number">500</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">gestureHeight</span> = <span class="number">500</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">gestureHeight</span> = temHeight;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">callBackHeight</span>(<span class="variable language_">this</span>.<span class="property">gestureHeight</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">onActionEnd</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">canHandleScroll</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;testTag: Animation end y offset &quot;</span> + event.<span class="property">offsetY</span>);</span><br><span class="line">                <span class="keyword">let</span> temHeight = <span class="number">500</span>;</span><br><span class="line">                temHeight -= event.<span class="property">offsetY</span>;</span><br><span class="line">                <span class="keyword">if</span> (temHeight &lt; <span class="number">250</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="title function_">closeDialogAction</span>()</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temHeight &gt;= <span class="number">250</span> &amp;&amp; temHeight &lt; <span class="number">500</span>) &#123;</span><br><span class="line">                  <span class="keyword">let</span> duration = (<span class="number">500</span> - temHeight) / <span class="number">500.0</span> * <span class="number">250.0</span>;</span><br><span class="line">                  <span class="title function_">animateTo</span>(&#123; <span class="attr">duration</span>: duration &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">gestureHeight</span> = <span class="number">500</span>;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">callBackHeight</span>(<span class="variable language_">this</span>.<span class="property">gestureHeight</span>);</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">canHandleScroll</span> = <span class="literal">true</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// this.closeDialogAction()</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">onTouchIntercept</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Event passthrough: Stack clicked&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">HitTestMode</span>.<span class="property">Transparent</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#33000000&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">onBackPressed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">closeDialogAction</span>()</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">Transparent</span>)</span><br><span class="line">    .<span class="title function_">onTouch</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (event.<span class="property">type</span> == <span class="title class_">TouchType</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Event passthrough: Dialog clicked&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">hideTitleBar</span>(<span class="literal">true</span>)</span><br><span class="line">    .<span class="title function_">mode</span>(<span class="title class_">NavDestinationMode</span>.<span class="property">DIALOG</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">closeDialogAction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isShow</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callBackHeight</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">100</span>, <span class="attr">delay</span>: <span class="number">250</span>, <span class="attr">onFinish</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">pop</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">//EntryAbility.ets</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AbilityConstant</span>, <span class="title class_">UIAbility</span>, <span class="title class_">Want</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; hilog &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.PerformanceAnalysisKit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">enterImmersion</span>(<span class="params"><span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="title class_">Window</span></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">AppStorage</span>.<span class="property">setOrCreate</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;windowHeight&#x27;</span>, windowClass.<span class="title function_">getWindowProperties</span>().<span class="property">windowRect</span>.<span class="property">height</span>)</span><br><span class="line">  <span class="title class_">AppStorage</span>.<span class="property">setOrCreate</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;windowWidth&#x27;</span>, windowClass.<span class="title function_">getWindowProperties</span>().<span class="property">windowRect</span>.<span class="property">width</span>)</span><br><span class="line"></span><br><span class="line">  windowClass.<span class="title function_">on</span>(<span class="string">&#x27;windowSizeChange&#x27;</span>, <span class="function">(<span class="params">size</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="property">setOrCreate</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;windowHeight&#x27;</span>, size.<span class="property">height</span>)</span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="property">setOrCreate</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;windowWidth&#x27;</span>, size.<span class="property">width</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> windowClass.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">await</span> windowClass.<span class="title function_">setWindowSystemBarEnable</span>([<span class="string">&quot;status&quot;</span>, <span class="string">&quot;navigation&quot;</span>])</span><br><span class="line">  <span class="keyword">await</span> windowClass.<span class="title function_">setWindowSystemBarProperties</span>(&#123;</span><br><span class="line">    <span class="attr">navigationBarColor</span>: <span class="string">&quot;#00000000&quot;</span>,</span><br><span class="line">    <span class="attr">statusBarColor</span>: <span class="string">&quot;#00000000&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">EntryAbility</span> <span class="keyword">extends</span> <span class="title class_ inherited__">UIAbility</span> &#123;</span><br><span class="line">  <span class="title function_">onCreate</span>(<span class="attr">want</span>: <span class="title class_">Want</span>, <span class="attr">launchParam</span>: <span class="title class_">AbilityConstant</span>.<span class="property">LaunchParam</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onCreate&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onDestroy</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onDestroy&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">onWindowStageCreate</span>(<span class="params"><span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="title class_">WindowStage</span></span>) &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">windowClass</span>:<span class="variable language_">window</span>.<span class="property">Window</span> = <span class="keyword">await</span> windowStage.<span class="title function_">getMainWindow</span>()</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">enterImmersion</span>(windowClass)</span><br><span class="line"></span><br><span class="line">    windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">        hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content.&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onWindowStageDestroy</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageDestroy&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onForeground</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onForeground&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onBackground</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onBackground&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to remove gaps in HarmonyOS?  </span></span><br><span class="line"><span class="string">How to remove the gap between the virtual keyboard and a custom input dialog.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reason for the gap**: Custom popups are designed for simple prompts and should not replace full pages. Popups automatically avoid the soft keyboard by lifting the popup by the keyboard height, creating a 16vp safety margin between the popup and the keyboard.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Manually set `</span><span class="attr">offset</span>: &#123; <span class="attr">y</span>: <span class="number">16</span> &#125;<span class="string">` when the soft keyboard pops up to offset the safety margin.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference demo**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">//CustomDialog.ets</span></span><br><span class="line">build&#123;</span><br><span class="line">  <span class="title class_">Column</span>()&#123;</span><br><span class="line">    <span class="title class_">TextArea</span>(&#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">placeholder</span>: <span class="string">&#x27;The text area can hold an unlimited amount of text. input your word...&#x27;</span>,</span><br><span class="line">      <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">textController</span></span><br><span class="line">    &#125;)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">offset</span>(&#123;</span><br><span class="line">    <span class="attr">y</span>:<span class="number">16</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Specification selection page controller</span></span><br><span class="line"><span class="attr">customDialogController</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">  <span class="attr">builder</span>: <span class="title class_">SpecificationsCustomDialog</span>(&#123;</span><br><span class="line"></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Bottom</span>,</span><br><span class="line">  <span class="attr">customStyle</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">autoCancel</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">offset</span>: &#123;</span><br><span class="line">    <span class="attr">dx</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">dy</span>: -<span class="number">16</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Dynamic setting of HarmonyOS ListItem swipe menu  </span></span><br><span class="line"><span class="string">A list with items that have swipe menus, but no swipe menus in edit mode. Implement dynamic swipe menu setting via a toggle.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference demo**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ListItemExample2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">enterEndDeleteAreaString</span>: <span class="built_in">string</span> = <span class="string">&quot;not enterEndDeleteArea&quot;</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">exitEndDeleteAreaString</span>: <span class="built_in">string</span> = <span class="string">&quot;not exitEndDeleteArea&quot;</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isShow</span>:<span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span> <span class="title function_">itemEnd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Delete&quot;</span>).<span class="title function_">margin</span>(<span class="string">&quot;4vp&quot;</span>)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Set&quot;</span>).<span class="title function_">margin</span>(<span class="string">&quot;4vp&quot;</span>)</span><br><span class="line">    &#125;.<span class="title function_">padding</span>(<span class="string">&quot;4vp&quot;</span>).<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceEvenly</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Click&quot;</span>).<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">isShow</span>=!<span class="variable language_">this</span>.<span class="property">isShow</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/108-Daily-HarmonyOS-Knowledge-Web-Scrolling-Event-Callback-selectable-Attribute-Listening-to-H5-Internal-Routing-Height-Setting-for-Nested-Grids/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/108-Daily-HarmonyOS-Knowledge-Web-Scrolling-Event-Callback-selectable-Attribute-Listening-to-H5-Internal-Routing-Height-Setting-for-Nested-Grids/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Web Scrolling, Event Callback, selectable Attribute, Listening to H5 Internal Routing, Height Setting for Nested Grids</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:35:41 / Modified: 08:35:56" itemprop="dateCreated datePublished" datetime="2025-06-27T08:35:41+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Web-Scrolling-Event-Callback-selectable-Attribute-Listening-to-H5-Internal-Routing-Height-Setting-for-Nested-Grids"><a href="#Daily-HarmonyOS-Knowledge-Web-Scrolling-Event-Callback-selectable-Attribute-Listening-to-H5-Internal-Routing-Height-Setting-for-Nested-Grids" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Scrolling, Event Callback, selectable Attribute, Listening to H5 Internal Routing, Height Setting for Nested Grids"></a>[Daily HarmonyOS Knowledge] Web Scrolling, Event Callback, selectable Attribute, Listening to H5 Internal Routing, Height Setting for Nested Grids</h3><h4 id="1-HarmonyOS-WebView-cannot-scroll-after-loading-a-URL"><a href="#1-HarmonyOS-WebView-cannot-scroll-after-loading-a-URL" class="headerlink" title="1. HarmonyOS WebView cannot scroll after loading a URL?"></a>1. HarmonyOS WebView cannot scroll after loading a URL?</h4><p>When nesting a WebView inside a Scroll component, refer to the following demo:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">import web_webview from &#x27;@ohos.web.webview&#x27;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct WebComponent &#123;</span><br><span class="line">  controller: web_webview.WebviewController = new web_webview.WebviewController()</span><br><span class="line">  @State mode: WebLayoutMode = WebLayoutMode.FIT_CONTENT</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&quot;Here is the header area&quot;)</span><br><span class="line">        .width(&quot;100%&quot;)</span><br><span class="line">        .height(&#x27;30%&#x27;)</span><br><span class="line">        .backgroundColor(&quot;#f89f0f&quot;)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">        .fontColor(&quot;#FF0F0F&quot;)</span><br><span class="line">      Web(&#123; src: $rawfile(&#x27;Index.html&#x27;), controller: this.controller &#125;)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(200)// .layoutMode(this.mode)</span><br><span class="line">        .zoomAccess(false)</span><br><span class="line">        .domStorageAccess(true)</span><br><span class="line">        .overviewModeAccess(true)</span><br><span class="line">        .imageAccess(true)</span><br><span class="line">        .onlineImageAccess(true)</span><br><span class="line">        .fileAccess(true)</span><br><span class="line">        .databaseAccess(true)</span><br><span class="line">      Text(&quot;Here is the footer area&quot;)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">        .fontColor(&quot;#FF0F0F&quot;)</span><br><span class="line">        .width(&quot;100%&quot;)</span><br><span class="line">        .height(&#x27;40%&#x27;)</span><br><span class="line">        .backgroundColor(&quot;#f89f0f&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. HarmonyOS event callback?  </span><br><span class="line">There are two pages, A and B. Page A navigates to page B using the `router.pushUrl` method. Page B has a button `btn`. How to notify page A when `btn` is clicked, without page B ever navigating back.  </span><br><span class="line"></span><br><span class="line">Implement this using custom subscription events. Refer to the demo:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;index.ets<br>import display from ‘@ohos.display’;<br>import emitter from ‘@ohos.events.emitter’;<br>import { router } from ‘@kit.ArkUI’;<br>import { JSON } from ‘@kit.ArkTS’;</p>
<p>@Entry<br>@Component<br>struct DisplayTest {</p>
<p>  build() {<br>    Column({space:20}){<br>      Button(‘Test’)<br>        .type(ButtonType.Capsule)<br>        .onClick(() &#x3D;&gt; {<br>          let innerEvent: emitter.InnerEvent &#x3D; {<br>            eventId: 12222<br>          };<br>          &#x2F;&#x2F; Trigger the event with ID 12222<br>          emitter.on(innerEvent, (data) &#x3D;&gt; {<br>            console.info(‘once callback’ + JSON.stringify(data));<br>          });<br>          router.pushUrl({<br>            url:’pages&#x2F;PageOne’<br>          })<br>        })<br>        .width(‘50%’)<br>    }<br>    .width(“100%”)<br>    .height(‘100%’)<br>    .justifyContent(FlexAlign.Center)<br>  }<br>}</p>
<p>&#x2F;&#x2F;PageOne.ets<br>import emitter from ‘@ohos.events.emitter’;</p>
<p>@Entry<br>@Component<br>struct PageOne {</p>
<p>  build() {<br>    Column(){<br>      Text(‘PageOne’)<br>        .width(‘50%’)<br>      Button(‘send’)<br>        .type(ButtonType.Capsule)<br>        .width(‘50%’)<br>        .onClick(() &#x3D;&gt; {<br>          let eventData: emitter.EventData &#x3D; {<br>            data: {<br>              “content”: “c”,<br>              “id”: 1,<br>            }<br>          };</p>
<pre><code>      let innerEvent: emitter.InnerEvent = &#123;
        eventId: 12222,
        priority: emitter.EventPriority.HIGH
      &#125;;
      // Emit the event with ID 12222
      emitter.emit(innerEvent, eventData);
    &#125;)
&#125;
.justifyContent(FlexAlign.Center)
.width(&#39;100%&#39;)
.height(&#39;100%&#39;)
</code></pre>
<p>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 3. What is the selectable attribute in HarmonyOS ListItem for?  </span><br><span class="line">The `selectable` attribute of ListItem determines whether the current ListItem element can be selected by a mouse frame. This attribute cannot be used to implement multi-selection. Developers can maintain multi-selection states by setting `attributeModifier` with dynamic attributes.  </span><br><span class="line">Reference document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5  </span><br><span class="line"></span><br><span class="line">Dynamically set component attributes, supporting if/else syntax and polymorphic style settings as needed.  </span><br><span class="line"></span><br><span class="line">#### 4. How to listen to h5 internal routing jumps in a HarmonyOS web component?  </span><br><span class="line">Need to intercept h5 routing jumps inside the web component to process parameters. Are there methods to intercept this?  </span><br><span class="line">1. Use to intercept URLs and return response data: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5  </span><br><span class="line">2. Use to determine whether to block the access: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onloadintercept10  </span><br><span class="line"></span><br><span class="line">#### 5. When nesting a Grid component inside a HarmonyOS Scroll, must the Grid set a height?  </span><br><span class="line">When nesting a Grid component inside a Scroll, does the Grid must set a height?  </span><br><span class="line"></span><br><span class="line">When the width and height of the Grid are not set, it adapts to the parent component&#x27;s size by default. Set the width and height of the Grid&#x27;s parent component (Column), such as `.width(&quot;100%&quot;) .height(&quot;100%&quot;)`, and it can be displayed normally.  </span><br><span class="line"></span><br><span class="line">Reference demo:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>export struct AllChannelsPage{</p>
<p>  @State tabs: Array<String> &#x3D; new Array();</p>
<p>  @State dragChannel: string &#x3D; ‘drag’;</p>
<p>  private deviceWidth: number &#x3D; (AppStorage.get(‘deviceWidth’) as number)<br>  @State itemWidth: number &#x3D; 80;<br>  @State itemHeight: number &#x3D; 80;<br>  @State mineRowCount: number &#x3D; 1;<br>  @State mineGridHeight: number &#x3D; 100;<br>  @State mainTitieDes: string &#x3D; ‘Click to enter the channel’;</p>
<p>  aboutToAppear(): void {<br>    for(let i &#x3D; 0; i &lt; 30; i++ ){<br>      this.tabs.push(‘Channel’ + i);<br>    }<br>    this.itemWidth &#x3D; (this.deviceWidth - 32 - 30)&#x2F;4;<br>    this.itemHeight &#x3D; this.itemWidth &#x2F; 2.1;<br>    this.mineRowCount &#x3D; Math.ceil(this.tabs.length &#x2F; 4);<br>    this.mineGridHeight &#x3D; this.mineRowCount * this.itemHeight + (this.mineRowCount - 1) * 10<br>  }</p>
<p>  @Builder pixelMapBuilder() { &#x2F;&#x2F; Drag process style<br>    Column() {<br>      Text(this.dragChannel)<br>        .fontSize(‘15fp’)<br>          &#x2F;&#x2F; .fontColor($r(‘app.color.color202022’))<br>        .textAlign(TextAlign.Center)<br>        .width(this.itemWidth)<br>        .height(this.itemHeight)<br>          &#x2F;&#x2F; .backgroundColor($r(‘app.color.colorF9F9F9’))<br>        .borderRadius(4)<br>    }<br>  }</p>
<p>  changeIndex(index1: number, index2: number) { &#x2F;&#x2F; Swap array positions<br>    let temp &#x3D; this.tabs[index1];<br>    this.tabs[index1] &#x3D; this.tabs[index2];<br>    this.tabs[index2] &#x3D; temp;<br>  }</p>
<p>  build() {<br>    NavDestination(){<br>      Column(){<br>        Scroll(){<br>          Column(){<br>            Row(){<br>              Text().width(4).height(16)<br>                &#x2F;&#x2F; .backgroundColor($r(‘app.color.colorF21333’))<br>                .borderRadius(2)<br>              Blank().width(6)<br>              Text(‘My Channels’).fontSize(‘16fp’)<br>              &#x2F;&#x2F; .fontColor($r(‘app.color.color202022’))<br>              Blank().width(8)<br>              Text(this.mainTitieDes).fontSize(‘12fp’)<br>              &#x2F;&#x2F; .fontColor($r(‘app.color.colorB1B1BB’))<br>              Blank().layoutWeight(1)<br>              Text(‘Reset’).fontSize(‘15fp’)<br>              &#x2F;&#x2F; .fontColor($r(‘app.color.color909099’))<br>              Text().width(1).height(10)<br>                &#x2F;&#x2F; .backgroundColor($r(‘app.color.color909099’))<br>                .margin({left: 4, right: 4})<br>              Text(‘Edit’).fontSize(‘15fp’)<br>              &#x2F;&#x2F; .fontColor($r(‘app.color.colorF21333’))<br>            }.width(‘100%’)<br>            .margin({top: 5, bottom: 15})<br>            .padding({ left: 16, right: 16 })</p>
<pre><code>        Grid() &#123;
          ForEach(this.tabs, (channel: string) =&gt; &#123;
            GridItem() &#123;
              Text(channel)
                .fontSize((channel?? &#39;&#39;).length &gt; 5 ? &#39;11fp&#39;: &#39;15fp&#39;)
                  // .fontColor($r(&#39;app.color.color202022&#39;))
                .textAlign(TextAlign.Center)
                  // .width(this.itemWidth)
                  // .height(this.itemHeight)
                .width(&#39;100%&#39;)
                .height(80)
                  // .backgroundColor($r(&#39;app.color.colorF9F9F9&#39;))
                .borderRadius(4)
              // .onTouch((event: TouchEvent) =&gt; &#123;
              //   if (event.type === TouchType.Up) &#123;
              //     this.dragChannel = channel.channelName ?? &#39;&#39;;
              //   &#125;
              // &#125;)
            &#125;
          &#125;)
        &#125;
        .columnsTemplate(&#39;1fr 1fr 1fr 1fr&#39;)
        .columnsGap(10)
        .rowsGap(10)
        .onScrollIndex((first: number) =&gt; &#123;
          console.info(first.toString());
        &#125;)
        // .width(&#39;100%&#39;)
        // .height(&#39;80%&#39;)
        .padding(&#123; left: 16, right: 16 &#125;)
        .supportAnimation(true)
        .editMode(true) // Set whether the Grid enters edit mode, allowing dragging of GridItems inside the Grid
        .onItemDragStart((event: ItemDragInfo, itemIndex: number) =&gt; &#123; // Triggered when dragging this component for the first time
          return this.pixelMapBuilder(); // Set the image displayed during dragging
        &#125;)
        .onItemDrop((event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; &#123; // Triggered when stopping dragging within this component
          console.info(&#39;tag&#39; + itemIndex + &#39;&#39;, insertIndex + &#39;&#39;) // itemIndex: drag start position, insertIndex: drag insertion position
          this.changeIndex(itemIndex, insertIndex)
        &#125;)
        .nestedScroll(&#123;
          scrollForward: NestedScrollMode.PARENT_FIRST,
          scrollBackward: NestedScrollMode.SELF_FIRST
        &#125;)

        Text().width(&#39;100%&#39;).height(500)
      &#125;
      .width(&quot;100%&quot;)
      .height(&quot;100%&quot;)
    &#125;
    .width(&#39;100%&#39;)
    .layoutWeight(1)

  &#125;

&#125;.hideTitleBar(true)
</code></pre>
<p>  }</p>
<p>}<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/107-Daily-HarmonyOS-Knowledge-Web-Header-Update-State-Variable-Nested-Issue-Custom-Popup-Stack-Rounded-Corners-Flex-Line-Wrapping-Problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/107-Daily-HarmonyOS-Knowledge-Web-Header-Update-State-Variable-Nested-Issue-Custom-Popup-Stack-Rounded-Corners-Flex-Line-Wrapping-Problem/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Web Header Update, State Variable Nested Issue, Custom Popup, Stack Rounded Corners, Flex Line Wrapping Problem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:34:51 / Modified: 08:35:09" itemprop="dateCreated datePublished" datetime="2025-06-27T08:34:51+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Web-Header-Update-State-Variable-Nested-Issue-Custom-Popup-Stack-Rounded-Corners-Flex-Line-Wrapping-Problem"><a href="#Daily-HarmonyOS-Knowledge-Web-Header-Update-State-Variable-Nested-Issue-Custom-Popup-Stack-Rounded-Corners-Flex-Line-Wrapping-Problem" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Header Update, State Variable Nested Issue, Custom Popup, Stack Rounded Corners, Flex Line Wrapping Problem"></a>[Daily HarmonyOS Knowledge] Web Header Update, State Variable Nested Issue, Custom Popup, Stack Rounded Corners, Flex Line Wrapping Problem</h3><h4 id="1-HarmonyOS-webview-header-cannot-be-updated"><a href="#1-HarmonyOS-webview-header-cannot-be-updated" class="headerlink" title="1. HarmonyOS webview header cannot be updated?"></a>1. HarmonyOS webview header cannot be updated?</h4><p>When page A opens webview page B, the first request includes headers. After exiting page B and dynamically updating the header parameters, packet capture shows that the second request from the webview has no headers. Other details: The header parameters are dynamically updated, and debugging shows that <code>prefetchPage</code> or <code>loadUrl</code> updates the headers each time, but the actual request does not reflect the updates and the headers are empty.  </p>
<p><strong>Explanation</strong>:<br><code>prefetchPage</code> caches the same URL for 5 minutes, and there is no way to check if a URL is cached. When <code>prefetchPage</code> is used to request a cached URL again, it does not trigger a real request and does not include headers.  </p>
<p><strong>Solution</strong>:<br>Use <code>loadUrl</code> instead. When using <code>onControllerAttached</code> simultaneously, set the web <code>src</code> to an empty string to avoid timing issues with the Web component.<br><strong>API Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001847210168__setcustomuseragent10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001847210168__setcustomuseragent10</a>  </p>
<p><strong>Example Code</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Web</span>(&#123; <span class="attr">src</span>: <span class="string">&quot;&quot;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">webViewController</span> &#125;)</span><br><span class="line">  .<span class="title function_">onLoadIntercept</span>(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (event &amp;&amp; event.<span class="property">data</span> &amp;&amp; event.<span class="property">data</span>.<span class="title function_">getRequestUrl</span>()) &#123;</span><br><span class="line">      <span class="keyword">let</span> url = event.<span class="property">data</span>.<span class="title function_">getRequestUrl</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">onControllerAttached</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;yyyyy onControllerAttached&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> headers = <span class="keyword">new</span> <span class="title class_">Array</span>&lt;webview.<span class="property">WebHeader</span>&gt;()</span><br><span class="line">    headers.<span class="title function_">push</span>(&#123; <span class="attr">headerKey</span>: <span class="string">&#x27;AUTHORIZATION&#x27;</span>, <span class="attr">headerValue</span>: <span class="string">&#x27;test value&#x27;</span> &#125;)</span><br><span class="line">    <span class="comment">// this.webViewController.prefetchPage(this.loadUrl, headers)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">webViewController</span>.<span class="title function_">loadUrl</span>(<span class="variable language_">this</span>.<span class="property">loadUrl</span>, headers)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS cannot detect additions of identical data in nested arrays, but can in non-nested arrays?  </span></span><br><span class="line"><span class="string">ArkUI&#x27;s reactivity is tied to `</span><span class="meta">@State</span><span class="string">` variables. While nested array data does change, the UI cannot detect deep changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Recommendation**:  </span></span><br><span class="line"><span class="string">Modify the code as follows:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@State</span> <span class="attr">data5</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RequestData4</span>&gt; = []</span><br><span class="line"><span class="title class_">Text</span>(<span class="string">&quot;Original data:\n&quot;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">data5</span>) ?? <span class="string">&quot;2333&quot;</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">data5</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">data5</span>))</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to use a custom popup in a utility class in HarmonyOS?  </span></span><br><span class="line"><span class="string">Defining `</span><span class="title class_">CustomDialogController</span><span class="string">` in a class and calling it from a component does not trigger the popup. How can `</span><span class="title class_">CustomDialog</span><span class="string">` be implemented in a utility class for component use with customizable content?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**:  </span></span><br><span class="line"><span class="string">`</span><span class="title class_">CustomDialogController</span><span class="string">` can only be used within `</span><span class="meta">@component</span><span class="string">`. For better compatibility, use `</span>promptAction.<span class="property">openCustomDialog</span><span class="string">` instead. Future popup features will be based on `</span>promptAction<span class="string">`.  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Stack rounded corners not working?  </span></span><br><span class="line"><span class="string">**Reference Code**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StackExample</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;First child, show in bottom&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;80%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xd2cab3</span>).<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Top</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Second child, show in top&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;70%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;60%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xc1cbac</span>).<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Top</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">150</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">300</span> &#125;).<span class="title function_">borderRadius</span>(<span class="number">33</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS Flex component set to nowrap truncates content?  </span></span><br><span class="line"><span class="string">The UI uses a Flex component to display small tags, requiring them to stay on a single line. When `</span><span class="title class_">FlexWrap</span>.<span class="property">NoWrap</span><span class="string">` is set, tags overflow and get truncated. Setting `</span><span class="title class_">FlexWrap</span>.<span class="property">Wrap</span><span class="string">` allows wrapping but violates the single-line requirement. How to resolve?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**:  </span></span><br><span class="line"><span class="string">Set a fixed height on the parent component and add the `</span>clip<span class="string">` attribute.  </span></span><br><span class="line"><span class="string">**Documentation**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sharp-clipping-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference Demo**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Test66</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;Xi\&#x27;an&#x27;</span>, <span class="string">&#x27;Chengdu22&#x27;</span>, <span class="string">&#x27;Chengdu33&#x27;</span>, <span class="string">&#x27;Chengdu44&#x27;</span>, <span class="string">&#x27;Chengdu55&#x27;</span>, <span class="string">&#x27;Chengdu66&#x27;</span>, <span class="string">&#x27;Chongqing&#x27;</span>, <span class="string">&#x27;Urumqi&#x27;</span>, <span class="string">&#x27;Beijing&#x27;</span>, <span class="string">&#x27;Hulunbuir&#x27;</span>, <span class="string">&#x27;Beijing333&#x27;</span>];</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(item)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="string">&#x27;16vp&#x27;</span>)</span><br><span class="line">            .<span class="title function_">borderWidth</span>(<span class="string">&#x27;1vp&#x27;</span>)</span><br><span class="line">            .<span class="title function_">borderColor</span>(<span class="string">&#x27;#666666&#x27;</span>)</span><br><span class="line">            .<span class="title function_">borderRadius</span>(<span class="string">&#x27;10vp&#x27;</span>)</span><br><span class="line">            .<span class="title function_">padding</span>(<span class="string">&#x27;3vp&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xDCDCDC</span>).<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/106-Daily-HarmonyOS-Knowledge-Web-Audio-Playback-Interface-Call-Failure-Bottom-Banner-Routing-Issue-Rich-Text-Problem-Modifying-Headers-in-onLoadIntercept/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/106-Daily-HarmonyOS-Knowledge-Web-Audio-Playback-Interface-Call-Failure-Bottom-Banner-Routing-Issue-Rich-Text-Problem-Modifying-Headers-in-onLoadIntercept/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Web Audio Playback, Interface Call Failure, Bottom Banner Routing Issue, Rich Text Problem, Modifying Headers in onLoadIntercept</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:33:53 / Modified: 08:34:07" itemprop="dateCreated datePublished" datetime="2025-06-27T08:33:53+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Web-Audio-Playback-Interface-Call-Failure-Bottom-Banner-Routing-Issue-Rich-Text-Problem-Modifying-Headers-in-onLoadIntercept"><a href="#Daily-HarmonyOS-Knowledge-Web-Audio-Playback-Interface-Call-Failure-Bottom-Banner-Routing-Issue-Rich-Text-Problem-Modifying-Headers-in-onLoadIntercept" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Audio Playback, Interface Call Failure, Bottom Banner Routing Issue, Rich Text Problem, Modifying Headers in onLoadIntercept"></a>[Daily HarmonyOS Knowledge] Web Audio Playback, Interface Call Failure, Bottom Banner Routing Issue, Rich Text Problem, Modifying Headers in onLoadIntercept</h3><h4 id="1-HarmonyOS-web-component-plays-audio-without-sound-until-the-H5-page-is-touched"><a href="#1-HarmonyOS-web-component-plays-audio-without-sound-until-the-H5-page-is-touched" class="headerlink" title="1. HarmonyOS web component plays audio without sound until the H5 page is touched?"></a>1. HarmonyOS web component plays audio without sound until the H5 page is touched?</h4><p>Need to set <code>mediaPlayGestureAccess(false)</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001847049744__mediaplaygestureaccess">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001847049744__mediaplaygestureaccess</a>  </p>
<h4 id="2-HarmonyOS-interface-call-fails"><a href="#2-HarmonyOS-interface-call-fails" class="headerlink" title="2. HarmonyOS interface call fails?"></a>2. HarmonyOS interface call fails?</h4><p>The interface request is blocked with the error: <code>Error: The input string contains unsupported characters</code>, but the interface works in Postman.  </p>
<p>The error indicates unsupported characters in the input string. For Base64 decoding, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-util-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-util-V5</a>.<br>This module provides common utility functions, including string encoding&#x2F;decoding (TextEncoder, TextDecoder), rational number operations (RationalNumber8+), buffer management (LRUCache9+), range checking (ScopeHelper9+), Base64 encoding&#x2F;decoding (Base64Helper9+), built-in object type checking (types8+), method instrumentation and replacement (Aspect11+), etc.  </p>
<h4 id="3-HarmonyOS-bottom-banner-and-subwindow-routing-issue"><a href="#3-HarmonyOS-bottom-banner-and-subwindow-routing-issue" class="headerlink" title="3. HarmonyOS bottom banner and subwindow routing issue?"></a>3. HarmonyOS bottom banner and subwindow routing issue?</h4><p>How to show&#x2F;hide the bottom banner and trigger routing (router.push…) in a subwindow?<br>How to make the target page route from the main window instead of the subwindow?  </p>
<p>Reference code:  </p>
<pre><code>onWindowStageCreate(windowStage: window.WindowStage) &#123;
  windowStage.getMainWindow().then((windowObj) =&gt; &#123;
    windowObj.setWindowLayoutFullScreen(true);
    windowObj.setWindowSystemBarEnable([&#39;status&#39;])
  &#125;);
&#125;

.onClick(()=&gt;&#123;
  // Obtain windowStage via context first
  (getContext() as common.UIAbilityContext).windowStage
    // Get the main window
    .getMainWindowSync().getUIContext()
    // Get the routing stack
    .getRouter()
      // Push the page
    .pushUrl(&#123;
      &quot;url&quot;:&quot;pages/Page&quot;
    &#125;)
&#125;)
</code></pre>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5</a>  </p>
<ul>
<li><strong>Window immersive capability</strong>: Controls system windows like the status bar and navigation bar to reduce their obtrusiveness, enhancing user experience. This capability only takes effect when the app’s main window is in full-screen mode. Subwindows (pop-ups, floating windows, etc.) and the main window in freeform mode typically cannot use immersive capabilities.  </li>
<li><strong>Floating window</strong>: A global floating window is a special app window that can remain visible in the foreground even when the main window and corresponding Ability go to the background. It can be used for continuing video playback in a small window or creating quick access points like floating balls for specific apps. Apps need to request corresponding permissions before creating floating windows.</li>
</ul>
<h4 id="4-How-to-implement-capabilities-similar-to-Html-fromHtml-pageContent"><a href="#4-How-to-implement-capabilities-similar-to-Html-fromHtml-pageContent" class="headerlink" title="4. How to implement capabilities similar to Html.fromHtml(pageContent)?"></a>4. How to implement capabilities similar to Html.fromHtml(pageContent)?</h4><p>The RichText component does not support modifying background color, font color, font size, or dynamically changing content via properties and events. In such cases, using a Web component is recommended. Write the scenario in an H5 page and load it via the Web component.  </p>
<p>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5</a>  </p>
<h4 id="5-How-to-modify-the-header-of-WebResourceRequest-in-HarmonyOS-Web-component’s-onLoadIntercept"><a href="#5-How-to-modify-the-header-of-WebResourceRequest-in-HarmonyOS-Web-component’s-onLoadIntercept" class="headerlink" title="5. How to modify the header of WebResourceRequest in HarmonyOS Web component’s onLoadIntercept?"></a>5. How to modify the header of WebResourceRequest in HarmonyOS Web component’s onLoadIntercept?</h4><p>Modify the header using <code>onInterceptRequest</code>. For specific usage, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5</a>.<br>For setting headers via webview’s loadUrl, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#loadurl">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#loadurl</a>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">317</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
