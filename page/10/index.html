<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/10/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4116%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Custom-Time-Picker-Image-Loading-Local-Resources-Thread-Switching-HAP-Package-Installation-Immersive-Mode-Ineffectiveness/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4116%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Custom-Time-Picker-Image-Loading-Local-Resources-Thread-Switching-HAP-Package-Installation-Immersive-Mode-Ineffectiveness/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Custom Time Picker, Image Loading Local Resources, Thread Switching, HAP Package Installation, Immersive Mode Ineffectiveness</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:59:42 / Modified: 09:59:57" itemprop="dateCreated datePublished" datetime="2025-06-29T09:59:42+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="【Daily-HarmonyOS-Next-Knowledge】Custom-Time-Picker-Image-Loading-Local-Resources-Thread-Switching-HAP-Package-Installation-Immersive-Mode-Ineffectiveness"><a href="#【Daily-HarmonyOS-Next-Knowledge】Custom-Time-Picker-Image-Loading-Local-Resources-Thread-Switching-HAP-Package-Installation-Immersive-Mode-Ineffectiveness" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Custom Time Picker, Image Loading Local Resources, Thread Switching, HAP Package Installation, Immersive Mode Ineffectiveness"></a>【Daily HarmonyOS Next Knowledge】Custom Time Picker, Image Loading Local Resources, Thread Switching, HAP Package Installation, Immersive Mode Ineffectiveness</h1><h4 id="1-How-to-Customize-a-Time-Picker-in-HarmonyOS"><a href="#1-How-to-Customize-a-Time-Picker-in-HarmonyOS" class="headerlink" title="1. How to Customize a Time Picker in HarmonyOS?"></a>1. How to Customize a Time Picker in HarmonyOS?</h4><p>Refer to the following demo:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">let anmDuration: number = 200;</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct TextPickerExample1 &#123;</span><br><span class="line">  @State firstDate: string = &#x27;2024-06-19&#x27;</span><br><span class="line">  @State date: string = &#x27;2024年06月19号&#x27;</span><br><span class="line">  controller: CustomDialogController = new CustomDialogController(&#123;</span><br><span class="line">    builder: TextPicker1(&#123;</span><br><span class="line">      cancel: (date: string) =&gt; &#123;</span><br><span class="line">        this.onCancel(date)</span><br><span class="line">      &#125;,</span><br><span class="line">      confirm: (date: string, date1: Date) =&gt; &#123;</span><br><span class="line">        this.onAccept(date, date1)</span><br><span class="line">      &#125;,</span><br><span class="line">      date: this.firstDate,</span><br><span class="line">    &#125;),</span><br><span class="line">    autoCancel:false,</span><br><span class="line">    cornerRadius: 0,</span><br><span class="line">    customStyle: true,</span><br><span class="line">    alignment: DialogAlignment.BottomEnd</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  onCancel(date: string) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onAccept(date: string, date1: Date) &#123;</span><br><span class="line">    let year: string = date1.getFullYear().toString();</span><br><span class="line">    let month: string = (date1.getMonth() + 1) &lt; 10 ? (&#x27;0&#x27; + (date1.getMonth() + 1)).toString() : (date1.getMonth() + 1).toString();</span><br><span class="line">    let day: string = date1.getDate().toString();</span><br><span class="line">    this.date = year + &#x27;年&#x27; + month + &#x27;月&#x27; + day + &#x27;日&#x27;</span><br><span class="line">    this.firstDate = year + &#x27;-&#x27; + month + &#x27;-&#x27; + day + &#x27;-&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(this.date)</span><br><span class="line">      Text(&#x27;日期&#x27;).onClick(() =&gt; &#123;</span><br><span class="line">        this.controller.open()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@CustomDialog</span><br><span class="line">struct TextPicker1 &#123;</span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    this.selectedDate = new Date(this.date)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @State date: string = &#x27;2026-08-08&#x27;</span><br><span class="line">  controller: CustomDialogController</span><br><span class="line">  // Start year</span><br><span class="line">  @State startYear: number = 1970</span><br><span class="line">  @State isLunar: boolean = false</span><br><span class="line">  @State showFlag: Visibility = Visibility.Visible;</span><br><span class="line">  @State isAutoCancel: boolean = false;</span><br><span class="line">  @State selectedDate: Date = new Date(this.date)</span><br><span class="line">  cancel?: (date: string) =&gt; void</span><br><span class="line">  confirm?: (date: string, date1: Date) =&gt; void</span><br><span class="line">  // Delay closing the dialog to display the custom entry animation</span><br><span class="line"></span><br><span class="line">  @State nowDate: Date = new Date()</span><br><span class="line"></span><br><span class="line">  destroy() &#123;</span><br><span class="line">    this.showFlag = Visibility.Hidden</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      this.controller.close()</span><br><span class="line">    &#125;, anmDuration)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Row() &#123;</span><br><span class="line">          Button(&#x27;取消&#x27;, &#123; type: ButtonType.Normal &#125;).backgroundColor(Color.White).fontColor(Color.Gray)</span><br><span class="line">            .onClick(() =&gt; &#123;</span><br><span class="line">              if (this.cancel) &#123;</span><br><span class="line">                this.destroy();</span><br><span class="line">                this.cancel(this.date)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          Button(&#x27;确定&#x27;, &#123; type: ButtonType.Normal &#125;).backgroundColor(Color.White).fontColor(&quot;#fff5b6dd&quot;)</span><br><span class="line">            .onClick(() =&gt; &#123;</span><br><span class="line">              if (this.confirm) &#123;</span><br><span class="line">                this.destroy();</span><br><span class="line">                this.date = this.nowDate.toString()</span><br><span class="line">                this.confirm(this.date, this.nowDate)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.SpaceBetween)</span><br><span class="line"></span><br><span class="line">        DatePicker(&#123;</span><br><span class="line">          start: new Date(&#x27;1970-1-1&#x27;),</span><br><span class="line">          end: new Date(&#x27;2100-1-1&#x27;),</span><br><span class="line">          selected: this.selectedDate</span><br><span class="line">        &#125;)</span><br><span class="line">          .disappearTextStyle(&#123; color: Color.Gray, font: &#123; size: &#x27;16fp&#x27;, weight: FontWeight.Bold &#125; &#125;)</span><br><span class="line">          .textStyle(&#123; color: &#x27;#ff182431&#x27;, font: &#123; size: &#x27;16&#x27;, weight: FontWeight.Normal &#125; &#125;)</span><br><span class="line">          .selectedTextStyle(&#123; color: &quot;#fff5b6dd&quot;, font: &#123; size: &#x27;22fp&#x27;, weight: FontWeight.Regular &#125; &#125;)</span><br><span class="line">          .lunar(this.isLunar)</span><br><span class="line">          .onDateChange((value: Date) =&gt; &#123;</span><br><span class="line">            this.nowDate = value</span><br><span class="line">            console.info(&#x27;select current date is: &#x27; + value.toString())</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.width(&#x27;100%&#x27;).backgroundColor(Color.White).visibility(this.showFlag)</span><br><span class="line">    // Define entry and exit transition animation effects</span><br><span class="line">    .transition(TransitionEffect.OPACITY.animation(&#123; duration: anmDuration &#125;)</span><br><span class="line">      .combine(TransitionEffect.translate(&#123; y: 100 &#125;)))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-How-Does-the-HarmonyOS-Image-Component-Load-Local-Resources-What-Is-the-Directory-Reading-Method"><a href="#2-How-Does-the-HarmonyOS-Image-Component-Load-Local-Resources-What-Is-the-Directory-Reading-Method" class="headerlink" title="2. How Does the HarmonyOS Image Component Load Local Resources? What Is the Directory Reading Method?"></a>2. How Does the HarmonyOS Image Component Load Local Resources? What Is the Directory Reading Method?</h4><p>How does the system obtain the absolute path based on the relative path for the following instances?  </p>
<ol>
<li>Create a folder for local resources and place local images in any location under the <code>ets</code> folder. The Image component can display the image by introducing the local image path (the root directory is the <code>ets</code> folder).  </li>
<li><code>frameworks/core/image/image_loader.cpp</code> creates different <code>imageLoader</code> instances based on different URLs and follows the corresponding loading logic.  <ul>
<li>For example, writing <code>Image($r(&quot;app.media.symbol&quot;))</code> uses <code>ResourceImageLoader</code>.</li>
</ul>
</li>
</ol>
<h4 id="3-Can-HarmonyOS-ArkTS-Directly-Switch-to-the-UI-Thread-via-CoroutineScope-launch-in-a-Child-Thread-Similar-to-Kotlin"><a href="#3-Can-HarmonyOS-ArkTS-Directly-Switch-to-the-UI-Thread-via-CoroutineScope-launch-in-a-Child-Thread-Similar-to-Kotlin" class="headerlink" title="3. Can HarmonyOS ArkTS Directly Switch to the UI Thread via CoroutineScope.launch in a Child Thread, Similar to Kotlin?"></a>3. Can HarmonyOS ArkTS Directly Switch to the UI Thread via CoroutineScope.launch in a Child Thread, Similar to Kotlin?</h4><p>In child thread A, a child thread B is created. Can thread B directly send messages to the UI thread? Must thread B first send messages to thread A, and then thread A sends messages to the UI thread? Is there a way for thread B to directly send messages to or switch to the UI thread?  </p>
<p>The <code>Emitter</code> can be used for inter-thread communication. The UI thread receives event messages and refreshes the UI. For details, refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/itc-with-emitter-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/itc-with-emitter-V5</a>  </p>
<h4 id="4-How-to-Install-a-HAP-Package-Downloaded-to-a-Mobile-Phone-in-HarmonyOS"><a href="#4-How-to-Install-a-HAP-Package-Downloaded-to-a-Mobile-Phone-in-HarmonyOS" class="headerlink" title="4. How to Install a HAP Package Downloaded to a Mobile Phone in HarmonyOS?"></a>4. How to Install a HAP Package Downloaded to a Mobile Phone in HarmonyOS?</h4><p>How to install a HAP package downloaded to a mobile phone? In the internal environment, after the application is built through the pipeline to obtain the HAP package, how to install it on the phone?  </p>
<ol>
<li>Manual installation by opening the HAP package is currently not supported.  </li>
<li>For open testing, publish the app to AppGallery, specify testers, and follow the application distribution testing process:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-betatest-introduction-0000001071477284">https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-betatest-introduction-0000001071477284</a>  </li>
<li>For internal corporate testing without publishing to AppGallery, refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-internalrelease-0000001756878768">https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-internalrelease-0000001756878768</a></li>
</ol>
<h4 id="5-In-HarmonyOS-Overlay-the-Immersive-Mode-expandSafeArea-Seems-Ineffective-What-Are-the-Overlay-Extension-Rules"><a href="#5-In-HarmonyOS-Overlay-the-Immersive-Mode-expandSafeArea-Seems-Ineffective-What-Are-the-Overlay-Extension-Rules" class="headerlink" title="5. In HarmonyOS Overlay, the Immersive Mode (expandSafeArea) Seems Ineffective. What Are the Overlay Extension Rules?"></a>5. In HarmonyOS Overlay, the Immersive Mode (expandSafeArea) Seems Ineffective. What Are the Overlay Extension Rules?</h4><p>When extending the mask based on <code>navigation</code>, which inherently supports safe area extension, the mask does not cover the full screen as expected. What may be the cause?  </p>
<ul>
<li><code>navigation</code> natively supports safe area avoidance (default: <code>expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP, SafeAreaEdge.BOTTOM])</code>). To cover the full screen, modify it to <code>expandSafeArea([])</code>.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4117-Daily-HarmonyOS-Next-Knowledge-JSON-Dictionary-Issues-Height-Change-Problems-Open-Test-Version-Issues-Dynamic-Library-Single-Architecture-Selection-WebView-and-H5-Interaction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4117-Daily-HarmonyOS-Next-Knowledge-JSON-Dictionary-Issues-Height-Change-Problems-Open-Test-Version-Issues-Dynamic-Library-Single-Architecture-Selection-WebView-and-H5-Interaction/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] JSON Dictionary Issues, Height Change Problems, Open Test Version Issues, Dynamic Library Single Architecture Selection, WebView and H5 Interaction</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:59:01 / Modified: 11:19:44" itemprop="dateCreated datePublished" datetime="2025-06-29T09:59:01+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-JSON-Dictionary-Issues-Height-Change-Problems-Open-Test-Version-Issues-Dynamic-Library-Single-Architecture-Selection-WebView-and-H5-Interaction"><a href="#Daily-HarmonyOS-Next-Knowledge-JSON-Dictionary-Issues-Height-Change-Problems-Open-Test-Version-Issues-Dynamic-Library-Single-Architecture-Selection-WebView-and-H5-Interaction" class="headerlink" title="[Daily HarmonyOS Next Knowledge] JSON Dictionary Issues, Height Change Problems, Open Test Version Issues, Dynamic Library Single Architecture Selection, WebView and H5 Interaction"></a>[Daily HarmonyOS Next Knowledge] JSON Dictionary Issues, Height Change Problems, Open Test Version Issues, Dynamic Library Single Architecture Selection, WebView and H5 Interaction</h1><h4 id="1-Issue-with-HarmonyOS-JSON-stringify-for-a-HashMap"><a href="#1-Issue-with-HarmonyOS-JSON-stringify-for-a-HashMap" class="headerlink" title="1. Issue with HarmonyOS JSON.stringify for a HashMap"></a>1. Issue with HarmonyOS JSON.stringify for a HashMap</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let data = new HashMap&lt;string, string&gt;()   </span><br><span class="line">data.set(&quot;action&quot;, &quot;test&quot;) </span><br><span class="line">let text = JSON.stringify(data)</span><br></pre></td></tr></table></figure>
<p>The output for <code>text</code> is <code>&#123;&#125;</code>. How to add multiple different keys and values and return a JSON string?  </p>
<p>Refer to the following code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">map1</span>: <span class="title class_">HashMap</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">map1.<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;avalue&quot;</span>);</span><br><span class="line">map1.<span class="title function_">set</span>(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;bValue&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="attr">jsonObject</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Object</span>&gt; = &#123;&#125;;</span><br><span class="line">map1.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (key !== <span class="literal">undefined</span> &amp;&amp; value !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">    jsonObject[key] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> jsonString = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(jsonObject);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;jsonString&#x27;</span>, jsonString);</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS page height changes  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In safe area configuration, `</span><span class="title class_">ExpandSafeArea</span><span class="string">` only takes effect for the current component and does not propagate to parent or child components. Therefore, all related components must configure this attribute during use.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span><span class="title class_">ExpandSafeArea</span><span class="string">` attribute is validated earlier than the `</span>position<span class="string">` attribute. If the system determines that the current component&#x27;s position does not involve the safe area (before `</span><span class="title class_">Position</span><span class="string">` takes effect), `</span><span class="title class_">ExpandSafeArea</span><span class="string">` will fail. For example, when placing a component in a `</span><span class="title class_">Stack</span><span class="string">` that is centered by default, `</span><span class="title class_">ExpandSafeArea</span><span class="string">` may fail. Configure `</span>alignContent<span class="string">` as `</span><span class="title class_">Alignment</span>.<span class="property">Top</span><span class="string">` in the parent `</span><span class="title class_">Stack</span><span class="string">` component.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">If `</span><span class="title class_">ExpandSafeArea</span><span class="string">` cannot be enabled but the component needs to be deployed within the safe area, force the position above the status bar by adjusting the y-coordinate upward by 128px (`</span>-<span class="title function_">px2vp</span>(<span class="number">128</span>)<span class="string">`).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For details, refer to the document: https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-expand-safe-area.md  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS open test version has passed automatic review, but the invitation link in the user list remains unsent  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Manually trigger email sending on the distribution details page of Huawei AppGallery. View the invitation status of all current users in AGC of Huawei AppGallery. Resend invitation links to test users who have not received them and remind them to participate in the test.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Hoping to include only arm64_v8a .so libraries in the packaged hap  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The project depends on several har files containing both arm64-v8a and x86_64 architecture .so libraries. How to ensure the packaged hap includes only arm64_v8a .so libraries?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Currently, it is known that `</span>abiFilter<span class="string">` can be configured in `</span>buildOption.<span class="property">externalNativeOptions</span><span class="string">` for CMakeLists.txt. A packaging-time `</span>abiFilter<span class="string">` configuration may be needed to filter out specific architecture so files in har, similar to:  </span></span><br></pre></td></tr></table></figure>
<p>xxxx {defaultConfig {ndk {abiFilters ‘arm64-v8a’, ‘x86_64’}}}</p>
<pre><code>
Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-cpp-V5. Configure exclusions for certain .so files under `nativeLib-&gt;filter-&gt;excludes`, for example:  
```json
// Configure filtering rules for dependent .so resource files
&quot;nativeLib&quot;: &#123;
  &quot;filter&quot;: &#123;
    // Package the highest-priority .so files by priority order
    &quot;pickFirsts&quot;: [&quot;/1.so&quot;],
    // Package the lowest-priority .so files by priority order
    &quot;pickLasts&quot;: [&quot;/2.so&quot;],
    // Excluded .so files
    &quot;excludes&quot;: [
      &quot;/3.so&quot;, // Exclude all .so files named &quot;3&quot;
      &quot;/x86_64/*.so&quot; // Exclude all x86_64 architecture .so files
    ],
    // Allow high-priority .so files to override low-priority ones in case of name conflicts
    &quot;enableOverride&quot;: true
  &#125;
&#125;
</code></pre>
<h4 id="5-HarmonyOS-WebView-and-H5-interaction-issues"><a href="#5-HarmonyOS-WebView-and-H5-interaction-issues" class="headerlink" title="5. HarmonyOS WebView and H5 interaction issues"></a>5. HarmonyOS WebView and H5 interaction issues</h4><p>In other platforms, data interaction with H5 uses <code>window.prompt()</code> or <code>window.XXXX.postMessage()</code> in H5, and the native side parses the jsonString passed by H5 through WebView proxy callbacks to obtain pre-agreed method names and parameters, then calls corresponding methods. Can HarmonyOS native APPs receive message callbacks from <code>prompt()</code> or <code>postMessage()</code>?  </p>
<p>Inject a proxy function after page loading via the <code>runJavaScript</code> API. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onloadintercept10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onloadintercept10</a>. Use <code>onPrompt</code> to intercept <code>window.prompt()</code>. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onprompt9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onprompt9</a>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4118-Daily-HarmonyOS-Next-Knowledge-Push-with-Specified-Page-Parameters-Web-Debugging-with-Devtools-Image-Loading-and-Compression-Including-Third-party-SO-in-HAP-Packages-and-URL-Parameter-Extraction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4118-Daily-HarmonyOS-Next-Knowledge-Push-with-Specified-Page-Parameters-Web-Debugging-with-Devtools-Image-Loading-and-Compression-Including-Third-party-SO-in-HAP-Packages-and-URL-Parameter-Extraction/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Push with Specified Page Parameters, Web Debugging with Devtools, Image Loading and Compression, Including Third-party SO in HAP Packages, and URL Parameter Extraction</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:58:04 / Modified: 11:19:45" itemprop="dateCreated datePublished" datetime="2025-06-29T09:58:04+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Push-with-Specified-Page-Parameters-Web-Debugging-with-Devtools-Image-Loading-and-Compression-Including-Third-party-SO-in-HAP-Packages-and-URL-Parameter-Extraction"><a href="#Daily-HarmonyOS-Next-Knowledge-Push-with-Specified-Page-Parameters-Web-Debugging-with-Devtools-Image-Loading-and-Compression-Including-Third-party-SO-in-HAP-Packages-and-URL-Parameter-Extraction" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Push with Specified Page Parameters, Web Debugging with Devtools, Image Loading and Compression, Including Third-party SO in HAP Packages, and URL Parameter Extraction"></a>[Daily HarmonyOS Next Knowledge] Push with Specified Page Parameters, Web Debugging with Devtools, Image Loading and Compression, Including Third-party SO in HAP Packages, and URL Parameter Extraction</h1><h4 id="1-How-to-push-to-a-specified-page-with-parameters-in-HarmonyOS"><a href="#1-How-to-push-to-a-specified-page-with-parameters-in-HarmonyOS" class="headerlink" title="1. How to push to a specified page with parameters in HarmonyOS?"></a>1. How to push to a specified page with parameters in HarmonyOS?</h4><p>Refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5</a>  </p>
<h4 id="2-How-to-use-HarmonyOS-Devtools-for-Web-debugging"><a href="#2-How-to-use-HarmonyOS-Devtools-for-Web-debugging" class="headerlink" title="2. How to use HarmonyOS Devtools for Web debugging?"></a>2. How to use HarmonyOS Devtools for Web debugging?</h4><p>Follow the link below, where each step is essential: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-debugging-with-devtools-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-debugging-with-devtools-V5</a><br>The Web component supports front-end page debugging using DevTools, a Web front-end development debugging tool that enables debugging mobile device front-end pages on a computer. Developers can enable debugging for Web component front-end pages via the <code>setWebDebuggingAccess()</code> interface. DevTools allows debugging front-end web pages on mobile devices (device version 4.1.0 or higher) from a computer.  </p>
<p><strong>Steps to use DevTools:</strong>  </p>
<ol>
<li>Enable the Web debugging switch in the application code.  </li>
<li>Add the following permission to the <code>module.json5</code> file of the hap module in the DevEco Studio project. For the addition method, refer to declaring permissions in the configuration file.  </li>
<li>Connect the device to the computer and configure port mapping on the computer as follows.  </li>
<li>Enter <code>chrome://inspect/#devices</code> in the address bar of the computer’s Chrome browser. Once the page identifies the device, start page debugging.  </li>
<li>For multi-application debugging, add multiple port numbers in <strong>Devices &gt; configure</strong> of the debugging address to debug multiple applications simultaneously.  </li>
<li>Windows shortcut script: Copy the following content to create a bat file, and execute it after enabling the debugging application.</li>
</ol>
<pre><code class="language-batch">@echo off
setlocal enabledelayedexpansion

:: Initialize port number and PID list
set PORT=9222
set PID_LIST=

:: Get the list of all forwarded ports and PIDs
for /f &quot;tokens=2,5 delims=:_&quot; %%a in (&#39;hdc fport ls&#39;) do (
    if %%a gtr !PORT! (
        set PORT=%%a
    )
    for /f &quot;tokens=1 delims= &quot; %%c in (&quot;%%b&quot;) do (
        set PID_LIST=!PID_LIST! %%c
    )
)

:: Increment port number for next application
set temp_PORT=!PORT!
set /a temp_PORT+=1  
set PORT=!temp_PORT! 

:: Get the domain socket name of devtools
for /f &quot;tokens=*&quot; %%a in (&#39;hdc shell &quot;cat /proc/net/unix | grep devtools&quot;&#39;) do (
    set SOCKET_NAME=%%a

    :: Extract process ID
    for /f &quot;delims=_ tokens=4&quot; %%b in (&quot;!SOCKET_NAME!&quot;) do set PID=%%b

    :: Check if PID already has a mapping
    echo !PID_LIST! | findstr /C:&quot; !PID! &quot; &gt;nul
    if errorlevel 1 (
        :: Add mapping
        hdc fport tcp:!PORT! localabstract:webview_devtools_remote_!PID!
        if errorlevel 1 (
            echo Error: Failed to add mapping.
            pause
            exit /b
        )

        :: Add PID to list and increment port number for next application 
        set PID_LIST=!PID_LIST! !PID!
        set temp_PORT=!PORT!
        set /a temp_PORT+=1  
        set PORT=!temp_PORT! 
    )
)

:: If no process ID was found, prompt the user to open debugging in their application code and provide the documentation link
if &quot;!SOCKET_NAME!&quot;==&quot;&quot; (
    echo No process ID was found. Please open debugging in your application code using the corresponding interface. You can find the relevant documentation at this link: [https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/web/web-debugging-with-devtools.md]
    pause
    exit /b
)

:: Check mapping
hdc fport ls

echo.
echo Script executed successfully. Press any key to exit...
pause &gt;nul

:: Try to open the page in Edge
start msedge chrome://inspect/#devices.com

:: If Edge is not available, then open the page in Chrome
if errorlevel 1 (
    start chrome chrome://inspect/#devices.com
)

endlocal
</code></pre>
<ol start="7">
<li>Mac&#x2F;Linux shortcut script: Copy the following content to create a sh file. Note the <code>chmod</code> and format conversion, and execute it after enabling the debugging application.</li>
</ol>
<pre><code class="language-bash">#!/bin/bash

# Get current fport rule list
CURRENT_FPORT_LIST=$(hdc fport ls)

# Delete the existing fport rule one by one
while IFS= read -r line; do
    # Extract the taskline
    IFS=&#39; &#39; read -ra parts &lt;&lt;&lt; &quot;$line&quot;
    taskline=&quot;$&#123;parts[1]&#125; $&#123;parts[2]&#125;&quot;

    # Delete the corresponding fport rule
    echo &quot;Removing forward rule for $taskline&quot;
    hdc fport rm $taskline
    result=$?

    if [ $result -eq 0 ]; then
        echo &quot;Remove forward rule success, taskline:$taskline&quot;
    else
        echo &quot;Failed to remove forward rule, taskline:$taskline&quot;
    fi

done &lt;&lt;&lt; &quot;$CURRENT_FPORT_LIST&quot;

# Initial port number
INITIAL_PORT=9222
 
# Get the current port number, use initial port number if not set previously
CURRENT_PORT=$&#123;PORT:-$INITIAL_PORT&#125;

# Get the list of all PIDs that match the condition
PID_LIST=$(hdc shell cat /proc/net/unix | grep webview_devtools_remote_ | awk -F &#39;_&#39; &#39;&#123;print $NF&#125;&#39;)

if [ -z &quot;$PID_LIST&quot; ]; then
    echo &quot;Failed to retrieve PID from the device&quot;
    exit 1
fi

# Increment the port number
PORT=$CURRENT_PORT

# Forward ports for each application one by one
for PID in $PID_LIST; do
    # Increment the port number
    PORT=$((PORT + 1))

    # Execute the hdc fport command
    hdc fport tcp:$PORT localabstract:webview_devtools_remote_$PID
 
    # Check if the command executed successfully
    if [ $? -ne 0 ]; then
        echo &quot;Failed to execute hdc fport command&quot;
        exit 1
    fi
done

# List all forwarded ports
hdc fport ls
</code></pre>
<h4 id="3-Image-loading-and-compression-services-in-HarmonyOS"><a href="#3-Image-loading-and-compression-services-in-HarmonyOS" class="headerlink" title="3. Image loading and compression services in HarmonyOS"></a>3. Image loading and compression services in HarmonyOS</h4><p>The Image component supports displaying images in applications, and ImagePacker supports image compression and packaging for developers.  </p>
<ul>
<li>Image official reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5</a>  </li>
<li>ImagePacker official reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-image-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-image-V5</a></li>
</ul>
<h4 id="4-How-to-include-third-party-SO-files-in-HAP-packages-in-HarmonyOS"><a href="#4-How-to-include-third-party-SO-files-in-HAP-packages-in-HarmonyOS" class="headerlink" title="4. How to include third-party SO files in HAP packages in HarmonyOS?"></a>4. How to include third-party SO files in HAP packages in HarmonyOS?</h4><p>Declare the module’s C&#x2F;C++ interface files in <code>nativeLib/headerPath</code> and expose them to dependent modules via packaging: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-cpp-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-cpp-V5</a>  </p>
<h4 id="5-Does-the-value-obtained-by-HarmonyOS-url-parse-params-get-method-represent-decoded-content"><a href="#5-Does-the-value-obtained-by-HarmonyOS-url-parse-params-get-method-represent-decoded-content" class="headerlink" title="5. Does the value obtained by HarmonyOS url.parse.params.get() method represent decoded content?"></a>5. Does the value obtained by HarmonyOS <code>url.parse.params.get()</code> method represent decoded content?</h4><p>The <code>toString()</code> method does not decode, while <code>params.get()</code> retrieves the original value from <code>params</code> by key. The rule is that decoding is performed.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41110-Daily-HarmonyOS-Next-Knowledge-Screen-Height-Certificate-Signing-Dark-Mode-Impact-on-Release-Taskpool-Context-List-Bottom-Loading/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41110-Daily-HarmonyOS-Next-Knowledge-Screen-Height-Certificate-Signing-Dark-Mode-Impact-on-Release-Taskpool-Context-List-Bottom-Loading/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screen Height, Certificate Signing, Dark Mode Impact on Release, Taskpool Context, List Bottom Loading</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:56:35 / Modified: 09:57:19" itemprop="dateCreated datePublished" datetime="2025-06-29T09:56:35+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Screen-Height-Certificate-Signing-Dark-Mode-Impact-on-Release-Taskpool-Context-List-Bottom-Loading"><a href="#Daily-HarmonyOS-Next-Knowledge-Screen-Height-Certificate-Signing-Dark-Mode-Impact-on-Release-Taskpool-Context-List-Bottom-Loading" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screen Height, Certificate Signing, Dark Mode Impact on Release, Taskpool Context, List Bottom Loading"></a>[Daily HarmonyOS Next Knowledge] Screen Height, Certificate Signing, Dark Mode Impact on Release, Taskpool Context, List Bottom Loading</h1><h4 id="1-About-screen-height-in-HarmonyOS"><a href="#1-About-screen-height-in-HarmonyOS" class="headerlink" title="1. About screen height in HarmonyOS"></a>1. About screen height in HarmonyOS</h4><p><code>display.getDefaultDisplaySync</code> can get the entire screen height. How to get the heights of the top status bar and bottom safe area?  </p>
<p>They can be obtained and stored in <code>EntryAbility</code>. The obtained heights are in pixels, so convert them to VPs using <code>px2vp()</code>:  </p>
<pre><code class="language-typescript">onWindowStageCreate(windowStage: window.WindowStage) &#123;
  // Main window is created, set main page for this ability
  hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onWindowStageCreate&#39;);

  windowStage.loadContent(&#39;pages/Index&#39;, (err, data) =&gt; &#123;
    if (err.code) &#123;
      hilog.error(0x0000, &#39;testTag&#39;, &#39;Failed to load the content. Cause: %&#123;public&#125;s&#39;, JSON.stringify(err) ?? &#39;&#39;);
      return;
    &#125;
    hilog.info(0x0000, &#39;testTag&#39;, &#39;Succeeded in loading the content. Data: %&#123;public&#125;s&#39;, JSON.stringify(data) ?? &#39;&#39;);

    let windowClass = windowStage.getMainWindowSync();
    let statusHeight = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM).topRect.height;
    let bottomHeight = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_NAVIGATION_INDICATOR).bottomRect.height;
    AppStorage.setOrCreate(&#39;bottomHeight&#39;, px2vp(bottomHeight));
    AppStorage.setOrCreate(&#39;statusHeight&#39;, px2vp(statusHeight));
  &#125;);
&#125;
</code></pre>
<p>Retrieve them in the required interface using <code>AppStorage.get(&#39;bottomHeight&#39;)</code> and <code>AppStorage.get(&#39;statusHeight&#39;)</code>.  </p>
<h4 id="2-HarmonyOS-Manual-signing-with-release-certificate-fails-to-install-the-app-on-the-engineering-device"><a href="#2-HarmonyOS-Manual-signing-with-release-certificate-fails-to-install-the-app-on-the-engineering-device" class="headerlink" title="2. HarmonyOS: Manual signing with release certificate fails to install the app on the engineering device"></a>2. HarmonyOS: Manual signing with release certificate fails to install the app on the engineering device</h4><p>After configuring manual signing with a release certificate, the .cer and .p7b files are downloaded from AppGallery Connect. However, clicking “Run” in DevEco Studio fails to install on the engineering device, with the error: “code:9568322 error: signature verification failed due to not trusted app source”.  </p>
<p>Does manual signing with a release certificate require registering debug devices? There is no option to register debug devices in the AppGallery Connect release certificate settings.  </p>
<p>The issue occurs because the signature does not include the UDID of the debug device. Solve it by following these steps:  </p>
<ol>
<li>Use automatic signing. After connecting the device, resign the app. Specific steps: Go to File &gt; Project Structure &gt; Project &gt; Signing Configs, check “Automatically generate signature” (for API 8 and 9 projects, also check “SupportHarmonyOS”) to complete signing. If not logged in, click Sign In first, then signing is completed automatically.  </li>
<li>If using manual signing, register the debug device in AppGallery Connect and add it when applying for the Profile file, then reapply for the Profile certificate. Packages signed with a release certificate cannot be debugged and installed locally.</li>
</ol>
<h4 id="3-Does-not-adapting-to-dark-mode-affect-the-final-version-release-of-a-HarmonyOS-APP"><a href="#3-Does-not-adapting-to-dark-mode-affect-the-final-version-release-of-a-HarmonyOS-APP" class="headerlink" title="3. Does not adapting to dark mode affect the final version release of a HarmonyOS APP?"></a>3. Does not adapting to dark mode affect the final version release of a HarmonyOS APP?</h4><ol>
<li>Does not adapting to dark mode affect version release?  </li>
<li>Must dark mode adaptation simultaneously adapt to mobile phones, tablets, and 2in1 (PC) devices?</li>
</ol>
<p>You can actively set the light mode. By default, the app is configured to follow the system’s light&#x2F;dark mode. If you do not want the app to follow the system, actively set the app’s light&#x2F;dark style. After setting, the app’s mode is fixed and will not change with the system. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5#section19361879317">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5#section19361879317</a><br>Code to set light mode:<br><code>getContext(this).getApplicationContext().setColorMode(ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT);</code>  </p>
<h4 id="4-How-to-obtain-the-application-Context-in-a-Concurrent-method-within-taskPool-in-HarmonyOS"><a href="#4-How-to-obtain-the-application-Context-in-a-Concurrent-method-within-taskPool-in-HarmonyOS" class="headerlink" title="4. How to obtain the application Context in a @Concurrent method within taskPool in HarmonyOS"></a>4. How to obtain the application Context in a @Concurrent method within taskPool in HarmonyOS</h4><p>Directly calling <code>getContext()</code> in a @Concurrent method within taskPool throws an exception. It is necessary to use preference storage and relationalStore database in taskPool. How to safely obtain the current application’s ApplicationContext object in a @Concurrent method within taskPool?  </p>
<p>@Concurrent allows using local variables, input parameters, and variables introduced via import. Using closure variables is prohibited. Check if the @Concurrent usage is incorrect.  </p>
<h4 id="5-Does-the-HarmonyOS-List-component-have-attributes-or-methods-for-bottom-loading"><a href="#5-Does-the-HarmonyOS-List-component-have-attributes-or-methods-for-bottom-loading" class="headerlink" title="5. Does the HarmonyOS List component have attributes or methods for bottom loading?"></a>5. Does the HarmonyOS List component have attributes or methods for bottom loading?</h4><p>The <code>onReachEnd</code> event can be used to implement lazy data loading. When the <code>onReachEnd</code> event is triggered, asynchronously obtain a specified number of list data in the callback function to get the next page of data each time the list slides to the bottom.<br>Refer to the official documentation:  </p>
<ul>
<li>Long list loading performance optimization: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/bpta-best-practices-long-list#section69931513103314">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/bpta-best-practices-long-list#section69931513103314</a></li>
</ul>
<p>Principles and rendering process of LazyForEach lazy loading:  </p>
<ol>
<li>LazyForEach loads data on demand based on the number of components that can be displayed in the screen viewport.  </li>
<li>Create components based on the loaded data volume, mount them on the component tree, and build a short component tree. That is, create and mount as many ListItem component nodes as the number of list items that can be displayed on the screen under the List component root node.  </li>
<li>Only part of the components are displayed in the screen viewport. When components outside the viewport need to be displayed on the screen, the process of data loading, component creation, and component tree mounting must be completed from scratch until rendering on the screen.</li>
</ol>
<p>Schematic diagram of data loading, component tree mounting, and page rendering:<br>sh  </p>
<p>LazyForEach implements on-demand loading, reducing the time consumption of one-time data loading and memory peak values for scenarios with large list data and complex list components. However, during long list scrolling, continuous loading of new content based on user scrolling behavior requires additional data requests and processing, increasing calculation during scrolling and affecting performance. However, reasonably using LazyForEach’s on-demand loading capability by loading only when scrolling stops or reaches a threshold can reduce unnecessary calculations and requests, thereby improving performance and user experience. In summary, in scenarios implementing on-demand loading, it is necessary to comprehensively consider the balance between performance and user experience, and reasonably optimize the loading logic and rendering method to enhance overall performance.  </p>
<ul>
<li>LazyForEach: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5</a></li>
</ul>
<p>LazyForEach iterates data on demand from the provided data source and creates corresponding components during each iteration. When LazyForEach is used in a scrolling container, the framework creates components on demand based on the visible area of the scrolling container. When components slide out of the visible area, the framework destroys and recycles them to reduce memory usage.# [Daily HarmonyOS Next Knowledge] Screen Height, Certificate Signing, Impact of Dark Mode on App Submission, Taskpool Context, List Loading More on Scroll  </p>
<h4 id="1-HarmonyOS-screen-height"><a href="#1-HarmonyOS-screen-height" class="headerlink" title="1. HarmonyOS screen height?"></a>1. HarmonyOS screen height?</h4><p><code>display.getDefaultDisplaySync()</code> can get the entire screen height. How to get the heights of the top status bar and bottom safe area?  </p>
<p>Retrieve and store these values in <code>EntryAbility</code>. The heights are in pixels (px), convert to viewport units (vp) using <code>px2vp()</code>:  </p>
<pre><code class="language-typescript">onWindowStageCreate(windowStage: window.WindowStage) &#123;
  // Main window is created, set main page for this ability
  hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onWindowStageCreate&#39;);

  windowStage.loadContent(&#39;pages/Index&#39;, (err, data) =&gt; &#123;
    if (err.code) &#123;
      hilog.error(0x0000, &#39;testTag&#39;, &#39;Failed to load the content. Cause: %&#123;public&#125;s&#39;, JSON.stringify(err) ?? &#39;&#39;);
      return;
    &#125;
    hilog.info(0x0000, &#39;testTag&#39;, &#39;Succeeded in loading the content. Data: %&#123;public&#125;s&#39;, JSON.stringify(data) ?? &#39;&#39;);

    let windowClass = windowStage.getMainWindowSync();
    let statusHeight = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM).topRect.height;
    let bottomHeight = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_NAVIGATION_INDICATOR).bottomRect.height;
    AppStorage.setOrCreate(&#39;bottomHeight&#39;, px2vp(bottomHeight));
    AppStorage.setOrCreate(&#39;statusHeight&#39;, px2vp(statusHeight));
  &#125;);
&#125;
</code></pre>
<p>Retrieve values in components using <code>AppStorage.get(&#39;bottomHeight&#39;)</code> and <code>AppStorage.get(&#39;statusHeight&#39;)</code>.  </p>
<h4 id="2-HarmonyOS-manual-signing-with-release-certificate-fails-to-install-app-on-development-device"><a href="#2-HarmonyOS-manual-signing-with-release-certificate-fails-to-install-app-on-development-device" class="headerlink" title="2. HarmonyOS manual signing with release certificate fails to install app on development device?"></a>2. HarmonyOS manual signing with release certificate fails to install app on development device?</h4><p>Configured manual signing with release certificate (.cer and .p7b files downloaded from AppGallery Connect). Clicking “Run” in DevEco Studio fails to install on the device with error:<br>“code:9568322 error: signature verification failed due to not trusted app source”.  </p>
<p>Do I need to register the debugging device when manually signing with a release certificate? There’s no option to register devices in AppGallery Connect’s release certificate section.  </p>
<p><strong>Solution</strong>: The issue occurs because the debug device’s UDID is not included in the signature. Resolve by:  </p>
<ol>
<li><strong>Use automatic signing</strong>:  <ul>
<li>Connect device, go to <strong>File &gt; Project Structure &gt; Project &gt; Signing Configs</strong>.  </li>
<li>Check <strong>“Automatically generate signature”</strong> (for API 8&#x2F;9 projects, also check <strong>“SupportHarmonyOS”</strong>).  </li>
<li>Log in if prompted to complete signing.</li>
</ul>
</li>
<li><strong>For manual signing</strong>:  <ul>
<li>Register the debug device in AppGallery Connect.  </li>
<li>When creating the Profile, include this device.  </li>
<li>Reapply for the Profile certificate.  </li>
<li><strong>Note</strong>: Release-signed packages cannot be debug-installed locally.</li>
</ul>
</li>
</ol>
<h4 id="3-Does-an-unsigned-HarmonyOS-app-affect上架-submission-to-AppGallery"><a href="#3-Does-an-unsigned-HarmonyOS-app-affect上架-submission-to-AppGallery" class="headerlink" title="3. Does an unsigned HarmonyOS app affect上架 (submission to AppGallery)?"></a>3. Does an unsigned HarmonyOS app affect上架 (submission to AppGallery)?</h4><ol>
<li>Will an app without dark mode support be rejected during submission?  </li>
<li>Must dark mode be supported on phones, tablets, and 2-in-1 (PC) devices simultaneously?</li>
</ol>
<p><strong>Answer</strong>:  </p>
<ul>
<li>Apps can explicitly set a light theme to avoid following system dark mode.  </li>
<li>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5#section19361879317">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5#section19361879317</a>  </li>
<li>Set light mode code:  <pre><code class="language-typescript">getContext(this).getApplicationContext().setColorMode(ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT);
</code></pre>
</li>
</ul>
<h4 id="4-How-to-get-the-application-context-in-a-Concurrent-method-within-taskPool"><a href="#4-How-to-get-the-application-context-in-a-Concurrent-method-within-taskPool" class="headerlink" title="4. How to get the application context in a @Concurrent method within taskPool?"></a>4. How to get the application context in a @Concurrent method within taskPool?</h4><p>Calling <code>getContext()</code> directly in a <code>@Concurrent</code> method throws an exception. How to safely access <code>ApplicationContext</code> when using <code>preference</code> storage or <code>relationalStore</code> in taskPool?  </p>
<p><strong>Note</strong>:<br><code>@Concurrent</code> methods allow:  </p>
<ul>
<li>Local variables  </li>
<li>Method parameters  </li>
<li>Variables imported via <code>import</code><br>They <strong>prohibit</strong> capturing closure variables. Verify your usage of <code>@Concurrent</code>.</li>
</ul>
<h4 id="5-Does-the-HarmonyOS-List-component-have-a-built-in-method-to-load-more-data-when-scrolling-to-the-bottom"><a href="#5-Does-the-HarmonyOS-List-component-have-a-built-in-method-to-load-more-data-when-scrolling-to-the-bottom" class="headerlink" title="5. Does the HarmonyOS List component have a built-in method to load more data when scrolling to the bottom?"></a>5. Does the HarmonyOS List component have a built-in method to load more data when scrolling to the bottom?</h4><p>Use the <code>onReachEnd</code> event for lazy loading:  </p>
<ul>
<li>Trigger asynchronous data fetching when the list reaches the end.  </li>
<li>Load the next page of data each time the bottom is reached.</li>
</ul>
<p><strong>References</strong>:  </p>
<ul>
<li>Long list performance optimization: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/bpta-best-practices-long-list#section69931513103314">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/bpta-best-practices-long-list#section69931513103314</a></li>
</ul>
<p><strong>LazyForEach principle</strong>:  </p>
<ol>
<li>Loads data based on the number of components visible in the viewport.  </li>
<li>Creates and mounts only necessary components to the tree.  </li>
<li>Renders components on-demand as they enter the viewport.</li>
</ol>
<p><strong>Benefits</strong>:  </p>
<ul>
<li>Reduces initial load time and memory footprint.  </li>
<li>May impact scrolling performance due to dynamic loading.  </li>
<li>Optimize by loading data when scrolling stops or reaches a threshold.</li>
</ul>
<p><strong>Documentation</strong>:  </p>
<ul>
<li>LazyForEach: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5</a></li>
</ul>
<p><strong>How it works</strong>:  </p>
<ul>
<li>Iterates data source on-demand.  </li>
<li>Creates components as they enter the viewport.  </li>
<li>Destroys components when they exit to free memory.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41112-Daily-HarmonyOS-Next-Knowledge-Intermediate-Artifact-Version-Number-Issues-Toast-Not-Working-Outside-App-Dialog-Keyboard-Problem-WebView-Cookie-Local-Cache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41112-Daily-HarmonyOS-Next-Knowledge-Intermediate-Artifact-Version-Number-Issues-Toast-Not-Working-Outside-App-Dialog-Keyboard-Problem-WebView-Cookie-Local-Cache/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Intermediate Artifact Version Number Issues, Toast Not Working Outside App, Dialog Keyboard Problem, WebView Cookie, Local Cache</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:55:12 / Modified: 09:55:34" itemprop="dateCreated datePublished" datetime="2025-06-29T09:55:12+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Intermediate-Artifact-Version-Number-Issues-Toast-Not-Working-Outside-App-Dialog-Keyboard-Problem-WebView-Cookie-Local-Cache"><a href="#Daily-HarmonyOS-Next-Knowledge-Intermediate-Artifact-Version-Number-Issues-Toast-Not-Working-Outside-App-Dialog-Keyboard-Problem-WebView-Cookie-Local-Cache" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Intermediate Artifact Version Number Issues, Toast Not Working Outside App, Dialog Keyboard Problem, WebView Cookie, Local Cache"></a>[Daily HarmonyOS Next Knowledge] Intermediate Artifact Version Number Issues, Toast Not Working Outside App, Dialog Keyboard Problem, WebView Cookie, Local Cache</h1><h4 id="1-Version-number-issue-in-import-of-business-bundle-intermediate-artifacts"><a href="#1-Version-number-issue-in-import-of-business-bundle-intermediate-artifacts" class="headerlink" title="1. Version number issue in import of business bundle intermediate artifacts"></a>1. Version number issue in import of business bundle intermediate artifacts</h4><p>If a business bundle depends on an artifact B.har (version 0.0.1), the import path of components or APIs from B.har in the intermediate artifact will directly include the version number @0.0.1. If another version of B.har is overridden in the entry, although no error is logged, runtime issues may occur with B.har.  </p>
<p>It is hoped that the compiler can optimize dependency imports to remove version number markers or provide alternative solutions to avoid related issues.  </p>
<p>When the entry introduces B.har version 1.0.0, the intermediate artifact import path is 1.0.0. After overriding to 1.0.1 at the project level, the intermediate artifact import path changes to 1.0.1.  </p>
<h4 id="2-HarmonyOS-promptAction-showToast-pop-up-not-working-outside-the-app"><a href="#2-HarmonyOS-promptAction-showToast-pop-up-not-working-outside-the-app" class="headerlink" title="2. HarmonyOS promptAction.showToast pop-up not working outside the app"></a>2. HarmonyOS promptAction.showToast pop-up not working outside the app</h4><p>When the app exits, the opened toast is destroyed along with the component and cannot be retained.  </p>
<h4 id="3-HarmonyOS-Dialog-input-control-issue-Dialog-displacement-length-does-not-match-keyboard-height-when-the-keyboard-pops-up"><a href="#3-HarmonyOS-Dialog-input-control-issue-Dialog-displacement-length-does-not-match-keyboard-height-when-the-keyboard-pops-up" class="headerlink" title="3. HarmonyOS Dialog input control issue: Dialog displacement length does not match keyboard height when the keyboard pops up"></a>3. HarmonyOS Dialog input control issue: Dialog displacement length does not match keyboard height when the keyboard pops up</h4><p>When adding a TextInput control to a Dialog, the control is pushed up by the keyboard when it gains focus, but the pushed distance is longer than the keyboard height. It is expected that the pop-up distance matches the keyboard height.  </p>
<p>There is a default 16vp safe distance between the pop-up and the soft keyboard, which is the current specification.<br>Specific reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-common-components-custom-dialog-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-common-components-custom-dialog-V5</a>  </p>
<h4 id="4-HarmonyOS-Webview-cookie-missing-fields-when-writing"><a href="#4-HarmonyOS-Webview-cookie-missing-fields-when-writing" class="headerlink" title="4. HarmonyOS Webview cookie missing fields when writing"></a>4. HarmonyOS Webview cookie missing fields when writing</h4><p>For the same object data, storing it in a cookie using JSON.stringify(data) preserves completeness, while storing the object directly causes data loss.  </p>
<p>Directly setting object data results in undefined when retrieved, as objects are not supported for direct setting. Webview cookies are all strings; refer to the API: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001920279886__configcookiesync11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001920279886__configcookiesync11</a>  </p>
<p>When an H5 page directly sets an object, the retrieved value is undefined. Using the js-cookie library requires serialized strings for cookie.set.  </p>
<h4 id="5-HarmonyOS-local-cache-issue"><a href="#5-HarmonyOS-local-cache-issue" class="headerlink" title="5. HarmonyOS local cache issue"></a>5. HarmonyOS local cache issue</h4><p>Storing business data locally for use during cold starts.<br>Refer to the data storage solutions in the link and select an appropriate persistent storage solution based on business needs:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkdata-kit-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkdata-kit-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41113-Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41113-Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] HAP Installation Error, App Account Transfer, Local File Import, Remote Package Build Issues, Frontend Page Access Methods</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:53:53 / Modified: 09:55:17" itemprop="dateCreated datePublished" datetime="2025-06-29T09:53:53+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods"><a href="#Daily-HarmonyOS-Next-Knowledge-HAP-Installation-Error-App-Account-Transfer-Local-File-Import-Remote-Package-Build-Issues-Frontend-Page-Access-Methods" class="headerlink" title="[Daily HarmonyOS Next Knowledge] HAP Installation Error, App Account Transfer, Local File Import, Remote Package Build Issues, Frontend Page Access Methods"></a>[Daily HarmonyOS Next Knowledge] HAP Installation Error, App Account Transfer, Local File Import, Remote Package Build Issues, Frontend Page Access Methods</h1><h4 id="1-How-to-solve-the-HAP-installation-error-after-HarmonyOS-packaging"><a href="#1-How-to-solve-the-HAP-installation-error-after-HarmonyOS-packaging" class="headerlink" title="1. How to solve the HAP installation error after HarmonyOS packaging?"></a>1. How to solve the HAP installation error after HarmonyOS packaging?</h4><p>When installing a HAP file generated by build via hdc, an error occurs, and the certificate information is confirmed to be release. How to solve it?  </p>
<p><strong>Solution</strong>: Release certificates cannot be used for installation.  </p>
<h4 id="2-Can-apps-created-under-a-HarmonyOS-ordinary-account-be-deleted-or-transferred-to-another-enterprise-inhouse-account"><a href="#2-Can-apps-created-under-a-HarmonyOS-ordinary-account-be-deleted-or-transferred-to-another-enterprise-inhouse-account" class="headerlink" title="2. Can apps created under a HarmonyOS ordinary account be deleted or transferred to another enterprise inhouse account?"></a>2. Can apps created under a HarmonyOS ordinary account be deleted or transferred to another enterprise inhouse account?</h4><p>They can be deleted and re-created under an enterprise account, but direct transfer is not supported.  </p>
<h4 id="3-How-to-import-local-files-in-HarmonyOS"><a href="#3-How-to-import-local-files-in-HarmonyOS" class="headerlink" title="3. How to import local files in HarmonyOS?"></a>3. How to import local files in HarmonyOS?</h4><p>When importing self-written files in a project, excessive hierarchy issues may occur, such as:  </p>
<pre><code class="language-typescript">import CommonConstants from &#39;../../../commons/constants/CommonConstants&#39;;
</code></pre>
<p>Is there a way to set up shortcut references similar to TS configuration in <code>compilerOptions</code>? Which configuration file needs to be modified?  </p>
<p>Desired reference format:  </p>
<pre><code class="language-typescript">import CommonConstants from &#39;@commons/CommonConstants&#39;
</code></pre>
<p><strong>Solution</strong>: In the <code>oh-package.json5</code> file of the model directory requiring the library, add the library dependency in the <code>dependencies</code> block:  </p>
<pre><code class="language-json5">&quot;dependencies&quot;: &#123;
  &quot;libraryFirst&quot;: &quot;file:../libraryFirst&quot;
&#125;
</code></pre>
<ul>
<li><code>libraryFirst</code> is an alias (arbitrary name), and the value is the path.  </li>
<li>Usage: <code>import &#123; add &#125; from &#39;libraryFirst&#39;</code>.</li>
</ul>
<p><strong>Reference</strong>: Dynamic import documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-dynamic-import-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-dynamic-import-V5</a>  </p>
<ul>
<li>Dynamic import supports conditional lazy loading and partial reflection, improving page loading speed.  </li>
<li>It supports loading HSP modules&#x2F;HAR modules&#x2F;OHPM packages&#x2F;Native libraries, and enables module decoupling when variables are dynamically imported between HAR modules.  </li>
<li>Use cases for dynamic import:  <ul>
<li>When statically imported modules significantly slow down code loading and are rarely used.  </li>
<li>When statically imported modules consume excessive system memory and are rarely used.  </li>
<li>When the imported module does not exist at loading time and needs to be acquired asynchronously.  </li>
<li>When the module specifier needs to be dynamically constructed (static import only supports static specifiers).  </li>
<li>When the imported module has side effects (code that runs directly in the module) required only under certain conditions.</li>
</ul>
</li>
</ul>
<h4 id="4-Remote-package-build-issue-“The-hvigor-depends-on-the-npmrc-file-Configure-the-npmrc-file-first-”"><a href="#4-Remote-package-build-issue-“The-hvigor-depends-on-the-npmrc-file-Configure-the-npmrc-file-first-”" class="headerlink" title="4. Remote package build issue: “The hvigor depends on the npmrc file. Configure the npmrc file first.”"></a>4. Remote package build issue: “The hvigor depends on the npmrc file. Configure the npmrc file first.”</h4><p>Error occurs during remote package build in the pipeline environment:<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.13.png"></p>
<p><strong>Error message</strong>: The hvigor depends on the npmrc file. Configure the npmrc file first.  </p>
<p><strong>Issue</strong>: The npmrc file is already configured in the remote environment. What is the problem?  </p>
<p><strong>Solution</strong>: The <code>.npmrc</code> file must be configured in the user directory, and the current directory must have accessible permissions.  </p>
<h4 id="5-How-does-a-HarmonyOS-app-access-frontend-page-methods"><a href="#5-How-does-a-HarmonyOS-app-access-frontend-page-methods" class="headerlink" title="5. How does a HarmonyOS app access frontend page methods?"></a>5. How does a HarmonyOS app access frontend page methods?</h4><p>The app needs to accept frontend method calls, and after execution, run a JS script to trigger an asynchronous callback. How should frontend methods be registered for normal invocation by the app?  </p>
<p><strong>Solution</strong>: Use the WebView’s <code>runJavaScript</code> method to asynchronously execute JS scripts and return results via callbacks. Call <code>runJavaScript</code> after <code>loadUrl</code> is completed (e.g., in <code>onPageEnd</code>).<br><strong>Official example reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__runjavascript">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#ZH-CN_TOPIC_0000001930676933__runjavascript</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41114-Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41114-Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Component Loading Blank, C++ Callback to ArkTS, Bottom Banner Hide/Show, Excessive Build Warnings, Real-time Communication Between ArkTS and C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:52:43 / Modified: 09:53:05" itemprop="dateCreated datePublished" datetime="2025-06-29T09:52:43+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Component-Loading-Blank-C-Callback-to-ArkTS-Bottom-Banner-Hide-Show-Excessive-Build-Warnings-Real-time-Communication-Between-ArkTS-and-C" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Component Loading Blank, C++ Callback to ArkTS, Bottom Banner Hide&#x2F;Show, Excessive Build Warnings, Real-time Communication Between ArkTS and C++"></a>[Daily HarmonyOS Next Knowledge] Web Component Loading Blank, C++ Callback to ArkTS, Bottom Banner Hide&#x2F;Show, Excessive Build Warnings, Real-time Communication Between ArkTS and C++</h1><h4 id="1-HarmonyOS-web-component-loads-a-blank-page"><a href="#1-HarmonyOS-web-component-loads-a-blank-page" class="headerlink" title="1. HarmonyOS web component loads a blank page?"></a>1. HarmonyOS web component loads a blank page?</h4><p>When loading some URLs, the header title and back button of the front-end page are displayed, but the main content is blank.  </p>
<p>Add the attribute <code>.domStorageAccess(true)</code> to the WebView component to enable Document Object Model Storage API permissions (disabled by default).<br><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#domstorageaccess">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#domstorageaccess</a>  </p>
<p><code>domStorageAccess(domStorageAccess: boolean)</code>: Enables&#x2F;disables Document Object Model Storage API permissions (default: disabled).  </p>
<h4 id="2-How-to-register-a-callback-from-ArkTS-to-C-layer-in-HarmonyOS-and-how-does-the-C-layer-invoke-the-callback-method"><a href="#2-How-to-register-a-callback-from-ArkTS-to-C-layer-in-HarmonyOS-and-how-does-the-C-layer-invoke-the-callback-method" class="headerlink" title="2. How to register a callback from ArkTS to C++ layer in HarmonyOS, and how does the C++ layer invoke the callback method?"></a>2. How to register a callback from ArkTS to C++ layer in HarmonyOS, and how does the C++ layer invoke the callback method?</h4><p>Need to pass the playback status callback from the C++ layer to the ArkTS UI layer. Unsure about implementing this via NAPI, seeking a solution.  </p>
<p>Use the <code>napi_call_function</code> to call JS functions from Native. Reference code:  </p>
<ol>
<li>Link ArkTS and C++ functions in <code>index.d.ts</code>:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">nativeCallArkTS</span>: <span class="function">(<span class="params"><span class="attr">cb</span>: (a: <span class="built_in">string</span>) =&gt; <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>; </span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Call ArkTS function from C++:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">NativeCallArkTS</span>(napi_env env, napi_callback_info info) &#123;</span><br><span class="line">  size_t argc = <span class="number">1</span>;</span><br><span class="line">  napi_value args[<span class="number">1</span>] = &#123;nullptr&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">napi_get_cb_info</span>(env, info, &amp;argc, args, nullptr, nullptr);</span><br><span class="line">  </span><br><span class="line">  napi_value argv = nullptr;</span><br><span class="line">  <span class="title function_">napi_create_string_utf8</span>(env, <span class="string">&quot;yes&quot;</span>, <span class="number">3</span>, &amp;argv);</span><br><span class="line"></span><br><span class="line">  napi_value result = nullptr;</span><br><span class="line">  <span class="title function_">napi_call_function</span>(env, nullptr, args[<span class="number">0</span>], <span class="number">1</span>, &amp;argv, &amp;result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Export the `</span><span class="title class_">NativeCallArkTS</span><span class="string">` interface:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="variable constant_">EXTERN_C_START</span></span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">Init</span>(napi_env env, napi_value <span class="built_in">exports</span>)</span><br><span class="line">&#123;</span><br><span class="line">  napi_property_descriptor desc[] = &#123;</span><br><span class="line">  &#123;<span class="string">&quot;nativeCallArkTS&quot;</span>, nullptr, <span class="title class_">NativeCallArkTS</span>, nullptr, nullptr, nullptr, napi_default, nullptr&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">napi_define_properties</span>(env, <span class="built_in">exports</span>, <span class="title function_">sizeof</span>(desc) / <span class="title function_">sizeof</span>(desc[<span class="number">0</span>]), desc);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">exports</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable constant_">EXTERN_C_END</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. Invoke the function in ArkTS:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> nativeFun <span class="keyword">from</span> <span class="string">&#x27;libentry.so&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;nativeCallArkTS&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">message</span> += nativeFun.<span class="title function_">nativeCallArkTS</span>(<span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">string</span></span>)=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> a &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to show and hide the bottom banner in HarmonyOS?  </span></span><br><span class="line"><span class="string">**Reference Link**: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5  </span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="params"><span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="title class_">WindowStage</span></span>) &#123;</span><br><span class="line">  windowStage.<span class="title function_">getMainWindow</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">windowObj</span>) =&gt;</span> &#123;</span><br><span class="line">    windowObj.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>);</span><br><span class="line">    windowObj.<span class="title function_">setWindowSystemBarEnable</span>([<span class="string">&#x27;status&#x27;</span>])</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Application window concepts**:  </span></span><br><span class="line"><span class="string">- **Window immersive capability**: Controls system windows like the status bar and navigation bar to enhance user experience. Immersive capabilities only take effect when the main application window is in full-screen mode. Sub-windows (pop-ups, floating windows) and main windows in freeform mode typically cannot use immersive capabilities.  </span></span><br><span class="line"><span class="string">- **Floating window**: A special application window that remains visible when the main window and corresponding Ability go to the background. It can be used for background video playback or quick access (e.g., floating balls). Permissions are required before creating a floating window.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Excessive warnings during hap build, sometimes failing to find errors?  </span></span><br><span class="line"><span class="string">How to disable warning echoes when there are too many warnings during hap build, making errors hard to locate.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In &quot;File&quot; -&gt; &quot;Settings&quot;, search for &quot;hvigor&quot; and set &quot;Use log level&quot; to adjust the hvigor output log level.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Real-time communication between HarmonyOS ArkTS and C++?  </span></span><br><span class="line"><span class="string">The C++ layer generates extensive logs output to the console, which need to be real-timely displayed in the ArkTS UI. Should this be implemented via callbacks? Unfamiliar with NAPI and unable to find relevant methods in documentation.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Implement via callbacks. Refer to the following example:  </span></span><br><span class="line"><span class="string">1. Link ArkTS and C++ functions in `</span>index.<span class="property">d</span>.<span class="property">ts</span><span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">nativeCallArkTS</span>: <span class="function">(<span class="params"><span class="attr">cb</span>: (a: <span class="built_in">string</span>) =&gt; <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>; </span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Call ArkTS function from C++ (same as above):  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">NativeCallArkTS</span>(napi_env env, napi_callback_info info) &#123;</span><br><span class="line">  size_t argc = <span class="number">1</span>;</span><br><span class="line">  napi_value args[<span class="number">1</span>] = &#123;nullptr&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">napi_get_cb_info</span>(env, info, &amp;argc, args, nullptr, nullptr);</span><br><span class="line">  </span><br><span class="line">  napi_value argv = nullptr;</span><br><span class="line">  <span class="title function_">napi_create_string_utf8</span>(env, <span class="string">&quot;yes&quot;</span>, <span class="number">3</span>, &amp;argv);</span><br><span class="line"></span><br><span class="line">  napi_value result = nullptr;</span><br><span class="line">  <span class="title function_">napi_call_function</span>(env, nullptr, args[<span class="number">0</span>], <span class="number">1</span>, &amp;argv, &amp;result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Export the interface (same as above):  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>cpp</span><br><span class="line"><span class="variable constant_">EXTERN_C_START</span></span><br><span class="line"><span class="keyword">static</span> napi_value <span class="title class_">Init</span>(napi_env env, napi_value <span class="built_in">exports</span>)</span><br><span class="line">&#123;</span><br><span class="line">  napi_property_descriptor desc[] = &#123;</span><br><span class="line">  &#123;<span class="string">&quot;nativeCallArkTS&quot;</span>, nullptr, <span class="title class_">NativeCallArkTS</span>, nullptr, nullptr, nullptr, napi_default, nullptr&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">napi_define_properties</span>(env, <span class="built_in">exports</span>, <span class="title function_">sizeof</span>(desc) / <span class="title function_">sizeof</span>(desc[<span class="number">0</span>]), desc);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">exports</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable constant_">EXTERN_C_END</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. Invoke in ArkTS (same as above):  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> nativeFun <span class="keyword">from</span> <span class="string">&#x27;libentry.so&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;nativeCallArkTS&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">message</span> += nativeFun.<span class="title function_">nativeCallArkTS</span>(<span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">string</span></span>)=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> a &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41115-Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41115-Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Drawing Solid Circles, Release Error 7014, Page Navigation, PersistentStorage Issues, App Startup Initialization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:51:38 / Modified: 09:51:58" itemprop="dateCreated datePublished" datetime="2025-06-29T09:51:38+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization"><a href="#Daily-HarmonyOS-Next-Knowledge-Drawing-Solid-Circles-Release-Error-7014-Page-Navigation-PersistentStorage-Issues-App-Startup-Initialization" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Drawing Solid Circles, Release Error 7014, Page Navigation, PersistentStorage Issues, App Startup Initialization"></a>[Daily HarmonyOS Next Knowledge] Drawing Solid Circles, Release Error 7014, Page Navigation, PersistentStorage Issues, App Startup Initialization</h1><h4 id="1-How-to-draw-a-solid-circle-in-HarmonyOS-Can-DrawingRenderingContext-be-used"><a href="#1-How-to-draw-a-solid-circle-in-HarmonyOS-Can-DrawingRenderingContext-be-used" class="headerlink" title="1. How to draw a solid circle in HarmonyOS? Can DrawingRenderingContext be used?"></a>1. How to draw a solid circle in HarmonyOS? Can DrawingRenderingContext be used?</h4><p>Reference code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CircleByOneHeart</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentCenterColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentUpColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentDownColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentLeftColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentRightColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">countDown</span>: <span class="built_in">number</span> = <span class="number">0</span>; <span class="comment">// Timer flag to manage timeouts</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">countDown</span>); <span class="comment">// Destroy the timer when component disappears</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">100</span> &#125;) &#123;</span><br><span class="line">        <span class="comment">// Draw a concentric circle with diameter 90</span></span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Top line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">5</span>, <span class="number">0</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">5</span>, <span class="number">20</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">45</span>, <span class="attr">y</span>: <span class="number">5</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentUpColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentUpColor</span> = <span class="variable language_">this</span>.<span class="property">currentUpColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentUpColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>); <span class="comment">// Set timer to reset color</span></span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Bottom line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">5</span>, <span class="number">0</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">5</span>, <span class="number">20</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">45</span>, <span class="attr">y</span>: <span class="number">75</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentDownColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentDownColor</span> = <span class="variable language_">this</span>.<span class="property">currentDownColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentDownColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Left line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">10</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">0</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">20</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">5</span>, <span class="attr">y</span>: <span class="number">45</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentLeftColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentLeftColor</span> = <span class="variable language_">this</span>.<span class="property">currentLeftColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentLeftColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Line</span>(&#123;</span><br><span class="line">            <span class="comment">// Right line</span></span><br><span class="line">            <span class="attr">width</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">10</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">startPoint</span>([<span class="number">0</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">endPoint</span>([<span class="number">20</span>, <span class="number">5</span>])</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">75</span>, <span class="attr">y</span>: <span class="number">45</span> &#125;)</span><br><span class="line">            .<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">currentRightColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentRightColor</span> = <span class="variable language_">this</span>.<span class="property">currentRightColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentRightColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;OK&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Circle</span>)</span><br><span class="line">            .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">25</span>, <span class="attr">y</span>: <span class="number">25</span> &#125;) <span class="comment">// Absolute positioning</span></span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">currentCenterColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="title class_">Color</span>.<span class="property">Blue</span> : <span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">currentCenterColor</span> = <span class="variable language_">this</span>.<span class="property">currentCenterColor</span> === <span class="string">&#x27;blue&#x27;</span> ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">countDown</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">currentCenterColor</span> = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">              &#125;, <span class="title class_">TimeSetting</span>.<span class="property">stayTime</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">        .<span class="title function_">border</span>(&#123;</span><br><span class="line">          <span class="comment">// Border width is inward; larger width reduces internal space</span></span><br><span class="line">          <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Blue</span>,</span><br><span class="line">          <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">radius</span>: <span class="number">100</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TimeSetting</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> stayTime = <span class="number">300</span>; <span class="comment">// Milliseconds</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS shows error 7014 during release. Only two permissions can be selected when creating a Profile?  </span></span><br><span class="line"><span class="string">**Error Code 7014**: Indicates inconsistent permissions between the app package configuration and the Profile.  </span></span><br><span class="line"><span class="string">**Cause**: Permissions configured in the app package do not match those declared in the Profile.  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyoserror-0000001651912985#section9225124218158  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Can the login module page navigate to the &quot;My&quot; module page and vice versa in HarmonyOS?  </span></span><br><span class="line"><span class="string">Yes, navigation between hap packages can be achieved using **named routes**. However, `</span>router<span class="string">` is deprecated; **Navigation** is recommended for unified page navigation configuration.  </span></span><br><span class="line"><span class="string">- **Named Routes**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5#routerpushnamedroute10  </span></span><br><span class="line"><span class="string">- **Navigation**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to choose between PersistentStorage and Preferences in HarmonyOS?  </span></span><br><span class="line"><span class="string">**Use Cases**:  </span></span><br><span class="line"><span class="string">- **User acceptance of privacy policy**: Use **Preferences** to track a simple flag.  </span></span><br><span class="line"><span class="string">- **UI-related state persistence**: Use **PersistentStorage** (requires a明确的UIContext).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Recommendations**:  </span></span><br><span class="line"><span class="string">- Use **Preferences** to track privacy policy acceptance and initialize on first acceptance.  </span></span><br><span class="line"><span class="string">- Use **PersistentStorage** for UI-related states that need direct integration with UI components.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Where should network requests and third-party SDK initialization be placed in HarmonyOS?  </span></span><br><span class="line"><span class="string">Initialize SDKs and perform network requests in the `</span><span class="title function_">onInitialized</span>()<span class="string">` method of the **Ability**. This ensures:  </span></span><br><span class="line"><span class="string">- Initialization occurs once during app startup.  </span></span><br><span class="line"><span class="string">- Errors from runtime re-initialization are avoided.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Example**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyAbility</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Ability</span> &#123;</span><br><span class="line">  <span class="title function_">onInitialized</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Initialize third-party SDKs here</span></span><br><span class="line">    <span class="comment">// Perform initial network requests</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41116-Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41116-Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Single Finger Rotation Gesture, Router Parameters on Page Return, Decorators, IPC Filing Issues, Passing Parameters with runJavaScript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:50:43 / Modified: 09:51:00" itemprop="dateCreated datePublished" datetime="2025-06-29T09:50:43+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript"><a href="#Daily-HarmonyOS-Next-Knowledge-Single-Finger-Rotation-Gesture-Router-Parameters-on-Page-Return-Decorators-IPC-Filing-Issues-Passing-Parameters-with-runJavaScript" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Single Finger Rotation Gesture, Router Parameters on Page Return, Decorators, IPC Filing Issues, Passing Parameters with runJavaScript"></a>[Daily HarmonyOS Next Knowledge] Single Finger Rotation Gesture, Router Parameters on Page Return, Decorators, IPC Filing Issues, Passing Parameters with runJavaScript</h1><h4 id="1-Is-there-a-single-finger-rotation-API-in-HarmonyOS"><a href="#1-Is-there-a-single-finger-rotation-API-in-HarmonyOS" class="headerlink" title="1. Is there a single finger rotation API in HarmonyOS?"></a>1. Is there a single finger rotation API in HarmonyOS?</h4><p>In business scenarios, single finger rotation, double finger scaling, and dragging gestures are required. However, using the documented APIs conflicts with custom <code>onTouch</code> implementations.  </p>
<p><strong>Reference</strong>: “RotationGesture”  </p>
<pre><code class="language-typescript">RotationGesture(value?:&#123;fingers?:number; angle?:number&#125;)
</code></pre>
<p>The RotationGesture is used to trigger rotation events with two optional parameters:  </p>
<ul>
<li><code>fingers</code>: Minimum number of fingers required (default 2, range 2-5).  </li>
<li><code>angle</code>: Minimum rotation angle (degrees) to trigger the gesture (default 1deg).</li>
</ul>
<p>Example of binding a rotation gesture to a Text component:  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct Index &#123;
  @State angle: number = 0;
  @State rotateValue: number = 0;

  build() &#123;
    Column() &#123;
      Text(&#39;RotationGesture angle:&#39; + this.angle).fontSize(28)
        // Bind rotation gesture to the component
        .rotate(&#123; angle: this.angle &#125;)
        .gesture(
          RotationGesture()
            .onActionStart((event: GestureEvent|undefined) =&gt; &#123;
              console.info(&#39;RotationGesture is onActionStart&#39;);
            &#125;)
            .onActionUpdate((event: GestureEvent|undefined) =&gt; &#123;
              if(event)&#123;
                this.angle = this.rotateValue + event.angle;
              &#125;
              console.info(&#39;RotationGesture is onActionUpdate&#39;);
            &#125;)
            .onActionEnd(() =&gt; &#123;
              this.rotateValue = this.angle;
              console.info(&#39;RotationGesture is onActionEnd&#39;);
            &#125;)
            .onActionCancel(() =&gt; &#123;
              console.info(&#39;RotationGesture is onActionCancel&#39;);
            &#125;)
        )
        .height(200)
        .width(300)
        .padding(20)
        .border(&#123; width: 3 &#125;)
        .margin(100)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-When-returning-to-a-previous-page-in-HarmonyOS-router-getParams-returns-undefined"><a href="#2-When-returning-to-a-previous-page-in-HarmonyOS-router-getParams-returns-undefined" class="headerlink" title="2. When returning to a previous page in HarmonyOS, router.getParams() returns undefined?"></a>2. When returning to a previous page in HarmonyOS, <code>router.getParams()</code> returns <code>undefined</code>?</h4><p>To pass parameters when navigating back, leave <code>url</code> empty and use <code>router.getParams()</code> in the previous page:  </p>
<pre><code class="language-typescript">.onClick(() =&gt; &#123;
  router.back(&#123;
    url: &#39;&#39;,
    params: &#123;
      &#39;a&#39;: &#39;1&#39;
    &#125;
  &#125;);
&#125;)
</code></pre>
<h4 id="3-Does-ArkTS-support-decorators-Does-hvigor-have-a-feature-similar-to-Gradle’s-Transform-source-code-scanning"><a href="#3-Does-ArkTS-support-decorators-Does-hvigor-have-a-feature-similar-to-Gradle’s-Transform-source-code-scanning" class="headerlink" title="3. Does ArkTS support decorators? Does hvigor have a feature similar to Gradle’s Transform (source code scanning)?"></a>3. Does ArkTS support decorators? Does hvigor have a feature similar to Gradle’s Transform (source code scanning)?</h4><ul>
<li><strong>ArkTS Decorators</strong>: Supported in DevEco Studio V3.1.1 Release via the <code>hvigor-ohos-plugin</code>. Use <code>@Preview</code> to decorate components for preview. Up to 10 <code>@Preview</code> decorators per file are allowed.  </li>
<li><strong>hvigor Custom Plugins</strong>: While hvigor lacks a direct equivalent to Gradle’s Transform, it enables source code processing through npm package management and task management mechanisms.</li>
</ul>
<h4 id="4-HarmonyOS-ICP-filing-and-software-copyright-application-name-requirements"><a href="#4-HarmonyOS-ICP-filing-and-software-copyright-application-name-requirements" class="headerlink" title="4. HarmonyOS ICP filing and software copyright application name requirements?"></a>4. HarmonyOS ICP filing and software copyright application name requirements?</h4><p><strong>Requirements</strong>: If the app name remains unchanged and ICP filing&#x2F;software copyright do not include platform information, they can be reused when publishing on HarmonyOS Next (subject to review).  </p>
<p><strong>Q1</strong>: Does this count as an unchanged app name if ICP filing shows no platform information but other platforms were declared during filing?<br><strong>A1</strong>: Yes, this counts as an unchanged app name.  </p>
<p><strong>Q2</strong>: When must HarmonyOS platform information be added to ICP filing?<br><strong>A2</strong>: Add HarmonyOS platform information before上架 (publishing).<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/50130">https://developer.huawei.com/consumer/cn/doc/app/50130</a>  </p>
<p><strong>Software Copyright Clarification</strong>: “Does not include platform information” refers to the software name, abbreviation, and entire copyright document.  </p>
<p><strong>Filing Process</strong>: HarmonyOS apps&#x2F;atomic services follow the same filing requirements as regular apps, handled by the接入商. Select “HarmonyOS” platform when submitting filing materials.  </p>
<h4 id="5-How-to-pass-parameters-with-runJavaScript-in-HarmonyOS-WebView"><a href="#5-How-to-pass-parameters-with-runJavaScript-in-HarmonyOS-WebView" class="headerlink" title="5. How to pass parameters with runJavaScript in HarmonyOS WebView?"></a>5. How to pass parameters with <code>runJavaScript</code> in HarmonyOS WebView?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41117-Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41117-Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Provider, Navigation Return Parameters, Privacy Statement Issues, Text Judgment Functions, Custom hvigor Plugins</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:46:19 / Modified: 09:50:03" itemprop="dateCreated datePublished" datetime="2025-06-29T09:46:19+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins"><a href="#Daily-HarmonyOS-Next-Knowledge-Provider-Navigation-Return-Parameters-Privacy-Statement-Issues-Text-Judgment-Functions-Custom-hvigor-Plugins" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Provider, Navigation Return Parameters, Privacy Statement Issues, Text Judgment Functions, Custom hvigor Plugins"></a>[Daily HarmonyOS Next Knowledge] Provider, Navigation Return Parameters, Privacy Statement Issues, Text Judgment Functions, Custom hvigor Plugins</h1><h4 id="1-Data-interaction-mode-between-HarmonyOS-Provider-and-Consume"><a href="#1-Data-interaction-mode-between-HarmonyOS-Provider-and-Consume" class="headerlink" title="1. Data interaction mode between HarmonyOS @Provider and @Consume"></a>1. Data interaction mode between HarmonyOS @Provider and @Consume</h4><p>This only allows one-way transmission, meaning only an ancestor component can update the variable, while descendant components can only read it. If a descendant component needs to change the data variable, what are the solutions? Passing it back layer by layer to the ancestor is too complicated.  </p>
<p>The @Provide and @Consume decorators enable two-way synchronization with descendant components without needing to pass data back layer by layer to the ancestor.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-provide-and-consume-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-provide-and-consume-V5</a>  </p>
<p>@Provide and @Consume are used for two-way data synchronization with descendant components, suitable for scenarios where state data needs to be passed across multiple levels. Unlike the named parameter mechanism for parent-child components, @Provide and @Consume break free from parameter passing constraints to achieve cross-level transmission.  </p>
<ul>
<li>A variable decorated with @Provide in an ancestor component is “provided” to its descendants. This eliminates the need for developers to repeatedly pass variables between components.  </li>
<li>Descendants use @Consume to obtain the variable provided by @Provide, establishing two-way data synchronization. Unlike @State&#x2F;@Link, @Provide&#x2F;@Consume can pass data across multiple parent-child component levels.  </li>
<li>@Provide and @Consume can be bound via the same variable name or alias. It is recommended that they have the same type to avoid implicit type conversion causing unexpected application behavior.</li>
</ul>
<pre><code class="language-typescript">@Component
struct CompD &#123;
  // The @Consume-decorated variable binds to the @Provide-decorated variable in ancestor component CompA via the same attribute name
  @Consume reviewVotes: number;

  build() &#123;
    Column() &#123;
      Text(`reviewVotes($&#123;this.reviewVotes&#125;)`)
      Button(`reviewVotes($&#123;this.reviewVotes&#125;), give +1`)
        .onClick(() =&gt; this.reviewVotes += 1)
    &#125;
    .width(&#39;50%&#39;)
  &#125;
&#125;

@Component
struct CompC &#123;
  build() &#123;
    Row(&#123; space: 5 &#125;) &#123;
      CompD()
      CompD()
    &#125;
  &#125;
&#125;

@Component
struct CompB &#123;
  build() &#123;
    CompC()
  &#125;
&#125;

@Entry
@Component
struct CompA &#123;
  // The @Provide-decorated variable reviewVotes is provided by the entry component CompA to its descendants
  @Provide reviewVotes: number = 0;

  build() &#123;
    Column() &#123;
      Button(`reviewVotes($&#123;this.reviewVotes&#125;), give +1`)
        .onClick(() =&gt; this.reviewVotes += 1)
      CompB()
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-obtain-return-parameters-when-using-Navigation-to-open-a-page-in-HarmonyOS"><a href="#2-How-to-obtain-return-parameters-when-using-Navigation-to-open-a-page-in-HarmonyOS" class="headerlink" title="2. How to obtain return parameters when using Navigation to open a page in HarmonyOS"></a>2. How to obtain return parameters when using Navigation to open a page in HarmonyOS</h4><p>Scenario: During a network request, if the session expires, a login page is triggered. After login, how to notify the previous network request (which has no UI) to resend the request. Each network request checks if the session is valid, and triggers login if expired.  </p>
<p>Between Navigation pages, data is passed from the source page to the target page via the <code>params</code> attribute in the NavPathInfo object, and the target page’s return is handled via the <code>onPop</code> callback.<br><strong>Step 1</strong>: Construct a NavPathInfo object with parameters to pass to the target page.  </p>
<ul>
<li><code>params</code>: Encapsulates data for transmission (functions in objects cannot be passed). For supported parameters, refer to the guide.  </li>
<li><code>onPop</code>: Callback when the target page triggers pop, using <code>PopInfo.info.param</code> to get the returned object.</li>
</ul>
<pre><code class="language-typescript">// Source page mainPage
let loginParam: LoginParam = new LoginParam()
// Construct pathInfo object
let pathInfo: NavPathInfo = new NavPathInfo(&#39;loginPage&#39;, loginParam, (popInfo: PopInfo) =&gt; &#123;
  let loginParam: LoginParam = popInfo.info.param as LoginParam;
  ...
&#125;)
// Pass parameters to the target page
this.pageStack.pushDestination(pathInfo, true);
</code></pre>
<p><strong>Step 2</strong>: The target page obtains parameters from the source page via <code>NavPathStack.getParamByIndex(0)</code>.  </p>
<pre><code class="language-typescript">@Component
export struct loginPageView &#123;
  @Consume(&#39;pageInfo&#39;) pageStack: NavPathStack;

  aboutToAppear(): void &#123;
    this.loginParam = this.pageStack.getParamByIndex(0) as LoginParam;
  &#125;
  ...
&#125;
</code></pre>
<p><strong>Step 3</strong>: The target page returns to the source page via <code>NavPathStack.pop</code>, using the <code>result</code> parameter to pass the object back.  </p>
<pre><code class="language-typescript">@Component
export struct loginPageView &#123;
  @Consume(&#39;pageInfo&#39;) pageStack: NavPathStack;
  // Object constructed by the page
  private loginParam!: LoginParam;
  ...
  build() &#123;
    NavDestination() &#123;
      ...
      Button(&#39;login&#39;).onClick(() =&gt; &#123;
        // Return the object to the source page
        this.pageStack.pop(this.loginParam, true)
      &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-privacy-statement-consultation"><a href="#3-HarmonyOS-privacy-statement-consultation" class="headerlink" title="3. HarmonyOS privacy statement consultation"></a>3. HarmonyOS privacy statement consultation</h4><p>Point 10 of the release documentation (link below) states: “Provide a privacy statement link in the ‘Privacy Statement’ section.” Can we attach the statement content directly instead of providing a link?<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166">https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166</a>  </p>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/50128#h1-1678351326517-0">https://developer.huawei.com/consumer/cn/doc/app/50128#h1-1678351326517-0</a><br>The document specifies that an APP privacy policy link must be submitted, which must exactly match the privacy policy within the APP.  </p>
<p>When creating an app or updating its version, developers must submit a privacy policy link that fully aligns with the in-APP privacy policy. Update the link content promptly if the in-APP privacy policy is modified.  </p>
<h4 id="4-How-to-make-HarmonyOS-Text-center-when-single-line-and-left-align-when-multi-line"><a href="#4-How-to-make-HarmonyOS-Text-center-when-single-line-and-left-align-when-multi-line" class="headerlink" title="4. How to make HarmonyOS Text center when single-line and left-align when multi-line"></a>4. How to make HarmonyOS Text center when single-line and left-align when multi-line</h4><p>Set different alignment styles by judging the number of lines.  </p>
<p>To get the number of lines:<br>@ohos.measure returns the width and height of multi-line text but not the line count, which can be calculated based on business scenarios.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5</a>  </p>
<p>For text exceeding a specific line count (3 lines as an example), apply different styles (e.g., expand&#x2F;collapse).  </p>
<ol>
<li>Calculate the total text height:</li>
</ol>
<pre><code class="language-typescript">let textSize: SizeOptions = measure.measureTextSize(&#123; textContent: this.content, fontSize: 24, constraintWidth: 300 &#125;)
</code></pre>
<ol start="2">
<li>Calculate the height with a width constraint and max lines (3 lines):</li>
</ol>
<pre><code class="language-typescript">let textSize2: SizeOptions = measure.measureTextSize(&#123; textContent: this.content, fontSize: 24, maxLines: 3, constraintWidth: 300 &#125;)
</code></pre>
<ol start="3">
<li>If <code>textSize.height &gt; textSize2.height</code>, the text exceeds 3 lines. Perform business processing based on this judgment.</li>
</ol>
<h4 id="5-Custom-hvigor-plugin-issues"><a href="#5-Custom-hvigor-plugin-issues" class="headerlink" title="5. Custom hvigor plugin issues"></a>5. Custom hvigor plugin issues</h4><p>In the beta1 version, Node.js is no longer exposed externally, and hvigor code is hidden in the app package with a fixed version. When developing custom hvigor plugins, referencing hvigor code from public npm libraries may cause version inconsistencies with the app package. Will this cause problems?  </p>
<p>For hvigor plugin development, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5</a><br>Try to reference the hvigor version actually used in the project or the version documented.  </p>
<p>Hvigor allows developers to implement custom plugins, define build logic, and share them. It mainly provides two plugin implementation methods:  </p>
<ul>
<li>Plugin development based on hvigorfile scripts.  </li>
<li>Plugin development based on TypeScript projects.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">342</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
