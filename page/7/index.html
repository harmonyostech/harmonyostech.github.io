<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/7/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41228-Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41228-Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Shape Description, Global Loading Component, Checkbox Style, H5 Keyboard Hide Listening, Popup Not Closing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:22:06 / Modified: 09:22:25" itemprop="dateCreated datePublished" datetime="2025-06-29T09:22:06+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing"><a href="#Daily-HarmonyOS-Next-Knowledge-Shape-Description-Global-Loading-Component-Checkbox-Style-H5-Keyboard-Hide-Listening-Popup-Not-Closing" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Shape Description, Global Loading Component, Checkbox Style, H5 Keyboard Hide Listening, Popup Not Closing"></a>[Daily HarmonyOS Next Knowledge] Shape Description, Global Loading Component, Checkbox Style, H5 Keyboard Hide Listening, Popup Not Closing</h1><h4 id="1-Does-HarmonyOS-have-XML-described-Shapes"><a href="#1-Does-HarmonyOS-have-XML-described-Shapes" class="headerlink" title="1. Does HarmonyOS have XML-described Shapes?"></a>1. Does HarmonyOS have XML-described Shapes?</h4><p>Is there an XML-described Shape?  </p>
<p>The official documentation provides reference materials for corresponding Shapes. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-drawing-components-shape-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-drawing-components-shape-V5</a>  </p>
<ul>
<li>The parent component of drawing components describes common attributes supported by all drawing components.</li>
</ul>
<ol>
<li>Use Shape as the parent component for drawing components to achieve effects similar to SVG.  </li>
<li>Use drawing components individually to draw specified graphics on the page.</li>
</ol>
<p>If XML format is required, use the XML generation method to create an XML Shape. Refer to the XML generation documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/xml-generation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/xml-generation-V5</a>  </p>
<h4 id="2-HarmonyOS-global-loading-component"><a href="#2-HarmonyOS-global-loading-component" class="headerlink" title="2. HarmonyOS global loading component"></a>2. HarmonyOS global loading component</h4><p>A global loading component that starts loading before calling an interface and closes loading when the interface call ends.  </p>
<p>Requires globally reusable loading popup code without rewriting it for each page.  </p>
<p>Currently, declaring a global CustomDialogController is not supported. CustomDialogController is only valid when used as a member variable of @CustomDialog and @Component struct and assigned within the @Component struct.  </p>
<p>It is recommended to use promptAction.openCustomDialog. Related documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a>  </p>
<p>The customDialogId of the dialog should remain consistent. It is recommended to use a global variable. Refer to the demo below:  </p>
<pre><code class="language-typescript">//index.ets
import &#123; promptAction &#125; from &#39;@kit.ArkUI&#39;
import &#123; customDialogBuilder &#125; from &#39;./components&#39;

AppStorage.setOrCreate(&#39;customDialogId&#39;, 0);
@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Hello World&#39;
  @StorageLink(&#39;customDialogId&#39;) customDialogId: number = 1;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .onClick(() =&gt; &#123;
            promptAction.openCustomDialog(&#123;
              builder: customDialogBuilder.bind(this)
            &#125;).then((dialogId: number) =&gt; &#123;
              this.customDialogId = dialogId
            &#125;)
          &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;

//custom.ets
import promptAction from &#39;@ohos.promptAction&#39;

@Builder
export function customDialogBuilder() &#123;
  Column() &#123;
    Text(&#39;Custom dialog Message&#39;).fontSize(10)
    Row() &#123;
      Button(&quot;Confirm&quot;).onClick(() =&gt; &#123;
        promptAction.closeCustomDialog(AppStorage.get&lt;number&gt;(&#39;customDialogId&#39;))
      &#125;)
      Blank().width(50)
      Button(&quot;Cancel&quot;).onClick(() =&gt; &#123;
        promptAction.closeCustomDialog(AppStorage.get&lt;number&gt;(&#39;customDialogId&#39;))
      &#125;)
    &#125;
  &#125;.height(200).padding(5)
&#125;
</code></pre>
<h4 id="3-How-to-switch-the-style-of-Toggle-and-Checkbox-to-rounded-square-in-HarmonyOS"><a href="#3-How-to-switch-the-style-of-Toggle-and-Checkbox-to-rounded-square-in-HarmonyOS" class="headerlink" title="3. How to switch the style of Toggle and Checkbox to rounded square in HarmonyOS?"></a>3. How to switch the style of Toggle and Checkbox to rounded square in HarmonyOS?</h4><p>How to switch the styles of Toggle and Checkbox to rounded square? By default, they appear as circles. How to switch back to rounded square?  </p>
<p>ToggleType currently only supports three types as documented. For rounded square style, use Checkbox.  </p>
<ul>
<li>Toggle reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-basic-toggle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-basic-toggle-V5</a></li>
</ul>
<p>For Checkbox style, checking the underlying code shows that CheckBoxShape has two types: CheckBoxShape.ROUNDED_SQUARE (value 1) represents the rounded square style.  </p>
<ul>
<li>Checkbox reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-checkbox-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-checkbox-V5</a></li>
</ul>
<h4 id="4-Can-HarmonyOS-H5-listen-for-keyboard-hiding-via-document-addEventListener-“keyboardhide”-function"><a href="#4-Can-HarmonyOS-H5-listen-for-keyboard-hiding-via-document-addEventListener-“keyboardhide”-function" class="headerlink" title="4. Can HarmonyOS H5 listen for keyboard hiding via document.addEventListener(“keyboardhide”, function())?"></a>4. Can HarmonyOS H5 listen for keyboard hiding via document.addEventListener(“keyboardhide”, function())?</h4><p>Listening for “resize” can achieve this. Refer to the demo below:  </p>
<pre><code class="language-javascript">// Listen for window changes
var originHeight = window.innerHeight;
window.addEventListener(&quot;resize&quot;, function() &#123;
  if (window.innerHeight &lt; originHeight) &#123;
    // Keyboard is open
  &#125; else &#123;
    // Keyboard is hidden
  &#125;
&#125;);
</code></pre>
<h4 id="5-In-HarmonyOS-when-navigating-to-the-next-page-the-popup-from-the-previous-page-occasionally-appears-on-the-next-page"><a href="#5-In-HarmonyOS-when-navigating-to-the-next-page-the-popup-from-the-previous-page-occasionally-appears-on-the-next-page" class="headerlink" title="5. In HarmonyOS, when navigating to the next page, the popup from the previous page occasionally appears on the next page."></a>5. In HarmonyOS, when navigating to the next page, the popup from the previous page occasionally appears on the next page.</h4><p>Confirm whether the popup has the showInSubWindow attribute set to true. Setting this attribute displays the popup in a sub-window, causing it to remain open after navigation.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41227-Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41227-Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Method Press Effect, Web Component Rebound, H5 Back Issue, Flex Two-Line Limit, Custom Password Input Style</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:21:24 / Modified: 09:36:48" itemprop="dateCreated datePublished" datetime="2025-06-29T09:21:24+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style"><a href="#Daily-HarmonyOS-Next-Knowledge-Input-Method-Press-Effect-Web-Component-Rebound-H5-Back-Issue-Flex-Two-Line-Limit-Custom-Password-Input-Style" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Input Method Press Effect, Web Component Rebound, H5 Back Issue, Flex Two-Line Limit, Custom Password Input Style"></a>[Daily HarmonyOS Next Knowledge] Input Method Press Effect, Web Component Rebound, H5 Back Issue, Flex Two-Line Limit, Custom Password Input Style</h1><h4 id="1-Press-effect-of-input-method-keyboard-keys-in-HarmonyOS"><a href="#1-Press-effect-of-input-method-keyboard-keys-in-HarmonyOS" class="headerlink" title="1. Press effect of input method keyboard keys in HarmonyOS"></a>1. Press effect of input method keyboard keys in HarmonyOS</h4><p>The Button component can use the <code>stateEffect</code> attribute to set whether to enable the press state display effect when the button is pressed. Refer to the links below:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-button-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-button-V5</a>  </li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/blog/topic/03113927877624007">https://developer.huawei.com/consumer/cn/blog/topic/03113927877624007</a></li>
</ul>
<p>Key events refer to events triggered when components interact with key devices such as keyboards and remote controls, applicable to all focusable components (e.g., Button). For components like Text and Image that are not focusable by default, key events can be used by setting the <code>focusable</code> attribute to <code>true</code>.  </p>
<h4 id="2-Does-the-HarmonyOS-Web-component-have-a-rebound-capability-when-sliding-to-the-boundary"><a href="#2-Does-the-HarmonyOS-Web-component-have-a-rebound-capability-when-sliding-to-the-boundary" class="headerlink" title="2. Does the HarmonyOS Web component have a rebound capability when sliding to the boundary?"></a>2. Does the HarmonyOS Web component have a rebound capability when sliding to the boundary?</h4><p><code>overscrollmode</code> attribute: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#overscrollmode11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#overscrollmode11</a>  </p>
<p><code>overScrollMode(mode: OverScrollMode)</code><br>Sets the Web over-scroll mode (disabled by default). When over-scroll mode is enabled, the Web uses elastic animation to rebound the interface when the user slides to the edge of the Web root page; internal pages within the root page do not trigger rebound.  </p>
<p>Sample code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; webview &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkWeb&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> webview.<span class="title class_">WebviewController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mode</span>: <span class="title class_">OverScrollMode</span> = <span class="title class_">OverScrollMode</span>.<span class="property">ALWAYS</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: <span class="string">&#x27;www.example.com&#x27;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">overScrollMode</span>(<span class="variable language_">this</span>.<span class="property">mode</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Issues with H5 hash routing back navigation in HarmonyOS  </span></span><br><span class="line"><span class="string">When H5 uses hash routing, clicking the back button closes the page directly without performing route back navigation; history routing works normally.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Causes**:  </span></span><br><span class="line"><span class="string">1. Incorrect route configuration: HarmonyOS system route configuration requires correct settings for route paths and data request interfaces. Incorrect route table or data request interface configuration may cause back navigation issues.  </span></span><br><span class="line"><span class="string">2. Improper page lifecycle management: On HarmonyOS, page lifecycle management requires special attention. For example, if a data request interface is called in `</span>onInit<span class="string">` but not handled in `</span>onError<span class="string">` or other lifecycle methods, the data request may not execute correctly, affecting back navigation.  </span></span><br><span class="line"><span class="string">3. Data acquisition and assignment issues: On HarmonyOS, data acquisition and assignment need careful handling. For example, if data returned by the request interface is not correctly assigned to the page data model, data inconsistency may occur, affecting back navigation.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. Check route configuration: Ensure correct route paths and data request interface configurations, and clear route跳转 logic.  </span></span><br><span class="line"><span class="string">2. Properly manage page lifecycles: Handle data requests and assignments in lifecycle methods (e.g., `</span>onInit<span class="string">`, `</span>onError<span class="string">`) to ensure data is processed in the correct lifecycle phase.  </span></span><br><span class="line"><span class="string">3. Properly handle data acquisition and assignment: Ensure data returned by request interfaces is correctly processed and assigned to avoid data inconsistency.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to use Flex to limit content to 2 lines with folding for overflow in HarmonyOS  </span></span><br><span class="line"><span class="string">Refer to the demo below:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> measure <span class="keyword">from</span> <span class="string">&#x27;@ohos.measure&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> display <span class="keyword">from</span> <span class="string">&#x27;@ohos.display&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">childMaxWidth</span>: <span class="built_in">number</span> = <span class="number">500</span>; <span class="comment">// Width in px for subsequent calculations</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">displayClass</span>: display.<span class="property">Display</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">componentWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  displayClass = display.<span class="title function_">getDefaultDisplaySync</span>();</span><br><span class="line">  componentWidth = displayClass.<span class="property">width</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber displayClass.width:&#x27;</span> + displayClass.<span class="property">width</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Flex_overNumber Failed to obtain the default display object. Code: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextItem</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">fontSizeData</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="variable language_">this</span>.<span class="property">fontSizeData</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#c4c2cc&#x27;</span>)</span><br><span class="line">      .<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxWidth</span>: childMaxWidth + <span class="string">&#x27;px&#x27;</span> &#125;)</span><br><span class="line">      .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">      .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Flex</span>_overNumber &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;IndexChange&#x27;</span>) <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;textChange&#x27;</span>) <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">FlexWidth</span>: <span class="built_in">string</span> = <span class="string">&#x27;80%&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">newIndex</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">heightControl</span>: <span class="built_in">number</span> | <span class="built_in">string</span> = <span class="number">100</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">ButtonText</span>: <span class="built_in">string</span> = <span class="string">&#x27;∨&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">AllData</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;333&#x27;</span>, <span class="string">&#x27;44444&#x27;</span>, <span class="string">&#x27;55&#x27;</span>, <span class="string">&#x27;666&#x27;</span>, <span class="string">&#x27;7777&#x27;</span>, <span class="string">&#x27;8888888888888&#x27;</span>, <span class="string">&#x27;99&#x27;</span>, <span class="string">&#x27;3434&#x27;</span>, <span class="string">&#x27;5656&#x27;</span>, <span class="string">&#x27;7878&#x27;</span>, <span class="string">&#x27;141414141&#x27;</span>, <span class="string">&#x27;68681&#x27;</span>];</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">SomeData</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">ShowData</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">fontSizeData</span>: <span class="built_in">number</span> = <span class="number">30</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">AllWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">textWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">restrictWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">IndexChange</span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">AllWidth</span> &gt;= (<span class="variable language_">this</span>.<span class="property">restrictWidth</span> - childMaxWidth) &amp;&amp; <span class="variable language_">this</span>.<span class="property">AllWidth</span> &lt;= (<span class="variable language_">this</span>.<span class="property">restrictWidth</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">newIndex</span> = <span class="variable language_">this</span>.<span class="property">index</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 newIndex&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">textChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">content</span>: <span class="built_in">string</span> = <span class="variable language_">this</span>.<span class="property">message</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textWidth</span> = measure.<span class="title function_">measureText</span>(&#123;</span><br><span class="line">      <span class="attr">textContent</span>: content,</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="variable language_">this</span>.<span class="property">fontSizeData</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">textWidth</span> &gt; childMaxWidth) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">AllWidth</span> += childMaxWidth;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">AllWidth</span> += <span class="variable language_">this</span>.<span class="property">textWidth</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 content&#x27;</span>, content);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 Width&#x27;</span>, <span class="variable language_">this</span>.<span class="property">textWidth</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (componentWidth != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">restrictWidth</span> = componentWidth * <span class="number">1.2</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 componentWidth&#x27;</span>, componentWidth);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Flex_overNumber text1 restrictWidth&#x27;</span>, <span class="variable language_">this</span>.<span class="property">restrictWidth</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">AllData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">message</span> = <span class="variable language_">this</span>.<span class="property">AllData</span>[i];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">index</span> = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;text1 change newIndex&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">SomeData</span> = <span class="variable language_">this</span>.<span class="property">AllData</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">newIndex</span> + <span class="number">1</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ShowData</span> = <span class="variable language_">this</span>.<span class="property">SomeData</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ShowData</span>,</span><br><span class="line">            <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="title class_">TextItem</span>(&#123; <span class="attr">message</span>: item, <span class="attr">fontSizeData</span>: <span class="variable language_">this</span>.<span class="property">fontSizeData</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          );</span><br><span class="line">          <span class="title class_">Button</span>(<span class="variable language_">this</span>.<span class="property">ButtonText</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">heightControl</span> === <span class="number">100</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">heightControl</span> = <span class="string">&#x27;100%&#x27;</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ButtonText</span> = <span class="string">&#x27;^&#x27;</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ShowData</span> = <span class="variable language_">this</span>.<span class="property">AllData</span>;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">heightControl</span> = <span class="number">100</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ButtonText</span> = <span class="string">&#x27;v&#x27;</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ShowData</span> = <span class="variable language_">this</span>.<span class="property">SomeData</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">40</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxHeight</span>: <span class="variable language_">this</span>.<span class="property">heightControl</span> &#125;)</span><br><span class="line">        .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">FlexWidth</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&#x27;5%&#x27;</span> &#125;)</span><br><span class="line">        .<span class="title function_">clip</span>(<span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to customize the style of TextInput password input in HarmonyOS  </span></span><br><span class="line"><span class="string">Refer to the code below:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">  <span class="title class_">TextInput</span>(&#123; <span class="attr">placeholder</span>: <span class="string">&quot;请输入密码&quot;</span> &#125;)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">100</span>, <span class="attr">left</span>: <span class="string">&#x27;10%&#x27;</span> &#125;)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">type</span>(<span class="title class_">InputType</span>.<span class="property">Password</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">showPasswordIcon</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="title class_">Line</span>()</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">0.5</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&#x27;10%&#x27;</span> &#125;)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41226-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41226-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Dark Mode, Webview Version Check, Window Brightness Setting, List Cache Node Update, Precompiled JS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:18:17 / Modified: 09:36:49" itemprop="dateCreated datePublished" datetime="2025-06-29T09:18:17+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS"><a href="#Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Webview-Version-Check-Window-Brightness-Setting-List-Cache-Node-Update-Precompiled-JS" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Dark Mode, Webview Version Check, Window Brightness Setting, List Cache Node Update, Precompiled JS"></a>[Daily HarmonyOS Next Knowledge] Dark Mode, Webview Version Check, Window Brightness Setting, List Cache Node Update, Precompiled JS</h1><h4 id="1-In-HarmonyOS-dark-mode-the-color-obtained-via-resourcemanager-getColor-for-Canvas-drawing-does-not-match-the-actual-dark-mode-color"><a href="#1-In-HarmonyOS-dark-mode-the-color-obtained-via-resourcemanager-getColor-for-Canvas-drawing-does-not-match-the-actual-dark-mode-color" class="headerlink" title="1. In HarmonyOS dark mode, the color obtained via resourcemanager.getColor for Canvas drawing does not match the actual dark mode color."></a>1. In HarmonyOS dark mode, the color obtained via resourcemanager.getColor for Canvas drawing does not match the actual dark mode color.</h4><ol>
<li>Correctly obtain the resource: <code>resourcemanager.getColorSync($r(&#39;app.color.test_color&#39;).id);</code>  </li>
<li>For dark mode Canvas drawing adaptation, listen to <code>onConfigurationUpdate</code> to monitor and save the dark mode status to AppStorage, then use <code>@Watch</code> to listen for state changes and trigger Canvas redrawing: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5</a></li>
</ol>
<p>By default, the app follows the system to switch between light and dark modes. To fix the app’s mode independently:  </p>
<pre><code class="language-typescript">onCreate(): void &#123;
  hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onCreate&#39;);
  this.context.getApplicationContext().setColorMode(ConfigurationConstant.ColorMode.COLOR_MODE_DARK);
&#125;
</code></pre>
<h4 id="2-How-to-check-the-API-version-in-HarmonyOS-Webview"><a href="#2-How-to-check-the-API-version-in-HarmonyOS-Webview" class="headerlink" title="2. How to check the API version in HarmonyOS Webview?"></a>2. How to check the API version in HarmonyOS Webview?</h4><p>When executing <code>hdc shell getprop hw_sc.build.os.apiversion</code>, the command is unavailable. Use the following methods in hdc:  </p>
<pre><code class="language-bash">param get const.ohos.apiversion  # Output: 11
param get const.ohos.releasetype  # Output: Canary1
param get const.ohos.fullname     # Output: OpenHarmony-4.1.1.5
</code></pre>
<p>Version description: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-releases-V5/overview-baseline-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-releases-V5/overview-baseline-V5</a>  </p>
<h4 id="3-After-setting-brightness-via-window-setWindowBrightness-in-HarmonyOS-the-system-brightness-adjustment-becomes-ineffective"><a href="#3-After-setting-brightness-via-window-setWindowBrightness-in-HarmonyOS-the-system-brightness-adjustment-becomes-ineffective" class="headerlink" title="3. After setting brightness via window.setWindowBrightness in HarmonyOS, the system brightness adjustment becomes ineffective."></a>3. After setting brightness via <code>window.setWindowBrightness</code> in HarmonyOS, the system brightness adjustment becomes ineffective.</h4><p><strong>Behavior specification</strong>: When the window sets the screen brightness, the control center cannot adjust the system brightness. The control center resumes functionality after the window restores the default system brightness.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<p><strong>Window module capabilities</strong>:  </p>
<ul>
<li><strong>Window</strong>: The basic unit managed by the window manager.  </li>
<li><strong>WindowStage</strong>: Manages all window units.</li>
</ul>
<p><strong>Method</strong>: <code>setWindowBrightness(brightness: number, callback: AsyncCallback&lt;void&gt;): void</code>  </p>
<ul>
<li>Allows the app’s main window to set the screen brightness asynchronously via a callback.  </li>
<li><strong>Parameters</strong>:  <table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">brightness</td>
<td align="left">number</td>
<td align="left">Yes</td>
<td align="left">Brightness value (float, range: [0.0, 1.0] or -1.0; 1.0 &#x3D; maximum, -1.0 &#x3D; default).</td>
</tr>
<tr>
<td align="left">callback</td>
<td align="left">AsyncCallback<void></td>
<td align="left">Yes</td>
<td align="left">Asynchronous callback.</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="4-In-HarmonyOS-List-updates-refresh-all-cached-nodes-including-invisible-areas"><a href="#4-In-HarmonyOS-List-updates-refresh-all-cached-nodes-including-invisible-areas" class="headerlink" title="4. In HarmonyOS, List updates refresh all cached nodes (including invisible areas)."></a>4. In HarmonyOS, List updates refresh all cached nodes (including invisible areas).</h4><p><strong>Solution</strong>: Use component freezing: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-custom-components-freeze.md#navigation">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-custom-components-freeze.md#navigation</a>  </p>
<p><strong>Freezing principles</strong>:  </p>
<ol>
<li>Enable via <code>freezeWhenInactive</code> to activate the freezing mechanism.  </li>
<li>The system only updates active custom components, narrowing the update scope to visible areas.  </li>
<li>Inactive components refresh when they become active.</li>
</ol>
<p><strong>Applicable scenarios</strong>:  </p>
<ul>
<li>Page routing: Top-of-stack pages are active; others are inactive.  </li>
<li>TabContent: Only the current tab’s components are active.  </li>
<li>LazyForEach: Only visible components are active; cached nodes are inactive.  </li>
<li>Navigation: Only the current NavDestination’s components are active.  </li>
<li>Component reuse: Nodes in the reuse pool are inactive; mounted nodes are active.</li>
</ul>
<h4 id="5-Inquiries-about-HarmonyOS-precompileJavaScript"><a href="#5-Inquiries-about-HarmonyOS-precompileJavaScript" class="headerlink" title="5. Inquiries about HarmonyOS precompileJavaScript."></a>5. Inquiries about HarmonyOS precompileJavaScript.</h4><p><strong>Question 1</strong>: How does the businessWebview use the bytecode cache generated by <code>precompileWebview.controller.precompileJavaScript</code>? Are bytecode caches shared across different Web components?  </p>
<ul>
<li>The businessWebview must set the cache mode. If the local cached JS matches the requested URL, the cache is used first.  </li>
<li>Caches are shared if <code>precompileJavaScript</code> is used.</li>
</ul>
<p><strong>Question 2</strong>: Can thousands of local JS files be precompiled into bytecode for Web components?  </p>
<ul>
<li>Not recommended. Precompile JS files only when needed to avoid performance overhead.</li>
</ul>
<p><strong>Question 3</strong>: Which performs better: ① Using precompiled JS cache for businessWebview; ② Directly loading local resources?  </p>
<ul>
<li>Performance depends on bottlenecks:  <ul>
<li>If JS compilation is slow, use precompilation.  </li>
<li>If resource loading is slow, use resource pre-caching.</li>
</ul>
</li>
<li>These methods are complementary, not mutually exclusive.</li>
</ul>
<p>Performance optimization reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41225-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41225-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:17:22 / Modified: 09:36:50" itemprop="dateCreated datePublished" datetime="2025-06-29T09:17:22+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors"><a href="#Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors" class="headerlink" title="[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors"></a>[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</h1><h4 id="1-HarmonyOS-RichText-Display-Issues"><a href="#1-HarmonyOS-RichText-Display-Issues" class="headerlink" title="1. HarmonyOS RichText Display Issues"></a>1. HarmonyOS RichText Display Issues</h4><pre><code class="language-typescript">build() &#123;
  Column() &#123;
    Row(&#123;space:10&#125;) &#123;
      Column() &#123;
        RichText(  this.item.title ?? &quot;&quot; )
          .width(&quot;100%&quot;)
          .height(80)

        Text(this.item.desc ?? &quot;&quot;)
          .fontSize(12)
          .fontColor(0x9e9e9e)

      &#125;
      .margin(&#123;left: 10&#125;)
      .layoutWeight(1)
      .alignItems(HorizontalAlign.Start)
      .justifyContent(FlexAlign.SpaceAround)
      .height(&#39;100%&#39;)

      Blank()

      Image(this.item.banner ?? &quot;&quot;)
        .width(this.picWidth)
        .objectFit(ImageFit.Fill)
        .height( this.picWidth * 0.75 )
        .borderRadius(4)
    &#125;
    .padding(&#123;left:20,right:20&#125;)
    .height( 20 + this.picWidth * 0.75 )
    .width(&quot;100%&quot;)

  &#125;
&#125;
</code></pre>
<p><strong>Problem</strong>: When content is passed to RichText, the displayed text is too small, and the RichText component allows scrolling. How to display it normally?  </p>
<p><strong>Solution</strong>:  </p>
<ul>
<li>Font size in RichText can be set via styles, e.g., <code>&lt;p style=&quot;font-size: 35px;text-align: center;font-weight: bold; color: rgb(24,78,228)&quot;&gt;Font size 35px, line height 45px&lt;p&gt;</code>.  </li>
<li>The default viewport size for mobile devices is 980px, ensuring most web pages render properly. If the RichText component width is smaller, the HTML content may create a scrollable area within the component. To override the default, add the following tag to the content:<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834</a></li>
</ul>
<h4 id="2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component"><a href="#2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component" class="headerlink" title="2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?"></a>2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?</h4><p><strong>Answer</strong>:  </p>
<ul>
<li>Slider has no default padding.  </li>
<li><strong>Horizontal Slider</strong>: Default height is 40vp, width matches the parent container. The slider is centered with 10vp spacing on both sides. Setting padding does not override this spacing.  </li>
<li><strong>Vertical Slider</strong>: Default width is 40vp, height matches the parent container. The slider is centered with 6vp spacing on both top and bottom. Setting padding does not override this spacing.</li>
</ul>
<p><strong>Note</strong>: The built-in spacing cannot be removed because the slider thumb must remain within the component bounds at both ends.  </p>
<h4 id="3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView"><a href="#3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView" class="headerlink" title="3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView"></a>3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView</h4><p><strong>Solutions</strong>:  </p>
<ul>
<li>For two-way communication in WebView, use JSBridge or port communication technologies.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5</a>  </li>
<li>Related case study: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact</a></li>
</ul>
<h4 id="4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401"><a href="#4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401" class="headerlink" title="4. After successfully creating an AVSession in HarmonyOS, setting metadata via setAVMetadata throws error code 401"></a>4. After successfully creating an AVSession in HarmonyOS, setting metadata via <code>setAVMetadata</code> throws error code 401</h4><p><strong>Cause</strong>: Error 401 indicates incorrect parameter types.<br><strong>Solution</strong>:  </p>
<ul>
<li>Check that all parameters match the required types.  </li>
<li>Fields without values should not be set, as parameters are strictly type-checked.</li>
</ul>
<h4 id="5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS"><a href="#5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS" class="headerlink" title="5. How to resolve the blank screen during Webview page loading in HarmonyOS?"></a>5. How to resolve the blank screen during Webview page loading in HarmonyOS?</h4><p><strong>Solution</strong>: Use preloading to download page resources (main and sub-resources) in advance without executing JavaScript or rendering the page, thus speeding up loading.  </p>
<ul>
<li>Official preloading documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10</a>  </li>
<li>Web performance optimization guide: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a></li>
</ul>
<p><strong>Common optimization methods</strong>:  </p>
<ul>
<li><strong>Web Page Loading Optimization</strong>: Critical for user experience; faster loading improves app fluency.  </li>
<li><strong>JSBridge</strong>: Reduces redundant environment switches between ArkTS and Web, avoiding UI blocking.  </li>
<li><strong>Same-Layer Rendering</strong>: Layers page elements to minimize repaints and reflows, enhancing rendering efficiency.</li>
</ul>
<p><strong>Note</strong>: ArkWeb provides tools to optimize page display speed. Implementing these methods improves performance, user experience, satisfaction, and retention.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41224-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41224-Daily-HarmonyOS-Next-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:16:12 / Modified: 09:36:50" itemprop="dateCreated datePublished" datetime="2025-06-29T09:16:12+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors"><a href="#Daily-HarmonyOS-Knowledge-RichText-Display-Issues-Slider-Component-Built-in-Spacing-WebView-Performance-Optimization-AVSession-Errors" class="headerlink" title="[Daily HarmonyOS Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors"></a>[Daily HarmonyOS Knowledge] RichText Display Issues, Slider Component Built-in Spacing, WebView Performance Optimization, AVSession Errors</h1><h4 id="1-HarmonyOS-RichText-Display-Issues"><a href="#1-HarmonyOS-RichText-Display-Issues" class="headerlink" title="1. HarmonyOS RichText Display Issues"></a>1. HarmonyOS RichText Display Issues</h4><pre><code class="language-typescript">build() &#123;
  Column() &#123;
    Row(&#123;space:10&#125;) &#123;
      Column() &#123;
        RichText(  this.item.title ?? &quot;&quot; )
          .width(&quot;100%&quot;)
          .height(80)

        Text(this.item.desc ?? &quot;&quot;)
          .fontSize(12)
          .fontColor(0x9e9e9e)

      &#125;
      .margin(&#123;left: 10&#125;)
      .layoutWeight(1)
      .alignItems(HorizontalAlign.Start)
      .justifyContent(FlexAlign.SpaceAround)
      .height(&#39;100%&#39;)

      Blank()

      Image(this.item.banner ?? &quot;&quot;)
        .width(this.picWidth)
        .objectFit(ImageFit.Fill)
        .height( this.picWidth * 0.75 )
        .borderRadius(4)
    &#125;
    .padding(&#123;left:20,right:20&#125;)
    .height( 20 + this.picWidth * 0.75 )
    .width(&quot;100%&quot;)

  &#125;
&#125;
</code></pre>
<p><strong>Problem</strong>: When content is passed to RichText, the displayed text is too small, and the RichText component allows scrolling. How to display it normally?  </p>
<p><strong>Solution</strong>:  </p>
<ul>
<li>Font size in RichText can be set via styles, e.g., <code>&lt;p style=&quot;font-size: 35px;text-align: center;font-weight: bold; color: rgb(24,78,228)&quot;&gt;Font size 35px, line height 45px&lt;p&gt;</code>.  </li>
<li>The default viewport size for mobile devices is 980px, ensuring most web pages render properly. If the RichText component width is smaller, the HTML content may create a scrollable area within the component. To override the default, add the following tag to the content:<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5#ZH-CN_TOPIC_0000001884757834</a></li>
</ul>
<h4 id="2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component"><a href="#2-How-to-remove-the-built-in-left-right-spacing-in-the-HarmonyOS-Slider-component" class="headerlink" title="2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?"></a>2. How to remove the built-in left&#x2F;right spacing in the HarmonyOS Slider component?</h4><p><strong>Answer</strong>:  </p>
<ul>
<li>Slider has no default padding.  </li>
<li><strong>Horizontal Slider</strong>: Default height is 40vp, width matches the parent container. The slider is centered with 10vp spacing on both sides. Setting padding does not override this spacing.  </li>
<li><strong>Vertical Slider</strong>: Default width is 40vp, height matches the parent container. The slider is centered with 6vp spacing on both top and bottom. Setting padding does not override this spacing.</li>
</ul>
<p><strong>Note</strong>: The built-in spacing cannot be removed because the slider thumb must remain within the component bounds at both ends.  </p>
<h4 id="3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView"><a href="#3-Design-recommendations-for-loading-multiple-remote-H5-pages-in-HarmonyOS-WebView" class="headerlink" title="3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView"></a>3. Design recommendations for loading multiple remote H5 pages in HarmonyOS WebView</h4><p><strong>Solutions</strong>:  </p>
<ul>
<li>For two-way communication in WebView, use JSBridge or port communication technologies.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/arkweb-api-V5</a>  </li>
<li>Related case study: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SelectContact</a></li>
</ul>
<h4 id="4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401"><a href="#4-After-successfully-creating-an-AVSession-in-HarmonyOS-setting-metadata-via-setAVMetadata-throws-error-code-401" class="headerlink" title="4. After successfully creating an AVSession in HarmonyOS, setting metadata via setAVMetadata throws error code 401"></a>4. After successfully creating an AVSession in HarmonyOS, setting metadata via <code>setAVMetadata</code> throws error code 401</h4><p><strong>Cause</strong>: Error 401 indicates incorrect parameter types.<br><strong>Solution</strong>:  </p>
<ul>
<li>Check that all parameters match the required types.  </li>
<li>Fields without values should not be set, as parameters are strictly type-checked.</li>
</ul>
<h4 id="5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS"><a href="#5-How-to-resolve-the-blank-screen-during-Webview-page-loading-in-HarmonyOS" class="headerlink" title="5. How to resolve the blank screen during Webview page loading in HarmonyOS?"></a>5. How to resolve the blank screen during Webview page loading in HarmonyOS?</h4><p><strong>Solution</strong>: Use preloading to download page resources (main and sub-resources) in advance without executing JavaScript or rendering the page, thus speeding up loading.  </p>
<ul>
<li>Official preloading documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#prefetchpage10</a>  </li>
<li>Web performance optimization guide: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a></li>
</ul>
<p><strong>Common optimization methods</strong>:  </p>
<ul>
<li><strong>Web Page Loading Optimization</strong>: Critical for user experience; faster loading improves app fluency.  </li>
<li><strong>JSBridge</strong>: Reduces redundant environment switches between ArkTS and Web, avoiding UI blocking.  </li>
<li><strong>Same-Layer Rendering</strong>: Layers page elements to minimize repaints and reflows, enhancing rendering efficiency.</li>
</ul>
<p><strong>Note</strong>: ArkWeb provides tools to optimize page display speed. Implementing these methods improves performance, user experience, satisfaction, and retention.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41221-Daily-HarmonyOS-Next-Knowledge-WebView-Proxy-2D-Rounded-Rectangle-Drawing-TextInput-Clear-Button-PDF-Scrolling-and-Icon-Configuration-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41221-Daily-HarmonyOS-Next-Knowledge-WebView-Proxy-2D-Rounded-Rectangle-Drawing-TextInput-Clear-Button-PDF-Scrolling-and-Icon-Configuration-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] WebView Proxy, 2D Rounded Rectangle Drawing, TextInput Clear Button, PDF Scrolling, and Icon Configuration Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:15:10 / Modified: 09:15:29" itemprop="dateCreated datePublished" datetime="2025-06-29T09:15:10+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-WebView-Proxy-2D-Rounded-Rectangle-Drawing-TextInput-Clear-Button-PDF-Scrolling-and-Icon-Configuration-Issues"><a href="#Daily-HarmonyOS-Knowledge-WebView-Proxy-2D-Rounded-Rectangle-Drawing-TextInput-Clear-Button-PDF-Scrolling-and-Icon-Configuration-Issues" class="headerlink" title="[Daily HarmonyOS Knowledge] WebView Proxy, 2D Rounded Rectangle Drawing, TextInput Clear Button, PDF Scrolling, and Icon Configuration Issues"></a>[Daily HarmonyOS Knowledge] WebView Proxy, 2D Rounded Rectangle Drawing, TextInput Clear Button, PDF Scrolling, and Icon Configuration Issues</h1><h4 id="1-Does-HarmonyOS-Webview-support-proxy-settings"><a href="#1-Does-HarmonyOS-Webview-support-proxy-settings" class="headerlink" title="1. Does HarmonyOS Webview support proxy settings?"></a>1. Does HarmonyOS Webview support proxy settings?</h4><p>Use the Web component’s <code>onInterceptRequest</code> to intercept and proxy requests. For details, refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001930757269__oninterceptrequest9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001930757269__oninterceptrequest9</a>  </p>
<p><strong>onInterceptRequest(callback: Callback&lt;OnInterceptRequestEvent, WebResourceResponse&gt;)</strong><br>This callback triggers before the Web component loads a URL, used to intercept the URL and return response data.<br><strong>System Capability</strong>: SystemCapability.Web.Webview.Core<br><strong>Parameters</strong>:  </p>
<table>
<thead>
<tr>
<th align="left">Parameter Name</th>
<th align="left">Type</th>
<th align="center">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">callback</td>
<td align="left">Callback<OnInterceptRequestEvent></td>
<td align="center">Yes</td>
<td align="left">Triggers before the Web component loads a URL.<br><br>Returns <code>WebResourceResponse</code>. If response data is returned, it loads based on the data; if null, it loads as original.</td>
</tr>
</tbody></table>
<p><strong>Example</strong>:  </p>
<pre><code class="language-typescript">// xxx.ets
import &#123; webview &#125; from &#39;@kit.ArkWeb&#39;;

@Entry
@Component
struct WebComponent &#123;
  controller: webview.WebviewController = new webview.WebviewController();
  responseWeb: WebResourceResponse = new WebResourceResponse();
  heads: Header[] = new Array();
  webData: string = &quot;&lt;!DOCTYPE html&gt;\n&quot; +
    &quot;&lt;html&gt;\n&quot; +
    &quot;&lt;head&gt;\n&quot; +
    &quot;&lt;title&gt;intercept test&lt;/title&gt;\n&quot; +
    &quot;&lt;/head&gt;\n&quot; +
    &quot;&lt;body&gt;\n&quot; +
    &quot;&lt;h1&gt;intercept test&lt;/h1&gt;\n&quot; +
    &quot;&lt;/body&gt;\n&quot; +
    &quot;&lt;/html&gt;&quot;;

  build() &#123;
    Column() &#123;
      Web(&#123; src: &#39;www.example.com&#39;, controller: this.controller &#125;)
        .onInterceptRequest((event) =&gt; &#123;
          if (event) &#123;
            console.log(&#39;url:&#39; + event.request.getRequestUrl());
          &#125;
          let head1: Header = &#123;
            headerKey: &quot;Connection&quot;,
            headerValue: &quot;keep-alive&quot;
          &#125;
          let head2: Header = &#123;
            headerKey: &quot;Cache-Control&quot;,
            headerValue: &quot;no-cache&quot;
          &#125;
          // Append new elements to the end of the array and return the new length.
          let length = this.heads.push(head1);
          length = this.heads.push(head2);
          console.log(&#39;The response header result length is :&#39; + length);
          const promise: Promise&lt;String&gt; = new Promise((resolve: Function, reject: Function) =&gt; &#123;
            this.responseWeb.setResponseHeader(this.heads);
            this.responseWeb.setResponseData(this.webData);
            this.responseWeb.setResponseEncoding(&#39;utf-8&#39;);
            this.responseWeb.setResponseMimeType(&#39;text/html&#39;);
            this.responseWeb.setResponseCode(200);
            this.responseWeb.setReasonMessage(&#39;OK&#39;);
            resolve(&quot;success&quot;);
          &#125;)
          promise.then(() =&gt; &#123;
            console.log(&quot;prepare response ready&quot;);
            this.responseWeb.setResponseIsReady(true);
          &#125;)
          this.responseWeb.setResponseIsReady(false);
          return this.responseWeb;
        &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-Issues-with-drawing-using-OffscreenCanvasRenderingContext2D-in-HarmonyOS"><a href="#2-Issues-with-drawing-using-OffscreenCanvasRenderingContext2D-in-HarmonyOS" class="headerlink" title="2. Issues with drawing using OffscreenCanvasRenderingContext2D in HarmonyOS"></a>2. Issues with drawing using OffscreenCanvasRenderingContext2D in HarmonyOS</h4><p>How to add rounded corners to a drawn rectangle (original requirement: rectangle with 8px rounded corners).  </p>
<p>Using <code>fillRect</code> cannot create rounded corners as it draws right-angled rectangles. The solution is to use <code>moveTo</code>, <code>arcTo</code>, <code>lineTo</code>, and <code>stroke</code> to draw the rounded rectangle outline, then fill the color. Here’s a simplified example for one corner:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct FillStyleExample &#123;
  private settings: RenderingContextSettings = new RenderingContextSettings(true)
  private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings)
  private offCanvas: OffscreenCanvas = new OffscreenCanvas(600, 600)

  build() &#123;
    Flex(&#123; direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center &#125;) &#123;
      Canvas(this.context)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;)
        .backgroundColor(&#39;#ffff00&#39;)
        .onReady(() =&gt; &#123;
          let offContext = this.offCanvas.getContext(&quot;2d&quot;, this.settings)
          offContext.fillStyle = 0x0000FF
          offContext.moveTo(100, 20)
          offContext.arcTo(300, 20, 300, 70, 8)
          offContext.lineTo(300, 80)
          offContext.stroke()
          // offContext.fill()
          let image = this.offCanvas.transferToImageBitmap()
          this.context.transferFromImageBitmap(image)
        &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-Position-issue-of-TextInput-clearButton-in-HarmonyOS"><a href="#3-Position-issue-of-TextInput-clearButton-in-HarmonyOS" class="headerlink" title="3. Position issue of TextInput clearButton in HarmonyOS"></a>3. Position issue of TextInput clearButton in HarmonyOS</h4><p>The spacing between the TextInput clearButton and the right edge cannot be controlled.  </p>
<p>Currently, the clearButton spacing is not adjustable. This scenario can be addressed via a custom component. Reference demo:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TextInputExample &#123;
  @State text: string = &#39;&#39;
  @State changeType: InputType = InputType.Number
  controller: TextInputController = new TextInputController()
  build() &#123;
    Column() &#123;
      Flex(&#123; direction: FlexDirection.Row &#125;) &#123;
        Stack() &#123;
          TextInput(&#123; text: this.text, controller: this.controller &#125;)
            .type(this.changeType)
            .placeholderFont(&#123; size: 16, weight: 400 &#125;)
            .width(&#39;100%&#39;)
            .height(56)
            .onChange((value: string) =&gt; &#123; this.text = value &#125;)
          Image($r(&#39;app.media.startIcon&#39;))
            .margin(&#123; left: 290 &#125;)
            .width(20)
            .height(20)
            .onClick(() =&gt; &#123;
              this.text = &#39;&#39;
            &#125;)
        &#125;
      &#125;
    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(&#39;#F1F3F5&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-HarmonyOS-Web-cannot-monitor-PDF-scrolling-via-onScroll-How-to-solve-this"><a href="#4-HarmonyOS-Web-cannot-monitor-PDF-scrolling-via-onScroll-How-to-solve-this" class="headerlink" title="4. HarmonyOS Web cannot monitor PDF scrolling via onScroll. How to solve this?"></a>4. HarmonyOS Web cannot monitor PDF scrolling via onScroll. How to solve this?</h4><p>PDFs are loaded as plugins in Webview, and scroll monitoring is currently unsupported. You can:  </p>
<ul>
<li>Use the Web component’s <code>onOverScroll</code> callback to detect over-scroll offsets and determine if the PDF reaches the top or bottom.  </li>
<li>Use component APIs (application adaptation) or web JS APIs (H5 adaptation) for detection.</li>
</ul>
<h4 id="5-Configuration-issue-with-media-layered-image-launch-icon-in-HarmonyOS"><a href="#5-Configuration-issue-with-media-layered-image-launch-icon-in-HarmonyOS" class="headerlink" title="5. Configuration issue with $media:layered_image launch icon in HarmonyOS"></a>5. Configuration issue with $media:layered_image launch icon in HarmonyOS</h4><p>The displayed icon is abnormal after installing the project on a phone. How to adjust this?  </p>
<p>Reduce the dimensions of <code>foreground.png</code> and <code>background.png</code> to resolve the incomplete icon display issue.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41220-Daily-HarmonyOS-Next-Knowledge-Setting-Popup-Placement-to-Top-Passing-Custom-Parameters-to-Components-Manually-Hiding-Input-Boxes-Setting-Web-Fonts-and-Full-Width-Dialogs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41220-Daily-HarmonyOS-Next-Knowledge-Setting-Popup-Placement-to-Top-Passing-Custom-Parameters-to-Components-Manually-Hiding-Input-Boxes-Setting-Web-Fonts-and-Full-Width-Dialogs/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Setting Popup Placement to Top, Passing Custom Parameters to Components, Manually Hiding Input Boxes, Setting Web Fonts, and Full-Width Dialogs</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 08:45:33 / Modified: 09:36:51" itemprop="dateCreated datePublished" datetime="2025-06-29T08:45:33+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Setting-Popup-Placement-to-Top-Passing-Custom-Parameters-to-Components-Manually-Hiding-Input-Boxes-Setting-Web-Fonts-and-Full-Width-Dialogs"><a href="#Daily-HarmonyOS-Next-Knowledge-Setting-Popup-Placement-to-Top-Passing-Custom-Parameters-to-Components-Manually-Hiding-Input-Boxes-Setting-Web-Fonts-and-Full-Width-Dialogs" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Setting Popup Placement to Top, Passing Custom Parameters to Components, Manually Hiding Input Boxes, Setting Web Fonts, and Full-Width Dialogs"></a>[Daily HarmonyOS Next Knowledge] Setting Popup Placement to Top, Passing Custom Parameters to Components, Manually Hiding Input Boxes, Setting Web Fonts, and Full-Width Dialogs</h1><h4 id="1-The-placement-attribute-set-to-top-for-the-Popup-component-does-not-take-effect"><a href="#1-The-placement-attribute-set-to-top-for-the-Popup-component-does-not-take-effect" class="headerlink" title="1. The placement attribute set to top for the Popup component does not take effect."></a>1. The <code>placement</code> attribute set to <code>top</code> for the <code>Popup</code> component does not take effect.</h4><p><strong>Workaround</strong>: Use the <code>offset</code> attribute to shift the Popup downward.  </p>
<h4 id="2-Which-interface-is-used-to-pass-custom-parameters-to-a-component"><a href="#2-Which-interface-is-used-to-pass-custom-parameters-to-a-component" class="headerlink" title="2. Which interface is used to pass custom parameters to a component?"></a>2. Which interface is used to pass custom parameters to a component?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-custom-property-V5#customproperty">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-custom-property-V5#customproperty</a><br><strong>Method</strong>: <code>customProperty</code>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">customProperty</span>(<span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="title class_">Optional</span>&lt;<span class="title class_">Object</span>&gt;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">Sets custom attributes for a component. Custom components do not support this method.  </span></span><br><span class="line"><span class="string">**Card Capability**: Starting from API version 12, this interface can be used in ArkTS cards.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to manually hide the input keyboard in HarmonyOS?  </span></span><br><span class="line"><span class="string">Add a click event to the outer container and call `</span>controller.<span class="title function_">stopEditing</span>()<span class="string">` to remove focus from the input box, thereby hiding the keyboard.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextInputExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">TextInput</span>(&#123; <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">stopEditing</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to set the font size in a HarmonyOS Webview?  </span></span><br><span class="line"><span class="string">Use `</span>defaultFontSize<span class="string">` to set the default font size for web content.  </span></span><br><span class="line"><span class="string">**Documentation**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#ZH-CN_TOPIC_0000001930757269__defaultfontsize9  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to set a full-width dialog using `</span>promptAction.<span class="property">openCustomDialog</span><span class="string">` in HarmonyOS?  </span></span><br><span class="line"><span class="string">Currently, setting `</span><span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)<span class="string">` for `</span>promptAction.<span class="property">openCustomDialog</span><span class="string">` results in the dialog width being the window width minus 16vp on each side.  </span></span><br><span class="line"><span class="string">**Width Reference**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__customdialogoptions11  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Demo**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> promptAction <span class="keyword">from</span> <span class="string">&#x27;@ohos.promptAction&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> display <span class="keyword">from</span> <span class="string">&#x27;@ohos.display&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Button</span>(<span class="string">&#x27;Click Me&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">DialogUtils</span>.<span class="title function_">show</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">TestComponent</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Component inside dialog 1 Component inside dialog 2 Component inside dialog 3 Component inside dialog 4 Component inside dialog 5 Component inside dialog&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DialogUtils</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">createOption</span>(<span class="params"><span class="attr">builder</span>: <span class="title class_">CustomBuilder</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">option</span>: promptAction.<span class="property">CustomDialogOptions</span> = &#123;</span><br><span class="line">      <span class="attr">builder</span>: builder,</span><br><span class="line">      <span class="attr">isModal</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Bottom</span>,</span><br><span class="line">      <span class="attr">cornerRadius</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="title class_">Color</span>.<span class="property">Red</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="string">&quot;110%&quot;</span>,</span><br><span class="line">      <span class="attr">autoCancel</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> option</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">show</span>(<span class="params"><span class="attr">context</span>: <span class="title class_">Object</span>,</span>) &#123;</span><br><span class="line">    promptAction.<span class="title function_">openCustomDialog</span>(<span class="title class_">DialogUtils</span>.<span class="title function_">createOption</span>(buildComp.<span class="title function_">bind</span>(context)))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">buildComp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">TestComponent</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41218-Daily-HarmonyOS-Next-Knowledge-Webview-Content-Loading-Router-Return-Issues-Webview-Custom-Error-Pages-HTML-Format-Strings-and-Toggle-Height/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41218-Daily-HarmonyOS-Next-Knowledge-Webview-Content-Loading-Router-Return-Issues-Webview-Custom-Error-Pages-HTML-Format-Strings-and-Toggle-Height/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Webview Content Loading, Router Return Issues, Webview Custom Error Pages, HTML Format Strings, and Toggle Height</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 08:44:44 / Modified: 08:44:58" itemprop="dateCreated datePublished" datetime="2025-06-29T08:44:44+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Webview-Content-Loading-Router-Return-Issues-Webview-Custom-Error-Pages-HTML-Format-Strings-and-Toggle-Height"><a href="#Daily-HarmonyOS-Knowledge-Webview-Content-Loading-Router-Return-Issues-Webview-Custom-Error-Pages-HTML-Format-Strings-and-Toggle-Height" class="headerlink" title="[Daily HarmonyOS Knowledge] Webview Content Loading, Router Return Issues, Webview Custom Error Pages, HTML Format Strings, and Toggle Height"></a>[Daily HarmonyOS Knowledge] Webview Content Loading, Router Return Issues, Webview Custom Error Pages, HTML Format Strings, and Toggle Height</h1><h4 id="1-HarmonyOS-Webview-fails-to-display-rich-text-content-loaded-via-loadData-but-the-same-HTML-file-loads-normally-via-loadUrl"><a href="#1-HarmonyOS-Webview-fails-to-display-rich-text-content-loaded-via-loadData-but-the-same-HTML-file-loads-normally-via-loadUrl" class="headerlink" title="1. HarmonyOS Webview fails to display rich text content loaded via loadData, but the same HTML file loads normally via loadUrl."></a>1. HarmonyOS Webview fails to display rich text content loaded via loadData, but the same HTML file loads normally via loadUrl.</h4><p><strong>Recommendation</strong>: Use <code>loadUrl</code> for loading. <code>loadData</code> does not support line breaks or complex JavaScript.  </p>
<h4 id="2-HarmonyOS-router-back-is-not-functional"><a href="#2-HarmonyOS-router-back-is-not-functional" class="headerlink" title="2. HarmonyOS router.back is not functional."></a>2. HarmonyOS router.back is not functional.</h4><p><strong>Considerations for named routing</strong>:  </p>
<ul>
<li>Named routing is not limited to module types; it works in shared packages (hsp, har) and in entry&#x2F;feature modules.  </li>
<li>Named routing currently requires importing the corresponding component; it will not work without <code>import(&quot;module&quot;)</code>.  </li>
<li>The <code>@Entry(&#123;routeName&#125;)</code> annotation is similar to <code>@Entry</code>, implementing pseudo-page definition in har. <code>routeName</code> corresponds to the <code>name</code> parameter in the <code>pushNameRoute</code> interface.  </li>
<li><code>pushNameRoute</code> and <code>pushUrl</code> are unrelated.  </li>
<li>Components without <code>@Entry</code> cannot be used as pages; only <code>@Entry</code>-decorated components can serve as page entries.</li>
</ul>
<h4 id="3-What-is-the-best-practice-for-customizing-an-error-page-when-a-Webview-loads-a-URL-that-returns-a-404-in-HarmonyOS"><a href="#3-What-is-the-best-practice-for-customizing-an-error-page-when-a-Webview-loads-a-URL-that-returns-a-404-in-HarmonyOS" class="headerlink" title="3. What is the best practice for customizing an error page when a Webview loads a URL that returns a 404 in HarmonyOS?"></a>3. What is the best practice for customizing an error page when a Webview loads a URL that returns a 404 in HarmonyOS?</h4><p>When the Web control receives an <code>onHttpErrorReceive</code> callback for an error, how to customize the error page:  </p>
<ol>
<li>Set response data: Call <code>event.response.setResponseData()</code> to modify the returned data to the HTML of the custom page.</li>
</ol>
<p>Current capabilities:  </p>
<ul>
<li><code>onSafeBrowsingCheckResult</code> (malicious website interception callback): <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onerrorreceive">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onerrorreceive</a>  </li>
<li>In the callback for the above scenarios, use the <code>loadData</code> interface to load the custom error page: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#loaddata">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#loaddata</a></li>
</ul>
<h4 id="4-How-to-support-HTML-format-strings-in-HarmonyOS"><a href="#4-How-to-support-HTML-format-strings-in-HarmonyOS" class="headerlink" title="4. How to support HTML format strings in HarmonyOS?"></a>4. How to support HTML format strings in HarmonyOS?</h4><ul>
<li><code>RichText</code>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richtext-V5</a>  </li>
<li><code>RichEditor</code>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5</a>  </li>
<li>Third-party library component: <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/detail/@ohasasugar%2Fhp-richtext">https://ohpm.openharmony.cn/#/cn/detail/@ohasasugar%2Fhp-richtext</a></li>
</ul>
<h4 id="5-The-height-of-a-HarmonyOS-Row-does-not-meet-expectations-The-maximum-height-of-Toggle-is-25vp-plus-16vp-padding-top-bottom-should-total-41vp-but-the-actual-height-is-49vp"><a href="#5-The-height-of-a-HarmonyOS-Row-does-not-meet-expectations-The-maximum-height-of-Toggle-is-25vp-plus-16vp-padding-top-bottom-should-total-41vp-but-the-actual-height-is-49vp" class="headerlink" title="5. The height of a HarmonyOS Row does not meet expectations. The maximum height of Toggle is 25vp, plus 16vp padding (top&#x2F;bottom) should total 41vp, but the actual height is 49vp."></a>5. The height of a HarmonyOS Row does not meet expectations. The maximum height of Toggle is 25vp, plus 16vp padding (top&#x2F;bottom) should total 41vp, but the actual height is 49vp.</h4><p>Toggle has default margin, causing the Row height issue. Setting <code>margin: 0</code> for Toggle resolves the height discrepancy.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41216-Daily-HarmonyOS-Next-Knowledge-Long-press-Animation-Canvas-Overlapping-with-Bottom-Navigation-Grid-Dragging-and-Web-Width-Adaptation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41216-Daily-HarmonyOS-Next-Knowledge-Long-press-Animation-Canvas-Overlapping-with-Bottom-Navigation-Grid-Dragging-and-Web-Width-Adaptation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Long-press Animation, Canvas Overlapping with Bottom Navigation, Grid Dragging, and Web Width Adaptation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 08:43:40 / Modified: 09:36:52" itemprop="dateCreated datePublished" datetime="2025-06-29T08:43:40+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Long-press-Animation-Canvas-Overlapping-with-Bottom-Navigation-Grid-Dragging-and-Web-Width-Adaptation"><a href="#Daily-HarmonyOS-Next-Knowledge-Long-press-Animation-Canvas-Overlapping-with-Bottom-Navigation-Grid-Dragging-and-Web-Width-Adaptation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Long-press Animation, Canvas Overlapping with Bottom Navigation, Grid Dragging, and Web Width Adaptation"></a>[Daily HarmonyOS Next Knowledge] Long-press Animation, Canvas Overlapping with Bottom Navigation, Grid Dragging, and Web Width Adaptation</h1><h4 id="1-How-to-implement-a-long-press-animation-effect-for-a-button-in-HarmonyOS"><a href="#1-How-to-implement-a-long-press-animation-effect-for-a-button-in-HarmonyOS" class="headerlink" title="1. How to implement a long-press animation effect for a button in HarmonyOS?"></a>1. How to implement a long-press animation effect for a button in HarmonyOS?</h4><p>How to achieve a button long-press + animation effect  </p>
<p>Refer to the following code for a similar effect:  </p>
<pre><code class="language-typescript">// ets
@Entry
@Component
struct Progress_Ring &#123;
  @State progressValue: number = 0
  @State animationId: number | null = null
  build() &#123;
    Column(&#123; space: 15 &#125;) &#123;
      Stack() &#123;
        Progress(&#123; value: 0, total: 100, type: ProgressType.Ring &#125;)
          .color(&quot;red&quot;)
          .value(this.progressValue)
          .width(120)
          .style(&#123; strokeWidth: 5, scaleCount: 20, scaleWidth: 5, enableSmoothEffect: true &#125;)
          .backgroundColor(&#39;#00000000&#39;)

        Button(&#39;test&#39;).gesture(
          LongPressGesture(&#123; repeat: true, duration: 10 &#125;)
            .onAction((event: GestureEvent | undefined) =&gt; &#123;
              if (event &amp;&amp; this.progressValue &lt;= 100) &#123;
                clearInterval(this.animationId)
                this.animationId = null
                this.progressValue++
              &#125;
            &#125;)
            .onActionEnd(() =&gt; &#123;
              this.animationId = setInterval(() =&gt; &#123;
                this.progressValue--
                if (this.progressValue &lt;= 0) &#123;
                  clearInterval(this.animationId)
                &#125;
              &#125;, 10)
            &#125;)
        )
      &#125;

    &#125;.width(&#39;100%&#39;).padding(&#123; top: 5 &#125;)
  &#125;
&#125;
</code></pre>
<h4 id="2-When-rotating-the-phone-from-portrait-to-landscape-and-back-to-portrait-in-HarmonyOS-ghosting-appears-in-the-overlapping-area-between-the-Canvas-and-the-navigation-bar"><a href="#2-When-rotating-the-phone-from-portrait-to-landscape-and-back-to-portrait-in-HarmonyOS-ghosting-appears-in-the-overlapping-area-between-the-Canvas-and-the-navigation-bar" class="headerlink" title="2. When rotating the phone from portrait to landscape and back to portrait in HarmonyOS, ghosting appears in the overlapping area between the Canvas and the navigation bar."></a>2. When rotating the phone from portrait to landscape and back to portrait in HarmonyOS, ghosting appears in the overlapping area between the Canvas and the navigation bar.</h4><p>When the Canvas component is drawn full-screen, rotating the screen and then rotating back causes ghosting in the bottom navigation bar area due to delayed rendering during vertical scrolling and refresh drawing.  </p>
<p>If the Canvas component is not full-screen but drawn full-screen, adjust the Canvas component to full-screen.  </p>
<h4 id="3-How-to-prevent-modifying-the-positions-of-the-first-and-last-items-during-Grid-dragging-in-HarmonyOS"><a href="#3-How-to-prevent-modifying-the-positions-of-the-first-and-last-items-during-Grid-dragging-in-HarmonyOS" class="headerlink" title="3. How to prevent modifying the positions of the first and last items during Grid dragging in HarmonyOS?"></a>3. How to prevent modifying the positions of the first and last items during Grid dragging in HarmonyOS?</h4><p>Refer to the code below:  </p>
<pre><code class="language-typescript">import curves from &#39;@ohos.curves&#39;
@Entry
@Component
struct GridItemExample &#123;
  @State numbers: number[] = []
  @State dragItem: number = -1
  @State scaleItem: number = -1
  @State item: number = -1
  private dragRefOffsetx: number = 0
  private dragRefOffsety: number = 0
  @State offsetX: number = 0
  @State offsetY: number = 0
  private FIX_VP_X: number = 108
  private FIX_VP_Y: number = 120
  aboutToAppear() &#123;
    for (let i = 1; i &lt;= 11; i++) &#123;
      this.numbers.push(i)
    &#125;
  &#125;
  itemMove(index: number, newIndex: number): void &#123;
    console.info(&#39;index:&#39; + index + &#39; newIndex:&#39; + newIndex)
    if (!this.isDraggable(newIndex)) &#123;
      return
    &#125;
    let tmp = this.numbers.splice(index, 1)
    this.numbers.splice(newIndex, 0, tmp[0])
  &#125;
  // Down swipe
  down(index: number): void &#123;
    // Specify fixed GridItems that do not respond to events
    if (!this.isDraggable(index + 3)) &#123;
      return
    &#125;
    this.offsetY -= this.FIX_VP_Y
    this.dragRefOffsety += this.FIX_VP_Y
    this.itemMove(index, index + 3)
  &#125;
  // Down swipe (empty lower-right corner)
  down2(index: number): void &#123;
    if (!this.isDraggable(index + 3)) &#123;
      return
    &#125;
    this.offsetY -= this.FIX_VP_Y
    this.dragRefOffsety += this.FIX_VP_Y
    this.itemMove(index, index + 3)
  &#125;
  // Up swipe
  up(index: number): void &#123;
    if (!this.isDraggable(index - 3)) &#123;
      return
    &#125;
    this.offsetY += this.FIX_VP_Y
    this.dragRefOffsety -= this.FIX_VP_Y
    this.itemMove(index, index - 3)
  &#125;
  // Left swipe
  left(index: number): void &#123;
    if (!this.isDraggable(index - 1)) &#123;
      return
    &#125;
    this.offsetX += this.FIX_VP_X
    this.dragRefOffsetx -= this.FIX_VP_X
    this.itemMove(index, index - 1)
  &#125;
  // Right swipe
  right(index: number): void &#123;
    if (!this.isDraggable(index + 1)) &#123;
      return
    &#125;
    this.offsetX -= this.FIX_VP_X
    this.dragRefOffsetx += this.FIX_VP_X
    this.itemMove(index, index + 1)
  &#125;
  // Lower right swipe
  lowerRight(index: number): void &#123;
    if (!this.isDraggable(index + 4)) &#123;
      return
    &#125;
    this.offsetX -= this.FIX_VP_X
    this.dragRefOffsetx += this.FIX_VP_X
    this.offsetY -= this.FIX_VP_Y
    this.dragRefOffsety += this.FIX_VP_Y
    this.itemMove(index, index + 4)
  &#125;
  // Upper right swipe
  upperRight(index: number): void &#123;
    if (!this.isDraggable(index - 2)) &#123;
      return
    &#125;
    this.offsetX -= this.FIX_VP_X
    this.dragRefOffsetx += this.FIX_VP_X
    this.offsetY += this.FIX_VP_Y
    this.dragRefOffsety -= this.FIX_VP_Y
    this.itemMove(index, index - 2)
  &#125;
  // Lower left swipe
  lowerLeft(index: number): void &#123;
    if (!this.isDraggable(index + 2)) &#123;
      return
    &#125;
    this.offsetX += this.FIX_VP_X
    this.dragRefOffsetx -= this.FIX_VP_X
    this.offsetY -= this.FIX_VP_Y
    this.dragRefOffsety += this.FIX_VP_Y
    this.itemMove(index, index + 2)
  &#125;
  // Upper left swipe
  upperLeft(index: number): void &#123;
    if (!this.isDraggable(index - 4)) &#123;
      return
    &#125;
    this.offsetX += this.FIX_VP_X
    this.dragRefOffsetx -= this.FIX_VP_X
    this.offsetY += this.FIX_VP_Y
    this.dragRefOffsety -= this.FIX_VP_Y
    this.itemMove(index, index - 4)
  &#125;
  isDraggable(index: number): boolean &#123;
    console.info(&#39;index:&#39; + index)
    return index &gt; 0 &amp;&amp; index != this.numbers.length - 1;
  &#125;
  build() &#123;
    Column(&#123; space: 10 &#125;) &#123;
      Column(&#123; space: 5 &#125;) &#123;
        Text(&quot;Grid Drag and Drop Sorting Effect&quot;)
        Text(&quot;First and last components cannot be dragged&quot;)
      &#125;
      Grid() &#123;
        ForEach(this.numbers, (item: number) =&gt; &#123;
          GridItem() &#123;
            Text(item + &#39;&#39;)
              .fontSize(16)
              .width(&#39;100%&#39;)
              .textAlign(TextAlign.Center)
              .height(100)
              .borderRadius(10)
              .backgroundColor(0xFFFFFF)
              .shadow(this.scaleItem == item ? &#123;
                radius: 70,
                color: &#39;#15000000&#39;,
                offsetX: 0,
                offsetY: 0
              &#125; :
                &#123;
                  radius: 0,
                  color: &#39;#15000000&#39;,
                  offsetX: 0,
                  offsetY: 0
                &#125;)
              .animation(&#123; curve: Curve.Sharp, duration: 300 &#125;)
          &#125;
          // Specify fixed GridItems that do not respond to events
          .hitTestBehavior(this.isDraggable(this.numbers.indexOf(item)) ? HitTestMode.Default : HitTestMode.None)
          .scale(&#123; x: this.scaleItem == item ? 1.05 : 1, y: this.scaleItem == item ? 1.05 : 1 &#125;)
          .zIndex(this.dragItem == item ? 1 : 0)
          .translate(this.dragItem == item ? &#123; x: this.offsetX, y: this.offsetY &#125; : &#123; x: 0, y: 0 &#125;)
          .padding(10)
          .gesture(
            // The following combined gestures are recognized in sequence; drag gestures will not trigger if long-press gestures do not fire normally
            GestureGroup(GestureMode.Sequence,
              LongPressGesture(&#123; repeat: true &#125;)
                .onAction((event?: GestureEvent) =&gt; &#123;
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;
                    this.scaleItem = item
                  &#125;)
                &#125;)
                .onActionEnd(() =&gt; &#123;
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;
                    this.scaleItem = -1
                  &#125;)
                &#125;),
              PanGesture(&#123; fingers: 1, direction: null, distance: 0 &#125;)
                .onActionStart(() =&gt; &#123;
                  this.dragItem = item
                  this.dragRefOffsetx = 0
                  this.dragRefOffsety = 0
                &#125;)
                .onActionUpdate((event: GestureEvent) =&gt; &#123;
                  this.offsetY = event.offsetY - this.dragRefOffsety
                  this.offsetX = event.offsetX - this.dragRefOffsetx
                  animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                    let index = this.numbers.indexOf(this.dragItem)
                    if (this.offsetY &gt;= this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)
                      &amp;&amp; ![8, 9, 10].includes(index)) &#123;
                      // Down swipe
                      this.down(index)
                    &#125; else if (this.offsetY &lt;= -this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)
                      &amp;&amp; ![0, 1, 2].includes(index)) &#123;
                      // Up swipe
                      this.up(index)
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)
                      &amp;&amp; ![2, 5, 8, 10].includes(index)) &#123;
                      // Right swipe
                      this.right(index)
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)
                      &amp;&amp; ![0, 3, 6, 9].includes(index)) &#123;
                      // Left swipe
                      this.left(index)
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2
                      &amp;&amp; ![2, 5, 7, 8, 9, 10].includes(index)) &#123;
                      // Lower right swipe
                      this.lowerRight(index)
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2
                      &amp;&amp; ![0, 1, 2, 5, 8].includes(index)) &#123;
                      // Upper right swipe
                      this.upperRight(index)
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2
                      &amp;&amp; ![0, 3, 6, 9, 10].includes(index)) &#123;
                      // Lower left swipe
                      this.lowerLeft(index)
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2
                      &amp;&amp; ![0, 1, 2, 3, 6, 9].includes(index)) &#123;
                      // Upper left swipe
                      this.upperLeft(index)
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2
                      &amp;&amp; [7].includes(index)) &#123;
                      // Lower right swipe (empty lower-right corner)
                      this.down2(index)
                    &#125;
                  &#125;)
                &#125;)
                .onActionEnd(() =&gt; &#123;
                  animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                    this.dragItem = -1
                  &#125;)
                  animateTo(&#123;
                    curve: curves.interpolatingSpring(14, 1, 170, 17), delay: 150
                  &#125;, () =&gt; &#123;
                    this.scaleItem = -1
                  &#125;)
                &#125;)
            )
              .onCancel(() =&gt; &#123;
                animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                  this.dragItem = -1
                &#125;)
                animateTo(&#123;
                  curve: curves.interpolatingSpring(14, 1, 170, 17)
                &#125;, () =&gt; &#123;
                  this.scaleItem = -1
                &#125;)
              &#125;)
          )
        &#125;, (item: number) =&gt; item.toString())
      &#125;
      .width(&#39;90%&#39;)
      .editMode(true)
      .scrollBar(BarState.Off)
      .columnsTemplate(&quot;1fr 1fr 1fr&quot;)
    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(&#39;#0D182431&#39;).padding(&#123; top: 5 &#125;)
  &#125;
&#125;
</code></pre>
<h4 id="4-When-using-Webview-to-load-the-Huawei-homepage-in-HarmonyOS-an-operation-bar-appears-and-the-width-does-not-adapt-automatically"><a href="#4-When-using-Webview-to-load-the-Huawei-homepage-in-HarmonyOS-an-operation-bar-appears-and-the-width-does-not-adapt-automatically" class="headerlink" title="4. When using Webview to load the Huawei homepage in HarmonyOS, an operation bar appears, and the width does not adapt automatically."></a>4. When using Webview to load the Huawei homepage in HarmonyOS, an operation bar appears, and the width does not adapt automatically.</h4><pre><code class="language-typescript">import web_webview from &#39;@ohos.web.webview&#39;;
@Entry
@Component
struct WebComponent &#123;
  controller: web_webview.WebviewController = new web_webview.WebviewController();
  @State userAgent: string =
    &#39;Mozilla/5.0 (Phone; OpenHarmony 4.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 ArkWeb/4.1.6.1 Mobile automobile/792&#39;
  aboutToAppear() &#123;
    web_webview.WebviewController.setWebDebuggingAccess(true);
  &#125;
  build() &#123;
    Column() &#123;
      Web(&#123; src: &quot;&quot;, controller: this.controller &#125;)
        .javaScriptAccess(true)
        .domStorageAccess(true)
        .width(&quot;100%&quot;)
        .height(&quot;100%&quot;)
        .onControllerAttached(() =&gt; &#123;
          this.controller.setCustomUserAgent(this.userAgent);
          this.controller.loadUrl(&quot;www.huawei.com&quot;)
        &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="5-In-HarmonyOS-Grid-dragging-how-to-make-some-items-ignore-dragging"><a href="#5-In-HarmonyOS-Grid-dragging-how-to-make-some-items-ignore-dragging" class="headerlink" title="5. In HarmonyOS Grid dragging, how to make some items ignore dragging?"></a>5. In HarmonyOS Grid dragging, how to make some items ignore dragging?</h4><p>The entire page uses a Grid layout. How to make some items ignore dragging during the dragging process? For example, in the following layout: 1 2 3 4 5 6 7 8 9, the first element occupies a full row, and the rest are arranged 4 per row. When dragging the 8th element, it should swap with 2, 3, 4, 5, 6, 7, 8, and the first element should not respond to swap animations even if the dragged element is moved to its position.  </p>
<p>Refer to the following Demo:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct GridExample &#123;
  @State numbers: string[] = []
  scroller: Scroller = new Scroller()
  layoutOptions1: GridLayoutOptions = &#123;
    regularSize: [1, 1], // Only supports [1, 1]
    irregularIndexes: [0], // The GridItem at index 0 occupies a full row
  &#125;
  @State text: string = &#39;drag&#39;

  @Builder pixelMapBuilder() &#123; // Style during dragging
    Column() &#123;
      Text(this.text)
        .fontSize(16)
        .backgroundColor(0xF9CF93)
        .width(80)
        .height(80)
        .textAlign(TextAlign.Center)
    &#125;
  &#125;

  aboutToAppear() &#123;
    for (let i = 1; i &lt;= 9; i++) &#123;
      this.numbers.push(i + &#39;&#39;)
    &#125;
  &#125;

  changeIndex(index1: number, index2: number) &#123; // Swap positions in the array
    const temp = this.numbers[index1];
    if (index1 &gt; index2) &#123;
      this.numbers.splice(index2, 0, temp);
      this.numbers.splice(index1 + 1, 1);
    &#125; else &#123;
      this.numbers.splice(index2 + 1, 0, temp);
      this.numbers.splice(index1, 1);
    &#125;
  &#125;

  build() &#123;
    Column(&#123; space: 
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41215-Daily-HarmonyOS-Next-Knowledge-Web-Component-Safe-Area-any-Related-Issues-Flow-Layout-Collapse-Effect-Double-Callback-Triggered-by-Click-and-Invalid-History/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41215-Daily-HarmonyOS-Next-Knowledge-Web-Component-Safe-Area-any-Related-Issues-Flow-Layout-Collapse-Effect-Double-Callback-Triggered-by-Click-and-Invalid-History/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Component Safe Area, any-Related Issues, Flow Layout Collapse Effect, Double Callback Triggered by Click, and Invalid History</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 08:42:43 / Modified: 09:36:53" itemprop="dateCreated datePublished" datetime="2025-06-29T08:42:43+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Web-Component-Safe-Area-any-Related-Issues-Flow-Layout-Collapse-Effect-Double-Callback-Triggered-by-Click-and-Invalid-History"><a href="#Daily-HarmonyOS-Next-Knowledge-Web-Component-Safe-Area-any-Related-Issues-Flow-Layout-Collapse-Effect-Double-Callback-Triggered-by-Click-and-Invalid-History" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Web Component Safe Area, any-Related Issues, Flow Layout Collapse Effect, Double Callback Triggered by Click, and Invalid History"></a>[Daily HarmonyOS Next Knowledge] Web Component Safe Area, any-Related Issues, Flow Layout Collapse Effect, Double Callback Triggered by Click, and Invalid History</h1><h4 id="1-The-safe-area-values-of-HarmonyOS-Web-components-are-incorrect-failing-to-avoid-the-bottom-navigation-bar"><a href="#1-The-safe-area-values-of-HarmonyOS-Web-components-are-incorrect-failing-to-avoid-the-bottom-navigation-bar" class="headerlink" title="1. The safe area values of HarmonyOS Web components are incorrect, failing to avoid the bottom navigation bar."></a>1. The safe area values of HarmonyOS Web components are incorrect, failing to avoid the bottom navigation bar.</h4><p>A meta tag needs to be added:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover&quot; /&gt;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. Why can&#x27;t the type `any` be used in HarmonyOS Map, but system APIs can use it?  </span><br><span class="line">- Why is `any` unsupported for Map types while system APIs can use it?  </span><br><span class="line">  Currently, `any` and `unknown` can be used in TS. System APIs are in `.d.ts` format, allowing `any` usage. As ArkTS is compatible with TS, no restrictions apply when ETS calls TS. For `.d.ts` files (TS code), ArkTS syntax recommends explicit parameter types, such as `Map&lt;string, string|number|boolean&gt;`. If necessary, use `EsObject` instead of `any`.  </span><br><span class="line"></span><br><span class="line">#### 3. Flow layout collapse effect in HarmonyOS  </span><br><span class="line">Is there a control that hides content exceeding 2 lines, displays a collapse arrow for the last line, and expands the remaining lines when the arrow is clicked?  </span><br><span class="line">- No such control exists, but it can be implemented using a List. For specific implementation, refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ohos-arkui-advanced-filter-V5  </span><br><span class="line">- Flow layout in HarmonyOS can be achieved via Flex layout. Demo:  </span><br><span class="line">```typescript</span><br><span class="line">import measure from &#x27;@ohos.measure&#x27;;</span><br><span class="line">import display from &#x27;@ohos.display&#x27;;</span><br><span class="line"></span><br><span class="line">const childMaxWidth: number = 325; // Width in px for subsequent calculations</span><br><span class="line">let displayClass: display.Display | null = null;</span><br><span class="line">let componentWidth: number = 0;</span><br><span class="line">try &#123;</span><br><span class="line">  displayClass = display.getDefaultDisplaySync();</span><br><span class="line">  componentWidth = displayClass.width;</span><br><span class="line">&#125; catch (exception) &#123;</span><br><span class="line">  console.error(&#x27;Failed to obtain the default display object. Code: &#x27; + JSON.stringify(exception));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">struct TextItem &#123;</span><br><span class="line">  @State message: string = &#x27;&#x27;;</span><br><span class="line">  @Prop fontSizeData: number;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Text(this.message)</span><br><span class="line">      .fontSize(this.fontSizeData)</span><br><span class="line">      .margin(&#123; left: 10, top: 10 &#125;)</span><br><span class="line">      .backgroundColor(&#x27;#c4c2cc&#x27;)</span><br><span class="line">      .constraintSize(&#123; maxWidth: childMaxWidth + &#x27;px&#x27; &#125;)</span><br><span class="line">      .maxLines(1)</span><br><span class="line">      .textOverflow(&#123; overflow: TextOverflow.Ellipsis &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index2 &#123;</span><br><span class="line">  @State @Watch(&#x27;IndexChange&#x27;) index: number = 0;</span><br><span class="line">  @State @Watch(&#x27;textChange&#x27;) message: string = &#x27;&#x27;;</span><br><span class="line">  @State FlexWidth: string = &#x27;80%&#x27;;</span><br><span class="line">  @State newIndex: number = 0;</span><br><span class="line">  @State heightControl: number | string = 100;</span><br><span class="line">  @State ButtonText: string = &#x27;∨&#x27;;</span><br><span class="line">  @State AllData: string[] = [&#x27;1&#x27;, &#x27;22&#x27;, &#x27;333&#x27;, &#x27;44444&#x27;, &#x27;55&#x27;, &#x27;666&#x27;, &#x27;7777&#x27;, &#x27;8888888888888&#x27;, &#x27;99&#x27;, &#x27;3434&#x27;, &#x27;5656&#x27;, &#x27;7878&#x27;, &#x27;141414141&#x27;, &#x27;68681&#x27;];</span><br><span class="line">  @State SomeData: string[] = [];</span><br><span class="line">  @State ShowData: string[] = [];</span><br><span class="line">  @State fontSizeData: number = 30;</span><br><span class="line">  @State AllWidth: number = 0;</span><br><span class="line">  @State textWidth: number = 0;</span><br><span class="line">  @State restrictWidth: number = 0;</span><br><span class="line"></span><br><span class="line">  IndexChange() &#123;</span><br><span class="line">    if (this.AllWidth &gt;= (this.restrictWidth - childMaxWidth) &amp;&amp; this.AllWidth &lt;= (this.restrictWidth)) &#123;</span><br><span class="line">      this.newIndex = this.index;</span><br><span class="line">      console.log(&#x27;text1 newIndex&#x27;, this.newIndex);</span><br><span class="line">      console.log(&#x27;text1 change&#x27;, this.newIndex);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  textChange() &#123;</span><br><span class="line">    let content: string = this.message;</span><br><span class="line">    this.textWidth = measure.measureText(&#123;</span><br><span class="line">      textContent: content,</span><br><span class="line">      fontSize: this.fontSizeData</span><br><span class="line">    &#125;);</span><br><span class="line">    if (this.textWidth &gt; childMaxWidth) &#123;</span><br><span class="line">      this.AllWidth += childMaxWidth;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      this.AllWidth += this.textWidth;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;text1 content&#x27;, content);</span><br><span class="line">    console.log(&#x27;text1 Width&#x27;, this.textWidth);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    if (componentWidth != 0) &#123;</span><br><span class="line">      this.restrictWidth = Math.floor((parseFloat(this.FlexWidth) * componentWidth) * 1.3 * 0.01);</span><br><span class="line">      console.log(&#x27;text1 componentWidth&#x27;, componentWidth);</span><br><span class="line">      console.log(&#x27;text1 restrictWidth&#x27;, this.restrictWidth);</span><br><span class="line">    &#125;</span><br><span class="line">    for (let i = 0; i &lt; this.AllData.length; i++) &#123;</span><br><span class="line">      this.message = this.AllData[i];</span><br><span class="line">      this.index = i;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;text1 change newIndex&#x27;, this.newIndex);</span><br><span class="line">    this.SomeData = this.AllData.slice(0, this.newIndex + 1);</span><br><span class="line">    this.ShowData = this.SomeData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123;</span><br><span class="line">          ForEach(</span><br><span class="line">            this.ShowData,</span><br><span class="line">            (item: string) =&gt; &#123;</span><br><span class="line">              TextItem(&#123; message: item, fontSizeData: this.fontSizeData &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          );</span><br><span class="line">          Button(this.ButtonText)</span><br><span class="line">            .onClick(() =&gt; &#123;</span><br><span class="line">              if (this.heightControl === 100) &#123;</span><br><span class="line">                this.heightControl = &#x27;100%&#x27;;</span><br><span class="line">                this.ButtonText = &#x27;^&#x27;;</span><br><span class="line">                this.ShowData = this.AllData;</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                this.heightControl = 100;</span><br><span class="line">                this.ButtonText = &#x27;v&#x27;;</span><br><span class="line">                this.ShowData = this.SomeData;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .width(40)</span><br><span class="line">            .height(30)</span><br><span class="line">            .margin(&#123; left: 10, top: 10 &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        .constraintSize(&#123; maxHeight: this.heightControl &#125;)</span><br><span class="line">        .border(&#123; width: 1 &#125;)</span><br><span class="line">        .width(this.FlexWidth)</span><br><span class="line">        .margin(&#123; left: &#x27;5%&#x27; &#125;)</span><br><span class="line">        .clip(true);</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 4. In HarmonyOS, clicking a slide in swiper 5x/6x versions on H5 pages triggers double callbacks.  </span><br><span class="line">The `swiper.js` file checks for device types but not HarmonyOS, leading to duplicate event registrations and double callback executions. It is recommended to download the file, add HarmonyOS detection, and reference the modified JS locally.  </span><br><span class="line">```javascript</span><br><span class="line">if (Support.touch) &#123;</span><br><span class="line">  var passiveListener = touchEvents.start === &#x27;touchstart&#x27; &amp;&amp; Support.passiveListener &amp;&amp; params.passiveListeners ? &#123; passive: true, capture: false &#125; : false;</span><br><span class="line">  el.addEventListener(touchEvents.start, swiper.onTouchStart, passiveListener);</span><br><span class="line">  el.addEventListener(touchEvents.move, swiper.onTouchMove, Support.passiveListener ? &#123; passive: false, capture: capture &#125; : capture);</span><br><span class="line">  el.addEventListener(touchEvents.end, swiper.onTouchEnd, passiveListener);</span><br><span class="line">  if (touchEvents.cancel) &#123;</span><br><span class="line">    el.addEventListener(touchEvents.cancel, swiper.onTouchEnd, passiveListener);</span><br><span class="line">  &#125;</span><br><span class="line">  if (!dummyEventAttached) &#123;</span><br><span class="line">    doc.addEventListener(&#x27;touchstart&#x27;, dummyEventListener);</span><br><span class="line">    dummyEventAttached = true;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">if (params.simulateTouch ) || (params.simulateTouch) &#123;</span><br><span class="line">  el.addEventListener(&#x27;mousedown&#x27;, swiper.onTouchStart, false);</span><br><span class="line">  doc.addEventListener(&#x27;mousemove&#x27;, swiper.onTouchMove, capture);</span><br><span class="line">  doc.addEventListener(&#x27;mouseup&#x27;, swiper.onTouchEnd, false);</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 5. window.history is invalid for H5 pages in HarmonyOS.  </span><br><span class="line">After entering a native page and consecutively opening multiple H5 pages, swiping or pressing the physical back button directly returns to the first native page.  </span><br><span class="line">- To swipe back or return to the previous H5 page, listen for the back gesture in the component&#x27;s `onBackPress` lifecycle. This event triggers when the user clicks the back button and only takes effect for custom components decorated with `@Entry`. Returning `true` means the page handles back logic itself without routing; returning `false` uses the default routing back logic (no return value defaults to `false`).  </span><br><span class="line">  Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-lifecycle-V5#onbackpress  </span><br><span class="line">```typescript</span><br><span class="line">onBackPress() &#123;</span><br><span class="line">  if (this.controller.accessBackward()) &#123;</span><br><span class="line">    this.controller.backward();</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line">  return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">285</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
