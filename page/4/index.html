<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/4/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/101%E3%80%90Daily-HarmonyOS-Knowledge%E3%80%91Manual-Scroller-Stop-Execute-Every-Second-Custom-Web-Keyboard-Inject-Styles-into-Web-Components-Safe-Area/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/101%E3%80%90Daily-HarmonyOS-Knowledge%E3%80%91Manual-Scroller-Stop-Execute-Every-Second-Custom-Web-Keyboard-Inject-Styles-into-Web-Components-Safe-Area/" class="post-title-link" itemprop="url">【Daily HarmonyOS Knowledge】Manual Scroller Stop, Execute Every Second, Custom Web Keyboard, Inject Styles into Web Components, Safe Area</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:18:12 / Modified: 09:50:03" itemprop="dateCreated datePublished" datetime="2025-06-27T08:18:12+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Scroller-Manual-Stop-Second-Execution-Web-Custom-Keyboard-Web-Component-Injection-Style-Safe-Area"><a href="#Daily-HarmonyOS-Knowledge-Scroller-Manual-Stop-Second-Execution-Web-Custom-Keyboard-Web-Component-Injection-Style-Safe-Area" class="headerlink" title="[Daily HarmonyOS Knowledge] Scroller Manual Stop, Second Execution, Web Custom Keyboard, Web Component Injection Style, Safe Area"></a>[Daily HarmonyOS Knowledge] Scroller Manual Stop, Second Execution, Web Custom Keyboard, Web Component Injection Style, Safe Area</h3><h4 id="1-Does-HarmonyOS-scroller-have-a-manual-stop-method"><a href="#1-Does-HarmonyOS-scroller-have-a-manual-stop-method" class="headerlink" title="1. Does HarmonyOS scroller have a manual stop method?"></a>1. Does HarmonyOS scroller have a manual stop method?</h4><p>You can use the scrollTo method to slide to the specified position.  </p>
<pre><code>// demo.ets  
import Curves from &#39;@ohos.curves&#39;  

@Entry  
@Component  
struct ScrollExample &#123;  
  scroller: Scroller = new Scroller()  
  private arr: number[] = []  

  aboutToAppear(): void &#123;  
    for (let i = 0; i &lt; 100; i++) &#123;  
      this.arr.push(i)  
    &#125;  
  &#125;  

  build() &#123;  
    Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;  

      Scroll(this.scroller) &#123;  
        Column() &#123;  
          ForEach(this.arr, (item: number) =&gt; &#123;  
            Text(item.toString())  
              .width(&#39;90%&#39;)  
              .height(150)  
              .backgroundColor(0xFFFFFF)  
              .borderRadius(15)  
              .fontSize(16)  
              .textAlign(TextAlign.Center)  
              .margin(&#123; top: 10 &#125;)  
          &#125;, (item: string) =&gt; item)  
        &#125;.width(&#39;100%&#39;)  
      &#125;  
      .scrollable(ScrollDirection.Vertical) // Scroll direction is vertical  
      .scrollBar(BarState.On) // Scroll bar is always visible  
      .scrollBarColor(Color.Gray) // Scroll bar color  
      .scrollBarWidth(10) // Scroll bar width  
      .friction(0.6)  
      .edgeEffect(EdgeEffect.Spring)  
      .onScroll((xOffset: number, yOffset: number) =&gt; &#123;  
        console.info(xOffset + &#39; &#39; + yOffset)  
      &#125;)  
      .onScrollEdge((side: Edge) =&gt; &#123;  
        console.info(&#39;To the edge&#39;)  
      &#125;)  
      .onScrollStop(() =&gt; &#123;  
        console.info(&#39;Scroll Stop&#39;)  
      &#125;)  

      Button(&#39;Interrupt and execute other logic&#39;)  
        .height(&#39;5%&#39;)  
        .onClick(() =&gt; &#123;  
          let curve = Curves.interpolatingSpring(10, 1, 228, 30) // Create a stepped curve  
          const yOffset: number = this.scroller.currentOffset().yOffset;  
          this.scroller.scrollTo(&#123;  
            xOffset: 0,  
            yOffset: yOffset,  
            // animation: &#123; duration: 1000, curve: curve, canOverScroll: true &#125;  
          &#125;)  
        &#125;)  
        .margin(&#123; top: 110, left: 20 &#125;)  

    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(0xDCDCDC)  
  &#125;  
&#125;  
</code></pre>
<h4 id="2-HarmonyOS-function-that-executes-once-per-second"><a href="#2-HarmonyOS-function-that-executes-once-per-second" class="headerlink" title="2. HarmonyOS function that executes once per second?"></a>2. HarmonyOS function that executes once per second?</h4><p>Use setInterval to repeatedly call a function with a fixed time delay between each call. To delete the timer, manually call the clearInterval interface.  </p>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/js-apis-timer-V13#setinterval">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/js-apis-timer-V13#setinterval</a>  </p>
<p><code>setInterval(handler: Function | string, delay: number, ...arguments: any[]): number</code><br>Repeatedly calls a function with a fixed time delay between each call.<br>To delete the timer, manually call the clearInterval interface.  </p>
<pre><code>setInterval(() =&gt; &#123;  
  console.log(&#39;do every 1s.&#39;);  
&#125;, 1000);  
</code></pre>
<h4 id="3-HarmonyOS-WebView-custom-keyboard-issue"><a href="#3-HarmonyOS-WebView-custom-keyboard-issue" class="headerlink" title="3. HarmonyOS WebView custom keyboard issue?"></a>3. HarmonyOS WebView custom keyboard issue?</h4><p>When using a custom keyboard in a loaded webview, how to handle the hiding and displaying of the system keyboard, as well as displaying the custom keyboard and processing cursor acquisition.  </p>
<p>When using a custom keyboard, the system keyboard should be hidden to avoid conflicts. You can set the focusable property of the TextInput component to false to make the component non-focusable, so that the default system keyboard will not pop up. You can load the custom keyboard by displaying it in the <web> component. The specific implementation method is to create an HTML page containing the desired keys and use it as the src attribute value of the <web> component. When the user clicks on the component, the custom keyboard will pop up automatically. You can obtain the cursor position information by listening to keyboard events. In this way, you can dynamically adjust the cursor to the correct position according to the user’s operations during text editing.  </p>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5#ZH-CN_TOPIC_0000001847049860__customkeyboard10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5#ZH-CN_TOPIC_0000001847049860__customkeyboard10</a>  </p>
<h4 id="4-How-to-inject-styles-into-HTML-in-HarmonyOS-web-components"><a href="#4-How-to-inject-styles-into-HTML-in-HarmonyOS-web-components" class="headerlink" title="4. How to inject styles into HTML in HarmonyOS web components?"></a>4. How to inject styles into HTML in HarmonyOS web components?</h4><p>Refer to the demo to inject styles into the style tag:  </p>
<pre><code>// ets  
import web_webview from &#39;@ohos.web.webview&#39;;  

@Entry  
@Component  
struct WebComponent &#123;  
  webviewController: web_webview.WebviewController = new web_webview.WebviewController();  
  private customStyle: string =  
    &#39;html, body &#123;margin: 0; padding: 0; overflow: hidden; touch-action: none; background:#ace&#125;&#39;;  

  aboutToAppear() &#123;  
    // Configure Web to enable debug mode  
    web_webview.WebviewController.setWebDebuggingAccess(true);  
  &#125;  

  build() &#123;  
    Column() &#123;  

      Button(&#39;style&#39;).onClick((event: ClickEvent) =&gt; &#123;  

        this.webviewController.runJavaScript(`const head = document.head;  
                                              console.log(head);  
                                              const style = document.createElement(&#39;style&#39;);  
                                              style.appendChild(document.createTextNode(&quot;$&#123;this.customStyle&#125;&quot;))  
                                              head.appendChild(style)  
        `)  
      &#125;)  
      Web(&#123; src: $rawfile(&#39;index.html&#39;), controller: this.webviewController &#125;).domStorageAccess(true)  
    &#125;  
  &#125;  
&#125;  
// html  
&lt;!DOCTYPE html&gt;  
&lt;html&gt;  
&lt;head&gt;  

&lt;/head&gt;  

&lt;body&gt;  
&lt;h1 id=&quot;text&quot;&gt;  
    This is a test message. The default font is black. After calling the runJavaScript method, the font is green. After calling the runJavaScriptCodePassed method, the font is red.  
&lt;/h1&gt;  
&lt;/body&gt;  
&lt;/html&gt;  
</code></pre>
<h4 id="5-HarmonyOS-safe-area-issue"><a href="#5-HarmonyOS-safe-area-issue" class="headerlink" title="5. HarmonyOS safe area issue?"></a>5. HarmonyOS safe area issue?</h4><p>When there is no tabbar, <code>.expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP, SafeAreaEdge.BOTTOM])</code> can indeed start from the top of the screen, but it fails when a tabbar is added. What is the solution?  </p>
<p>Use immersive development to avoid the navigation bar.  </p>
<p>Please refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/228-Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/228-Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Summary of Methods for Generating QR Codes from Strings and Images, Getting Text Line Counts, and Exiting Edit State in Input Boxes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:06:17 / Modified: 00:09:03" itemprop="dateCreated datePublished" datetime="2025-06-27T00:06:17+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes"><a href="#Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Summary of Methods for Generating QR Codes from Strings and Images, Getting Text Line Counts, and Exiting Edit State in Input Boxes"></a>[Daily HarmonyOS Next Knowledge] Summary of Methods for Generating QR Codes from Strings and Images, Getting Text Line Counts, and Exiting Edit State in Input Boxes</h3><h4 id="1-How-to-replace-the-icon-in-the-pull-down-refresh-with-text-in-HarmonyOS"><a href="#1-How-to-replace-the-icon-in-the-pull-down-refresh-with-text-in-HarmonyOS" class="headerlink" title="1. How to replace the icon in the pull-down refresh with text in HarmonyOS?"></a>1. How to replace the icon in the pull-down refresh with text in HarmonyOS?</h4><p>Demo for hiding the icon and displaying text:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">RefreshExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isRefreshing</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="title class_">String</span>[] = [<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;10&#x27;</span>]</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">customRefreshComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="comment">// Hide the icon</span></span><br><span class="line">        <span class="comment">// LoadingProgress().height(32)</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;正在刷新...&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Refresh</span>(&#123; <span class="attr">refreshing</span>: $$this.<span class="property">isRefreshing</span>, <span class="attr">builder</span>: <span class="variable language_">this</span>.<span class="title function_">customRefreshComponent</span>() &#125;) &#123;</span><br><span class="line">        <span class="title class_">List</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span> + item)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">onScrollIndex</span>(<span class="function">(<span class="params"><span class="attr">first</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(first.<span class="title function_">toString</span>())</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Yellow</span>, <span class="attr">startMargin</span>: <span class="number">10</span>, <span class="attr">endMargin</span>: <span class="number">10</span> &#125;)</span><br><span class="line">        .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">onStateChange</span>(<span class="function">(<span class="params"><span class="attr">refreshStatus</span>: <span class="title class_">RefreshStatus</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Refresh onStatueChange state is &#x27;</span> + refreshStatus)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">onRefreshing</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">isRefreshing</span> = <span class="literal">false</span></span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onRefreshing test&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="number">0x89CFF0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to set a fixed light mode in HarmonyOS?  </span></span><br><span class="line"><span class="string">You can actively set the light/dark style of the application. Once set, the application&#x27;s mode will not change with the system.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5#section19361879317  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, the application follows the system&#x27;s light/dark mode. To fix the mode:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onCreate</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onCreate&#x27;</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getApplicationContext</span>().<span class="title function_">setColorMode</span>(<span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_DARK</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**System default judgment rules**:  </span></span><br><span class="line"><span class="string">1. If the application explicitly sets the mode using `</span>setColorMode<span class="string">`, that setting takes precedence.  </span></span><br><span class="line"><span class="string">2. If `</span>setColorMode<span class="string">` is not called:  </span></span><br><span class="line"><span class="string">   - If the application has dark resources in the `</span>dark<span class="string">` directory, system components will automatically switch to dark mode.  </span></span><br><span class="line"><span class="string">   - If no dark resources exist, system components will remain in light mode even when the system is in dark mode.  </span></span><br><span class="line"><span class="string">![](../images/【每日学点HarmonyOS%20Next知识】25.02.28.png) </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To ensure the application follows the system&#x27;s light/dark mode when using only system components/colors:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onCreate</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getApplicationContext</span>().<span class="title function_">setColorMode</span>(<span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_NOT_SET</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to generate a QR code from a string and image in HarmonyOS?  </span></span><br><span class="line"><span class="string">Generate a QR code from a string and image that can be scanned and decoded.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use the `</span><span class="title class_">QRCode</span><span class="string">` component:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-qrcode-V5  </span></span><br><span class="line"><span class="string">The QR code content is a string (max 256 characters; longer strings will be truncated).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to get the number of text lines displayed in a HarmonyOS Text component?  </span></span><br><span class="line"><span class="string">Get the line count to adjust the layout dynamically.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span><span class="meta">@ohos</span>.<span class="property">measure</span><span class="string">` module returns text width/height but not the line count directly. Calculate it based on your scenario:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5  </span></span><br><span class="line"><span class="string">![](../images/【每日学点HarmonyOS%20Next知识】25.02.28-1.png)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Scenario 1: Apply different styles when text exceeds a specific line count (e.g., 3 lines)</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">textSize</span>: <span class="title class_">SizeOptions</span> = measure.<span class="title function_">measureTextSize</span>(&#123; <span class="attr">textContent</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">fontSize</span>: <span class="number">24</span>, <span class="attr">constraintWidth</span>: <span class="number">300</span> &#125;);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">textSize2</span>: <span class="title class_">SizeOptions</span> = measure.<span class="title function_">measureTextSize</span>(&#123; <span class="attr">textContent</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">fontSize</span>: <span class="number">24</span>, <span class="attr">maxLines</span>: <span class="number">3</span>, <span class="attr">constraintWidth</span>: <span class="number">300</span> &#125;);</span><br><span class="line"><span class="comment">// If textSize.height &gt; textSize2.height, the text exceeds 3 lines. Handle accordingly.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Scenario 2: Reserve appropriate height before rendering</span></span><br><span class="line"><span class="keyword">import</span> measure <span class="keyword">from</span> <span class="string">&#x27;@ohos.measure&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">textSize</span>: <span class="title class_">SizeOptions</span> = &#123; <span class="attr">width</span>: <span class="number">0</span>, <span class="attr">height</span>: <span class="number">0</span> &#125;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Very long text...&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textSize</span> = measure.<span class="title function_">measureTextSize</span>(&#123;</span><br><span class="line">      <span class="attr">textContent</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">fontSize</span>: <span class="number">14</span>, <span class="attr">constraintWidth</span>: <span class="number">300</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">textSize</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Swiper</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="title function_">px2vp</span>(<span class="title class_">Number</span>(<span class="variable language_">this</span>.<span class="property">textSize</span>.<span class="property">height</span>)))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to make an InputText lose focus and exit the editing state in HarmonyOS?  </span></span><br><span class="line"><span class="string">Use `</span><span class="title function_">stopEditing</span>()<span class="string">` to dismiss the keyboard:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextInputExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">inputValue</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">inputValue</span>, <span class="attr">placeholder</span>: <span class="string">&#x27;input your word…&#x27;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">placeholderColor</span>(<span class="title class_">Color</span>.<span class="property">Grey</span>)</span><br><span class="line">        .<span class="title function_">placeholderFont</span>(&#123; <span class="attr">size</span>: <span class="number">14</span>, <span class="attr">weight</span>: <span class="number">400</span> &#125;)</span><br><span class="line">        .<span class="title function_">caretColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;95%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">inputValue</span> = value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">stopEditing</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/227-Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/227-Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Loading Different Views, Function Parameter Passing, Loading Effects, Immersive Bottom Status Bar</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:05:27 / Modified: 09:50:42" itemprop="dateCreated datePublished" datetime="2025-06-27T00:05:27+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar"><a href="#Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Loading Different Views, Function Parameter Passing, Loading Effects, Immersive Bottom Status Bar"></a>[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Loading Different Views, Function Parameter Passing, Loading Effects, Immersive Bottom Status Bar</h3><h4 id="1-How-to-implement-screenshot-prevention-in-a-pushed-sub-page-of-HarmonyOS"><a href="#1-How-to-implement-screenshot-prevention-in-a-pushed-sub-page-of-HarmonyOS" class="headerlink" title="1. How to implement screenshot prevention in a pushed sub-page of HarmonyOS?"></a>1. How to implement screenshot prevention in a pushed sub-page of HarmonyOS?</h4><ol>
<li>After the user clicks Login, navigate to the login page via <code>Navigation.push</code>.  </li>
<li>Implement screenshot prevention on the login page and disable it when exiting the login page.</li>
</ol>
<p>Set the main window to privacy mode in the login page’s callback. Enable privacy mode in the <code>aboutToAppear</code> lifecycle and disable it when exiting the page. For details, refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-3-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-3-V5</a>  </p>
<p><code>setWindowPrivacyMode</code> sets whether the window is in privacy mode, preventing screenshots or screen recordings. This API is suitable for scenarios requiring screenshot&#x2F;recording restrictions.  </p>
<p>Set the main window to privacy mode in the <code>onWindowStageCreate</code> callback. Refer to the sample code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>; </span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123; </span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>); </span><br><span class="line">    windowStage.<span class="title function_">getMainWindow</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span>, data</span>) =&gt;</span> &#123; </span><br><span class="line">      <span class="keyword">let</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>; </span><br><span class="line">      <span class="keyword">if</span> (errCode) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the main window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err)); </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">      &#125; </span><br><span class="line">      <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> = data; </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in obtaining the main window. Data: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data)); </span><br><span class="line">      <span class="keyword">let</span> <span class="attr">isPrivacyMode</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>; </span><br><span class="line">      <span class="keyword">try</span> &#123; </span><br><span class="line">        windowClass.<span class="title function_">setWindowPrivacyMode</span>(isPrivacyMode, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123; </span><br><span class="line">          <span class="keyword">const</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>; </span><br><span class="line">          <span class="keyword">if</span> (errCode) &#123; </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to set the window to privacy mode. Cause:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err)); </span><br><span class="line">            <span class="keyword">return</span>; </span><br><span class="line">          &#125; </span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in setting the window to privacy mode.&#x27;</span>); </span><br><span class="line">        &#125;); </span><br><span class="line">      &#125; <span class="keyword">catch</span> (exception) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to set the window to privacy mode. Cause:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception)); </span><br><span class="line">      &#125; </span><br><span class="line">    &#125;) </span><br><span class="line">    windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123; </span><br><span class="line">      <span class="keyword">if</span> (err.<span class="property">code</span>) &#123; </span><br><span class="line">        hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>); </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">      &#125; </span><br><span class="line">      hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content. Data: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data) ?? <span class="string">&#x27;&#x27;</span>); </span><br><span class="line">    &#125;); </span><br><span class="line">  &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to display different views by clicking a button within a HarmonyOS page?  </span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@ohos.base&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HashMap</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkTS&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> map <span class="keyword">from</span> <span class="string">&#x27;@hms.core.map.map&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">customBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@BuilderParam</span> <span class="attr">customBuilderParam</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="variable language_">this</span>.<span class="property">customBuilder</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">customBuilderParam</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index45</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">keys</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">component1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;component0&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">component2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;component1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">component3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;component2&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">30</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;显示component1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keys</span> = <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;显示component2&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keys</span> = <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;显示component3&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keys</span> = <span class="number">2</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keys</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">customBuilderParam</span>: <span class="variable language_">this</span>.<span class="property">component1</span> &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keys</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">customBuilderParam</span>: <span class="variable language_">this</span>.<span class="property">component2</span> &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">customBuilderParam</span>: <span class="variable language_">this</span>.<span class="property">component3</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. What class should be used to receive functions as parameters in HarmonyOS?  </span></span><br><span class="line"><span class="string">Define the method with the following code structure:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">get</span>(<span class="params"><span class="attr">url</span>: <span class="built_in">string</span>, <span class="attr">callback</span>: () =&gt; <span class="built_in">void</span></span>) &#123; &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to implement showLoading and showToast in HarmonyOS?  </span></span><br><span class="line"><span class="string">Use `</span>promptAction.<span class="property">openCustomDialog</span><span class="string">` for custom popups:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Index.ets </span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  changeDialogBuilder,</span><br><span class="line">  <span class="title class_">MyShowTest</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../common/HttpUtils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  customDialogBuilder</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./testProm&#x27;</span></span><br><span class="line"><span class="keyword">let</span> myShowTest = <span class="keyword">new</span> <span class="title class_">MyShowTest</span>()</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="title function_">changeDialogBuilder</span>(customDialogBuilder.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>).<span class="title function_">fontSize</span>(<span class="number">50</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          myShowTest.<span class="title function_">showTest</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// testProm.ets </span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">customDialogBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;正在加载中&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">  &#125;.<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#EEE&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HttpUtils.ets </span></span><br><span class="line"><span class="keyword">import</span> promptAction <span class="keyword">from</span> <span class="string">&#x27;@ohos.promptAction&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myDialogBuilder</span>: <span class="title class_">CustomBuilder</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">customDialogId</span>: <span class="built_in">number</span> = <span class="number">0</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">changeDialogBuilder</span>(<span class="params"><span class="attr">builder</span>: <span class="title class_">CustomBuilder</span></span>) &#123;</span><br><span class="line">  myDialogBuilder = builder</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyShowTest</span> &#123;</span><br><span class="line">  <span class="title function_">showTest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (myDialogBuilder === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    promptAction.<span class="title function_">openCustomDialog</span>(&#123;</span><br><span class="line">      <span class="attr">builder</span>: myDialogBuilder,</span><br><span class="line">      <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Center</span>,</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">dialogId</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      customDialogId = dialogId</span><br><span class="line">    &#125;) </span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Issues with immersive bottom status bar height changes in HarmonyOS  </span></span><br><span class="line"><span class="string">Inconsistent full-screen effects between page-level settings and JS settings:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>()).<span class="title function_">then</span>(<span class="function">(<span class="params">win</span>) =&gt;</span> &#123;</span><br><span class="line">  win.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">ExpandSafeArea2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isFullScreen</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">curWindow</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">TabArr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;首页&#x27;</span>, <span class="string">&#x27;推荐&#x27;</span>, <span class="string">&#x27;发现&#x27;</span>, <span class="string">&#x27;我的&#x27;</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">statusArr</span>: <span class="built_in">boolean</span>[] = []</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">bottomRectHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">marginBottom</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">statusArr</span> = [<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>]</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>()).<span class="title function_">then</span>(<span class="function">(<span class="params">win</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">curWindow</span> = win;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">curWindow</span>.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">      <span class="keyword">let</span> <span class="keyword">type</span> = <span class="variable language_">window</span>.<span class="property">AvoidAreaType</span>.<span class="property">TYPE_NAVIGATION_INDICATOR</span>; </span><br><span class="line">      <span class="keyword">let</span> avoidArea = win.<span class="title function_">getWindowAvoidArea</span>(<span class="keyword">type</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(avoidArea.<span class="property">bottomRect</span>))</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">bottomRectHeight</span> = <span class="title function_">px2vp</span>(avoidArea.<span class="property">bottomRect</span>.<span class="property">height</span>); </span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">handleFullScreen</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleFullScreen</span>(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">curWindow</span> || !<span class="variable language_">this</span>.<span class="property">statusArr</span>.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">curWindow</span>.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="variable language_">this</span>.<span class="property">statusArr</span>[index])</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">marginBottom</span> = <span class="variable language_">this</span>.<span class="property">statusArr</span>[index] === <span class="literal">true</span> ? <span class="variable language_">this</span>.<span class="property">bottomRectHeight</span> : <span class="number">0</span> </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">tabBuilder</span>(<span class="params"><span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">targetIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(title)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === targetIndex ? <span class="string">&#x27;#1698CE&#x27;</span> : <span class="string">&#x27;#6B6B6B&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">TabArr</span>, <span class="function">(<span class="params"><span class="attr">tab</span>: <span class="built_in">string</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(tab + <span class="string">&#x27;沉浸状态：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">statusArr</span>[index]).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">          .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabBuilder</span>(tab, <span class="number">0</span>))</span><br><span class="line">          .<span class="title function_">onWillShow</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">handleFullScreen</span>(index)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">vertical</span>(<span class="literal">false</span>)</span><br><span class="line">      .<span class="title function_">clip</span>(<span class="literal">false</span>) </span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(&#123;</span><br><span class="line">      <span class="attr">bottom</span>: <span class="variable language_">this</span>.<span class="property">marginBottom</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/226-Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/226-Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Nested Components, Decorator Errors, Iterative List Refresh, Unit Conversion, Tabs Component Lifecycle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:04:08 / Modified: 09:50:43" itemprop="dateCreated datePublished" datetime="2025-06-27T00:04:08+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle"><a href="#Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Nested Components, Decorator Errors, Iterative List Refresh, Unit Conversion, Tabs Component Lifecycle"></a>[Daily HarmonyOS Next Knowledge] Nested Components, Decorator Errors, Iterative List Refresh, Unit Conversion, Tabs Component Lifecycle</h3><h4 id="1-Issues-with-Nested-Components-in-HarmonyOS-ArkUI"><a href="#1-Issues-with-Nested-Components-in-HarmonyOS-ArkUI" class="headerlink" title="1. Issues with Nested Components in HarmonyOS ArkUI"></a>1. Issues with Nested Components in HarmonyOS ArkUI</h4><ol>
<li>How to wrap a component?  </li>
<li>How to wrap the <code>build()</code> function of a <code>@Component</code>-decorated component to implement generic loading and error displays?</li>
</ol>
<p>Reference demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CommComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./CommComponent&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ComponentStatus</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./CommonEnums&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Index2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">componentStatus</span>: <span class="title class_">ComponentStatus</span> = <span class="title class_">ComponentStatus</span>.<span class="property">SUCCESS</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// Pass builder content from the caller</span></span><br><span class="line">      <span class="title class_">CommComponent</span>(&#123; <span class="attr">componentStatus</span>: <span class="variable language_">this</span>.<span class="property">componentStatus</span>, <span class="attr">builder</span>: <span class="variable language_">this</span>.<span class="property">successBuild</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">successBuild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;成功的展示&#x27;</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      .<span class="title function_">borderWidth</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CommComponent&#x27;s builder method (simplified)</span></span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">builder</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. Error with @Concurrent Decorator in HarmonyOS  </span></span><br><span class="line"><span class="string">The `</span><span class="meta">@Concurrent</span><span class="string">` decorator always reports an error:  </span></span><br><span class="line"><span class="string">&gt; &quot;Decorator function return type is ‘void | TypedPropertyDescriptor&lt;unknown&gt;’ but is expected to be ‘void’ or ‘any’. Type ‘TypedPropertyDescriptor&lt;unknown&gt;’ is not assignable to type ‘void’.&quot; &lt;ArkTSCheck&gt;  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> taskpool <span class="keyword">from</span> <span class="string">&#x27;@ohos.taskpool&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Concurrent</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testPromise</span>(<span class="params"><span class="attr">args1</span>: <span class="built_in">number</span>, <span class="attr">args2</span>: <span class="built_in">number</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt;(<span class="function">(<span class="params">testFuncA, testFuncB</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">testFuncA</span>(args1 + args2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">FCDemoTest</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="attr">instance</span>: <span class="title class_">FCDemoTest</span> = <span class="keyword">new</span> <span class="title class_">FCDemoTest</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">checkInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">task1</span>: taskpool.<span class="property">Task</span> = <span class="keyword">new</span> taskpool.<span class="title class_">Task</span>(testPromise, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    taskpool.<span class="title function_">execute</span>(task1).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">d</span>: <span class="built_in">object</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;task1 res is: &quot;</span> + d)</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">e</span>: <span class="built_in">object</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;task1 catch e: &quot;</span> + e)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Refresh Issues with ForEach Lists in HarmonyOS  </span></span><br><span class="line"><span class="string">The publish time in a list does not update after refreshing because the data source remains identical. However, the display time is calculated as a difference between the current time and the publish time (e.g., &quot;just now&quot;, &quot;2 minutes ago&quot;). Since `</span><span class="title class_">ForEach</span><span class="string">` only checks if the data source changes, the display does not update.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. Add the time difference to the data source, update it during refresh, and use it as the key in `</span>keyGenerator<span class="string">`.  </span></span><br><span class="line"><span class="string">2. Use a custom key generator with a dynamic value (e.g., timestamp) to force updates.  </span></span><br><span class="line"><span class="string">3. Toggle between two identical lists to trigger re-rendering.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">one</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">two</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">two</span>) &#123;</span><br><span class="line">            <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">one</span> &#125;)</span><br><span class="line">              .<span class="title function_">enabled</span>(!<span class="variable language_">this</span>.<span class="property">two</span>)</span><br><span class="line">              .<span class="title function_">onChange</span>(<span class="function">(<span class="params">isOn</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">one</span> = isOn;</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">one</span> &#125;)</span><br><span class="line">              .<span class="title function_">enabled</span>(!<span class="variable language_">this</span>.<span class="property">two</span>)</span><br><span class="line">              .<span class="title function_">onChange</span>(<span class="function">(<span class="params">isOn</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">one</span> = isOn;</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">            .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">          <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">two</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">isOn</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">two</span> = isOn;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&quot;25vp&quot;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&#x27;24vp&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;24vp&#x27;</span> &#125;)</span><br><span class="line">      .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Unit Conversion for RenderNode in HarmonyOS  </span></span><br><span class="line"><span class="string">How to convert between units (e.g., vp and px) to align `</span>drawRect<span class="string">` dimensions with the frame?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Unit conversion reference:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ArkUI provides 4 pixel units, with vp as the base unit:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Unit | Description |</span></span><br><span class="line"><span class="string">| :-- | :-- |</span></span><br><span class="line"><span class="string">| px | Physical screen pixels |</span></span><br><span class="line"><span class="string">| vp | Screen density-dependent pixels (default unit if unspecified). &lt;br&gt;**Note**: The vp-to-px ratio depends on screen density. |</span></span><br><span class="line"><span class="string">| fp | Font pixels (scale with system font size) |</span></span><br><span class="line"><span class="string">| lpx | Logical viewport pixels (ratio of actual to logical screen width, default designWidth=720) |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Conversion APIs:  </span></span><br><span class="line"><span class="string">| Method | Description |</span></span><br><span class="line"><span class="string">| :-- | :-- |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">vp2px</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert vp to px |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">px2vp</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert px to vp |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">fp2px</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert fp to px |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">px2fp</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert px to fp |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">lpx2px</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert lpx to px |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">px2lpx</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert px to lpx |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to Ensure a Tab Page Runs Code Every Time it Appears in HarmonyOS? (onPageShow Not Triggered)  </span></span><br><span class="line"><span class="string">The `</span>onPageShow<span class="string">` lifecycle method does not trigger when switching tabs. Instead, use the component-level `</span><span class="title function_">aboutToAppear</span>()<span class="string">` method.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Recommended approach**:  </span></span><br><span class="line"><span class="string">1. Use `</span><span class="title function_">onTabBarClick</span>(<span class="attr">event</span>: <span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>)<span class="string">` in the parent component to track the active tab index.  </span></span><br><span class="line"><span class="string">2. Pass the active index to child components via `</span><span class="meta">@State</span><span class="string">` and `</span><span class="meta">@Props</span><span class="string">`.  </span></span><br><span class="line"><span class="string">3. Use `</span><span class="meta">@Watch</span><span class="string">` in child components to detect index changes and call `</span><span class="title function_">showPage</span>()<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example implementation:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Parent component</span></span><br><span class="line"><span class="title class_">Tabs</span>() &#123;</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="title class_">ChildComponent</span>(&#123; <span class="attr">activeTabIndex</span>: $currentTabIndex &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">onTabBarClick</span>(<span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentTabIndex</span> = index;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Child component</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ChildComponent</span> &#123;</span><br><span class="line">  <span class="meta">@Props</span> <span class="attr">activeTabIndex</span>: <span class="built_in">number</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Watch</span>(<span class="string">&#x27;onTabIndexChange&#x27;</span>)</span><br><span class="line">  <span class="title function_">onTabIndexChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">showPage</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">showPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Code to run when tab appears</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/225-Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/225-Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Drawer Effect, Tree Component, Offscreen Rendering, Context Acquisition, Tab Lifecycle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:02:55 / Modified: 00:03:17" itemprop="dateCreated datePublished" datetime="2025-06-27T00:02:55+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle"><a href="#Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Drawer Effect, Tree Component, Offscreen Rendering, Context Acquisition, Tab Lifecycle"></a>[Daily HarmonyOS Next Knowledge] Drawer Effect, Tree Component, Offscreen Rendering, Context Acquisition, Tab Lifecycle</h3><h4 id="1-How-to-implement-a-drawer-effect-control-in-HarmonyOS"><a href="#1-How-to-implement-a-drawer-effect-control-in-HarmonyOS" class="headerlink" title="1. How to implement a drawer effect control in HarmonyOS?"></a>1. How to implement a drawer effect control in HarmonyOS?</h4><p>Use a semi-modal sheet to achieve the drawer effect. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#%E7%A4%BA%E4%BE%8B">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#%E7%A4%BA%E4%BE%8B</a>  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct SheetTransitionExample &#123;
  @State isShow: boolean = false
  @State sheetHeight: number = 300;

  @Builder
  myBuilder() &#123;
    Column() &#123;
      Button(&quot;change height&quot;)
        .margin(10)
        .fontSize(20)
        .onClick(() =&gt; &#123;
          this.sheetHeight = 500;
        &#125;)

      Button(&quot;Set Illegal height&quot;)
        .margin(10)
        .fontSize(20)
        .onClick(() =&gt; &#123;
          this.sheetHeight = -1;
        &#125;)

      Button(&quot;close modal 1&quot;)
        .margin(10)
        .fontSize(20)
        .onClick(() =&gt; &#123;
          this.isShow = false;
        &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;

  build() &#123;
    Column() &#123;
      Button(&quot;transition modal 1&quot;)
        .onClick(() =&gt; &#123;
          this.isShow = true
        &#125;)
        .fontSize(20)
        .margin(10)
        .bindSheet($$this.isShow, this.myBuilder(), &#123;
          height: this.sheetHeight,
          backgroundColor: Color.Green,
          onWillAppear: () =&gt; &#123;
            console.log(&quot;BindSheet onWillAppear.&quot;)
          &#125;,
          onAppear: () =&gt; &#123;
            console.log(&quot;BindSheet onAppear.&quot;)
          &#125;,
          onWillDisappear: () =&gt; &#123;
            console.log(&quot;BindSheet onWillDisappear.&quot;)
          &#125;,
          onDisappear: () =&gt; &#123;
            console.log(&quot;BindSheet onDisappear.&quot;)
          &#125;
        &#125;)
    &#125;
    .justifyContent(FlexAlign.Center)
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p>Effect diagram:<br>![[【每日学点HarmonyOS Next Knowledge】25.02.25.gif]]  </p>
<p>Another approach combines overlay attributes with the Panel container. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-panel-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-panel-V5</a><br>The Panel is a scrollable panel that provides a lightweight content display window for easy switching between different sizes.  </p>
<h4 id="2-How-to-customize-Cell-content-in-HarmonyOS-TreeView"><a href="#2-How-to-customize-Cell-content-in-HarmonyOS-TreeView" class="headerlink" title="2. How to customize Cell content in HarmonyOS TreeView?"></a>2. How to customize Cell content in HarmonyOS TreeView?</h4><ol>
<li>Customize Cell height, text color, font, spacing, and show&#x2F;hide the right arrow button in TreeView.  </li>
<li>Implement a delete button when swiping right on a Cell.  </li>
<li>Implement Cell selection with circular radio buttons at the start of each Cell.</li>
</ol>
<ul>
<li>1: TreeView does not currently support custom node styles.  </li>
<li>2: Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-listitem-V5#ZH-CN_TOPIC_0000001930676593__swipeaction9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-listitem-V5#ZH-CN_TOPIC_0000001930676593__swipeaction9</a>  </li>
<li>3: Custom styles are required for implementation.</li>
</ul>
<h4 id="3-The-ImageBitmap-generated-by-offscreen-rendering-cannot-be-displayed-using-CanvasRenderingContext2D-drawImage-in-HarmonyOS"><a href="#3-The-ImageBitmap-generated-by-offscreen-rendering-cannot-be-displayed-using-CanvasRenderingContext2D-drawImage-in-HarmonyOS" class="headerlink" title="3. The ImageBitmap generated by offscreen rendering cannot be displayed using CanvasRenderingContext2D.drawImage() in HarmonyOS?"></a>3. The ImageBitmap generated by offscreen rendering cannot be displayed using CanvasRenderingContext2D.drawImage() in HarmonyOS?</h4><p>When using CanvasRenderingContext2D.drawImage() to render an ImageBitmap generated by OffscreenCanvas, it may not display. Official examples recommend using CanvasRenderingContext2D.transferFromImageBitmap() instead, as drawImage() may fail to display the content.  </p>
<h4 id="4-The-context-obtained-in-entryAbility’s-onWindowStageCreate-is-null-in-HarmonyOS"><a href="#4-The-context-obtained-in-entryAbility’s-onWindowStageCreate-is-null-in-HarmonyOS" class="headerlink" title="4. The context obtained in entryAbility’s onWindowStageCreate is null in HarmonyOS?"></a>4. The context obtained in entryAbility’s onWindowStageCreate is null in HarmonyOS?</h4><p>The getContext(component?: Object): Context method requires a @Component-decorated page as a parameter, which is not supported in entryAbility. In an ability, use this.context directly to obtain the context. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-getcontext-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-getcontext-V5</a>  </p>
<h4 id="5-The-Entry-decorated-component-in-HarmonyOS-does-not-trigger-the-onPageShow-method"><a href="#5-The-Entry-decorated-component-in-HarmonyOS-does-not-trigger-the-onPageShow-method" class="headerlink" title="5. The @Entry-decorated component in HarmonyOS does not trigger the onPageShow method?"></a>5. The @Entry-decorated component in HarmonyOS does not trigger the onPageShow method?</h4><p>When an @Entry-decorated component is embedded in Tabs, onPageShow is not triggered. Tabs treat the component as a regular component (even with @Entry), so use aboutToAppear instead.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/224-Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/224-Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Pull-up/Pull-down Actions, Image Preview, Component Margins, this Reference, SVG Rotation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:01:49 / Modified: 00:02:05" itemprop="dateCreated datePublished" datetime="2025-06-27T00:01:49+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation"><a href="#Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Pull-up&#x2F;Pull-down Actions, Image Preview, Component Margins, this Reference, SVG Rotation"></a>[Daily HarmonyOS Next Knowledge] Pull-up&#x2F;Pull-down Actions, Image Preview, Component Margins, this Reference, SVG Rotation</h3><h4 id="1-How-to-implement-pull-up-refresh-in-HarmonyOS-including-API-calls-and-animation-pull-down-refresh-is-similar"><a href="#1-How-to-implement-pull-up-refresh-in-HarmonyOS-including-API-calls-and-animation-pull-down-refresh-is-similar" class="headerlink" title="1. How to implement pull-up refresh in HarmonyOS, including API calls and animation (pull-down refresh is similar)?"></a>1. How to implement pull-up refresh in HarmonyOS, including API calls and animation (pull-down refresh is similar)?</h4><p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5</a>  </p>
<p>The <code>Refresh</code> component is a container that supports pull-down operations and displays refresh animations.  </p>
<h4 id="2-How-to-implement-image-preview-in-HarmonyOS"><a href="#2-How-to-implement-image-preview-in-HarmonyOS" class="headerlink" title="2. How to implement image preview in HarmonyOS?"></a>2. How to implement image preview in HarmonyOS?</h4><p>It is recommended to use the <code>Image</code> component, which supports rendering local and network images. Refer to: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/imageviewer">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/imageviewer</a>  </p>
<p><strong>Image preview features</strong>:  </p>
<ol>
<li>Pinch with two fingers to zoom.  </li>
<li>Double-tap to toggle between zoomed and default states.  </li>
<li>Slide to view different parts of the image in zoomed mode.</li>
</ol>
<p><strong>Implementation approach</strong>:  </p>
<ol>
<li>Use <code>matrix</code> for zooming:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="attr">matrix</span>: matrix4.<span class="property">Matrix4Transit</span> = matrix4.<span class="title function_">identity</span>().<span class="title function_">copy</span>();</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">transform</span>(<span class="variable language_">this</span>.<span class="property">matrix</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Use `</span>offset<span class="string">` for positioning:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@State</span> <span class="attr">imageOffsetInfo</span>: <span class="title class_">OffsetModel</span> = <span class="keyword">new</span> <span class="title class_">OffsetModel</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">offset</span>(&#123;</span><br><span class="line">        <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">imageOffsetInfo</span>.<span class="property">currentX</span>,</span><br><span class="line">        <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">imageOffsetInfo</span>.<span class="property">currentY</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Set `</span>objectFit<span class="string">` to `</span><span class="title class_">Cover</span><span class="string">` to maintain aspect ratio and allow overflow:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. Precompute image info and set default size with `</span>width/height<span class="string">` and `</span>aspectRatio<span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">initCurrentImageInfo</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">matrix</span> = matrix4.<span class="title function_">identity</span>().<span class="title function_">copy</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">imageSource</span>: image.<span class="property">ImageSource</span> = image.<span class="title function_">createImageSource</span>(<span class="variable language_">this</span>.<span class="property">imageUri</span>);</span><br><span class="line">    imageSource.<span class="title function_">getImageInfo</span>(<span class="number">0</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">data</span>: image.<span class="title class_">ImageInfo</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imageWHRatio</span> = data.<span class="property">size</span>.<span class="property">width</span> / data.<span class="property">size</span>.<span class="property">height</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imageDefaultSize</span> = <span class="variable language_">this</span>.<span class="title function_">calcImageDefaultSize</span>(<span class="variable language_">this</span>.<span class="property">imageWHRatio</span>, windowSizeManager.<span class="title function_">get</span>());</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">imageDefaultSize</span>.<span class="property">width</span> === windowSizeManager.<span class="title function_">get</span>().<span class="property">width</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fitWH</span> = <span class="string">&quot;width&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fitWH</span> = <span class="string">&quot;height&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imageScaleInfo</span>.<span class="property">maxScaleValue</span> += <span class="variable language_">this</span>.<span class="property">fitWH</span> === <span class="string">&quot;width&quot;</span> ? </span><br><span class="line">            (windowSizeManager.<span class="title function_">get</span>().<span class="property">height</span> / <span class="variable language_">this</span>.<span class="property">imageDefaultSize</span>.<span class="property">height</span>) : </span><br><span class="line">            (windowSizeManager.<span class="title function_">get</span>().<span class="property">width</span> / <span class="variable language_">this</span>.<span class="property">imageDefaultSize</span>.<span class="property">width</span>);</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[error][getImageInfo]<span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    imageSource.<span class="title function_">createPixelMap</span>().<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">data</span>: image.<span class="title class_">PixelMap</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imagePixelMap</span> = data;</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[error][createPixelMap]<span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">fitWH</span> === <span class="string">&quot;width&quot;</span> ? $r(<span class="string">&quot;app.string.image_default_width&quot;</span>) : <span class="literal">undefined</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">fitWH</span> === <span class="string">&quot;height&quot;</span> ? $r(<span class="string">&quot;app.string.image_default_height&quot;</span>) : <span class="literal">undefined</span>)</span><br><span class="line">    .<span class="title function_">aspectRatio</span>(<span class="variable language_">this</span>.<span class="property">imageWHRatio</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to get the padding value of a component in HarmonyOS?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">const</span> <span class="attr">TEST_TAG</span>: <span class="built_in">string</span> = <span class="string">&quot;FrameNode&quot;</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;我的测试&#x27;</span>)</span><br><span class="line">        .<span class="title function_">key</span>(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: <span class="string">&#x27;10vp&#x27;</span>,</span><br><span class="line">          <span class="attr">right</span>: <span class="string">&#x27;20vp&#x27;</span>,</span><br><span class="line">          <span class="attr">bottom</span>: <span class="string">&#x27;30vp&#x27;</span>,</span><br><span class="line">          <span class="attr">left</span>: <span class="string">&#x27;40vp&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;获取padding&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> frameNode = <span class="variable language_">this</span>.<span class="title function_">getUIContext</span>().<span class="title function_">getFrameNodeById</span>(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">          <span class="keyword">let</span> userConfigPadding = frameNode?.<span class="title function_">getUserConfigPadding</span>();</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">TEST_TAG</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(userConfigPadding));</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Can&#x27;t get `</span><span class="variable language_">this</span><span class="string">` in HarmonyOS LiveEventBus?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LiveEventBus</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/liveeventbus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/liveeventbus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Lifecycle</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/liveeventbus&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">KEY_TEST_CLOSE_ALL_PAGE</span> = <span class="string">&quot;key_test_close_all_page&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(&#123; <span class="attr">routeName</span>: <span class="string">&quot;EditorPage&quot;</span> &#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">EditorPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">mLifecycle</span>?: <span class="title class_">Lifecycle</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getLifecycle</span>(): <span class="title class_">Lifecycle</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">mLifecycle</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">mLifecycle</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Lifecycle</span>(<span class="title class_">MState</span>.<span class="property">STARTED</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Create lifecycle-aware object</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">mLifecycle</span> = <span class="keyword">new</span> <span class="title class_">Lifecycle</span>(<span class="title class_">MState</span>.<span class="property">STARTED</span>)</span><br><span class="line">    <span class="comment">// Subscribe to messages</span></span><br><span class="line">    <span class="title class_">LiveEventBus</span></span><br><span class="line">      .<span class="property">get</span>&lt;<span class="built_in">boolean</span>&gt;(<span class="variable constant_">KEY_TEST_CLOSE_ALL_PAGE</span>)</span><br><span class="line">      .<span class="title function_">observe</span>(<span class="variable language_">this</span>, &#123;</span><br><span class="line">        <span class="attr">onChanged</span>: <span class="function">(<span class="params"><span class="attr">b</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to rotate an SVG icon in HarmonyOS?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Image</span>($rawfile(<span class="string">&#x27;svgLevel.svg&#x27;</span>))</span><br><span class="line">  .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">  .<span class="title function_">rotate</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">z</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">angle</span>: <span class="number">180</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/223-Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Scope-Issues-Observer-Problems-Dialog-Closure-Object-Field-Check/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/223-Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Scope-Issues-Observer-Problems-Dialog-Closure-Object-Field-Check/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Scope Issues, Observer Problems, Dialog Closure, Object Field Check</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:00:39 / Modified: 00:00:57" itemprop="dateCreated datePublished" datetime="2025-06-27T00:00:39+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Scope-Issues-Observer-Problems-Dialog-Closure-Object-Field-Check"><a href="#Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Scope-Issues-Observer-Problems-Dialog-Closure-Object-Field-Check" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Scope Issues, Observer Problems, Dialog Closure, Object Field Check"></a>[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Scope Issues, Observer Problems, Dialog Closure, Object Field Check</h3><h4 id="1-How-to-Implement-Screenshot-Prevention-in-HarmonyOS"><a href="#1-How-to-Implement-Screenshot-Prevention-in-HarmonyOS" class="headerlink" title="1. How to Implement Screenshot Prevention in HarmonyOS?"></a>1. How to Implement Screenshot Prevention in HarmonyOS?</h4><p>Reference demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>)).<span class="title function_">then</span>(<span class="function">(<span class="params">win</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">window</span> = win</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>), <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span>, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>;</span><br><span class="line">  <span class="keyword">if</span> (errCode) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the top window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  windowClass = data;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in obtaining the top window. Data: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">  <span class="title function_">setWindowPrivacyMode</span>(windowClass, <span class="literal">true</span>)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setWindowPrivacyMode</span>(<span class="params"><span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="title class_">Window</span>, <span class="attr">isPrivacyMode</span>: <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">  windowClass.<span class="title function_">setWindowPrivacyMode</span>(isPrivacyMode);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`setWindowPrivacyMode 已执行`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS Scope Issues  </span></span><br><span class="line"><span class="string">When using CustomDialog, calling the current page&#x27;s method after clicking &quot;Confirm&quot; prompts it as non-callable. Is this a scope issue?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This is a `</span><span class="variable language_">this</span><span class="string">` binding issue. If using `</span><span class="attr">confirm</span>: <span class="variable language_">this</span>.<span class="property">onConfirm</span><span class="string">` in the custom dialog, `</span><span class="variable language_">this</span><span class="string">` refers to the dialog itself. Since the dialog has no `</span><span class="title function_">jumpToMainPage</span>()<span class="string">` method, it errors with &quot;is not callable&quot;. Suggest rewriting as:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="attr">confirm</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">onConfirm</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Can @Watch Observe Changes in @Consume-Decorated State Variables in HarmonyOS?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CompD</span> &#123;</span><br><span class="line">  <span class="meta">@Consume</span> <span class="meta">@Watch</span>(<span class="string">&#x27;onChange&#x27;</span>) <span class="attr">selectedDate</span>: <span class="title class_">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;值改变了！！！&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">`child increase the day by 1`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setDate</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getDate</span>() + <span class="number">1</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;child update the new date&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023-09-09&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">DatePicker</span>(&#123;</span><br><span class="line">        <span class="attr">start</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;1970-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">end</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2100-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">selected</span>: <span class="variable language_">this</span>.<span class="property">selectedDate</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CompA</span> &#123;</span><br><span class="line">  <span class="meta">@Provide</span> <span class="attr">selectedDate</span>: <span class="title class_">Date</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2021-08-08&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;parent increase the day by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setDate</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getDate</span>() + <span class="number">1</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;parent update the new date&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023-07-07&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">DatePicker</span>(&#123;</span><br><span class="line">        <span class="attr">start</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;1970-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">end</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2100-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">selected</span>: <span class="variable language_">this</span>.<span class="property">selectedDate</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">CompD</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Custom Dialog this.controller.close() Fails or Returns undefined  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line">struct <span class="title class_">CustomDialogExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>?: <span class="title class_">CustomDialogController</span></span><br><span class="line">  <span class="attr">cancel</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">confirm</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;可展示在主窗口外的弹窗&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;点我关闭弹窗&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">controller</span> != <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">close</span>()</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;关闭成功&#x27;</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;关闭失败&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CustomDialogUser</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>: <span class="title class_">CustomDialogController</span> | <span class="literal">null</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(&#123;</span><br><span class="line">      <span class="attr">cancel</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onCancel</span>()</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">confirm</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onAccept</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">cancel</span>: <span class="variable language_">this</span>.<span class="property">existApp</span>,</span><br><span class="line">    <span class="attr">autoCancel</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Center</span>,</span><br><span class="line">    <span class="attr">offset</span>: &#123; <span class="attr">dx</span>: <span class="number">0</span>, <span class="attr">dy</span>: -<span class="number">20</span> &#125;,</span><br><span class="line">    <span class="attr">gridCount</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">showInSubWindow</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">isModal</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">customStyle</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">cornerRadius</span>: <span class="number">10</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogController</span> = <span class="literal">null</span> </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onCancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Callback when the first button is clicked&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onAccept</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Callback when the second button is clicked&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">existApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Click the callback in the blank area&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;click me&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dialogController</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">open</span>()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0x317aff</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to Check if an Object Contains a Key in HarmonyOS?  </span></span><br><span class="line"><span class="string">To check if `</span>res<span class="string">` (an object returned by an API) contains the key `</span>ad_4<span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">let</span> <span class="attr">jsonobject</span>:<span class="title class_">Record</span>&lt;<span class="built_in">string</span>,<span class="title class_">Object</span>&gt; = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res)) <span class="keyword">as</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>,<span class="title class_">Object</span>&gt;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(jsonobject).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (key !== <span class="literal">undefined</span> &amp;&amp; key === <span class="string">&#x27;ad_4&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">ob4</span>: <span class="title class_">CarouselInfo1</span>[] = res[key] <span class="keyword">as</span> <span class="title class_">CarouselInfo1</span>[];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; ob4.<span class="property">length</span>; index++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rechargeCarouseInfo</span>.<span class="title function_">push</span>(ob4[index])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/222-Daily-HarmonyOS-Next-Knowledge-Page-Reference-Issues-JSON-Third-party-Libraries-Routing-Table-Usage-Pull-to-Refresh-Problems-Video-Playback-Errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/222-Daily-HarmonyOS-Next-Knowledge-Page-Reference-Issues-JSON-Third-party-Libraries-Routing-Table-Usage-Pull-to-Refresh-Problems-Video-Playback-Errors/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Page Reference Issues, JSON Third-party Libraries, Routing Table Usage, Pull-to-Refresh Problems, Video Playback Errors</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 23:59:20 / Modified: 23:59:45" itemprop="dateCreated datePublished" datetime="2025-06-26T23:59:20+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Page-Reference-Issues-JSON-Third-party-Libraries-Routing-Table-Usage-Pull-to-Refresh-Problems-Video-Playback-Errors"><a href="#Daily-HarmonyOS-Next-Knowledge-Page-Reference-Issues-JSON-Third-party-Libraries-Routing-Table-Usage-Pull-to-Refresh-Problems-Video-Playback-Errors" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Page Reference Issues, JSON Third-party Libraries, Routing Table Usage, Pull-to-Refresh Problems, Video Playback Errors"></a>[Daily HarmonyOS Next Knowledge] Page Reference Issues, JSON Third-party Libraries, Routing Table Usage, Pull-to-Refresh Problems, Video Playback Errors</h3><h4 id="1-Issue-Full-screen-custom-component-referenced-by-another-page-disables-button-functions-on-the-other-page"><a href="#1-Issue-Full-screen-custom-component-referenced-by-another-page-disables-button-functions-on-the-other-page" class="headerlink" title="1. Issue: Full-screen custom component referenced by another page disables button functions on the other page"></a>1. Issue: Full-screen custom component referenced by another page disables button functions on the other page</h4><p>Reference code:  </p>
<pre><code class="language-typescript">//1.index.ets
@Entry
@Component
struct First &#123;
  @State visible: Visibility = Visibility.None

  build() &#123;
    // Using Stack to implement a pseudo-Dialog overlay on the original page
    Stack() &#123;
      Column() &#123;
        Button(&#39;Page bottom button&#39;)
          .onClick(() =&gt; &#123;
            // showToast(&#39;Clicked bottom button&#39;)
            console.log(&#39;Clicked bottom button&#39;, this.visible)
          &#125;)
          .backgroundColor(Color.Blue)
          .margin(&#123; top: 200 &#125;)

      &#125;.width(&#39;100%&#39;)
      .height(&#39;100%&#39;)
      .backgroundColor(Color.Red)

      Component1(&#123; visible: $visible &#125;)

    &#125;.width(&#39;100%&#39;)
    .height(&#39;100%&#39;)

  &#125;
&#125;
//2.Component1.ets
@Component
export struct Component1 &#123;
  @Link visible: Visibility
  @State btnvisible: Visibility = Visibility.Visible
  build() &#123;
    Stack() &#123;
      Row() &#123;
        // Initial page
        Column() &#123;
          // Dialog trigger point
          Flex(&#123; direction: FlexDirection.Row, justifyContent: FlexAlign.End &#125;) &#123;
            Button(&#39;click&#39;)
              .type(ButtonType.Normal)
              .onClick(() =&gt; &#123;
                // Test if click event is transmitted to the original page (no transmission detected, conforms to Dialog specifications)
                console.log(&quot;hit me!&quot;)
                if (this.visible == Visibility.Visible) &#123;
                  this.visible = Visibility.None
                  this.btnvisible = Visibility.Visible
                &#125; else &#123;
                  this.visible = Visibility.Visible
                  this.btnvisible = Visibility.None
                &#125;
              &#125;)
              .fontColor(Color.White)
              .width(80)
              .height(80)
          &#125;

        &#125;
        .backgroundColor(Color.Green)
        .alignItems(HorizontalAlign.End)
        .width(80)
        .visibility(this.btnvisible)
      &#125;
      .backgroundColor(Color.Yellow)
      // Start of pop-up effect construction (main modifications needed): Add a semi-transparent gray overlay
      Column() &#123;
        Text(&#39;I am the pop-up content page&#39;).fontColor(Color.Green)
      &#125;
      .width(&#39;100%&#39;)
      .height(&#39;100%&#39;)
      .onClick(() =&gt; &#123;
        if (this.visible == Visibility.Visible) &#123;
          this.visible = Visibility.None
          this.btnvisible = Visibility.Visible
        &#125; else &#123;
          this.visible = Visibility.Visible
          this.btnvisible = Visibility.None
        &#125;
      &#125;)
      // Adjust opacity as needed
      .opacity(0.7)
      .backgroundColor(Color.Orange)
      .visibility(this.visible)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-parse-JSON-content-in-HarmonyOS-Are-there-more-JSON-libraries"><a href="#2-How-to-parse-JSON-content-in-HarmonyOS-Are-there-more-JSON-libraries" class="headerlink" title="2. How to parse JSON content in HarmonyOS? Are there more JSON libraries?"></a>2. How to parse JSON content in HarmonyOS? Are there more JSON libraries?</h4><p>Does it have a built-in JSON library? Only saw JSON.parse and JSON.stringify, but how to read properties from a JSON object?  </p>
<p>For JSON parsing and generation API methods, refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-json-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-json-V5</a><br>Third-party JSON library link:<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/tpc_c_cplusplus/tree/master/thirdparty/rapidjson">https://gitee.com/openharmony-sig/tpc_c_cplusplus/tree/master/thirdparty/rapidjson</a>  </p>
<h4 id="3-How-to-mix-system-routing-tables-and-custom-routing-in-HarmonyOS-Can-you-provide-a-demo"><a href="#3-How-to-mix-system-routing-tables-and-custom-routing-in-HarmonyOS-Can-you-provide-a-demo" class="headerlink" title="3. How to mix system routing tables and custom routing in HarmonyOS? Can you provide a demo?"></a>3. How to mix system routing tables and custom routing in HarmonyOS? Can you provide a demo?</h4><p>There is currently no demo for mixing custom routing tables and system routing tables; specific usage refers to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-set-navigation-routing-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-set-navigation-routing-V5</a>  </p>
<p>Refer to the Navigation system routing in the sample code link:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/samples/">https://developer.huawei.com/consumer/cn/samples/</a>  </p>
<h4 id="4-Issue-The-loading-icon-remains-visible-after-pull-to-refresh-in-HarmonyOS"><a href="#4-Issue-The-loading-icon-remains-visible-after-pull-to-refresh-in-HarmonyOS" class="headerlink" title="4. Issue: The loading icon remains visible after pull-to-refresh in HarmonyOS"></a>4. Issue: The loading icon remains visible after pull-to-refresh in HarmonyOS</h4><p>Reasons why the loading icon remains visible after refreshing:  </p>
<ol>
<li>There is white space at the top of the Refresh component (the empty row from the avatar component), allowing the loading icon to be displayed.  </li>
<li>Problem with assigning this.RefreshText:</li>
</ol>
<pre><code class="language-typescript">.onRefreshing(async () =&gt; &#123;
  await this.onInitialize
  this.isRefreshing = false
  this.RefreshText = &#39;&#39;
  console.log(&#39;onRefreshing test&#39;)
&#125;)
</code></pre>
<p>Here, assigning this.RefreshText to ‘’ fails.  </p>
<pre><code class="language-typescript">.onRefreshing(() =&gt; &#123;
  setTimeout(() =&gt; &#123;
    this.isRefreshing = false
    this.RefreshText = &#39;&#39;
  &#125;, 2000)
  console.log(&#39;onRefreshing test&#39;)
&#125;)
</code></pre>
<p>Here, assigning this.RefreshText to ‘’ works. After the data request, this.RefreshText is successfully assigned (not ‘Loading…’), and the loading icon hides automatically.  </p>
<h4 id="5-Issue-HarmonyOS-video-playback-occasionally-returns-error-code-5400106"><a href="#5-Issue-HarmonyOS-video-playback-occasionally-returns-error-code-5400106" class="headerlink" title="5. Issue: HarmonyOS video playback occasionally returns error code 5400106"></a>5. Issue: HarmonyOS video playback occasionally returns error code 5400106</h4><p>5400106: Unsupported format<br>Error message: Unsupport format.<br>Error description: Unsupported specification.<br>Possible cause: Unsupported file or format.<br>Troubleshooting steps: The currently used format specification is unsupported. Switch to a supported specification. This error indicates a problem with the file format; check the video URI.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/221-Daily-HarmonyOS-Next-Knowledge-Tab-Interception-Component-Method-as-Parameter-Custom-Component-Chaining-Multiple-Observer-Listeners-Screen-Orientation-Switching/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/221-Daily-HarmonyOS-Next-Knowledge-Tab-Interception-Component-Method-as-Parameter-Custom-Component-Chaining-Multiple-Observer-Listeners-Screen-Orientation-Switching/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Tab Interception, Component Method as Parameter, Custom Component Chaining, Multiple Observer Listeners, Screen Orientation Switching</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 23:58:11 / Modified: 23:58:28" itemprop="dateCreated datePublished" datetime="2025-06-26T23:58:11+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Tab-Interception-Component-Method-as-Parameter-Custom-Component-Chaining-Multiple-Observer-Listeners-Screen-Orientation-Switching"><a href="#Daily-HarmonyOS-Next-Knowledge-Tab-Interception-Component-Method-as-Parameter-Custom-Component-Chaining-Multiple-Observer-Listeners-Screen-Orientation-Switching" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Tab Interception, Component Method as Parameter, Custom Component Chaining, Multiple Observer Listeners, Screen Orientation Switching"></a>[Daily HarmonyOS Next Knowledge] Tab Interception, Component Method as Parameter, Custom Component Chaining, Multiple Observer Listeners, Screen Orientation Switching</h3><h4 id="1-How-to-intercept-tabBar-clicks-in-the-HarmonyOS-Tab-component-and-determine-whether-to-allow-tab-switching-based-on-conditions"><a href="#1-How-to-intercept-tabBar-clicks-in-the-HarmonyOS-Tab-component-and-determine-whether-to-allow-tab-switching-based-on-conditions" class="headerlink" title="1. How to intercept tabBar clicks in the HarmonyOS Tab component and determine whether to allow tab switching based on conditions?"></a>1. How to intercept tabBar clicks in the HarmonyOS Tab component and determine whether to allow tab switching based on conditions?</h4><p><strong>Intercepting Tab Switching</strong><br>Currently, there is no built-in function to intercept tabBar clicks. You can use <code>TabsController</code> to customize tabs and add event logic. Example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ButtonInfoModel</span> &#123;</span><br><span class="line">  <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="attr">info</span>: <span class="built_in">string</span> = <span class="string">&#x27;home&#x27;</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span> = <span class="string">&#x27;Home&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">buttonInfo</span>: <span class="title class_">ButtonInfoModel</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">index</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Home&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">index</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Map&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">index</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;charging&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Charging&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Home</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Home&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Clicking prevents navigation to Charging; redirects to Map&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            buttonInfo[<span class="number">2</span>].<span class="property">info</span> = <span class="string">&quot;map&quot;</span></span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Map</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Map&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Charging</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Charging&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="2-Can-methods-decorated-with-Builder-in-HarmonyOS-be-passed-as-parameters"><a href="#2-Can-methods-decorated-with-Builder-in-HarmonyOS-be-passed-as-parameters" class="headerlink" title="2. Can methods decorated with @Builder in HarmonyOS be passed as parameters?"></a>2. Can methods decorated with @Builder in HarmonyOS be passed as parameters?</h4><p><strong>Parameter Passing for @Builder Methods</strong><br>Currently, this parameter passing pattern is unsupported. Refer to parameter passing for custom builder functions:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builder-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builder-V5</a>  </p>
<p>ArkUI provides a lightweight UI reuse mechanism <code>@Builder</code> for fixed UI structures with data binding. Reusable UI elements can be abstracted into methods and invoked in the <code>build</code> method.  </p>
<h4 id="3-Does-HarmonyOS-support-chaining-calls-for-custom-components"><a href="#3-Does-HarmonyOS-support-chaining-calls-for-custom-components" class="headerlink" title="3. Does HarmonyOS support chaining calls for custom components?"></a>3. Does HarmonyOS support chaining calls for custom components?</h4><p><strong>Implementing Chaining Calls for Custom Components</strong><br>Use <code>@Styles</code> or <code>@Extend</code> decorators to enable chaining when defining component style methods.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-style-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-style-V5</a>  </p>
<p>To avoid redundant style code, the <code>@Styles</code> decorator allows extracting common styles into reusable methods, which can be called directly during component declaration.  </p>
<h4 id="4-Observed-fails-to-monitor-multi-level-data-structures-in-HarmonyOS"><a href="#4-Observed-fails-to-monitor-multi-level-data-structures-in-HarmonyOS" class="headerlink" title="4. @Observed fails to monitor multi-level data structures in HarmonyOS?"></a>4. @Observed fails to monitor multi-level data structures in HarmonyOS?</h4><p><strong>Two-Way Data Synchronization for Nested Structures</strong><br>Use <code>@ObjectLink</code> and <code>@Observed</code> decorators together for bidirectional synchronization in nested objects&#x2F;arrays.<br>Details: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-observed-and-objectlink.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-observed-and-objectlink.md</a>  </p>
<h4 id="5-How-to-implement-screen-orientation-switching-for-pages-in-HarmonyOS"><a href="#5-How-to-implement-screen-orientation-switching-for-pages-in-HarmonyOS" class="headerlink" title="5. How to implement screen orientation switching for pages in HarmonyOS?"></a>5. How to implement screen orientation switching for pages in HarmonyOS?</h4><p><strong>Setting Screen Orientation</strong>  </p>
<pre><code class="language-typescript">setPreferredOrientation(orientation: Orientation, callback: AsyncCallback&lt;void&gt;): void
</code></pre>
<p>Set the display orientation of the main window using an asynchronous callback. This only works on devices supporting sensor rotation and is ineffective in:  </p>
<ul>
<li>2-in-1 devices  </li>
<li>Free multi-window mode  </li>
<li>Child windows</li>
</ul>
<p><strong>Monitoring Window Size Changes</strong><br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/220-Daily-HarmonyOS-Next-Knowledge-Custom-Object-Parameter-Passing-Page-Lifecycle-Custom-Popup-Routing-to-Open-Dialog-Network-Images/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/220-Daily-HarmonyOS-Next-Knowledge-Custom-Object-Parameter-Passing-Page-Lifecycle-Custom-Popup-Routing-to-Open-Dialog-Network-Images/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Custom Object Parameter Passing, Page Lifecycle, Custom Popup, Routing to Open Dialog, Network Images</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 23:56:17 / Modified: 23:57:08" itemprop="dateCreated datePublished" datetime="2025-06-26T23:56:17+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Custom-Object-Parameter-Passing-Page-Lifecycle-Custom-Popup-Routing-to-Open-Dialog-Network-Images"><a href="#Daily-HarmonyOS-Next-Knowledge-Custom-Object-Parameter-Passing-Page-Lifecycle-Custom-Popup-Routing-to-Open-Dialog-Network-Images" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Custom Object Parameter Passing, Page Lifecycle, Custom Popup, Routing to Open Dialog, Network Images"></a>[Daily HarmonyOS Next Knowledge] Custom Object Parameter Passing, Page Lifecycle, Custom Popup, Routing to Open Dialog, Network Images</h3><h4 id="1-How-to-Conveniently-Pass-Custom-Objects-as-Parameters-in-HarmonyOS"><a href="#1-How-to-Conveniently-Pass-Custom-Objects-as-Parameters-in-HarmonyOS" class="headerlink" title="1. How to Conveniently Pass Custom Objects as Parameters in HarmonyOS?"></a>1. How to Conveniently Pass Custom Objects as Parameters in HarmonyOS?</h4><p><strong>Passing Custom Objects as Parameters</strong>  </p>
<p>In ArkTS syntax, dictionaries have constraints. Using <code>Map</code> requires setting values via <code>set</code>. In ArkTS, object property names cannot be numbers or arbitrary strings (exceptions: string literals or enum string values). Use property names to access class attributes and numeric indices for array elements.  </p>
<pre><code class="language-typescript">class X &#123;
  public name: string = &#39;&#39;
&#125;
let x: X = &#123; name: &#39;x&#39; &#125;;
console.log(x.name);

let y = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];
console.log(y[2]);
</code></pre>
<p>For scenarios requiring data access via non-identifier keys (e.g., different key types), use <code>Map&lt;Object, some_type&gt;</code>:  </p>
<pre><code class="language-typescript">let z = new Map&lt;Object, string&gt;();
z.set(&#39;name&#39;, &#39;1&#39;);
z.set(2, &#39;2&#39;);
console.log(z.get(&#39;name&#39;));
console.log(z.get(2));

enum Test &#123;
  A = &#39;aaa&#39;,
  B = &#39;bbb&#39;
&#125;

let obj: Record&lt;string, number&gt; = &#123;
  [Test.A]: 1,   // Enum string values
  [Test.B]: 2,   // Enum string values
  [&#39;value&#39;]: 3   // String literals
&#125;
</code></pre>
<h4 id="2-In-HarmonyOS-besides-routes-can-we-get-page-related-information-Does-the-page-have-a-“title”-concept"><a href="#2-In-HarmonyOS-besides-routes-can-we-get-page-related-information-Does-the-page-have-a-“title”-concept" class="headerlink" title="2. In HarmonyOS, besides routes, can we get page-related information? Does the page have a “title” concept?"></a>2. In HarmonyOS, besides routes, can we get page-related information? Does the page have a “title” concept?</h4><p>A UI page consists of one or more custom components. The <code>@Entry</code>-decorated component is the page’s entry (root node), and each page has exactly one <code>@Entry</code>. Only <code>@Entry</code> components can call page lifecycle methods, so there is no “title” concept.  </p>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5</a>  </p>
<p><strong>Relationship between custom components and pages</strong>:  </p>
<ul>
<li><strong>Custom component</strong>: A UI unit decorated with <code>@Component</code>, reusable by combining system components, with component lifecycle callbacks.  </li>
<li><strong>Page</strong>: A UI page composed of one or more custom components. The <code>@Entry</code>-decorated component is the entry (root node), and only it can call page lifecycle methods.</li>
</ul>
<p><strong>Page lifecycle (for <code>@Entry</code> components)</strong>:  </p>
<ul>
<li><code>onPageShow</code>: Triggered when the page is displayed (e.g., routing, app foreground).  </li>
<li><code>onPageHide</code>: Triggered when the page is hidden (e.g., routing, app background).  </li>
<li><code>onBackPress</code>: Triggered when the user clicks the back button.</li>
</ul>
<p><strong>Component lifecycle (for <code>@Component</code> components)</strong>:  </p>
<ul>
<li><code>aboutToAppear</code>: Called before the component is rendered, after instance creation.  </li>
<li><code>onDidBuild</code>: Called after <code>build()</code> execution, suitable for non-UI operations (e.g., data reporting).  </li>
<li><code>aboutToDisappear</code>: Called before component destruction; avoid modifying state variables.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.02.20.png"></li>
</ul>
<h4 id="3-Can-the-style-of-HarmonyOS-popups-be-customized"><a href="#3-Can-the-style-of-HarmonyOS-popups-be-customized" class="headerlink" title="3. Can the style of HarmonyOS popups be customized?"></a>3. Can the style of HarmonyOS popups be customized?</h4><p>To implement a drop-down popup with full-screen width, set <code>customStyle: true</code> in <code>CustomDialog</code> to maximize the width:  </p>
<pre><code class="language-typescript">// xxx.ets
import &#123; ResizeDirection &#125; from &#39;@kit.TestKit&#39;

@CustomDialog
struct CustomDialogExampleTwo &#123;
  controllerTwo?: CustomDialogController
  build() &#123;
    Column() &#123;
      Text(&#39;我是第二个弹窗&#39;)
        .fontSize(30)
        .height(100)
      Button(&#39;点我关闭第二个弹窗&#39;)
        .onClick(() =&gt; &#123;
          if (this.controllerTwo != undefined) &#123;
            this.controllerTwo.close()
          &#125;
        &#125;)
        .margin(20)
    &#125;
  &#125;
&#125;
@CustomDialog
struct CustomDialogExample &#123;
  @Link textValue: string
  @Link inputValue: string
  dialogControllerTwo: CustomDialogController | null = new CustomDialogController(&#123;
    builder: CustomDialogExampleTwo(),
    alignment: DialogAlignment.Bottom,
    offset: &#123; dx: 0, dy: -25 &#125; &#125;)
  controller?: CustomDialogController
  cancel: () =&gt; void = () =&gt; &#123;
  &#125;
  confirm: () =&gt; void = () =&gt; &#123;
  &#125;

  build() &#123;
    Column() &#123;
      Text(&#39;Change text&#39;).fontSize(20).margin(&#123; top: 10, bottom: 10 &#125;)
      TextInput(&#123; placeholder: &#39;&#39;, text: this.textValue &#125;).height(60).width(&#39;90%&#39;)
        .onChange((value: string) =&gt; &#123;
          this.textValue = value
        &#125;)
      Text(&#39;Whether to change a text?&#39;).fontSize(16).margin(&#123; bottom: 10 &#125;)
      Flex(&#123; justifyContent: FlexAlign.SpaceAround &#125;) &#123;
        Button(&#39;cancel&#39;)
          .onClick(() =&gt; &#123;
            if (this.controller != undefined) &#123;
              this.controller.close()
              this.cancel()
            &#125;
          &#125;).backgroundColor(0xffffff).fontColor(Color.Black)
        Button(&#39;confirm&#39;)
          .onClick(() =&gt; &#123;
            if (this.controller != undefined) &#123;
              this.inputValue = this.textValue
              this.controller.close()
              this.confirm()
            &#125;
          &#125;).backgroundColor(0xffffff).fontColor(Color.Red)
      &#125;.margin(&#123; bottom: 10 &#125;)

      Button(&#39;点我打开第二个弹窗&#39;)
        .onClick(() =&gt; &#123;
          if (this.dialogControllerTwo != null) &#123;
            this.dialogControllerTwo.open()
          &#125;
        &#125;)
        .margin(20)
    &#125;.borderRadius(10).backgroundColor(0x300aff)
  &#125;
&#125;
@Entry
@Component
struct CustomDialogUser &#123;
  @State textValue: string = &#39;&#39;
  @State inputValue: string = &#39;click me&#39;
  dialogController: CustomDialogController | null = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;
      cancel: ()=&gt; &#123; this.onCancel() &#125;,
      confirm: ()=&gt; &#123; this.onAccept() &#125;,
      textValue: $textValue,
      inputValue: $inputValue
    &#125;),
    cancel: this.exitApp,
    autoCancel: true,
    alignment: DialogAlignment.Bottom,
    offset: &#123; dx: 0, dy: -20 &#125;,
    gridCount: 4,
    customStyle: true,
    cornerRadius: 10,
  &#125;)

  aboutToDisappear() &#123;
    this.dialogController = null 
  &#125;

  onCancel() &#123;
    console.info(&#39;Callback when the first button is clicked&#39;)
  &#125;

  onAccept() &#123;
    console.info(&#39;Callback when the second button is clicked&#39;)
  &#125;

  exitApp() &#123;
    console.info(&#39;Click the callback in the blank area&#39;)
  &#125;
  build() &#123;
    Column() &#123;
      Button(this.inputValue)
        .onClick(() =&gt; &#123;
          if (this.dialogController != null) &#123;
            this.dialogController.open()
          &#125;
        &#125;).backgroundColor(0x317aff)
    &#125;.width(&#39;100%&#39;).margin(&#123; top: 5 &#125;)
  &#125;
&#125;
</code></pre>
<h4 id="4-Issues-when-opening-a-page-via-routing-in-a-HarmonyOS-CustomDialog"><a href="#4-Issues-when-opening-a-page-via-routing-in-a-HarmonyOS-CustomDialog" class="headerlink" title="4. Issues when opening a page via routing in a HarmonyOS CustomDialog"></a>4. Issues when opening a page via routing in a HarmonyOS CustomDialog</h4><p>When opening a dialog in Page1 and navigating to Page2 via a button in the dialog, Page2 is inserted between Page1 and the dialog instead of overlaying it.  </p>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5</a>  </p>
<h4 id="5-How-to-access-online-images-in-HarmonyOS"><a href="#5-How-to-access-online-images-in-HarmonyOS" class="headerlink" title="5. How to access online images in HarmonyOS?"></a>5. How to access online images in HarmonyOS?</h4><p>The <code>Image</code> component supports online images. Apply for the <code>ohos.permission.INTERNET</code> permission.  </p>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/image-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/image-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">183</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
