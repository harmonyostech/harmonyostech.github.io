<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/17/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/503%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Grid-Layout-Adaptive-Height-Persistent-Storage-Rounded-Dialogs-Value-Passing-Between-Pages-Emoji-Truncation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/503%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Grid-Layout-Adaptive-Height-Persistent-Storage-Rounded-Dialogs-Value-Passing-Between-Pages-Emoji-Truncation/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Grid Layout Adaptive Height, Persistent Storage, Rounded Dialogs, Value Passing Between Pages, Emoji Truncation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:00:53 / Modified: 08:01:22" itemprop="dateCreated datePublished" datetime="2025-06-25T08:00:53+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Grid-Layout-Adaptive-Height-Persistent-Storage-Rounded-Dialogs-Value-Passing-Between-Pages-Emoji-Truncation"><a href="#Daily-HarmonyOS-Next-Knowledge-Grid-Layout-Adaptive-Height-Persistent-Storage-Rounded-Dialogs-Value-Passing-Between-Pages-Emoji-Truncation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Grid Layout Adaptive Height, Persistent Storage, Rounded Dialogs, Value Passing Between Pages, Emoji Truncation"></a>[Daily HarmonyOS Next Knowledge] Grid Layout Adaptive Height, Persistent Storage, Rounded Dialogs, Value Passing Between Pages, Emoji Truncation</h3><h4 id="1-Can-the-HarmonyOS-grid-layout-adapt-its-height-automatically-based-on-the-number-of-data-items"><a href="#1-Can-the-HarmonyOS-grid-layout-adapt-its-height-automatically-based-on-the-number-of-data-items" class="headerlink" title="1. Can the HarmonyOS grid layout adapt its height automatically based on the number of data items?"></a>1. Can the HarmonyOS grid layout adapt its height automatically based on the number of data items?</h4><p>Can the grid layout adapt its height automatically based on the number of data items?  </p>
<p>Calculate the number of rows (<code>rowCount</code>) to display, then derive <code>GridHeight</code> and <code>GridRowsTemplate</code> from <code>rowCount</code>. Refer to the demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ABPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">simpleList</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">getCategoryRowCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">simpleList</span>.<span class="property">length</span> / <span class="number">3</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">getCategoryRowTmpl</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="variable language_">this</span>.<span class="title function_">getCategoryRowCount</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] = <span class="keyword">new</span> <span class="title class_">Array</span>(count || <span class="number">1</span>).<span class="title function_">fill</span>(<span class="string">&#x27;1fr&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;tmpl &#x27;</span>, arr.<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>));</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">getCategoryViewHeight</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="number">50</span> * <span class="variable language_">this</span>.getCategoryRowCount()&#125;</span>vp`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Grid</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">simpleList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">gridItemBuilder</span>(item);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="title function_">getCategoryViewHeight</span>())</span><br><span class="line">        .<span class="title function_">rowsTemplate</span>(<span class="variable language_">this</span>.<span class="title function_">getCategoryRowTmpl</span>())</span><br><span class="line">        .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr &#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// .height(&quot;15%&quot;)</span></span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ff02194c&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceEvenly</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">List</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">simpleList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">gridItemBuilder</span>(item);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffcff10c&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;94%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ff8f1616&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&#x27;10%&#x27;</span>, <span class="attr">left</span>: <span class="string">&#x27;3%&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;3%&#x27;</span>, <span class="attr">bottom</span>: <span class="string">&#x27;10%&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">gridItemBuilder</span>(<span class="params"><span class="attr">content</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(content)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">15</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffeabe4f&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;25vp&#x27;</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&#x27;5vp&#x27;</span> &#125;)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Handle click event</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. Why is persistent data empty after restarting the app with HarmonyOS PersistentStorage?  </span></span><br><span class="line"><span class="string">PersistentStorage.persistProp fails to save data persistently.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. Execute `</span><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">47</span>)<span class="string">` in a button&#x27;s `</span>onClick<span class="string">` event.  </span></span><br><span class="line"><span class="string">2. After restarting the app, execute `</span><span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;aProp&#x27;</span>)<span class="string">` in another button&#x27;s `</span>onClick<span class="string">` event; returns `</span><span class="literal">undefined</span><span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reason**: PersistentStorage is associated with the UIContext and must be called when the UIContext is明确. Use `</span>runScopedTask<span class="string">` to明确 the context. Failure to do so will result in data not being persisted.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example of calling in `</span>onWindowStageCreate<span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line">windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">    hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> <span class="variable language_">window</span> = windowStage.<span class="title function_">getMainWindow</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">then</span>(<span class="function"><span class="params">win</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> uiContext = win.<span class="title function_">getUIContext</span>();</span><br><span class="line">    uiContext.<span class="title function_">runScopedTask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">47</span>);</span><br><span class="line">      <span class="comment">// AppStorage.setOrCreate(&quot;aProp&quot;, 50)</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span> $&#123;<span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;aProp&#x27;</span>)&#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content. Data: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to set rounded corners for CustomDialog in HarmonyOS?  </span></span><br><span class="line"><span class="string">Why does `</span><span class="title function_">borderRadius</span>(<span class="number">10</span>)<span class="string">` not work when `</span>customStyle=<span class="literal">true</span><span class="string">` in CustomDialog?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Explanation**: `</span>customStyle<span class="string">` determines whether the dialog container&#x27;s style is custom.  </span></span><br><span class="line"><span class="string">- **Default**: `</span><span class="literal">false</span><span class="string">`. The container width adapts to the grid system (not child nodes), height adapts to child nodes (max 90% of window height), and corner radius is 24vp.  </span></span><br><span class="line"><span class="string">- **When `</span><span class="literal">true</span><span class="string">`**: Width adapts to child nodes, corner radius is 0, and background is transparent.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5#customdialogcontrolleroptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. App crashes when passing custom data types between pages in HarmonyOS. How to fix this?  </span></span><br><span class="line"><span class="string">**Possible causes** of crashes when passing custom data types:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. **Unsupported data types**: Objects passed via `</span>router<span class="string">` become proxy objects, losing their original prototype. Methods in classes are not supported.  </span></span><br><span class="line"><span class="string">2. **Parameter passing mechanism**: By default, parameters are passed via URL. If the custom type cannot be serialized into a URL, data loss or crashes may occur.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. **Use JSON**: Convert the custom object to JSON before passing, then parse it in the target page.  </span></span><br><span class="line"><span class="string">2. **Use global variables**: Store the object in a global variable before navigation and retrieve it in the target page.  </span></span><br><span class="line"><span class="string">3. **Use event bus**: For navigation within the same page, pass data via events.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Example of passing data from Page 1**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">RouteParams</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">key1</span>?: <span class="built_in">string</span>, <span class="attr">key2</span>?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key1</span> = key1;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key2</span> = key2;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Parameters to pass</span></span><br><span class="line">  <span class="keyword">public</span> <span class="attr">key1</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">key2</span>?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Copy parameters from another instance</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">copy</span>(<span class="params"><span class="attr">oldParams</span>?: <span class="title class_">RouteParams</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key1</span> = oldParams?.<span class="property">key1</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key2</span> = oldParams?.<span class="property">key2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Test method</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">doTest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;doTest&#x27;</span>, <span class="string">`key1: <span class="subst">$&#123;<span class="variable language_">this</span>.key1&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">  .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">  .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">  .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> routeParams = <span class="keyword">new</span> <span class="title class_">RouteParams</span>(<span class="string">&#x27;value1&#x27;</span>, <span class="string">&#x27;value2&#x27;</span>);</span><br><span class="line">    router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;pages/Page20&quot;</span>,</span><br><span class="line">      <span class="attr">params</span>: routeParams</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Receiving data in Page 2**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// Receive parameters (note: actual object is a proxy, methods are lost)</span></span><br><span class="line">  <span class="keyword">let</span> params = router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">RouteParams</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;aboutToAppear: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(params));</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Create a new object and copy data</span></span><br><span class="line">  <span class="keyword">let</span> newRouteParams = <span class="keyword">new</span> <span class="title class_">RouteParams</span>();</span><br><span class="line">  newRouteParams.<span class="title function_">copy</span>(params);</span><br><span class="line">  newRouteParams.<span class="title function_">doTest</span>(); <span class="comment">// May log undefined if key1 is not set</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Setting maxLength on textInput/textarea in HarmonyOS truncates emojis and clears the input.  </span></span><br><span class="line"><span class="string">**Issue**: Setting `</span>maxLength<span class="string">` on `</span><span class="title class_">TextInput</span><span class="string">` or `</span><span class="title class_">TextArea</span><span class="string">` truncates emojis and clears the input.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Use `</span><span class="keyword">for</span>...<span class="keyword">of</span><span class="string">` to iterate over Unicode characters correctly:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">MyTextInput</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">inputText</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="meta">@Watch</span>(<span class="string">&#x27;onTextUpdated&#x27;</span>) <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">maxLength</span>: <span class="built_in">number</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onTextUpdated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputText</span> = <span class="variable language_">this</span>.<span class="title function_">sliceTools</span>(<span class="variable language_">this</span>.<span class="property">text</span>, <span class="variable language_">this</span>.<span class="property">maxLength</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onTextUpdated</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sliceTools</span>(<span class="params"><span class="attr">str</span>: <span class="built_in">string</span>, <span class="attr">maxLength</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> element <span class="keyword">of</span> str) &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">length</span> + element.<span class="property">length</span> &gt; maxLength) &#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res = res + element;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: $$this.<span class="property">inputText</span> &#125;)</span><br><span class="line">      .<span class="title function_">maxLength</span>(<span class="variable language_">this</span>.<span class="property">maxLength</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/502%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Lazy-Loop-Routing-Overlay-Layout-Dark-Mode-Status-Bar-Album-Video-Thumbnail/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/502%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Lazy-Loop-Routing-Overlay-Layout-Dark-Mode-Status-Bar-Album-Video-Thumbnail/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Lazy Loop, Routing, Overlay Layout, Dark Mode Status Bar, Album Video Thumbnail</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:58:23 / Modified: 07:59:34" itemprop="dateCreated datePublished" datetime="2025-06-25T07:58:23+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Lazy-Loop-Routing-Overlay-Layout-Dark-Mode-Status-Bar-Album-Video-Thumbnail"><a href="#Daily-HarmonyOS-Next-Knowledge-Lazy-Loop-Routing-Overlay-Layout-Dark-Mode-Status-Bar-Album-Video-Thumbnail" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Lazy Loop, Routing, Overlay Layout, Dark Mode Status Bar, Album Video Thumbnail"></a>[Daily HarmonyOS Next Knowledge] Lazy Loop, Routing, Overlay Layout, Dark Mode Status Bar, Album Video Thumbnail</h3><h4 id="1-HarmonyOS-lazyForEach-related-example"><a href="#1-HarmonyOS-lazyForEach-related-example" class="headerlink" title="1. HarmonyOS lazyForEach related example?"></a>1. HarmonyOS lazyForEach related example?</h4><p><strong>lazyForEach principle introduction</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-best-practices-long-list-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-best-practices-long-list-V5</a>  </p>
<p>Lists are one of the most common development scenarios in application development. They can organize messy information into a regular, understandable, and operable form, facilitating users to search for and obtain needed information. Common list scenarios in applications include news lists, shopping cart lists, various leaderboards, etc. With the accumulation of information data, especially in some news apps, shopping apps, and chat apps, list data often reaches tens of thousands of entries. For such long-list applications with large data loading, optimizing the performance of long lists is crucial. A correct and high-performance long-list application can significantly reduce list rendering time, improve page sliding frame rate, reduce application memory usage, and greatly enhance the user experience.  </p>
<p>For the scenario of long-list loading, this article introduces the following 5 optimization methods. Using these optimizations individually or in combination can optimize list rendering time, page sliding frame rate, application memory usage, etc., and improve performance and user experience:  </p>
<ul>
<li><strong>Lazy loading</strong>: Provides the ability to load list data on demand, solving the problems of long loading time and excessive resource occupation caused by一次性 loading of long-list data, which can improve page response speed.  </li>
<li><strong>List item caching</strong>: Provides the ability to custom adjust the length of list items outside the screen visible area. Combined with lazy loading settings, it can cache list item parameters and improve the list sliding experience through preloading data.  </li>
<li><strong>Dynamic preloading</strong>: Dynamically adjusts the number of prefetching data outside the screen visible area based on historical task loading time. Combined with lazy loading settings, it can update list data in real-time outside the screen visible area during continuous list sliding, improving the list sliding experience through prefetching and pre-rendering data.  </li>
<li><strong>Component reuse</strong>: Provides a cache resource pool for reusable component objects. By reusing created and cached component objects, it reduces the overhead of frequent creation and destruction of the same components in a short time, improving component rendering efficiency.  </li>
<li><strong>Layout optimization</strong>: Uses a flat layout scheme to reduce view nesting levels and the number of components, avoid over-drawing, and improve page rendering efficiency.</li>
</ul>
<p>The principle and rendering process of LazyForEach lazy loading are as follows:  </p>
<ol>
<li>LazyForEach loads data on demand according to the number of components that can be accommodated in the screen visible area.  </li>
<li>Creates components based on the loaded data volume, mounts them on the component tree, and constructs a short component tree. That is, it creates and mounts as many ListItem component nodes on the List component root node as the number of list item components that can be displayed on the screen.  </li>
<li>Only part of the components are displayed in the screen visible area. When components outside the visible area need to be displayed on the screen, the process of data loading, component creation, and component tree mounting must be completed from the beginning until they are rendered on the screen.</li>
</ol>
<p>The schematic diagram of its data loading, component tree mounting, and page rendering is as follows:<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.05.02.png"></p>
<p>LazyForEach realizes on-demand loading, which reduces the time consumption of一次性 loading data and the memory peak value for scenarios with large list data and complex list components. However, during the sliding of long lists, because it is necessary to continuously load new content according to the user’s sliding behavior, this requires additional data requests and processing, which will increase the calculation amount during sliding and affect performance to a certain extent. However, reasonably using the on-demand loading capability of LazyForEach and loading only when the sliding stops or reaches a certain threshold can reduce unnecessary calculations and requests, thereby improving performance and bringing a better experience to users. In short, in scenarios where on-demand loading is implemented, it is necessary to comprehensively consider the balance between performance and user experience, and reasonably optimize the loading logic and rendering method to improve the overall performance.  </p>
<p><strong>Demo example</strong>:  </p>
<pre><code class="language-typescript">interface listItem &#123;
  money: string
  text: string
  title: string
  data: string
&#125;

class StringData &#123;
  money: string
  text: string
  title: string
  data: string
  constructor(money: string, text: string, title: string, data: string) &#123;
    this.money = money
    this.text = text
    this.title = title
    this.data = data
  &#125;
&#125;

class BasicDataSource implements IDataSource &#123;
  private listeners: DataChangeListener[] = []
  private originDataArray: StringData[] = []

  public totalCount(): number &#123;
    return 0
  &#125;

  public getData(index: number): StringData &#123;
    return this.originDataArray[index]
  &#125;

  registerDataChangeListener(listener: DataChangeListener): void &#123;
    if (this.listeners.indexOf(listener) &lt; 0) &#123;
      console.info(&#39;add listener&#39;)
      this.listeners.push(listener)
    &#125;
  &#125;

  unregisterDataChangeListener(listener: DataChangeListener): void &#123;
    const pos = this.listeners.indexOf(listener)
    if (pos &gt;= 0) &#123;
      console.info(&#39;remove listener&#39;)
      this.listeners.splice(pos, 1)
    &#125;
  &#125;

  notifyDataReload(): void &#123;
    this.listeners.forEach(listener =&gt; &#123;
      listener.onDataReloaded()
    &#125;)
  &#125;

  notifyDataAdd(index: number): void &#123;
    this.listeners.forEach(listener =&gt; &#123;
      listener.onDataAdd(index)
    &#125;)
  &#125;

  notifyDataChange(index: number): void &#123;
    this.listeners.forEach(listener =&gt; &#123;
      listener.onDataChange(index)
    &#125;)
  &#125;

  notifyDataDelete(index: number): void &#123;
    this.listeners.forEach(listener =&gt; &#123;
      listener.onDataDelete(index)
    &#125;)
  &#125;

  notifyDataMove(from: number, to: number): void &#123;
    this.listeners.forEach(listener =&gt; &#123;
      listener.onDataMove(from, to)
    &#125;)
  &#125;
&#125;

class MyDataSource extends BasicDataSource &#123;
  private dataArray: StringData[] = []

  public totalCount(): number &#123;
    return this.dataArray.length
  &#125;

  public getData(index: number): StringData &#123;
    return this.dataArray[index]
  &#125;

  public addData(index: number, data: StringData): void &#123;
    this.dataArray.splice(index, 0, data)
    this.notifyDataAdd(index)
  &#125;

  public pushData(data: StringData): void &#123;
    this.dataArray.push(data)
    this.notifyDataAdd(this.dataArray.length - 1)
  &#125;

  public reloadData(): void &#123;
    this.notifyDataReload()
  &#125;
&#125;

@Entry
@Component
struct Index &#123;
  private title: string = &#39;我的优惠券&#39;
  private data: MyDataSource = new MyDataSource()
  @State listDate: listItem[] = [
    &#123;
      money: &#39;￥360&#39;,
      text: &#39;满3500元立减&#39;,
      title: &#39;限部分商品使用&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥250&#39;,
      text: &#39;满2500元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥200&#39;,
      text: &#39;满1800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥150&#39;,
      text: &#39;满1300元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥80&#39;,
      text: &#39;满800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥360&#39;,
      text: &#39;满3500元立减&#39;,
      title: &#39;限部分商品使用&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥250&#39;,
      text: &#39;满2500元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥200&#39;,
      text: &#39;满1800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥150&#39;,
      text: &#39;满1300元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥80&#39;,
      text: &#39;满800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥360&#39;,
      text: &#39;满3500元立减&#39;,
      title: &#39;限部分商品使用&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥250&#39;,
      text: &#39;满2500元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥200&#39;,
      text: &#39;满1800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥150&#39;,
      text: &#39;满1300元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥80&#39;,
      text: &#39;满800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥360&#39;,
      text: &#39;满3500元立减&#39;,
      title: &#39;限部分商品使用&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥250&#39;,
      text: &#39;满2500元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥200&#39;,
      text: &#39;满1800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥150&#39;,
      text: &#39;满1300元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥80&#39;,
      text: &#39;满800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥360&#39;,
      text: &#39;满3500元立减&#39;,
      title: &#39;限部分商品使用&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥250&#39;,
      text: &#39;满2500元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥200&#39;,
      text: &#39;满1800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥150&#39;,
      text: &#39;满1300元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥80&#39;,
      text: &#39;满800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥360&#39;,
      text: &#39;满3500元立减&#39;,
      title: &#39;限部分商品使用&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥250&#39;,
      text: &#39;满2500元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥200&#39;,
      text: &#39;满1800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥150&#39;,
      text: &#39;满1300元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;,
    &#123;
      money: &#39;￥80&#39;,
      text: &#39;满800元立减&#39;,
      title: &#39;适用于体验&#39;,
      data: &#39;2024.02.23-2024.03.15&#39;
    &#125;
  ]

  aboutToAppear(): void &#123;
    // Simulate data request
    for (let i = 0; i &lt;= this.listDate.length; i++) &#123;
      this.data.pushData(new StringData(this.listDate[i].money, this.listDate[i].text, this.listDate[i].title, this.listDate[i].data))
    &#125;
    console.log(JSON.stringify(this.data), &#39;[Log]&#39;)
  &#125;

  build() &#123;
    Column() &#123;
      Text(this.title)
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .fontFamily(&#39;Arial&#39;)
      Row() &#123;
        TextInput(&#123; placeholder: &#39;请输入优惠码&#39; &#125;)
          .width(&#39;75%&#39;)
          .fontColor(Color.Blue)
          .fontSize(14)
          .fontStyle(FontStyle.Italic)
          .fontWeight(FontWeight.Bold)
          .fontFamily(&#39;Arial&#39;)
          .placeholderColor(0x999999)
          .placeholderFont(&#123; size: 16, weight: FontWeight.Medium, family: &#39;cursive&#39;, style: FontStyle.Italic &#125;)
        Button(&#39;添加&#39;, &#123; type: ButtonType.Normal, stateEffect: true &#125;)
          .width(&#39;25%&#39;)
          .fontSize(14)
          .fontWeight(FontWeight.Medium)
          .backgroundColor(&#39;#cccccc&#39;)
          .borderRadius(5)
      &#125;
      .padding(&#123; top: 35, bottom: 10 &#125;)

      Row() &#123;
        Text(` 有$&#123;this.data.totalCount()&#125;张优惠券可领用~`)
          .fontSize(12)
          .textAlign(TextAlign.End)
        Text(&#39;&gt;&#39;)
      &#125;
      .margin(&#123; bottom: 10 &#125;)

      List(&#123; space: 10 &#125;) &#123;
        LazyForEach(this.data, (item: listItem) =&gt; &#123;
          ListItem() &#123;
            Row() &#123;
              Column() &#123;
                Text(item.money)
                  .margin(&#123; top: 20, bottom: 20 &#125;)
                  .fontColor(&#39;#f9f4d7&#39;)
                  .borderRadius(5)
                Text(item.text)
                  .textAlign(TextAlign.Center)
                  .fontSize(12)
                  .fontColor(&#39;#f9f4d7&#39;)
                  .borderRadius(5)
              &#125;
              .width(&#39;30%&#39;)
              .height(1
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/501%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-Component-Names-Navigation-Routing-Frame-Animation-Disabling-Clicks-on-Toggle-Controls-Dynamically-Binding-Element-Position-Properties/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/501%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-Component-Names-Navigation-Routing-Frame-Animation-Disabling-Clicks-on-Toggle-Controls-Dynamically-Binding-Element-Position-Properties/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Obtaining Component Names, Navigation Routing, Frame Animation, Disabling Clicks on Toggle Controls, Dynamically Binding Element Position Properties</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:56:44 / Modified: 12:25:12" itemprop="dateCreated datePublished" datetime="2025-06-25T07:56:44+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Obtaining-Component-Names-Navigation-Routing-Frame-Animation-Disabling-Clicks-on-Toggle-Controls-Dynamically-Binding-Element-Position-Properties"><a href="#Daily-HarmonyOS-Next-Knowledge-Obtaining-Component-Names-Navigation-Routing-Frame-Animation-Disabling-Clicks-on-Toggle-Controls-Dynamically-Binding-Element-Position-Properties" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Obtaining Component Names, Navigation Routing, Frame Animation, Disabling Clicks on Toggle Controls, Dynamically Binding Element Position Properties"></a>[Daily HarmonyOS Next Knowledge] Obtaining Component Names, Navigation Routing, Frame Animation, Disabling Clicks on Toggle Controls, Dynamically Binding Element Position Properties</h3><h4 id="1-How-to-obtain-the-component-name-inside-a-struct-component-in-HarmonyOS"><a href="#1-How-to-obtain-the-component-name-inside-a-struct-component-in-HarmonyOS" class="headerlink" title="1. How to obtain the component name inside a struct component in HarmonyOS?"></a>1. How to obtain the component name inside a struct component in HarmonyOS?</h4><p>How to obtain the component name inside a struct component  </p>
<p>Refer to the following code to obtain it:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> page = router.<span class="title function_">getState</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;current index = &#x27;</span> + page.<span class="property">index</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;current name = &#x27;</span> + page.<span class="property">name</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;current path = &#x27;</span> + page.<span class="property">path</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS Navigation, NavRouter, NavDestination?  </span></span><br><span class="line"><span class="string">When the APP opens the home page, a bottom tabbar is displayed, and the tabbar disappears after clicking to navigate. How to implement this using components like Navigation, NavRouter, and NavDestination?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the following demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">NavRouterExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isActiveWLAN</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isActiveBluetooth</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Navigation</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">NavRouter</span>() &#123;</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`WLAN`</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">22</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">          <span class="title class_">NavDestination</span>() &#123;</span><br><span class="line">            <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Row</span> &#125;) &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;未找到可用WLAN&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;.<span class="title function_">title</span>(<span class="string">&quot;WLAN&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(&#123;</span><br><span class="line">          <span class="attr">topLeft</span>: <span class="number">20</span>,</span><br><span class="line">          <span class="attr">bottomLeft</span>: <span class="number">20</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">mode</span>(<span class="title class_">NavRouteMode</span>.<span class="property">PUSH_WITH_RECREATE</span>)</span><br><span class="line">        .<span class="title function_">onStateChange</span>(<span class="function">(<span class="params"><span class="attr">isActivated</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">isActiveWLAN</span> = isActivated;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">NavRouter</span>() &#123;</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`蓝牙`</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">22</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">          <span class="title class_">NavDestination</span>() &#123;</span><br><span class="line">            <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Row</span> &#125;) &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;未找到可用蓝牙&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;.<span class="title function_">title</span>(<span class="string">&quot;蓝牙&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(&#123;</span><br><span class="line">          <span class="attr">topRight</span>: <span class="number">20</span>,</span><br><span class="line">          <span class="attr">bottomRight</span>: <span class="number">20</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">mode</span>(<span class="title class_">NavRouteMode</span>.<span class="property">REPLACE</span>)</span><br><span class="line">        .<span class="title function_">onStateChange</span>(<span class="function">(<span class="params"><span class="attr">isActivated</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">isActiveBluetooth</span> = isActivated;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">right</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">title</span>(<span class="string">&#x27;首页&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#F2F3F5&quot;</span>)</span><br><span class="line">    .<span class="title function_">titleMode</span>(<span class="title class_">NavigationTitleMode</span>.<span class="property">Free</span>)</span><br><span class="line">    .<span class="title function_">mode</span>(<span class="title class_">NavigationMode</span>.<span class="property">Auto</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS frame animation demo?  </span></span><br><span class="line"><span class="string">The image automatically plays a frame animation (multiple photos) at the start, stops at the first photo after playing, and replays the frame animation when clicked.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ImageAnimator provides a frame animation component to achieve the capability of playing images frame by frame, allowing configuration of the image list to play and the duration for each image. For specific details, refer to the document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-imageanimator-V5.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to disable the click toggle event of Toggle in HarmonyOS?  </span></span><br><span class="line"><span class="string">When using the Toggle control, I do not need it to respond to click events, and the on/off state is controlled by another control.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page240522215803016</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isToggleOn</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  <span class="attr">dialogController</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(&#123;</span><br><span class="line">      <span class="attr">confirm</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onAccept</span>();</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onAccept</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isToggleOn</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isToggleOn</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isToggleOn</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">      <span class="title class_">Toggle</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>,</span><br><span class="line">        <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">isToggleOn</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// Modify the HitTestMode property of this component by calling onTouchIntercept</span></span><br><span class="line">        .<span class="title function_">onTouchIntercept</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;OnTouchIntercept + &quot;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(event));</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">open</span>();</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">HitTestMode</span>.<span class="property">None</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">isOn</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;isOn:&quot;</span> + isOn);</span><br><span class="line">          <span class="keyword">if</span> (isOn) &#123;</span><br><span class="line">            <span class="comment">// Operations to be performed</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">CustomDialogExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123; <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(&#123;&#125;), &#125;);</span><br><span class="line">  <span class="attr">confirm</span>?: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;点击确认&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">10</span>, <span class="attr">bottom</span>: <span class="number">10</span> &#125;).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">close</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">confirm</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">confirm</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to dynamically bind the position property of an element in HarmonyOS?  </span></span><br><span class="line"><span class="string">How to dynamically bind the position property of an element  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Define the value of the position property as a variable and change the position by dynamically modifying the variable&#x27;s value.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the sample as follows:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">PositionExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">posix1</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">posiy1</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">posix2</span>: <span class="built_in">string</span> = <span class="string">&#x27;0%&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">posiy2</span>: <span class="built_in">string</span> = <span class="string">&#x27;0%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;position&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>).<span class="title function_">fontColor</span>(<span class="number">0xCCCCCC</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>);</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;30%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xdeb887</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>);</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;2 position(数字)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;60%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;30&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xbbb2cb</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">posix1</span>, <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">posiy1</span> &#125;);</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;3 position(百分比)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;50%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xbbb2cb</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">posix2</span>, <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">posiy2</span> &#125;);</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dashed</span> &#125;);</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;改变posion的值&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">posix1</span> = <span class="number">30</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">posiy1</span> = <span class="number">50</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">posix2</span> = <span class="string">&#x27;50%&#x27;</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">posiy2</span> = <span class="string">&#x27;50%&#x27;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">25</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/430%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Click-Effects-Tab-Components-Failed-Popups-in-Menus-Foreground-Background-Monitoring-UI-Layout-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/430%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Click-Effects-Tab-Components-Failed-Popups-in-Menus-Foreground-Background-Monitoring-UI-Layout-Issues/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Click Effects, Tab Components, Failed Popups in Menus, Foreground/Background Monitoring, UI Layout Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:51:54 / Modified: 12:25:08" itemprop="dateCreated datePublished" datetime="2025-06-25T07:51:54+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Click-Effects-Tab-Components-Failed-Popups-in-Menus-Foreground-Background-Monitoring-UI-Layout-Issues"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Click-Effects-Tab-Components-Failed-Popups-in-Menus-Foreground-Background-Monitoring-UI-Layout-Issues" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Click Effects, Tab Components, Failed Popups in Menus, Foreground&#x2F;Background Monitoring, UI Layout Issues"></a>【Daily HarmonyOS Next Knowledge】 Click Effects, Tab Components, Failed Popups in Menus, Foreground&#x2F;Background Monitoring, UI Layout Issues</h3><h4 id="1-In-HarmonyOS-when-setting-an-onClick-event-for-a-component-how-can-I-achieve-the-effect-of-changing-the-component’s-background-during-the-click"><a href="#1-In-HarmonyOS-when-setting-an-onClick-event-for-a-component-how-can-I-achieve-the-effect-of-changing-the-component’s-background-during-the-click" class="headerlink" title="1. In HarmonyOS, when setting an onClick event for a component, how can I achieve the effect of changing the component’s background during the click?"></a>1. In HarmonyOS, when setting an onClick event for a component, how can I achieve the effect of changing the component’s background during the click?</h4><p>When setting an onClick event for a component, how can I achieve the effect of changing the component’s background during the click?  </p>
<p>Change the component’s background by setting its StateStyle. Refer to the following code:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State isEnable: boolean = true;
  
  @Styles pressedStyles() &#123;
    .backgroundColor(Color.Red)
    .borderRadius(10)
    .borderStyle(BorderStyle.Dashed)
    .borderWidth(2)
    .borderColor(&quot;#33000000&quot;)
    .width(120)
    .height(30)
    .opacity(1);
  &#125;

  build() &#123;
    Flex(&#123; direction: FlexDirection.Column, alignItems: ItemAlign.Center &#125;) &#123;
      Text(&quot;pressed&quot;)
        .backgroundColor(&quot;#0A59F7&quot;)
        .borderRadius(20)
        .borderStyle(BorderStyle.Dotted)
        .borderWidth(2)
        .borderColor(Color.Red)
        .width(100)
        .height(25)
        .opacity(1)
        .fontSize(14)
        .fontColor(Color.White)
        .stateStyles(&#123;
          pressed: this.pressedStyles,
        &#125;)
        .margin(&#123; bottom: 20 &#125;)
        .textAlign(TextAlign.Center);
    &#125;
    .width(350).height(300).margin(10);
  &#125;
&#125;
</code></pre>
<h4 id="2-How-can-I-implement-tabs-for-the-HarmonyOS-Tab-component"><a href="#2-How-can-I-implement-tabs-for-the-HarmonyOS-Tab-component" class="headerlink" title="2. How can I implement tabs for the HarmonyOS Tab component?"></a>2. How can I implement tabs for the HarmonyOS Tab component?</h4><p>Refer to the following example. When clicking a tab, it moves to the far left:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State tabArray: Array&lt;number&gt; = [0, 1, 2, 3, 4, 5, 6];
  @State focusIndex: number = 0;
  private controller: TabsController = new TabsController();
  scrollerForList: Scroller = new Scroller();

  // Individual tab
  @Builder
  Tab(tabName: string, tabItem: number, tabIndex: number) &#123;
    Column(&#123; space: 20 &#125;) &#123;
      Text(tabName).fontSize(18);
    &#125;
    .width(100)
    .height(30)
    .borderRadius(&#123; topLeft: 10, topRight: 10 &#125;)
    .onClick(() =&gt; &#123;
      this.controller.changeIndex(tabIndex);
      this.focusIndex = tabIndex;
    &#125;)
    .backgroundColor(tabIndex === this.focusIndex ? &quot;#ffffffff&quot; : &quot;#ffb7b7b7&quot;);
  &#125;

  build() &#123;
    Column() &#123;
      // Tabs
      Row() &#123;
        List(&#123; scroller: this.scrollerForList &#125;) &#123;
          ForEach(this.tabArray, (item: number, index: number) =&gt; &#123;
            ListItem() &#123;
              this.Tab(&quot;Page &quot; + item, item, index);
            &#125;
          &#125;);
        &#125;
        .listDirection(Axis.Horizontal)
        .scrollBar(BarState.Off);
      &#125;
      .height(30)
      .justifyContent(FlexAlign.Start)
      .width(&#39;100%&#39;)
      .backgroundColor(&quot;#ffb7b7b7&quot;);

      // Tabs content
      Tabs(&#123; barPosition: BarPosition.Start, controller: this.controller &#125;) &#123;
        ForEach(this.tabArray, (item: number, index: number) =&gt; &#123;
          TabContent() &#123;
            Text(&#39;Content of page &#39; + item)
              .height(300)
              .width(&#39;100%&#39;)
              .fontSize(30);
          &#125;
          .backgroundColor(Color.Blue);
        &#125;);
      &#125;
      .barMode(BarMode.Scrollable)
      .barHeight(0)
      .animationDuration(100)
      .onChange((index: number) =&gt; &#123;
        this.focusIndex = index;
        // Use scroller to achieve vertical and horizontal联动. Design scrolling effects according to business needs. The following is a scrolling example:
        this.scrollerForList.scrollToIndex(index, true);
      &#125;);
    &#125;
    .alignItems(HorizontalAlign.Start)
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
<h4 id="3-In-HarmonyOS-when-using-bindContextMenu-executing-promptAction-showDialog-or-promptAction-showToast-in-menu-items-does-not-show-any-prompts"><a href="#3-In-HarmonyOS-when-using-bindContextMenu-executing-promptAction-showDialog-or-promptAction-showToast-in-menu-items-does-not-show-any-prompts" class="headerlink" title="3. In HarmonyOS, when using bindContextMenu(), executing promptAction.showDialog or promptAction.showToast in menu items does not show any prompts?"></a>3. In HarmonyOS, when using bindContextMenu(), executing promptAction.showDialog or promptAction.showToast in menu items does not show any prompts?</h4><p>When using bindContextMenu(), executing promptAction.showDialog or promptAction.showToast in menu items does not show any prompts.  </p>
<p>The promptAction module depends on the UI execution context and cannot be used where the UI context is unclear. See the UIContext documentation. Obtain the PromptAction object associated with the current UI context using the getPromptAction method in UIContext. Get the context via getUIContext and pass it to the custom builder in bindContextMenu, then call uiContext.getPromptAction().<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-api-V5#ZH-CN_TOPIC_0000001884917850__getuicontext">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-api-V5#ZH-CN_TOPIC_0000001884917850__getuicontext</a>  </p>
<p>The built-in methods of custom components are APIs provided by the ArkUI development framework to application developers and are defined in the base class of custom components. Application developers can call the corresponding APIs on instances of custom components to obtain information related to the current custom component instance. For example, query the UIContext information of the current custom component context.  </p>
<ul>
<li>getUIContext(): UIContext: Get the UIContext object.  </li>
<li>getUniqueId(): number: Get the UniqueId of the current Component. The UniqueId is an ID assigned by the system to each component, ensuring uniqueness within the current application. Returns an invalid UniqueId (-1) if obtained when the component’s corresponding node is not created or has been destroyed.  </li>
<li>queryNavDestinationInfo(): NavDestinationInfo | undefined: Query the NavDestination information to which the custom component belongs.  </li>
<li>queryNavigationInfo(): NavigationInfo | undefined: Query the Navigation information to which the custom component belongs.  </li>
<li>queryRouterPageInfo(): RouterPageInfo | undefined: Get the RouterPageInfo instance object.</li>
</ul>
<h4 id="4-How-can-I-monitor-the-foreground-background-switching-of-a-HarmonyOS-application"><a href="#4-How-can-I-monitor-the-foreground-background-switching-of-a-HarmonyOS-application" class="headerlink" title="4. How can I monitor the foreground&#x2F;background switching of a HarmonyOS application?"></a>4. How can I monitor the foreground&#x2F;background switching of a HarmonyOS application?</h4><p>To monitor changes in whether your own application is in the foreground or background, refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-applicationcontext-V5#applicationcontextontype-applicationstatechange-callback-applicationstatechangecallback10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-applicationcontext-V5#applicationcontextontype-applicationstatechange-callback-applicationstatechangecallback10</a>  </p>
<p>on(type: ‘abilityLifecycle’, callback: AbilityLifecycleCallback): number<br>Register to monitor the in-application lifecycle. Use the callback for asynchronous notifications. Only supported on the main thread.  </p>
<pre><code class="language-typescript">import &#123; UIAbility, AbilityLifecycleCallback &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

let lifecycleId: number;

export default class EntryAbility extends UIAbility &#123;
  onCreate() &#123;
    console.log(&#39;MyAbility onCreate&#39;);
    let AbilityLifecycleCallback: AbilityLifecycleCallback = &#123;
      onAbilityCreate(ability) &#123;
        console.log(`AbilityLifecycleCallback onAbilityCreate ability: $&#123;ability&#125;`);
      &#125;,
      onWindowStageCreate(ability, windowStage) &#123;
        console.log(`AbilityLifecycleCallback onWindowStageCreate ability: $&#123;ability&#125;`);
        console.log(`AbilityLifecycleCallback onWindowStageCreate windowStage: $&#123;windowStage&#125;`);
      &#125;,
      onWindowStageActive(ability, windowStage) &#123;
        console.log(`AbilityLifecycleCallback onWindowStageActive ability: $&#123;ability&#125;`);
        console.log(`AbilityLifecycleCallback onWindowStageActive windowStage: $&#123;windowStage&#125;`);
      &#125;,
      onWindowStageInactive(ability, windowStage) &#123;
        console.log(`AbilityLifecycleCallback onWindowStageInactive ability: $&#123;ability&#125;`);
        console.log(`AbilityLifecycleCallback onWindowStageInactive windowStage: $&#123;windowStage&#125;`);
      &#125;,
      onWindowStageDestroy(ability, windowStage) &#123;
        console.log(`AbilityLifecycleCallback onWindowStageDestroy ability: $&#123;ability&#125;`);
        console.log(`AbilityLifecycleCallback onWindowStageDestroy windowStage: $&#123;windowStage&#125;`);
      &#125;,
      onAbilityDestroy(ability) &#123;
        console.log(`AbilityLifecycleCallback onAbilityDestroy ability: $&#123;ability&#125;`);
      &#125;,
      onAbilityForeground(ability) &#123;
        console.log(`AbilityLifecycleCallback onAbilityForeground ability: $&#123;ability&#125;`);
      &#125;,
      onAbilityBackground(ability) &#123;
        console.log(`AbilityLifecycleCallback onAbilityBackground ability: $&#123;ability&#125;`);
      &#125;,
      onAbilityContinue(ability) &#123;
        console.log(`AbilityLifecycleCallback onAbilityContinue ability: $&#123;ability&#125;`);
      &#125;
    &#125;;
    
    // 1. Get the applicationContext via the context property
    let applicationContext = this.context.getApplicationContext();
    try &#123;
      // 2. Register to monitor the in-application lifecycle via applicationContext
      lifecycleId = applicationContext.on(&#39;abilityLifecycle&#39;, AbilityLifecycleCallback);
    &#125; catch (paramError) &#123;
      console.error(`error: $&#123;(paramError as BusinessError).code&#125;, $&#123;(paramError as BusinessError).message&#125;`);
    &#125;
    console.log(`registerAbilityLifecycleCallback lifecycleId: $&#123;lifecycleId&#125;`);
  &#125;
&#125;
</code></pre>
<p>The onAbilityForeground and onAbilityBackground events are callbacks for foreground&#x2F;background switching.  </p>
<h4 id="5-HarmonyOS-UI-layout-issue"><a href="#5-HarmonyOS-UI-layout-issue" class="headerlink" title="5. HarmonyOS UI layout issue?"></a>5. HarmonyOS UI layout issue?</h4><p>In instant messaging, long-pressing button A triggers a full-screen mask. The encapsulation is deeply nested. The parent of button A has a fixed width and height. How can I pop up a full-screen mask layer within the encapsulation of button A, similar to the fixed positioning in CSS?  </p>
<p>Refer to the following API for dialog control:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/429%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Web-Display-Issues-Tab-Bottom-Obstruction-Navigation-Bar-Theme-Color-Adaptation-Manual-App-Background-Transition-Popup-Animation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/429%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Web-Display-Issues-Tab-Bottom-Obstruction-Navigation-Bar-Theme-Color-Adaptation-Manual-App-Background-Transition-Popup-Animation/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Web Display Issues, Tab Bottom Obstruction, Navigation Bar Theme Color Adaptation, Manual App Background Transition, Popup Animation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:49:12 / Modified: 12:25:09" itemprop="dateCreated datePublished" datetime="2025-06-25T07:49:12+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Web-Display-Issues-Tab-Bottom-Obstruction-Navigation-Bar-Theme-Color-Adaptation-Manual-App-Background-Transition-Popup-Animation"><a href="#【Daily-HarmonyOS-Next-Knowledge】Web-Display-Issues-Tab-Bottom-Obstruction-Navigation-Bar-Theme-Color-Adaptation-Manual-App-Background-Transition-Popup-Animation" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Web Display Issues, Tab Bottom Obstruction, Navigation Bar Theme Color Adaptation, Manual App Background Transition, Popup Animation"></a>【Daily HarmonyOS Next Knowledge】Web Display Issues, Tab Bottom Obstruction, Navigation Bar Theme Color Adaptation, Manual App Background Transition, Popup Animation</h3><h4 id="1-In-HarmonyOS-projects-do-all-web-pages-display-from-the-top-of-the-web-container-expanding-from-small-to-large"><a href="#1-In-HarmonyOS-projects-do-all-web-pages-display-from-the-top-of-the-web-container-expanding-from-small-to-large" class="headerlink" title="1. In HarmonyOS projects, do all web pages display from the top of the web container, expanding from small to large?"></a>1. In HarmonyOS projects, do all web pages display from the top of the web container, expanding from small to large?</h4><p>In the project, all web pages display from the top of the web container, expanding from small to large.  </p>
<p>Use a custom UA to avoid this. The demo is as follows:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page2</span> &#123;</span><br><span class="line">  <span class="attr">webController</span>: webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> webview.<span class="title class_">WebviewController</span>();</span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    webview.<span class="property">WebviewController</span>.<span class="title function_">setWebDebuggingAccess</span>(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: <span class="string">&quot;www.huawei.com&quot;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">webController</span> &#125;)</span><br><span class="line">          .<span class="title function_">domStorageAccess</span>(<span class="literal">true</span>)</span><br><span class="line">          .<span class="title function_">onControllerAttached</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> newAgent = <span class="string">&quot;Mozilla/5.0 (Phone; xxxx; OpenHarmony 4.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 ArkWeb/4.1.6.1 Mobile&quot;</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">webController</span>.<span class="title function_">setCustomUserAgent</span>(newAgent);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. The bottom of tabContent in HarmonyOS is obstructed?  </span></span><br><span class="line"><span class="string">The tabContent contains a scroll layout, and the last row cannot be fully displayed.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reason**: The List&#x27;s default height is 100%. If there is content above the List, it will squeeze the List&#x27;s display area, making it impossible to scroll up. This can be solved by setting a fixed height for the List or using the `</span><span class="title class_">LayoutWeight</span>(<span class="number">1</span>)<span class="string">` attribute for adaptive height.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to configure the navigation bar theme color in HarmonyOS?  </span></span><br><span class="line"><span class="string">Based on the light/dark mode interfaces provided by ArkTS UI: https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-dark-mode-adaptation#section128661451172714  </span></span><br><span class="line"><span class="string">**Method 1: Use system resources (recommended first)**: System-supported resources automatically adapt to dark mode. Developers can view system resources to obtain supported options.  </span></span><br><span class="line"><span class="string">**Method 2: Use custom themes**: If developers need to customize color performance for light/dark modes, follow these steps:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs/faqs-arkui-359  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. Define the status bar background color for light mode in `</span>base/element/color.<span class="property">json</span><span class="string">`.  </span></span><br><span class="line"><span class="string">2. Define the status bar background color for dark mode in `</span>dark/element/color.<span class="property">json</span><span class="string">`.  </span></span><br><span class="line"><span class="string">3. Listen for light/dark mode changes.  </span></span><br><span class="line"><span class="string">4. After detecting a mode switch, use `</span>setWindowSystemBarProperties<span class="string">` to manually set the status bar font color.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference code**:  </span></span><br><span class="line"><span class="string">1. Define color resources for light and dark modes  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json5</span><br><span class="line"><span class="comment">// resources/dark/element/color.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;color&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;status_bar&quot;</span>,</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="string">&quot;#000000&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json5</span><br><span class="line"><span class="comment">// resources/base/element/color.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;color&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;status_bar&quot;</span>,</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Cache the window object and current color mode for subsequent use of the `</span>setWindowSystemBarProperties<span class="string">` interface to set status bar properties.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// EntryAbility.ets</span></span><br><span class="line"><span class="title function_">onCreate</span>(<span class="attr">want</span>: <span class="title class_">Want</span>, <span class="attr">launchParam</span>: <span class="title class_">AbilityConstant</span>.<span class="property">LaunchParam</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onCreate&#x27;</span>);</span><br><span class="line">  <span class="comment">// Cache the current device color mode</span></span><br><span class="line">  <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;currentColorMode&#x27;</span>, <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">config</span>.<span class="property">colorMode</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// Main window is created, set main page for this ability</span></span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">      hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content.&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> = windowStage.<span class="title function_">getMainWindowSync</span>(); <span class="comment">// Get the main application window</span></span><br><span class="line">    <span class="comment">// 1. Set the window to full screen</span></span><br><span class="line">    <span class="keyword">let</span> isLayoutFullScreen = <span class="literal">true</span>;</span><br><span class="line">    windowClass.<span class="title function_">setWindowLayoutFullScreen</span>(isLayoutFullScreen);</span><br><span class="line">    <span class="comment">// 2. Cache the window object</span></span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;windowClass&#x27;</span>, windowClass);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. When the color mode changes, update the cached color mode.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// EntryAbility.ets</span></span><br><span class="line"><span class="comment">// Listen for system configuration changes</span></span><br><span class="line"><span class="title function_">onConfigurationUpdate</span>(<span class="attr">newConfig</span>: <span class="title class_">Configuration</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> newColorMode = newConfig.<span class="property">colorMode</span>;</span><br><span class="line">  <span class="keyword">let</span> currentColorMode = <span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>&gt;(<span class="string">&#x27;currentColorMode&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (newColorMode === currentColorMode) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Update the cached color mode</span></span><br><span class="line">  <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;currentColorMode&#x27;</span>, newConfig.<span class="property">colorMode</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. The page listens for color mode changes and updates the status bar font color when the mode changes.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigurationConstant</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SysDarkMode</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;页面布局&#x27;</span>;</span><br><span class="line">  <span class="meta">@StorageProp</span>(<span class="string">&#x27;currentColorMode&#x27;</span>) <span class="meta">@Watch</span>(<span class="string">&#x27;onColorModeChange&#x27;</span>) <span class="attr">currentColorMode</span>: <span class="built_in">number</span> =</span><br><span class="line">    <span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_LIGHT</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onColorModeChange</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onColorModeChange</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// Get the current application window</span></span><br><span class="line">    <span class="keyword">let</span> windowClass = <span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="variable language_">window</span>.<span class="property">Window</span>&gt;(<span class="string">&#x27;windowClass&#x27;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">Window</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentColorMode</span> === <span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_LIGHT</span>) &#123;</span><br><span class="line">      <span class="comment">// Current mode is light</span></span><br><span class="line">      <span class="comment">// Set font to black</span></span><br><span class="line">      windowClass.<span class="title function_">setWindowSystemBarProperties</span>(&#123;</span><br><span class="line">        <span class="comment">// Status bar text color</span></span><br><span class="line">        <span class="attr">statusBarContentColor</span>: <span class="string">&#x27;#000000&#x27;</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentColorMode</span> === <span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_DARK</span>) &#123;</span><br><span class="line">      <span class="comment">// Current mode is dark</span></span><br><span class="line">      <span class="comment">// Set font to white</span></span><br><span class="line">      windowClass.<span class="title function_">setWindowSystemBarProperties</span>(&#123;</span><br><span class="line">        <span class="comment">// Status bar text color</span></span><br><span class="line">        <span class="attr">statusBarContentColor</span>: <span class="string">&#x27;#FFFFFF&#x27;</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>()</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>($r(<span class="string">&#x27;app.color.status_bar&#x27;</span>));</span><br><span class="line">      <span class="comment">// Page layout</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: &#123;</span><br><span class="line">            <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">middle</span>: &#123;</span><br><span class="line">            <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Center</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">layoutWeight</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to manually send a HarmonyOS app to the background?  </span></span><br><span class="line"><span class="string">The window has a `</span>minimize<span class="string">` method, which notifies AMS to send the window to the background, achieving the effect of sending the app to the background.  </span></span><br><span class="line"><span class="string">Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Currently, `</span>windowStage<span class="string">` only exists in `</span>onWindowStageCreate<span class="string">` and needs to be obtained using `</span><span class="title class_">AppStorage</span><span class="string">`.  </span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// Main window is created, set main page for this ability</span></span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, ‘testTag’, ‘%&#123;<span class="keyword">public</span>&#125;s’, ‘<span class="title class_">Ability</span> onWindowStageCreate’);</span><br><span class="line"></span><br><span class="line">  windowStage.<span class="title function_">loadContent</span>(‘pages/<span class="title class_">Page6</span>’, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">      hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, ‘testTag’, ‘<span class="title class_">Failed</span> to load the content. <span class="title class_">Cause</span>: %&#123;<span class="keyword">public</span>&#125;s’, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? ‘’);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(“windowStage”, windowStage);</span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, ‘testTag’, ‘<span class="title class_">Succeeded</span> <span class="keyword">in</span> loading the content. <span class="title class_">Data</span>: %&#123;<span class="keyword">public</span>&#125;s’, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data) ?? ‘’);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to implement animations in a custom popup using promptAction.openCustomDialog in HarmonyOS?  </span></span><br><span class="line"><span class="string">How to implement animations in a custom popup via `</span>promptAction.<span class="property">openCustomDialog</span><span class="string">`?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Property animations apply when properties change. Transition animations can be used: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-transition-animation-component-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Image</span>(<span class="title class_">HWUIToast</span>.<span class="property">icon</span>)</span><br><span class="line">  .<span class="title function_">width</span>(<span class="number">32</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="number">32</span>)</span><br><span class="line">  .<span class="title function_">margin</span>(&#123;</span><br><span class="line">    <span class="attr">top</span>: <span class="number">20</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">transition</span>(<span class="title class_">TransitionEffect</span>.<span class="title function_">rotate</span>(&#123; <span class="attr">z</span>: <span class="number">1</span>, <span class="attr">angle</span>: <span class="number">180</span> &#125;).<span class="title function_">animation</span>(&#123;</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">1000</span>, <span class="attr">iterations</span>: -<span class="number">1</span></span><br><span class="line">  &#125;))</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/428%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Screenshot-Prevention-Flutter-Popups-Clipboard-Functions-Cross-File-Style-Reuse-Reading-Page-Turning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/428%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Screenshot-Prevention-Flutter-Popups-Clipboard-Functions-Cross-File-Style-Reuse-Reading-Page-Turning/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Screenshot Prevention, Flutter Popups, Clipboard Functions, Cross-File Style Reuse, Reading Page Turning</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:40:51 / Modified: 07:42:58" itemprop="dateCreated datePublished" datetime="2025-06-25T07:40:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Flutter-Popups-Clipboard-Functions-Cross-File-Style-Reuse-Reading-Page-Turning"><a href="#Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Flutter-Popups-Clipboard-Functions-Cross-File-Style-Reuse-Reading-Page-Turning" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Flutter Popups, Clipboard Functions, Cross-File Style Reuse, Reading Page Turning"></a>[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Flutter Popups, Clipboard Functions, Cross-File Style Reuse, Reading Page Turning</h3><h4 id="1-How-to-prevent-screenshot-screen-recording-for-all-pages-in-a-HarmonyOS-app"><a href="#1-How-to-prevent-screenshot-screen-recording-for-all-pages-in-a-HarmonyOS-app" class="headerlink" title="1. How to prevent screenshot&#x2F;screen recording for all pages in a HarmonyOS app?"></a>1. How to prevent screenshot&#x2F;screen recording for all pages in a HarmonyOS app?</h4><p>Some pages require screenshot prevention. First, apply for the privacy window permission in module.json5. Then, obtain the current window object and set privacy mode in onPageShow(). Cancel the privacy mode in the onPageHide() lifecycle when exiting the page.<br>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a><br>The window module provides basic capabilities for managing windows, including creation, destruction, attribute settings, and scheduling between windows.  </p>
<p>Key functions related to windows:  </p>
<ul>
<li>Window: The current window instance, the basic unit managed by the window manager.  </li>
<li>WindowStage: The window manager, responsible for managing each basic window unit.</li>
</ul>
<p><strong>Reference code</strong>:  </p>
<pre><code class="language-json5">// In module.json5
&#123;
  &quot;name&quot;: &quot;ohos.permission.PRIVACY_WINDOW&quot;
&#125;
</code></pre>
<pre><code class="language-typescript">// In EAbility file
onWindowStageCreate(windowStage: window.WindowStage): void &#123;
  let windowClass: window.Window = windowStage.getMainWindowSync();
  // Get the main application window
  AppStorage.setOrCreate(&quot;windowClass&quot;, windowClass);
&#125;
</code></pre>
<pre><code class="language-typescript">// In Index file
import &#123; window &#125; from &#39;@kit.ArkUI&#39;;
import &#123; BusinessError &#125; from &#39;@ohos.base&#39;;

@Entry
@Component
struct Index43 &#123;
  private windowStage = AppStorage.get(&quot;windowStage&quot;) as window.WindowStage;
  private windowClass = AppStorage.get(&quot;windowClass&quot;) as window.Window;
  @State message: string = &#39;Hello World&#39;;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(&#39;禁止截屏&#39;)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .onClick(() =&gt; &#123;
            let isPrivacyMode: boolean = true;
            try &#123;
              this.windowClass.setWindowPrivacyMode(isPrivacyMode, (err: BusinessError) =&gt; &#123;
                const errCode: number = err.code;
                if (errCode) &#123;
                  console.error(&#39;Failed to set the window to privacy mode. Cause:&#39; + JSON.stringify(err));
                  return;
                &#125;
                console.info(&#39;Succeeded in setting the window to privacy mode.&#39;);
              &#125;);
            &#125; catch (exception) &#123;
              console.error(&#39;Failed to set the window to privacy mode. Cause:&#39; + JSON.stringify(exception));
            &#125;
          &#125;);
        Text(&#39;允许截屏&#39;)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .onClick(() =&gt; &#123;
            let isPrivacyMode: boolean = false;
            try &#123;
              this.windowClass.setWindowPrivacyMode(isPrivacyMode, (err: BusinessError) =&gt; &#123;
                const errCode: number = err.code;
                if (errCode) &#123;
                  console.error(&#39;Failed to set the window to privacy mode. Cause:&#39; + JSON.stringify(err));
                  return;
                &#125;
                console.info(&#39;Succeeded in setting the window to privacy mode.&#39;);
              &#125;);
            &#125; catch (exception) &#123;
              console.error(&#39;Failed to set the window to privacy mode. Cause:&#39; + JSON.stringify(exception));
            &#125;
          &#125;);
      &#125;
      .width(&#39;100%&#39;);
    &#125;
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
<h4 id="2-When-returning-to-a-Flutter-transparent-popup-dialog-from-a-full-screen-page-in-HarmonyOS-the-popup’s-entry-animation-repeats"><a href="#2-When-returning-to-a-Flutter-transparent-popup-dialog-from-a-full-screen-page-in-HarmonyOS-the-popup’s-entry-animation-repeats" class="headerlink" title="2. When returning to a Flutter transparent popup (dialog) from a full-screen page in HarmonyOS, the popup’s entry animation repeats."></a>2. When returning to a Flutter transparent popup (dialog) from a full-screen page in HarmonyOS, the popup’s entry animation repeats.</h4><p>When a Flutter transparent popup opens a full-screen page (native or Flutter), the popup executes an exit animation. When returning to the popup, it executes an entry animation again.  </p>
<p>Try removing the animation effect after the animation ends in the Dialog page:  </p>
<pre><code class="language-typescript">@State isInit: boolean = false;
.onHidden(() =&gt; &#123;
  this.isInit = true
&#125;)
.transition(this.isInit ? null : this.effect)
</code></pre>
<h4 id="3-How-to-use-the-clipboard-function-in-HarmonyOS"><a href="#3-How-to-use-the-clipboard-function-in-HarmonyOS" class="headerlink" title="3. How to use the clipboard function in HarmonyOS?"></a>3. How to use the clipboard function in HarmonyOS?</h4><p>Requirement: Long-press a string of text to directly add its content to the clipboard without popping up a text selection dialog, ensuring successful copying.  </p>
<p><strong>Clipboard usage demo</strong>:  </p>
<pre><code class="language-typescript">import pasteboard from &#39;@ohos.pasteboard&#39;;
import promptAction from &#39;@ohos.promptAction&#39;;

@Entry
@Component
export struct CopyText &#123;
  private textContent: string = &quot;复制我&quot;;

  build() &#123;
    Column() &#123;
      Text(this.textContent)
        .fontSize($r(&quot;sys.float.ohos_id_text_size_body3&quot;))
        .borderRadius(9)
        .borderWidth(1)
        .padding(&#123; left: 8, right: 8 &#125;)
        .fontColor($r(&#39;sys.color.ohos_id_color_text_primary&#39;))
        .fontWeight(FontWeight.Medium)
        .opacity($r(&quot;sys.float.ohos_id_alpha_content_secondary&quot;))
        .onClick(() =&gt; copyText(this.textContent));
    &#125;
  &#125;
&#125;

function copyText(text: string) &#123;
  const pasteboardData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, text);
  const systemPasteboard = pasteboard.getSystemPasteboard();
  systemPasteboard.setData(pasteboardData); // Put data into the clipboard
  systemPasteboard.getData().then((data) =&gt; &#123;
    if (data) &#123;
      promptAction.showToast(&#123; message: &quot;复制成功&quot; &#125;);
    &#125; else &#123;
      promptAction.showToast(&#123; message: &quot;复制失败&quot; &#125;);
    &#125;
  &#125;);
&#125;
</code></pre>
<h4 id="4-How-to-reuse-styles-across-files-in-HarmonyOS"><a href="#4-How-to-reuse-styles-across-files-in-HarmonyOS" class="headerlink" title="4. How to reuse styles across files in HarmonyOS?"></a>4. How to reuse styles across files in HarmonyOS?</h4><ol>
<li>@Styles or @Extend do not currently support export, and these decorators will not evolve further.  </li>
<li>It is recommended to use the new style reuse method: dynamically set components through the attributeModifier attribute. Inherit the Modifier of the base component via a custom class and set reusable attributes in the class, which has no export restrictions.</li>
</ol>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5</a>  </p>
<h4 id="5-Does-HarmonyOS-have-official-demos-for-implementing-reading-page-turning-functionality"><a href="#5-Does-HarmonyOS-have-official-demos-for-implementing-reading-page-turning-functionality" class="headerlink" title="5. Does HarmonyOS have official demos for implementing reading page-turning functionality?"></a>5. Does HarmonyOS have official demos for implementing reading page-turning functionality?</h4><ul>
<li>Implement using the List component: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/samples/">https://developer.huawei.com/consumer/cn/samples/</a>. Example: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos_samples/readerkit_samplecode_arkts">https://gitee.com/harmonyos_samples/readerkit_samplecode_arkts</a>. Based on the capabilities provided by Reader Kit (Reading Service), this demo implements e-book reading functions, showcasing parsing, typesetting, reading interactions for multiple e-book formats, and how to quickly build reading capabilities using Reader Kit’s components.  </li>
<li>To scroll to a specific position, bind the List to a Scroll and use the scrollToIndex method: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-layout-development-create-list-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-layout-development-create-list-V5</a>.</li>
</ul>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.28.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/427%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Resource-to-RGBA-Conversion-Web-Component-Safe-Area-Custom-Dialog-Closure-Pixel-Object-Passing-List-Performance-Optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/427%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Resource-to-RGBA-Conversion-Web-Component-Safe-Area-Custom-Dialog-Closure-Pixel-Object-Passing-List-Performance-Optimization/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Resource to RGBA Conversion, Web Component Safe Area, Custom Dialog Closure, Pixel Object Passing, List Performance Optimization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:29:46 / Modified: 12:25:13" itemprop="dateCreated datePublished" datetime="2025-06-25T07:29:46+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Resource-to-RGBA-Conversion-Web-Component-Safe-Area-Custom-Dialog-Closure-Pixel-Object-Passing-List-Performance-Optimization"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Resource-to-RGBA-Conversion-Web-Component-Safe-Area-Custom-Dialog-Closure-Pixel-Object-Passing-List-Performance-Optimization" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Resource to RGBA Conversion, Web Component Safe Area, Custom Dialog Closure, Pixel Object Passing, List Performance Optimization"></a>【Daily HarmonyOS Next Knowledge】 Resource to RGBA Conversion, Web Component Safe Area, Custom Dialog Closure, Pixel Object Passing, List Performance Optimization</h3><h4 id="1-Are-there-any-system-methods-in-HarmonyOS-to-convert-ResourceColor-to-ordinary-RGBA"><a href="#1-Are-there-any-system-methods-in-HarmonyOS-to-convert-ResourceColor-to-ordinary-RGBA" class="headerlink" title="1. Are there any system methods in HarmonyOS to convert ResourceColor to ordinary RGBA?"></a>1. Are there any system methods in HarmonyOS to convert ResourceColor to ordinary RGBA?</h4><p>Are there any system methods to convert ResourceColor to ordinary RGBA?  </p>
<p>Currently, this capability is unavailable. It is necessary to limit the parameter type and define a custom conversion method to transform color values of string or number type into the corresponding RGBA type.  </p>
<h4 id="2-After-setting-expandSafeArea-for-a-HarmonyOS-web-component-the-keyboard-still-pushes-up-bottom-elements-when-popped-up"><a href="#2-After-setting-expandSafeArea-for-a-HarmonyOS-web-component-the-keyboard-still-pushes-up-bottom-elements-when-popped-up" class="headerlink" title="2. After setting expandSafeArea for a HarmonyOS web component, the keyboard still pushes up bottom elements when popped up?"></a>2. After setting expandSafeArea for a HarmonyOS web component, the keyboard still pushes up bottom elements when popped up?</h4><p>Monitor the pop-up and retraction of the soft keyboard. When the soft keyboard pops up, set the sub-window height to screen height minus soft keyboard height; when the soft keyboard retracts, set the sub-window height to screen height.  </p>
<pre><code class="language-typescript">import webview from &#39;@ohos.web.webview&#39;;
import window from &#39;@ohos.window&#39;;

@Entry
@Component
export struct SubWindowPage &#123;
  @State webViewVisibility: Visibility = Visibility.Visible;
  private pageWidth = 320;
  private pageHeight = 500;
  private controller: webview.WebviewController = new webview.WebviewController();
  @State flexAlign: FlexAlign = FlexAlign.Center;
  @State screenHeight: number | string = &#39;100%&#39;;

  aboutToAppear() &#123;
    window.getLastWindow(getContext(this)).then(currentWindow =&gt; &#123;
      // Monitor soft keyboard pop-up and retraction
      currentWindow.on(&#39;avoidAreaChange&#39;, async data =&gt; &#123;
        let property = currentWindow.getWindowProperties();
        let avoidArea = currentWindow.getWindowAvoidArea(window.AvoidAreaType.TYPE_KEYBOARD);
        this.screenHeight = px2vp(property.windowRect.height - avoidArea.bottomRect.height);
      &#125;);
    &#125;);
  &#125;

  build() &#123;
    Stack() &#123;
      Column() &#123;
        Web(&#123; src: $rawfile(&#39;index.html&#39;), controller: this.controller &#125;)
          .javaScriptAccess(true)
          .fileAccess(false)
          .zoomAccess(false)
          .domStorageAccess(true)
          .onlineImageAccess(true)
          .horizontalScrollBarAccess(false)
          .verticalScrollBarAccess(false)
          .cacheMode(CacheMode.Online)
          .width(this.pageWidth)
          .height(this.pageHeight)
          .border(&#123; radius: 6 &#125;)
          .visibility(this.webViewVisibility)
          .backgroundColor(Color.Pink);
      &#125;
      .justifyContent(this.flexAlign)
      .alignItems(HorizontalAlign.Center)
      .width(&#39;100%&#39;)
      .height(&#39;100%&#39;);
    &#125;
    .width(&#39;100%&#39;)
    .height(this.screenHeight)
    .backgroundColor(&#39;#999955&#39;)
    .alignContent(Alignment.Center);
  &#125;
&#125;
</code></pre>
<h4 id="3-Calling-the-close-method-on-child-controls-within-a-HarmonyOS-CustomDialog-is-ineffective"><a href="#3-Calling-the-close-method-on-child-controls-within-a-HarmonyOS-CustomDialog-is-ineffective" class="headerlink" title="3. Calling the close() method on child controls within a HarmonyOS CustomDialog is ineffective?"></a>3. Calling the close() method on child controls within a HarmonyOS CustomDialog is ineffective?</h4><p>The controller is undefined when called, making it impossible to close the dialog.  </p>
<p>The controller in the <code>@CustomDialog</code> decorator must not be declared with <code>?:</code>, and when using the component, the <code>dialogController</code> should be declared within the current component, not in a click event. Declaring it in an event causes the <code>this</code> in the CustomDialog’s child components to not reference the current controller, preventing the dialog from closing. Modify the component as follows:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct CustomDialogUser &#123;
  @Builder mycomp() &#123;
    Button(&#39;showtosast&#39;)
      .onClick(() =&gt; &#123;
        this.dialogController.open();
      &#125;);
  &#125;

  dialogController: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;
      cancel: () =&gt; &#123; this.onCancel(); &#125;,
      confirm: () =&gt; &#123; this.onAccept(); &#125;,
    &#125;),
  &#125;);

  onCancel() &#123;
    console.info(&#39;Callback when the first button is clicked&#39;);
  &#125;

  onAccept() &#123;
    console.info(&#39;Callback when the second button is clicked&#39;);
  &#125;

  build() &#123;
    Column() &#123;
      this.mycomp();
    &#125;.width(&#39;100%&#39;).margin(&#123; top: 5 &#125;);
  &#125;
&#125;

@CustomDialog
struct CustomDialogExample &#123;
  cancel?: () =&gt; void;
  confirm?: () =&gt; void;
  controller: CustomDialogController;

  build() &#123;
    Column() &#123;
      Text(&#39;I am the content&#39;).fontSize(20).margin(&#123; top: 10, bottom: 10 &#125;);
      Flex(&#123; justifyContent: FlexAlign.SpaceAround &#125;) &#123;
        Button(&#39;cancel&#39;)
          .onClick(() =&gt; &#123;
            this.controller.close();
            if (this.cancel) &#123;
              this.cancel();
            &#125;
          &#125;).backgroundColor(0xffffff).fontColor(Color.Black);
        Button(&#39;confirm&#39;)
          .onClick(() =&gt; &#123;
            this.controller.close();
            if (this.confirm) &#123;
              this.confirm();
            &#125;
          &#125;).backgroundColor(0xffffff).fontColor(Color.Red);
      &#125;.margin(&#123; bottom: 10 &#125;);
    &#125;
  &#125;
&#125;
</code></pre>
<p>When passing the builder, <code>this</code> does not reference the original controller. To avoid changes in <code>this</code> reference, declare the following code in <code>TopNavigationView</code>:  </p>
<pre><code class="language-typescript">@Builder MenuBuilder() &#123;
  Text(&#39;123&#39;)
    .width(20)
    .height(20)
    .onClick(() =&gt; &#123;
      this.dialogController.open();
    &#125;);
&#125;

dialogController: CustomDialogController = new CustomDialogController(&#123;
  builder: DescriptionDialog(),
  alignment: DialogAlignment.Center
&#125;);
</code></pre>
<p>If the builder is declared in <code>LeaderBoardPage</code>, <code>this</code> in the builder refers to <code>LeaderBoardPage</code>. After passing it to <code>TopNavigationView</code>, <code>this</code> refers to <code>TopNavigationView</code>, which does not declare <code>dialogController</code>, making it impossible to close the dialog. For the issue of hardcoding the dialog, the dialog’s child component is <code>builder: DescriptionDialog()</code>, and modifying the <code>DescriptionDialog</code> component will update the dialog form. In this builder, <code>this</code> refers to <code>CustomDialogController</code>, allowing the dialog to be opened.  </p>
<h4 id="4-Can-the-HarmonyOS-PixelMap-type-not-be-passed-from-parent-to-child-components"><a href="#4-Can-the-HarmonyOS-PixelMap-type-not-be-passed-from-parent-to-child-components" class="headerlink" title="4. Can the HarmonyOS PixelMap type not be passed from parent to child components?"></a>4. Can the HarmonyOS PixelMap type not be passed from parent to child components?</h4><p>The parent component obtains image data as base64, converts it to a Pixelmap, and passes it to the child component using the <code>@State</code> and <code>@Prop</code> decorators, but it cannot be displayed.  </p>
<p><strong>Reference demo for dynamic pixelmap passing in components</strong>:  </p>
<pre><code class="language-typescript">@Observed
class Params &#123;
  imagePixelMap: image.PixelMap | undefined;

  constructor(imaagePixelMap: image.PixelMap | undefined) &#123;
    this.imagePixelMap = imaagePixelMap;
  &#125;
&#125;

@Component
struct ObjectLinkChild &#123;
  @ObjectLink pixelMapParams: Params;

  build() &#123;
    Column() &#123;
      Image(this.pixelMapParams.imagePixelMap).width(100).height(100);
    &#125;
  &#125;
&#125;

@Builder
function imageBuilder(params: Params) &#123;
  ObjectLinkChild(&#123; pixelMapParams: params &#125;);
&#125;

@Entry
@Component
struct ImageExample &#123;
  @State imagePixelMap: image.PixelMap | undefined = undefined;
  @State pixelMapParams: Params = new Params(this.imagePixelMap);
  private baseNode: MyNodeController = new MyNodeController(this.imagePixelMap);
  wrapBuilder: WrappedBuilder&lt;[Params]&gt; = wrapBuilder&lt;[Params]&gt;(imageBuilder);

  async aboutToAppear() &#123;
    this.imagePixelMap = await this.getPixmapFromMedia($r(&#39;app.media.app_icon&#39;));
    let node = new BuilderNode&lt;[Params]&gt;(this.getUIContext());
    node.build(this.wrapBuilder, this.pixelMapParams);
    this.baseNode.setNode(node);
  &#125;

  build() &#123;
    Column() &#123;
      Image(this.imagePixelMap).enableAnalyzer(true).width(200).height(200);
    &#125;
  &#125;

  private async getPixmapFromMedia(resource: Resource) &#123;
    let unit8Array = await getContext(this)?.resourceManager?.getMediaContent(&#123;
      bundleName: resource.bundleName,
      moduleName: resource.moduleName,
      id: resource.id
    &#125;);
    let imageSource = image.createImageSource(unit8Array.buffer.slice(0, unit8Array.buffer.byteLength));
    let createPixelMap: image.PixelMap = await imageSource.createPixelMap(&#123; desiredPixelFormat: image.PixelMapFormat.RGBA_8888 &#125;);
    await imageSource.release();
    return createPixelMap;
  &#125;
&#125;

class MyNodeController extends NodeController &#123;
  private rootNode: BuilderNode&lt;[Params]&gt; | null = null;
  private pixelMap: image.PixelMap | undefined = undefined;
  private wrapBuilder: WrappedBuilder&lt;[Params]&gt; = wrapBuilder(imageBuilder);

  constructor(pixelMap: image.PixelMap | undefined) &#123;
    super();
    this.pixelMap = pixelMap;
  &#125;

  setNode(node: BuilderNode&lt;[Params]&gt; | null) &#123;
    this.rootNode = node;
  &#125;

  makeNode(uiContext: UIContext): FrameNode | null &#123;
    if (this.rootNode === null) &#123;
      this.rootNode = new BuilderNode(uiContext);
      this.rootNode.build(this.wrapBuilder, new Params(this.pixelMap));
    &#125;
    return this.rootNode.getFrameNode();
  &#125;
&#125;
</code></pre>
<h4 id="5-HarmonyOS-Tab-List-performance-optimization"><a href="#5-HarmonyOS-Tab-List-performance-optimization" class="headerlink" title="5. HarmonyOS Tab + List performance optimization?"></a>5. HarmonyOS Tab + List performance optimization?</h4><pre><code class="language-typescript">class Book &#123;
  bookId: string;
&#125;

prices = new Map&lt;string, Price&gt;; // Mapping from book ID to price data
tabList: Book[][] = []; // Lists under all tabs
</code></pre>
<p>There are multiple tabs under Tabs, each with a list whose data source is <code>tabList[tabIndex]</code>. When building ListItems, prices are looked up from <code>prices</code> to display book prices. The backend continuously pushes real-time book prices (high frequency). Upon receiving real-time prices, <code>prices</code> is updated, and data changes notify corresponding list items to redraw their views.  </p>
<ul>
<li>Actual testing shows list scrolling is卡顿.  </li>
<li>Tried optimizing with <code>LazyForEach</code>.  </li>
<li>After app startup, displaying the list under the first tab makes scrolling smooth.  </li>
<li>After switching to multiple tabs, scrolling becomes卡顿.</li>
</ul>
<p>Preliminary conclusion after analysis: After switching tabs, the new tab and its list are built. At this point, each tab (visible or not) has its own list. When the backend pushes price updates to the <code>price</code> map, list items with price updates in all tabs are redrawn. How to prevent invisible views from redrawing?  </p>
<p>Use the custom component freezing feature: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-custom-components-freeze-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-custom-components-freeze-V5</a>  </p>
<p>The custom component freezing feature is designed to optimize performance for complex UI pages, especially scenarios with multiple page stacks, long lists, or grid layouts. In these cases, when state variables are bound to multiple UI components, changes can trigger refreshes of numerous UI components, leading to interface卡顿 and response delays. To enhance refresh performance for such heavy UI interfaces, developers can attempt to use the custom component freezing feature.  </p>
<p>The working principle of component freezing:  </p>
<ol>
<li>Developers activate the component freezing mechanism by setting the <code>freezeWhenInactive</code> property.  </li>
<li>Once enabled, the system only updates active custom components, allowing the UI framework to minimize the update scope to only the active (visible) custom components, thereby improving refresh efficiency in complex UI scenarios.  </li>
<li>When an inactive custom component becomes active again, the state management framework performs necessary refresh operations to ensure correct UI display.</li>
</ol>
<p>In summary, component freezing aims to optimize UI refresh performance in complex interfaces. In scenarios with multiple invisible custom components (e.g., multiple page stacks, long lists, or grids), component freezing enables on-demand refresh: only the currently visible custom components are refreshed, while refreshing invisible custom components is deferred until they become visible.  </p>
<p>Note that component active&#x2F;inactive is not equivalent to visibility. Component freezing currently applies only to the following scenarios:  </p>
<ol>
<li>Page routing: The top-of-stack page is active, and non-top invisible pages are inactive.  </li>
<li>TabContent: Only custom components in the currently displayed TabContent are active; others are inactive.  </li>
<li>LazyForEach: Only custom components in the currently displayed LazyForEach are active; components in cached nodes are inactive.  </li>
<li>Navigation: Custom components in the currently displayed NavDestination are active; components in other undisplayed NavDestinations are inactive.  </li>
<li>Component reuse: Components entering the reuse pool are inactive; nodes mounted from the reuse pool are active.</li>
</ol>
<p>Other scenarios, such as masked components in a Stack layout, are not considered inactive despite being invisible and thus are not covered by component freezing.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/426%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-Page-Stack-Objects-Canvas-Animations-Security-Buttons-Modifying-Image-Colors-in-Image-Components-Setting-Popups-to-Display-Only-on-the-Current-Page/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/426%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-Page-Stack-Objects-Canvas-Animations-Security-Buttons-Modifying-Image-Colors-in-Image-Components-Setting-Popups-to-Display-Only-on-the-Current-Page/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Obtaining Page Stack Objects, Canvas Animations, Security Buttons, Modifying Image Colors in Image Components, Setting Popups to Display Only on the Current Page</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:25:05 / Modified: 07:27:34" itemprop="dateCreated datePublished" datetime="2025-06-25T07:25:05+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Obtaining-Page-Stack-Objects-Canvas-Animations-Security-Buttons-Modifying-Image-Colors-in-Image-Components-Setting-Popups-to-Display-Only-on-the-Current-Page"><a href="#【Daily-HarmonyOS-Next-Knowledge】Obtaining-Page-Stack-Objects-Canvas-Animations-Security-Buttons-Modifying-Image-Colors-in-Image-Components-Setting-Popups-to-Display-Only-on-the-Current-Page" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Obtaining Page Stack Objects, Canvas Animations, Security Buttons, Modifying Image Colors in Image Components, Setting Popups to Display Only on the Current Page"></a>【Daily HarmonyOS Next Knowledge】Obtaining Page Stack Objects, Canvas Animations, Security Buttons, Modifying Image Colors in Image Components, Setting Popups to Display Only on the Current Page</h3><h4 id="1-How-to-obtain-the-page-stack-object-in-HarmonyOS"><a href="#1-How-to-obtain-the-page-stack-object-in-HarmonyOS" class="headerlink" title="1. How to obtain the page stack object in HarmonyOS?"></a>1. How to obtain the page stack object in HarmonyOS?</h4><p>How to get the current page hierarchy and the page hierarchy object through the router, such as pages A - B - C, where page C can obtain the list of current page hierarchies and the corresponding page objects.  </p>
<p>Currently, only information about the current page in the router page stack can be obtained, such as the index, path, page name, and the number of pages in the page stack. Obtaining the list of the page stack is not supported yet.  </p>
<p>For navigation within and between modules, use <code>Navigation</code> as much as possible, as the router will stop evolving and may not add new capabilities in the future. The tight coupling caused by using <code>Navigation</code> for inter-module navigation can be solved by dynamic imports. The router does not support fine-grained operations on the page stack. For clearing the stack, such as A-B-B1, clearing page B from page B1 is not supported; only <code>clear</code> can be used to remove all pages except the current one. The router does not support skipping more than 32 pages, and the maximum capacity of the page stack is 32 pages. The router’s routing stack only supports obtaining the properties of the top page, including only the current page path and file name. <code>Navigation</code> will continue to evolve, so if capabilities are insufficient, requirements can be planned further. In <code>Navigation</code>, you can use <code>getAllPathName</code> to obtain the names of all <code>NavDestination</code> pages in the stack (for details, refer to Example 2 in the link below: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#getallpathname10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#getallpathname10</a>)  </p>
<pre><code class="language-typescript">// Index.ets
@Entry
@Component
struct NavigationExample &#123;
  pageInfos: NavPathStack = new NavPathStack();
  isUseInterception: boolean = false;

  registerInterception() &#123;
    this.pageInfos.setInterception(&#123;
      // Intercept before page navigation, allowing stack operations that take effect in the current navigation.
      willShow: (from: NavDestinationContext | &quot;navBar&quot;, to: NavDestinationContext | &quot;navBar&quot;,
        operation: NavigationOperation, animated: boolean) =&gt; &#123;
        if (!this.isUseInterception) &#123;
          return;
        &#125;
        if (typeof to === &quot;string&quot;) &#123;
          console.log(&quot;target page is navigation home&quot;);
          return;
        &#125;
        // Redirect the target page, changing from pageTwo to pageOne.
        let target: NavDestinationContext = to as NavDestinationContext;
        if (target.pathInfo.name === &#39;pageTwo&#39;) &#123;
          target.pathStack.pop();
          target.pathStack.pushPathByName(&#39;pageOne&#39;, null);
        &#125;
      &#125;,
      // Callback after page navigation; stack operations in this callback refresh on the next navigation.
      didShow: (from: NavDestinationContext | &quot;navBar&quot;, to: NavDestinationContext | &quot;navBar&quot;,
        operation: NavigationOperation, isAnimated: boolean) =&gt; &#123;
        if (!this.isUseInterception) &#123;
          return;
        &#125;
        if (typeof from === &quot;string&quot;) &#123;
          console.log(&quot;current transition is from navigation home&quot;);
        &#125; else &#123;
          console.log(`current transition is from  $&#123;(from as NavDestinationContext).pathInfo.name&#125;`);
        &#125;
        if (typeof to === &quot;string&quot;) &#123;
          console.log(&quot;current transition to is navBar&quot;);
        &#125; else &#123;
          console.log(`current transition is to $&#123;(to as NavDestinationContext).pathInfo.name&#125;`);
        &#125;
      &#125;,
      // Triggered when the Navigation single/double bar display state changes.
      modeChange: (mode: NavigationMode) =&gt; &#123;
        if (!this.isUseInterception) &#123;
          return;
        &#125;
        console.log(`current navigation mode is $&#123;mode&#125;`);
      &#125;
    &#125;);
  &#125;

  build() &#123;
    Navigation(this.pageInfos) &#123;
      Column() &#123;
        Button(&#39;pushPath&#39;, &#123; stateEffect: true, type: ButtonType.Capsule &#125;)
          .width(&#39;80%&#39;)
          .height(40)
          .margin(20)
          .onClick(() =&gt; &#123;
            this.pageInfos.pushPath(&#123; name: &#39;pageOne&#39; &#125;); // Push the NavDestination page information specified by name onto the stack
          &#125;);
        Button(&#39;use interception&#39;, &#123; stateEffect: true, type: ButtonType.Capsule &#125;)
          .width(&#39;80%&#39;)
          .height(40)
          .margin(20)
          .onClick(() =&gt; &#123;
            this.isUseInterception = !this.isUseInterception;
            if (this.isUseInterception) &#123;
              this.registerInterception();
            &#125; else &#123;
              this.pageInfos.setInterception(undefined);
            &#125;
          &#125;);
      &#125;
    &#125;.title(&#39;NavIndex&#39;);
  &#125;
&#125;
</code></pre>
<h4 id="2-Animation-demo-based-on-drawing-canvas-in-HarmonyOS"><a href="#2-Animation-demo-based-on-drawing-canvas-in-HarmonyOS" class="headerlink" title="2. Animation demo based on drawing.canvas in HarmonyOS?"></a>2. Animation demo based on drawing.canvas in HarmonyOS?</h4><p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/blog/topic/03797837883380062">https://developer.huawei.com/consumer/cn/blog/topic/03797837883380062</a>  </p>
<h4 id="3-Security-button-returns-permission-failure-in-HarmonyOS"><a href="#3-Security-button-returns-permission-failure-in-HarmonyOS" class="headerlink" title="3. Security button returns permission failure in HarmonyOS?"></a>3. Security button returns permission failure in HarmonyOS?</h4><p>The security button returns a permission failure with <code>result</code> as <code>TEMPORARY_AUTHORIZATION_FAILED</code>. How to solve it?  </p>
<pre><code class="language-typescript">// With default parameters, the icon, text, and background all exist
SaveButton().onClick(async (event: ClickEvent, result: SaveButtonOnClickResult) =&gt; &#123;
  if (result === SaveButtonOnClickResult.SUCCESS) &#123;&#125;
&#125;);
</code></pre>
<p>Using a URI to open a file allows continuous writing without time restrictions:  </p>
<pre><code class="language-typescript">let file = await fs.open(uri, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
</code></pre>
<p>This requires corresponding permissions, which need to be defined in <code>modules.json5</code>:  </p>
<pre><code class="language-json5">&#123;
  &quot;name&quot;: &quot;ohos.permission.WRITE_MEDIA&quot;,
  &quot;reason&quot;: &quot;$string:EntryAbility_desc&quot;,
  &quot;usedScene&quot;: &#123;
    &quot;abilities&quot;: [&quot;EntryAbility&quot;],
    &quot;when&quot;: &quot;always&quot;
  &#125;
&#125;
</code></pre>
<h4 id="4-Can-the-color-of-an-image-be-dynamically-modified-after-setting-a-local-resource-file-in-the-HarmonyOS-Image-component"><a href="#4-Can-the-color-of-an-image-be-dynamically-modified-after-setting-a-local-resource-file-in-the-HarmonyOS-Image-component" class="headerlink" title="4. Can the color of an image be dynamically modified after setting a local resource file in the HarmonyOS Image component?"></a>4. Can the color of an image be dynamically modified after setting a local resource file in the HarmonyOS Image component?</h4><p>Refer to the following document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5#colorfilter9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5#colorfilter9</a>  </p>
<p><code>colorFilter(value: ColorFilter | DrawingColorFilter)</code><br>Sets a color filter effect for the image.<br>When this property is set, the <code>renderMode</code> property has no effect.  </p>
<table>
<thead>
<tr>
<th align="left">Parameter Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">value</td>
<td align="left">ColorFilter | DrawingColorFilter</td>
<td align="left">Yes</td>
<td align="left">1. Sets a color filter effect for the image with a 4x5 RGBA transformation matrix.<br><br>The first row of the matrix represents the vector value of R (red), the second row represents G (green), the third row represents B (blue), the fourth row represents A (alpha), and the four rows represent the vector values of different RGBA components.<br><br>When the diagonal values of the matrix are 1 and the rest are 0, the original color of the image is maintained.<br><br><strong>Calculation rule:</strong><br><br>If the input filter matrix is:<br><br><img src="/../images/123a71ca10b754dc5ea030fc4ddddf2b_MD5.jpg"><br><br>The pixel is <code>[R, G, B, A]</code><br><br>The filtered color is <code>[R’, G’, B’, A’]</code><br><br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.26.png"><br><br>2. Starting from API Version 12, the <code>ColorFilter</code> type from <code>@ohos.graphics.drawing</code> is supported as a parameter.<br><br><strong>Note:</strong><br>For API Version 11 and earlier, this property is not supported for SVG image sources.<br>Starting from API Version 12, the <code>DrawingColorfilter</code> type in this interface is supported for use in meta services, where SVG image sources must have a <code>stroke</code> property.</td>
</tr>
</tbody></table>
<h4 id="5-How-to-set-a-popup-to-display-only-on-the-current-page-in-HarmonyOS"><a href="#5-How-to-set-a-popup-to-display-only-on-the-current-page-in-HarmonyOS" class="headerlink" title="5. How to set a popup to display only on the current page in HarmonyOS?"></a>5. How to set a popup to display only on the current page in HarmonyOS?</h4><p>A popup is used as a notification prompt. When page A shows the popup and then navigates to page B, the popup still appears on page B. Can the popup be set to display only on page A?  </p>
<p>The current behavior of popups is as described. You can use <code>CustomDialog</code> instead. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-common-components-custom-dialog-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-common-components-custom-dialog-V5</a>  </p>
<p><strong>Sample demo</strong>:  </p>
<pre><code class="language-typescript">import router from &#39;@ohos.router&#39;;

@CustomDialog
export default struct UserPrivacyDialog &#123;
  controller: CustomDialogController = new CustomDialogController(&#123; builder: &#39;&#39; &#125;);
  cancel: Function = () =&gt; &#123;&#125;;
  confirm: Function = () =&gt; &#123;&#125;;
  visible: Visibility = Visibility.None;

  build() &#123;
    Column() &#123;
      Text(&#39;I am a popup&#39;);

      Button(&#39;jump&#39;)
        .onClick(() =&gt; &#123;
          router.pushUrl(&#123;
            url: &#39;pages/Second&#39;
          &#125;);
        &#125;)
        .backgroundColor(0xffffff)
        .fontColor(Color.Red);
    &#125;
    .margin(&#123; top: 22 &#125;)
    .justifyContent(FlexAlign.SpaceEvenly);
  &#125;
&#125;

@Entry
@Component
struct Index &#123;
  @State textValue: string = &#39;Hello World&#39;;
  @State visible: Visibility = Visibility.None;

  build() &#123;
    Stack() &#123;
      Row() &#123;
        Column() &#123;
          Button(&#39;click&#39;)
            .onClick(() =&gt; &#123;
              if (this.visible === Visibility.Visible) &#123;
                this.visible = Visibility.None;
              &#125; else &#123;
                this.visible = Visibility.Visible;
              &#125;
            &#125;)
            .backgroundColor(0x777474)
            .fontColor(0x000000);
        &#125;
        .width(&#39;100%&#39;);
      &#125;
      .height(&#39;100%&#39;)
      .backgroundColor(0x885555);

      Text(&#39;&#39;)
        .onClick(() =&gt; &#123;
          if (this.visible === Visibility.Visible) &#123;
            this.visible = Visibility.None;
          &#125; else &#123;
            this.visible = Visibility.Visible;
          &#125;
        &#125;)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;) // Transparency can be adjusted
        .opacity(0.16)
        .backgroundColor(0x000000)
        .visibility(this.visible);

      Column() &#123;
        GridRow(&#123;
          columns: &#123; xs: 1, sm: 4, md: 8, lg: 12 &#125;,
          breakpoints: &#123;
            value: [&quot;400vp&quot;, &quot;600vp&quot;, &quot;800vp&quot;],
            reference: BreakpointsReference.WindowSize
          &#125;,
        &#125;) &#123;
          GridCol(&#123;
            span: &#123; xs: 1, sm: 2, md: 4, lg: 8 &#125;,
            offset: &#123; xs: 0, sm: 1, md: 2, lg: 2 &#125;
          &#125;) &#123;
            Column() &#123;
              Flex(&#123; justifyContent: FlexAlign.SpaceAround &#125;) &#123;
                UserPrivacyDialog();
              &#125;.margin(&#123; bottom: 10 &#125;);
            &#125;
            .backgroundColor(0xffffff)
            .visibility(this.visible)
            .clip(true)
            .borderRadius(20);
          &#125;
        &#125;
      &#125;.width(&#39;95%&#39;); // Set popup width
    &#125;
  &#125;
&#125;
</code></pre>
<p>Refer to <code>componentUtils.getRectangleById</code>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentutils-V5#componentutilsgetrectanglebyid">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentutils-V5#componentutilsgetrectanglebyid</a>  </p>
<p><code>getRectangleById(id: string): ComponentInfo</code><br>Obtains the component instance object by component ID and synchronously returns the obtained coordinates and size to the developer through the component instance object.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/425%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Feed-Stream-Image-Sizing-List-Component-Extension-Custom-Popups-Media-Listening-List-Item-Swapping/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/425%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Feed-Stream-Image-Sizing-List-Component-Extension-Custom-Popups-Media-Listening-List-Item-Swapping/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Feed Stream Image Sizing, List Component Extension, Custom Popups, Media Listening, List Item Swapping</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:23:44 / Modified: 12:25:14" itemprop="dateCreated datePublished" datetime="2025-06-25T07:23:44+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Feed-Stream-Image-Sizing-List-Component-Extension-Custom-Popups-Media-Listening-List-Item-Swapping"><a href="#Daily-HarmonyOS-Next-Knowledge-Feed-Stream-Image-Sizing-List-Component-Extension-Custom-Popups-Media-Listening-List-Item-Swapping" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Feed Stream Image Sizing, List Component Extension, Custom Popups, Media Listening, List Item Swapping"></a>[Daily HarmonyOS Next Knowledge] Feed Stream Image Sizing, List Component Extension, Custom Popups, Media Listening, List Item Swapping</h3><h4 id="1-How-to-set-the-height-of-an-image-component-to-3-4-of-its-width-in-a-HarmonyOS-feed-stream-with-fixed-width-image-content-cards"><a href="#1-How-to-set-the-height-of-an-image-component-to-3-4-of-its-width-in-a-HarmonyOS-feed-stream-with-fixed-width-image-content-cards" class="headerlink" title="1. How to set the height of an image component to 3&#x2F;4 of its width in a HarmonyOS feed stream with fixed-width image content cards?"></a>1. How to set the height of an image component to 3&#x2F;4 of its width in a HarmonyOS feed stream with fixed-width image content cards?</h4><p>For feed stream image content cards with fixed-width images, how to set the height of the current image component to 3&#x2F;4 of its width.  </p>
<p>The <code>onComplete</code> callback of the <code>Image</code> component can obtain the component’s width and height (<code>componentWidth</code>). The height can be calculated as 3&#x2F;4 of the width.<br>API link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-service-widget-basic-image-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-service-widget-basic-image-V5</a>  </p>
<p>This callback is triggered when image data is successfully loaded and decoded, returning the dimensions of the successfully loaded image. For adaptive components, the <code>onAreaChange</code> event is triggered when the component’s display dimensions, position, etc., change (e.g., during initial rendering or subsequent updates). The parameter <code>newValue</code> contains the component’s width and height. For specific usage, refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5</a>  </p>
<h4 id="2-Hoping-to-extend-the-List-component-with-an-onScrollIndex-event-start-number-end-number-center10-number-void-event-in-HarmonyOS"><a href="#2-Hoping-to-extend-the-List-component-with-an-onScrollIndex-event-start-number-end-number-center10-number-void-event-in-HarmonyOS" class="headerlink" title="2. Hoping to extend the List component with an onScrollIndex(event: (start: number, end: number, center10+: number) &#x3D;&gt; void) event in HarmonyOS?"></a>2. Hoping to extend the List component with an onScrollIndex(event: (start: number, end: number, center10+: number) &#x3D;&gt; void) event in HarmonyOS?</h4><p>Hoping to extend the List component with an <code>onScrollIndex(event: (start: number, end: number, center10+: number) =&gt; void)</code> event. Currently, this event only triggers when a <code>ListItemGroup</code> (treated as a single index) changes. To associate the sticky <code>ListItemGroup</code> header with <code>ListItem</code>, a callback for scrolling to a specific <code>ListItem</code> is needed. Similar to how <code>listScroller</code> extends <code>Scroller</code>, the List component should provide a more granular callback with an <code>indexInGroup</code> parameter.  </p>
<p>The new version of the List component can be bound to a <code>ListScroller</code> to scroll to a specified <code>ListItem</code> within a <code>ListItemGroup</code> using <code>scrollToItemInGroup(index: number, indexInGroup: number, smooth?: boolean, align?: ScrollAlign): void</code>.<br>Reference documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#scrolltoitemingroup11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#scrolltoitemingroup11</a>  </p>
<p>The existing <code>onScrollVisibleContentChange</code> event:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#onscrollvisiblecontentchange12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#onscrollvisiblecontentchange12</a>  </p>
<p><code>onScrollVisibleContentChange(handler: OnScrollVisibleContentChangeCallback)</code>  </p>
<p>Triggered when child components enter or exit the List’s visible area. Each <code>ListItem</code>, <code>ListItemGroup</code> header, or footer is counted as a child component when calculating trigger conditions.  </p>
<p>When the List has a spring edge effect, <code>onScrollVisibleContentChange</code> does not trigger during edge scrolling and rebound.  </p>
<p>Trigger conditions: Fires once during list initialization and when the index of the first or last visible child component changes.  </p>
<h4 id="3-Issues-with-calling-a-custom-HarmonyOS-CustomDialog"><a href="#3-Issues-with-calling-a-custom-HarmonyOS-CustomDialog" class="headerlink" title="3. Issues with calling a custom HarmonyOS CustomDialog?"></a>3. Issues with calling a custom HarmonyOS CustomDialog?</h4><p>A custom popup component created using the <code>@CustomDialog</code> decorator is intended for use by the project team, but it fails to display properly in certain scenarios. For example, when calling the custom popup’s display method in the callback of obtaining a <code>Preferences</code> instance after clicking a “Next” button in <code>page-Index.ets</code>, the popup does not display. However, calling the system component <code>AlertDialog.show</code> works. How can the custom popup component be improved to display normally like <code>AlertDialog.show</code> while retaining the original calling method (<code>CustomDialogProvider.showDialog(&#123; content: &quot;我是内容&quot; &#125;);</code>)?  </p>
<p>It is recommended to use the <code>getPreferencesSync</code> synchronous method of <code>Preferences</code> to avoid call failures.  </p>
<h4 id="4-Timing-issues-with-mediaquery’s-on-function-in-HarmonyOS"><a href="#4-Timing-issues-with-mediaquery’s-on-function-in-HarmonyOS" class="headerlink" title="4. Timing issues with mediaquery’s on function in HarmonyOS?"></a>4. Timing issues with mediaquery’s on function in HarmonyOS?</h4><p>When listening for landscape&#x2F;portrait orientation using the <code>mediaquery</code> <code>on</code> function, listening at app initialization does not work. A 3-second <code>setTimeout</code> is required to receive messages.  </p>
<p>Reference documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-mediaquery-V5#ZH-CN_TOPIC_0000001930756753__on">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-mediaquery-V5#ZH-CN_TOPIC_0000001930756753__on</a>  </p>
<h4 id="5-List-item-swapping-in-HarmonyOS"><a href="#5-List-item-swapping-in-HarmonyOS" class="headerlink" title="5. List item swapping in HarmonyOS?"></a>5. List item swapping in HarmonyOS?</h4><p>Needs to implement a UI interaction logic for list item swapping.  </p>
<p>Recommended to use a Grid for item swapping. See the demo below:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">GridExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">numbers</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;drag&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span> <span class="title function_">pixelMapBuilder</span>(<span class="params"></span>) &#123; <span class="comment">// Drag process styling</span></span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">text</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xF9CF93</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">15</span>; i++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">numbers</span>.<span class="title function_">push</span>(i + <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">changeIndex</span>(<span class="params"><span class="attr">index1</span>: <span class="built_in">number</span>, <span class="attr">index2</span>: <span class="built_in">number</span></span>) &#123; <span class="comment">// Swap array positions</span></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">temp</span>: <span class="built_in">string</span>;</span><br><span class="line">    temp = <span class="variable language_">this</span>.<span class="property">numbers</span>[index1];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">numbers</span>[index1] = <span class="variable language_">this</span>.<span class="property">numbers</span>[index2];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">numbers</span>[index2] = temp;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">5</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Grid</span>(<span class="variable language_">this</span>.<span class="property">scroller</span>) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">numbers</span>, <span class="function">(<span class="params"><span class="attr">day</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(day)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="number">0xF9CF93</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsGap</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="number">0xFAEEE0</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">      .<span class="title function_">editMode</span>(<span class="literal">true</span>) <span class="comment">// Set whether the Grid enters edit mode (enables dragging GridItems)</span></span><br><span class="line">      .<span class="title function_">onItemDragStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">ItemDragInfo</span>, <span class="attr">itemIndex</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123; <span class="comment">// Triggered when dragging this component for the first time</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">text</span> = <span class="variable language_">this</span>.<span class="property">numbers</span>[itemIndex];</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">pixelMapBuilder</span>(); <span class="comment">// Set the displayed content during dragging</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">onItemDrop</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">ItemDragInfo</span>, <span class="attr">itemIndex</span>: <span class="built_in">number</span>, <span class="attr">insertIndex</span>: <span class="built_in">number</span>, <span class="attr">isSuccess</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123; <span class="comment">// Triggered when dropping within this component</span></span><br><span class="line">        <span class="keyword">if</span> (!isSuccess || insertIndex &gt;= <span class="variable language_">this</span>.<span class="property">numbers</span>.<span class="property">length</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;tag&#x27;</span> + itemIndex + <span class="string">&#x27;&#x27;</span>, insertIndex + <span class="string">&#x27;&#x27;</span>); <span class="comment">// itemIndex: Drag start position, insertIndex: Drag insertion position</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">changeIndex</span>(itemIndex, insertIndex);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/424%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Hiding-Navigation-Back-Button-Canvas-Component-Swipe-Events-Expandable-Text-Component-Gradients-Full-screen-Custom-Component-Reference-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/424%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Hiding-Navigation-Back-Button-Canvas-Component-Swipe-Events-Expandable-Text-Component-Gradients-Full-screen-Custom-Component-Reference-Issues/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Hiding Navigation Back Button, Canvas Component Swipe Events, Expandable Text, Component Gradients, Full-screen Custom Component Reference Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:21:40 / Modified: 12:25:15" itemprop="dateCreated datePublished" datetime="2025-06-25T07:21:40+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Hiding-Navigation-Back-Button-Canvas-Component-Swipe-Events-Expandable-Text-Component-Gradients-Full-screen-Custom-Component-Reference-Issues"><a href="#【Daily-HarmonyOS-Next-Knowledge】Hiding-Navigation-Back-Button-Canvas-Component-Swipe-Events-Expandable-Text-Component-Gradients-Full-screen-Custom-Component-Reference-Issues" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Hiding Navigation Back Button, Canvas Component Swipe Events, Expandable Text, Component Gradients, Full-screen Custom Component Reference Issues"></a>【Daily HarmonyOS Next Knowledge】Hiding Navigation Back Button, Canvas Component Swipe Events, Expandable Text, Component Gradients, Full-screen Custom Component Reference Issues</h3><h4 id="1-In-HarmonyOS-Navigation-the-back-button-of-NavDestination-cannot-be-hidden-causing-the-title-to-not-center"><a href="#1-In-HarmonyOS-Navigation-the-back-button-of-NavDestination-cannot-be-hidden-causing-the-title-to-not-center" class="headerlink" title="1. In HarmonyOS Navigation, the back button of NavDestination cannot be hidden, causing the title to not center."></a>1. In HarmonyOS Navigation, the back button of NavDestination cannot be hidden, causing the title to not center.</h4><ol>
<li><strong>Back Button Hiding Feature</strong>: The <code>hideBackButton</code> property of the <code>NavDestination</code> component defaults to <code>false</code> (showing the back button). To hide the back button, set this property to <code>true</code>.  </li>
<li><strong>Title Bar Display Mode</strong>: Set the <code>titleMode</code> property of the <code>NavDestination</code> component to <code>NavigationTitleMode.Mini</code> to hide the back button in the title bar.</li>
</ol>
<h4 id="2-When-a-Swiper-nested-page-contains-a-Canvas-in-HarmonyOS-how-to-make-the-Canvas-respond-to-horizontal-swipes-but-not-vertical-swipes"><a href="#2-When-a-Swiper-nested-page-contains-a-Canvas-in-HarmonyOS-how-to-make-the-Canvas-respond-to-horizontal-swipes-but-not-vertical-swipes" class="headerlink" title="2. When a Swiper-nested page contains a Canvas in HarmonyOS, how to make the Canvas respond to horizontal swipes but not vertical swipes?"></a>2. When a Swiper-nested page contains a Canvas in HarmonyOS, how to make the Canvas respond to horizontal swipes but not vertical swipes?</h4><p>When a Swiper-nested page includes a Canvas, the following method was used to add swipe event listening to the Canvas, but the event was not triggered:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">.priorityGesture(GestureGroup(GestureMode.Exclusive,</span><br><span class="line">  SwipeGesture()</span><br><span class="line">    .onAction((event: GestureEvent) =&gt; &#123;</span><br><span class="line">      if (event &amp;&amp; this.klineQuotaModel) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">))</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Working demo**: This triggers the `onAction` event, and swiping within the Canvas area does not scroll the Swiper.  </span><br><span class="line">```typescript</span><br><span class="line">@Component</span><br><span class="line">struct CanvasExample1 &#123;</span><br><span class="line">  // Configures parameters for the CanvasRenderingContext2D object, including whether to enable anti-aliasing (true enables it).</span><br><span class="line">  private settings: RenderingContextSettings = new RenderingContextSettings(true);</span><br><span class="line">  // Creates a CanvasRenderingContext2D object for drawing within the Canvas.</span><br><span class="line">  private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings);</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      // Invokes the CanvasRenderingContext2D object within the Canvas.</span><br><span class="line">      Canvas(this.context)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">        .backgroundColor(&#x27;#F5DC62&#x27;)</span><br><span class="line">        .onReady(() =&gt; &#123;</span><br><span class="line">          // Draw content here.</span><br><span class="line">          this.context.strokeRect(50, 50, 200, 150);</span><br><span class="line">        &#125;)</span><br><span class="line">        .priorityGesture(GestureGroup(GestureMode.Exclusive,</span><br><span class="line">          SwipeGesture()</span><br><span class="line">            .onAction((event: GestureEvent) =&gt; &#123;</span><br><span class="line">              console.log(&#x27;Canvas responds, Swiper does not&#x27;);</span><br><span class="line">            &#125;)</span><br><span class="line">        ))</span><br><span class="line">        .hitTestBehavior(HitTestMode.Block)</span><br><span class="line">        .width(&#x27;80%&#x27;)</span><br><span class="line">        .height(&#x27;50%&#x27;);</span><br><span class="line"></span><br><span class="line">      Text(&#x27;Canvas&#x27;)</span><br><span class="line">        .width(&#x27;80%&#x27;)</span><br><span class="line">        .height(&#x27;50%&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">    .backgroundColor(Color.Red);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index47 &#123;</span><br><span class="line">  private swiperController: SwiperController = new SwiperController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Swiper(this.swiperController) &#123;</span><br><span class="line">      Text(&#x27;0&#x27;)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">        .backgroundColor(Color.Gray)</span><br><span class="line">        .textAlign(TextAlign.Center)</span><br><span class="line">        .fontSize(30);</span><br><span class="line"></span><br><span class="line">      Text(&#x27;1&#x27;)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">        .backgroundColor(Color.Green)</span><br><span class="line">        .textAlign(TextAlign.Center)</span><br><span class="line">        .fontSize(30);</span><br><span class="line"></span><br><span class="line">      Text(&#x27;2&#x27;)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">        .backgroundColor(Color.Pink)</span><br><span class="line">        .textAlign(TextAlign.Center)</span><br><span class="line">        .fontSize(30);</span><br><span class="line"></span><br><span class="line">      CanvasExample1();</span><br><span class="line">    &#125;</span><br><span class="line">    .loop(false);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. Expandable text in HarmonyOS  </span><br><span class="line">A scenario requires displaying multi-line text with a maximum of 4 lines. When exceeding 4 lines, an &quot;Expand&quot; button should appear at the end. Clicking &quot;Expand&quot; shows the full text with a &quot;Collapse&quot; button, which reverts to the 4-line limit when clicked. Are there similar components or plugins for this?  </span><br><span class="line"></span><br><span class="line">Refer to the API document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5  </span><br><span class="line">This module provides text width and height calculations.  </span><br><span class="line"></span><br><span class="line">**Sample code**:  </span><br><span class="line">```typescript</span><br><span class="line">// Scenario: Change styles (e.g., add expand/collapse) when exceeding 4 lines. Calculate total text height.</span><br><span class="line">let textSize: SizeOptions = measure.measureTextSize(&#123; textContent: this.message, fontSize: 24, constraintWidth: 300 &#125;);</span><br><span class="line">// Calculate height with limited width and max lines (4 lines).</span><br><span class="line">let textSize2: SizeOptions = measure.measureTextSize(&#123; textContent: this.message, fontSize: 24, maxLines: 4, constraintWidth: 300 &#125;);</span><br><span class="line">// If textSize.height &gt; textSize2.height, the text exceeds 4 lines; handle the business logic accordingly.</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. How to add transparency to component gradients in HarmonyOS?  </span><br><span class="line">Recommend setting color values as:  </span><br><span class="line">```typescript</span><br><span class="line">.linearGradient(&#123;</span><br><span class="line">  // angle: 180,</span><br><span class="line">  direction: GradientDirection.Right,</span><br><span class="line">  colors: [[&quot;#00E6E6E6&quot;, 0.0], [&quot;#ffE6E6E6&quot;, 1]]</span><br><span class="line">&#125;)</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. When a full-screen custom component is referenced by another page in HarmonyOS, it disables button functions on the referencing page.  </span><br><span class="line">When a full-screen custom component is referenced by another page, button functions on the referencing page become inactive.  </span><br><span class="line"></span><br><span class="line">Solution: Dynamically change the `zIndex` of the full-screen custom component. Refer to the code below:  </span><br><span class="line">```typescript</span><br><span class="line">build() &#123;</span><br><span class="line">    // Use Stack to overlay a &quot;pseudo-dialog&quot; over the original page.</span><br><span class="line">    Stack() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Button(&#x27;Bottom Page Button&#x27;)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            // showToast(&#x27;Bottom button clicked&#x27;)</span><br><span class="line">            console.log(&#x27;Bottom button clicked&#x27;, this.visible);</span><br><span class="line">          &#125;)</span><br><span class="line">          .backgroundColor(Color.Red)</span><br><span class="line">          .margin(&#123; top: 200 &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;)</span><br><span class="line">      .zIndex(10)</span><br><span class="line">      .hitTestBehavior(HitTestMode.Transparent);</span><br><span class="line">      </span><br><span class="line">      Component1(&#123; visible: $visible &#125;)</span><br><span class="line">        .zIndex(this.Component1ZIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">200</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
