<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/17/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/105-Daily-HarmonyOS-Knowledge-Network-Request-Callback-Toast-Issue-Popup-Problem-Disable-Popup-Return-Navigation-Foldable-Screen-Missing-Back-Button-Responsive-Layout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/105-Daily-HarmonyOS-Knowledge-Network-Request-Callback-Toast-Issue-Popup-Problem-Disable-Popup-Return-Navigation-Foldable-Screen-Missing-Back-Button-Responsive-Layout/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Network Request Callback Toast Issue, Popup Problem, Disable Popup Return, Navigation Foldable Screen Missing Back Button, Responsive Layout</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:27:01 / Modified: 09:50:34" itemprop="dateCreated datePublished" datetime="2025-06-27T08:27:01+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Network-Request-Callback-Toast-Issue-Popup-Problem-Disable-Popup-Return-Navigation-Foldable-Screen-Missing-Back-Button-Responsive-Layout"><a href="#Daily-HarmonyOS-Knowledge-Network-Request-Callback-Toast-Issue-Popup-Problem-Disable-Popup-Return-Navigation-Foldable-Screen-Missing-Back-Button-Responsive-Layout" class="headerlink" title="[Daily HarmonyOS Knowledge] Network Request Callback Toast Issue, Popup Problem, Disable Popup Return, Navigation Foldable Screen Missing Back Button, Responsive Layout"></a>[Daily HarmonyOS Knowledge] Network Request Callback Toast Issue, Popup Problem, Disable Popup Return, Navigation Foldable Screen Missing Back Button, Responsive Layout</h3><h4 id="1-HarmonyOS-HTTP-request-callback-causes-showToast-error"><a href="#1-HarmonyOS-HTTP-request-callback-causes-showToast-error" class="headerlink" title="1. HarmonyOS HTTP request callback causes showToast error?"></a>1. HarmonyOS HTTP request callback causes showToast error?</h4><p>When using <code>http.HttpRequest.request</code> to initiate an HTTP request, executing a custom callback function in the promise’s <code>then</code> callback may result in an error when calling toast: <code>[ArkRuntime Log] Error: Internal error. UI execution context not found.</code>  </p>
<p><strong>Steps to reproduce</strong>:  </p>
<ol>
<li>Create a request with <code>http.createHttp();</code>  </li>
<li>Initiate the request with <code>request.request;</code>  </li>
<li>Process data in <code>promise.then</code> and execute the callback function  </li>
<li>Use <code>promptAction.showToast</code> in the callback function to display the toast</li>
</ol>
<p><strong>Solution</strong>:<br>The error <code>Internal error. UI execution context not found.</code> occurs because the <code>promptAction.showToast</code> interface detects a missing UI instance in the scenario and throws an exception. Bind the UI instance to call the interface and use proper try-catch for exception handling.  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Obtain the UI instance from the window instance and use the interface through the UI instance&#39;;

  aboutToAppear(): void &#123;
    setTimeout(() =&gt; &#123;
      // Exception capture
      try &#123;
        this.getUIContext().getPromptAction().showToast(&#123; message: &#39;Popup test&#39;, duration: 2000 &#125;)
      &#125; catch (e) &#123;
        console.error(&quot;Popup exception, error message:&quot; + JSON.stringify(e))
      &#125;
    &#125;, 1000)
  &#125;

  build() &#123;
    Column() &#123;
      Text(this.message)
        .id(&#39;HelloWorld&#39;)
        .fontSize(15)
        .fontWeight(FontWeight.Bold)
        .textAlign(TextAlign.Center)
        .width(&#39;100%&#39;)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-dynamically-display-content-in-a-custom-component-bound-to-a-HarmonyOS-Button-via-bindPopup-based-on-external-variables"><a href="#2-How-to-dynamically-display-content-in-a-custom-component-bound-to-a-HarmonyOS-Button-via-bindPopup-based-on-external-variables" class="headerlink" title="2. How to dynamically display content in a custom component bound to a HarmonyOS Button via bindPopup based on external variables?"></a>2. How to dynamically display content in a custom component bound to a HarmonyOS Button via bindPopup based on external variables?</h4><p>Since components within <code>bindPopup</code> are not <code>@component</code> subcomponents, declarative variables like <code>@state</code> and <code>@link</code> cannot be used for passing and updating. Use <code>AppStorage</code> to create or update properties (e.g., whether a favorite is public), and synchronize updates in <code>bindPopup</code> via <code>@StorageLink</code>.  </p>
<p><strong>Demo</strong>:  </p>
<pre><code class="language-typescript">export enum PopoverItemType &#123;
  Default,
  AddVideo,
  ManageVideo,
  ModifyName,
  ModifyPrivacy,
  DeleteFolder
&#125;

export interface PopoverItem &#123;
  title: string
  type: PopoverItemType
&#125;


@Component
export struct CollectionManageMenu &#123;
  @State popoverItemList1: PopoverItem[] = []
  @State popoverItemList2: PopoverItem[] = []
  @StorageLink(&#39;pub&#39;) pub: string = &#39;0&#39;


  aboutToAppear(): void &#123;
    this.popoverItemList1 = [
      &#123;
        title: &#39;Add Video&#39;,
        type: PopoverItemType.AddVideo
      &#125;,
      &#123;
        title: &#39;Batch Manage Videos&#39;,
        type: PopoverItemType.ManageVideo
      &#125;,
      &#123;
        title: &#39;Modify Name&#39;,
        type: PopoverItemType.ModifyName
      &#125;,
      &#123;
        // TODO: The copy should change dynamically based on the status
        title: &#39;Set as Private&#39;,
        type: PopoverItemType.ModifyPrivacy
      &#125;,
      &#123;
        title: &#39;Delete Favorite&#39;,
        type: PopoverItemType.DeleteFolder
      &#125;
    ]

    this.popoverItemList2 = [
      &#123;
        title: &#39;Add Video&#39;,
        type: PopoverItemType.AddVideo
      &#125;,
      &#123;
        title: &#39;Batch Manage Videos&#39;,
        type: PopoverItemType.ManageVideo
      &#125;,
      &#123;
        title: &#39;Modify Name&#39;,
        type: PopoverItemType.ModifyName
      &#125;,
      &#123;
        // TODO: The copy should change dynamically based on the status
        title: &#39;Set as Public&#39;,
        type: PopoverItemType.ModifyPrivacy
      &#125;,
      &#123;
        title: &#39;Delete Favorite&#39;,
        type: PopoverItemType.DeleteFolder
      &#125;
    ]
  &#125;

  build() &#123;
    Column() &#123;
      List() &#123;
        ForEach(this.pub == &#39;0&#39; ? this.popoverItemList1 : this.popoverItemList2, (item: PopoverItem, index) =&gt; &#123;
          ListItem() &#123;
            Text(item.title)
          &#125;
          .height(52)
          .padding(&#123;
            left: 16,
            right: 16,
            top: 14,
            bottom: 14
          &#125;)
          .onClick(() =&gt; &#123;

          &#125;)
        &#125;, (item: PopoverItem) =&gt; JSON.stringify(item.title))
      &#125;
      .width(&#39;100%&#39;)
      .scrollBar(BarState.Off)
    &#125;
    .width(161)
    .alignItems(HorizontalAlign.Center)
    .borderRadius(8)
  &#125;
&#125;

@Entry
@Component
export struct CollectionDetailPageNavBar &#123;
  @State showPopover: boolean = false
  @State pub: boolean = true
  @Builder
  manageMenu() &#123;
    CollectionManageMenu()
  &#125;

  build() &#123;
    Column() &#123;
      Button(&#39;Manage&#39;)
        .width(62)
        .height(32)
        .borderRadius(16)
        .fontSize(15)
        .onClick(() =&gt; &#123;
          this.showPopover = !this.showPopover
        &#125;)
        .bindPopup(
          this.showPopover,
          &#123;
            builder: () =&gt; &#123;
              this.manageMenu()
            &#125;,
            radius: 8,
            enableArrow: true,
            placement: Placement.BottomLeft,
            targetSpace: 20,
            offset: &#123; x: -6 &#125;,
            onStateChange: (event) =&gt; &#123;
              if (!event.isVisible) &#123;
                this.showPopover = false
              &#125;
            &#125;
          &#125;
        )

      Button(&#39;Change Private/Public Status&#39;)
        .width(62)
        .height(32)
        .borderRadius(16)
        .fontSize(15)
        .onClick(() =&gt; &#123;
          this.pub = !this.pub
          AppStorage.SetOrCreate(&#39;pub&#39;, this.pub ? &#39;0&#39; : &quot;1&quot;)
        &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-How-to-prevent-a-custom-popup-from-closing-when-the-back-button-is-pressed-in-HarmonyOS"><a href="#3-How-to-prevent-a-custom-popup-from-closing-when-the-back-button-is-pressed-in-HarmonyOS" class="headerlink" title="3. How to prevent a custom popup from closing when the back button is pressed in HarmonyOS?"></a>3. How to prevent a custom popup from closing when the back button is pressed in HarmonyOS?</h4><p>An <code>@Entry</code>-decorated component can listen for back events by overriding <code>onBackPress</code>.  </p>
<h4 id="4-When-loading-pages-via-navigation-in-HarmonyOS-the-first-secondary-page-on-a-foldable-screen-in-full-screen-mode-does-not-display-the-back-button"><a href="#4-When-loading-pages-via-navigation-in-HarmonyOS-the-first-secondary-page-on-a-foldable-screen-in-full-screen-mode-does-not-display-the-back-button" class="headerlink" title="4. When loading pages via navigation in HarmonyOS, the first secondary page on a foldable screen in full-screen mode does not display the back button?"></a>4. When loading pages via navigation in HarmonyOS, the first secondary page on a foldable screen in full-screen mode does not display the back button?</h4><ul>
<li>The primary page jumps to the secondary page via <code>router.pushUrl</code>.  </li>
<li>The secondary page is written using <code>Navigation</code>, and navigating from the first secondary page to the second uses <code>this.pageInfos.pushPathByName()</code>.</li>
</ul>
<p><strong>Solution</strong>:<br><code>Navigation</code> uses <code>hideBackButton</code> to hide the back button in the title bar. This does not support hiding the back button in the <code>NavDestination</code> component’s title bar.  </p>
<ul>
<li>Default: <code>false</code> (show back button)  </li>
<li><code>true</code>: Hide back button.  </li>
<li>Note: The back button only takes effect when <code>titleMode</code> is <code>NavigationTitleMode.Mini</code>.</li>
</ul>
<p><strong>Reference document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5</a>  </p>
<h4 id="5-How-to-achieve-synchronous-scaling-of-page-layouts-in-HarmonyOS-based-on-display-size"><a href="#5-How-to-achieve-synchronous-scaling-of-page-layouts-in-HarmonyOS-based-on-display-size" class="headerlink" title="5. How to achieve synchronous scaling of page layouts in HarmonyOS based on display size?"></a>5. How to achieve synchronous scaling of page layouts in HarmonyOS based on display size?</h4><p>Use responsive layouts to dynamically adjust the page.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/responsive-layout-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/responsive-layout-V5</a>  </p>
<p><strong>Key points</strong>:  </p>
<ul>
<li>Adaptive layouts ensure normal display within a certain window size range, but significant size changes (e.g., from 400vp to 1000vp) may require responsive layouts to adjust page structure.  </li>
<li>Responsive layouts allow elements to automatically adapt to external container changes based on specific features (e.g., window width, screen orientation).  </li>
<li>The most common feature is window width, divided into breakpoints. When the width crosses a breakpoint, the layout adjusts (e.g., from single-column to multi-column) for optimal display.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/104-Daily-HarmonyOS-Knowledge-Web-Memory-Exception-Web-Height-Issue-Image-Press-Effect-Loading-HTML-in-Sandbox-Sensing-Routing-Return-Parameters/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/104-Daily-HarmonyOS-Knowledge-Web-Memory-Exception-Web-Height-Issue-Image-Press-Effect-Loading-HTML-in-Sandbox-Sensing-Routing-Return-Parameters/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Web Memory Exception, Web Height Issue, Image Press Effect, Loading HTML in Sandbox, Sensing Routing Return Parameters</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:26:11 / Modified: 08:26:25" itemprop="dateCreated datePublished" datetime="2025-06-27T08:26:11+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Web-Memory-Exception-Web-Height-Issue-Image-Press-Effect-Loading-HTML-in-Sandbox-Sensing-Routing-Return-Parameters"><a href="#Daily-HarmonyOS-Knowledge-Web-Memory-Exception-Web-Height-Issue-Image-Press-Effect-Loading-HTML-in-Sandbox-Sensing-Routing-Return-Parameters" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Memory Exception, Web Height Issue, Image Press Effect, Loading HTML in Sandbox, Sensing Routing Return Parameters"></a>[Daily HarmonyOS Knowledge] Web Memory Exception, Web Height Issue, Image Press Effect, Loading HTML in Sandbox, Sensing Routing Return Parameters</h3><h4 id="1-HarmonyOS-Web-memory-exception-Each-time-a-new-interface-is-entered-loading-Web-increases-memory-by-over-100M-Repeatedly-creating-Web-components-may-cause-ANR"><a href="#1-HarmonyOS-Web-memory-exception-Each-time-a-new-interface-is-entered-loading-Web-increases-memory-by-over-100M-Repeatedly-creating-Web-components-may-cause-ANR" class="headerlink" title="1. HarmonyOS Web memory exception: Each time a new interface is entered, loading Web increases memory by over 100M. Repeatedly creating Web components may cause ANR."></a>1. HarmonyOS Web memory exception: Each time a new interface is entered, loading Web increases memory by over 100M. Repeatedly creating Web components may cause ANR.</h4><ul>
<li><p>Reproduce by repeatedly loading the Huawei homepage.  </p>
</li>
<li><p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-routing-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-routing-V5</a><br>Web is a heavyweight component, thus consuming more memory. The system will recycle Web cache resources when memory is tight.  </p>
</li>
<li><p>Analyze AppFreeze (Application Not Responding):<br>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/appfreeze-guidelines-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/appfreeze-guidelines-V5</a></p>
</li>
</ul>
<h4 id="2-When-a-HarmonyOS-Scroll-embeds-a-Web-component-the-Web-component-becomes-excessively-tall-if-its-height-is-not-specified-but-displays-normally-without-Scroll"><a href="#2-When-a-HarmonyOS-Scroll-embeds-a-Web-component-the-Web-component-becomes-excessively-tall-if-its-height-is-not-specified-but-displays-normally-without-Scroll" class="headerlink" title="2. When a HarmonyOS Scroll embeds a Web component, the Web component becomes excessively tall if its height is not specified, but displays normally without Scroll."></a>2. When a HarmonyOS Scroll embeds a Web component, the Web component becomes excessively tall if its height is not specified, but displays normally without Scroll.</h4><ul>
<li><p>For nested scrolling of Web components, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-nested-scrolling-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-nested-scrolling-V5</a><br>Typical application scenario: Multiple independent scrollable areas on a page. Scrolling the Web area drives other scrollable areas to achieve a smooth scrolling experience.  </p>
</li>
<li><p>For a Web component embedded in a scrollable container (Scroll, List, etc.), handle scrolling gestures by using the <code>nestedScroll</code> property of the ArkUI framework’s <code>NestedScrollMode</code> enum. This allows nested scrolling between the Web component and the ArkUI scrollable container.  </p>
<ul>
<li><code>nestedScroll</code> accepts a <code>NestedScrollOptions</code> object with <code>scrollForward</code> and <code>scrollBackward</code> properties, each of type <code>NestedScrollMode</code>.  </li>
<li>When a Web component is nested in multiple scrollable containers, the unconsumed offset and speed in the same direction as the parent component are passed to the nearest parent component with the same direction, enabling continuous scrolling.</li>
</ul>
</li>
<li><p>Set the Web layout mode with <code>layoutMode</code>:<br>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#layoutmode11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#layoutmode11</a><br>Currently supported modes:  </p>
<ul>
<li><code>WebLayoutMode.NONE</code> (follows system layout)  </li>
<li><code>WebLayoutMode.FIT_CONTENT</code> (adaptive height based on the front-end page)</li>
</ul>
<p>Limitations of <code>WebLayoutMode.FIT_CONTENT</code>:  </p>
<ul>
<li>If the Web component’s width or length exceeds 7680px, specify <code>RenderMode.SYNC_RENDER</code> when creating the component to avoid a white screen.  </li>
<li><code>layoutMode</code> cannot be dynamically switched after creation.  </li>
<li>Width&#x2F;height specifications:  <ul>
<li><code>RenderMode.SYNC_RENDER</code>: ≤ 500,000px each  </li>
<li><code>RenderMode.ASYNC_RENDER</code>: ≤ 7680px each</li>
</ul>
</li>
<li>Frequent changes to page width&#x2F;height trigger re-layout, affecting performance.  </li>
<li>Waterfall layouts (loading more content when scrolling to the bottom) are not supported.  </li>
<li>Only height adaptation is supported (width adaptation is not supported).  </li>
<li>The component height cannot be modified via the height property.</li>
</ul>
</li>
</ul>
<h4 id="3-How-to-implement-image-press-effects-in-HarmonyOS"><a href="#3-How-to-implement-image-press-effects-in-HarmonyOS" class="headerlink" title="3. How to implement image press effects in HarmonyOS?"></a>3. How to implement image press effects in HarmonyOS?</h4><p>Set the <code>resizable</code> property to achieve image stretching effects.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5#ZH-CN_TOPIC_0000001930756873">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-image-V5#ZH-CN_TOPIC_0000001930756873</a>__  </p>
<h4 id="4-How-to-load-local-sandbox-HTML-in-HarmonyOS-under-cross-origin-resolution"><a href="#4-How-to-load-local-sandbox-HTML-in-HarmonyOS-under-cross-origin-resolution" class="headerlink" title="4. How to load local sandbox HTML in HarmonyOS (under cross-origin resolution)?"></a>4. How to load local sandbox HTML in HarmonyOS (under cross-origin resolution)?</h4><p>Set the Web component’s URL to <code>&#39;file://&#39; + this.context.filesDir + &#39;/index.html&#39;</code>.<br>For methods to obtain the application’s file sandbox path, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-context-stage-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-context-stage-V5</a>  </p>
<h4 id="5-How-can-in-page-components-in-HarmonyOS-sense-routing-return-parameters"><a href="#5-How-can-in-page-components-in-HarmonyOS-sense-routing-return-parameters" class="headerlink" title="5. How can in-page components in HarmonyOS sense routing return parameters?"></a>5. How can in-page components in HarmonyOS sense routing return parameters?</h4><ul>
<li><p>When page B returns to page A via <code>router.back(&#123; url: &#39;&#39;, params: &#123;&#125; &#125;)</code>, page A can obtain parameters through the <code>onPageShow</code> lifecycle. To enable referenced components in page A to sense return parameters without relying on page A’s lifecycle:  </p>
<ul>
<li>Components can actively retrieve router parameters or use <code>eventHub</code> to subscribe within the component and trigger when returning.</li>
</ul>
</li>
<li><p><code>eventHub</code> usage: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-eventhub-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-eventhub-V5</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/103-Daily-HarmonyOS-Knowledge-Global-Font-Adjustment-H5-Checkbox-Unchecking-Issue-Margin-Ineffectiveness-Length-Conversion-Prop-vs-Link-Comparison/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/103-Daily-HarmonyOS-Knowledge-Global-Font-Adjustment-H5-Checkbox-Unchecking-Issue-Margin-Ineffectiveness-Length-Conversion-Prop-vs-Link-Comparison/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Global Font Adjustment, H5 Checkbox Unchecking Issue, Margin Ineffectiveness, Length Conversion, @Prop vs @Link Comparison</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:25:34 / Modified: 08:25:48" itemprop="dateCreated datePublished" datetime="2025-06-27T08:25:34+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Global-Font-Adjustment-H5-Checkbox-Unchecking-Issue-Margin-Ineffectiveness-Length-Conversion-Prop-vs-Link-Comparison"><a href="#Daily-HarmonyOS-Knowledge-Global-Font-Adjustment-H5-Checkbox-Unchecking-Issue-Margin-Ineffectiveness-Length-Conversion-Prop-vs-Link-Comparison" class="headerlink" title="[Daily HarmonyOS Knowledge] Global Font Adjustment, H5 Checkbox Unchecking Issue, Margin Ineffectiveness, Length Conversion, @Prop vs @Link Comparison"></a>[Daily HarmonyOS Knowledge] Global Font Adjustment, H5 Checkbox Unchecking Issue, Margin Ineffectiveness, Length Conversion, @Prop vs @Link Comparison</h3><h4 id="1-Is-there-a-way-to-uniformly-adjust-the-global-font-size-in-HarmonyOS"><a href="#1-Is-there-a-way-to-uniformly-adjust-the-global-font-size-in-HarmonyOS" class="headerlink" title="1. Is there a way to uniformly adjust the global font size in HarmonyOS?"></a>1. Is there a way to uniformly adjust the global font size in HarmonyOS?</h4><p>A unified method for adjusting global font size exists. You can use dynamic attributes and customize a class that implements the <code>AttributeModifier</code> interface to define fixed styles for text, then apply it to <code>Text</code> components across the page.  </p>
<p><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5</a><br>Dynamic attribute setting for components supports if&#x2F;else syntax and polymorphic style configurations as needed.  </p>
<h4 id="2-In-a-HarmonyOS-Web-component-after-dynamically-setting-the-checked-attribute-of-an-H5-checkbox-it-cannot-be-unchecked-by-clicking-How-to-fix-this"><a href="#2-In-a-HarmonyOS-Web-component-after-dynamically-setting-the-checked-attribute-of-an-H5-checkbox-it-cannot-be-unchecked-by-clicking-How-to-fix-this" class="headerlink" title="2. In a HarmonyOS Web component, after dynamically setting the checked attribute of an H5 checkbox, it cannot be unchecked by clicking. How to fix this?"></a>2. In a HarmonyOS Web component, after dynamically setting the <code>checked</code> attribute of an H5 checkbox, it cannot be unchecked by clicking. How to fix this?</h4><p>For H5 <code>confirm</code> events, listen via the Web component’s <code>onConfirm</code> callback. Refer to the following code:  </p>
<pre><code class="language-typescript">import web_webview from &#39;@ohos.web.webview&#39;

@Entry
@Component
struct WebComponent &#123;
  controller: web_webview.WebviewController = new web_webview.WebviewController()

  build() &#123;
    Column() &#123;
      Web(&#123;
        src: &#39;&#39;,
        controller: this.controller
      &#125;)
        .overScrollMode(OverScrollMode.NEVER)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;)
        .onControllerAttached(() =&gt; &#123;
          this.controller.setCustomUserAgent(&#39;Mozilla/5.0 (Phone; OpenHarmony 4.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 ArkWeb/4.1.6.1 Mobile Variflight/6.1.0&#39;)
          this.controller.loadUrl(&#39;https://openapi.variflight.com/html/module/cs/index.html#/detail?id=323&#39;)
        &#125;)
        .onConfirm((event) =&gt; &#123;
          if (event) &#123;
            console.log(&quot;event.url:&quot; + event.url)
            console.log(&quot;event.message:&quot; + event.message)
            AlertDialog.show(&#123;
              title: &#39;onConfirm&#39;,
              message: &#39;text&#39;,
              primaryButton: &#123;
                value: &#39;cancel&#39;,
                action: () =&gt; &#123;
                  event.result.handleCancel()
                &#125;
              &#125;,
              secondaryButton: &#123;
                value: &#39;ok&#39;,
                action: () =&gt; &#123;
                  event.result.handleConfirm()
                &#125;
              &#125;,
              cancel: () =&gt; &#123;
                event.result.handleCancel()
              &#125;
            &#125;)
          &#125;
          return true
        &#125;)
        .mixedMode(MixedMode.All)
        .javaScriptAccess(true)
        .domStorageAccess(true)
        .overScrollMode(OverScrollMode.NEVER)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-In-HarmonyOS-when-setting-left-and-right-margins-for-a-parent-component-the-right-margin-does-not-take-effect-but-padding-works-Why"><a href="#3-In-HarmonyOS-when-setting-left-and-right-margins-for-a-parent-component-the-right-margin-does-not-take-effect-but-padding-works-Why" class="headerlink" title="3. In HarmonyOS, when setting left and right margins for a parent component, the right margin does not take effect, but padding works. Why?"></a>3. In HarmonyOS, when setting left and right margins for a parent component, the right margin does not take effect, but padding works. Why?</h4><ul>
<li>When using <code>margin</code> (outer margin), the child component’s width percentage is calculated based on the entire screen width, and then positioned using margins. If the sum of child component widths reaches 100%, additional margins may shift the components beyond the screen bounds.  </li>
<li>When using <code>padding</code> (inner padding), the child component’s width is calculated as (screen width - left&#x2F;right padding) × percentage, ensuring proper display within the parent container.</li>
</ul>
<h4 id="4-How-to-convert-a-HarmonyOS-Length-to-a-specific-numeric-value"><a href="#4-How-to-convert-a-HarmonyOS-Length-to-a-specific-numeric-value" class="headerlink" title="4. How to convert a HarmonyOS Length to a specific numeric value?"></a>4. How to convert a HarmonyOS <code>Length</code> to a specific numeric value?</h4><p>Use the <code>onAreaChange</code> callback to obtain the <code>Length</code> and convert it to a number:  </p>
<pre><code class="language-typescript">.onAreaChange((oldValue: Area, newValue: Area) =&gt; &#123;
  let num: number = 0
  num = newValue.width as number  // Type assertion
  console.log(num.toString())
  num = Number(newValue.width)     // Explicit conversion
  console.log(num.toString())
&#125;)
</code></pre>
<h4 id="5-What-is-the-memory-and-performance-comparison-between-HarmonyOS-Prop-and-Link-Does-Link-have-lower-overhead-than-Prop-for-deep-copying-large-data"><a href="#5-What-is-the-memory-and-performance-comparison-between-HarmonyOS-Prop-and-Link-Does-Link-have-lower-overhead-than-Prop-for-deep-copying-large-data" class="headerlink" title="5. What is the memory and performance comparison between HarmonyOS @Prop and @Link? Does @Link have lower overhead than @Prop for deep copying large data?"></a>5. What is the memory and performance comparison between HarmonyOS <code>@Prop</code> and <code>@Link</code>? Does <code>@Link</code> have lower overhead than <code>@Prop</code> for deep copying large data?</h4><p><strong>Key Differences Between <code>@Prop</code> and <code>@Link</code></strong>:  </p>
<ol>
<li><p><strong>Data Synchronization</strong>:  </p>
<ul>
<li><code>@Prop</code>: Initialized with a parent component’s <code>@State</code> variable. Changes only refresh the current component’s UI, not the parent’s.  </li>
<li><code>@Link</code>: Also initialized with a parent <code>@State</code> variable. Changes trigger UI refreshes for both the current component and the parent, enabling two-way data binding.</li>
</ul>
</li>
<li><p><strong>Underlying Mechanism of <code>@Link</code></strong>:  </p>
<ul>
<li><strong>Initial Rendering</strong>: The parent component’s <code>@State</code> variable initializes the child’s <code>@Link</code> variable, establishing bidirectional synchronization.  </li>
<li><strong>Update Process</strong>: When the parent’s <code>@State</code> updates, it notifies all dependent components (including <code>@Link</code> in children). When a child’s <code>@Link</code> updates, it calls the parent’s <code>@State</code> setter to sync back, triggering UI refreshes for both.</li>
</ul>
</li>
<li><p><strong>Overhead Comparison</strong>:  </p>
<ul>
<li><code>@Prop</code> has lower overhead than <code>@Link</code> because it does not involve bidirectional synchronization or parent UI refreshes.  </li>
<li>Neither supports deep copying of data. For large datasets, <code>@Prop</code> is more efficient due to its unidirectional nature.</li>
</ul>
</li>
</ol>
<p><strong>Reference Document</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-link-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-link-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/102-Daily-HarmonyOS-Knowledge-Web-Loads-PDF-Toggle-Disable-Grid-Multiple-Rendering-Issues-Web-Title-Existence-Judgment-List-Swipe-Menu-Closure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/102-Daily-HarmonyOS-Knowledge-Web-Loads-PDF-Toggle-Disable-Grid-Multiple-Rendering-Issues-Web-Title-Existence-Judgment-List-Swipe-Menu-Closure/" class="post-title-link" itemprop="url">[Daily HarmonyOS Knowledge] Web Loads PDF, Toggle Disable, Grid Multiple Rendering Issues, Web Title Existence Judgment, List Swipe Menu Closure</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:23:00 / Modified: 09:50:14" itemprop="dateCreated datePublished" datetime="2025-06-27T08:23:00+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Web-Loads-PDF-Toggle-Disable-Grid-Multiple-Rendering-Issues-Web-Title-Existence-Judgment-List-Swipe-Menu-Closure"><a href="#Daily-HarmonyOS-Knowledge-Web-Loads-PDF-Toggle-Disable-Grid-Multiple-Rendering-Issues-Web-Title-Existence-Judgment-List-Swipe-Menu-Closure" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Loads PDF, Toggle Disable, Grid Multiple Rendering Issues, Web Title Existence Judgment, List Swipe Menu Closure"></a>[Daily HarmonyOS Knowledge] Web Loads PDF, Toggle Disable, Grid Multiple Rendering Issues, Web Title Existence Judgment, List Swipe Menu Closure</h3><h4 id="1-After-HarmonyOS-Web-component-loads-a-local-PDF-file-it-displays-a-title-and-download-button-by-default-Are-there-APIs-to-hide-or-manipulate-this-title"><a href="#1-After-HarmonyOS-Web-component-loads-a-local-PDF-file-it-displays-a-title-and-download-button-by-default-Are-there-APIs-to-hide-or-manipulate-this-title" class="headerlink" title="1. After HarmonyOS Web component loads a local PDF file, it displays a title and download button by default. Are there APIs to hide or manipulate this title?"></a>1. After HarmonyOS Web component loads a local PDF file, it displays a title and download button by default. Are there APIs to hide or manipulate this title?</h4><p>To hide the PDF operation button bar, append <code>#toolbar=0&amp;navpanes=0</code> at the end, for example:<br><code>src:&quot;file://&quot; + filesDir + &quot;/test.pdf#toolbar=0&amp;navpanes=0&quot;</code>  </p>
<h4 id="2-How-to-disable-a-HarmonyOS-Toggle-in-specific-scenarios-so-that-clicking-it-remains-in-the-false-state-without-changing"><a href="#2-How-to-disable-a-HarmonyOS-Toggle-in-specific-scenarios-so-that-clicking-it-remains-in-the-false-state-without-changing" class="headerlink" title="2. How to disable a HarmonyOS Toggle in specific scenarios, so that clicking it remains in the false state without changing?"></a>2. How to disable a HarmonyOS Toggle in specific scenarios, so that clicking it remains in the false state without changing?</h4><p>When multiple Toggles are used to set states, if the first Toggle is false, disable the second and third Toggles (set both to false), and clicking these Toggles should not change false to true.  </p>
<p>Reference demo:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct ToggleExample &#123;</span><br><span class="line">  @State is_on: boolean = false;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Row() &#123;</span><br><span class="line">        Text(&quot;Bluetooth Mode&quot;)</span><br><span class="line">          .height(50)</span><br><span class="line">          .fontSize(16)</span><br><span class="line">      &#125;</span><br><span class="line">      Row() &#123;</span><br><span class="line">        Text(&quot;Bluetooth&quot;)</span><br><span class="line">          .height(50)</span><br><span class="line">          .padding(&#123; left: 10 &#125;)</span><br><span class="line">          .fontSize(16)</span><br><span class="line">          .textAlign(TextAlign.Start)</span><br><span class="line">          .backgroundColor(0xFFFFFF)</span><br><span class="line">        Stack() &#123;</span><br><span class="line">          Toggle(&#123; type: ToggleType.Switch, isOn: this.is_on &#125;)</span><br><span class="line">            .margin(&#123; left: 200, right: 10 &#125;)</span><br><span class="line">          Column() &#123;</span><br><span class="line">          &#125;.width(60)</span><br><span class="line">          .height(50)</span><br><span class="line">          .margin(&#123; left: 200, right: 10 &#125;)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            this.is_on = !this.is_on</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .backgroundColor(0xFFFFFF)</span><br><span class="line">    &#125;</span><br><span class="line">    .padding(10)</span><br><span class="line">    .backgroundColor(0xDCDCDC)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. When a HarmonyOS Grid is rendered multiple times, the layout remains fixed (e.g., displaying historical search records with varying text lengths). How to handle this?  </span><br><span class="line">You can use the stretching capability to achieve the effect. Stretching refers to distributing the increased or decreased space to specified areas within a container component when its size changes, typically implemented via the `flexGrow` and `flexShrink` properties in Flex layout. For details, refer to the documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/adaptive-layout-V5.  </span><br><span class="line"></span><br><span class="line">Add the `FlexWrap.Wrap` property for line wrapping. Reference demo:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>struct ListExample {<br>  private arr: string[] &#x3D; [‘测试1111’, ‘测试’, ‘测试0’, ‘测试112222’, ‘测试112222yeyeyeyy’, ‘测试1’, ‘测试112222yeyeyeyyjdjkd’]</p>
<p>  build() {<br>    Column() {<br>      Row() {<br>        Flex({ wrap: FlexWrap.Wrap }) {<br>          ForEach(this.arr, (item: string) &#x3D;&gt; {<br>            Text(item)<br>              .height(50)<br>              .fontSize(16)<br>              .textAlign(TextAlign.Center)<br>              .borderRadius(10)<br>              .backgroundColor(0xFFFFFF)<br>              .width(‘30%’)<br>              .flexGrow(1)<br>              .flexShrink(0)<br>          },<br>            (item: string) &#x3D;&gt; item)<br>        }<br>      }</p>
<pre><code>  .height(&#39;100%&#39;)
  .width(&#39;100%&#39;)
  .backgroundColor(Color.Pink)
  .justifyContent(FlexAlign.SpaceEvenly)


&#125;
.width(&#39;100%&#39;).height(&#39;100%&#39;)
.backgroundColor(0xDCDCDC).padding(&#123; top: 5 &#125;)
</code></pre>
<p>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. How to determine if an element has a Title in HarmonyOS Web?  </span><br><span class="line">Currently, the Web document does not have a title tag. `onTitleReceive` and `controller.getTitle` default to returning the URL without the protocol header. No documentation describes how to check for the Title tag. Can we determine by comparing the URL string with the protocol header removed?  </span><br><span class="line"></span><br><span class="line">There is no interface to detect the Title in Web. You can detect whether a Title exists via front-end methods or JS injection:  </span><br></pre></td></tr></table></figure>
<script>
    if(document.title){
    alert("该页面存在title，标题为：" + document.title);
    }else{
    alert("该页面不存在title");
    }
</script>
<pre><code>

#### 5. How to actively close the swipe menu of ListItem in HarmonyOS?  
Use the `closeAllSwipeActions()` method provided by ListScroller to restore the swipe effect.  

Reference documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#closeallswipeactions11  

`closeAllSwipeActions(options?: [CloseSwipeActionOptions](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#closeswipeactionoptions11%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E)): void`  
Collapses ListItems in the EXPANDED state and sets a callback event.
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/101%E3%80%90Daily-HarmonyOS-Knowledge%E3%80%91Manual-Scroller-Stop-Execute-Every-Second-Custom-Web-Keyboard-Inject-Styles-into-Web-Components-Safe-Area/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/101%E3%80%90Daily-HarmonyOS-Knowledge%E3%80%91Manual-Scroller-Stop-Execute-Every-Second-Custom-Web-Keyboard-Inject-Styles-into-Web-Components-Safe-Area/" class="post-title-link" itemprop="url">【Daily HarmonyOS Knowledge】Manual Scroller Stop, Execute Every Second, Custom Web Keyboard, Inject Styles into Web Components, Safe Area</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 08:18:12 / Modified: 09:50:03" itemprop="dateCreated datePublished" datetime="2025-06-27T08:18:12+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Knowledge-Scroller-Manual-Stop-Second-Execution-Web-Custom-Keyboard-Web-Component-Injection-Style-Safe-Area"><a href="#Daily-HarmonyOS-Knowledge-Scroller-Manual-Stop-Second-Execution-Web-Custom-Keyboard-Web-Component-Injection-Style-Safe-Area" class="headerlink" title="[Daily HarmonyOS Knowledge] Scroller Manual Stop, Second Execution, Web Custom Keyboard, Web Component Injection Style, Safe Area"></a>[Daily HarmonyOS Knowledge] Scroller Manual Stop, Second Execution, Web Custom Keyboard, Web Component Injection Style, Safe Area</h3><h4 id="1-Does-HarmonyOS-scroller-have-a-manual-stop-method"><a href="#1-Does-HarmonyOS-scroller-have-a-manual-stop-method" class="headerlink" title="1. Does HarmonyOS scroller have a manual stop method?"></a>1. Does HarmonyOS scroller have a manual stop method?</h4><p>You can use the scrollTo method to slide to the specified position.  </p>
<pre><code>// demo.ets  
import Curves from &#39;@ohos.curves&#39;  

@Entry  
@Component  
struct ScrollExample &#123;  
  scroller: Scroller = new Scroller()  
  private arr: number[] = []  

  aboutToAppear(): void &#123;  
    for (let i = 0; i &lt; 100; i++) &#123;  
      this.arr.push(i)  
    &#125;  
  &#125;  

  build() &#123;  
    Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;  

      Scroll(this.scroller) &#123;  
        Column() &#123;  
          ForEach(this.arr, (item: number) =&gt; &#123;  
            Text(item.toString())  
              .width(&#39;90%&#39;)  
              .height(150)  
              .backgroundColor(0xFFFFFF)  
              .borderRadius(15)  
              .fontSize(16)  
              .textAlign(TextAlign.Center)  
              .margin(&#123; top: 10 &#125;)  
          &#125;, (item: string) =&gt; item)  
        &#125;.width(&#39;100%&#39;)  
      &#125;  
      .scrollable(ScrollDirection.Vertical) // Scroll direction is vertical  
      .scrollBar(BarState.On) // Scroll bar is always visible  
      .scrollBarColor(Color.Gray) // Scroll bar color  
      .scrollBarWidth(10) // Scroll bar width  
      .friction(0.6)  
      .edgeEffect(EdgeEffect.Spring)  
      .onScroll((xOffset: number, yOffset: number) =&gt; &#123;  
        console.info(xOffset + &#39; &#39; + yOffset)  
      &#125;)  
      .onScrollEdge((side: Edge) =&gt; &#123;  
        console.info(&#39;To the edge&#39;)  
      &#125;)  
      .onScrollStop(() =&gt; &#123;  
        console.info(&#39;Scroll Stop&#39;)  
      &#125;)  

      Button(&#39;Interrupt and execute other logic&#39;)  
        .height(&#39;5%&#39;)  
        .onClick(() =&gt; &#123;  
          let curve = Curves.interpolatingSpring(10, 1, 228, 30) // Create a stepped curve  
          const yOffset: number = this.scroller.currentOffset().yOffset;  
          this.scroller.scrollTo(&#123;  
            xOffset: 0,  
            yOffset: yOffset,  
            // animation: &#123; duration: 1000, curve: curve, canOverScroll: true &#125;  
          &#125;)  
        &#125;)  
        .margin(&#123; top: 110, left: 20 &#125;)  

    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(0xDCDCDC)  
  &#125;  
&#125;  
</code></pre>
<h4 id="2-HarmonyOS-function-that-executes-once-per-second"><a href="#2-HarmonyOS-function-that-executes-once-per-second" class="headerlink" title="2. HarmonyOS function that executes once per second?"></a>2. HarmonyOS function that executes once per second?</h4><p>Use setInterval to repeatedly call a function with a fixed time delay between each call. To delete the timer, manually call the clearInterval interface.  </p>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/js-apis-timer-V13#setinterval">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/js-apis-timer-V13#setinterval</a>  </p>
<p><code>setInterval(handler: Function | string, delay: number, ...arguments: any[]): number</code><br>Repeatedly calls a function with a fixed time delay between each call.<br>To delete the timer, manually call the clearInterval interface.  </p>
<pre><code>setInterval(() =&gt; &#123;  
  console.log(&#39;do every 1s.&#39;);  
&#125;, 1000);  
</code></pre>
<h4 id="3-HarmonyOS-WebView-custom-keyboard-issue"><a href="#3-HarmonyOS-WebView-custom-keyboard-issue" class="headerlink" title="3. HarmonyOS WebView custom keyboard issue?"></a>3. HarmonyOS WebView custom keyboard issue?</h4><p>When using a custom keyboard in a loaded webview, how to handle the hiding and displaying of the system keyboard, as well as displaying the custom keyboard and processing cursor acquisition.  </p>
<p>When using a custom keyboard, the system keyboard should be hidden to avoid conflicts. You can set the focusable property of the TextInput component to false to make the component non-focusable, so that the default system keyboard will not pop up. You can load the custom keyboard by displaying it in the <web> component. The specific implementation method is to create an HTML page containing the desired keys and use it as the src attribute value of the <web> component. When the user clicks on the component, the custom keyboard will pop up automatically. You can obtain the cursor position information by listening to keyboard events. In this way, you can dynamically adjust the cursor to the correct position according to the user’s operations during text editing.  </p>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5#ZH-CN_TOPIC_0000001847049860__customkeyboard10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5#ZH-CN_TOPIC_0000001847049860__customkeyboard10</a>  </p>
<h4 id="4-How-to-inject-styles-into-HTML-in-HarmonyOS-web-components"><a href="#4-How-to-inject-styles-into-HTML-in-HarmonyOS-web-components" class="headerlink" title="4. How to inject styles into HTML in HarmonyOS web components?"></a>4. How to inject styles into HTML in HarmonyOS web components?</h4><p>Refer to the demo to inject styles into the style tag:  </p>
<pre><code>// ets  
import web_webview from &#39;@ohos.web.webview&#39;;  

@Entry  
@Component  
struct WebComponent &#123;  
  webviewController: web_webview.WebviewController = new web_webview.WebviewController();  
  private customStyle: string =  
    &#39;html, body &#123;margin: 0; padding: 0; overflow: hidden; touch-action: none; background:#ace&#125;&#39;;  

  aboutToAppear() &#123;  
    // Configure Web to enable debug mode  
    web_webview.WebviewController.setWebDebuggingAccess(true);  
  &#125;  

  build() &#123;  
    Column() &#123;  

      Button(&#39;style&#39;).onClick((event: ClickEvent) =&gt; &#123;  

        this.webviewController.runJavaScript(`const head = document.head;  
                                              console.log(head);  
                                              const style = document.createElement(&#39;style&#39;);  
                                              style.appendChild(document.createTextNode(&quot;$&#123;this.customStyle&#125;&quot;))  
                                              head.appendChild(style)  
        `)  
      &#125;)  
      Web(&#123; src: $rawfile(&#39;index.html&#39;), controller: this.webviewController &#125;).domStorageAccess(true)  
    &#125;  
  &#125;  
&#125;  
// html  
&lt;!DOCTYPE html&gt;  
&lt;html&gt;  
&lt;head&gt;  

&lt;/head&gt;  

&lt;body&gt;  
&lt;h1 id=&quot;text&quot;&gt;  
    This is a test message. The default font is black. After calling the runJavaScript method, the font is green. After calling the runJavaScriptCodePassed method, the font is red.  
&lt;/h1&gt;  
&lt;/body&gt;  
&lt;/html&gt;  
</code></pre>
<h4 id="5-HarmonyOS-safe-area-issue"><a href="#5-HarmonyOS-safe-area-issue" class="headerlink" title="5. HarmonyOS safe area issue?"></a>5. HarmonyOS safe area issue?</h4><p>When there is no tabbar, <code>.expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP, SafeAreaEdge.BOTTOM])</code> can indeed start from the top of the screen, but it fails when a tabbar is added. What is the solution?  </p>
<p>Use immersive development to avoid the navigation bar.  </p>
<p>Please refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/228-Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/228-Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Summary of Methods for Generating QR Codes from Strings and Images, Getting Text Line Counts, and Exiting Edit State in Input Boxes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:06:17 / Modified: 00:09:03" itemprop="dateCreated datePublished" datetime="2025-06-27T00:06:17+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes"><a href="#Daily-HarmonyOS-Next-Knowledge-Summary-of-Methods-for-Generating-QR-Codes-from-Strings-and-Images-Getting-Text-Line-Counts-and-Exiting-Edit-State-in-Input-Boxes" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Summary of Methods for Generating QR Codes from Strings and Images, Getting Text Line Counts, and Exiting Edit State in Input Boxes"></a>[Daily HarmonyOS Next Knowledge] Summary of Methods for Generating QR Codes from Strings and Images, Getting Text Line Counts, and Exiting Edit State in Input Boxes</h3><h4 id="1-How-to-replace-the-icon-in-the-pull-down-refresh-with-text-in-HarmonyOS"><a href="#1-How-to-replace-the-icon-in-the-pull-down-refresh-with-text-in-HarmonyOS" class="headerlink" title="1. How to replace the icon in the pull-down refresh with text in HarmonyOS?"></a>1. How to replace the icon in the pull-down refresh with text in HarmonyOS?</h4><p>Demo for hiding the icon and displaying text:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">RefreshExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isRefreshing</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="title class_">String</span>[] = [<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;10&#x27;</span>]</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">customRefreshComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="comment">// Hide the icon</span></span><br><span class="line">        <span class="comment">// LoadingProgress().height(32)</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;正在刷新...&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Refresh</span>(&#123; <span class="attr">refreshing</span>: $$this.<span class="property">isRefreshing</span>, <span class="attr">builder</span>: <span class="variable language_">this</span>.<span class="title function_">customRefreshComponent</span>() &#125;) &#123;</span><br><span class="line">        <span class="title class_">List</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span> + item)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">onScrollIndex</span>(<span class="function">(<span class="params"><span class="attr">first</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(first.<span class="title function_">toString</span>())</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Yellow</span>, <span class="attr">startMargin</span>: <span class="number">10</span>, <span class="attr">endMargin</span>: <span class="number">10</span> &#125;)</span><br><span class="line">        .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">onStateChange</span>(<span class="function">(<span class="params"><span class="attr">refreshStatus</span>: <span class="title class_">RefreshStatus</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Refresh onStatueChange state is &#x27;</span> + refreshStatus)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">onRefreshing</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">isRefreshing</span> = <span class="literal">false</span></span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onRefreshing test&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="number">0x89CFF0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to set a fixed light mode in HarmonyOS?  </span></span><br><span class="line"><span class="string">You can actively set the light/dark style of the application. Once set, the application&#x27;s mode will not change with the system.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-light-dark-color-adaptation-V5#section19361879317  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, the application follows the system&#x27;s light/dark mode. To fix the mode:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onCreate</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onCreate&#x27;</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getApplicationContext</span>().<span class="title function_">setColorMode</span>(<span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_DARK</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**System default judgment rules**:  </span></span><br><span class="line"><span class="string">1. If the application explicitly sets the mode using `</span>setColorMode<span class="string">`, that setting takes precedence.  </span></span><br><span class="line"><span class="string">2. If `</span>setColorMode<span class="string">` is not called:  </span></span><br><span class="line"><span class="string">   - If the application has dark resources in the `</span>dark<span class="string">` directory, system components will automatically switch to dark mode.  </span></span><br><span class="line"><span class="string">   - If no dark resources exist, system components will remain in light mode even when the system is in dark mode.  </span></span><br><span class="line"><span class="string">![](../images/【每日学点HarmonyOS%20Next知识】25.02.28.png) </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To ensure the application follows the system&#x27;s light/dark mode when using only system components/colors:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onCreate</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getApplicationContext</span>().<span class="title function_">setColorMode</span>(<span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_NOT_SET</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to generate a QR code from a string and image in HarmonyOS?  </span></span><br><span class="line"><span class="string">Generate a QR code from a string and image that can be scanned and decoded.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use the `</span><span class="title class_">QRCode</span><span class="string">` component:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-qrcode-V5  </span></span><br><span class="line"><span class="string">The QR code content is a string (max 256 characters; longer strings will be truncated).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to get the number of text lines displayed in a HarmonyOS Text component?  </span></span><br><span class="line"><span class="string">Get the line count to adjust the layout dynamically.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span><span class="meta">@ohos</span>.<span class="property">measure</span><span class="string">` module returns text width/height but not the line count directly. Calculate it based on your scenario:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5  </span></span><br><span class="line"><span class="string">![](../images/【每日学点HarmonyOS%20Next知识】25.02.28-1.png)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Scenario 1: Apply different styles when text exceeds a specific line count (e.g., 3 lines)</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">textSize</span>: <span class="title class_">SizeOptions</span> = measure.<span class="title function_">measureTextSize</span>(&#123; <span class="attr">textContent</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">fontSize</span>: <span class="number">24</span>, <span class="attr">constraintWidth</span>: <span class="number">300</span> &#125;);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">textSize2</span>: <span class="title class_">SizeOptions</span> = measure.<span class="title function_">measureTextSize</span>(&#123; <span class="attr">textContent</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">fontSize</span>: <span class="number">24</span>, <span class="attr">maxLines</span>: <span class="number">3</span>, <span class="attr">constraintWidth</span>: <span class="number">300</span> &#125;);</span><br><span class="line"><span class="comment">// If textSize.height &gt; textSize2.height, the text exceeds 3 lines. Handle accordingly.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Scenario 2: Reserve appropriate height before rendering</span></span><br><span class="line"><span class="keyword">import</span> measure <span class="keyword">from</span> <span class="string">&#x27;@ohos.measure&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">textSize</span>: <span class="title class_">SizeOptions</span> = &#123; <span class="attr">width</span>: <span class="number">0</span>, <span class="attr">height</span>: <span class="number">0</span> &#125;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Very long text...&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textSize</span> = measure.<span class="title function_">measureTextSize</span>(&#123;</span><br><span class="line">      <span class="attr">textContent</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">fontSize</span>: <span class="number">14</span>, <span class="attr">constraintWidth</span>: <span class="number">300</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">textSize</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Swiper</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="title function_">px2vp</span>(<span class="title class_">Number</span>(<span class="variable language_">this</span>.<span class="property">textSize</span>.<span class="property">height</span>)))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to make an InputText lose focus and exit the editing state in HarmonyOS?  </span></span><br><span class="line"><span class="string">Use `</span><span class="title function_">stopEditing</span>()<span class="string">` to dismiss the keyboard:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextInputExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">inputValue</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">inputValue</span>, <span class="attr">placeholder</span>: <span class="string">&#x27;input your word…&#x27;</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">placeholderColor</span>(<span class="title class_">Color</span>.<span class="property">Grey</span>)</span><br><span class="line">        .<span class="title function_">placeholderFont</span>(&#123; <span class="attr">size</span>: <span class="number">14</span>, <span class="attr">weight</span>: <span class="number">400</span> &#125;)</span><br><span class="line">        .<span class="title function_">caretColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;95%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">inputValue</span> = value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">stopEditing</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/227-Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/227-Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Loading Different Views, Function Parameter Passing, Loading Effects, Immersive Bottom Status Bar</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:05:27 / Modified: 09:50:42" itemprop="dateCreated datePublished" datetime="2025-06-27T00:05:27+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar"><a href="#Daily-HarmonyOS-Next-Knowledge-Screenshot-Prevention-Loading-Different-Views-Function-Parameter-Passing-Loading-Effects-Immersive-Bottom-Status-Bar" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Loading Different Views, Function Parameter Passing, Loading Effects, Immersive Bottom Status Bar"></a>[Daily HarmonyOS Next Knowledge] Screenshot Prevention, Loading Different Views, Function Parameter Passing, Loading Effects, Immersive Bottom Status Bar</h3><h4 id="1-How-to-implement-screenshot-prevention-in-a-pushed-sub-page-of-HarmonyOS"><a href="#1-How-to-implement-screenshot-prevention-in-a-pushed-sub-page-of-HarmonyOS" class="headerlink" title="1. How to implement screenshot prevention in a pushed sub-page of HarmonyOS?"></a>1. How to implement screenshot prevention in a pushed sub-page of HarmonyOS?</h4><ol>
<li>After the user clicks Login, navigate to the login page via <code>Navigation.push</code>.  </li>
<li>Implement screenshot prevention on the login page and disable it when exiting the login page.</li>
</ol>
<p>Set the main window to privacy mode in the login page’s callback. Enable privacy mode in the <code>aboutToAppear</code> lifecycle and disable it when exiting the page. For details, refer to:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-3-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-3-V5</a>  </p>
<p><code>setWindowPrivacyMode</code> sets whether the window is in privacy mode, preventing screenshots or screen recordings. This API is suitable for scenarios requiring screenshot&#x2F;recording restrictions.  </p>
<p>Set the main window to privacy mode in the <code>onWindowStageCreate</code> callback. Refer to the sample code:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>; </span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123; </span><br><span class="line">    hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>); </span><br><span class="line">    windowStage.<span class="title function_">getMainWindow</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span>, data</span>) =&gt;</span> &#123; </span><br><span class="line">      <span class="keyword">let</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>; </span><br><span class="line">      <span class="keyword">if</span> (errCode) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the main window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err)); </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">      &#125; </span><br><span class="line">      <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> = data; </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in obtaining the main window. Data: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data)); </span><br><span class="line">      <span class="keyword">let</span> <span class="attr">isPrivacyMode</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>; </span><br><span class="line">      <span class="keyword">try</span> &#123; </span><br><span class="line">        windowClass.<span class="title function_">setWindowPrivacyMode</span>(isPrivacyMode, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123; </span><br><span class="line">          <span class="keyword">const</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>; </span><br><span class="line">          <span class="keyword">if</span> (errCode) &#123; </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to set the window to privacy mode. Cause:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err)); </span><br><span class="line">            <span class="keyword">return</span>; </span><br><span class="line">          &#125; </span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in setting the window to privacy mode.&#x27;</span>); </span><br><span class="line">        &#125;); </span><br><span class="line">      &#125; <span class="keyword">catch</span> (exception) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to set the window to privacy mode. Cause:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception)); </span><br><span class="line">      &#125; </span><br><span class="line">    &#125;) </span><br><span class="line">    windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123; </span><br><span class="line">      <span class="keyword">if</span> (err.<span class="property">code</span>) &#123; </span><br><span class="line">        hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>); </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">      &#125; </span><br><span class="line">      hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content. Data: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data) ?? <span class="string">&#x27;&#x27;</span>); </span><br><span class="line">    &#125;); </span><br><span class="line">  &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to display different views by clicking a button within a HarmonyOS page?  </span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@ohos.base&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HashMap</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkTS&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> map <span class="keyword">from</span> <span class="string">&#x27;@hms.core.map.map&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">customBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@BuilderParam</span> <span class="attr">customBuilderParam</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="variable language_">this</span>.<span class="property">customBuilder</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">customBuilderParam</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index45</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">keys</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">component1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;component0&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">component2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;component1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">component3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;component2&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">30</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;显示component1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keys</span> = <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;显示component2&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keys</span> = <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;显示component3&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">keys</span> = <span class="number">2</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keys</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">customBuilderParam</span>: <span class="variable language_">this</span>.<span class="property">component1</span> &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keys</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">customBuilderParam</span>: <span class="variable language_">this</span>.<span class="property">component2</span> &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">customBuilderParam</span>: <span class="variable language_">this</span>.<span class="property">component3</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. What class should be used to receive functions as parameters in HarmonyOS?  </span></span><br><span class="line"><span class="string">Define the method with the following code structure:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">get</span>(<span class="params"><span class="attr">url</span>: <span class="built_in">string</span>, <span class="attr">callback</span>: () =&gt; <span class="built_in">void</span></span>) &#123; &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to implement showLoading and showToast in HarmonyOS?  </span></span><br><span class="line"><span class="string">Use `</span>promptAction.<span class="property">openCustomDialog</span><span class="string">` for custom popups:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Index.ets </span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  changeDialogBuilder,</span><br><span class="line">  <span class="title class_">MyShowTest</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../common/HttpUtils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  customDialogBuilder</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./testProm&#x27;</span></span><br><span class="line"><span class="keyword">let</span> myShowTest = <span class="keyword">new</span> <span class="title class_">MyShowTest</span>()</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="title function_">changeDialogBuilder</span>(customDialogBuilder.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>).<span class="title function_">fontSize</span>(<span class="number">50</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          myShowTest.<span class="title function_">showTest</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// testProm.ets </span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">customDialogBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;正在加载中&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">  &#125;.<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#EEE&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HttpUtils.ets </span></span><br><span class="line"><span class="keyword">import</span> promptAction <span class="keyword">from</span> <span class="string">&#x27;@ohos.promptAction&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myDialogBuilder</span>: <span class="title class_">CustomBuilder</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">customDialogId</span>: <span class="built_in">number</span> = <span class="number">0</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">changeDialogBuilder</span>(<span class="params"><span class="attr">builder</span>: <span class="title class_">CustomBuilder</span></span>) &#123;</span><br><span class="line">  myDialogBuilder = builder</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyShowTest</span> &#123;</span><br><span class="line">  <span class="title function_">showTest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (myDialogBuilder === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    promptAction.<span class="title function_">openCustomDialog</span>(&#123;</span><br><span class="line">      <span class="attr">builder</span>: myDialogBuilder,</span><br><span class="line">      <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Center</span>,</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">dialogId</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      customDialogId = dialogId</span><br><span class="line">    &#125;) </span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Issues with immersive bottom status bar height changes in HarmonyOS  </span></span><br><span class="line"><span class="string">Inconsistent full-screen effects between page-level settings and JS settings:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>()).<span class="title function_">then</span>(<span class="function">(<span class="params">win</span>) =&gt;</span> &#123;</span><br><span class="line">  win.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">ExpandSafeArea2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isFullScreen</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">curWindow</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">TabArr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;首页&#x27;</span>, <span class="string">&#x27;推荐&#x27;</span>, <span class="string">&#x27;发现&#x27;</span>, <span class="string">&#x27;我的&#x27;</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">statusArr</span>: <span class="built_in">boolean</span>[] = []</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">bottomRectHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">marginBottom</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">statusArr</span> = [<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>]</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>()).<span class="title function_">then</span>(<span class="function">(<span class="params">win</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">curWindow</span> = win;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">curWindow</span>.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">      <span class="keyword">let</span> <span class="keyword">type</span> = <span class="variable language_">window</span>.<span class="property">AvoidAreaType</span>.<span class="property">TYPE_NAVIGATION_INDICATOR</span>; </span><br><span class="line">      <span class="keyword">let</span> avoidArea = win.<span class="title function_">getWindowAvoidArea</span>(<span class="keyword">type</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(avoidArea.<span class="property">bottomRect</span>))</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">bottomRectHeight</span> = <span class="title function_">px2vp</span>(avoidArea.<span class="property">bottomRect</span>.<span class="property">height</span>); </span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">handleFullScreen</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleFullScreen</span>(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">curWindow</span> || !<span class="variable language_">this</span>.<span class="property">statusArr</span>.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">curWindow</span>.<span class="title function_">setWindowLayoutFullScreen</span>(<span class="variable language_">this</span>.<span class="property">statusArr</span>[index])</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">marginBottom</span> = <span class="variable language_">this</span>.<span class="property">statusArr</span>[index] === <span class="literal">true</span> ? <span class="variable language_">this</span>.<span class="property">bottomRectHeight</span> : <span class="number">0</span> </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">tabBuilder</span>(<span class="params"><span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">targetIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(title)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === targetIndex ? <span class="string">&#x27;#1698CE&#x27;</span> : <span class="string">&#x27;#6B6B6B&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">TabArr</span>, <span class="function">(<span class="params"><span class="attr">tab</span>: <span class="built_in">string</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(tab + <span class="string">&#x27;沉浸状态：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">statusArr</span>[index]).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">          .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabBuilder</span>(tab, <span class="number">0</span>))</span><br><span class="line">          .<span class="title function_">onWillShow</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">handleFullScreen</span>(index)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">vertical</span>(<span class="literal">false</span>)</span><br><span class="line">      .<span class="title function_">clip</span>(<span class="literal">false</span>) </span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(&#123;</span><br><span class="line">      <span class="attr">bottom</span>: <span class="variable language_">this</span>.<span class="property">marginBottom</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/226-Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/226-Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Nested Components, Decorator Errors, Iterative List Refresh, Unit Conversion, Tabs Component Lifecycle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:04:08 / Modified: 09:50:43" itemprop="dateCreated datePublished" datetime="2025-06-27T00:04:08+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle"><a href="#Daily-HarmonyOS-Next-Knowledge-Nested-Components-Decorator-Errors-Iterative-List-Refresh-Unit-Conversion-Tabs-Component-Lifecycle" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Nested Components, Decorator Errors, Iterative List Refresh, Unit Conversion, Tabs Component Lifecycle"></a>[Daily HarmonyOS Next Knowledge] Nested Components, Decorator Errors, Iterative List Refresh, Unit Conversion, Tabs Component Lifecycle</h3><h4 id="1-Issues-with-Nested-Components-in-HarmonyOS-ArkUI"><a href="#1-Issues-with-Nested-Components-in-HarmonyOS-ArkUI" class="headerlink" title="1. Issues with Nested Components in HarmonyOS ArkUI"></a>1. Issues with Nested Components in HarmonyOS ArkUI</h4><ol>
<li>How to wrap a component?  </li>
<li>How to wrap the <code>build()</code> function of a <code>@Component</code>-decorated component to implement generic loading and error displays?</li>
</ol>
<p>Reference demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CommComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./CommComponent&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ComponentStatus</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./CommonEnums&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Index2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">componentStatus</span>: <span class="title class_">ComponentStatus</span> = <span class="title class_">ComponentStatus</span>.<span class="property">SUCCESS</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// Pass builder content from the caller</span></span><br><span class="line">      <span class="title class_">CommComponent</span>(&#123; <span class="attr">componentStatus</span>: <span class="variable language_">this</span>.<span class="property">componentStatus</span>, <span class="attr">builder</span>: <span class="variable language_">this</span>.<span class="property">successBuild</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">successBuild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;成功的展示&#x27;</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      .<span class="title function_">borderWidth</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CommComponent&#x27;s builder method (simplified)</span></span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">builder</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. Error with @Concurrent Decorator in HarmonyOS  </span></span><br><span class="line"><span class="string">The `</span><span class="meta">@Concurrent</span><span class="string">` decorator always reports an error:  </span></span><br><span class="line"><span class="string">&gt; &quot;Decorator function return type is ‘void | TypedPropertyDescriptor&lt;unknown&gt;’ but is expected to be ‘void’ or ‘any’. Type ‘TypedPropertyDescriptor&lt;unknown&gt;’ is not assignable to type ‘void’.&quot; &lt;ArkTSCheck&gt;  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> taskpool <span class="keyword">from</span> <span class="string">&#x27;@ohos.taskpool&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Concurrent</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testPromise</span>(<span class="params"><span class="attr">args1</span>: <span class="built_in">number</span>, <span class="attr">args2</span>: <span class="built_in">number</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt;(<span class="function">(<span class="params">testFuncA, testFuncB</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">testFuncA</span>(args1 + args2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">FCDemoTest</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="attr">instance</span>: <span class="title class_">FCDemoTest</span> = <span class="keyword">new</span> <span class="title class_">FCDemoTest</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">checkInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">task1</span>: taskpool.<span class="property">Task</span> = <span class="keyword">new</span> taskpool.<span class="title class_">Task</span>(testPromise, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    taskpool.<span class="title function_">execute</span>(task1).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">d</span>: <span class="built_in">object</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;task1 res is: &quot;</span> + d)</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">e</span>: <span class="built_in">object</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;task1 catch e: &quot;</span> + e)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Refresh Issues with ForEach Lists in HarmonyOS  </span></span><br><span class="line"><span class="string">The publish time in a list does not update after refreshing because the data source remains identical. However, the display time is calculated as a difference between the current time and the publish time (e.g., &quot;just now&quot;, &quot;2 minutes ago&quot;). Since `</span><span class="title class_">ForEach</span><span class="string">` only checks if the data source changes, the display does not update.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. Add the time difference to the data source, update it during refresh, and use it as the key in `</span>keyGenerator<span class="string">`.  </span></span><br><span class="line"><span class="string">2. Use a custom key generator with a dynamic value (e.g., timestamp) to force updates.  </span></span><br><span class="line"><span class="string">3. Toggle between two identical lists to trigger re-rendering.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">one</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">two</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">two</span>) &#123;</span><br><span class="line">            <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">one</span> &#125;)</span><br><span class="line">              .<span class="title function_">enabled</span>(!<span class="variable language_">this</span>.<span class="property">two</span>)</span><br><span class="line">              .<span class="title function_">onChange</span>(<span class="function">(<span class="params">isOn</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">one</span> = isOn;</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">one</span> &#125;)</span><br><span class="line">              .<span class="title function_">enabled</span>(!<span class="variable language_">this</span>.<span class="property">two</span>)</span><br><span class="line">              .<span class="title function_">onChange</span>(<span class="function">(<span class="params">isOn</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">one</span> = isOn;</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">            .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">          <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Switch</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">two</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">isOn</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">two</span> = isOn;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&quot;25vp&quot;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&#x27;24vp&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;24vp&#x27;</span> &#125;)</span><br><span class="line">      .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Unit Conversion for RenderNode in HarmonyOS  </span></span><br><span class="line"><span class="string">How to convert between units (e.g., vp and px) to align `</span>drawRect<span class="string">` dimensions with the frame?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Unit conversion reference:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ArkUI provides 4 pixel units, with vp as the base unit:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Unit | Description |</span></span><br><span class="line"><span class="string">| :-- | :-- |</span></span><br><span class="line"><span class="string">| px | Physical screen pixels |</span></span><br><span class="line"><span class="string">| vp | Screen density-dependent pixels (default unit if unspecified). &lt;br&gt;**Note**: The vp-to-px ratio depends on screen density. |</span></span><br><span class="line"><span class="string">| fp | Font pixels (scale with system font size) |</span></span><br><span class="line"><span class="string">| lpx | Logical viewport pixels (ratio of actual to logical screen width, default designWidth=720) |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Conversion APIs:  </span></span><br><span class="line"><span class="string">| Method | Description |</span></span><br><span class="line"><span class="string">| :-- | :-- |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">vp2px</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert vp to px |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">px2vp</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert px to vp |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">fp2px</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert fp to px |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">px2fp</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert px to fp |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">lpx2px</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert lpx to px |</span></span><br><span class="line"><span class="string">| `</span><span class="title function_">px2lpx</span>(<span class="attr">value</span>: <span class="built_in">number</span>): <span class="built_in">number</span><span class="string">` | Convert px to lpx |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to Ensure a Tab Page Runs Code Every Time it Appears in HarmonyOS? (onPageShow Not Triggered)  </span></span><br><span class="line"><span class="string">The `</span>onPageShow<span class="string">` lifecycle method does not trigger when switching tabs. Instead, use the component-level `</span><span class="title function_">aboutToAppear</span>()<span class="string">` method.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Recommended approach**:  </span></span><br><span class="line"><span class="string">1. Use `</span><span class="title function_">onTabBarClick</span>(<span class="attr">event</span>: <span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>)<span class="string">` in the parent component to track the active tab index.  </span></span><br><span class="line"><span class="string">2. Pass the active index to child components via `</span><span class="meta">@State</span><span class="string">` and `</span><span class="meta">@Props</span><span class="string">`.  </span></span><br><span class="line"><span class="string">3. Use `</span><span class="meta">@Watch</span><span class="string">` in child components to detect index changes and call `</span><span class="title function_">showPage</span>()<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example implementation:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Parent component</span></span><br><span class="line"><span class="title class_">Tabs</span>() &#123;</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="title class_">ChildComponent</span>(&#123; <span class="attr">activeTabIndex</span>: $currentTabIndex &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">onTabBarClick</span>(<span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentTabIndex</span> = index;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Child component</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ChildComponent</span> &#123;</span><br><span class="line">  <span class="meta">@Props</span> <span class="attr">activeTabIndex</span>: <span class="built_in">number</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Watch</span>(<span class="string">&#x27;onTabIndexChange&#x27;</span>)</span><br><span class="line">  <span class="title function_">onTabIndexChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">showPage</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">showPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Code to run when tab appears</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/225-Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/225-Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Drawer Effect, Tree Component, Offscreen Rendering, Context Acquisition, Tab Lifecycle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:02:55 / Modified: 00:03:17" itemprop="dateCreated datePublished" datetime="2025-06-27T00:02:55+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle"><a href="#Daily-HarmonyOS-Next-Knowledge-Drawer-Effect-Tree-Component-Offscreen-Rendering-Context-Acquisition-Tab-Lifecycle" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Drawer Effect, Tree Component, Offscreen Rendering, Context Acquisition, Tab Lifecycle"></a>[Daily HarmonyOS Next Knowledge] Drawer Effect, Tree Component, Offscreen Rendering, Context Acquisition, Tab Lifecycle</h3><h4 id="1-How-to-implement-a-drawer-effect-control-in-HarmonyOS"><a href="#1-How-to-implement-a-drawer-effect-control-in-HarmonyOS" class="headerlink" title="1. How to implement a drawer effect control in HarmonyOS?"></a>1. How to implement a drawer effect control in HarmonyOS?</h4><p>Use a semi-modal sheet to achieve the drawer effect. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#%E7%A4%BA%E4%BE%8B">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#%E7%A4%BA%E4%BE%8B</a>  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct SheetTransitionExample &#123;
  @State isShow: boolean = false
  @State sheetHeight: number = 300;

  @Builder
  myBuilder() &#123;
    Column() &#123;
      Button(&quot;change height&quot;)
        .margin(10)
        .fontSize(20)
        .onClick(() =&gt; &#123;
          this.sheetHeight = 500;
        &#125;)

      Button(&quot;Set Illegal height&quot;)
        .margin(10)
        .fontSize(20)
        .onClick(() =&gt; &#123;
          this.sheetHeight = -1;
        &#125;)

      Button(&quot;close modal 1&quot;)
        .margin(10)
        .fontSize(20)
        .onClick(() =&gt; &#123;
          this.isShow = false;
        &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;

  build() &#123;
    Column() &#123;
      Button(&quot;transition modal 1&quot;)
        .onClick(() =&gt; &#123;
          this.isShow = true
        &#125;)
        .fontSize(20)
        .margin(10)
        .bindSheet($$this.isShow, this.myBuilder(), &#123;
          height: this.sheetHeight,
          backgroundColor: Color.Green,
          onWillAppear: () =&gt; &#123;
            console.log(&quot;BindSheet onWillAppear.&quot;)
          &#125;,
          onAppear: () =&gt; &#123;
            console.log(&quot;BindSheet onAppear.&quot;)
          &#125;,
          onWillDisappear: () =&gt; &#123;
            console.log(&quot;BindSheet onWillDisappear.&quot;)
          &#125;,
          onDisappear: () =&gt; &#123;
            console.log(&quot;BindSheet onDisappear.&quot;)
          &#125;
        &#125;)
    &#125;
    .justifyContent(FlexAlign.Center)
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p>Effect diagram:<br>![[【每日学点HarmonyOS Next Knowledge】25.02.25.gif]]  </p>
<p>Another approach combines overlay attributes with the Panel container. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-panel-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-panel-V5</a><br>The Panel is a scrollable panel that provides a lightweight content display window for easy switching between different sizes.  </p>
<h4 id="2-How-to-customize-Cell-content-in-HarmonyOS-TreeView"><a href="#2-How-to-customize-Cell-content-in-HarmonyOS-TreeView" class="headerlink" title="2. How to customize Cell content in HarmonyOS TreeView?"></a>2. How to customize Cell content in HarmonyOS TreeView?</h4><ol>
<li>Customize Cell height, text color, font, spacing, and show&#x2F;hide the right arrow button in TreeView.  </li>
<li>Implement a delete button when swiping right on a Cell.  </li>
<li>Implement Cell selection with circular radio buttons at the start of each Cell.</li>
</ol>
<ul>
<li>1: TreeView does not currently support custom node styles.  </li>
<li>2: Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-listitem-V5#ZH-CN_TOPIC_0000001930676593__swipeaction9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-listitem-V5#ZH-CN_TOPIC_0000001930676593__swipeaction9</a>  </li>
<li>3: Custom styles are required for implementation.</li>
</ul>
<h4 id="3-The-ImageBitmap-generated-by-offscreen-rendering-cannot-be-displayed-using-CanvasRenderingContext2D-drawImage-in-HarmonyOS"><a href="#3-The-ImageBitmap-generated-by-offscreen-rendering-cannot-be-displayed-using-CanvasRenderingContext2D-drawImage-in-HarmonyOS" class="headerlink" title="3. The ImageBitmap generated by offscreen rendering cannot be displayed using CanvasRenderingContext2D.drawImage() in HarmonyOS?"></a>3. The ImageBitmap generated by offscreen rendering cannot be displayed using CanvasRenderingContext2D.drawImage() in HarmonyOS?</h4><p>When using CanvasRenderingContext2D.drawImage() to render an ImageBitmap generated by OffscreenCanvas, it may not display. Official examples recommend using CanvasRenderingContext2D.transferFromImageBitmap() instead, as drawImage() may fail to display the content.  </p>
<h4 id="4-The-context-obtained-in-entryAbility’s-onWindowStageCreate-is-null-in-HarmonyOS"><a href="#4-The-context-obtained-in-entryAbility’s-onWindowStageCreate-is-null-in-HarmonyOS" class="headerlink" title="4. The context obtained in entryAbility’s onWindowStageCreate is null in HarmonyOS?"></a>4. The context obtained in entryAbility’s onWindowStageCreate is null in HarmonyOS?</h4><p>The getContext(component?: Object): Context method requires a @Component-decorated page as a parameter, which is not supported in entryAbility. In an ability, use this.context directly to obtain the context. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-getcontext-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-getcontext-V5</a>  </p>
<h4 id="5-The-Entry-decorated-component-in-HarmonyOS-does-not-trigger-the-onPageShow-method"><a href="#5-The-Entry-decorated-component-in-HarmonyOS-does-not-trigger-the-onPageShow-method" class="headerlink" title="5. The @Entry-decorated component in HarmonyOS does not trigger the onPageShow method?"></a>5. The @Entry-decorated component in HarmonyOS does not trigger the onPageShow method?</h4><p>When an @Entry-decorated component is embedded in Tabs, onPageShow is not triggered. Tabs treat the component as a regular component (even with @Entry), so use aboutToAppear instead.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/224-Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/224-Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Pull-up/Pull-down Actions, Image Preview, Component Margins, this Reference, SVG Rotation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 00:01:49 / Modified: 00:02:05" itemprop="dateCreated datePublished" datetime="2025-06-27T00:01:49+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation"><a href="#Daily-HarmonyOS-Next-Knowledge-Pull-up-Pull-down-Actions-Image-Preview-Component-Margins-this-Reference-SVG-Rotation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Pull-up&#x2F;Pull-down Actions, Image Preview, Component Margins, this Reference, SVG Rotation"></a>[Daily HarmonyOS Next Knowledge] Pull-up&#x2F;Pull-down Actions, Image Preview, Component Margins, this Reference, SVG Rotation</h3><h4 id="1-How-to-implement-pull-up-refresh-in-HarmonyOS-including-API-calls-and-animation-pull-down-refresh-is-similar"><a href="#1-How-to-implement-pull-up-refresh-in-HarmonyOS-including-API-calls-and-animation-pull-down-refresh-is-similar" class="headerlink" title="1. How to implement pull-up refresh in HarmonyOS, including API calls and animation (pull-down refresh is similar)?"></a>1. How to implement pull-up refresh in HarmonyOS, including API calls and animation (pull-down refresh is similar)?</h4><p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5</a>  </p>
<p>The <code>Refresh</code> component is a container that supports pull-down operations and displays refresh animations.  </p>
<h4 id="2-How-to-implement-image-preview-in-HarmonyOS"><a href="#2-How-to-implement-image-preview-in-HarmonyOS" class="headerlink" title="2. How to implement image preview in HarmonyOS?"></a>2. How to implement image preview in HarmonyOS?</h4><p>It is recommended to use the <code>Image</code> component, which supports rendering local and network images. Refer to: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/imageviewer">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/imageviewer</a>  </p>
<p><strong>Image preview features</strong>:  </p>
<ol>
<li>Pinch with two fingers to zoom.  </li>
<li>Double-tap to toggle between zoomed and default states.  </li>
<li>Slide to view different parts of the image in zoomed mode.</li>
</ol>
<p><strong>Implementation approach</strong>:  </p>
<ol>
<li>Use <code>matrix</code> for zooming:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="attr">matrix</span>: matrix4.<span class="property">Matrix4Transit</span> = matrix4.<span class="title function_">identity</span>().<span class="title function_">copy</span>();</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">transform</span>(<span class="variable language_">this</span>.<span class="property">matrix</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Use `</span>offset<span class="string">` for positioning:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@State</span> <span class="attr">imageOffsetInfo</span>: <span class="title class_">OffsetModel</span> = <span class="keyword">new</span> <span class="title class_">OffsetModel</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">offset</span>(&#123;</span><br><span class="line">        <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">imageOffsetInfo</span>.<span class="property">currentX</span>,</span><br><span class="line">        <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">imageOffsetInfo</span>.<span class="property">currentY</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Set `</span>objectFit<span class="string">` to `</span><span class="title class_">Cover</span><span class="string">` to maintain aspect ratio and allow overflow:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. Precompute image info and set default size with `</span>width/height<span class="string">` and `</span>aspectRatio<span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">initCurrentImageInfo</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">matrix</span> = matrix4.<span class="title function_">identity</span>().<span class="title function_">copy</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">imageSource</span>: image.<span class="property">ImageSource</span> = image.<span class="title function_">createImageSource</span>(<span class="variable language_">this</span>.<span class="property">imageUri</span>);</span><br><span class="line">    imageSource.<span class="title function_">getImageInfo</span>(<span class="number">0</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">data</span>: image.<span class="title class_">ImageInfo</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imageWHRatio</span> = data.<span class="property">size</span>.<span class="property">width</span> / data.<span class="property">size</span>.<span class="property">height</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imageDefaultSize</span> = <span class="variable language_">this</span>.<span class="title function_">calcImageDefaultSize</span>(<span class="variable language_">this</span>.<span class="property">imageWHRatio</span>, windowSizeManager.<span class="title function_">get</span>());</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">imageDefaultSize</span>.<span class="property">width</span> === windowSizeManager.<span class="title function_">get</span>().<span class="property">width</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fitWH</span> = <span class="string">&quot;width&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fitWH</span> = <span class="string">&quot;height&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imageScaleInfo</span>.<span class="property">maxScaleValue</span> += <span class="variable language_">this</span>.<span class="property">fitWH</span> === <span class="string">&quot;width&quot;</span> ? </span><br><span class="line">            (windowSizeManager.<span class="title function_">get</span>().<span class="property">height</span> / <span class="variable language_">this</span>.<span class="property">imageDefaultSize</span>.<span class="property">height</span>) : </span><br><span class="line">            (windowSizeManager.<span class="title function_">get</span>().<span class="property">width</span> / <span class="variable language_">this</span>.<span class="property">imageDefaultSize</span>.<span class="property">width</span>);</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[error][getImageInfo]<span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    imageSource.<span class="title function_">createPixelMap</span>().<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">data</span>: image.<span class="title class_">PixelMap</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imagePixelMap</span> = data;</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[error][createPixelMap]<span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePixelMap</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">fitWH</span> === <span class="string">&quot;width&quot;</span> ? $r(<span class="string">&quot;app.string.image_default_width&quot;</span>) : <span class="literal">undefined</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">fitWH</span> === <span class="string">&quot;height&quot;</span> ? $r(<span class="string">&quot;app.string.image_default_height&quot;</span>) : <span class="literal">undefined</span>)</span><br><span class="line">    .<span class="title function_">aspectRatio</span>(<span class="variable language_">this</span>.<span class="property">imageWHRatio</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to get the padding value of a component in HarmonyOS?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">const</span> <span class="attr">TEST_TAG</span>: <span class="built_in">string</span> = <span class="string">&quot;FrameNode&quot;</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;我的测试&#x27;</span>)</span><br><span class="line">        .<span class="title function_">key</span>(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: <span class="string">&#x27;10vp&#x27;</span>,</span><br><span class="line">          <span class="attr">right</span>: <span class="string">&#x27;20vp&#x27;</span>,</span><br><span class="line">          <span class="attr">bottom</span>: <span class="string">&#x27;30vp&#x27;</span>,</span><br><span class="line">          <span class="attr">left</span>: <span class="string">&#x27;40vp&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;获取padding&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> frameNode = <span class="variable language_">this</span>.<span class="title function_">getUIContext</span>().<span class="title function_">getFrameNodeById</span>(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">          <span class="keyword">let</span> userConfigPadding = frameNode?.<span class="title function_">getUserConfigPadding</span>();</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">TEST_TAG</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(userConfigPadding));</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Can&#x27;t get `</span><span class="variable language_">this</span><span class="string">` in HarmonyOS LiveEventBus?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LiveEventBus</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/liveeventbus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/liveeventbus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Lifecycle</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/liveeventbus&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">KEY_TEST_CLOSE_ALL_PAGE</span> = <span class="string">&quot;key_test_close_all_page&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(&#123; <span class="attr">routeName</span>: <span class="string">&quot;EditorPage&quot;</span> &#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">EditorPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">mLifecycle</span>?: <span class="title class_">Lifecycle</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getLifecycle</span>(): <span class="title class_">Lifecycle</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">mLifecycle</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">mLifecycle</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Lifecycle</span>(<span class="title class_">MState</span>.<span class="property">STARTED</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Create lifecycle-aware object</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">mLifecycle</span> = <span class="keyword">new</span> <span class="title class_">Lifecycle</span>(<span class="title class_">MState</span>.<span class="property">STARTED</span>)</span><br><span class="line">    <span class="comment">// Subscribe to messages</span></span><br><span class="line">    <span class="title class_">LiveEventBus</span></span><br><span class="line">      .<span class="property">get</span>&lt;<span class="built_in">boolean</span>&gt;(<span class="variable constant_">KEY_TEST_CLOSE_ALL_PAGE</span>)</span><br><span class="line">      .<span class="title function_">observe</span>(<span class="variable language_">this</span>, &#123;</span><br><span class="line">        <span class="attr">onChanged</span>: <span class="function">(<span class="params"><span class="attr">b</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to rotate an SVG icon in HarmonyOS?  </span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Image</span>($rawfile(<span class="string">&#x27;svgLevel.svg&#x27;</span>))</span><br><span class="line">  .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">  .<span class="title function_">rotate</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">z</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">angle</span>: <span class="number">180</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">317</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
