<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/17/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/515-Daily-HarmonyOS-Next-Knowledge-Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Modifier-Problems/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/515-Daily-HarmonyOS-Next-Knowledge-Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Modifier-Problems/" class="post-title-link" itemprop="url">515[Daily HarmonyOS Next Knowledge] Grid Drag Animation, Timer Control, Routing Selection Issues, State Modifier Problems</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:27:01 / Modified: 08:37:40" itemprop="dateCreated datePublished" datetime="2025-06-25T08:27:01+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-Learn-HarmonyOS-Next-Knowledge】Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Decoration-Problems"><a href="#【Daily-Learn-HarmonyOS-Next-Knowledge】Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Decoration-Problems" class="headerlink" title="【Daily Learn HarmonyOS Next Knowledge】Grid Drag Animation, Timer Control, Routing Selection Issues, State Decoration Problems"></a>【Daily Learn HarmonyOS Next Knowledge】Grid Drag Animation, Timer Control, Routing Selection Issues, State Decoration Problems</h3><h4 id="1-HarmonyOS-Grid-Drag-Animation-Issue"><a href="#1-HarmonyOS-Grid-Drag-Animation-Issue" class="headerlink" title="1. HarmonyOS Grid Drag Animation Issue"></a>1. HarmonyOS Grid Drag Animation Issue</h4><p>The following demo implements partial items that do not respond to dragging, but the animation has issues where items get squeezed together.  </p>
<pre><code class="language-typescript">// Refer to the following Demo  
@Entry  
@Component  
struct GridExample &#123;  
  @State numbers: string[] = []  
  scroller: Scroller = new Scroller()  
  layoutOptions1: GridLayoutOptions = &#123;  
    regularSize: [1, 1], // Only supports [1, 1]  
    irregularIndexes: [0], // The GridItem at index 0 occupies a full row  
  &#125;  
  @State text: string = &#39;drag&#39;  
  @Builder pixelMapBuilder() &#123; // Dragging style during the process  
    Column() &#123;  
      Text(this.text)  
        .fontSize(16)  
        .backgroundColor(0xF9CF93)  
        .width(80)  
        .height(80)  
        .textAlign(TextAlign.Center)  
    &#125;  
  &#125;  
  aboutToAppear() &#123;  
    for (let i = 1; i &lt;= 9; i++) &#123;  
      this.numbers.push(i + &#39;&#39;)  
    &#125;  
  &#125;  
  changeIndex(index1: number, index2: number) &#123; // Swap positions in the array  
    const temp = this.numbers[index1];  
    if (index1 &gt; index2) &#123;  
      this.numbers.splice(index2, 0, temp);  
      this.numbers.splice(index1 + 1, 1);  
    &#125; else &#123;  
      this.numbers.splice(index2 + 1, 0, temp);  
      this.numbers.splice(index1, 1);  
    &#125;  
  &#125;  
  build() &#123;  
    Column(&#123; space: 5 &#125;) &#123;  
      Grid(this.scroller, this.layoutOptions1) &#123;  
        ForEach(this.numbers, (day: string) =&gt; &#123;  
          GridItem() &#123;  
            if (day == &quot;1&quot;) &#123;  
              Text(day)  
                .fontSize(16)  
                .backgroundColor(0xF9CF93)  
                .width(&quot;100%&quot;)  
                .height(80)  
                .textAlign(TextAlign.Center)  
            &#125; else &#123;  
              Text(day)  
                .fontSize(16)  
                .backgroundColor(0xF9CF93)  
                .width(80)  
                .height(80)  
                .textAlign(TextAlign.Center)  
            &#125;  
          &#125;  
        &#125;)  
      &#125;  
      .columnsTemplate(&#39;1fr 1fr 1fr 1fr&#39;)  
      .columnsGap(10)  
      .rowsGap(10)  
      .onScrollIndex((first: number) =&gt; &#123;  
        console.info(first.toString())  
      &#125;)  
      .width(&#39;100%&#39;)  
      .backgroundColor(0xFAEEE0)  
      .height(300)  
      .supportAnimation(true)  
      .editMode(true) // Set whether Grid enters edit mode; in edit mode, GridItems inside can be dragged  
      .onItemDragStart((event: ItemDragInfo, itemIndex: number) =&gt; &#123; // Triggered when dragging the bound component for the first time  
        if (itemIndex == 0) &#123;  
          return;  
        &#125;  
        this.text = this.numbers[itemIndex]  
        return this.pixelMapBuilder() // Set the image displayed during dragging  
      &#125;)  
      .onItemDrop((event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; &#123; // The bound component can act as a drop target; when dragging stops within its bounds, this callback is triggered  
        // If isSuccess=false, the drop position is outside the grid; if insertIndex &gt; length, a new element event occurs  
        if (!isSuccess || insertIndex &gt;= this.numbers.length || insertIndex == 0) &#123;  
          return  
        &#125;  
        console.info(&#39;tag&#39; + itemIndex + &#39;&#39;, insertIndex + &#39;&#39;) // itemIndex: drag start position, insertIndex: drag insert position  
        this.changeIndex(itemIndex, insertIndex)  
      &#125;)  
    &#125;.width(&#39;100%&#39;).margin(&#123; top: 5 &#125;)  
  &#125;  
&#125;  
</code></pre>
<p><strong>Reference Demo:</strong>  </p>
<pre><code class="language-typescript">import curves from &#39;@ohos.curves&#39;  
// xxx.ets  
@Entry  
@Component  
struct GridItemExample &#123;  
  @State numbers: number[] = []  
  @State dragItem: number = -1  
  @State scaleItem: number = -1  
  @State item: number = -1  
  private dragRefOffsetx: number = 0  
  private dragRefOffsety: number = 0  
  @State offsetX: number = 0  
  @State offsetY: number = 0  
  private FIX_VP_X: number = 108  
  private FIX_VP_Y: number = 120  
  aboutToAppear() &#123;  
    for (let i = 1; i &lt;= 11; i++) &#123;  
      this.numbers.push(i)  
    &#125;  
  &#125;  
  itemMove(index: number, newIndex: number): void &#123;  
    console.info(&#39;index:&#39; + index + &#39; newIndex:&#39; + newIndex)  
    if (!this.isDraggable(newIndex)) &#123;  
      return  
    &#125;  
    let tmp = this.numbers.splice(index, 1)  
    this.numbers.splice(newIndex, 0, tmp[0])  
  &#125;  
  // Scroll down  
  down(index: number): void &#123;  
    // Specify fixed GridItems that do not respond to events  
    if (!this.isDraggable(index + 3)) &#123;  
      return  
    &#125;  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 3)  
  &#125;  
  // Scroll down (bottom-right corner empty)  
  down2(index: number): void &#123;  
    if (!this.isDraggable(index + 3)) &#123;  
      return  
    &#125;  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 3)  
  &#125;  
  // Scroll up  
  up(index: number): void &#123;  
    if (!this.isDraggable(index - 3)) &#123;  
      return  
    &#125;  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 3)  
  &#125;  
  // Scroll left  
  left(index: number): void &#123;  
    if (!this.isDraggable(index - 1)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.itemMove(index, index - 1)  
  &#125;  
  // Scroll right  
  right(index: number): void &#123;  
    if (!this.isDraggable(index + 1)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.itemMove(index, index + 1)  
  &#125;  
  // Scroll bottom-right  
  lowerRight(index: number): void &#123;  
    if (!this.isDraggable(index + 4)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 4)  
  &#125;  
  // Scroll top-right  
  upperRight(index: number): void &#123;  
    if (!this.isDraggable(index - 2)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 2)  
  &#125;  
  // Scroll bottom-left  
  lowerLeft(index: number): void &#123;  
    if (!this.isDraggable(index + 2)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 2)  
  &#125;  
  // Scroll top-left  
  upperLeft(index: number): void &#123;  
    if (!this.isDraggable(index - 4)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 4)  
  &#125;  
  isDraggable(index: number): boolean &#123;  
    console.info(&#39;index:&#39; + index)  
    return index &gt; 1  
  &#125;  
  build() &#123;  
    Column(&#123;space:10&#125;) &#123;  
      Column(&#123;space:5&#125;) &#123;  
        Text(&quot;Grid Drag Sorting Animation&quot;)  
        Text(&quot;Components 1 and 2 cannot be dragged&quot;)  
      &#125;  
      Grid() &#123;  
        ForEach(this.numbers, (item: number) =&gt; &#123;  
          GridItem() &#123;  
            Text(item + &#39;&#39;)  
              .fontSize(16)  
              .width(&#39;100%&#39;)  
              .textAlign(TextAlign.Center)  
              .height(100)  
              .borderRadius(10)  
              .backgroundColor(0xFFFFFF)  
              .shadow(this.scaleItem == item ? &#123;  
                radius: 70,  
                color: &#39;#15000000&#39;,  
                offsetX: 0,  
                offsetY: 0  
              &#125; : &#123;  
                radius: 0,  
                color: &#39;#15000000&#39;,  
                offsetX: 0,  
                offsetY: 0  
              &#125;)  
              .animation(&#123; curve: Curve.Sharp, duration: 300 &#125;)  
          &#125;  
          // Specify fixed GridItems that do not respond to events  
          .hitTestBehavior(this.isDraggable(this.numbers.indexOf(item)) ? HitTestMode.Default : HitTestMode.None)  
          .scale(&#123; x: this.scaleItem == item ? 1.05 : 1, y: this.scaleItem == item ? 1.05 : 1 &#125;)  
          .zIndex(this.dragItem == item ? 1 : 0)  
          .translate(this.dragItem == item ? &#123; x: this.offsetX, y: this.offsetY &#125; : &#123; x: 0, y: 0 &#125;)  
          .padding(10)  
          .gesture(  
            // The following combined gestures are recognized in sequence; if the long-press gesture event is not triggered properly, the drag gesture event will not be triggered  
            GestureGroup(GestureMode.Sequence,  
              LongPressGesture(&#123; repeat: true &#125;)  
                .onAction((event?: GestureEvent) =&gt; &#123;  
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;  
                    this.scaleItem = item  
                  &#125;)  
                &#125;)  
                .onActionEnd(() =&gt; &#123;  
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;  
                    this.scaleItem = -1  
                  &#125;)  
                &#125;),  
              PanGesture(&#123; fingers: 1, direction: null, distance: 0 &#125;)  
                .onActionStart(() =&gt; &#123;  
                  this.dragItem = item  
                  this.dragRefOffsetx = 0  
                  this.dragRefOffsety = 0  
                &#125;)  
                .onActionUpdate((event: GestureEvent) =&gt; &#123;  
                  this.offsetY = event.offsetY - this.dragRefOffsety  
                  this.offsetX = event.offsetX - this.dragRefOffsetx  
                  // console.log(&#39;X:&#39; + this.offsetX.toString())  
                  // console.log(&#39;Y:&#39; + this.offsetY.toString())  
                  animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;  
                    let index = this.numbers.indexOf(this.dragItem)  
                    if (this.offsetY &gt;= this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)  
                      &amp;&amp; ![8, 9, 10].includes(index)) &#123;  
                      // Scroll down  
                      this.down(index)  
                    &#125; else if (this.offsetY &lt;= -this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)  
                      &amp;&amp; ![0, 1, 2].includes(index)) &#123;  
                      // Scroll up  
                      this.up(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)  
                      &amp;&amp; ![2, 5, 8, 10].includes(index)) &#123;  
                      // Scroll right  
                      this.right(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)  
                      &amp;&amp; ![0, 3, 6, 9].includes(index)) &#123;  
                      // Scroll left  
                      this.left(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; ![2, 5, 7, 8, 9, 10].includes(index)) &#123;  
                      // Scroll bottom-right  
                      this.lowerRight(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 1, 2, 5, 8].includes(index)) &#123;  
                      // Scroll top-right  
                      this.upperRight(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 3, 6, 9, 10].includes(index)) &#123;  
                      // Scroll bottom-left  
                      this.lowerLeft(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 1, 2, 3, 6, 9].includes(index)) &#123;  
                      // Scroll top-left  
                      this.upperLeft(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; [7].includes(index)) &#123;  
                      // Scroll bottom-right (bottom-right corner empty)  
                      this.down2(index)  
                    &#125;  
</code></pre>
<h4 id="2-HarmonyOS-TextTimer-Usage-Issue"><a href="#2-HarmonyOS-TextTimer-Usage-Issue" class="headerlink" title="2. HarmonyOS TextTimer Usage Issue"></a>2. HarmonyOS TextTimer Usage Issue</h4><p>When using <code>TextTimer</code> as a countdown timer, how to set the starting time? For example, how to start counting from <code>00:01:20</code> (1 minute and 20 seconds)?  </p>
<p>The <code>count</code> property represents the initial countdown value (only valid when <code>isCountDown</code> is <code>true</code>), in milliseconds. The maximum value is <code>86400000</code> milliseconds (24 hours). When <code>0 &lt; count &lt; 86400000</code>, an example is as follows:  </p>
<pre><code class="language-typescript">@Entry  
@Component  
struct Index &#123;  
  textTimerController: TextTimerController = new TextTimerController()  
  @State format: string = &#39;mm:ss.SS&#39;  
  build() &#123;  
    Column() &#123;  
      TextTimer(&#123; isCountDown: true, count: 1200, controller: this.textTimerController &#125;)  
        .format(this.format)  
        .fontColor(Color.Black)  
        .fontSize(50)  
        .onTimer((utc: number, elapsedTime: number) =&gt; &#123;  
          console.info(&#39;textTimer notCountDown utc is：&#39; + utc + &#39;, elapsedTime: &#39; + elapsedTime)  
        &#125;)  
      Row() &#123;  
        Button(&quot;start&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.start()  
        &#125;)  
        Button(&quot;pause&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.pause()  
        &#125;)  
        Button(&quot;reset&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.reset()  
        &#125;)  
      &#125;  
    &#125;  
  &#125;  
&#125;  
</code></pre>
<h4 id="3-HarmonyOS-Navigation-If-onPop-is-Passed-When-A-Navigates-to-B-but-B-Calls-pop-Without-Passing-result-onPop-Is-Not-Triggered"><a href="#3-HarmonyOS-Navigation-If-onPop-is-Passed-When-A-Navigates-to-B-but-B-Calls-pop-Without-Passing-result-onPop-Is-Not-Triggered" class="headerlink" title="3. HarmonyOS Navigation: If onPop is Passed When A Navigates to B, but B Calls pop Without Passing result, onPop Is Not Triggered?"></a>3. HarmonyOS Navigation: If <code>onPop</code> is Passed When A Navigates to B, but B Calls <code>pop</code> Without Passing <code>result</code>, <code>onPop</code> Is Not Triggered?</h4><p>You can pass <code>null</code> when calling <code>pop</code> to trigger the <code>onPop</code> callback.  </p>
<h4 id="4-HarmonyOS-Routing-Management-Should-We-Use-router-or-Navigation"><a href="#4-HarmonyOS-Routing-Management-Should-We-Use-router-or-Navigation" class="headerlink" title="4. HarmonyOS Routing Management: Should We Use router or Navigation?"></a>4. HarmonyOS Routing Management: Should We Use <code>router</code> or <code>Navigation</code>?</h4><p>It is recommended to use <code>Navigation</code>. The <code>RouterModule</code> module includes global routing stack and routing table information. The routing stack is a <code>NavPathStack</code> object, which is bound to the <code>Navigation</code> component in <code>Entry.hap</code>. <code>RouterModule</code> manages the routing information of the <code>Navigation</code> component by holding the <code>NavPathStack</code>. The routing table <code>builderMap</code> is a <code>Map</code> structure, storing page component information in a key-value format, where the key is a custom unique route name, and the value is a <code>WrappedBuilder</code> object wrapping the corresponding page component. The implementation of <code>RouterModule</code> mainly includes the following steps:  </p>
<pre><code class="language-typescript">1. Define the routing table and routing stack.  
export class RouterModule &#123;  
  // WrappedBuilder supports encapsulating components described by @Builder as parameters for storage  
  static builderMap: Map&lt;string, WrappedBuilder&lt;[object]&gt;&gt; = new Map&lt;string, WrappedBuilder&lt;[object]&gt;&gt;();  
  // Initialize the routing stack, which needs to be associated with the Navigation component  
  static navPathStack: NavPathStack = new NavPathStack();  
&#125;  

2. Add routing registration and retrieval methods to the routing table. Business har modules register page components to be routed to `RouterModule` via the registration method.  
export class RouterModule &#123;  
  // ...  
  // Register a page component to the routing table. `builderName` is the route name, and `builder` is the `WrappedBuilder` object wrapping the page component  
  public static registerBuilder(builderName: string, builder: WrappedBuilder&lt;[object]&gt;): void &#123;  
    RouterModule.builderMap.set(builderName, builder);  
  &#125;  

  // Retrieve the specified page component from the routing table  
  public static getBuilder(builderName: string): WrappedBuilder&lt;[object]&gt; &#123;  
    const builder = RouterModule.builderMap.get(builderName);  
    if (!builder) &#123;  
      console.info(&#39;not found builder &#39; + builderName);  
    &#125;  
    return builder as WrappedBuilder&lt;[object]&gt;;  
  &#125;  
&#125;  
export class RouterModule &#123;  
  // ...  
  // Navigate to a specified page by retrieving it from the page stack  
  public static async push(harName: string, builderName: string): Promise&lt;void&gt; &#123;  
    // Dynamically import the har module where the page is located to avoid explicit dependencies between business har modules, enabling on-demand loading  
    await import(harName);  
    // Navigate via the routing stack method by route name  
    RouterModule.navPathStack.pushPathByName(builderName, null);  
  &#125;  
&#125;  
</code></pre>
<h4 id="5-HarmonyOS-Should-State-Decorated-Variables-Be-Mandatory-Initialized"><a href="#5-HarmonyOS-Should-State-Decorated-Variables-Be-Mandatory-Initialized" class="headerlink" title="5. HarmonyOS: Should @State-Decorated Variables Be Mandatory Initialized?"></a>5. HarmonyOS: Should <code>@State</code>-Decorated Variables Be Mandatory Initialized?</h4><p><code>@State</code>-decorated variables should not be mandatory initialized.  </p>
<p>Variables decorated with <code>@State</code>, like other decorated variables in declarative paradigms, are private and can only be accessed within the component. They must specify their type and local initialization upon declaration. Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-V5</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/514-Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/514-Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Cache Clearing, Popup Back Gesture Handling, Routing Configuration File Reading, Relative Layout Height Adaptation, Transparent Background Color</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:25:38 / Modified: 08:26:08" itemprop="dateCreated datePublished" datetime="2025-06-25T08:25:38+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color"><a href="#Daily-HarmonyOS-Next-Knowledge-Cache-Clearing-Popup-Back-Gesture-Handling-Routing-Configuration-File-Reading-Relative-Layout-Height-Adaptation-Transparent-Background-Color" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Cache Clearing, Popup Back Gesture Handling, Routing Configuration File Reading, Relative Layout Height Adaptation, Transparent Background Color"></a>[Daily HarmonyOS Next Knowledge] Cache Clearing, Popup Back Gesture Handling, Routing Configuration File Reading, Relative Layout Height Adaptation, Transparent Background Color</h3><h4 id="1-Does-HarmonyOS-have-a-method-to-clear-cache"><a href="#1-Does-HarmonyOS-have-a-method-to-clear-cache" class="headerlink" title="1. Does HarmonyOS have a method to clear cache?"></a>1. Does HarmonyOS have a method to clear cache?</h4><p>Is there an API to directly clear the app’s cache?  </p>
<ol>
<li><p>Currently, there is no dedicated cache-clearing interface. Recommendations:  </p>
<ul>
<li>Use <code>storageStatistics.getCurrentBundleStats()</code> to query cache statistics.  </li>
<li>To clear file cache, obtain the cache directory via <code>context.cacheDir</code>, then use system file <code>fs</code> APIs to identify and delete files&#x2F;folders.  </li>
<li>Detailed usage: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-file-storage-statistics-V5">Query Cache</a></li>
</ul>
</li>
<li><p>Data that may not be cleared includes preferences, web preferences, and Web component caches:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-data-preferences-V5#clear">Clear Preferences</a>:  <ul>
<li><code>delete(key)</code>: Remove a specific key-value pair from the Preferences instance (use <code>flush</code> to persist, with async callback).  </li>
<li><code>clear()</code>: Remove all data from the Preferences instance (use <code>flush</code> to persist, with async callback).</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cookie-and-data-storage-mgmt-V5">Clear Web Cache</a></li>
</ul>
</li>
</ol>
<h4 id="2-How-to-handle-back-gestures-for-popups-in-HarmonyOS"><a href="#2-How-to-handle-back-gestures-for-popups-in-HarmonyOS" class="headerlink" title="2. How to handle back gestures for popups in HarmonyOS?"></a>2. How to handle back gestures for popups in HarmonyOS?</h4><p>Need to implement a universal pop-up layer system across all pages in Taobao-like apps, involving back gesture handling for pop-up layers.  </p>
<p>Aim to manage back gestures for pop-up layers, actively intercepting and determining whether to respond. For example:  </p>
<ul>
<li>Allow users to exit only the topmost popup via back gesture.  </li>
<li>Allow users to exit the entire page via back gesture.</li>
</ul>
<p>Handle gesture interception by calling <code>onBackPressed</code> in the root container <code>NavDestination</code> of the subpage.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navdestination-V5#ZH-CN_TOPIC_0000001884757826__onbackpressed10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navdestination-V5#ZH-CN_TOPIC_0000001884757826__onbackpressed10</a>  </p>
<h4 id="3-How-to-read-the-router-map-json-file-in-HarmonyOS"><a href="#3-How-to-read-the-router-map-json-file-in-HarmonyOS" class="headerlink" title="3. How to read the router_map.json file in HarmonyOS?"></a>3. How to read the router_map.json file in HarmonyOS?</h4><p>After registering new system routes to the <code>router_map.json</code> file in the profile as per Navigation requirements, we need to extend the file by adding custom <code>itemName</code> for jump logic. However, using <code>$r(&quot;app.profile.router_map&quot;)</code> to read the file is prohibited. How to resolve this?  </p>
<p>Current limitation: <code>router_map.json</code> does not support custom configurations.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-basic-components-navigation.md#%E7%A4%BA%E4%BE%8B2">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-basic-components-navigation.md#%E7%A4%BA%E4%BE%8B2</a>  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example router_map.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routerMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;testPage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pageSourceFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main/ets/router/TradeTestPage.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;buildFunction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;getTestPage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;this is PageOne&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;itemName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1-21-13-1-3&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">```json</span><br><span class="line"><span class="comment">// Configuration in module.json5</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routerMap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$profile:route_map&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// route_map.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routerMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pageOne&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pageSourceFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main/ets/pages/PageOne.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;buildFunction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PageOneBuilder&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;this is pageOne&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pageTwo&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pageSourceFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main/ets/pages/PageTwo.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;buildFunction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PageTwoBuilder&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">4.</span> How to achieve height adaptation for RelativeContainer in HarmonyOS?  </span><br><span class="line">When `RelativeContainer` does not set `height`<span class="punctuation">,</span> it occupies the full screen. Which properties should be set for height adaptation to child components?  </span><br><span class="line"></span><br><span class="line">`RelativeContainer` supports width/height adaptation to child components by setting `width`/`height` to `auto`<span class="punctuation">,</span> but with constraints<span class="punctuation">:</span>  </span><br><span class="line">- If `width<span class="punctuation">:</span> auto` is set and child components anchor to the container horizontally<span class="punctuation">,</span> `auto` may not take effect (similar for vertical direction).  </span><br><span class="line">Reference<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5  </span></span><br><span class="line"></span><br><span class="line">Demo<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct MyRelativeContainer <span class="punctuation">&#123;</span></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column() <span class="punctuation">&#123;</span></span><br><span class="line">      Row() <span class="punctuation">&#123;</span></span><br><span class="line">        Text(&#x27;Width and height auto-adaptive&#x27;)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">      RelativeContainer() <span class="punctuation">&#123;</span></span><br><span class="line">        Row()</span><br><span class="line">          .width(<span class="number">100</span>)</span><br><span class="line">          .height(<span class="number">100</span>)</span><br><span class="line">          .backgroundColor(<span class="string">&quot;#FF3333&quot;</span>)</span><br><span class="line">          .alignRules(<span class="punctuation">&#123;</span><span class="punctuation">&#125;</span>)</span><br><span class="line">          .id(<span class="string">&quot;row1&quot;</span>)</span><br><span class="line">        Row()</span><br><span class="line">          .width(<span class="number">100</span>)</span><br><span class="line">          .height(<span class="number">100</span>)</span><br><span class="line">          .backgroundColor(<span class="string">&quot;#FFCC00&quot;</span>)</span><br><span class="line">          .alignRules(<span class="punctuation">&#123;</span></span><br><span class="line">            top<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> VerticalAlign.Top <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            left<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> HorizontalAlign.End <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">          .id(<span class="string">&quot;row2&quot;</span>)</span><br><span class="line">        Row()</span><br><span class="line">          .height(<span class="number">100</span>)</span><br><span class="line">          .width(<span class="number">100</span>)</span><br><span class="line">          .backgroundColor(<span class="string">&quot;#FF6633&quot;</span>)</span><br><span class="line">          .alignRules(<span class="punctuation">&#123;</span></span><br><span class="line">            left<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> HorizontalAlign.Start <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            top<span class="punctuation">:</span> <span class="punctuation">&#123;</span> anchor<span class="punctuation">:</span> <span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> align<span class="punctuation">:</span> VerticalAlign.Bottom <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span>)</span><br><span class="line">          .id(<span class="string">&quot;row3&quot;</span>)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line">      .height(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line">      .margin(<span class="punctuation">&#123;</span> left<span class="punctuation">:</span> <span class="number">50</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">      .border(<span class="punctuation">&#123;</span> width<span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> color<span class="punctuation">:</span> <span class="string">&quot;#6699FF&quot;</span> <span class="punctuation">&#125;</span>)</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">5.</span> How to set transparent background color in HarmonyOS?  </span><br><span class="line">How to apply transparency to background colors? For example<span class="punctuation">:</span>  </span><br><span class="line">Using `.opacity(<span class="number">0.8</span>)` on a `Text` component affects both the background and text color transparency.  </span><br><span class="line"></span><br><span class="line">Use `rgba` to set background transparency instead of `opacity`<span class="punctuation">:</span>  </span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct ScrollExample <span class="punctuation">&#123;</span></span><br><span class="line">  scroller<span class="punctuation">:</span> Scroller = new Scroller();</span><br><span class="line">  private arr<span class="punctuation">:</span> number<span class="punctuation">[</span><span class="punctuation">]</span> = <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">]</span>;</span><br><span class="line">  @State alpha<span class="punctuation">:</span> string = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">  build() <span class="punctuation">&#123;</span></span><br><span class="line">    Column() <span class="punctuation">&#123;</span></span><br><span class="line">      Row() <span class="punctuation">&#123;</span></span><br><span class="line">        Text(&#x27;Test Content&#x27;)</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">      .height(<span class="number">100</span>)</span><br><span class="line">      .backgroundColor(this.alpha);</span><br><span class="line">      Scroll(this.scroller) <span class="punctuation">&#123;</span></span><br><span class="line">        Column() <span class="punctuation">&#123;</span></span><br><span class="line">          ForEach(this.arr<span class="punctuation">,</span> (item) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">            Text(item.toString())</span><br><span class="line">              .width(&#x27;<span class="number">90</span>%&#x27;)</span><br><span class="line">              .height(<span class="number">150</span>)</span><br><span class="line">              .backgroundColor(<span class="number">0xFFFFFF</span>)</span><br><span class="line">              .borderRadius(<span class="number">15</span>)</span><br><span class="line">              .fontSize(<span class="number">16</span>)</span><br><span class="line">              .textAlign(TextAlign.Center)</span><br><span class="line">              .margin(<span class="punctuation">&#123;</span> top<span class="punctuation">:</span> <span class="number">10</span> <span class="punctuation">&#125;</span>);</span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span> item =&gt; item);</span><br><span class="line">        <span class="punctuation">&#125;</span>.width(&#x27;<span class="number">100</span>%&#x27;);</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">      .width(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">      .height(&#x27;<span class="number">100</span>%&#x27;)</span><br><span class="line">      .onScroll((xOffset<span class="punctuation">:</span> number<span class="punctuation">,</span> yOffset<span class="punctuation">:</span> number) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">        let offset = this.scroller.currentOffset().yOffset;</span><br><span class="line">        if (offset &gt;= <span class="number">150</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          this.alpha = &#x27;rgba(<span class="number">255</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0.8</span>)&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span> else if (offset &lt;= <span class="number">0</span>) <span class="punctuation">&#123;</span></span><br><span class="line">          this.alpha = &#x27;rgba(<span class="number">255</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0.6</span>)&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span> else <span class="punctuation">&#123;</span></span><br><span class="line">          this.alpha = &#x27;rgba(<span class="number">255</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0.3</span>)&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span>);</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/513-Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/513-Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Back, Anti-Shake & Throttle, Navigation Without Named Routes, Single-Page Full Screen, Removing Pages from Route Stack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:24:02 / Modified: 08:24:33" itemprop="dateCreated datePublished" datetime="2025-06-25T08:24:02+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Back-Anti-Shake-Throttle-Navigation-Without-Named-Routes-Single-Page-Full-Screen-Removing-Pages-from-Route-Stack" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Back, Anti-Shake &amp; Throttle, Navigation Without Named Routes, Single-Page Full Screen, Removing Pages from Route Stack"></a>[Daily HarmonyOS Next Knowledge] Routing Back, Anti-Shake &amp; Throttle, Navigation Without Named Routes, Single-Page Full Screen, Removing Pages from Route Stack</h3><h4 id="1-HarmonyOS-How-to-trigger-page-refresh-with-State-annotated-data-when-navigating-back-using-router-back"><a href="#1-HarmonyOS-How-to-trigger-page-refresh-with-State-annotated-data-when-navigating-back-using-router-back" class="headerlink" title="1. HarmonyOS: How to trigger page refresh with @State-annotated data when navigating back using router.back()?"></a>1. HarmonyOS: How to trigger page refresh with @State-annotated data when navigating back using router.back()?</h4><p>Use <code>router.back(url, params)</code> to return to the previous page with parameters for data refresh.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-router-V5#routerback">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-router-V5#routerback</a>  </p>
<h4 id="2-HarmonyOS-How-to-implement-anti-shake-and-throttle-in-a-project"><a href="#2-HarmonyOS-How-to-implement-anti-shake-and-throttle-in-a-project" class="headerlink" title="2. HarmonyOS: How to implement anti-shake and throttle in a project?"></a>2. HarmonyOS: How to implement anti-shake and throttle in a project?</h4><p>For common scenarios like button clicks or API calls requiring debounce&#x2F;throttle:  </p>
<ul>
<li>Are there lodash-like debounce&#x2F;throttle functions in HarmonyOS?  </li>
<li>Should we use <code>timer</code> or <code>setInterval</code> for implementation? Are there performance issues?</li>
</ul>
<p>Throttle has minimal performance impact since it limits execution to once per specified period, preventing rapid consecutive clicks.  </p>
<p><strong>Debounce implementation demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct SearchDemo &#123;
  @State timeout: number = -1;

  build() &#123;
    Column() &#123;
      Text(&#39;Click&#39;)
        .fontSize(&#39;25fp&#39;)
        .fontColor(Color.White)
        .fontWeight(FontWeight.Bold)
        .borderRadius(15)
        .padding(8)
        .backgroundColor(Color.Blue)
        .onClick(() =&gt; &#123;
          this.debounce(this.setFinalInput, 3000);
        &#125;)
    &#125;
  &#125;

  debounce(fn: Function, wait: number = 300) &#123;
    if (this.timeout !== -1) &#123;
      clearTimeout(this.timeout);
    &#125;
    this.timeout = setTimeout(fn.bind(this), wait);
    console.log(&quot;zd--- ==timeout==&quot;, this.timeout);
  &#125;

  setFinalInput() &#123;
    console.log(&quot;zd--- setFinalInput this&quot;, JSON.stringify(this));
    // this.finalSearchInput = this.searchInput;
  &#125;
&#125;
</code></pre>
<p><strong>Throttle implementation demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct ListPage &#123;
  @State pageNumber: number = 1;
  @State running: boolean = false;
  @State list: number[] = [];

  aboutToAppear(): void &#123;
    for (let i = 1; i &lt;= 8; i++) &#123;
      this.list.push(i);
    &#125;
  &#125;

  getData() &#123;
    let number = this.list.length + 1;
    for (let i = number; i &lt;= 8 * this.pageNumber; i++) &#123;
      this.list.push(i);
    &#125;
    this.running = false;
    console.log(this.list.length.toString());
  &#125;

  @Builder
  ListItemBuilder(item: number) &#123;
    Row() &#123;
      Text(item.toString())
    &#125;
    .width(&#39;100%&#39;)
    .padding(50)
    .backgroundColor(Color.Pink)
  &#125;

  build() &#123;
    Column() &#123;
      List(&#123; space: 10 &#125;) &#123;
        ForEach(this.list, (item: number) =&gt; &#123;
          this.ListItemBuilder(item)
        &#125;, (item: number) =&gt; JSON.stringify(item))
      &#125;
      .padding(20)
      .edgeEffect(EdgeEffect.Spring)
      .onReachEnd(() =&gt; &#123;
        if (!this.running) &#123;
          this.running = true;
          this.pageNumber++;
          setTimeout(() =&gt; &#123;
            this.getData();
          &#125;, 2000);
        &#125;
      &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .alignItems(HorizontalAlign.Center)
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-Cannot-use-named-routes-directly-in-Navigation’s-navDestination"><a href="#3-HarmonyOS-Cannot-use-named-routes-directly-in-Navigation’s-navDestination" class="headerlink" title="3. HarmonyOS: Cannot use named routes directly in Navigation’s navDestination?"></a>3. HarmonyOS: Cannot use named routes directly in Navigation’s navDestination?</h4><p>Desired to directly display named route components in <code>navDestination</code> without manual definition:  </p>
<pre><code class="language-typescript">@Builder
function PageMap(name: string, param: object) &#123;
  if (name === WebViewPagesRouter.COMPONENT_WEBVIEW_PAGE) &#123;
    WebViewPage2(&#123; param: param &#125;)
  &#125;
&#125;
</code></pre>
<p>Current issue: Manually defining components in <code>navDestination</code> prevents lifecycle methods like <code>onPageShow</code> from working.  </p>
<p>Previously defined page with router:  </p>
<pre><code class="language-typescript">@Entry(&#123; routeName: WebViewPagesRouter.COMPONENT_WEBVIEW_PAGE &#125;)
@Component
export struct WebViewPage2 &#123;
&#125;
</code></pre>
<p><strong>Solution</strong>:<br>Starting from API version 12, Navigation supports dynamic routing using the system route table. Each module (HSP&#x2F;HAR) must configure a <code>router_map.json</code> file. During navigation, pass the page configuration name to <code>NavPactStack</code> methods. The system handles dynamic module loading, component creation, and route transition, achieving module decoupling.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5#ZH-CN_TOPIC_0000001935135741__%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5#ZH-CN_TOPIC_0000001935135741__%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E8%A1%A8</a>  </p>
<h4 id="4-HarmonyOS-Are-there-APIs-to-set-a-single-page-to-full-screen-hide-the-status-bar-or-hide-the-bottom-navigation-bar"><a href="#4-HarmonyOS-Are-there-APIs-to-set-a-single-page-to-full-screen-hide-the-status-bar-or-hide-the-bottom-navigation-bar" class="headerlink" title="4. HarmonyOS: Are there APIs to set a single page to full screen, hide the status bar, or hide the bottom navigation bar?"></a>4. HarmonyOS: Are there APIs to set a single page to full screen, hide the status bar, or hide the bottom navigation bar?</h4><p><strong>Reference</strong>: Safe Area<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5</a>  </p>
<p>The safe area is the default display region that avoids system areas like the status bar and navigation bar. Use <code>expandSafeArea</code> to extend component rendering beyond the safe area without altering layout. Configure keyboard avoidance with <code>setKeyboardAvoidMode</code>. For immersive effects where text (e.g., title bars) should not overlap non-safe areas, use <code>expandSafeArea</code> or <code>setWindowLayoutFullScreen</code>.  </p>
<h4 id="5-HarmonyOS-NavPathStack’s-removeByIndexes-API-does-not-support-silently-removing-non-top-pages-from-the-stack"><a href="#5-HarmonyOS-NavPathStack’s-removeByIndexes-API-does-not-support-silently-removing-non-top-pages-from-the-stack" class="headerlink" title="5. HarmonyOS: NavPathStack’s removeByIndexes API does not support silently removing non-top pages from the stack?"></a>5. HarmonyOS: NavPathStack’s removeByIndexes API does not support silently removing non-top pages from the stack?</h4><p>To remove specific subpages, pass the index(es) to <code>NavPathStack.removeByIndexes([1])</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#removebyindexes11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#removebyindexes11</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/512-Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/512-Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Navigation Issues, Icon Sliding Problems, Font Line Height Settings, Interrupting Infinite Loop Animations, Event Distribution</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:22:51 / Modified: 08:23:46" itemprop="dateCreated datePublished" datetime="2025-06-25T08:22:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Navigation-Issues-Icon-Sliding-Problems-Font-Line-Height-Settings-Interrupting-Infinite-Loop-Animations-Event-Distribution" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Navigation Issues, Icon Sliding Problems, Font Line Height Settings, Interrupting Infinite Loop Animations, Event Distribution"></a>[Daily HarmonyOS Next Knowledge] Routing Navigation Issues, Icon Sliding Problems, Font Line Height Settings, Interrupting Infinite Loop Animations, Event Distribution</h3><h4 id="1-HarmonyOS-Pushing-a-page-immediately-after-popping-causes-the-push-to-fail"><a href="#1-HarmonyOS-Pushing-a-page-immediately-after-popping-causes-the-push-to-fail" class="headerlink" title="1. HarmonyOS: Pushing a page immediately after popping causes the push to fail?"></a>1. HarmonyOS: Pushing a page immediately after popping causes the push to fail?</h4><p>If the first <code>push</code> and the second <code>push</code> target the same page (e.g., a customDialog), and <code>pop</code> and <code>push</code> are called consecutively in the first dialog, the system may not detect page changes and thus not trigger navigation. Recommendations:  </p>
<ol>
<li>Use <code>replace</code> instead of the second <code>push</code> if you want users to perceive page transitions.  </li>
<li>Refresh the customDialog page display if transitions are unnecessary.</li>
</ol>
<h4 id="2-HarmonyOS-How-to-allow-horizontal-but-block-vertical-scrolling-for-a-parent-component-in-ohos-MpChart"><a href="#2-HarmonyOS-How-to-allow-horizontal-but-block-vertical-scrolling-for-a-parent-component-in-ohos-MpChart" class="headerlink" title="2. HarmonyOS: How to allow horizontal but block vertical scrolling for a parent component in @ohos&#x2F;MpChart?"></a>2. HarmonyOS: How to allow horizontal but block vertical scrolling for a parent component in @ohos&#x2F;MpChart?</h4><p><strong>Consulting Description</strong>:<br>How to enable horizontal scrolling while disabling vertical scrolling for a parent component in @ohos&#x2F;MpChart? (<code>HitTestMode.Block</code> blocks both LineChart and parent scrolling in all directions.)  </p>
<p><strong>Scenario</strong>:<br>Child component (LineChart):  </p>
<pre><code class="language-typescript">build() &#123;
  Column() &#123;
    LineChart(&#123; model: this.line &#125;)
      .width(FULL)
      .height(CHART_HEIGHT)
      .hitTestBehavior(HitTestMode.Block)
  &#125;
&#125;
</code></pre>
<p>Parent component (Tabs):  </p>
<pre><code class="language-typescript">@Builder
TabsComponent() &#123;
  // tabs
  Tabs() &#123;
    // weight
    TabContent() &#123;
      Scroll() &#123;
        MineWeightComponent()
          .padding(&#123; top: 1, bottom: 120 &#125;)
      &#125;
      .height(FULL)
      .scrollBar(BarState.Off)
      .nestedScroll(&#123;
        scrollForward: NestedScrollMode.PARENT_FIRST,
        scrollBackward: NestedScrollMode.SELF_FIRST,
      &#125;)
    &#125;
    .tabBar(this.tabBuilder(0, CommonConstants.TAB_NAME_1))
</code></pre>
<p>Add <code>.hitTestBehavior(HitTestMode.None)</code> to the parent component to disable self-event handling while allowing child and sibling components to respond.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5</a><br>This property configures how components respond to touch events. During touch event processing, the ArkUI framework performs a hit test between the touch point and component regions to determine which components should handle the event. The <code>hitTestBehavior</code> property modifies this behavior, affecting event distribution.  </p>
<p><strong>Current Workaround</strong>:<br>Use <code>@Provide</code> and <code>@Consume</code> for state management. Capture <code>TouchType.Down</code> events in the child component to temporarily disable Tab scrolling, allowing the LineChart to handle gestures. Restore Tab scrolling after the gesture ends.  </p>
<p>Example code:  </p>
<pre><code class="language-typescript">// Parent component:
import &#123; Const &#125; from &#39;../common/constants/CommonConstants&#39;;
import &#123; MineWeightComponent &#125; from &#39;../view/MineWeightComponent&#39;;

@Entry
@Component
struct TabTest &#123;
  @Provide tabScrollable: boolean = true;

  build() &#123;
    RelativeContainer() &#123;
      Tabs() &#123;
        TabContent() &#123;
          Scroll() &#123;
            MineWeightComponent()
          &#125;
          .height(Const.FULL_PERCENT)
          .scrollBar(BarState.Off)
          .nestedScroll(&#123;
            scrollForward: NestedScrollMode.PARENT_FIRST,
            scrollBackward: NestedScrollMode.SELF_FIRST,
          &#125;)
        &#125;
        .tabBar(this.tabBuilder(0, &quot;TAB_1&quot;))
      &#125;
      // Bind tabScrollable
      .scrollable(this.tabScrollable)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;

// Child component:
@Component
export struct MineWeightComponent &#123;
  @Consume tabScrollable: boolean;
  //...

  build() &#123;
    Column() &#123;
      LineChart(&#123; model: this.model &#125;)
        .width(FULL)
        .height(400)
        .onTouch((event: TouchEvent) =&gt; &#123;
          // Modify parent Tab&#39;s scroll behavior based on touch events
          switch (event.type) &#123;
            case TouchType.Down:
              this.tabScrollable = false;
              break;
            case TouchType.Cancel:
              this.tabScrollable = true;
              break;
            case TouchType.Up:
              this.tabScrollable = true;
              break;
          &#125;
        &#125;)
      //...
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-How-to-set-font-line-height"><a href="#3-HarmonyOS-How-to-set-font-line-height" class="headerlink" title="3. HarmonyOS: How to set font line height?"></a>3. HarmonyOS: How to set font line height?</h4><p>The height is determined by the font, character content, TextStyle, and font size. There is no direct <code>set</code> method.<br>Reference: <code>heightScale</code><br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/_o_h___drawing___strut_style-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/_o_h___drawing___strut_style-V5</a>  </p>
<h4 id="4-HarmonyOS-How-to-interrupt-an-infinitely-looping-animation"><a href="#4-HarmonyOS-How-to-interrupt-an-infinitely-looping-animation" class="headerlink" title="4. HarmonyOS: How to interrupt an infinitely looping animation?"></a>4. HarmonyOS: How to interrupt an infinitely looping animation?</h4><p>For animations created with <code>animateTo</code>, use <code>animator.pause()</code> to stop them.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-animator-V5#pause">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-animator-V5#pause</a>  </p>
<h4 id="5-HarmonyOS-Updating-a-model-via-EventHub-does-not-trigger-page-refresh"><a href="#5-HarmonyOS-Updating-a-model-via-EventHub-does-not-trigger-page-refresh" class="headerlink" title="5. HarmonyOS: Updating a model via EventHub does not trigger page refresh?"></a>5. HarmonyOS: Updating a model via EventHub does not trigger page refresh?</h4><p>Directly calling model methods to update data triggers page refresh. However, updating data in a model after receiving an EventHub event updates the data but not the UI.  </p>
<p><strong>Explanation</strong>:<br>The <code>constructor</code> executes before the proxy object is created, so <code>@Observed</code> cannot detect changes made there. When a class is decorated with <code>@Observed</code>, a proxy wraps the class to intercept member variable changes. Changes made in the constructor bypass this proxy, so UI updates are not triggered.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%9C%A8observed%E8%A3%85%E9%A5%B0%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%BB%B6%E6%97%B6%E6%9B%B4%E6%94%B9%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%9C%A8observed%E8%A3%85%E9%A5%B0%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%BB%B6%E6%97%B6%E6%9B%B4%E6%94%B9%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/511-Daily-HarmonyOS-Next-Knowledge-List-Concatenation-Sliding-List-Spacing-Obtaining-Unique-Object-Identifiers-Node-Container-Usage-Examples-Navigation-Bar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/511-Daily-HarmonyOS-Next-Knowledge-List-Concatenation-Sliding-List-Spacing-Obtaining-Unique-Object-Identifiers-Node-Container-Usage-Examples-Navigation-Bar/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] List Concatenation Sliding, List Spacing, Obtaining Unique Object Identifiers, Node Container Usage Examples, Navigation Bar</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:21:34 / Modified: 08:21:56" itemprop="dateCreated datePublished" datetime="2025-06-25T08:21:34+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-List-Concatenation-Sliding-List-Spacing-Obtaining-Unique-Object-Identifiers-Node-Container-Usage-Examples-Navigation-Bar"><a href="#Daily-HarmonyOS-Next-Knowledge-List-Concatenation-Sliding-List-Spacing-Obtaining-Unique-Object-Identifiers-Node-Container-Usage-Examples-Navigation-Bar" class="headerlink" title="[Daily HarmonyOS Next Knowledge] List Concatenation Sliding, List Spacing, Obtaining Unique Object Identifiers, Node Container Usage Examples, Navigation Bar"></a>[Daily HarmonyOS Next Knowledge] List Concatenation Sliding, List Spacing, Obtaining Unique Object Identifiers, Node Container Usage Examples, Navigation Bar</h3><h4 id="1-HarmonyOS-List-Concatenation-Sliding-Issue-For-example-if-the-child-components-of-a-Column-are-3-Grids-how-to-enable-sliding-Nested-Scroll-did-not-work"><a href="#1-HarmonyOS-List-Concatenation-Sliding-Issue-For-example-if-the-child-components-of-a-Column-are-3-Grids-how-to-enable-sliding-Nested-Scroll-did-not-work" class="headerlink" title="1. HarmonyOS List Concatenation Sliding Issue: For example, if the child components of a Column are 3 Grids, how to enable sliding? Nested Scroll did not work."></a>1. HarmonyOS List Concatenation Sliding Issue: For example, if the child components of a Column are 3 Grids, how to enable sliding? Nested Scroll did not work.</h4><p>Do not set a height for the outer component. This allows the child component content to slide when it exceeds the height range. Refer to the following simple demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Scroll</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Grid</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`Component 1 Data Item <span class="subst">$&#123;item&#125;</span>`</span>);</span><br><span class="line">            &#125;.<span class="title function_">height</span>(<span class="number">300</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>);</span><br><span class="line">        <span class="title class_">Grid</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`Component 2 Data Item <span class="subst">$&#123;item&#125;</span>`</span>);</span><br><span class="line">            &#125;.<span class="title function_">height</span>(<span class="number">300</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>);</span><br><span class="line">        <span class="title class_">Grid</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`Component 3 Data Item <span class="subst">$&#123;item&#125;</span>`</span>);</span><br><span class="line">            &#125;.<span class="title function_">height</span>(<span class="number">300</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      <span class="comment">// .height(&#x27;100%&#x27;)</span></span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS List Space Issue: When setting multiple columns with `</span>lanes<span class="string">` in a vertical List, how to add horizontal spacing? The `</span>space<span class="string">` attribute of List only adds vertical spacing. Is there an elegant way besides adding padding or margin to each ListItem?  </span></span><br><span class="line"><span class="string">The second parameter of `</span>lanes<span class="string">` is the spacing, e.g., `</span><span class="title function_">lanes</span>(<span class="number">2</span>, <span class="number">8</span>)<span class="string">` for 2 columns with 8vp spacing. See the following demo with spacing set to 20:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// ListLanesExample.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ListLanesExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] =</span><br><span class="line">    [<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;8&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;11&quot;</span>, <span class="string">&quot;12&quot;</span>, <span class="string">&quot;13&quot;</span>, <span class="string">&quot;14&quot;</span>, <span class="string">&quot;15&quot;</span>, <span class="string">&quot;16&quot;</span>, <span class="string">&quot;17&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;19&quot;</span>];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">alignListItem</span>: <span class="title class_">ListItemAlign</span> = <span class="title class_">ListItemAlign</span>.<span class="property">Center</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">initialIndex</span>: <span class="number">0</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span> + item)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Green</span> &#125;);</span><br><span class="line">        &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&quot;90%&quot;</span>)</span><br><span class="line">      .<span class="title function_">friction</span>(<span class="number">0.6</span>)</span><br><span class="line">      .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">3</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Red</span> &#125;)</span><br><span class="line">      .<span class="title function_">lanes</span>(&#123; <span class="attr">minLength</span>: <span class="number">40</span>, <span class="attr">maxLength</span>: <span class="number">40</span> &#125;, <span class="number">20</span>) <span class="comment">// Set column count and spacing</span></span><br><span class="line">      .<span class="title function_">alignListItem</span>(<span class="variable language_">this</span>.<span class="property">alignListItem</span>)</span><br><span class="line">      .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>);</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xDCDCDC</span>).<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS: How to obtain a unique identifier for an Object?  </span></span><br><span class="line"><span class="string">Want to get a unique identifier for an object to distinguish if it&#x27;s the same object.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ArkTS, migrated from TypeScript, also lacks a method to obtain a hashCode.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference link: https://stackoverflow.com/questions/36811284/how-to-get-hash-value-of-an-object-in-typescript  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Two possible solutions:  </span></span><br><span class="line"><span class="string">1. Try using a third-party library: https://stackoverflow.com/questions/36811284/how-to-get-hash-value-of-an-object-in-typescript  </span></span><br><span class="line"><span class="string">   `</span><span class="title class_">Md5</span>.<span class="title function_">hashStr</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(yourObject))<span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Implement a hashCode method yourself:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">hashCode</span>(<span class="params"><span class="attr">obj</span>: <span class="built_in">object</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">str</span>: <span class="built_in">string</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">h</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    h = <span class="number">31</span> * h + str.<span class="title function_">charCodeAt</span>(i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> h &amp; <span class="number">0xFFFFFFFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS NodeContainer Usage Example  </span></span><br><span class="line"><span class="string">Save windowClass in utils/GlobalThis:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BuilderNode</span>, <span class="title class_">FrameNode</span>, <span class="title class_">NodeController</span>, <span class="title class_">Size</span>, <span class="title class_">UIContext</span>, <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">GlobalThis</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../utils/GlobalThis&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoParams</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">VideoController</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="attr">innerResource</span>: <span class="title class_">Resource</span> | <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">videoBuilder</span>(<span class="params"><span class="attr">params</span>: <span class="title class_">VideoParams</span></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Video</span>(&#123;</span><br><span class="line">      <span class="attr">src</span>: params.<span class="property">innerResource</span>,</span><br><span class="line">      <span class="attr">controller</span>: params.<span class="property">controller</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">videoNode</span>: <span class="title class_">BuilderNode</span>&lt;[<span class="title class_">VideoParams</span>]&gt; | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoNodeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">NodeController</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">wrapBuilder</span>: <span class="title class_">WrappedBuilder</span>&lt;[<span class="title class_">VideoParams</span>]&gt; = <span class="title function_">wrapBuilder</span>(videoBuilder);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">controller</span>: <span class="title class_">VideoController</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">innerResource</span>: <span class="title class_">Resource</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">isShow</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">isShow</span>: <span class="built_in">boolean</span>, <span class="attr">controller</span>: <span class="title class_">VideoController</span> | <span class="literal">undefined</span>, <span class="attr">src</span>: <span class="title class_">Resource</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isShow</span> = isShow;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">controller</span> = controller;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">innerResource</span> = src;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">makeNode</span>(<span class="attr">uiContext</span>: <span class="title class_">UIContext</span>): <span class="title class_">FrameNode</span> | <span class="literal">null</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isShow</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (videoNode == <span class="literal">null</span>) &#123;</span><br><span class="line">      videoNode = <span class="keyword">new</span> <span class="title class_">BuilderNode</span>&lt;[<span class="title class_">VideoParams</span>]&gt;(uiContext);</span><br><span class="line">      videoNode.<span class="title function_">build</span>(<span class="variable language_">this</span>.<span class="property">wrapBuilder</span>, &#123; <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span>, <span class="attr">innerResource</span>: <span class="variable language_">this</span>.<span class="property">innerResource</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> frameNode = videoNode?.<span class="title function_">getFrameNode</span>();</span><br><span class="line">    <span class="keyword">return</span> frameNode ? frameNode : <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToResize</span>(<span class="params"><span class="attr">size</span>: <span class="title class_">Size</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aboutToResize width : &quot;</span> + size.<span class="property">width</span> + <span class="string">&quot; height : &quot;</span> + size.<span class="property">height</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aboutToAppear&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aboutToDisappear&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onTouchEvent</span>(<span class="params"><span class="attr">event</span>: <span class="title class_">TouchEvent</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onTouchEvent&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isShow</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">rebuild</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toHide</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isShow</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">rebuild</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">controller</span>: <span class="title class_">VideoController</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">innerResource</span>: <span class="title class_">Resource</span> = $rawfile(<span class="string">&#x27;video.mp4&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">videoController1</span>: <span class="title class_">VideoNodeController</span> = <span class="keyword">new</span> <span class="title class_">VideoNodeController</span>(<span class="literal">true</span>, controller, innerResource);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">videoController2</span>: <span class="title class_">VideoNodeController</span> = <span class="keyword">new</span> <span class="title class_">VideoNodeController</span>(<span class="literal">false</span>, controller, innerResource);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">status</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">windowClass</span> = <span class="title class_">GlobalThis</span>.<span class="title function_">getInstance</span>().<span class="title function_">getMainWindow</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">NodeContainer</span>(videoController1)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&quot;30%&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">35</span>, <span class="attr">right</span>: <span class="number">35</span>, <span class="attr">top</span>: <span class="number">35</span> &#125;)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="title class_">NodeContainer</span>(videoController2)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        .<span class="title function_">visibility</span>(<span class="variable language_">this</span>.<span class="property">status</span> ? <span class="title class_">Visibility</span>.<span class="property">None</span> : <span class="title class_">Visibility</span>.<span class="property">Visible</span>);</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Change&quot;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span>) &#123;</span><br><span class="line">            videoController1.<span class="title function_">toHide</span>();</span><br><span class="line">            videoController2.<span class="title function_">toShow</span>();</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            videoController1.<span class="title function_">toShow</span>();</span><br><span class="line">            videoController2.<span class="title function_">toHide</span>();</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">status</span> = !<span class="variable language_">this</span>.<span class="property">status</span>;</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">windowClass</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setOrientation</span>(<span class="variable language_">this</span>.<span class="property">status</span> ? <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span> : <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setOrientation</span>(<span class="params"><span class="attr">orientation</span>: <span class="variable language_">window</span>.<span class="title class_">Orientation</span></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">windowClass</span>?.<span class="title function_">setPreferredOrientation</span>(orientation, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>;</span><br><span class="line">        <span class="keyword">if</span> (errCode) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Failed to set window orientation. Cause code: <span class="subst">$&#123;err.code&#125;</span>, message: <span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in setting window orientation.&#x27;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Failed to set window orientation. Cause code: <span class="subst">$&#123;exception.code&#125;</span>, message: <span class="subst">$&#123;exception.message&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS Channel Navigation Bar Function Example  </span></span><br><span class="line"><span class="string">For developing a news app&#x27;s channel function, how to layout an image after Tabs as a button to jump to the channel customization page? Using `</span><span class="title class_">Row</span>()&#123;<span class="title class_">Tabs</span>() <span class="title class_">Image</span>()&#125;<span class="string">` causes the TabContent inside Tabs to not fill the width.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the following example code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; router &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="variable constant_">AAA</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>() &#123;</span><br><span class="line">        <span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller001</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;Tab1&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">36</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.4</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">30</span>, <span class="attr">bottom</span>: <span class="number">56.5</span> &#125;);</span><br><span class="line">              <span class="title class_">Divider</span>()</span><br><span class="line">                .<span class="title function_">strokeWidth</span>(<span class="number">0.5</span>)</span><br><span class="line">                .<span class="title function_">color</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.05</span>);</span><br><span class="line">            &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">          &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabBuilder001</span>(<span class="number">0</span>));</span><br><span class="line">          </span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;Tab2&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">36</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.4</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">30</span>, <span class="attr">bottom</span>: <span class="number">56.5</span> &#125;);</span><br><span class="line">              <span class="title class_">Divider</span>()</span><br><span class="line">                .<span class="title function_">strokeWidth</span>(<span class="number">0.5</span>)</span><br><span class="line">                .<span class="title function_">color</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.05</span>);</span><br><span class="line">            &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">          &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabBuilder001</span>(<span class="number">1</span>));</span><br><span class="line">          </span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;Tab3&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">36</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.4</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">30</span>, <span class="attr">bottom</span>: <span class="number">56.5</span> &#125;);</span><br><span class="line">              <span class="title class_">Divider</span>()</span><br><span class="line">                .<span class="title function_">strokeWidth</span>(<span class="number">0.5</span>)</span><br><span class="line">                .<span class="title function_">color</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.05</span>);</span><br><span class="line">            &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">          &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabBuilder001</span>(<span class="number">2</span>));</span><br><span class="line">          </span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;Tab4&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">36</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.4</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">30</span>, <span class="attr">bottom</span>: <span class="number">56.5</span> &#125;);</span><br><span class="line">              <span class="title class_">Divider</span>()</span><br><span class="line">                .<span class="title function_">strokeWidth</span>(<span class="number">0.5</span>)</span><br><span class="line">                .<span class="title function_">color</span>(<span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">                .<span class="title function_">opacity</span>(<span class="number">0.05</span>);</span><br><span class="line">            &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">          &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabBuilder001</span>(<span class="number">3</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">vertical</span>(<span class="literal">false</span>)</span><br><span class="line">        .<span class="title function_">barHeight</span>(<span class="number">56</span>)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">360</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">190</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F1F3F5&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">38</span> &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&quot;app.media.app_icon&quot;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;5%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">180</span>, <span class="attr">left</span>: <span class="number">320</span> &#125;)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">            router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&quot;pages/page2&quot;</span> &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">fontColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;#182431&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectedFontColor</span>: <span class="built_in">string</span> = <span class="string">&#x27;#007DFF&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">controller001</span>: <span class="title class_">TabsController</span> = <span class="keyword">new</span> <span class="title class_">TabsController</span>();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">tabBuilder001</span>(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`Tab<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="variable language_">this</span>.<span class="property">selectedFontColor</span> : <span class="variable language_">this</span>.<span class="property">fontColor</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">        .<span class="title function_">lineHeight</span>(<span class="number">14</span>);</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/510-Daily-HarmonyOS-Next-Knowledge-Swipe-Triggered-Clicks-Unfired-Page-Display-Callbacks-Keyboard-Squeezed-Popups-Dynamic-Component-Addition-to-Pages-and-Immersive-Effects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/510-Daily-HarmonyOS-Next-Knowledge-Swipe-Triggered-Clicks-Unfired-Page-Display-Callbacks-Keyboard-Squeezed-Popups-Dynamic-Component-Addition-to-Pages-and-Immersive-Effects/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Swipe-Triggered Clicks, Unfired Page Display Callbacks, Keyboard-Squeezed Popups, Dynamic Component Addition to Pages, and Immersive Effects</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:18:48 / Modified: 12:25:06" itemprop="dateCreated datePublished" datetime="2025-06-25T08:18:48+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Swipe-Triggered-Clicks-Unfired-Page-Display-Callbacks-Keyboard-Squeezed-Popups-Dynamic-Component-Addition-to-Pages-and-Immersive-Effects"><a href="#Daily-HarmonyOS-Next-Knowledge-Swipe-Triggered-Clicks-Unfired-Page-Display-Callbacks-Keyboard-Squeezed-Popups-Dynamic-Component-Addition-to-Pages-and-Immersive-Effects" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Swipe-Triggered Clicks, Unfired Page Display Callbacks, Keyboard-Squeezed Popups, Dynamic Component Addition to Pages, and Immersive Effects"></a>[Daily HarmonyOS Next Knowledge] Swipe-Triggered Clicks, Unfired Page Display Callbacks, Keyboard-Squeezed Popups, Dynamic Component Addition to Pages, and Immersive Effects</h3><h4 id="1-HarmonyOS-Swiping-a-Row-component-left-right-also-triggers-the-onclick-method"><a href="#1-HarmonyOS-Swiping-a-Row-component-left-right-also-triggers-the-onclick-method" class="headerlink" title="1. HarmonyOS: Swiping a Row component left&#x2F;right also triggers the onclick method?"></a>1. HarmonyOS: Swiping a Row component left&#x2F;right also triggers the onclick method?</h4><p>It is found that swiping a card left&#x2F;right can also trigger the click event:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">Row(&#123; space: 16 &#125;) &#123;</span><br><span class="line">&#125;</span><br><span class="line">.onClick(() =&gt; &#123;</span><br><span class="line">      NavController.push(&quot;VpSummaryPage&quot;, VpSummaryPageParam.newInstanceForDetailPageSchema(this.logModel?.schema??&#x27;&#x27;))</span><br><span class="line"> &#125;)</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">`onClick` monitors finger clicks and lifts, so swiping followed by a lift will also trigger `onClick`. Use `TapGesture` in Gesture instead of `onClick`.  </span><br><span class="line">Development document: https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-basic-gestures-tapgesture.md  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2. HarmonyOS: The onPageShow hook in components is not triggered?  </span><br><span class="line">Reference document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-lifecycle-V5#ZH-CN_TOPIC_0000001847050604__onpageshow  </span><br><span class="line">Lifecycle callback functions of custom components notify users about the component&#x27;s lifecycle. These callbacks are private, called by the development framework at specific times during runtime, and cannot be manually invoked from the application. Avoid reusing the same custom component node across multiple windows, as this may disrupt the lifecycle.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. HarmonyOS: How to prevent a custom popup from moving up when the keyboard pops up?  </span><br><span class="line">Using a TextInput control in a popup causes the popup to move up when the keyboard pops up. How to prevent this movement? Additionally, how to define the input box style as a grid with 6 cells?  </span><br><span class="line"></span><br><span class="line">Set the safe area with `.expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP, SafeAreaEdge.BOTTOM])`.  </span><br><span class="line">Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5  </span><br><span class="line">The safe area refers to the page display area, which does not overlap with system-set non-safe areas (e.g., status bar, navigation bar) by default. Developers can use the `expandSafeArea` attribute to allow components to draw beyond the safe area without changing the layout, and configure the avoidance mode for the virtual keyboard using `setKeyboardAvoidMode`. When text such as a title bar should not overlap with non-safe areas, setting `expandSafeArea` for components is recommended to achieve an immersive effect, or directly use the window interface `setWindowLayoutFullScreen`.  </span><br><span class="line"></span><br><span class="line">For input boxes in full-modal popups, developers must handle the upward movement manually. Use the following interface to obtain the keyboard height for avoidance:  </span><br><span class="line">Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inputmethod  </span><br><span class="line"></span><br><span class="line">For verification code-style numeric input boxes, refer to the code example below:  </span><br><span class="line">```typescript</span><br><span class="line">// Verification code input box</span><br><span class="line">interface codeOne &#123;</span><br><span class="line">  str: string,</span><br><span class="line">  isBorder: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">export struct TextInputCodeView &#123;</span><br><span class="line">  // Verification code</span><br><span class="line">  @State code: string = &#x27;&#x27;</span><br><span class="line">  // Number of verification code digits</span><br><span class="line">  @Prop</span><br><span class="line">  someArrayLength: number = 4</span><br><span class="line">  someArray: number[] = []</span><br><span class="line"></span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    this.someArray = Array.from(&#123; length: this.someArrayLength &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Stack() &#123;</span><br><span class="line">      Row() &#123;</span><br><span class="line">        ForEach(this.someArray, (item: number, index: number) =&gt; &#123;</span><br><span class="line">          // Add spacing</span><br><span class="line">          if (index != 0) &#123;</span><br><span class="line">            Blank()</span><br><span class="line">          &#125;</span><br><span class="line">          // index + 1: Represents the position of the input box.</span><br><span class="line">          // Fill in the verification code</span><br><span class="line">          if (this.code.length &gt;= index + 1) &#123;</span><br><span class="line">            this.OneText(&#123; str: this.code.substring(index, index + 1), isBorder: index + 1 === this.someArray.length &#125;)</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            // No verification code</span><br><span class="line">            this.OneText(&#123;</span><br><span class="line">              str: &#x27;&#x27;,</span><br><span class="line">              isBorder: this.code.length + 1 === index + 1</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, (item: number, index: number) =&gt; JSON.stringify(index + 1)) // Key identifier</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line"></span><br><span class="line">      TextInput(&#123; placeholder: &quot;&quot; &#125;)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">        .maxLength(this.someArray.length)</span><br><span class="line">        .caretColor(Color.Transparent)</span><br><span class="line">        .fontColor(Color.Transparent)</span><br><span class="line">        .borderColor(Color.Transparent)</span><br><span class="line">        .backgroundColor(Color.Transparent)</span><br><span class="line">        .onChange((value: string) =&gt; &#123;</span><br><span class="line">          this.code = value</span><br><span class="line">        &#125;)</span><br><span class="line">        .onSubmit(async () =&gt; &#123;</span><br><span class="line">          // Enter key event</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(60)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Parameters: Verification code content, whether to show border</span><br><span class="line">  @Builder</span><br><span class="line">  OneText(item: codeOne) &#123;</span><br><span class="line">    // Judge if the current input box is selected and if it has content. If selected and empty, display &quot;|&quot;</span><br><span class="line">    Text(item.isBorder &amp;&amp; !item.str ? &#x27;|&#x27; : item.str as string)</span><br><span class="line">      .width(50)</span><br><span class="line">      .height(50)</span><br><span class="line">      .textAlign(TextAlign.Center)</span><br><span class="line">      .fontSize(20)</span><br><span class="line">      .fontColor(item.isBorder &amp;&amp; !item.str ? &#x27;#ffdd4f46&#x27; : Color.Black)</span><br><span class="line">      .backgroundColor(&#x27;#f3f4f6&#x27;)</span><br><span class="line">      .borderRadius(8)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. HarmonyOS: How to dynamically add components to a page?  </span><br><span class="line">Is it possible to dynamically add a component like `Image()` to the Column layout of `TestPage` through a function like `addView`?  </span><br></pre></td></tr></table></figure>
<p>@Component<br>export struct TestPage {<br>   build() {<br>       Column() {<br>          Text(‘hello world~’)<br>     }<br>  }<br>}<br>addView(){<br>}</p>
<pre><code>
Solutions for dynamically adding components:  

**Solution 1: Use if-else control**:  
https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-ifelse-V5#%E4%BD%BF%E7%94%A8if%E8%BF%9B%E8%A1%8C%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93  
```typescript
@Entry
@Component
struct MyComponent &#123;
  @State count: number = 0;

  build() &#123;
    Column() &#123;
      Text(`count=$&#123;this.count&#125;`)

      if (this.count &gt; 0) &#123;
        Text(`count is positive`)
          .fontColor(Color.Green)
      &#125;

      Button(&#39;increase count&#39;)
        .onClick(() =&gt; &#123;
          this.count++;
        &#125;)

      Button(&#39;decrease count&#39;)
        .onClick(() =&gt; &#123;
          this.count--;
        &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<p><strong>Solution 2: Use NodeContainer</strong>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-nodecontroller-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-nodecontroller-V5</a>  </p>
<p><strong>Solution 3:封装全局@Builder (Encapsulate global @Builder)</strong>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-wrapbuilder-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-wrapbuilder-V5</a><br>When multiple global @Builder functions are used within a struct to achieve different UI effects, code maintenance becomes difficult, and the page appears cluttered. In such cases, use <code>wrapBuilder</code> to encapsulate global @Builder functions.  </p>
<p>It is recommended to try <strong>Solution 3</strong>.  </p>
<h4 id="5-HarmonyOS-Developing-immersive-effects"><a href="#5-HarmonyOS-Developing-immersive-effects" class="headerlink" title="5. HarmonyOS: Developing immersive effects"></a>5. HarmonyOS: Developing immersive effects</h4><p>The app is set to full-screen display in EntryAbility. When entering a new page, how to retain the status bar? How to individually set whether the status bar and navigation bar are displayed for a page?  </p>
<p>The welcome page and the first page are both full-screen, while the third page needs to retain the status bar. How to implement this?  </p>
<p>Set immersive effects on the welcome page and the first page in <code>aboutToAppear</code>, and cancel the immersive effect on the third page in <code>aboutToDisappear</code>.<br>Reference code: Set immersive effects in the <code>aboutToAppear</code> method of a page opened in a subwindow:  </p>
<pre><code class="language-typescript">aboutToAppear(): void &#123;
  // Set immersive effect
  window.getLastWindow(getContext(this), (err, windowBar) =&gt; &#123;
    windowBar.setWindowLayoutFullScreen(true);
    // windowBar.setWindowSystemBarEnable([])
  &#125;)
&#125;

aboutToDisappear(): void &#123;
  // Exit immersive effect
  window.getLastWindow(getContext(this), (err, windowBar) =&gt; &#123;
    windowBar.setWindowLayoutFullScreen(false);
    // windowBar.setWindowSystemBarEnable([])
  &#125;)
&#125;
</code></pre>
<p>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowlayoutfullscreen9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowlayoutfullscreen9</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/509-Daily-HarmonyOS-Next-Knowledge-Notification-Sending-Popup-Refresh-Active-Input-Focus-Triggering-Pagination-List-Implementation-Rich-Text-Editor-Input-State-Control/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/509-Daily-HarmonyOS-Next-Knowledge-Notification-Sending-Popup-Refresh-Active-Input-Focus-Triggering-Pagination-List-Implementation-Rich-Text-Editor-Input-State-Control/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Notification Sending, Popup Refresh, Active Input Focus Triggering, Pagination List Implementation, Rich Text Editor Input State Control</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:17:09 / Modified: 12:25:07" itemprop="dateCreated datePublished" datetime="2025-06-25T08:17:09+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Notification-Sending-Popup-Refresh-Active-Input-Focus-Triggering-Pagination-List-Implementation-Rich-Text-Editor-Input-State-Control"><a href="#Daily-HarmonyOS-Next-Knowledge-Notification-Sending-Popup-Refresh-Active-Input-Focus-Triggering-Pagination-List-Implementation-Rich-Text-Editor-Input-State-Control" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Notification Sending, Popup Refresh, Active Input Focus Triggering, Pagination List Implementation, Rich Text Editor Input State Control"></a>[Daily HarmonyOS Next Knowledge] Notification Sending, Popup Refresh, Active Input Focus Triggering, Pagination List Implementation, Rich Text Editor Input State Control</h3><h4 id="1-How-to-Send-Notifications-or-Broadcasts-in-HarmonyOS"><a href="#1-How-to-Send-Notifications-or-Broadcasts-in-HarmonyOS" class="headerlink" title="1. How to Send Notifications or Broadcasts in HarmonyOS?"></a>1. How to Send Notifications or Broadcasts in HarmonyOS?</h4><p>Notifications can be implemented using <code>emitter</code>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-emitter-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-emitter-V5</a><br>The <code>emitter</code> module provides the capability to send and handle events between different threads or within the same thread of a process, including persistent event subscription, single-event subscription, subscription cancellation, and event sending to the queue.  </p>
<p>State management with <code>@Provide</code> and <code>@Consume</code> decorators, combined with <code>@Watch</code> for state variable change notifications, can also be used:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-provide-and-consume-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-provide-and-consume-V5</a><br><code>@Provide</code> and <code>@Consume</code> enable two-way data synchronization with descendant components, suitable for cross-level state transmission. Unlike parent-child component parameter passing via named parameters, they break free from parameter constraints for cross-level data flow.  </p>
<ul>
<li>A <code>@Provide</code>-decorated variable in an ancestor component acts as a state provided to descendants.  </li>
<li>A <code>@Consume</code>-decorated variable in a descendant component “consumes (binds to)” the ancestor-provided state.</li>
</ul>
<h4 id="2-How-to-Refresh-a-Custom-Popup-in-HarmonyOS"><a href="#2-How-to-Refresh-a-Custom-Popup-in-HarmonyOS" class="headerlink" title="2. How to Refresh a Custom Popup in HarmonyOS?"></a>2. How to Refresh a Custom Popup in HarmonyOS?</h4><p>If a <code>@state</code>-decorated array is passed to a custom popup component, will modifying the array trigger UI refresh?<br>Reference for custom popups:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a><br>If an array is defined with <code>@state</code>, modifying the array will trigger UI refresh in the popup.  </p>
<h4 id="3-How-to-Trigger-Focus-on-an-Input-Box-via-Code-Without-Clicking-to-Open-the-Keyboard"><a href="#3-How-to-Trigger-Focus-on-an-Input-Box-via-Code-Without-Clicking-to-Open-the-Keyboard" class="headerlink" title="3. How to Trigger Focus on an Input Box via Code (Without Clicking) to Open the Keyboard?"></a>3. How to Trigger Focus on an Input Box via Code (Without Clicking) to Open the Keyboard?</h4><p>Use <code>sendEventByKey</code> to send a click event to the component. Example: Trigger the keyboard when clicking the “Get Verification Code” button:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TextInputExample &#123;
  @State text: string = &#39;&#39;
  controller: TextInputController = new TextInputController()

  build() &#123;
    Column() &#123;
      Row() &#123;
        TextInput(&#123;
          text: this.text,
          placeholder: &#39;Please enter username&#39;,
          controller: this.controller
        &#125;)
          .height(40)
          .margin(20)
          .fontSize(14)
          .width(&#39;90%&#39;)
          .id(&#39;t1&#39;)
      &#125;

      Row() &#123;
        TextInput(&#123; placeholder: &#39;Please enter password&#39; &#125;)
          .height(40)
          .margin(20)
          .type(InputType.Number)
          .maxLength(9)
          .width(&#39;60%&#39;)
          .id(&#39;t2&#39;)
        Button(&#39;Get Verification Code&#39;)
          .onClick(() =&gt; &#123;
            /**
             * id: ID of the component to trigger the event
             * params: Event parameters (empty string for no parameters)
             */
            sendEventByKey(&#39;t2&#39;, 10, &#39;&#39;);
          &#125;)
          .width(&#39;30%&#39;)
      &#125;
      .justifyContent(FlexAlign.SpaceBetween)
      .width(&#39;100%&#39;)
    &#125;
  &#125;
&#125;
</code></pre>
<p>Reference document:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-component-id-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-component-id-V5</a>  </p>
<h4 id="4-How-to-Implement-a-Pagination-List-in-HarmonyOS"><a href="#4-How-to-Implement-a-Pagination-List-in-HarmonyOS" class="headerlink" title="4. How to Implement a Pagination List in HarmonyOS?"></a>4. How to Implement a Pagination List in HarmonyOS?</h4><p>Pagination list implementation via <code>List</code> and <code>ListItemGroup</code> header:<br>Reference for <code>ListItemGroup</code>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-listitemgroup-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-listitemgroup-V5</a>  </p>
<p>Demo reference:  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct RefreshExample &#123;
  @State isRefreshing: boolean = false
  @State arr: String[] = [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;]
  @Builder
  itemHead()&#123;
    Column()&#123;
      Text(&quot;Top Content&quot;)
    &#125;.width(&#39;100%&#39;)
    .height(&#39;40%&#39;)
    .backgroundColor(&#39;#999999&#39;)
  &#125;
  build() &#123;
    Column() &#123;
      Refresh(&#123; refreshing: $$this.isRefreshing&#125;) &#123;
          List() &#123;
            ListItemGroup(&#123; header: this.itemHead()&#125;)&#123;
              ForEach(this.arr, (item: string) =&gt; &#123;
                ListItem() &#123;
                  Text(&#39;&#39; + item)
                    .width(&#39;100%&#39;).height(100).fontSize(16)
                    .textAlign(TextAlign.Center).borderRadius(10).backgroundColor(0xFFFFFF)
                    .margin(&#123;top:10,bottom:10&#125;)
                &#125;
              &#125;)
            &#125;
          &#125;
          .onReachEnd(() =&gt; &#123;
            console.info(&quot;Trigger Loading&quot;)
          &#125;)
          .sticky(StickyStyle.Header) // Toggle sticky header
          .width(&#39;100%&#39;)
          .height(&#39;100%&#39;)
      &#125;
      .onStateChange((refreshStatus: RefreshStatus) =&gt; &#123;
        console.info(&#39;Status Changed: &#39; + refreshStatus)
      &#125;)
      .onRefreshing(() =&gt; &#123;
        setTimeout(() =&gt; &#123;
          this.isRefreshing = false
        &#125;, 2000)
        console.log(&#39;Enter Refresh&#39;)
      &#125;)
      .backgroundColor(0x89CFF0)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="5-How-to-Control-the-Input-State-of-a-RichEditor-in-HarmonyOS"><a href="#5-How-to-Control-the-Input-State-of-a-RichEditor-in-HarmonyOS" class="headerlink" title="5. How to Control the Input State of a RichEditor in HarmonyOS?"></a>5. How to Control the Input State of a RichEditor in HarmonyOS?</h4><p>When a <code>RichEditor</code> component in a page is initially hidden and dynamically shown via state management, how to trigger the keyboard and enable input?  </p>
<p>Demo reference:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct etPage &#123;
  controller: RichEditorController = new RichEditorController()
  controller1: TextInputController = new TextInputController()
  needFocusKey: string = &#39;RichEditor&#39;
  @State textFlag: string = &quot;TextFlag&quot;;

  build() &#123;
    Column() &#123;
      RichEditor(&#123; controller: this.controller &#125;)
        .key(this.needFocusKey)
        .align(Alignment.TopStart)
        .height(100)
        .borderWidth(1)
        .borderColor(Color.Red)
        .width(&quot;100%&quot;)

      Button(&#39;Click to Focus&#39;).onClick(() =&gt; &#123;
        console.info(this.needFocusKey)
        focusControl.requestFocus(this.needFocusKey)
      &#125;)
      Button(&#39;Click to Lose Focus&#39;).onClick(() =&gt; &#123;
        focusControl.requestFocus(&#39;button&#39;)
      &#125;)
      Button().width(0).height(0).key(&#39;button&#39;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p>Reference for <code>focusControl</code> focus management module:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-focus-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-focus-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/508%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Countdown-Effect-Implementation-Flex-Properties-Foldable-Screen-Switching-Dynamic-Import-in-Functions-UI-Design-Dimensions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/508%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Countdown-Effect-Implementation-Flex-Properties-Foldable-Screen-Switching-Dynamic-Import-in-Functions-UI-Design-Dimensions/" class="post-title-link" itemprop="url">508【Daily HarmonyOS Next Knowledge】 Countdown Effect Implementation, Flex Properties, Foldable Screen Switching, Dynamic Import in Functions, UI Design Dimensions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:14:56 / Modified: 12:25:08" itemprop="dateCreated datePublished" datetime="2025-06-25T08:14:56+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Countdown-Effect-Implementation-Flex-Properties-Foldable-Screen-Switching-Dynamic-Import-in-Functions-UI-Design-Dimensions"><a href="#Daily-HarmonyOS-Next-Knowledge-Countdown-Effect-Implementation-Flex-Properties-Foldable-Screen-Switching-Dynamic-Import-in-Functions-UI-Design-Dimensions" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Countdown Effect Implementation, Flex Properties, Foldable Screen Switching, Dynamic Import in Functions, UI Design Dimensions"></a>[Daily HarmonyOS Next Knowledge] Countdown Effect Implementation, Flex Properties, Foldable Screen Switching, Dynamic Import in Functions, UI Design Dimensions</h3><h4 id="1-How-to-Implement-a-60-00-Countdown-Character-Effect-in-HarmonyOS"><a href="#1-How-to-Implement-a-60-00-Countdown-Character-Effect-in-HarmonyOS" class="headerlink" title="1. How to Implement a 60:00 Countdown Character Effect in HarmonyOS?"></a>1. How to Implement a 60:00 Countdown Character Effect in HarmonyOS?</h4><p>A countdown method is required to display the effect as a 120-minute countdown: 120:00, 119:59, 119:58, 119:57, where the left part is minutes and the right part is seconds, refreshing the string every second.  </p>
<p>Refer to the following code to implement the countdown effect:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Arc &#123;
  @State countdownValue: number = 60;

  aboutToAppear(): void &#123;
  &#125;

  build() &#123;
    Flex(&#123; direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center &#125;) &#123;

      Text(this.countdownValue.toString())
        .backgroundColor(Color.Blue)
        .fontColor(Color.White)
        .width(100)
        .height(45)
        .textAlign(TextAlign.Center)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;

  onPageShow(): void &#123;

    setInterval(() =&gt; &#123;
      this.countdownValue--;
      if (this.countdownValue &lt; 0) &#123;
        clearInterval(this.countdownValue);
        return;
      &#125;

    &#125;, 1000);

  &#125;
&#125;
</code></pre>
<h4 id="2-Why-Do-the-Common-Properties-height-and-constrainSize-maxHeight-of-the-HarmonyOS-Flex-Component-Fail"><a href="#2-Why-Do-the-Common-Properties-height-and-constrainSize-maxHeight-of-the-HarmonyOS-Flex-Component-Fail" class="headerlink" title="2. Why Do the Common Properties height and constrainSize.maxHeight of the HarmonyOS Flex Component Fail?"></a>2. Why Do the Common Properties height and constrainSize.maxHeight of the HarmonyOS Flex Component Fail?</h4><p>When using Flex to implement a flow layout with a set maximum height of 100, the content in the layout overflows and displays above the original layout if there is too much content.  </p>
<p>You can add the .clip(true) property to the flex layout:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
@State searchHistoryList: string[] = [&#39;111&#39;,&#39;2222&#39;,&#39;22333&#39;];
build() &#123;
Column() &#123;
Button()
.onClick(() =&gt; &#123;
this.searchHistoryList = this.searchHistoryList.concat([&quot;111&quot;, &quot;222&quot;, &quot;333&quot;, &quot;3435533&quot;])
&#125;)
// Flex implements flow layout
Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123;
ForEach(this.searchHistoryList, (history: string) =&gt; &#123;
Text(history.substring(0, 9))
.backgroundColor(&quot;#F2F4F8&quot;)
.border(&#123;
radius: 3
&#125;)
.fontSize(14)
.fontColor(&quot;#171E31&quot;)
.height(28)
.padding(&#123;
left: 12,
right: 12
&#125;)
.margin(&#123;
left: 4,
right: 4,
top: 8,
bottom: 8
&#125;)
.onClick(() =&gt; &#123;
// todo Click history record to search for keywords
&#125;)
&#125;)
&#125;
.width(&quot;100%&quot;)
.backgroundColor(&#39;#000&#39;)
.displayPriority(0)
// .height(100)
.constraintSize(&#123;
// Temporarily unable to find how to set a maximum of two lines, try limiting the maximum height
maxHeight: 89
&#125;)
.clip(true)
&#125;.displayPriority(1.9)
.height(200)
&#125;
&#125;
</code></pre>
<h4 id="3-Why-Does-the-HarmonyOS-Foldable-Screen-Automatically-Split-into-Columns-When-Switching-from-Small-to-Large-Screen-Causing-Display-Abnormalities"><a href="#3-Why-Does-the-HarmonyOS-Foldable-Screen-Automatically-Split-into-Columns-When-Switching-from-Small-to-Large-Screen-Causing-Display-Abnormalities" class="headerlink" title="3. Why Does the HarmonyOS Foldable Screen Automatically Split into Columns When Switching from Small to Large Screen, Causing Display Abnormalities?"></a>3. Why Does the HarmonyOS Foldable Screen Automatically Split into Columns When Switching from Small to Large Screen, Causing Display Abnormalities?</h4><p>The outermost page Navigation is set to .mode(NavigationMode.Stack), leading to abnormal display when switching the screen in reading mode.  </p>
<p>After unfolding the foldable screen, the screen width needs to be recalculated; otherwise, the screen width remains in the folded state. Display will be normal after recalculation.  </p>
<h4 id="4-How-to-Specify-the-Return-Type-When-Calling-Dynamic-Import-in-a-HarmonyOS-Function"><a href="#4-How-to-Specify-the-Return-Type-When-Calling-Dynamic-Import-in-a-HarmonyOS-Function" class="headerlink" title="4. How to Specify the Return Type When Calling Dynamic Import in a HarmonyOS Function?"></a>4. How to Specify the Return Type When Calling Dynamic Import in a HarmonyOS Function?</h4><p>The document has similar code: import(‘myHar’).then((ns: ESObject) &#x3D;&gt; { console.log(ns.add(3, 5)); }); The return type is ESObject, but this makes code hints less friendly, as methods cannot be directly suggested after typing “ns.”.  </p>
<p>In a scenario where a function uses dynamic import, how to specify the return type? For example:  </p>
<pre><code class="language-typescript">async getLogin() &#123; return await import(&#39;@hik/login&#39;) &#125;
</code></pre>
<p>Although the return type can be inferred by the system, if an interface is defined requiring the implementation of the getLogin() method, the return type must be specified. If specified as ESObject, it will cause the aforementioned hint issues, and collaborative development may lead to errors (e.g., method name changes not detected at compile time).  </p>
<p>Refer to:  </p>
<pre><code class="language-typescript">function DynamicNumber() :number&#123;
  let number1:number = 0;
  import(&#39;../Calc&#39;).then((ns:ESObject) =&gt; &#123;
    let calc:ESObject = new ns.Calc();  // Instantiate class Calc
    number1 = calc.instanceAdd(10, 11);  // Call member function instanceAdd()
    console.log(&#39;Index DynamicImport I am harlibrary in staticAdd, %d + %d = %d&#39;, 10, 11, number1);
    return number1;
  &#125;);
  return number1;
&#125;
</code></pre>
<h4 id="5-What-About-UI-Design-Dimensions-in-HarmonyOS-Development"><a href="#5-What-About-UI-Design-Dimensions-in-HarmonyOS-Development" class="headerlink" title="5. What About UI Design Dimensions in HarmonyOS Development?"></a>5. What About UI Design Dimensions in HarmonyOS Development?</h4><p>In development, the default dimension unit is vp. How should UI designs provide dimensions?  </p>
<p>For UI dimensions, use 720px as the基准 (baseline) for UI designs. 1vp is approximately equal to 3px. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5</a>.<br>ArkUI provides 4 pixel units for developers, with vp as the基准 data unit.  </p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">px</td>
<td align="left">Screen physical pixel unit.</td>
</tr>
<tr>
<td align="left">vp</td>
<td align="left">Screen density-related pixel, converted to screen physical pixels based on screen pixel density. When a value has no unit, the default unit is vp.<br><br><strong>Note:</strong><br><br>The ratio of vp to px depends on the screen pixel density.</td>
</tr>
<tr>
<td align="left">fp</td>
<td align="left">Font pixel, similar to vp but adapted to screen density changes and varies with system font size settings.</td>
</tr>
<tr>
<td align="left">lpx</td>
<td align="left">Viewport logical pixel unit. The lpx unit is the ratio of the actual screen width to the logical width (configured via designWidth), with designWidth defaulting to 720. When designWidth is 720, on a screen with an actual width of 1440 physical pixels, 1lpx equals 2px.</td>
</tr>
</tbody></table>
<p>For screen adaptation solutions, use the layout capabilities in “One More” for screen adaptation. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/layout-intro-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/layout-intro-V5</a>.  </p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Introduction</th>
</tr>
</thead>
<tbody><tr>
<td>Adaptive Layout</td>
<td>A layout capability where elements automatically change according to relative relationships (such as proportion, fixed width-height ratio, display priority, etc.) when the external container size changes. Currently, there are 7 adaptive layout capabilities: stretching, equal distribution, proportion, scaling, extension, hiding, and wrapping. Adaptive layout enables continuous interface display changes with external container size.</td>
</tr>
<tr>
<td>Responsive Layout</td>
<td>A layout capability where elements automatically change based on breakpoints, grids, or specific features (such as screen orientation, window width and height, etc.) when the external container size changes. Currently, there are 3 responsive layout capabilities: breakpoints, media queries, and grid layout. Responsive layout enables discontinuous interface changes with external container size, typically with significant differences in interface display under different features.</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/507%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Custom-Dialogs-Swipe-Gestures-Canvas-Refresh-Side-Swipe-Events-and-Unit-Inconsistency-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/507%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Custom-Dialogs-Swipe-Gestures-Canvas-Refresh-Side-Swipe-Events-and-Unit-Inconsistency-Issues/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Custom Dialogs, Swipe Gestures, Canvas Refresh, Side-Swipe Events, and Unit Inconsistency Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:12:04 / Modified: 08:12:39" itemprop="dateCreated datePublished" datetime="2025-06-25T08:12:04+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Custom-Dialogs-Swipe-Gestures-Canvas-Refresh-Side-Swipe-Events-and-Unit-Inconsistency-Issues"><a href="#【Daily-HarmonyOS-Next-Knowledge】Custom-Dialogs-Swipe-Gestures-Canvas-Refresh-Side-Swipe-Events-and-Unit-Inconsistency-Issues" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Custom Dialogs, Swipe Gestures, Canvas Refresh, Side-Swipe Events, and Unit Inconsistency Issues"></a>【Daily HarmonyOS Next Knowledge】Custom Dialogs, Swipe Gestures, Canvas Refresh, Side-Swipe Events, and Unit Inconsistency Issues</h3><h4 id="1-HarmonyOS-CustomDialogController-Custom-popups-cannot-be-normally-triggered-in-classes-or-static-methods"><a href="#1-HarmonyOS-CustomDialogController-Custom-popups-cannot-be-normally-triggered-in-classes-or-static-methods" class="headerlink" title="1. HarmonyOS CustomDialogController: Custom popups cannot be normally triggered in classes or static methods"></a>1. HarmonyOS CustomDialogController: Custom popups cannot be normally triggered in classes or static methods</h4><p>Currently, CustomDialog does not support encapsulation in classes because popups require context to trigger. It is recommended to use <code>promptAction.openCustomDialog</code>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a>  </p>
<h4 id="2-HarmonyOS-Implementing-left-right-swipe-gestures-with-SwipeGesture-–-how-to-identify-swipe-direction"><a href="#2-HarmonyOS-Implementing-left-right-swipe-gestures-with-SwipeGesture-–-how-to-identify-swipe-direction" class="headerlink" title="2. HarmonyOS: Implementing left&#x2F;right swipe gestures with SwipeGesture – how to identify swipe direction?"></a>2. HarmonyOS: Implementing left&#x2F;right swipe gestures with SwipeGesture – how to identify swipe direction?</h4><p>Implement the <code>onAction(event: (event: GestureEvent) =&gt; void)</code> listener. The <code>GestureEvent</code> callback object can distinguish direction. Reference documents:  </p>
<ol>
<li>SwipeGesture triggers swipe events when the speed exceeds 100vp&#x2F;s. Usage: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-gestures-swipegesture-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-gestures-swipegesture-V5</a>  </li>
<li>GestureEvent binds different gesture events to components and sets response methods. Parameter description: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-gesture-settings-V5#ZH-CN_TOPIC_0000001930676517__gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-gesture-settings-V5#ZH-CN_TOPIC_0000001930676517__gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E</a></li>
</ol>
<ul>
<li><code>offsetX: number</code>: X-offset of the gesture event (unit: vp), used in PanGesture scenarios. Swiping left to right gives positive <code>offsetX</code>, while right to left gives negative.</li>
</ul>
<h4 id="3-HarmonyOS-How-to-refresh-a-Canvas"><a href="#3-HarmonyOS-How-to-refresh-a-Canvas" class="headerlink" title="3. HarmonyOS: How to refresh a Canvas?"></a>3. HarmonyOS: How to refresh a Canvas?</h4><pre><code class="language-typescript">@State aa: number = 0;
Canvas(this.canvasCtx)
  .onReady(() =&gt; &#123;
    this.canvasCtx.draw(aa);
  &#125;);
</code></pre>
<p>When <code>aa</code> changes, the Canvas does not refresh. How to trigger redrawing?  </p>
<p>Use the CanvasRenderingContext2D interface, which supports refreshing drawing content in the next frame. Calling this interface will automatically trigger a refresh in the next frame. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-kit-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkui-kit-V5</a>  </p>
<h4 id="4-HarmonyOS-Side-swipe-events-–-how-to-block-swipe-to-go-back"><a href="#4-HarmonyOS-Side-swipe-events-–-how-to-block-swipe-to-go-back" class="headerlink" title="4. HarmonyOS: Side-swipe events – how to block swipe-to-go-back?"></a>4. HarmonyOS: Side-swipe events – how to block swipe-to-go-back?</h4><p>Only components decorated with <code>@Entry</code> can listen for back events. Use <code>onBackPress</code> to control this. Specific usage: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-lifecycle-V5#onbackpress">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-lifecycle-V5#onbackpress</a>  </p>
<p>In an <code>@Entry</code>-decorated page, override the lifecycle method:  </p>
<pre><code class="language-typescript">onBackPress() &#123;
  return true; // Block default back behavior
&#125;
</code></pre>
<h4 id="5-HarmonyOS-Unit-inconsistency-–-Text-vs-Web-component-font-sizes"><a href="#5-HarmonyOS-Unit-inconsistency-–-Text-vs-Web-component-font-sizes" class="headerlink" title="5. HarmonyOS: Unit inconsistency – Text vs. Web component font sizes"></a>5. HarmonyOS: Unit inconsistency – Text vs. Web component font sizes</h4><p><code>Text().fontSize(16)</code> vs. <code>Web().defaultFontSize(16)</code>: How to set the Web component’s default font size to match Text? Directly setting 16 makes it too small, while <code>vp2px</code> makes it too large.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5#%E5%83%8F%E7%B4%A0%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-pixel-units-V5#%E5%83%8F%E7%B4%A0%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2</a>  </p>
<p>Try setting both to <code>fontSize(&#39;16fp&#39;)</code> or <code>fontSize(&#39;16px&#39;) / fontSize(&#39;16vp&#39;)</code>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/506%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Popup-Components-Object-Passing-Obtaining-Current-Route-Component-Instances-Irregular-Polygon-Drawing-and-Checkbox-Groups/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/506%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Popup-Components-Object-Passing-Obtaining-Current-Route-Component-Instances-Irregular-Polygon-Drawing-and-Checkbox-Groups/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Popup Components, Object Passing, Obtaining Current Route Component Instances, Irregular Polygon Drawing, and Checkbox Groups</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:09:35 / Modified: 08:10:55" itemprop="dateCreated datePublished" datetime="2025-06-25T08:09:35+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Popup-Components-Object-Passing-Obtaining-Current-Route-Component-Instances-Irregular-Polygon-Drawing-and-Checkbox-Groups"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Popup-Components-Object-Passing-Obtaining-Current-Route-Component-Instances-Irregular-Polygon-Drawing-and-Checkbox-Groups" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Popup Components, Object Passing, Obtaining Current Route Component Instances, Irregular Polygon Drawing, and Checkbox Groups"></a>【Daily HarmonyOS Next Knowledge】 Popup Components, Object Passing, Obtaining Current Route Component Instances, Irregular Polygon Drawing, and Checkbox Groups</h3><h4 id="1-Recommend-a-Popup-Component-in-HarmonyOS-that-Can-Anchor-Below-a-Specific-Component"><a href="#1-Recommend-a-Popup-Component-in-HarmonyOS-that-Can-Anchor-Below-a-Specific-Component" class="headerlink" title="1. Recommend a Popup Component in HarmonyOS that Can Anchor Below a Specific Component"></a>1. Recommend a Popup Component in HarmonyOS that Can Anchor Below a Specific Component</h4><p>Is there a recommended popup component that allows setting the position to anchor below a specific component? Can a global custom popup meet this requirement?  </p>
<p>Currently, <code>bindPopup</code> can be used. Refer to the link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-popup-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-popup-V5</a>  </p>
<p><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Hello World&#39;;
  @State handlePopup: boolean = false;

  build() &#123;
    Column() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
      &#125;
      .width(&#39;100%&#39;)
      .height(&#39;200vp&#39;)
      .alignItems(HorizontalAlign.Start)
      .justifyContent(FlexAlign.Start)
      .backgroundColor(Color.Orange)
      .onClick(() =&gt; &#123;
        this.handlePopup = !this.handlePopup;
      &#125;)
      .bindPopup(this.handlePopup, &#123; 
        message: &#39;This is a popup with PopupOptions This is a popup with PopupOptions&#39; +
                 &#39; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39; +
                 &#39; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39; +
                 &#39; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39; +
                 &#39; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;,
        messageOptions: &#123; 
          textColor: Color.Red,
          font: &#123;
            size: &#39;14vp&#39;,
            style: FontStyle.Italic,
            weight: FontWeight.Bolder
          &#125;
        &#125;,
        placement: Placement.Bottom,
        enableArrow: false,
        width: &#39;100%&#39;,
        radius: 0,
        onStateChange: (e) =&gt; &#123;
          console.info(JSON.stringify(e.isVisible));
          if (!e.isVisible) &#123;
            this.handlePopup = false;
          &#125;
        &#125;
      &#125;);
    &#125;
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-Use-ObjectLink-in-HarmonyOS"><a href="#2-How-to-Use-ObjectLink-in-HarmonyOS" class="headerlink" title="2. How to Use @ObjectLink in HarmonyOS"></a>2. How to Use @ObjectLink in HarmonyOS</h4><p>The page data is an array of <code>ClassA</code>, and <code>ClassA</code> contains an array of <code>ClassB</code>, structured as follows:  </p>
<pre><code class="language-typescript">@Observed
export class ClassA &#123;
  a: number;
  datas: ClassB[];
&#125;

@Observed
export class ClassB &#123;
  b: number;
  c: number;
&#125;

@Entry
@Component
struct Index &#123;
  @State pageDatas: ClassA[] = [];

  build() &#123;
    Tabs(&#123; barPosition: BarPosition.Start, index: this.currentIndex, controller: this.controller &#125;) &#123;
      ForEach(this.pageDatas, (page_item: ClassA, page_index: number) =&gt; &#123;
        TabContent() &#123;
          PageView(&#123;
            page_item: page_item,
          &#125;)
        &#125;
      &#125;);
    &#125;
  &#125;

  @Component
  export struct PageView &#123;
    @ObjectLink page_item: ClassA;

    build() &#123;
      Column() &#123;
        Text(this.page_item.a + &quot;&quot;)
          .onClick((e: ClickEvent) =&gt; &#123;
            // Pop up a dialog to select the &#39;a&#39; value
            this.page_item.a = selecta;
          &#125;);

        ForEach(this.page_item.datas, (item: ClassB, index: number) =&gt; &#123;
          ItemView(&#123;
            page_item: this.page_item,
            item: item
          &#125;);
        &#125;, (item: ClassB) =&gt; JSON.stringify(item));
      &#125;
    &#125;
  &#125;

  @Component
  export struct ItemView &#123;
    @ObjectLink page_item: ClassA;
    @ObjectLink item: ClassB;

    build() &#123;
      Row() &#123;
        Button(&quot;加1&quot;)
          .onClick((e: ClickEvent) =&gt; &#123;
            this.item.b = this.item.b + 1;
          &#125;);

        TextInput(&#123; text: this.item.b === 0 ? &#39;&#39; : this.item.b.toString() &#125;)
          .onChange((value: string) =&gt; &#123;
            if (value === null || value === undefined || value === &#39;&#39;) &#123;
              this.item.b = 0;
            &#125; else &#123;
              this.item.b = parseInt(value);
            &#125;
          &#125;);

        Text(this.page_item.a * this.item.b * this.item.c + &quot;m³&quot;);
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<p><strong>Desired effects</strong>:  </p>
<ol>
<li>Clicking in each page of the <code>Index</code> page pops up a dialog to select the <code>a</code> value, which should update the display of <code>Text(this.page_item.a * item.b * item.c + &quot;m³&quot;)</code>.  </li>
<li>Entering values in <code>TextInput</code> should also update the above text.  </li>
<li>Clicking the <code>Button</code> should update the value in <code>TextInput</code> and the above text.</li>
</ol>
<p><strong>Solution</strong>: Use the <code>@ObjectLink</code> decorator to monitor deep nested object changes. For complex nested objects, refer to:  </p>
<ul>
<li>Object array usage: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84</a>  </li>
<li>Cases where nested object property changes fail: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%A4%8D%E6%9D%82%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%94%B9%E5%A4%B1%E6%95%88">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5#%E5%A4%8D%E6%9D%82%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%94%B9%E5%A4%B1%E6%95%88</a></li>
</ul>
<h4 id="3-Can-HarmonyOS-Obtain-the-Instance-of-the-Current-Route’s-Page-Component"><a href="#3-Can-HarmonyOS-Obtain-the-Instance-of-the-Current-Route’s-Page-Component" class="headerlink" title="3. Can HarmonyOS Obtain the Instance of the Current Route’s Page Component?"></a>3. Can HarmonyOS Obtain the Instance of the Current Route’s Page Component?</h4><p><strong>Application scenario</strong>: Encapsulate independent dialog components (e.g., Loading, Toast).  </p>
<pre><code class="language-typescript">function getCurrentPageInstance() &#123;
  return // Get the instance of the current route&#39;s page component
&#125;

@Builder
function XLoadingBuilder(text: string) &#123;
  // ...
&#125;

export class XLoading &#123;
  static show() &#123;
    promptAction.openCustomDialog(&#123;
      builder: XLoadingBuilder.bind(getCurrentPageInstance(), &#39;加载中...&#39;),
      alignment: DialogAlignment.Center,
      isModal: true,
      backgroundColor: Color.Transparent,
      maskColor: Color.Transparent,
      autoCancel: true,
    &#125;);
  &#125;
&#125;

// Usage:
XLoading.show();
</code></pre>
<p><strong>References</strong>:  </p>
<ul>
<li>UIContext: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-arkui-UIContext.md#uicontext">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-arkui-UIContext.md#uicontext</a>  </li>
<li><code>openCustomDialog</code>: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-arkui-UIContext.md#opencustomdialog12">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-arkui-UIContext.md#opencustomdialog12</a></li>
</ul>
<h4 id="4-How-to-Draw-Irregular-Polygons-and-Add-Click-Events-in-HarmonyOS"><a href="#4-How-to-Draw-Irregular-Polygons-and-Add-Click-Events-in-HarmonyOS" class="headerlink" title="4. How to Draw Irregular Polygons and Add Click Events in HarmonyOS"></a>4. How to Draw Irregular Polygons and Add Click Events in HarmonyOS</h4><p><strong>Method</strong>: Find an icon on <a target="_blank" rel="noopener" href="http://www.iconfont.cn/">www.iconfont.cn</a>, copy the SVG code, and paste the <code>d</code> attribute from the <code>path</code> tag into the <code>commands</code> property.  </p>
<p><strong>Demo</strong>:  </p>
<pre><code class="language-typescript">let d = &#39;M1016.832 606.208q2.048 12.288-1.024 29.696t-10.24 35.328-17.408 32.256-22.528 20.48-21.504 6.144-20.48-4.096q-10.24-3.072-25.6-5.632t-31.232-1.024-31.744 6.656-27.136 17.408q-24.576 25.6-28.672 58.368t9.216 62.464q10.24 20.48-3.072 40.96-6.144 8.192-19.456 16.896t-29.184 15.872-33.28 11.264-30.72 4.096q-9.216 0-17.408-7.168t-11.264-15.36l-1.024 0q-11.264-31.744-38.4-54.784t-62.976-23.04q-34.816 0-62.976 23.04t-39.424 53.76q-5.12 12.288-15.36 17.92t-22.528 5.632q-14.336 0-32.256-5.12t-35.84-12.8-32.256-17.92-21.504-20.48q-5.12-7.168-5.632-16.896t7.68-27.136q11.264-23.552 8.704-53.76t-26.112-55.808q-14.336-15.36-34.816-19.968t-38.912-3.584q-21.504 1.024-44.032 8.192-14.336 4.096-28.672-2.048-11.264-4.096-20.992-18.944t-17.408-32.768-11.776-36.864-2.048-31.232q3.072-22.528 20.48-28.672 30.72-12.288 55.296-40.448t24.576-62.976q0-35.84-24.576-62.464t-55.296-38.912q-9.216-3.072-15.36-14.848t-6.144-24.064q0-13.312 4.096-29.696t10.752-31.744 15.36-28.16 18.944-18.944q8.192-5.12 15.872-4.096t16.896 4.096q30.72 12.288 64 7.68t58.88-29.184q12.288-12.288 17.92-30.208t7.168-35.328 0-31.744-2.56-20.48q-2.048-6.144-3.584-14.336t1.536-14.336q6.144-14.336 22.016-25.088t34.304-17.92 35.84-10.752 27.648-3.584q13.312 0 20.992 8.704t10.752 17.92q11.264 27.648 36.864 48.64t60.416 20.992q35.84 0 63.488-19.968t38.912-50.688q4.096-8.192 12.8-16.896t17.92-8.704q14.336 0 31.232 4.096t33.28 11.264 30.208 18.432 22.016 24.576q5.12 8.192 3.072 17.92t-4.096 13.824q-13.312 29.696-8.192 62.464t29.696 57.344 60.416 27.136 66.56-11.776q8.192-5.12 19.968-4.096t19.968 9.216q15.36 14.336 27.136 43.52t15.872 58.88q2.048 17.408-5.632 27.136t-15.872 12.8q-31.744 11.264-54.272 39.424t-22.528 64q0 34.816 18.944 60.928t49.664 37.376q7.168 4.096 12.288 8.192 11.264 9.216 15.36 23.552zM540.672 698.368q46.08 0 87.04-17.408t71.168-48.128 47.616-71.168 17.408-86.528-17.408-86.528-47.616-70.656-71.168-47.616-87.04-17.408-86.528 17.408-70.656 47.616-47.616 70.656-17.408 86.528 17.408 86.528 47.616 71.168 70.656 48.128 86.528 17.408z&#39;;

@Entry
@Component
struct Index &#123;
  build() &#123;
    Column() &#123;
      Path().width(&#39;100%&#39;).height(&#39;100%&#39;)
        .commands(d)
        .stroke(&#39;#8a8a8a&#39;).strokeWidth(3);
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="5-Can-CheckboxGroup-in-HarmonyOS-Reference-an-Upper-Level-CheckboxGroup"><a href="#5-Can-CheckboxGroup-in-HarmonyOS-Reference-an-Upper-Level-CheckboxGroup" class="headerlink" title="5. Can CheckboxGroup in HarmonyOS Reference an Upper-Level CheckboxGroup?"></a>5. Can CheckboxGroup in HarmonyOS Reference an Upper-Level CheckboxGroup?</h4><p><strong>Can CheckboxGroup reference an upper-level CheckboxGroup?</strong>  </p>
<p>The CheckboxGroup component can associate with other CheckboxGroup components to reference an upper-level group. Implementation steps:  </p>
<ol>
<li><p><strong>Basic functions of CheckboxGroup</strong>:  </p>
<ul>
<li>CheckboxGroup is a checkbox group component that controls whether checkboxes in the group are fully selected.  </li>
<li>Each CheckboxGroup has a unique <code>group</code> value; CheckboxGroup and Checkbox with the same <code>group</code> value belong to the same group.</li>
</ul>
</li>
<li><p><strong>Referencing an upper-level CheckboxGroup</strong>:  </p>
<ul>
<li>Set the <code>group</code> attribute of CheckboxGroup to associate with another CheckboxGroup.  </li>
<li>Two CheckboxGroups with the same <code>group</code> value are treated as the same group.</li>
</ul>
</li>
<li><p><strong>Example</strong>:  </p>
<ul>
<li>Suppose there are two CheckboxGroups: CheckboxGroupA and CheckboxGroupB.  </li>
<li>To make CheckboxGroupB reference CheckboxGroupA, set CheckboxGroupB’s <code>group</code> value to CheckboxGroupA’s <code>group</code> value.</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">212</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
