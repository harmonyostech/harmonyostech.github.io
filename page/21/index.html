<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/21/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/21/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/307-Daily-HarmonyOS-Next-Knowledge-Screen-Parameters-Semi-Modal-Related-Three-Level-Linkage-Partial-Card-Display-Custom-Drawing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/307-Daily-HarmonyOS-Next-Knowledge-Screen-Parameters-Semi-Modal-Related-Three-Level-Linkage-Partial-Card-Display-Custom-Drawing/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Screen Parameters, Semi-Modal Related, Three-Level Linkage, Partial Card Display, Custom Drawing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:16:58 / Modified: 22:06:54" itemprop="dateCreated datePublished" datetime="2025-06-26T20:16:58+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Screen-Parameters-Semi-Modal-Related-Three-Level-Linkage-Partial-Card-Display-Custom-Drawing"><a href="#Daily-HarmonyOS-Next-Knowledge-Screen-Parameters-Semi-Modal-Related-Three-Level-Linkage-Partial-Card-Display-Custom-Drawing" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Screen Parameters, Semi-Modal Related, Three-Level Linkage, Partial Card Display, Custom Drawing"></a>[Daily HarmonyOS Next Knowledge] Screen Parameters, Semi-Modal Related, Three-Level Linkage, Partial Card Display, Custom Drawing</h3><h4 id="1-How-to-obtain-screen-xdpi-and-ydpi-data-in-HarmonyOS"><a href="#1-How-to-obtain-screen-xdpi-and-ydpi-data-in-HarmonyOS" class="headerlink" title="1. How to obtain screen xdpi and ydpi data in HarmonyOS?"></a>1. How to obtain screen xdpi and ydpi data in HarmonyOS?</h4><p>You can use <code>display.getDefaultDisplaySync</code>. Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5</a>  </p>
<p>@ohos.display (Screen Properties): Screen properties provide basic capabilities for managing display devices, including obtaining information about the default display device, obtaining information about all display devices, and monitoring the plugging and unplugging behavior of display devices.<br>Import module: <code>import &#123; display &#125; from &#39;@kit.ArkUI&#39;;</code>  </p>
<h4 id="2-How-to-use-semi-modal-in-HarmonyOS"><a href="#2-How-to-use-semi-modal-in-HarmonyOS" class="headerlink" title="2. How to use semi-modal in HarmonyOS?"></a>2. How to use semi-modal in HarmonyOS?</h4><ol>
<li>The transition mode for the login page should be semi-modal, but based on research, it can only be bound via the <code>bindSheet</code> attribute, which requires declaring a <code>builder</code> (a custom build function for a custom component). Treating the login page as a custom build function for another component is unreasonable. Are there other ways to achieve semi-modal?  </li>
<li>When clicking certain items in a List, a pop-up window is expected to appear in a semi-modal effect. Using <code>bindSheet</code> to implement this may result in two pop-up windows.</li>
</ol>
<p><strong>Issue 1</strong> Reference demo: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/multimodaltransion">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/multimodaltransion</a><br><strong>Issue 2</strong> Using <code>ForEach</code> to bind a semi-modal page to each ListItem, with all semi-modal page display controls using the same field <code>isShow1</code>. This causes multiple semi-modal pages to display when <code>isShow1</code> changes.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> arrData &#123;</span><br><span class="line">  <span class="attr">itemData</span>: <span class="title class_">ItemInData</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ItemInData</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SheetTransitionExample</span> &#123;</span><br><span class="line">  <span class="attr">showItem</span>: <span class="title class_">ItemInData</span> = <span class="keyword">new</span> <span class="title class_">ItemInData</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  <span class="attr">arrData</span>: arrData[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">itemData</span>: [<span class="keyword">new</span> <span class="title class_">ItemInData</span>(<span class="string">&#x27;1组1&#x27;</span>)]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">itemData</span>: [<span class="keyword">new</span> <span class="title class_">ItemInData</span>(<span class="string">&#x27;2组1&#x27;</span>), <span class="keyword">new</span> <span class="title class_">ItemInData</span>(<span class="string">&#x27;2组2&#x27;</span>), <span class="keyword">new</span> <span class="title class_">ItemInData</span>(<span class="string">&#x27;2组3&#x27;</span>)]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">isShow</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">myBuilder</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(name)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">TODO:</span> Knowledge point: Bind a semi-modal page to a component via the bindSheet attribute. Since the semi-modal must be bound to a component,</span></span><br><span class="line"><span class="comment">       * a styleless Text component is bound here to display the splash semi-modal.</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="title class_">Text</span>().<span class="title function_">bindSheet</span>($$this.<span class="property">isShow</span>, <span class="variable language_">this</span>.<span class="title function_">myBuilder</span>(<span class="variable language_">this</span>.<span class="property">showItem</span>.<span class="property">name</span>), &#123;</span><br><span class="line">        <span class="attr">showClose</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">preferType</span>: <span class="title class_">SheetType</span>.<span class="property">CENTER</span>,</span><br><span class="line">        <span class="attr">onWillAppear</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;BindSheet onWillAppear.&quot;</span> + <span class="variable language_">this</span>.<span class="property">showItem</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">onWillDisappear</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;BindSheet onWillDisappear.&quot;</span>+ <span class="variable language_">this</span>.<span class="property">showItem</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arrData</span>, <span class="function">(<span class="params"><span class="attr">item</span>: arrData, <span class="attr">groupId</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItemGroup</span>() &#123;</span><br><span class="line">            <span class="title class_">ForEach</span>(item.<span class="property">itemData</span>, <span class="function">(<span class="params"><span class="attr">project</span>: <span class="title class_">ItemInData</span>, <span class="attr">rowIdOfGroup</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">                <span class="title class_">Button</span>(project.<span class="property">name</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">                  .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">              &#125;</span><br><span class="line">              .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">isShow</span> = <span class="literal">true</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">showItem</span> = project;</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">0.5</span>, <span class="attr">color</span>: <span class="string">&#x27;#CFD6D6&#x27;</span> &#125;) <span class="comment">// Divider between each row</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to create a province-city-district selector with three-level linkage in HarmonyOS?  </span></span><br><span class="line"><span class="string">This can be implemented using `</span><span class="title class_">TextPicker</span><span class="string">`. Reference document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textpicker-V5  </span></span><br><span class="line"><span class="string">Sample code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextPickerExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">cascade</span>: <span class="title class_">TextCascadePickerRangeContent</span>[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;辽宁省&#x27;</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;沈阳市&#x27;</span>, <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;沈河区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;和平区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;浑南区&#x27;</span> &#125;] &#125;,</span><br><span class="line">        &#123; <span class="attr">text</span>: <span class="string">&#x27;大连市&#x27;</span>, <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;中山区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;金州区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;长海县&#x27;</span> &#125;] &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;吉林省&#x27;</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;长春市&#x27;</span>, <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;南关区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;宽城区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;朝阳区&#x27;</span> &#125;] &#125;,</span><br><span class="line">        &#123; <span class="attr">text</span>: <span class="string">&#x27;四平市&#x27;</span>, <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;铁西区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;铁东区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;梨树县&#x27;</span> &#125;] &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;黑龙江省&#x27;</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;哈尔滨市&#x27;</span>, <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;道里区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;道外区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;南岗区&#x27;</span> &#125;] &#125;,</span><br><span class="line">        &#123; <span class="attr">text</span>: <span class="string">&#x27;牡丹江市&#x27;</span>, <span class="attr">children</span>: [&#123; <span class="attr">text</span>: <span class="string">&#x27;东安区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;西安区&#x27;</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">&#x27;爱民区&#x27;</span> &#125;] &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">TextPicker</span>(&#123; <span class="attr">range</span>: <span class="variable language_">this</span>.<span class="property">cascade</span> &#125;)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span> | <span class="built_in">string</span>[], <span class="attr">index</span>: <span class="built_in">number</span> | <span class="built_in">number</span>[]</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;TextPicker multi-column linkage: onChange &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value) + <span class="string">&#x27;, &#x27;</span> + <span class="string">&#x27;index: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(index))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="title class_">TextPicker</span>(<span class="attr">options</span>?: <span class="title class_">TextPickerOptions</span>)<span class="string">`  </span></span><br><span class="line"><span class="string">Creates a text picker based on the selection range specified by `</span>range<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Parameter name | Type                | Required | Description       |</span></span><br><span class="line"><span class="string">| :--------- | :---------------- | :-- | :------------ |</span></span><br><span class="line"><span class="string">| options    | TextPickerOptions | No    | Parameters for configuring the text picker. |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Name       | Type                                                                                                            | Required | Description                                                                                                                                                                                                                                                                                   |</span></span><br><span class="line"><span class="string">| :------- | :------------------------------------------------------------------------------------------------------------ | :-- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |</span></span><br><span class="line"><span class="string">| range    | `</span><span class="built_in">string</span>[] \| <span class="built_in">string</span>[] []<span class="number">10</span>+ \| <span class="title class_">Resource</span> \|<span class="title class_">TextPickerRangeContent</span>)[]<span class="number">10</span>+ \| <span class="title class_">TextCascadePickerRangeContent</span>[]<span class="number">10</span>+<span class="string">` | Yes    | Data selection list for the picker. Cannot be an empty array; if set to empty, it will not display; if dynamically changed to empty, it will maintain the current normal display.&lt;br&gt;&lt;br&gt;**Note**: Use `</span><span class="built_in">string</span>[]<span class="string">`, `</span><span class="title class_">Resource</span><span class="string">`, or `</span><span class="title class_">TextPickerRangeContent</span>[]<span class="string">` for single-column pickers.&lt;br&gt;Use `</span><span class="built_in">string</span>[][]<span class="string">` for multi-column pickers.&lt;br&gt;Use `</span><span class="title class_">TextCascadePickerRangeContent</span>[]<span class="string">` for multi-column linked pickers.&lt;br&gt;`</span><span class="title class_">Resource</span><span class="string">` type only supports `</span>strarray.<span class="property">json</span><span class="string">`.&lt;br&gt;The type and number of columns in `</span>range<span class="string">` cannot be modified dynamically. |</span></span><br><span class="line"><span class="string">| selected | `</span><span class="built_in">number</span> \| <span class="built_in">number</span>[]<span class="number">10</span>+<span class="string">`                                                                                       | No    | Sets the index of the default selected item in the array.&lt;br&gt;&lt;br&gt;Default: 0&lt;br&gt;&lt;br&gt;**Note**: Use `</span><span class="built_in">number</span><span class="string">` for single-column pickers.&lt;br&gt;Use `</span><span class="built_in">number</span>[]<span class="string">` for multi-column and multi-column linked pickers.&lt;br&gt;Starting from API version 10, this parameter supports `</span>$$<span class="string">` two-way binding variables.                                                                                                                                          |</span></span><br><span class="line"><span class="string">| value    | `</span><span class="built_in">string</span> \| <span class="built_in">string</span>[]<span class="number">10</span>+<span class="string">`                                                                                       | No    | Sets the value of the default selected item, with lower priority than `</span>selected<span class="string">`.&lt;br&gt;&lt;br&gt;Default: Value of the first element&lt;br&gt;&lt;br&gt;**Note**: Valid only for text lists. Invalid for image or image+text lists.&lt;br&gt;Use `</span><span class="built_in">string</span><span class="string">` for single-column pickers.&lt;br&gt;Use `</span><span class="built_in">string</span>[]<span class="string">` for multi-column and multi-column linked pickers.&lt;br&gt;Starting from API version 10, this parameter supports `</span>$$<span class="string">` two-way binding variables.                                                                                   |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. When the HarmonyOS List component exceeds its size, the last CardView only partially displays?  </span></span><br><span class="line"><span class="string">Adding a fixed-size View in a Column, with the List filling the remaining space. When the List content exceeds one screen, the last CardView cannot be fully displayed.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Replace the Column component with a Flex elastic layout, and other settings (e.g., `</span><span class="title class_">NavigationBar</span>.<span class="title function_">height</span>(90vp)<span class="string">`) remain fixed.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Dynamically setting `</span>lineto<span class="string">` in HarmonyOS Canvas?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;draw&#x27;</span>)<span class="attr">content</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>) <span class="comment">// Clear canvas content</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="variable language_">this</span>.<span class="property">content</span>, <span class="number">50</span>, <span class="number">50</span>) <span class="comment">// Repaint</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;25%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F5DC62&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// Draw content here.</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;55px sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="variable language_">this</span>.<span class="property">content</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">TextInput</span>(&#123;</span><br><span class="line">        <span class="attr">text</span>:$$this.<span class="property">content</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">borderColor</span>(<span class="string">&#x27;#31525B&#x27;</span>)</span><br><span class="line">    .<span class="title function_">borderWidth</span>(<span class="number">12</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/306%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Pull-up-Pull-down-List-Stop-Infinite-Loop-Animation-Page-List-Following-Scroll-OTF-Font-Date-Picker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/306%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Pull-up-Pull-down-List-Stop-Infinite-Loop-Animation-Page-List-Following-Scroll-OTF-Font-Date-Picker/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Pull-up/Pull-down List, Stop Infinite Loop Animation, Page List Following Scroll, OTF Font, Date Picker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:15:31 / Modified: 22:06:56" itemprop="dateCreated datePublished" datetime="2025-06-26T20:15:31+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Pull-up-Pull-down-List-Stop-Infinite-Loop-Animation-Page-List-Following-Scroll-OTF-Font-Date-Picker"><a href="#【Daily-HarmonyOS-Next-Knowledge】Pull-up-Pull-down-List-Stop-Infinite-Loop-Animation-Page-List-Following-Scroll-OTF-Font-Date-Picker" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Pull-up&#x2F;Pull-down List, Stop Infinite Loop Animation, Page List Following Scroll, OTF Font, Date Picker"></a>【Daily HarmonyOS Next Knowledge】Pull-up&#x2F;Pull-down List, Stop Infinite Loop Animation, Page List Following Scroll, OTF Font, Date Picker</h3><h4 id="1-How-to-implement-only-pull-up-to-load-more-without-pull-down-to-refresh-in-HarmonyOS"><a href="#1-How-to-implement-only-pull-up-to-load-more-without-pull-down-to-refresh-in-HarmonyOS" class="headerlink" title="1. How to implement only pull-up to load more without pull-down to refresh in HarmonyOS?"></a>1. How to implement only pull-up to load more without pull-down to refresh in HarmonyOS?</h4><p>Refresh uses the <code>refreshing</code> parameter to determine if the component is refreshing, and you can control this parameter to trigger pull-down refresh: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5#ZH-CN_TOPIC_0000001930756929__refreshoptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5#ZH-CN_TOPIC_0000001930756929__refreshoptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E</a>  </p>
<p>Demo:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct RefreshExample &#123;</span><br><span class="line">  @State isRefreshing: boolean = false</span><br><span class="line">  @State arr: String[] = [&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;,&#x27;5&#x27;,&#x27;6&#x27;,&#x27;7&#x27;,&#x27;8&#x27;,&#x27;9&#x27;,&#x27;10&#x27;]</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Button(&#x27;Refresh&#x27;).onClick(()=&gt;&#123;</span><br><span class="line">        this.isRefreshing = true</span><br><span class="line">      &#125;)</span><br><span class="line">      Refresh(&#123; refreshing: $$this.isRefreshing&#125;) &#123;</span><br><span class="line">        List() &#123;</span><br><span class="line">          ForEach(this.arr, (item: string) =&gt; &#123;</span><br><span class="line">            ListItem() &#123;</span><br><span class="line">              Text(&#x27;&#x27; + item)</span><br><span class="line">                .width(&#x27;100%&#x27;).height(100).fontSize(16)</span><br><span class="line">                .textAlign(TextAlign.Center).borderRadius(10).backgroundColor(0xFFFFFF)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, (item: string) =&gt; item)</span><br><span class="line">        &#125;</span><br><span class="line">        .onScrollIndex((first: number) =&gt; &#123;</span><br><span class="line">          console.info(first.toString())</span><br><span class="line">        &#125;)</span><br><span class="line">        .width(&#x27;100%&#x27;)</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">        .divider(&#123;strokeWidth:1,color:Color.Yellow,startMargin:10,endMargin:10&#125;)</span><br><span class="line">        .scrollBar(BarState.Off)</span><br><span class="line">      &#125;</span><br><span class="line">      .onStateChange((refreshStatus: RefreshStatus) =&gt; &#123;</span><br><span class="line">        console.info(&#x27;Refresh onStatueChange state is &#x27; + refreshStatus)</span><br><span class="line">      &#125;)</span><br><span class="line">      .onOffsetChange((value: number) =&gt; &#123;</span><br><span class="line">        console.info(&#x27;Refresh onOffsetChange offset:&#x27; + value)</span><br><span class="line">      &#125;)</span><br><span class="line">      .onRefreshing(() =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">          this.isRefreshing = false</span><br><span class="line">        &#125;, 2000)</span><br><span class="line">        console.log(&#x27;onRefreshing test&#x27;)</span><br><span class="line">      &#125;)</span><br><span class="line">      .backgroundColor(0x89CFF0)</span><br><span class="line">      .refreshOffset(64)</span><br><span class="line">      .pullToRefresh(true)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. How to stop an infinite loop animation in HarmonyOS?  </span><br><span class="line">How to stop an infinite loop animation  </span><br><span class="line"></span><br><span class="line">After triggering an infinite loop animation for the first time, quickly clicking to interrupt it makes the animation invisible on subsequent clicks. **Cause**: The animation doesn’t stop but overlays continuously, making changes less obvious. **Solution**: Set an animation with `duration: 0` to stop the previous animation, ensuring the target value differs from the last end value, then create the desired animation. Simple example:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>struct Page240119142354017 {<br>  @State message: string &#x3D; “Hello World”;<br>  @State opacityValue: number &#x3D; 0.5<br>  @State isRecording: boolean &#x3D; false;</p>
<p>  build() {<br>    Row() {<br>      Column() {<br>        Text(this.message)<br>          .fontSize(50)<br>          .fontWeight(FontWeight.Bold)<br>          .opacity(this.opacityValue)<br>          .onClick(() &#x3D;&gt; {<br>            if(this.isRecording) {<br>              &#x2F;&#x2F; Set an animation with duration 0 to stop the previous animation<br>              animateTo({ duration: 0, iterations: 1, playMode: PlayMode.Normal }, () &#x3D;&gt; {<br>                &#x2F;&#x2F; opacityValue must differ from the previous end value (0.1)<br>                this.opacityValue &#x3D; 0.2<br>              })<br>              this.isRecording &#x3D; false;<br>              &#x2F;&#x2F; Create the desired animation<br>              animateTo({ duration: 0, iterations: 1, playMode: PlayMode.Normal }, () &#x3D;&gt; {<br>                this.opacityValue &#x3D; 1<br>              })<br>            } else {<br>              this.isRecording &#x3D; true<br>              animateTo({ duration: 1500, iterations: -1, }, () &#x3D;&gt; {<br>                this.opacityValue &#x3D; 0.1<br>              })<br>            }<br>          })<br>      }<br>      .width(“100%”)<br>    }<br>    .height(“100%”)<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 3. How to make one list follow another list&#x27;s scroll on the same page in HarmonyOS?  </span><br><span class="line">How to make two lists on the same page scroll in sync?  </span><br><span class="line"></span><br><span class="line">Reference demo:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>struct index240426171014042 {<br>  @State dataList: Array<number> &#x3D; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]</p>
<p>  private leftListScroller: Scroller &#x3D; new Scroller()<br>  private rightListScroller: Scroller &#x3D; new Scroller()<br>  private scrollFlag &#x3D; -1 &#x2F;&#x2F; 1&#x3D;Left, 2&#x3D;Right</p>
<p>  build() {<br>    Row() {<br>      this.left()<br>      this.right()<br>    }<br>    .width(‘100%’)<br>    .height(‘100%’)<br>    .backgroundColor(‘#a68765’)<br>  }</p>
<p>  &#x2F;&#x2F; Left list<br>  @Builder<br>  left() {<br>    Column() {<br>      Text(‘Header’).width(100).height(100)<br>      List({ scroller: this.leftListScroller }) {<br>        ForEach(this.dataList, (item: number, index) &#x3D;&gt; {<br>          ListItem() {<br>            Row() {<br>              Text(<code>Left$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            }<br>            .width(“100%”)<br>            .height(100)<br>            .backgroundColor(Color.Blue)<br>          }<br>        })<br>      }<br>      .width(100)<br>      .height(“100%”)<br>      .cachedCount(5)<br>      .edgeEffect(EdgeEffect.None)<br>      .onScrollStart(() &#x3D;&gt; {<br>        this.scrollFlag &#x3D; 1<br>      })<br>      .onScrollStop(() &#x3D;&gt; {<br>        this.scrollFlag &#x3D; -1<br>      })<br>      .onScrollFrameBegin((offset: number, state: ScrollState) &#x3D;&gt; {<br>        if (this.scrollFlag &#x3D;&#x3D; 1) {<br>          let yOffset &#x3D; this.leftListScroller.currentOffset().yOffset + offset<br>          this.rightListScroller.scrollTo({ xOffset: 0, yOffset: yOffset })<br>        } return { offsetRemain: offset }<br>      })<br>    }<br>  }</p>
<p>  &#x2F;&#x2F; Right list<br>  @Builder<br>  right() {<br>    Scroll() {<br>      Column() {<br>        Text(‘Header’).width(700).height(100)<br>        this.rightList()<br>      }<br>      .width(700)<br>      .height(‘100%’)<br>      .alignItems(HorizontalAlign.Start)<br>      .backgroundColor(Color.Orange)<br>    }<br>    .width(700)<br>    .height(‘100%’)<br>    .scrollable(ScrollDirection.Horizontal)<br>    .backgroundColor(Color.Pink)<br>  }</p>
<p>  &#x2F;&#x2F; Right list content<br>  @Builder<br>  rightList() {<br>    List({ scroller: this.rightListScroller }) {<br>      ForEach(this.dataList, (item: number, index) &#x3D;&gt; {<br>        ListItem() {<br>          Row() {<br>            Text(<code>Column1$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            Text(<code>Column2$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            Text(<code>Column3$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            Text(<code>Column4$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            Text(<code>Column5$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            Text(<code>Column6$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>            Text(<code>Column7$&#123;item&#125;</code>).width(100).textAlign(TextAlign.Center)<br>          }<br>          .width(‘100%’)<br>          .height(100)<br>        }<br>      })<br>    }<br>    .width(700)<br>    .height(‘100%’)<br>    .edgeEffect(EdgeEffect.None)<br>    .backgroundColor(Color.Yellow)<br>    .onScrollStart(() &#x3D;&gt; {<br>      this.scrollFlag &#x3D; 2<br>    })<br>    .onScrollStop(() &#x3D;&gt; {<br>      this.scrollFlag &#x3D; -1<br>    })<br>    .onScrollFrameBegin((offset: number, state: ScrollState) &#x3D;&gt; {<br>      if (this.scrollFlag &#x3D;&#x3D; 2) {<br>        let yOffset &#x3D; this.rightListScroller.currentOffset().yOffset + offset<br>        this.leftListScroller.scrollTo({ xOffset: 0, yOffset: yOffset })<br>      } return { offsetRemain: offset }<br>    })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 4. Does HarmonyOS ArkUI&#x27;s Text support OTF font files?  </span><br><span class="line">Use `$rawfile` as shown in the document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-font-V5  </span><br><span class="line"></span><br><span class="line">Font file path: `src/main/resources/rawfile/font/gealova.otf`  </span><br><span class="line"></span><br><span class="line">Code example:  </span><br></pre></td></tr></table></figure>
<p>font.registerFont({<br>  familyName: ‘Gealova’,<br>  familySrc: $rawfile(‘font&#x2F;gealova.otf’)<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Register fonts in `onWindowStageCreate` of EntryAbility and run on the emulator:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; In EntryAbility’s onWindowStageCreate:<br>windowStage.getMainWindow().then(res&#x3D;&gt;{<br>  &#x2F;&#x2F; Register fonts<br>  const uiCtc&#x3D;res.getUIContext()<br>  uiCtc.getFont().registerFont({<br>    familyName:’mediumRawFile’,<br>    familySrc:$rawfile(‘font&#x2F;BLACKTW-Bold.otf’)<br>  })<br>  uiCtc.getFont().registerFont({<br>    familyName:’twrafile’,<br>    familySrc:$rawfile(‘font&#x2F;TW-Bold.otf’)<br>  })<br>})</p>
<p>&#x2F;&#x2F; index.ets<br>@Entry<br>@Component<br>struct index{<br>  @State message: string &#x3D; ‘Hello World’<br>  build() {<br>    Column() {<br>      Text(this.message)<br>        .align(Alignment.Center)<br>        .fontSize(20)<br>        .fontFamily(‘mediumRawFile’) &#x2F;&#x2F; mediumRawFile: Registered custom font name<br>      Text(‘eeeee’)<br>        .align(Alignment.Center)<br>        .fontSize(20)<br>        .fontFamily(‘twrafile’)<br>    }.width(‘100%’)<br>  }<br>}</p>
<pre><code>
#### 5. HarmonyOS DatePicker: How to display only year and month?  
To display only year and month, use `TextPickerDialog` and set可选年月 (optional year-month) in the `range` field. Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textpicker-V5  

`TextPicker(options?: TextPickerOptions)`  
Creates a text picker based on the selection range specified by `range`.  

**TextPickerOptions object description**:  

| Name     | Type                                                                                                        | Required | Description                                                                                                                                                                                                                                                                                  |
| :------- | :-------------------------------------------------------------------------------------------------------- | :------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| range    | `string[] \| string[] []10+ \| Resource \|&lt;br&gt;TextPickerRangeContent[]\| TextCascadePickerRangeContent[]` | Yes     | Data selection list for the picker. Cannot be an empty array; if set to empty, it will not display; if dynamically changed to empty, it will maintain the current normal display.&lt;br&gt;&lt;br&gt;**Note**: Use `string[]`, `Resource`, or `TextPickerRangeContent[]` for single-column pickers.&lt;br&gt;Use `string[][]` for multi-column pickers.&lt;br&gt;Use `TextCascadePickerRangeContent[]` for multi-column linked pickers.&lt;br&gt;`Resource` type only supports `strarray.json`.&lt;br&gt;The type and number of columns in `range` cannot be modified dynamically. |
| selected | number \| number[]10+                                                                                     | No      | Sets the index of the default selected item in the array.&lt;br&gt;&lt;br&gt;Default: 0&lt;br&gt;&lt;br&gt;**Note**: Use `number` for single-column pickers.&lt;br&gt;Use `number[]` for multi-column and multi-column linked pickers.&lt;br&gt;Starting from API version 10, this parameter supports `$$` two-way binding variables.                                                                                                                                        |
| value    | string \| string[]10+                                                                                     | No      | Sets the value of the default selected item, with lower priority than `selected`.&lt;br&gt;&lt;br&gt;Default: Value of the first element&lt;br&gt;&lt;br&gt;**Note**: Valid only for text lists. Invalid for image or image+text lists.&lt;br&gt;Use `string` for single-column pickers.&lt;br&gt;Use `string[]` for multi-column and multi-column linked pickers.&lt;br&gt;Starting from API version 10, this parameter supports `$$` two-way binding variables.                                                                                  |
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/305-Daily-HarmonyOS-Next-Knowledge-Image-Dragging-Animation-Zoom-List-Height-Back-Button-Listening-Divider-Color/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/305-Daily-HarmonyOS-Next-Knowledge-Image-Dragging-Animation-Zoom-List-Height-Back-Button-Listening-Divider-Color/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Image Dragging, Animation Zoom, List Height, Back Button Listening, Divider Color</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:13:16 / Modified: 22:06:57" itemprop="dateCreated datePublished" datetime="2025-06-26T20:13:16+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Image-Dragging-Animation-Zoom-List-Height-Back-Button-Listening-Divider-Color"><a href="#Daily-HarmonyOS-Next-Knowledge-Image-Dragging-Animation-Zoom-List-Height-Back-Button-Listening-Divider-Color" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Image Dragging, Animation Zoom, List Height, Back Button Listening, Divider Color"></a>[Daily HarmonyOS Next Knowledge] Image Dragging, Animation Zoom, List Height, Back Button Listening, Divider Color</h3><h4 id="1-Can-images-in-HarmonyOS-Image-components-be-dragged-freely"><a href="#1-Can-images-in-HarmonyOS-Image-components-be-dragged-freely" class="headerlink" title="1. Can images in HarmonyOS Image components be dragged freely?"></a>1. Can images in HarmonyOS Image components be dragged freely?</h4><p>The Image component supports default dragging effects. When <code>draggable</code> is set to <code>true</code>, the component can be dragged. Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/image-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/image-V5</a><br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.03.05.png" alt="alt text"><br>In HarmonyOS, the Image component natively supports long-press to trigger dragging events. Specifically, the dragging capability is achieved by setting the <code>draggable</code> attribute. By default, <code>draggable</code> is <code>true</code> for Text, TextInput, TextArea, Hyperlink, Image, and RichEditor components, meaning they can be long-pressed and dragged. You can customize Image-related components to disable dragging for specific cases.  </p>
<h4 id="2-Why-can’t-animation-zoom-be-achieved-after-switching-to-a-model-in-HarmonyOS"><a href="#2-Why-can’t-animation-zoom-be-achieved-after-switching-to-a-model-in-HarmonyOS" class="headerlink" title="2. Why can’t animation zoom be achieved after switching to a model in HarmonyOS?"></a>2. Why can’t animation zoom be achieved after switching to a model in HarmonyOS?</h4><p>When ListItem content is an object, direct comparison with <code>==</code> for the current item is invalid. Use the index to determine the clicked item instead. Modify as follows: (For other cases, refer to: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/listexchange">https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/listexchange</a>)  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> curves <span class="keyword">from</span> <span class="string">&#x27;@ohos.curves&#x27;</span>;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct model &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">arr</span>: titleStrModel[] = []</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">dragItem</span>: titleStrModel = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">scaleItem</span>: titleStrModel = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">neighborItem</span>: titleStrModel = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectedIndex</span>: <span class="built_in">number</span> = -<span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">neighborScale</span>: <span class="built_in">number</span> = -<span class="number">1</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">dragRefOffset</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">offsetX</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">offsetY</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">ITEM_INTV</span>: <span class="built_in">number</span> = <span class="number">120</span></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">    d.<span class="property">name</span> = <span class="string">&#x27;wewewe&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> b = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">    b.<span class="property">name</span> = <span class="string">&#x27;adadad&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">    h.<span class="property">name</span> = <span class="string">&#x27;dfdfdf&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">push</span>(d)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">push</span>(b)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">push</span>(h)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Determine if the item should be scaled based on the current index</span></span><br><span class="line">  <span class="title function_">scaleSelect</span>(<span class="attr">item</span>: titleStrModel): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">selectedIndex</span> = <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">indexOf</span>(item)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">arr</span>[<span class="variable language_">this</span>.<span class="property">selectedIndex</span>].<span class="property">scale</span> = <span class="number">1.05</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">itemMove</span>(<span class="attr">index</span>: <span class="built_in">number</span>, <span class="attr">newIndex</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> tmp = <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">splice</span>(newIndex, <span class="number">0</span>, tmp[<span class="number">0</span>])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">initialIndex</span>: <span class="number">0</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: titleStrModel</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;&#x27;</span> + item.<span class="property">name</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">              <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.app_icon&#x27;</span>))</span><br><span class="line">                .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">shadow</span>(<span class="variable language_">this</span>.<span class="property">scaleItem</span>.<span class="property">name</span> == item.<span class="property">name</span> ? &#123; <span class="attr">radius</span>: <span class="number">70</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Blue</span>, <span class="attr">offsetX</span>: <span class="number">0</span>, <span class="attr">offsetY</span>: <span class="number">0</span> &#125; :</span><br><span class="line">              &#123; <span class="attr">radius</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Blue</span>, <span class="attr">offsetX</span>: <span class="number">0</span>, <span class="attr">offsetY</span>: <span class="number">0</span> &#125;)</span><br><span class="line">            .<span class="title function_">animation</span>(&#123; <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Sharp</span>, <span class="attr">duration</span>: <span class="number">300</span> &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">12</span>, <span class="attr">right</span>: <span class="number">12</span> &#125;)</span><br><span class="line">          .<span class="title function_">scale</span>(&#123; <span class="attr">x</span>: item.<span class="property">scale</span>, <span class="attr">y</span>: item.<span class="property">scale</span> &#125;)</span><br><span class="line">          .<span class="title function_">zIndex</span>(<span class="variable language_">this</span>.<span class="property">dragItem</span>.<span class="property">name</span> == item.<span class="property">name</span> ? <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">          .<span class="title function_">translate</span>(<span class="variable language_">this</span>.<span class="property">dragItem</span>.<span class="property">name</span> == item.<span class="property">name</span> ? &#123; <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">offsetY</span> &#125; : &#123; <span class="attr">y</span>: <span class="number">0</span> &#125;)</span><br><span class="line">          .<span class="title function_">gesture</span>(</span><br><span class="line"></span><br><span class="line">            <span class="comment">// The following combined gesture is sequentially recognized; the drag gesture will not trigger if the long-press gesture fails</span></span><br><span class="line">            <span class="title class_">GestureGroup</span>(<span class="title class_">GestureMode</span>.<span class="property">Sequence</span>,</span><br><span class="line">              <span class="title class_">LongPressGesture</span>(&#123; <span class="attr">repeat</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">                .<span class="title function_">onAction</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="title function_">animateTo</span>(&#123; <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Friction</span>, <span class="attr">duration</span>: <span class="number">300</span> &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">scaleItem</span> = item</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">scaleSelect</span>(item)</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">onActionEnd</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="title function_">animateTo</span>(&#123; <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Friction</span>, <span class="attr">duration</span>: <span class="number">300</span> &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">scaleItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;),</span><br><span class="line">              <span class="title class_">PanGesture</span>(&#123; <span class="attr">fingers</span>: <span class="number">1</span>, <span class="attr">direction</span>: <span class="literal">null</span>, <span class="attr">distance</span>: <span class="number">0</span> &#125;)</span><br><span class="line">                .<span class="title function_">onActionStart</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">dragItem</span> = item</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">dragRefOffset</span> = <span class="number">0</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">offsetY</span> = event.<span class="property">offsetY</span> - <span class="variable language_">this</span>.<span class="property">dragRefOffset</span></span><br><span class="line">                  <span class="comment">// console.log(&#x27;Y:&#x27; + this.offsetY.toString())</span></span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">neighborItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                  <span class="keyword">let</span> index = <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">indexOf</span>(item)</span><br><span class="line">                  <span class="keyword">let</span> curveValue = curves.<span class="title function_">initCurve</span>(<span class="title class_">Curve</span>.<span class="property">Sharp</span>)</span><br><span class="line">                  <span class="keyword">let</span> <span class="attr">value</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">                  <span class="comment">// Calculate the scale of adjacent items based on displacement</span></span><br><span class="line">                  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">offsetY</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    value = curveValue.<span class="title function_">interpolate</span>(-<span class="variable language_">this</span>.<span class="property">offsetY</span> / <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span>)</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">neighborItem</span> = <span class="variable language_">this</span>.<span class="property">arr</span>[index - <span class="number">1</span>]</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">neighborScale</span> = <span class="number">1</span> - value / <span class="number">20</span>;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;neighborScale:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">neighborScale</span>.<span class="title function_">toString</span>())</span><br><span class="line">                  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">offsetY</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    value = curveValue.<span class="title function_">interpolate</span>(<span class="variable language_">this</span>.<span class="property">offsetY</span> / <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span>)</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">neighborItem</span> = <span class="variable language_">this</span>.<span class="property">arr</span>[index + <span class="number">1</span>]</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">neighborScale</span> = <span class="number">1</span> - value / <span class="number">20</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">// Swap排序 based on displacement</span></span><br><span class="line">                  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">offsetY</span> &gt; <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span> / <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="title function_">animateTo</span>(&#123; <span class="attr">curve</span>: curves.<span class="title function_">interpolatingSpring</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">400</span>, <span class="number">38</span>) &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                      <span class="variable language_">this</span>.<span class="property">offsetY</span> -= <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span></span><br><span class="line">                      <span class="variable language_">this</span>.<span class="property">dragRefOffset</span> += <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span></span><br><span class="line">                      <span class="variable language_">this</span>.<span class="title function_">itemMove</span>(index, index + <span class="number">1</span>)</span><br><span class="line">                    &#125;)</span><br><span class="line">                  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">offsetY</span> &lt; -<span class="variable language_">this</span>.<span class="property">ITEM_INTV</span> / <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="title function_">animateTo</span>(&#123; <span class="attr">curve</span>: curves.<span class="title function_">interpolatingSpring</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">400</span>, <span class="number">38</span>) &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                      <span class="variable language_">this</span>.<span class="property">offsetY</span> += <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span></span><br><span class="line">                      <span class="variable language_">this</span>.<span class="property">dragRefOffset</span> -= <span class="variable language_">this</span>.<span class="property">ITEM_INTV</span></span><br><span class="line">                      <span class="variable language_">this</span>.<span class="title function_">itemMove</span>(index, index - <span class="number">1</span>)</span><br><span class="line">                    &#125;)</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">onActionEnd</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="title function_">animateTo</span>(&#123; <span class="attr">curve</span>: curves.<span class="title function_">interpolatingSpring</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">400</span>, <span class="number">38</span>) &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">dragItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">neighborItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                    <span class="comment">// Restore the scale after the animation ends</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">arr</span>[<span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">scaleItem</span>)].<span class="property">scale</span> = <span class="number">1</span></span><br><span class="line">                  &#125;)</span><br><span class="line">                  <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">                    <span class="attr">curve</span>: curves.<span class="title function_">interpolatingSpring</span>(<span class="number">14</span>, <span class="number">1</span>, <span class="number">170</span>, <span class="number">17</span>), <span class="attr">delay</span>: <span class="number">150</span></span><br><span class="line">                  &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">scaleItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            )</span><br><span class="line">              .<span class="title function_">onCancel</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">animateTo</span>(&#123; <span class="attr">curve</span>: curves.<span class="title function_">interpolatingSpring</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">400</span>, <span class="number">38</span>) &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">dragItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">neighborItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">                  <span class="attr">curve</span>: curves.<span class="title function_">interpolatingSpring</span>(<span class="number">14</span>, <span class="number">1</span>, <span class="number">170</span>, <span class="number">17</span>), <span class="attr">delay</span>: <span class="number">150</span></span><br><span class="line">                &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">scaleItem</span> = <span class="keyword">new</span> <span class="title function_">titleStrModel</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">              &#125;)</span><br><span class="line">          )</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xDCDCDC</span>).<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">titleStrModel</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">scale</span>: <span class="built_in">number</span> = <span class="number">1</span> <span class="comment">// Add the scale attribute, each item has a corresponding scale value</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Why doesn&#x27;t setting List height to 100% display completely in HarmonyOS?  </span></span><br><span class="line"><span class="string">The issue is resolved by adding `</span><span class="title function_">layoutWeight</span>(<span class="number">1</span>)<span class="string">` to both the child Column and List. Here’s the explanation:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. **Principle of layoutWeight**: When the parent container&#x27;s size is fixed, child elements with `</span>layoutWeight<span class="string">` distribute the main-axis space proportionally based on their weights. For example, three elements with `</span><span class="title function_">layoutWeight</span>(<span class="number">1</span>)<span class="string">` each will divide the parent container&#x27;s main-axis space in a 1:1:1 ratio, similar to `</span>.<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>)<span class="string">`, `</span>.<span class="title function_">width</span>(<span class="string">&#x27;34%&#x27;</span>)<span class="string">`, `</span>.<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>)<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. **Tabs behavior**: Tabs by default occupy the full screen height, making explicit height calculations (e.g., `</span><span class="title class_">TNAppUIData</span>.<span class="title function_">getPageHeight</span>()<span class="string">`) ineffective as they override the computed height.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to listen for physical back button presses in HarmonyOS?  </span></span><br><span class="line"><span class="string">When a CustomDialog is open, pressing the physical back button should not close the dialog. Use `</span>onBackPress<span class="string">`, which triggers when the back button is clicked and only works for `</span><span class="meta">@Entry</span><span class="string">`-decorated custom components. Return `</span><span class="literal">true</span><span class="string">` to handle the back logic locally without routing; return `</span><span class="literal">false</span><span class="string">` (or no return value) to use default routing. Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-lifecycle-V5#onbackpress  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span>onBackPress?(): <span class="built_in">void</span> | <span class="built_in">boolean</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">IndexComponent</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">textColor</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textColor</span> = <span class="title class_">Color</span>.<span class="property">Blue</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;IndexComponent onPageShow&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageHide</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textColor</span> = <span class="title class_">Color</span>.<span class="property">Transparent</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;IndexComponent onPageHide&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onBackPress</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textColor</span> = <span class="title class_">Color</span>.<span class="property">Red</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;IndexComponent onBackPress&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// Handle back logic locally, prevent default routing</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">textColor</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">30</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to match the color before startMargin in List divider with ListItem in HarmonyOS?  </span></span><br><span class="line"><span class="string">The built-in `</span>divider<span class="string">` attribute of List cannot meet this requirement. Customize the divider as follows:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">List</span>() &#123;</span><br><span class="line">      <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">            .<span class="title function_">color</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">5</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">            .<span class="title function_">color</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">5</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span>, <span class="attr">bottom</span>: <span class="number">0</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">            .<span class="title function_">color</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            .<span class="title function_">strokeWidth</span>(<span class="number">5</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/304-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Resources-Caching-Examples-Focus-Acquisition-Cross-Module-Navigation-Tabs-Component-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/304-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Resources-Caching-Examples-Focus-Acquisition-Cross-Module-Navigation-Tabs-Component-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Dark Mode Resources, Caching Examples, Focus Acquisition, Cross-Module Navigation, Tabs Component Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:11:51 / Modified: 22:07:00" itemprop="dateCreated datePublished" datetime="2025-06-26T20:11:51+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Resources-Caching-Examples-Focus-Acquisition-Cross-Module-Navigation-Tabs-Component-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Dark-Mode-Resources-Caching-Examples-Focus-Acquisition-Cross-Module-Navigation-Tabs-Component-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Dark Mode Resources, Caching Examples, Focus Acquisition, Cross-Module Navigation, Tabs Component Issues"></a>[Daily HarmonyOS Next Knowledge] Dark Mode Resources, Caching Examples, Focus Acquisition, Cross-Module Navigation, Tabs Component Issues</h3><h4 id="1-Does-HarmonyOS-dark-mode-adaptation-require-preparing-a-separate-set-of-resources"><a href="#1-Does-HarmonyOS-dark-mode-adaptation-require-preparing-a-separate-set-of-resources" class="headerlink" title="1. Does HarmonyOS dark mode adaptation require preparing a separate set of resources?"></a>1. Does HarmonyOS dark mode adaptation require preparing a separate set of resources?</h4><p>For dark mode adaptation, should another set of resources be prepared?  </p>
<p>There are two scenarios:  </p>
<ol>
<li><p>The app follows the system to switch between dark mode and non-dark mode:  </p>
<ul>
<li><strong>Color adaptation</strong>: Customize two sets of color resources (resources&#x2F;dark&#x2F;element&#x2F;color.json and resources&#x2F;base&#x2F;element&#x2F;color.json), and load color resource keys via <code>$r</code>. System-provided resources can also be used directly, which are layered parameters. The same resource ID has different values under different configurations (e.g., device type, light&#x2F;dark mode). Using system resources allows developers to create apps with consistent visual styles without customizing two color resource sets, as colors will automatically switch between light and dark modes.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5#resource9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5#resource9</a>  </li>
<li><strong>Image resources</strong>: Use resource qualifier directories. Similar to color adaptation, place dark-mode images with the same name in the <code>dark/media</code> directory, and load image resource keys via <code>$r</code>. The system will automatically load corresponding values when switching between light and dark modes. For simple SVG icons, the <code>fillColor</code> attribute can be combined with system resources to change the drawing color, achieving dark mode adaptation without two sets of image resources.</li>
</ul>
</li>
<li><p>The app does not follow the system and switches between dark mode and non-dark mode internally:  </p>
<ul>
<li>The app actively sets the light&#x2F;dark mode via system APIs, such as <code>setColorMode</code>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-applicationcontext-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-applicationcontext-V5</a>  </li>
<li>Listen for light&#x2F;dark mode switch events and implement the mode manually using <code>this.context.config.colorMode</code> and <code>onConfigurationOnUpdate</code>.</li>
</ul>
</li>
</ol>
<h4 id="2-HarmonyOS-caching-demo-verification"><a href="#2-HarmonyOS-caching-demo-verification" class="headerlink" title="2. HarmonyOS caching demo verification?"></a>2. HarmonyOS caching demo verification?</h4><p>Reference code:  </p>
<pre><code class="language-typescript">import &#123; promptAction &#125; from &#39;@kit.ArkUI&#39;;
import &#123; preferences &#125; from &#39;@kit.ArkData&#39;;

let context = getContext(this);
let preference: preferences.Preferences;
let preferenceTemp: preferences.Preferences;

// Object class
export class ImageModel &#123;
  constructor(id: string, tokenInfo: string, imgInfo: string, urlInfo: string) &#123;
    this.id = id
    this.token = tokenInfo
    this.img = imgInfo
    this.url = urlInfo
  &#125;
  id?: string = &#39;&#39;;
  token: string = &#39;&#39;;
  img: string = &#39;&#39;;
  url: string = &#39;&#39;
&#125;

// Preference utility class
class PreferenceModel &#123;

  // Initialization
  async getPreferencesFromStorage() &#123;
    try &#123;
      preference = await preferences.getPreferences(context,&#39;ImageUrlData.db&#39;);
    &#125; catch (err) &#123;
      console.error(&#39;[PreferenceModel]&#39;, `Failed to get preferences, Cause: $&#123;err&#125;`);
    &#125;
  &#125;

  // Delete preferences
  async deletePreferences() &#123;
    try &#123;
      await preferences.deletePreferences(context, &#39;ImageUrlData.db&#39;);
    &#125; catch(err) &#123;
      console.error(&#39;[PreferenceModel]&#39;, `Failed to delete preferences, Cause: $&#123;err&#125;`);
    &#125;;
    preference = preferenceTemp;
    this.showToastMessage(&#39;删除数据库成功&#39;);
  &#125;

  // Insert value
  async putPreference(Image:string, ImageInfo: ImageModel) &#123;
    if (!preference) &#123;
      await this.getPreferencesFromStorage();
    &#125;
    try &#123;
      await preference.put(Image, JSON.stringify(ImageInfo));
    &#125; catch (err) &#123;
      console.error(&#39;[PreferenceModel]&#39;, `Failed to put value, Cause: $&#123;err&#125;`);
    &#125;
    await preference.flush();
  &#125;

  // Get value
  async getPreference(Image: string) &#123;
    let ImageInfo = &#39;&#39;;
    if (!preference) &#123;
      await this.getPreferencesFromStorage();
    &#125;
    try &#123;
      ImageInfo = (await preference.get(Image, &#39;&#39;)).toString();
    &#125; catch (err) &#123;
      console.error(&#39;[PreferenceModel]&#39;, `Failed to get value, Cause: $&#123;err&#125;`);
    &#125;
    if (ImageInfo === &#39;&#39;) &#123;
      this.showToastMessage(&#39;数据为空，请先写入数据&#39;);
      return;
    &#125;
    this.showToastMessage(&#39;写入数据成功&#39;);
    return JSON.parse(ImageInfo);
  &#125;

  async getImageData(Image: string) &#123;
    return await this.getPreference(Image);
  &#125;

  // Write data
  writeData(Image:string, ImageInfo: ImageModel) &#123;
    this.putPreference(Image, ImageInfo);
    this.showToastMessage(&#39;写入数据成功&#39;);
  &#125;

  showToastMessage(message: string) &#123;
    promptAction.showToast(&#123;
      message: message,
      duration: 3000
    &#125;);
  &#125;;
&#125;

/**
 * Preference operation
 */
export class LocalDataManager &#123;
  preferenceModel = new PreferenceModel()
  private static localDataManager: LocalDataManager;

  private constructor() &#123;
    this.preferenceModel.getPreferencesFromStorage()
  &#125;

  static instance() &#123;
    if (!LocalDataManager.localDataManager) &#123;
      LocalDataManager.localDataManager = new LocalDataManager();
    &#125;
    return LocalDataManager.localDataManager;
  &#125;

  async queryImageInfo(Image:string) &#123;
    return await this.preferenceModel.getImageData(Image)
  &#125;

  insertImageInfo(Image:string, ImageInfo: ImageModel) &#123;
    this.preferenceModel.writeData(Image, ImageInfo)
    return Image.length
  &#125;

  updateImageInfo(Image:string, ImageInfo: ImageModel) &#123;
    this.preferenceModel.writeData(Image, ImageInfo)
    return Image.length
  &#125;

  deleteImageInfo() &#123;
    this.preferenceModel.deletePreferences()
  &#125;
&#125;

// Use preferences for caching
@Entry
@Component
struct NeiMengGuNongJi &#123;
  private localDataManager: LocalDataManager = LocalDataManager.instance();
  @State token_Info: string = &#39;&#39;
  private img: string = &#39;image00&#39;
  private url: string = &#39;url000&#39;
  @State num: number = 0
  @State keyInfo: string = &#39;&#39;
  @State imageData: ImageModel = new ImageModel(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;)

  build() &#123;
    Column() &#123;
      Button(&#39;点击存入数据库&#39;)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
        .onClick(()=&gt; &#123;
          for (let i = 1; i &lt;= 10; i++) &#123;
            let tokenInfo  = &quot;token00&quot;+i
            let image = this.img+i
            let urlInfo = this.url+i
            let ImageInfo = new ImageModel(&quot;&quot;, tokenInfo, image, urlInfo);
            this.localDataManager.insertImageInfo(image, ImageInfo)
          &#125;
        &#125;)
      TextInput(&#123;placeholder:&#39;输入key值:例如image001&#39;&#125;)
        .type(InputType.Normal)
        .onChange((key: string) =&gt; &#123;
          this.keyInfo = key
        &#125;)
      Button(&#39;通过key值：&#39;+this.keyInfo+&quot;, 获取value值&quot;)
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .onClick(async()=&gt; &#123;
          if(this.keyInfo !== &#39;&#39;)&#123;
            this.imageData = await this.localDataManager.queryImageInfo(this.keyInfo) as ImageModel
            console.info(&quot;imageData=&quot;+JSON.stringify(this.imageData))
          &#125;
        &#125;)
      Text(&quot;key: &quot;+this.keyInfo+&quot;, value: &quot; + (this.imageData.token === &#39;&#39;? &#39;&#39; : JSON.stringify(this.imageData))).fontSize(40)
    &#125;
    .width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-Why-does-focusControl-requestFocus-id-string-lose-focus-after-navigating-back-to-the-page-in-HarmonyOS"><a href="#3-Why-does-focusControl-requestFocus-id-string-lose-focus-after-navigating-back-to-the-page-in-HarmonyOS" class="headerlink" title="3. Why does focusControl.requestFocus(id: string) lose focus after navigating back to the page in HarmonyOS?"></a>3. Why does focusControl.requestFocus(id: string) lose focus after navigating back to the page in HarmonyOS?</h4><p>When using <code>focusControl.requestFocus(id: string)</code>, the focus is lost after navigating back to the page.  </p>
<p>Solution: Mark a status in <code>onAppear</code> when the page returns to maintain focus.  </p>
<h4 id="4-Can-HarmonyOS-router-navigate-between-different-modules"><a href="#4-Can-HarmonyOS-router-navigate-between-different-modules" class="headerlink" title="4. Can HarmonyOS router navigate between different modules?"></a>4. Can HarmonyOS router navigate between different modules?</h4><p>The entry module depends on the feature module basecore, which has a BaseIndex.ets in its pages. Using <code>router.pushUrl(&#123;url:‘pages/BaseIndex’&#125;, router.RouterMode.Standard ,(err)=&gt;&#123;&#125;)</code> in the entry module has no effect.  </p>
<ol>
<li>A feature is an ability-type module, and each feature maintains its own routing stack. Navigating to other pages requires using <code>startAbility</code>, while <code>router</code> is for intra-page navigation. These cannot be mixed.  </li>
<li>To avoid cross-module navigation, consider a single UIAbility with multiple Hsps.</li>
</ol>
<p>For cross-module navigation, refer to the document:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/uiability-intra-device-interaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/uiability-intra-device-interaction-V5</a>  </p>
<p>When an app contains multiple UIAbilities, there may be scenarios where one UIAbility starts another. For example, starting a payment UIAbility from the entry UIAbility in a payment app.  </p>
<p>Suppose the app has two UIAbilities: EntryAbility and FuncAbility (in the same or different modules). To start FuncAbility from EntryAbility’s page:<br>In EntryAbility, use <code>startAbility()</code> with a <code>want</code> object as the entry parameter, including <code>bundleName</code> (target app’s bundle name), <code>abilityName</code> (target ability name), <code>moduleName</code> (if target UIAbility is in a different module), and <code>parameters</code> (custom parameters). The <code>context</code> can be obtained as shown:  </p>
<pre><code class="language-typescript">import &#123; common, Want &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; hilog &#125; from &#39;@kit.PerformanceAnalysisKit&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;

const TAG: string = &#39;[Page_UIAbilityComponentsInteractive]&#39;;
const DOMAIN_NUMBER: number = 0xFF00;

@Entry
@Component
struct Page_UIAbilityComponentsInteractive &#123;
  private context = getContext(this) as common.UIAbilityContext;

  build() &#123;
    Column() &#123;
      //...
      List(&#123; initialIndex: 0 &#125;) &#123;
        ListItem() &#123;
          Row() &#123;
            //...
          &#125;
          .onClick(() =&gt; &#123;
            let wantInfo: Want = &#123;
              deviceId: &#39;&#39;, // Empty deviceId means local device
              bundleName: &#39;com.samples.stagemodelabilitydevelop&#39;,
              moduleName: &#39;entry&#39;, // moduleName is optional
              abilityName: &#39;FuncAbilityA&#39;,
              parameters: &#123;
                // Custom information
                info: &#39;来自EntryAbility Page_UIAbilityComponentsInteractive页面&#39;
              &#125;,
            &#125;;
            this.context.startAbility(wantInfo).then(() =&gt; &#123;
              hilog.info(DOMAIN_NUMBER, TAG, &#39;startAbility success.&#39;);
            &#125;).catch((error: BusinessError) =&gt; &#123;
              hilog.error(DOMAIN_NUMBER, TAG, &#39;startAbility failed.&#39;);
            &#125;);
          &#125;)
        &#125;
        //...
      &#125;
      //...
    &#125;
    //...
  &#125;
&#125;
</code></pre>
<p>In FuncAbility’s <code>onCreate()</code> or <code>onNewWant()</code> lifecycle callback, receive parameters from EntryAbility:  </p>
<pre><code class="language-typescript">import &#123; AbilityConstant, UIAbility, Want &#125; from &#39;@kit.AbilityKit&#39;;

export default class FuncAbilityA extends UIAbility &#123;
  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void &#123;
    // Receive parameters from the calling UIAbility
    let funcAbilityWant = want;
    let info = funcAbilityWant?.parameters?.info;
  &#125;
  //...
&#125;
</code></pre>
<p>After completing operations in FuncAbility, stop the current UIAbility instance using <code>terminateSelf()</code>:  </p>
<pre><code class="language-typescript">import &#123; common &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; hilog &#125; from &#39;@kit.PerformanceAnalysisKit&#39;;

const TAG: string = &#39;[Page_FromStageModel]&#39;;
const DOMAIN_NUMBER: number = 0xFF00;

@Entry
@Component
struct Page_FromStageModel &#123;
  build() &#123;
    Column() &#123;
      //...
      Button(&#39;FuncAbilityB&#39;)
        .onClick(() =&gt; &#123;
          let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
          context.terminateSelf((err) =&gt; &#123;
            if (err.code) &#123;
              hilog.error(DOMAIN_NUMBER, TAG, `Failed to terminate self. Code is $&#123;err.code&#125;, message is $&#123;err.message&#125;`);
              return;
            &#125;
          &#125;);
        &#125;)
    &#125;
    //...
  &#125;
&#125;
</code></pre>
<p>To close all UIAbility instances of the app, use <code>ApplicationContext.killAllProcesses()</code>.  </p>
<h4 id="5-Issues-with-TabContent-in-HarmonyOS-Tabs-component"><a href="#5-Issues-with-TabContent-in-HarmonyOS-Tabs-component" class="headerlink" title="5. Issues with TabContent in HarmonyOS Tabs component"></a>5. Issues with TabContent in HarmonyOS Tabs component</h4><p>Is the content of TabContent in the Tabs component automatically centered?  </p>
<p>TabContent content is centered by default. Solutions:  </p>
<ol>
<li>Adjust the child component’s height freely via the <code>margin</code> attribute (suitable when child components do not change).  </li>
<li>Add a Column container in TabContent and configure its attributes to achieve the layout.</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/303-Daily-HarmonyOS-Next-Knowledge-Tab-Alignment-Relative-Layout-Full-Screen-Custom-Popups-Animation-Collections-Returning-to-Home-Screen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/303-Daily-HarmonyOS-Next-Knowledge-Tab-Alignment-Relative-Layout-Full-Screen-Custom-Popups-Animation-Collections-Returning-to-Home-Screen/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Tab Alignment, Relative Layout, Full-Screen Custom Popups, Animation Collections, Returning to Home Screen</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:10:51 / Modified: 22:07:01" itemprop="dateCreated datePublished" datetime="2025-06-26T20:10:51+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Tab-Alignment-Relative-Layout-Full-Screen-Custom-Popups-Animation-Collections-Returning-to-Home-Screen"><a href="#Daily-HarmonyOS-Next-Knowledge-Tab-Alignment-Relative-Layout-Full-Screen-Custom-Popups-Animation-Collections-Returning-to-Home-Screen" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Tab Alignment, Relative Layout, Full-Screen Custom Popups, Animation Collections, Returning to Home Screen"></a>[Daily HarmonyOS Next Knowledge] Tab Alignment, Relative Layout, Full-Screen Custom Popups, Animation Collections, Returning to Home Screen</h3><h4 id="1-Can-HarmonyOS-Tabs-Support-Left-Aligned-TabBar"><a href="#1-Can-HarmonyOS-Tabs-Support-Left-Aligned-TabBar" class="headerlink" title="1. Can HarmonyOS Tabs Support Left-Aligned TabBar?"></a>1. Can HarmonyOS Tabs Support Left-Aligned TabBar?</h4><p>The current solution is to implement a custom tabbar. Example demo:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TabsExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">tabArray</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">focusIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">pre</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">controller</span>: <span class="title class_">TabsController</span> = <span class="keyword">new</span> <span class="title class_">TabsController</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">test</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Individual tab</span></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">Tab</span>(<span class="attr">tabName</span>: <span class="built_in">string</span>, <span class="attr">tabItem</span>: <span class="built_in">number</span>, <span class="attr">tabIndex</span>: <span class="built_in">number</span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(tabName).<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(tabItem === <span class="variable language_">this</span>.<span class="property">focusIndex</span> ? <span class="title class_">Color</span>.<span class="property">Red</span> : <span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">constraintSize</span>(&#123; <span class="attr">minWidth</span>: <span class="number">35</span> &#125;)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">borderRadius</span>(&#123; <span class="attr">topLeft</span>: <span class="number">10</span>, <span class="attr">topRight</span>: <span class="number">10</span> &#125;)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">changeIndex</span>(tabIndex)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">focusIndex</span> = tabIndex</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="comment">// Tab bar</span></span><br><span class="line">        <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">7</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Scroll</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">tabArray</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title class_">Tab</span>(<span class="string">&quot;Tab &quot;</span> + item, item, index)</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">scrollable</span>(<span class="title class_">ScrollDirection</span>.<span class="property">Horizontal</span>)</span><br><span class="line">          .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Start</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Tabs content</span></span><br><span class="line">      <span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">Start</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">tabArray</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;This is content for Tab &#x27;</span> + item)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">barHeight</span>(<span class="number">0</span>)</span><br><span class="line">      .<span class="title function_">animationDuration</span>(<span class="number">100</span>)</span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Tab changed&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">focusIndex</span> = index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-Why-Is-the-bias-Property-of-alignRules-Invalid-in-HarmonyOS-RelativeContainer"><a href="#2-Why-Is-the-bias-Property-of-alignRules-Invalid-in-HarmonyOS-RelativeContainer" class="headerlink" title="2. Why Is the bias Property of alignRules Invalid in HarmonyOS RelativeContainer?"></a>2. Why Is the <code>bias</code> Property of <code>alignRules</code> Invalid in HarmonyOS RelativeContainer?</h4><p>Reference demo:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>().<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#FF3333&quot;</span>)</span><br><span class="line">          .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">            <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;__container__&quot;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">            <span class="attr">bottom</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;__container__&quot;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span> &#125;,</span><br><span class="line">            <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;__container__&quot;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;,</span><br><span class="line">            <span class="attr">right</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;__container__&quot;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;,</span><br><span class="line">            <span class="attr">bias</span>: &#123; <span class="attr">vertical</span>: <span class="number">0.3</span> &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">id</span>(<span class="string">&quot;row1&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">300</span>).<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">      .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="string">&quot;#6699FF&quot;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-Can’t-Custom-Dialogs-in-HarmonyOS-Be-Full-Screen"><a href="#3-Can’t-Custom-Dialogs-in-HarmonyOS-Be-Full-Screen" class="headerlink" title="3. Can’t Custom Dialogs in HarmonyOS Be Full-Screen?"></a>3. Can’t Custom Dialogs in HarmonyOS Be Full-Screen?</h4><p>Reference demo:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">MyDialog1</span> &#123;</span><br><span class="line">  <span class="attr">controller1</span>: <span class="title class_">CustomDialogController</span></span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">title</span>).<span class="title function_">fontSize</span>(<span class="number">25</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;Cancel&#x27;</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">controller1</span>.<span class="title function_">close</span>()</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="number">0xffffff</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;Confirm&#x27;</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">controller1</span>.<span class="title function_">close</span>()</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="number">0xffffff</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Main page</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">dialogData</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">colorTest</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Blue</span></span><br><span class="line">  <span class="attr">dialogController1</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">MyDialog1</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Popup 1&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// Whether to customize the popup container style</span></span><br><span class="line">    <span class="attr">customStyle</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">offset</span>: &#123; <span class="attr">dx</span>: <span class="number">0</span>, <span class="attr">dy</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Top</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">confirm</span>(<span class="params"><span class="attr">data</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogData</span> = data</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;ssss&#x27;</span>) <span class="comment">// Get input from popup</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;This is a popup test&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">25</span>).<span class="title function_">margin</span>(<span class="number">20</span>).<span class="title function_">fontColor</span>(<span class="number">0x3399FF</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;Click to open popup&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogController1</span>.<span class="title function_">open</span>()</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-How-to-Implement-Animation-Collections-in-HarmonyOS"><a href="#4-How-to-Implement-Animation-Collections-in-HarmonyOS" class="headerlink" title="4. How to Implement Animation Collections in HarmonyOS?"></a>4. How to Implement Animation Collections in HarmonyOS?</h4><p>After Component A scales and rotates for 1 second, it scales and rotates again. After another 4 seconds, it repeats the scaling and rotation, and after another 1 second, it scales and rotates again. These four actions form a collection that repeats indefinitely. How can this be achieved?</p>
<p>You can use keyframe animations with <code>keyframeAnimateTo</code>. Reference demo:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UIContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.ArkUI.UIContext&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">myScale</span>: <span class="built_in">number</span> = <span class="number">1.0</span>;</span><br><span class="line">  <span class="attr">uiContext</span>: <span class="title class_">UIContext</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uiContext</span> = <span class="variable language_">this</span>.<span class="property">getUIContext</span>?.();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Circle</span>()</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fill</span>(<span class="string">&quot;#46B1E3&quot;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">scale</span>(&#123; <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">myScale</span>, <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">myScale</span> &#125;) <span class="comment">// Set x/y scaling</span></span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">uiContext</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;No uiContext, keyframe animation failed&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">myScale</span> = <span class="number">1</span>;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// Set the keyframe animation to play 3 times</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">uiContext</span>.<span class="title function_">keyframeAnimateTo</span>(&#123; <span class="attr">iterations</span>: <span class="number">3</span> &#125;, [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="comment">// First keyframe: 800ms scaling from 1 to 1.5</span></span><br><span class="line">              <span class="attr">duration</span>: <span class="number">800</span>,</span><br><span class="line">              <span class="attr">event</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">myScale</span> = <span class="number">1.5</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="comment">// Second keyframe: 500ms scaling from 1.5 to 1</span></span><br><span class="line">              <span class="attr">duration</span>: <span class="number">500</span>,</span><br><span class="line">              <span class="attr">event</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">myScale</span> = <span class="number">1</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          ]);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-Inquire-About-HarmonyOS-API-for-Returning-to-Home-Screen"><a href="#5-Inquire-About-HarmonyOS-API-for-Returning-to-Home-Screen" class="headerlink" title="5. Inquire About HarmonyOS API for Returning to Home Screen"></a>5. Inquire About HarmonyOS API for Returning to Home Screen</h4><p>Some app features need to guide users back to the home screen to add service cards. Is there an API to trigger returning to the home screen?</p>
<p>The window has a <code>minimize</code> method. This interface notifies the AMS to send the window to the background, achieving the effect of sending the app to the background.<br>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#minimize11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#minimize11</a></p>
<p><code>minimize(callback: AsyncCallback&lt;void&gt;): void</code></p>
<p>This interface implements different functions depending on the calling object:</p>
<ul>
<li>When called on the main window, it minimizes the app, which can be restored from the Dock.</li>
<li>When called on a child window, it hides the window, which cannot be restored from the Dock but can be restored using <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#showwindow9">showWindow()</a>. Calling this interface on a floating window will result in error code 1300002.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/302%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/302%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Status Bar Font, Lifecycle, Custom Dialog Centering, Transparency, Tab Centering</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:09:37 / Modified: 20:12:20" itemprop="dateCreated datePublished" datetime="2025-06-26T20:09:37+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering"><a href="#【Daily-HarmonyOS-Next-Knowledge】Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Status Bar Font, Lifecycle, Custom Dialog Centering, Transparency, Tab Centering"></a>【Daily HarmonyOS Next Knowledge】Status Bar Font, Lifecycle, Custom Dialog Centering, Transparency, Tab Centering</h3><h4 id="1-How-to-control-the-status-bar-font-color-in-a-single-HarmonyOS-page"><a href="#1-How-to-control-the-status-bar-font-color-in-a-single-HarmonyOS-page" class="headerlink" title="1. How to control the status bar font color in a single HarmonyOS page?"></a>1. How to control the status bar font color in a single HarmonyOS page?</h4><p>The status bar font color can be modified by setting <code>statusBarContentColor</code>. Refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<p>Reference code:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State message: string = &#x27;Hello World&#x27;;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .align(Alignment.Center)</span><br><span class="line">          .fontSize(50)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">          .fontColor(Color.White)</span><br><span class="line">        ColumnSplit().height(20)</span><br><span class="line">        Button() &#123;</span><br><span class="line">          Text(&quot;点我看效果&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        .width(100)</span><br><span class="line">        .height(50)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.message = &quot;我变了&quot;</span><br><span class="line">          window.getLastWindow(getContext(), (err, data) =&gt; &#123;</span><br><span class="line">            let win: window.Window;</span><br><span class="line">            if (err.code) &#123;</span><br><span class="line">              console.error(&quot;error code :&quot; + JSON.stringify(err.code))</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            try &#123;</span><br><span class="line">              win = data;</span><br><span class="line">              // Set the window to full-screen mode</span><br><span class="line">              win.setWindowLayoutFullScreen(true);</span><br><span class="line">              // Set status bar properties</span><br><span class="line">              win.setWindowSystemBarProperties(&#123;</span><br><span class="line">                // Set status bar background color</span><br><span class="line">                statusBarColor: &#x27;#ffe30520&#x27;,</span><br><span class="line">                // Set status bar text color to white</span><br><span class="line">                statusBarContentColor: &#x27;#ffffffff&#x27;</span><br><span class="line">              &#125;)</span><br><span class="line">              console.info(&#x27;Status bar immersive window setup completed&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">            catch (expextion) &#123;</span><br><span class="line">              console.error(&quot;error cause :&quot; + JSON.stringify(expextion))</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        ColumnSplit().height(20)</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">    .backgroundColor(Color.Green)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. When do HarmonyOS lifecycle callbacks trigger?  </span><br><span class="line">When the app is swiped up to exit, which callback triggers first: `onPageHide` or `aboutToDisappear`?  </span><br><span class="line"></span><br><span class="line">In this scenario, only the `aboutToDisappear` callback triggers. For lifecycle characteristics, refer to:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/js-framework-lifecycle-V5  </span><br><span class="line"></span><br><span class="line">Application lifecycle functions can be defined in `app.js` as follows:  </span><br><span class="line"></span><br><span class="line">| Attribute     | Type         | Description       | Trigger Time                |  </span><br><span class="line">| :---------- | :--------- | :------------- | :---------------------- |  </span><br><span class="line">| onCreate    | () =&gt; void | App creation      | Called when the app is created.       |  </span><br><span class="line">| onShow6+    | () =&gt; void | App in foreground   | Triggered when the app is in the foreground. |  </span><br><span class="line">| onHide6+    | () =&gt; void | App in background   | Triggered when the app is in the background. |  </span><br><span class="line">| onDestroy   | () =&gt; void | App destruction     | Triggered when the app exits.      |  </span><br><span class="line"></span><br><span class="line">#### 3. How to display a custom HarmonyOS dialog in the center of the screen?  </span><br><span class="line">How to center a custom time picker dialog or user privacy agreement dialog.  </span><br><span class="line"></span><br><span class="line">Reference demo:  </span><br></pre></td></tr></table></figure>
<p>@CustomDialog<br>struct CustomDialogExample {<br>  controller?: CustomDialogController<br>  private selectDate: Date &#x3D; new Date()</p>
<p>  build() {<br>    Column() {<br>      DatePicker({<br>        start: new Date(‘2009-1-1’),<br>        end: new Date(‘2100-12-31’),<br>        selected: this.selectDate<br>      })<br>    }<br>  }<br>}</p>
<p>@Entry<br>@Component<br>struct Index {<br>  @State textValue: string &#x3D; ‘’<br>  @State inputValue: string &#x3D; ‘click me’<br>  dialogController: CustomDialogController | null &#x3D; new CustomDialogController({<br>    builder: CustomDialogExample(),<br>    openAnimation: {<br>      duration: 1200,<br>      curve: Curve.Friction,<br>      delay: 500,<br>      playMode: PlayMode.Alternate,<br>      onFinish: () &#x3D;&gt; {<br>        console.info(‘play end’)<br>      }<br>    },<br>    autoCancel: true,<br>    alignment: DialogAlignment.Center,<br>    gridCount: 4,<br>    customStyle: true,<br>    backgroundColor: 0xd9ffffff,<br>    cornerRadius: 10,<br>  })</p>
<p>  &#x2F;&#x2F; Set dialogController to null when the custom component is about to be destroyed<br>  aboutToDisappear() {<br>    this.dialogController &#x3D; null &#x2F;&#x2F; Set dialogController to null<br>  }</p>
<p>  build() {<br>    Column() {<br>      Button(this.inputValue)<br>        .onClick(() &#x3D;&gt; {<br>          if (this.dialogController !&#x3D; null) {<br>            this.dialogController.open()<br>          }<br>        }).backgroundColor(0x317aff)<br>    }.width(‘100%’).margin({ top: 5 })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 4. Does the HarmonyOS UI component provide an `setAlpha` attribute?  </span><br><span class="line">Transparency can be set using `opacity`. Refer to:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-opacity-V5  </span><br><span class="line"></span><br><span class="line">`opacity(value: number | Resource)`  </span><br><span class="line">Sets the opacity of the component.  </span><br><span class="line"></span><br><span class="line">**Parameters:**  </span><br><span class="line"></span><br><span class="line">| Parameter Name | Type                 | Required | Description                                                                                                                                                                                                 |  </span><br><span class="line">| :--------- | :----------------- | :--- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |  </span><br><span class="line">| value      | number \| Resource | Yes  | The opacity of the element, ranging from 0 to 1. 1 means opaque, 0 means fully transparent (hiding the component, but it still occupies layout space).&lt;br&gt;&lt;br&gt;Default value: 1&lt;br&gt;&lt;br&gt;**Note:**&lt;br&gt;&lt;br&gt;Child components inherit the parent&#x27;s opacity, which is multiplied by their own. For example, if the parent has opacity 0.1 and the child sets 0.8, the child&#x27;s actual opacity is 0.1 * 0.8 = 0.08. |  </span><br><span class="line"></span><br><span class="line">Example:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; xxx.ets<br>@Entry<br>@Component<br>struct OpacityExample {<br>  build() {<br>    Column({ space: 5 }) {<br>      Text(‘opacity(1)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(1).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0.7)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0.7).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0.4)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0.4).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0.1)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0.1).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0).backgroundColor(0xAFEEEE)<br>    }<br>    .width(‘100%’)<br>    .padding({ top: 5 })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![[【每日学点HarmonyOS Next知识】25.03.02.png]]  </span><br><span class="line"></span><br><span class="line">#### 5. Can HarmonyOS Tabs be aligned left/right instead of only centered?  </span><br><span class="line">Does the Tabs component support left/right alignment?  </span><br><span class="line"></span><br><span class="line">The Tabs component does not provide a left-aligned style. You can customize a left-aligned tabBar using Flex,联动索引值 with the Tabs component via `onClick` to achieve switching:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>struct Index {<br>  private tabsController: TabsController &#x3D; new TabsController()<br>  @State currentIndex: number &#x3D; 0;</p>
<p>  @Builder<br>  TabBarBuilder(title: string, targetIndex: number) {<br>    Text(title)<br>      .fontWeight(targetIndex &#x3D;&#x3D;&#x3D; this.currentIndex ? FontWeight.Bold : FontWeight.Normal)<br>      .margin({ left: 10, right: 10 })<br>      .onClick(() &#x3D;&gt; {<br>        this.tabsController.changeIndex(targetIndex)<br>      })<br>  }</p>
<p>  build() {<br>    Row() {<br>      Column() {</p>
<p>Flex({ direction: FlexDirection.Row }) {<br>        Flex({ direction: FlexDirection.RowReverse }) {<br>          this.TabBarBuilder(‘页签1’, 0)<br>          this.TabBarBuilder(‘页签2’, 1)<br>          this.TabBarBuilder(‘页签3’, 2)<br>        }</p>
<pre><code>    Tabs(&#123; barPosition: BarPosition.End, controller: this.tabsController &#125;) &#123;
      TabContent() &#123;
        Text(&quot;页签1页面&quot;)
      &#125;

      TabContent() &#123;
        Text(&quot;页签2页面&quot;)
      &#125;

      TabContent() &#123;
        Text(&quot;页签3页面&quot;)
      &#125;
    &#125;.onChange((index: number) =&gt; &#123;
      this.currentIndex = index;
    &#125;)
  &#125;
&#125;
</code></pre>
<p>  }<br>}<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/301%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/301%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Image Pixels, State Binding, Slider Value Listening, Gesture Issues, Object-Map Conversion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:08:37 / Modified: 20:09:03" itemprop="dateCreated datePublished" datetime="2025-06-26T20:08:37+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion"><a href="#【Daily-HarmonyOS-Next-Knowledge】Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Image Pixels, State Binding, Slider Value Listening, Gesture Issues, Object-Map Conversion"></a>【Daily HarmonyOS Next Knowledge】Image Pixels, State Binding, Slider Value Listening, Gesture Issues, Object-Map Conversion</h3><h4 id="1-How-to-create-an-ImageBitmap-with-empty-content-of-a-specified-size-in-HarmonyOS"><a href="#1-How-to-create-an-ImageBitmap-with-empty-content-of-a-specified-size-in-HarmonyOS" class="headerlink" title="1. How to create an ImageBitmap with empty content of a specified size in HarmonyOS?"></a>1. How to create an ImageBitmap with empty content of a specified size in HarmonyOS?</h4><p>Refer to the official ImageBitmap documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-components-canvas-imagebitmap-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-components-canvas-imagebitmap-V5</a></p>
<p>ImageBitmap(data: PixelMap, unit?: LengthMetricsUnit)</p>
<p>Create an ImageBitmap object from a PixelMap.</p>
<h4 id="2-Why-is-the-ObservedV2-decorator-ineffective-for-state-monitoring-of-models-returned-by-interfaces"><a href="#2-Why-is-the-ObservedV2-decorator-ineffective-for-state-monitoring-of-models-returned-by-interfaces" class="headerlink" title="2. Why is the ObservedV2 decorator ineffective for state monitoring of models returned by interfaces?"></a>2. Why is the ObservedV2 decorator ineffective for state monitoring of models returned by interfaces?</h4><p>The ObservedV2 decorator does not work for state monitoring of models returned by interfaces.</p>
<p>Objects obtained via JSON.parse are not instances created by the User constructor, so their data changes cannot be observed, preventing UI updates. You can use third-party libraries <code>reflect-metadata</code> and <code>class-transformer</code>. Refer to the following demo (similarly applicable to observedv2):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">//test.ets</span><br><span class="line">export let jsonString:Record&lt;string, ESObject&gt; = &#123;</span><br><span class="line">  &quot;data&quot; : [</span><br><span class="line">    &#123; &quot;number&quot; :1,</span><br><span class="line">      &quot;age&quot;: 20,</span><br><span class="line">      &quot;testA&quot;: &#123;</span><br><span class="line">        &quot;str&quot;: &quot;123&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;number&quot; :2,</span><br><span class="line">      &quot;age&quot;: 21,</span><br><span class="line">      &quot;testA&quot;: &#123;</span><br><span class="line">        &quot;str&quot;: &quot;456&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">import &#123; Type, plainToClass &#125; from &#x27;class-transformer&#x27;</span><br><span class="line">import &#x27;reflect-metadata&#x27;</span><br><span class="line">import &#123; jsonString &#125; from &#x27;./test&#x27;</span><br><span class="line">import &#123; TestA, Person, ViewA&#125; from &#x27;./ViewA&#x27;;</span><br><span class="line">class ResponseObj &#123;</span><br><span class="line">  @Type (() =&gt; Person) data: Person[] = [];</span><br><span class="line">&#125;</span><br><span class="line">@Entry @Component struct Index &#123;</span><br><span class="line">  @State list: Person[] = [];</span><br><span class="line">  @State message: string = &#x27;Click me&#x27;;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .fontSize(40)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            let responseObj : ResponseObj = plainToClass(ResponseObj, jsonString);</span><br><span class="line">            console.log(` $&#123;responseObj.data[0] instanceof Person&#125;`)</span><br><span class="line">            this.list = this.list.concat(responseObj.data); &#125;)</span><br><span class="line">        ForEach(this.list, (item : Person, index: number) =&gt; &#123;</span><br><span class="line">          ViewA(&#123;index:index, testA: item.testA&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125; .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125; &#125;</span><br><span class="line">ViewA.ets</span><br><span class="line">import &#123; Type &#125; from &#x27;class-transformer&#x27;</span><br><span class="line">@Observed export class TestA &#123;</span><br><span class="line">  public str : string</span><br><span class="line">  constructor(str: string) &#123; this.str = str; &#125;</span><br><span class="line">&#125;</span><br><span class="line">export class Person &#123;</span><br><span class="line">  name: string = &#x27;&#x27;</span><br><span class="line">  age: number = 1</span><br><span class="line">  @Type(()=&gt;TestA) testA: TestA = new TestA(&#x27;&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">@Component export struct ViewA &#123;</span><br><span class="line">  @ObjectLink testA: TestA</span><br><span class="line">  index: number = -1;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row()&#123;</span><br><span class="line">      Button(`View A $&#123;this.testA.str&#125;`)</span><br><span class="line">        .onClick(() =&gt;&#123;</span><br><span class="line">          this.index += 1;</span><br><span class="line">          this.testA.str = `$&#123;this.index&#125; : Test A String` &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .margin(&#123;top : 10 &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-Why-does-the-onChange-event-of-the-HarmonyOS-Slider-component-return-inaccurate-values"><a href="#3-Why-does-the-onChange-event-of-the-HarmonyOS-Slider-component-return-inaccurate-values" class="headerlink" title="3. Why does the onChange event of the HarmonyOS Slider component return inaccurate values?"></a>3. Why does the onChange event of the HarmonyOS Slider component return inaccurate values?</h4><p>During sliding, the Slider’s progress value is a repeating decimal. Use <code>.toFixed().toString()</code> to format the value.</p>
<h4 id="4-Gesture-handling-issues-in-HarmonyOS"><a href="#4-Gesture-handling-issues-in-HarmonyOS" class="headerlink" title="4. Gesture handling issues in HarmonyOS"></a>4. Gesture handling issues in HarmonyOS</h4><p>There are two sibling buttons, A and B, on the page. Button A has a long-press gesture and B has a touch event. Requirement: After a long-press on A, sliding to B should trigger B’s touch event.</p>
<p>Current implementations may cause long-press events to malfunction or be interrupted. Try using combined gestures or binding events: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-combined-gestures-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-combined-gestures-V5</a></p>
<p>Combined gestures are composed of multiple single gestures. Declare the type of combined gesture using different GestureModes in GestureGroup, supporting sequential, parallel, and exclusive recognition:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GestureGroup(mode:GestureMode, gesture:GestureType[])</span><br></pre></td></tr></table></figure>
<ul>
<li>mode: A GestureMode enum value defining the combination type.</li>
<li>gesture: An array of gestures composing this combined gesture.</li>
</ul>
<p><strong>Sequential Recognition</strong>:<br>Use GestureMode.Sequence. Gestures are recognized in registration order. If any gesture fails, subsequent gestures are skipped. Only the last gesture can respond to onActionEnd.</p>
<p>Example: A Column with a translate property for position movement, bound to a Sequence gesture combining LongPressGesture and PanGesture:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State offsetX: number = 0;</span><br><span class="line">  @State offsetY: number = 0;</span><br><span class="line">  @State count: number = 0;</span><br><span class="line">  @State positionX: number = 0;</span><br><span class="line">  @State positionY: number = 0;</span><br><span class="line">  @State borderStyles: BorderStyle = BorderStyle.Solid</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;sequence gesture\n&#x27; + &#x27;LongPress onAction:&#x27; + this.count + &#x27;\nPanGesture offset:\nX: &#x27; + this.offsetX + &#x27;\n&#x27; + &#x27;Y: &#x27; + this.offsetY)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">    &#125;.margin(10)</span><br><span class="line">    .borderWidth(1)</span><br><span class="line">    // Bind translate property to enable component movement</span><br><span class="line">    .translate(&#123; x: this.offsetX, y: this.offsetY, z: 0 &#125;)</span><br><span class="line">    .height(250)</span><br><span class="line">    .width(300)</span><br><span class="line">    // Sequential recognition: PanGesture triggers only after LongPressGesture succeeds</span><br><span class="line">    .gesture(</span><br><span class="line">      // Declare sequential gesture group</span><br><span class="line">      GestureGroup(GestureMode.Sequence,</span><br><span class="line">        // First gesture: LongPress with repeat enabled</span><br><span class="line">        LongPressGesture(&#123; repeat: true &#125;)</span><br><span class="line">          // Increment count when long-press is recognized</span><br><span class="line">          .onAction((event: GestureEvent|undefined) =&gt; &#123;</span><br><span class="line">            if(event)&#123;</span><br><span class="line">              if (event.repeat) &#123;</span><br><span class="line">                this.count++;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;LongPress onAction&#x27;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionEnd(() =&gt; &#123;</span><br><span class="line">            console.info(&#x27;LongPress end&#x27;);</span><br><span class="line">          &#125;),</span><br><span class="line">        // Second gesture: PanGesture (triggers after long-press)</span><br><span class="line">        PanGesture()</span><br><span class="line">          .onActionStart(() =&gt; &#123;</span><br><span class="line">            this.borderStyles = BorderStyle.Dashed;</span><br><span class="line">            console.info(&#x27;pan start&#x27;);</span><br><span class="line">          &#125;)</span><br><span class="line">          // Update position based on pan movement</span><br><span class="line">          .onActionUpdate((event: GestureEvent|undefined) =&gt; &#123;</span><br><span class="line">            if(event)&#123;</span><br><span class="line">              this.offsetX = (this.positionX + event.offsetX);</span><br><span class="line">              this.offsetY = this.positionY + event.offsetY;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;pan update&#x27;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionEnd(() =&gt; &#123;</span><br><span class="line">            this.positionX = this.offsetX;</span><br><span class="line">            this.positionY = this.offsetY;</span><br><span class="line">            this.borderStyles = BorderStyle.Solid;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">      .onCancel(() =&gt; &#123;</span><br><span class="line">        console.log(&quot;sequence gesture canceled&quot;)</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>Parallel Recognition</strong>:<br>Use GestureMode.Parallel. All gestures are recognized simultaneously without interference.</p>
<p>Example: A Column with both single-tap and double-tap gestures:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State count1: number = 0;</span><br><span class="line">  @State count2: number = 0;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;Parallel gesture\n&#x27; + &#x27;tapGesture count is 1:&#x27; + this.count1 + &#x27;\ntapGesture count is 2:&#x27; + this.count2 + &#x27;\n&#x27;)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(200)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    // Parallel recognition: Both single-tap and double-tap can trigger</span><br><span class="line">    .gesture(</span><br><span class="line">      GestureGroup(GestureMode.Parallel,</span><br><span class="line">        TapGesture(&#123; count: 1 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count1++;</span><br><span class="line">          &#125;),</span><br><span class="line">        TapGesture(&#123; count: 2 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count2++;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>Exclusive Recognition</strong>:<br>Use GestureMode.Exclusive. Gestures are recognized simultaneously. The first successful gesture stops recognition for others.</p>
<p>Example: A Column with conflicting single-tap and double-tap gestures:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State count1: number = 0;</span><br><span class="line">  @State count2: number = 0;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;Exclusive gesture\n&#x27; + &#x27;tapGesture count is 1:&#x27; + this.count1 + &#x27;\ntapGesture count is 2:&#x27; + this.count2 + &#x27;\n&#x27;)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(200)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    // Exclusive recognition: Only one gesture can succeed</span><br><span class="line">    .gesture(</span><br><span class="line">      GestureGroup(GestureMode.Exclusive,</span><br><span class="line">        TapGesture(&#123; count: 1 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count1++;</span><br><span class="line">          &#125;),</span><br><span class="line">        TapGesture(&#123; count: 2 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count2++;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="5-How-to-convert-a-HarmonyOS-Object-to-a-Map"><a href="#5-How-to-convert-a-HarmonyOS-Object-to-a-Map" class="headerlink" title="5. How to convert a HarmonyOS Object to a Map?"></a>5. How to convert a HarmonyOS Object to a Map?</h4><p>After receiving data of type Object from an interface, you want to convert it to a Map to use Map methods. Here’s how:</p>
<p>Reference demo:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct otj &#123;</span><br><span class="line"></span><br><span class="line">  @State obj: object = new Object();</span><br><span class="line">  @State map: Map&lt;string, string&gt; = new Map();</span><br><span class="line"></span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    this.obj[&#x27;first&#x27;] = &#x27;1&#x27;;</span><br><span class="line">    this.obj[&#x27;second&#x27;] = &#x27;2&#x27;;</span><br><span class="line">    // Object.entries(this.obj) converts to [[&quot;first&quot;,&quot;1&quot;],[&quot;second&quot;,&quot;2&quot;]]</span><br><span class="line">    Object.entries(this.obj).forEach((item:string[])=&gt;&#123;</span><br><span class="line">      // Method 1</span><br><span class="line">      //this.map[item[0]] = item[1];</span><br><span class="line">      // Method 2 (preferred)</span><br><span class="line">      this.map.set(item[0],item[1]);</span><br><span class="line">      // Access values: this.map[&#x27;key&#x27;] or this.map.get(&#x27;key&#x27;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/625%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O-%E8%B6%85%E5%87%BA-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/625%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O-%E8%B6%85%E5%87%BA-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Custom Layout, Content Exceeding Bottom Navigation Bar, Bottom O 超出 Screen Not Displaying, Obtaining Open Page List, Refresh Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:55:19 / Modified: 11:55:34" itemprop="dateCreated datePublished" datetime="2025-06-25T11:55:19+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O超出-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component"><a href="#【Daily-HarmonyOS-Next-Knowledge】Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O超出-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Custom Layout, Content Exceeding Bottom Navigation Bar, Bottom O超出 Screen Not Displaying, Obtaining Open Page List, Refresh Component"></a>【Daily HarmonyOS Next Knowledge】Custom Layout, Content Exceeding Bottom Navigation Bar, Bottom O超出 Screen Not Displaying, Obtaining Open Page List, Refresh Component</h3><h4 id="1-When-is-the-onPlaceChildren-of-HarmonyOS-custom-layout-redrawn"><a href="#1-When-is-the-onPlaceChildren-of-HarmonyOS-custom-layout-redrawn" class="headerlink" title="1. When is the onPlaceChildren of HarmonyOS custom layout redrawn?"></a>1. When is the onPlaceChildren of HarmonyOS custom layout redrawn?</h4><p>When using a @Prop data in the onPlaceChildren of a custom layout, modifying this @Prop data does not trigger a re-invocation of onPlaceChildren, meaning the layout does not update. How to handle this?  </p>
<p>The OnPlaceChildren method is called only when the component is refreshed. The component triggers a refresh only when the @State variable used in its rendering changes.  </p>
<h4 id="2-How-to-make-content-exceed-the-bottom-navigation-bar-in-HarmonyOS"><a href="#2-How-to-make-content-exceed-the-bottom-navigation-bar-in-HarmonyOS" class="headerlink" title="2. How to make content exceed the bottom navigation bar in HarmonyOS?"></a>2. How to make content exceed the bottom navigation bar in HarmonyOS?</h4><p><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5</a>  </p>
<p>The safe area refers to the page’s display area, which by default does not overlap with system-set non-safe areas such as the status bar and navigation bar. By default, interfaces developed by developers are laid out within the safe area. Attributes and methods are provided to allow developers to set components to break through the safe area restrictions:  </p>
<ul>
<li>The <code>expandSafeArea</code> attribute supports components to extend their drawing area beyond the safe area without changing the layout.  </li>
<li>The <code>setKeyboardAvoidMode</code> can be configured to define how the page avoids the virtual keyboard when it pops up.  </li>
<li>When text elements like the title bar should not overlap with non-safe areas, it is recommended to set the <code>expandSafeArea</code> attribute for components to achieve an immersive effect. Alternatively, the immersive effect can be directly enabled via the window interface <code>setWindowLayoutFullScreen</code>.</li>
</ul>
<h4 id="3-How-to-solve-the-problem-that-the-bottom-of-a-HarmonyOS-list-is-out-of-the-screen-and-not-visible"><a href="#3-How-to-solve-the-problem-that-the-bottom-of-a-HarmonyOS-list-is-out-of-the-screen-and-not-visible" class="headerlink" title="3. How to solve the problem that the bottom of a HarmonyOS list is out of the screen and not visible?"></a>3. How to solve the problem that the bottom of a HarmonyOS list is out of the screen and not visible?</h4><p>Setting the layout of the list to fill the remaining height can solve this issue.<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/faqs/faqs-arkui-component.md#%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6list%E5%9C%A8%E4%B8%8D%E8%AE%BE%E7%BD%AE%E9%AB%98%E5%BA%A6%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%BB%91%E5%8A%A8%E4%B8%8D%E5%88%B0%E5%BA%95%E7%9A%84%E9%97%AE%E9%A2%98api-10">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/faqs/faqs-arkui-component.md#%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6list%E5%9C%A8%E4%B8%8D%E8%AE%BE%E7%BD%AE%E9%AB%98%E5%BA%A6%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%BB%91%E5%8A%A8%E4%B8%8D%E5%88%B0%E5%BA%95%E7%9A%84%E9%97%AE%E9%A2%98api-10</a>  </p>
<p>When the List does not have a height set, if the total height of its child components exceeds the height of the List’s parent component, the List will adopt the parent component’s height. If the List has other sibling nodes, it may be pushed out of the parent component’s display area, making it appear that the bottom cannot be scrolled to.  </p>
<p>Solution: Set the <code>layoutWeight(1)</code> attribute for the List component to allocate all remaining space to it.  </p>
<h4 id="4-How-to-obtain-the-list-of-opened-pages-in-the-navigation-stack-in-HarmonyOS"><a href="#4-How-to-obtain-the-list-of-opened-pages-in-the-navigation-stack-in-HarmonyOS" class="headerlink" title="4. How to obtain the list of opened pages in the navigation stack in HarmonyOS?"></a>4. How to obtain the list of opened pages in the navigation stack in HarmonyOS?</h4><p>It is recommended to use Navigation for page jumping, as Navigation contains interfaces related to the page stack.  </p>
<p>Using Navigation routing provides interfaces to obtain page information in the page stack.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5</a>  </p>
<h4 id="5-How-to-implement-a-bottom-pull-up-component-effect-similar-to-the-Refresh-component-in-HarmonyOS"><a href="#5-How-to-implement-a-bottom-pull-up-component-effect-similar-to-the-Refresh-component-in-HarmonyOS" class="headerlink" title="5. How to implement a bottom pull-up component effect similar to the Refresh component in HarmonyOS?"></a>5. How to implement a bottom pull-up component effect similar to the Refresh component in HarmonyOS?</h4><p>It is found that there is a pull-down component (Refresh), but no bottom pull-up component. Implementing it via scroll calculation and ordinary views often results in unsmooth effects.  </p>
<p>Recommendation: Refer to or directly use the <code>@ohos/pulltorefresh</code> component to achieve pull-down&#x2F;pull-up effects.  </p>
<p>Component library: <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Fpulltorefresh">https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Fpulltorefresh</a><br>Gitee: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_pull_to_refresh">https://gitee.com/openharmony-sig/ohos_pull_to_refresh</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/624-Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/624-Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Component Position Determination, List Item Screen Exit Lifecycle, Calendar View Component, Component Update Issues, Vertical Floating Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:53:30 / Modified: 11:54:14" itemprop="dateCreated datePublished" datetime="2025-06-25T11:53:30+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Component Position Determination, List Item Screen Exit Lifecycle, Calendar View Component, Component Update Issues, Vertical Floating Issues"></a>[Daily HarmonyOS Next Knowledge] Component Position Determination, List Item Screen Exit Lifecycle, Calendar View Component, Component Update Issues, Vertical Floating Issues</h3><h4 id="1-How-to-determine-the-position-of-each-component-or-card-on-the-screen-in-HarmonyOS"><a href="#1-How-to-determine-the-position-of-each-component-or-card-on-the-screen-in-HarmonyOS" class="headerlink" title="1. How to determine the position of each component or card on the screen in HarmonyOS?"></a>1. How to determine the position of each component or card on the screen in HarmonyOS?</h4><p>Use <code>componentUtils.getRectangleById</code> to obtain the component instance object by ID. The object returns the component’s coordinates and size synchronously to the developer.  </p>
<p>Reference documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentutils-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentutils-V5</a>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getRectangleById</span>(<span class="attr">id</span>: <span class="built_in">string</span>): <span class="title class_">ComponentInfo</span></span><br><span class="line"><span class="comment">// Obtain the component instance object by ID. The coordinates and size are returned synchronously to the developer via the instance object.</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. In HarmonyOS, when a ListItem in LazyForEach scrolls off-screen, onDisAppear is not called. Is this normal?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">space</span>: commonConst.<span class="property">LIST_ITEM_SPACE</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">LazyForEach</span>(<span class="variable language_">this</span>.<span class="property">goodsListData</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">GoodsListItemType</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>(item?.<span class="property">goodsImg</span>)</span><br><span class="line">                .<span class="title function_">width</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">                .<span class="title function_">height</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">width</span>(commonConst.<span class="property">GOODS_IMAGE_WIDTH</span>)</span><br><span class="line">            .<span class="title function_">height</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(item?.<span class="property">goodsName</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(commonConst.<span class="property">NORMAL_FONT_SIZE</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: commonConst.<span class="property">BIGGER_FONT_SIZE</span> &#125;)</span><br><span class="line">              <span class="title class_">Text</span>(item?.<span class="property">advertisingLanguage</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.gray&#x27;</span>))</span><br><span class="line">                .<span class="title function_">fontSize</span>(commonConst.<span class="property">GOODS_EVALUATE_FONT_SIZE</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: commonConst.<span class="property">MARGIN_RIGHT</span>, <span class="attr">bottom</span>: commonConst.<span class="property">BIGGER_FONT_SIZE</span> &#125;)</span><br><span class="line">              <span class="title class_">Row</span>() &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item?.<span class="property">evaluate</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(commonConst.<span class="property">GOODS_EVALUATE_FONT_SIZE</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.deepGray&#x27;</span>))</span><br><span class="line">                <span class="title class_">Text</span>(item?.<span class="property">price</span>).<span class="title function_">fontSize</span>(commonConst.<span class="property">NORMAL_FONT_SIZE</span>).<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.freshRed&#x27;</span>))</span><br><span class="line">              &#125;</span><br><span class="line">              .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span>)</span><br><span class="line">              .<span class="title function_">width</span>(commonConst.<span class="property">GOODS_LIST_WIDTH</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">padding</span>(commonConst.<span class="property">GOODS_LIST_PADDING</span>)</span><br><span class="line">            .<span class="title function_">width</span>(commonConst.<span class="property">GOODS_FONT_WIDTH</span>)</span><br><span class="line">            .<span class="title function_">height</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">          .<span class="title function_">height</span>(commonConst.<span class="property">GOODS_LIST_HEIGHT</span>)</span><br><span class="line">          .<span class="title function_">width</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">        &#125;.<span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet  dddd&quot;</span>)</span><br><span class="line">        &#125;).<span class="title function_">onDisAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet   eeeee&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span>onDisAppear<span class="string">` callback is not triggered when the item scrolls off-screen. Why?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet  dddd&quot;</span>)</span><br><span class="line">&#125;).<span class="title function_">onDisAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet   eeeee&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Explanation**: `</span>onDisAppear<span class="string">` triggers when the component is unloaded from the component tree. To monitor visibility changes, use `</span>onVisibleAreaChange<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Reference for HarmonyOS calendar component in month view mode?  </span></span><br><span class="line"><span class="string">Supports switching to previous month (1st day), next month, or today. Allows date selection when browsing a specific month.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// import &#123; Lunar &#125; from &#x27;lunar-javascript&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dateClass <span class="keyword">from</span> <span class="string">&#x27;../beans/DateClass&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">DatePickerDialogExample01</span> &#123;</span><br><span class="line">  <span class="attr">weekList</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;一&#x27;</span>, <span class="string">&#x27;二&#x27;</span>, <span class="string">&#x27;三&#x27;</span>, <span class="string">&#x27;四&#x27;</span>, <span class="string">&#x27;五&#x27;</span>, <span class="string">&#x27;六&#x27;</span>, <span class="string">&#x27;日&#x27;</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">show</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectDate</span>: dayjs.<span class="property">Dayjs</span> = <span class="title function_">dayjs</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectMonth</span>: <span class="built_in">string</span> = <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月&#x27;</span>)</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">dataList</span>: <span class="title class_">Array</span>&lt;dateClass&gt; = []</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">monthParam</span>: <span class="built_in">number</span> = <span class="number">0</span> <span class="comment">// Parameter for calendar navigation</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;弹出或关闭日历&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">36</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">show</span> = !<span class="variable language_">this</span>.<span class="property">show</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectDate</span> = <span class="title function_">dayjs</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">monthParam</span> = <span class="number">0</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">show</span>) &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">selectMonth</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.startIcon&#x27;</span>))</span><br><span class="line">                .<span class="title function_">width</span>(<span class="number">24</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">12</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">            .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">monthParam</span>--</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.startIcon&#x27;</span>))</span><br><span class="line">                .<span class="title function_">width</span>(<span class="number">24</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">12</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">            .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">monthParam</span>++</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">48</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">weekList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">weekList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                  .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Grid</span>() &#123;</span><br><span class="line">              <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dataList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: dateClass</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">                  <span class="title class_">Column</span>() &#123;</span><br><span class="line">                    <span class="title class_">Text</span>(item.<span class="property">day</span>.<span class="title function_">toString</span>())</span><br><span class="line">                      .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                      .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                      .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                      .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                      .<span class="title function_">opacity</span>(item.<span class="property">isToMonth</span> ? <span class="number">1</span> : <span class="number">0.4</span>)</span><br><span class="line">                    <span class="title class_">Text</span>(item.<span class="property">lunarDay</span>)</span><br><span class="line">                      .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">                      .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                      .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                      .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                      .<span class="title function_">opacity</span>(item.<span class="property">isToMonth</span> ? <span class="number">1</span> : <span class="number">0.4</span>)</span><br><span class="line">                  &#125;</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                  .<span class="title function_">height</span>(<span class="number">48</span>)</span><br><span class="line">                  .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                  .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                  .<span class="title function_">backgroundColor</span>(item.<span class="property">dayjsObj</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ==</span><br><span class="line">                  <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ?</span><br><span class="line">                    <span class="string">&#x27;#007DFF&#x27;</span> : <span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">                  .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">                  .<span class="title function_">borderColor</span>(item.<span class="property">dayjsObj</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ==</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">selectDate</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ?</span><br><span class="line">                    <span class="string">&#x27;#007DFF&#x27;</span> : <span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">                  .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">selectDate</span> = item.<span class="property">dayjsObj</span></span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">288</span>)</span><br><span class="line">            .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">            .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">            .<span class="title function_">columnsGap</span>(<span class="number">0</span>)</span><br><span class="line">            .<span class="title function_">rowsGap</span>(<span class="number">0</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">12</span>, <span class="attr">right</span>: <span class="number">12</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">getDataList</span>(<span class="params"><span class="attr">param</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = []</span><br><span class="line">        <span class="keyword">let</span> firstDate = <span class="title function_">dayjs</span>().<span class="title function_">add</span>(param, <span class="string">&#x27;month&#x27;</span>).<span class="title function_">startOf</span>(<span class="string">&#x27;month&#x27;</span>) <span class="comment">// First day of the month</span></span><br><span class="line">        <span class="keyword">let</span> afterDate = <span class="title function_">dayjs</span>().<span class="title function_">add</span>(param, <span class="string">&#x27;month&#x27;</span>).<span class="title function_">endOf</span>(<span class="string">&#x27;month&#x27;</span>) <span class="comment">// Last day of the month</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">selectMonth</span> = firstDate.<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> frontDay = <span class="number">0</span> <span class="comment">// Days to offset for calendar display</span></span><br><span class="line">        <span class="keyword">if</span> (firstDate.<span class="title function_">day</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">          frontDay = <span class="number">6</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          frontDay = firstDate.<span class="title function_">day</span>() - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> showFirstDay = firstDate.<span class="title function_">subtract</span>(frontDay, <span class="string">&#x27;day&#x27;</span>) <span class="comment">// First visible day in calendar</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>;i &lt; <span class="number">42</span>; i++) &#123;</span><br><span class="line">          <span class="keyword">let</span> dayjsObj = showFirstDay.<span class="title function_">add</span>(i, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line">          <span class="keyword">let</span> day = dayjsObj.<span class="title function_">date</span>()</span><br><span class="line">          <span class="keyword">let</span> lunarDay = <span class="string">&#x27;&#x27;</span></span><br><span class="line">          <span class="comment">// if (Lunar.fromDate(dayjsObj.toDate()).getFestivals().length !== 0) &#123; // Show festival</span></span><br><span class="line">          <span class="comment">// lunarDay = Lunar.fromDate(dayjsObj.toDate()).getFestivals()[0]</span></span><br><span class="line">          <span class="comment">// &#125; else if (Lunar.fromDate(dayjsObj.toDate()).getJieQi() !== &#x27;&#x27;) &#123; // Show solar term</span></span><br><span class="line">          <span class="comment">// lunarDay = Lunar.fromDate(dayjsObj.toDate()).getJieQi()</span></span><br><span class="line">          <span class="comment">// &#125; else &#123; // Show lunar date</span></span><br><span class="line">          <span class="comment">// lunarDay = Lunar.fromDate(dayjsObj.toDate()).getDayInChinese()</span></span><br><span class="line">          <span class="comment">// &#125;</span></span><br><span class="line">          <span class="keyword">let</span> isToMonth = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">if</span> (dayjsObj.<span class="title function_">isBefore</span>(firstDate) || dayjsObj.<span class="title function_">isAfter</span>(afterDate)) &#123;</span><br><span class="line">            isToMonth = <span class="literal">false</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dataList</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title function_">dateClass</span>(dayjsObj, day, lunarDay, isToMonth))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// console.log(&#x27;aboutToAppear&#x27;,JSON.stringify(this.dataList))</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// @ts-ignore</span></span><br><span class="line">    <span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">DateClass</span> &#123;</span><br><span class="line">      <span class="attr">dayjsObj</span>: dayjs.<span class="property">Dayjs</span> <span class="comment">// dayjs time object</span></span><br><span class="line">      <span class="attr">day</span>: <span class="built_in">number</span> <span class="comment">// Day of the month</span></span><br><span class="line">      <span class="attr">lunarDay</span>: <span class="built_in">string</span> <span class="comment">// Lunar calendar date</span></span><br><span class="line">      <span class="attr">isToMonth</span>: <span class="built_in">boolean</span> <span class="comment">// Whether it belongs to the current month</span></span><br><span class="line"></span><br><span class="line">      <span class="title function_">constructor</span>(<span class="params"><span class="attr">dayjsObj</span>: dayjs.<span class="title class_">Dayjs</span>, <span class="attr">day</span>: <span class="built_in">number</span>, <span class="attr">lunarDay</span>: <span class="built_in">string</span>, <span class="attr">isToMonth</span>: <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dayjsObj</span> = dayjsObj</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">day</span> = day</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lunarDay</span> = lunarDay</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">isToMonth</span> = isToMonth</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Components created via `</span><span class="title class_">WrappedBuilder</span>.<span class="property">builder</span><span class="string">` in HarmonyOS cannot be updated. Does `</span><span class="title class_">WrappedBuilder</span>.<span class="property">builder</span><span class="string">` not support updates?  </span></span><br><span class="line"><span class="string">When creating a component with `</span><span class="title class_">WrappedBuilder</span>.<span class="property">builder</span><span class="string">`, the initial build works, but state changes in the parent component do not trigger rebuilds.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dxItemRenderService</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">section</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">templateItem</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">section</span>?.<span class="property">template</span>?.<span class="property">name</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dxItemRenderService</span>?.<span class="title function_">getDxWrappedBuilder</span>().<span class="title function_">builder</span>(<span class="variable language_">this</span>.<span class="property">section</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">section</span>?.<span class="property">template</span>?.<span class="property">name</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;not found&#x27;</span> + <span class="variable language_">this</span>.<span class="property">templateItem</span>?.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">opacity</span>(<span class="variable language_">this</span>.<span class="title function_">searchBarHasRender</span>())</span><br><span class="line">  .<span class="title function_">onAreaChange</span>(<span class="variable language_">this</span>.<span class="property">searchBarAreaChange</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Explanation**: `</span><span class="title class_">BuilderNode</span><span class="string">` does not automatically update state variables. Manually call the `</span>update<span class="string">` method to refresh content.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-buildernode-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. In HarmonyOS, setting `</span>responseRegion<span class="string">` to float vertically by 50% only works for the upper half?  </span></span><br><span class="line"><span class="string">Code example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&quot;按钮1&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">stateStyles</span>(&#123;</span><br><span class="line">      <span class="attr">pressed</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">normal</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">responseRegion</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="string">&#x27;-50%&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;200%&#x27;</span> &#125;)</span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: The lower half of the response region does not work due to layout遮挡 (similar to z-index conflicts in Stack).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. Replace `</span><span class="title class_">Blank</span><span class="string">` with `</span><span class="title class_">Row</span><span class="string">`.  </span></span><br><span class="line"><span class="string">2. Set `</span><span class="title function_">zIndex</span>(<span class="number">1</span>)<span class="string">` on the `</span><span class="title class_">Text</span><span class="string">` component to bring it to the top layer.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Fixed example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&quot;按钮1&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">stateStyles</span>(&#123;</span><br><span class="line">      <span class="attr">pressed</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">normal</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">responseRegion</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="string">&#x27;-50%&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;200%&#x27;</span> &#125;)</span><br><span class="line">    .<span class="title function_">zIndex</span>(<span class="number">1</span>)  <span class="comment">// Ensure the component is on top</span></span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/623-Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/623-Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Toggle Control Dragging, Slider Component, Checkbox Component Style, Adding Data in Loops, List Safe Area Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:37:59 / Modified: 12:25:01" itemprop="dateCreated datePublished" datetime="2025-06-25T11:37:59+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Toggle Control Dragging, Slider Component, Checkbox Component Style, Adding Data in Loops, List Safe Area Issues"></a>[Daily HarmonyOS Next Knowledge] Toggle Control Dragging, Slider Component, Checkbox Component Style, Adding Data in Loops, List Safe Area Issues</h3><h4 id="1-In-HarmonyOS-when-making-a-Toggle-draggable-Toggle-type-is-Button-the-click-event-fires-during-dragging-How-to-block-this"><a href="#1-In-HarmonyOS-when-making-a-Toggle-draggable-Toggle-type-is-Button-the-click-event-fires-during-dragging-How-to-block-this" class="headerlink" title="1. In HarmonyOS, when making a Toggle draggable (Toggle type is Button), the click event fires during dragging. How to block this?"></a>1. In HarmonyOS, when making a Toggle draggable (Toggle type is Button), the click event fires during dragging. How to block this?</h4><p>When making a Toggle draggable (type Button), the click event fires during dragging. How to block this? This issue only occurs with Button type; Checkbox and Switch work fine.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; hilog &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.PerformanceAnalysisKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">TestDragToggleWithBtn</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">offsetX</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">offsetY</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">positionX</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">positionY</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">toggleIsOn</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">isDragging</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Button</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">toggleIsOn</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Toggle&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">selectedColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">      <span class="comment">// onchange callback fires before onActionEnd</span></span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">isOn</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">        hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;xxx %&#123;public&#125;s&#x27;</span>, onClick</span><br><span class="line">        <span class="title class_">Toggle</span>, <span class="attr">isOn</span>:</span><br><span class="line">        $</span><br><span class="line">        &#123;</span><br><span class="line">          isOn</span><br><span class="line">        &#125;</span><br><span class="line">        )</span><br><span class="line">        ;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isDragging======&#x27;</span> + <span class="variable language_">this</span>.<span class="property">isDragging</span>)</span><br><span class="line">        <span class="keyword">if</span> (isOn == <span class="variable language_">this</span>.<span class="property">toggleIsOn</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">toggleIsOn</span> = isOn</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isDragging</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">toggleIsOn</span> = !<span class="variable language_">this</span>.<span class="property">toggleIsOn</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">translate</span>(&#123; <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">offsetX</span>, <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">offsetY</span> &#125;)</span><br><span class="line">      .<span class="title function_">gesture</span>(</span><br><span class="line">        <span class="title class_">PanGesture</span>()</span><br><span class="line">          .<span class="title function_">onActionStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isDragging</span> = <span class="literal">true</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">offsetX</span> = <span class="variable language_">this</span>.<span class="property">positionX</span> + event.<span class="property">offsetX</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">offsetY</span> = <span class="variable language_">this</span>.<span class="property">positionY</span> + event.<span class="property">offsetY</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionEnd</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">positionX</span> = <span class="variable language_">this</span>.<span class="property">offsetX</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">positionY</span> = <span class="variable language_">this</span>.<span class="property">offsetY</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isDragging</span> = <span class="literal">false</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. The HarmonyOS Swiper component&#x27;s indicator has a default width/height that cannot be modified?  </span></span><br><span class="line"><span class="string">This can be resolved by modifying the `</span>bottom<span class="string">` attribute:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TestSwipper</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">bannerInfo</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">bannerInfo</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">bannerInfo</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title class_">Swiper</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">bannerInfo</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&quot;app.media.startIcon&quot;</span>))</span><br><span class="line">              .<span class="title function_">alt</span>($r(<span class="string">&quot;app.media.startIcon&quot;</span>))</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">              .<span class="title function_">aspectRatio</span>(<span class="number">3.649</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="string">&quot;8vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line"></span><br><span class="line">            &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">35</span>)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">cachedCount</span>(<span class="number">2</span>)</span><br><span class="line">      .<span class="title function_">autoPlay</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">interval</span>(<span class="number">3000</span>)</span><br><span class="line">      .<span class="title function_">vertical</span>(<span class="literal">false</span>)</span><br><span class="line">      .<span class="title function_">loop</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&quot;16vp&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;16vp&quot;</span> &#125;)</span><br><span class="line">      .<span class="title function_">indicator</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DotIndicator</span>()</span><br><span class="line">          .<span class="title function_">bottom</span>(<span class="number">22</span>)</span><br><span class="line">          .<span class="title function_">itemWidth</span>(<span class="string">&quot;4vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">itemHeight</span>(<span class="string">&quot;4vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">selectedItemWidth</span>(<span class="string">&quot;6vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">selectedItemHeight</span>(<span class="string">&quot;6vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">color</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">          .<span class="title function_">selectedColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS CheckBox custom styling issue?  </span></span><br><span class="line"><span class="string">Cannot modify the default CheckBox icon. Style must be set specifically for CheckBox.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the CheckBox style configuration documentation:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-checkbox-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. In HarmonyOS, how to add data to a Row/Column via a loop?  </span></span><br><span class="line"><span class="string">For example, add each string from a `</span><span class="built_in">string</span>[]<span class="string">` as a Text in a Row.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use `</span><span class="title class_">ForEach</span><span class="string">` or `</span><span class="title class_">LazyForEach</span><span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="attr">msgs</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">msgs</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">Text</span>(item)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS listItem does not support setting safe areas. Any workaround to make listItem extend beyond the safe area?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> windowClass = <span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&quot;windowStage&quot;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">WindowStage</span></span><br><span class="line">  windowClass.<span class="title function_">getMainWindowSync</span>().<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onPageHide</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> windowClass = <span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&quot;windowStage&quot;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">WindowStage</span></span><br><span class="line">  windowClass.<span class="title function_">getMainWindowSync</span>().<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/20/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/22/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">300</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
