<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/15/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/15/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/524-Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/524-Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Hide Status Bar, Launch Pop-ups in Methods, System Screen Brightness Monitoring, Photo Zooming and Dragging, Prevent Screenshots of Input Interfaces</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:10:51 / Modified: 10:11:17" itemprop="dateCreated datePublished" datetime="2025-06-25T10:10:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces"><a href="#Daily-HarmonyOS-Next-Knowledge-Hide-Status-Bar-Launch-Pop-ups-in-Methods-System-Screen-Brightness-Monitoring-Photo-Zooming-and-Dragging-Prevent-Screenshots-of-Input-Interfaces" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Hide Status Bar, Launch Pop-ups in Methods, System Screen Brightness Monitoring, Photo Zooming and Dragging, Prevent Screenshots of Input Interfaces"></a>[Daily HarmonyOS Next Knowledge] Hide Status Bar, Launch Pop-ups in Methods, System Screen Brightness Monitoring, Photo Zooming and Dragging, Prevent Screenshots of Input Interfaces</h3><h4 id="1-How-to-hide-the-status-bar-when-pulling-down-in-HarmonyOS"><a href="#1-How-to-hide-the-status-bar-when-pulling-down-in-HarmonyOS" class="headerlink" title="1. How to hide the status bar when pulling down in HarmonyOS?"></a>1. How to hide the status bar when pulling down in HarmonyOS?</h4><p>To always hide the status bar, you can set relevant properties to transparent via the <code>setWindowSystemBarProperties</code> interface.<br>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9</a>  </p>
<p><code>setWindowSystemBarProperties(systemBarProperties: SystemBarProperties): Promise&lt;void&gt;</code><br>Sets the properties of the main window’s three-key navigation bar and status bar using a Promise asynchronous callback.<br>This interface does not take effect on 2in1 devices. On other devices, it does not take effect immediately in split-screen mode (i.e., window mode is <code>window.WindowStatusType.SPLIT_SCREEN</code>), free-floating window mode (i.e., window mode is <code>window.WindowStatusType.FLOATING</code>), or free multi-window mode (enabled by clicking the free multi-window button in the device control center). It only takes effect when entering the full-screen main window.  </p>
<h4 id="2-How-to-launch-a-custom-pop-up-in-a-class-or-function-in-HarmonyOS-The-built-in-alert-works-but-custom-prompts-cannot-be-used"><a href="#2-How-to-launch-a-custom-pop-up-in-a-class-or-function-in-HarmonyOS-The-built-in-alert-works-but-custom-prompts-cannot-be-used" class="headerlink" title="2. How to launch a custom pop-up in a class or function in HarmonyOS? The built-in alert works, but custom prompts cannot be used."></a>2. How to launch a custom pop-up in a class or function in HarmonyOS? The built-in alert works, but custom prompts cannot be used.</h4><p>Please refer to the following code example:<br><strong>Main page</strong>  </p>
<pre><code class="language-typescript">// Set the builder in @entry first, then directly call showTest  
import &#123; customDialogBuilder, changeDialogBuilder, MyShowTest &#125; from ‘…/pages/Page’  
let myShowTest = new MyShowTest()  
@Entry  
@Component  
struct Index &#123;  
  @State message: string = ‘Hello World’  
  onPageShow(): void &#123;  
    changeDialogBuilder(customDialogBuilder.bind(this))  
  &#125;  

  build() &#123;  
    Row() &#123;  
      Column() &#123;  
        Text(this.message)  
          .fontSize(50)  
          .fontWeight(FontWeight.Bold)  
          .onClick(() =&gt; &#123;  
            myShowTest.showTest()  
          &#125;)  
      &#125;  
      .width(‘100%’)  
    &#125;  
    .height(‘100%’)  
  &#125;  
&#125;  
</code></pre>
<p><strong>Custom class</strong>  </p>
<pre><code class="language-typescript">// custom_dialog.ets  
import promptAction from ‘@ohos.promptAction’  
let myDialogBuilder: CustomBuilder;  
let customDialogId: number = 0  

@Builder  
export function customDialogBuilder() &#123;  
  Column() &#123;  
    Text(‘Custom dialog Message’).fontSize(10)  
    Row() &#123;  
      Button(“Confirm”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
      Blank().width(50)  
      Button(“Cancel”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
    &#125;  
  &#125;.height(200).padding(5)  
&#125;  

export function changeDialogBuilder(builder: CustomBuilder) &#123;  
  myDialogBuilder = builder  
&#125;  

export class MyShowTest&#123;  
  showTest() &#123;  
    if (myDialogBuilder === undefined) &#123;  
      return  
    &#125;  
    promptAction.openCustomDialog(&#123;  
      builder: myDialogBuilder  
    &#125;).then((dialogId: number) =&gt; &#123;  
      customDialogId = dialogId  
    &#125;)  
  &#125;  
&#125;  
</code></pre>
<p>Modify <code>customDialogBuilder()</code> to the following code (add <code>backGroundColor</code> and <code>width</code> properties to Column) to customize the pop-up background color:  </p>
<pre><code class="language-typescript">@Builder  
export function customDialogBuilder() &#123;  
  Column() &#123;  
    Text(‘Custom dialog Message’).fontSize(10)  
    Row() &#123;  
      Button(“Confirm”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
      Blank().width(50)  
      Button(“Cancel”).onClick(() =&gt; &#123;  
        promptAction.closeCustomDialog(customDialogId)  
      &#125;)  
    &#125;  
  &#125;.height(200).padding(5).backgroundColor(Color.Green).width(‘100%’)  
&#125;  
</code></pre>
<p>Using <code>backgroundImage</code> and <code>backgroundImageSize(ImageSize.Cover)</code> instead of <code>backgroundColor</code> can achieve similar effects, but the pop-up width cannot be changed currently.  </p>
<h4 id="3-How-to-monitor-the-system-screen-brightness-in-HarmonyOS-After-setting-the-brightness-the-brightness-settings-in-the-system-control-center-no-longer-take-effect"><a href="#3-How-to-monitor-the-system-screen-brightness-in-HarmonyOS-After-setting-the-brightness-the-brightness-settings-in-the-system-control-center-no-longer-take-effect" class="headerlink" title="3. How to monitor the system screen brightness in HarmonyOS? After setting the brightness, the brightness settings in the system control center no longer take effect."></a>3. How to monitor the system screen brightness in HarmonyOS? After setting the brightness, the brightness settings in the system control center no longer take effect.</h4><p><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowbrightness9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#ZH-CN_TOPIC_0000001884757714__setwindowbrightness9</a>  </p>
<p>Allows the application window to set the screen brightness value using a callback asynchronous callback.<br>Current screen brightness specification: When the window sets the screen brightness, the control center cannot adjust the system screen brightness. After the window restores the default system brightness, the control center can adjust the system brightness. The brightness value is a floating-point number, ranging from <code>[0.0, 1.0]</code> or -1.0. 1.0 represents the brightest, and -1.0 represents the default brightness.  </p>
<h4 id="4-How-to-achieve-the-effect-of-dragging-and-browsing-photos-after-zooming-in-similar-to-the-system-photo-album-in-HarmonyOS"><a href="#4-How-to-achieve-the-effect-of-dragging-and-browsing-photos-after-zooming-in-similar-to-the-system-photo-album-in-HarmonyOS" class="headerlink" title="4. How to achieve the effect of dragging and browsing photos after zooming in, similar to the system photo album in HarmonyOS?"></a>4. How to achieve the effect of dragging and browsing photos after zooming in, similar to the system photo album in HarmonyOS?</h4><p>To implement a zooming and browsing effect for images, it is found that using <code>scale</code> to zoom the image can only enlarge the visible part and cannot drag to browse areas outside the image container’s visible area. Setting the image component size to achieve zooming cannot center the anchor point area. What solution should be adopted to achieve the drag-and-browse effect after zooming in, similar to the system photo album?  </p>
<p>The current codelab “Electronic Album” includes scenarios for image zooming and dragging.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-ElectronicAlbum">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-ElectronicAlbum</a><br>In addition, third-party libraries are available: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_image_view_zoom">https://gitee.com/openharmony-sig/ohos_image_view_zoom</a>  </p>
<h4 id="5-How-to-prevent-screenshot-or-screen-recording-of-the-password-input-interface-in-HarmonyOS"><a href="#5-How-to-prevent-screenshot-or-screen-recording-of-the-password-input-interface-in-HarmonyOS" class="headerlink" title="5. How to prevent screenshot or screen recording of the password input interface in HarmonyOS?"></a>5. How to prevent screenshot or screen recording of the password input interface in HarmonyOS?</h4><p>Set the <code>setWindowPrivacyMode</code> under <code>window</code> to privacy mode, which prevents the window content from being screenshot or screen recorded. For specific details, refer to the official document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9</a>  </p>
<p><code>setWindowPrivacyMode(isPrivacyMode: boolean, callback: AsyncCallback&lt;void&gt;): void</code><br>Sets whether the window is in privacy mode using a callback asynchronous callback. The content of a window set to privacy mode cannot be screenshot or screen recorded. This interface can be used in scenarios where screenshot&#x2F;screen recording needs to be prohibited.  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/523-Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/523-Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Foldable Screen Status Judgment, H5 Image Selection, Component Refresh, Click-to-Zoom Images, Interface Update Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:01:40 / Modified: 10:03:59" itemprop="dateCreated datePublished" datetime="2025-06-25T10:01:40+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Foldable-Screen-Status-Judgment-H5-Image-Selection-Component-Refresh-Click-to-Zoom-Images-Interface-Update-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Foldable Screen Status Judgment, H5 Image Selection, Component Refresh, Click-to-Zoom Images, Interface Update Issues"></a>[Daily HarmonyOS Next Knowledge] Foldable Screen Status Judgment, H5 Image Selection, Component Refresh, Click-to-Zoom Images, Interface Update Issues</h3><h4 id="1-How-to-determine-if-a-HarmonyOS-foldable-phone-is-currently-unfolded-or-folded"><a href="#1-How-to-determine-if-a-HarmonyOS-foldable-phone-is-currently-unfolded-or-folded" class="headerlink" title="1. How to determine if a HarmonyOS foldable phone is currently unfolded or folded?"></a>1. How to determine if a HarmonyOS foldable phone is currently unfolded or folded?</h4><p>Refer to the API to get the fold status of the current foldable device: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#foldstatus10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#foldstatus10</a>  </p>
<p><strong>FoldStatus</strong><br>Enumeration of the fold status of the current foldable device.  </p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Value</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">FOLD_STATUS_UNKNOWN</td>
<td align="left">0</td>
<td align="left">The device’s current fold status is unknown.</td>
</tr>
<tr>
<td align="left">FOLD_STATUS_EXPANDED</td>
<td align="left">1</td>
<td align="left">The device is currently in a fully unfolded state.</td>
</tr>
<tr>
<td align="left">FOLD_STATUS_FOLDED</td>
<td align="left">2</td>
<td align="left">The device is currently in a folded state.</td>
</tr>
<tr>
<td align="left">FOLD_STATUS_HALF_FOLDED</td>
<td align="left">3</td>
<td align="left">The device is currently in a half-folded state (between fully unfolded and folded).</td>
</tr>
</tbody></table>
<h4 id="2-In-HarmonyOS-H5-pages-image-selection-can-be-listened-to-via-onShowFileSelector-but-video-selection-cannot-Are-there-other-methods-for-video-selection"><a href="#2-In-HarmonyOS-H5-pages-image-selection-can-be-listened-to-via-onShowFileSelector-but-video-selection-cannot-Are-there-other-methods-for-video-selection" class="headerlink" title="2. In HarmonyOS H5 pages, image selection can be listened to via onShowFileSelector, but video selection cannot. Are there other methods for video selection?"></a>2. In HarmonyOS H5 pages, image selection can be listened to via onShowFileSelector, but video selection cannot. Are there other methods for video selection?</h4><p>Video selection in H5 pages can also be listened to via <code>onShowFileSelector</code>. Refer to the following documentation and example:  </p>
<ul>
<li>Documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onshowfileselector9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5#onshowfileselector9</a>  </li>
<li><code>onShowFileSelector(callback: Callback&lt;OnShowFileSelectorEvent, boolean&gt;)</code>: Processes HTML forms with “file” input types. If not called or returns false, the Web component provides a default “select file” interface. If returns true, the app can customize the response behavior.</li>
</ul>
<p><strong>Example</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">WebComponent</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> webview.<span class="title class_">WebviewController</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Web</span>(&#123; <span class="attr">src</span>: $rawfile(<span class="string">&#x27;index.html&#x27;</span>), <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;)</span><br><span class="line">        .<span class="title function_">onShowFileSelector</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event) &#123;</span><br><span class="line">            <span class="keyword">let</span> photoSelectOptions = <span class="keyword">new</span> photoAccessHelper.<span class="title class_">PhotoSelectOptions</span>();</span><br><span class="line">            <span class="keyword">let</span> photoPicker = <span class="keyword">new</span> photoAccessHelper.<span class="title class_">PhotoViewPicker</span>();</span><br><span class="line">            <span class="comment">// Filter media file types to IMAGE_VIDEO_TYPE</span></span><br><span class="line">            photoSelectOptions.<span class="property">MIMEType</span> = photoAccessHelper.<span class="property">PhotoViewMIMETypes</span>.<span class="property">IMAGE_VIDEO_TYPE</span>;</span><br><span class="line">            <span class="comment">// Set maximum selection count</span></span><br><span class="line">            photoSelectOptions.<span class="property">maxSelectNumber</span> = <span class="number">5</span>;</span><br><span class="line">            photoPicker.<span class="title function_">select</span>(photoSelectOptions).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;asd===&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">photoUris</span>))</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res ===&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(event))</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-How-to-implement-click-to-zoom-images-in-HarmonyOS"><a href="#3-How-to-implement-click-to-zoom-images-in-HarmonyOS" class="headerlink" title="3. How to implement click-to-zoom images in HarmonyOS?"></a>3. How to implement click-to-zoom images in HarmonyOS?</h4><p>Is there a component for large-image browsing that supports double-click zooming?  </p>
<p>Currently, no dedicated component exists, but you can refer to the source code for large-image viewing and left&#x2F;right image browsing in the gallery: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/applications_photos/tree/master">https://gitee.com/openharmony/applications_photos/tree/master</a>  </p>
<p>Alternatively, use the following code:  </p>
<ol>
<li><strong>Page component</strong>:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SharedTransitionExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">active</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageNames</span>: <span class="title class_">Resource</span>[] = [$r(<span class="string">&#x27;app.media.image1&#x27;</span>), $r(<span class="string">&#x27;app.media.image2&#x27;</span>), $r(<span class="string">&#x27;app.media.image3&#x27;</span>)]</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;currentIndex&#x27;</span>) <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">imageNames</span>, <span class="function">(<span class="params"><span class="attr">res</span>: <span class="title class_">Resource</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Image</span>(res)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Contain</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">sharedTransition</span>(<span class="string">&#x27;sharedImage&#x27;</span> + res.<span class="property">id</span>, &#123;</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span>,</span><br><span class="line">          <span class="attr">zIndex</span>: <span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="number">10</span> : -<span class="number">10</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/Index&#x27;</span>, <span class="attr">params</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">imageNames</span>,</span><br><span class="line">          &#125; &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span> &#125;)</span><br><span class="line">      .<span class="title function_">onEnter</span>(<span class="function">(<span class="params"><span class="attr">type</span>?: <span class="title class_">RouteType</span>, <span class="attr">progress</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Ease</span> &#125;)</span><br><span class="line">      .<span class="title function_">onExit</span>(<span class="function">(<span class="params"><span class="attr">type</span>?: <span class="title class_">RouteType</span>, <span class="attr">progress</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. **Index page**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> <span class="variable language_">window</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.window&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Data</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="title class_">Resource</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">None</span>,</span><br><span class="line">  <span class="title class_">Left</span>,</span><br><span class="line">  <span class="title class_">Right</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">swiperController</span>: <span class="title class_">SwiperController</span> = <span class="keyword">new</span> <span class="title class_">SwiperController</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageNames</span>: <span class="title class_">Resource</span>[] = []</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;currentIndex&#x27;</span>) <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">screenWidth</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">op</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = (router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Data</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">imageNames</span> = data.<span class="property">data</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>)).<span class="title function_">then</span>(<span class="function"><span class="params">currentWindow</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> property = currentWindow.<span class="title function_">getWindowProperties</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">screenWidth</span> = property.<span class="property">windowRect</span>.<span class="property">width</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Swiper</span>(<span class="variable language_">this</span>.<span class="property">swiperController</span>) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">imageNames</span>, <span class="function">(<span class="params"><span class="attr">name</span>: <span class="title class_">Resource</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">ImageComponent</span>(&#123;</span><br><span class="line">              <span class="attr">image</span>: name,</span><br><span class="line">              <span class="attr">viewWidth</span>: <span class="variable language_">this</span>.<span class="property">screenWidth</span>,</span><br><span class="line">              <span class="attr">isCurrent</span>: <span class="variable language_">this</span>.<span class="property">currentIndex</span> === index,</span><br><span class="line">              <span class="attr">onNeedGoNext</span>: <span class="function">(<span class="params"><span class="attr">dire</span>: <span class="title class_">Direction</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (dire === <span class="title class_">Direction</span>.<span class="property">Right</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">swiperController</span>.<span class="title function_">showNext</span>()</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dire === <span class="title class_">Direction</span>.<span class="property">Left</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">swiperController</span>.<span class="title function_">showPrevious</span>()</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;).<span class="title function_">zIndex</span>(index == <span class="variable language_">this</span>.<span class="property">currentIndex</span> ? <span class="number">2</span> : <span class="number">1</span>)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">index</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span>)</span><br><span class="line">      .<span class="title function_">indicator</span>(<span class="literal">false</span>)</span><br><span class="line">      .<span class="title function_">disableSwipe</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">itemSpace</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">`rgba(0,0,0,<span class="subst">$&#123;<span class="variable language_">this</span>.op&#125;</span>)`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">duration</span>: <span class="number">200</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span> &#125;)</span><br><span class="line">      .<span class="title function_">onEnter</span>(<span class="function">(<span class="params"><span class="attr">type</span>?: <span class="title class_">RouteType</span>, <span class="attr">progress</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (progress) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">op</span> = progress</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageComponent</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">image</span>: <span class="title class_">Resource</span> = $r(<span class="string">&#x27;app.media.icon&#x27;</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preGeometryScale</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">geometryScale</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preOffsetX</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preOffsetY</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">geometryOffsetX</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">geometryOffsetY</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageWidth</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imageHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">viewWidth</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">isCurrent</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">dire</span>: <span class="title class_">Direction</span> = <span class="title class_">Direction</span>.<span class="property">None</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">goNext</span>: <span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">pinching</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">onNeedGoNext</span>: <span class="function">(<span class="params"><span class="attr">dire</span>: <span class="title class_">Direction</span></span>) =&gt;</span> <span class="built_in">void</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">reset</span>(): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preGeometryScale</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preOffsetX</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preOffsetY</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dire</span> = <span class="title class_">Direction</span>.<span class="property">None</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">geometryScale</span> === <span class="number">1</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">animateTo</span>(&#123; <span class="attr">duration</span>: <span class="number">200</span>, <span class="attr">onFinish</span>: res &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">geometryScale</span> = <span class="number">1</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span> = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span> = <span class="number">0</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">image</span>)</span><br><span class="line">        .<span class="title function_">onComplete</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">imageWidth</span> = (e?.<span class="property">width</span> || <span class="number">0</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">imageHeight</span> = (e?.<span class="property">height</span> || <span class="number">0</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">imageWidth</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">imageHeight</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">scale</span>(&#123;</span><br><span class="line">          <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">geometryScale</span>,</span><br><span class="line">          <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">geometryScale</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">offset</span>(&#123;</span><br><span class="line">          <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span>,</span><br><span class="line">          <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">focusable</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">autoResize</span>(<span class="literal">false</span>)</span><br><span class="line">        .<span class="title function_">sharedTransition</span>(<span class="string">&#x27;sharedImage&#x27;</span> + <span class="variable language_">this</span>.<span class="property">image</span>.<span class="property">id</span>, &#123;</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span>,</span><br><span class="line">          <span class="attr">zIndex</span>: <span class="variable language_">this</span>.<span class="property">isCurrent</span> ? <span class="number">10</span> : -<span class="number">10</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">clip</span>(<span class="literal">true</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">hitTestBehavior</span>(<span class="title class_">HitTestMode</span>.<span class="property">Default</span>)</span><br><span class="line">    .<span class="title function_">parallelGesture</span>(</span><br><span class="line">      <span class="title class_">GestureGroup</span>(<span class="title class_">GestureMode</span>.<span class="property">Parallel</span>,</span><br><span class="line">        <span class="title class_">PinchGesture</span>(&#123; <span class="attr">fingers</span>: <span class="number">2</span> &#125;)</span><br><span class="line">          .<span class="title function_">onActionStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pinching</span> = <span class="literal">true</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">false</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> s = <span class="variable language_">this</span>.<span class="property">preGeometryScale</span> * event.<span class="property">scale</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">geometryScale</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0.6</span>, <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">2</span>, s))</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionEnd</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preGeometryScale</span> = <span class="variable language_">this</span>.<span class="property">geometryScale</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">preGeometryScale</span> &lt; <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">reset</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pinching</span> = <span class="literal">false</span></span><br><span class="line">          &#125;),</span><br><span class="line">        <span class="title class_">PanGesture</span>()</span><br><span class="line">          .<span class="title function_">onActionStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> offsetX = <span class="variable language_">this</span>.<span class="property">preOffsetX</span> + (event?.<span class="property">offsetX</span> || <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">let</span> offsetY = <span class="variable language_">this</span>.<span class="property">preOffsetY</span> + (event?.<span class="property">offsetY</span> || <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span> (((<span class="variable language_">this</span>.<span class="property">imageWidth</span> * <span class="variable language_">this</span>.<span class="property">geometryScale</span> - <span class="variable language_">this</span>.<span class="property">viewWidth</span>) / <span class="number">2</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">vp2px</span>(offsetX))) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">pinching</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">dire</span> = offsetX &lt; <span class="number">0</span> ? <span class="title class_">Direction</span>.<span class="property">Right</span> : <span class="title class_">Direction</span>.<span class="property">Left</span></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">false</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span> = offsetX</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span> = offsetY</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionEnd</span>(<span class="function">(<span class="params"><span class="attr">event</span>?: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="variable language_">this</span>.<span class="property">dire</span> !== <span class="title class_">Direction</span>.<span class="property">None</span>)) &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">goNext</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">onNeedGoNext</span>(<span class="variable language_">this</span>.<span class="property">dire</span>)</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">reset</span>()</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">goNext</span> = <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preOffsetX</span> = <span class="variable language_">this</span>.<span class="property">geometryOffsetX</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preOffsetY</span> = <span class="variable language_">this</span>.<span class="property">geometryOffsetY</span></span><br><span class="line">          &#125;),</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="4-HarmonyOS-component-refresh-issue-Modifying-item-properties-in-an-array-does-not-trigger-list-update"><a href="#4-HarmonyOS-component-refresh-issue-Modifying-item-properties-in-an-array-does-not-trigger-list-update" class="headerlink" title="4. HarmonyOS component refresh issue: Modifying item properties in an array does not trigger list update"></a>4. HarmonyOS component refresh issue: Modifying item properties in an array does not trigger list update</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">struct <span class="title class_">MyFoldPage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">filePaths</span>: <span class="title class_">FolderModel</span>[] = []</span><br><span class="line">   <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title class_">Column</span>()&#123;</span><br><span class="line">            <span class="title class_">Grid</span>() &#123;</span><br><span class="line">            <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">filePaths</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">FolderModel</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title class_">ItemBuilder</span>(index)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">FolderModel</span></span>) =&gt;</span> item.<span class="property">fileName</span>)</span><br><span class="line">          &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">FolderModel</span> &#123;</span><br><span class="line">  <span class="attr">filePath</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">fileName</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">isScreenshot</span>: <span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line">  <span class="attr">thumbnailPath</span>?: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>   <span class="comment">// Thumbnail for videos</span></span><br><span class="line">  <span class="attr">isSelect</span>?: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: Modifying `</span>isSelect<span class="string">` in array items does not trigger list refresh. The list only updates when `</span>filePaths<span class="string">` is reassigned with new items. What&#x27;s a better solution?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use the `</span><span class="meta">@Observed</span><span class="string">` and `</span><span class="meta">@ObjectLink</span><span class="string">` decorators. Refer to the documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS custom component: Interface does not re-render when data updates  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">CardView</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">title</span>: <span class="built_in">string</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">moreText</span>: <span class="built_in">string</span> = <span class="string">&#x27;更多&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">tempBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@BuilderParam</span> <span class="attr">contentBuilder</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="variable language_">this</span>.<span class="property">tempBuilder</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">contentBuilder</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Component usage</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">NoticeCardView</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">noticeList</span>: <span class="title class_">Notice</span>[] = []</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">NoticeRepository</span>().<span class="title function_">getNoticeList</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">noticeList</span> = result</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">ContentBuilder</span>() &#123;</span><br><span class="line">    <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">noticeList</span>, <span class="function">(<span class="params"><span class="attr">notice</span>: <span class="title class_">Notice</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.wb_ic_notice_tip&#x27;</span>)).<span class="title function_">height</span>(<span class="number">11</span>).<span class="title function_">width</span>(<span class="number">9</span>)</span><br><span class="line">        <span class="title class_">Text</span>(notice.<span class="property">title</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">11</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.cm_text_primary&#x27;</span>))</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="string">&#x27;14fp&#x27;</span>)</span><br><span class="line">          .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">      &#125;.<span class="title function_">padding</span>(<span class="number">8</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">CardView</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">contentBuilder</span>: <span class="variable language_">this</span>.<span class="property">ContentBuilder</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: When `</span>noticeList<span class="string">` updates, the interface does not re-render.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference code**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CardView</span>  &#123;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">header</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@Builder</span> <span class="title function_">tempBuilder</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@BuilderParam</span> <span class="attr">contentBuilder</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="variable language_">this</span>.<span class="property">tempBuilder</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">contentBuilder</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CustomContainerUser</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;header&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="built_in">string</span>[] = []</span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Data loaded&#x27;</span>, <span class="variable language_">this</span>.<span class="property">list</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">text</span>)</span><br><span class="line">      <span class="title class_">CardView</span> (&#123; <span class="attr">header</span>: <span class="variable language_">this</span>.<span class="property">text</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title class_">ContentBuilder</span>(<span class="string">&#x27;testA&#x27;</span>, <span class="string">&#x27;testB&#x27;</span>)</span><br><span class="line">        &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Builder</span>  <span class="title class_">ContentBuilder</span>(<span class="attr">label1</span>: <span class="built_in">string</span>, <span class="attr">label2</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params"><span class="attr">text</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Text</span>(text)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/522-Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/522-Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Tables, Lazy Load List UI Refresh, Split-Screen Adaptation, Custom Pop-up and Soft Keyboard Spacing, New Routing Support for Landscape Mode</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:00:16 / Modified: 10:01:50" itemprop="dateCreated datePublished" datetime="2025-06-25T10:00:16+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Tables-Lazy-Load-List-UI-Refresh-Split-Screen-Adaptation-Custom-Pop-up-and-Soft-Keyboard-Spacing-New-Routing-Support-for-Landscape-Mode" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Tables, Lazy Load List UI Refresh, Split-Screen Adaptation, Custom Pop-up and Soft Keyboard Spacing, New Routing Support for Landscape Mode"></a>[Daily HarmonyOS Next Knowledge] Routing Tables, Lazy Load List UI Refresh, Split-Screen Adaptation, Custom Pop-up and Soft Keyboard Spacing, New Routing Support for Landscape Mode</h3><h4 id="1-HarmonyOS-System-Routing-Table-Home-Page-Cannot-Listen-for-Page-Display-and-Hide"><a href="#1-HarmonyOS-System-Routing-Table-Home-Page-Cannot-Listen-for-Page-Display-and-Hide" class="headerlink" title="1. HarmonyOS System Routing Table - Home Page Cannot Listen for Page Display and Hide?"></a>1. HarmonyOS System Routing Table - Home Page Cannot Listen for Page Display and Hide?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5</a>  </p>
<p><strong>Scenario</strong>: Routing jumps as follows: Index → PageOne, click back from PageOne.  </p>
<p><strong>Code</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">pageStack</span>: <span class="title class_">NavPathStack</span> = <span class="keyword">new</span> <span class="title class_">NavPathStack</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Navigation</span>(<span class="variable language_">this</span>.<span class="property">pageStack</span>) &#123;</span><br><span class="line">    &#125;.<span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageStack</span>.<span class="title function_">pushPathByName</span>(<span class="string">&quot;PageOne&quot;</span>, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">hideNavBar</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onPageShow&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageHide</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onPageHide&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: When jumping from Index to PageOne, `</span>onPageHide<span class="string">` is not called back. When returning from PageOne to Index, `</span>onPageShow<span class="string">` is not called back.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Question**: How to listen for the display and hiding of the Index page? (When Index jumps to PageOne via router, normal page callbacks are visible.)  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Use NavPathStack with the navDestination attribute for page routing, which can carry page information. NavDestination has related `</span>onShown<span class="string">` and `</span>onHidden<span class="string">` methods. Refer to:  </span></span><br><span class="line"><span class="string">- NavPathStack documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#navpathstack10  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span><span class="title function_">onPageShow</span>()<span class="string">` method only takes effect in custom components decorated with @Entry and cannot be triggered when returning to subpages of NavDestination wrapped by Navigation. To listen for the display and hiding of the main page upon return, handle business logic in the callback by listening to the Navigation&#x27;s `</span><span class="title function_">onNavBarStateChange</span>()<span class="string">` event. Reference:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS LazyForEach UI Refresh Issue?  </span></span><br><span class="line"><span class="string">**Scenario**: When using LazyForEach to traverse and generate different entries in the home page List control, the key generation uses business id + index.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- The first entry is a carousel with business id 1 and index 1.  </span></span><br><span class="line"><span class="string">- When the operation background adds resources to the carousel, the business id remains 1, but an additional image is configured for the carousel.  </span></span><br><span class="line"><span class="string">- When notifying the array, the carousel control does not refresh.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Question**: How to handle this? Should a random number be added when generating keys?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: The List refresh strategy is based on bound keys, which correspond to the component tree and refresh the page by updating virtual components. Since adding images does not change the key, the refresh mechanism is not triggered. Adding a random number causes refresh on each load, affecting performance. It is recommended to use `</span><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item) + id + index<span class="string">` as the key.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS Split-Screen Adaptation: Can the Navigation Area Support Multiple PageStacks Based on TabBar to Maintain Page Stacks?  </span></span><br><span class="line"><span class="string">**Requirement**: For split-screen adaptation, can the navigation area support multiple `</span><span class="title class_">PageStacks</span><span class="string">` based on TabBar to maintain page stacks? The effect is similar to xxx devices, where each TabBar corresponds to a `</span><span class="title class_">PageStack</span><span class="string">`, and switching TabBars restores the corresponding Tab&#x27;s page stack.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference structure**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Tabs</span>() &#123;</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="title function_">contentOne</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="string">&#x27;Discover&#x27;</span>)</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="title function_">contentTwo</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="string">&#x27;Mall&#x27;</span>)</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">&#125;.<span class="title function_">barPosition</span>(<span class="title class_">BarPosition</span>.<span class="property">End</span>)</span><br><span class="line">.<span class="title function_">vertical</span>(<span class="literal">false</span>) <span class="comment">// Set tab layout direction to horizontal</span></span><br><span class="line">.<span class="title function_">barMode</span>(<span class="title class_">BarMode</span>.<span class="property">Fixed</span>) <span class="comment">// All sub-tabs equally divide the tab bar width, and the tab bar is not scrollable</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Custom Pop-up and Soft Keyboard Spacing?  </span></span><br><span class="line"><span class="string">**Issue**: A dialog is set at the bottom with a TextInput. When the pop-up is opened, there is spacing between the pop-up and the soft keyboard. The expectation is for the pop-up to be flush with the soft keyboard. Setting the offset dy has no effect.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution**: Adjust the pop-up position by setting `</span>customStyle<span class="string">` to true and adding an offset to the column layout inside the pop-up: `</span>.<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: xx &#125;)<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS: Is There a Way to Apply Landscape Mode Only to a New Route While Other Routes Remain in Portrait Mode?  </span></span><br><span class="line"><span class="string">**Scenario**: When switching from a portrait page to landscape mode by opening a new route, the current landscape implementation sets landscape mode in the new route page using `</span>lastWindow.<span class="title function_">setPreferredOrientation</span>(<span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>)<span class="string">`. This causes an issue where the original portrait primary page is simultaneously changed to landscape, and the original landscape secondary page is changed to portrait, which is visible during route page transitions and considered a defect by our testing team.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Requirement**: When jumping to a secondary landscape page, can we directly open a route container that is already in landscape mode without affecting the primary portrait page?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Steps**:  </span></span><br><span class="line"><span class="string">1. Open the `</span><span class="variable language_">module</span>.<span class="property">json5</span><span class="string">` file under entry and add an `</span>orientation<span class="string">` attribute to the `</span>abilities<span class="string">` node: `</span><span class="string">&quot;orientation&quot;</span>: <span class="string">&#x27;unspecified&#x27;</span><span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. First page:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; router &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct aboutScreen1 &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Home Page, click to jump&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&quot;pages/aboutScreen2&quot;</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. Second page:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; router, <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct aboutScreen2 &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> orientation = <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setScreenOrientation</span>(orientation)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> orientation = <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setScreenOrientation</span>(orientation)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setScreenOrientation</span>(<span class="params"><span class="attr">orientation</span>: <span class="variable language_">window</span>.<span class="title class_">Orientation</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> promise = <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>())</span><br><span class="line">      promise.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        windowClass = data</span><br><span class="line">        windowClass.<span class="title function_">setPreferredOrientation</span>(orientation)</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;getLastWindow error&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;setScreenOrientation error&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;I am in landscape!&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;50%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/521-Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/521-Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:54:37 / Modified: 12:25:02" itemprop="dateCreated datePublished" datetime="2025-06-25T09:54:37+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps"><a href="#Daily-HarmonyOS-Next-Knowledge-Listening-for-Page-Size-Changes-Dialog-Obstruction-Issues-Column-Display-Problems-Image-Component-Loading-Issues-Routing-Jumps" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps"></a>[Daily HarmonyOS Next Knowledge] Listening for Page Size Changes, Dialog Obstruction Issues, Column Display Problems, Image Component Loading Issues, Routing Jumps</h3><h4 id="1-How-to-listen-for-real-time-changes-in-NavPathStack-size-in-HarmonyOS"><a href="#1-How-to-listen-for-real-time-changes-in-NavPathStack-size-in-HarmonyOS" class="headerlink" title="1. How to listen for real-time changes in NavPathStack size in HarmonyOS?"></a>1. How to listen for real-time changes in NavPathStack size in HarmonyOS?</h4><p><strong>How to listen for real-time changes in NavPathStack size?</strong>  </p>
<p>Current solutions in documentation: <code>navDestinationUpdate</code> has three issues:  </p>
<ol>
<li>Frequent updates trigger continuous callbacks.  </li>
<li>Unnecessary in some scenarios (e.g., screen off or app backgrounding).  </li>
<li>Inaccurate: No notification when pushing a new page changes the stack size.</li>
</ol>
<p>Use <code>observe.on</code> instead. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12</a>  </p>
<h4 id="2-HarmonyOS-Page-blocked-by-pop-up-dialog"><a href="#2-HarmonyOS-Page-blocked-by-pop-up-dialog" class="headerlink" title="2. HarmonyOS: Page blocked by pop-up dialog?"></a>2. HarmonyOS: Page blocked by pop-up dialog?</h4><p><strong>Steps to reproduce</strong>:  </p>
<ol>
<li>Click to pop up a dialog.  </li>
<li>Navigate to a login page within the dialog, resulting in the page being blocked behind the dialog.</li>
</ol>
<p><strong>Solution</strong>: <code>CustomDialog</code> is a global pop-up with a high window hierarchy. Use <code>window</code> to lower the hierarchy.<br>API reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<h4 id="3-HarmonyOS-When-Navigation-uses-NavigationMode-Split-can-bindSheet-adapt-to-split-screen-mode"><a href="#3-HarmonyOS-When-Navigation-uses-NavigationMode-Split-can-bindSheet-adapt-to-split-screen-mode" class="headerlink" title="3. HarmonyOS: When Navigation uses NavigationMode.Split, can bindSheet adapt to split-screen mode?"></a>3. HarmonyOS: When Navigation uses NavigationMode.Split, can bindSheet adapt to split-screen mode?</h4><p><strong>Half-modal behavior</strong>:  </p>
<ul>
<li>When screen width &lt; 600vp: Bottom pop-up.  </li>
<li>When screen width is in <code>[600, 840)</code>: Centered pop-up.  </li>
<li>When screen width &gt; 840vp: Default hand-following pop-up (appears below the bound sheet node).</li>
</ul>
<h4 id="4-HarmonyOS-Does-setting-visibility-to-Visibility-None-on-an-Image-component-prevent-the-onComplete-event-from-firing"><a href="#4-HarmonyOS-Does-setting-visibility-to-Visibility-None-on-an-Image-component-prevent-the-onComplete-event-from-firing" class="headerlink" title="4. HarmonyOS: Does setting visibility to Visibility.None on an Image component prevent the onComplete event from firing?"></a>4. HarmonyOS: Does setting <code>visibility</code> to <code>Visibility.None</code> on an Image component prevent the <code>onComplete</code> event from firing?</h4><p><strong>Issue</strong>: When <code>visibility</code> is set to <code>Visibility.None</code>, the <code>onComplete</code> event does not trigger.  </p>
<p><strong>Explanation</strong>: The <code>onComplete</code> interface returns the component’s width and height (<code>componentWidth</code> and <code>componentHeight</code>), which require measurement to execute. If <code>visible = false</code>, the component is not measured, blocking the <code>onComplete</code> callback.  </p>
<p><strong>Solution</strong>: Keep <code>visible = true</code> by default. When an image fails to load, use the <code>onError</code> interface to set <code>visible = false</code>.  </p>
<h4 id="5-HarmonyOS-What-is-the-difference-between-pushDestinationByName-and-pushPathByName"><a href="#5-HarmonyOS-What-is-the-difference-between-pushDestinationByName-and-pushPathByName" class="headerlink" title="5. HarmonyOS: What is the difference between pushDestinationByName and pushPathByName?"></a>5. HarmonyOS: What is the difference between <code>pushDestinationByName</code> and <code>pushPathByName</code>?</h4><ul>
<li><code>pushDestinationByName</code> binds a context object and verifies context consistency during calls.  </li>
<li><code>pushPathByName</code> does not verify context consistency.</li>
</ul>
<p><strong>Note</strong>: Different windows have different UIContexts. If used within the same window, they differ only in return values, with no other functional differences.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/520-Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/520-Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Delayed Window Opening, Linear Gradient, Routing Parameters, Fixed Light Mode, Parameter Passing Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:53:02 / Modified: 09:53:38" itemprop="dateCreated datePublished" datetime="2025-06-25T09:53:02+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Delayed-Window-Opening-Linear-Gradient-Routing-Parameters-Fixed-Light-Mode-Parameter-Passing-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Delayed Window Opening, Linear Gradient, Routing Parameters, Fixed Light Mode, Parameter Passing Issues"></a>[Daily HarmonyOS Next Knowledge] Delayed Window Opening, Linear Gradient, Routing Parameters, Fixed Light Mode, Parameter Passing Issues</h3><h4 id="1-HarmonyOS-Cannot-open-a-new-window-with-window-open-when-setTimeout-delay-exceeds-5-seconds"><a href="#1-HarmonyOS-Cannot-open-a-new-window-with-window-open-when-setTimeout-delay-exceeds-5-seconds" class="headerlink" title="1. HarmonyOS: Cannot open a new window with window.open when setTimeout delay exceeds 5 seconds?"></a>1. HarmonyOS: Cannot open a new window with <code>window.open</code> when <code>setTimeout</code> delay exceeds 5 seconds?</h4><p>Testing shows the same issue with the window API. In web browsers, when <code>setTimeout</code> exceeds 5 seconds, the browser may block operations like <code>window.open</code> because it considers long-running timers a security risk (e.g., preventing ads or malicious scripts). Consider alternative methods to open windows.  </p>
<h4 id="2-HarmonyOS-linearGradient-property-does-not-work-under-the-Text-component"><a href="#2-HarmonyOS-linearGradient-property-does-not-work-under-the-Text-component" class="headerlink" title="2. HarmonyOS: linearGradient property does not work under the Text component?"></a>2. HarmonyOS: <code>linearGradient</code> property does not work under the <code>Text</code> component?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">  <span class="attr">direction</span>: <span class="title class_">GradientDirection</span>.<span class="property">Right</span>, <span class="comment">// Gradient direction</span></span><br><span class="line">  <span class="attr">repeating</span>: <span class="literal">false</span>, <span class="comment">// Whether gradient colors repeat</span></span><br><span class="line">  <span class="attr">colors</span>: [[<span class="string">&#x27;#F7F8FA&#x27;</span>, <span class="number">0.0</span>], [<span class="string">&#x27;#F7F8FA&#x27;</span>, <span class="number">1.0</span>]]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">This does not work when applied directly to a `</span><span class="title class_">Text</span><span class="string">` component.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Reference Demo**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">            .<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">DST_IN</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">        &#125;.<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">          <span class="attr">direction</span>: <span class="title class_">GradientDirection</span>.<span class="property">Right</span>,</span><br><span class="line">          <span class="attr">colors</span>: [[<span class="number">0xff0000</span>, <span class="number">0.0</span>], [<span class="number">0x0000ff</span>, <span class="number">0.3</span>], [<span class="number">0xffff00</span>, <span class="number">1.0</span>]]</span><br><span class="line">        &#125;).<span class="title function_">blendMode</span>(<span class="title class_">BlendMode</span>.<span class="property">SRC_OVER</span>, <span class="title class_">BlendApplyType</span>.<span class="property">OFFSCREEN</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS: Cannot receive `</span><span class="title class_">Map</span><span class="string">` type parameters when using `</span>router.<span class="title function_">pushUrl</span>(&#123;<span class="attr">url</span>: url, <span class="attr">params</span>: params&#125;)<span class="string">` to pass data between pages?  </span></span><br><span class="line"><span class="string">The router does not support passing `</span><span class="title class_">Map</span><span class="string">` type data. Use `</span><span class="title class_">Record</span><span class="string">` instead, which only allows basic data types in `</span>params<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">private</span> routerParams : <span class="title class_">RouterParams</span> = <span class="keyword">new</span> <span class="title class_">RouterParams</span>()</span><br><span class="line"><span class="keyword">private</span> param : <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">routePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">param</span>[<span class="string">&#x27;vip_source&#x27;</span>] = <span class="string">&#x27;qww&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerParams</span>.<span class="property">pageType</span> = <span class="string">&#x27;11&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerParams</span>.<span class="property">params</span> = <span class="variable language_">this</span>.<span class="property">param</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerParams</span>.<span class="property">title</span> = <span class="string">&#x27;新闻&#x27;</span></span><br><span class="line">    router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;pages/RouterA&#x27;</span>,</span><br><span class="line">      <span class="attr">params</span>: <span class="variable language_">this</span>.<span class="property">routerParams</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">` fail callback, code: <span class="subst">$&#123;err.code&#125;</span>, msg: <span class="subst">$&#123;err.msg&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@State</span> <span class="attr">value</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt; = router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onPageShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hh2:&quot;</span> + <span class="variable language_">this</span>.<span class="property">value</span>[<span class="string">&#x27;title&#x27;</span>])</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hh3:&quot;</span> + <span class="variable language_">this</span>.<span class="property">value</span>[<span class="string">&#x27;params&#x27;</span>][<span class="string">&#x27;vip_source&#x27;</span>])</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS: How to force the app to always use light mode if dark mode is not yet supported?  </span></span><br><span class="line"><span class="string">**Solution**:  </span></span><br><span class="line"><span class="string">By default, apps follow the system&#x27;s light/dark mode. To fix your app to light mode:  </span></span><br><span class="line"><span class="string">1. Set the app&#x27;s color style explicitly.  </span></span><br><span class="line"><span class="string">2. After setting, the app will no longer follow system changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS: Parameter passing issues?  </span></span><br><span class="line"><span class="string">**Problem 1**: `</span><span class="variable language_">this</span>.<span class="property">highSheepNum</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">totalCount</span>()<span class="string">` does not assign the value.  </span></span><br><span class="line"><span class="string">**Problem 2**: After clicking the filter, `</span><span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">totalCount</span>()<span class="string">` updates, but `</span><span class="variable language_">this</span>.<span class="property">highSheepNum</span><span class="string">` in `</span><span class="title class_">Tabs</span> <span class="title class_">TabContent</span><span class="string">` does not refresh dynamically.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution 1**:  </span></span><br><span class="line"><span class="string">In the `</span>changeData<span class="string">` and `</span>init<span class="string">` functions, modify the for loop condition from `</span>i &lt;= <span class="variable language_">this</span>.<span class="property">listDate</span>.<span class="property">length</span><span class="string">` to `</span>i &lt; <span class="variable language_">this</span>.<span class="property">listDate</span>.<span class="property">length</span><span class="string">` to avoid accessing `</span><span class="variable language_">this</span>.<span class="property">listDate</span>[<span class="number">30</span>]<span class="string">`, which exceeds the array bounds.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">listDate</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution 2**:  </span></span><br><span class="line"><span class="string">Remove the third parameter from `</span><span class="title class_">TabRoadBuilder</span><span class="string">` and use `</span><span class="variable language_">this</span>.<span class="property">highSheepNum</span><span class="string">` directly to enable dynamic updates:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">Start</span> &#125;) &#123;</span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">highSpeedBuilder</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabRoadBuilder</span>(<span class="number">0</span>, <span class="string">&#x27;优惠券&#x27;</span>)) <span class="comment">// Remove the third parameter</span></span><br><span class="line">  <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">tollStationsBuilder</span>()</span><br><span class="line">  &#125;.<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabRoadBuilder</span>(<span class="number">1</span>, <span class="string">&#x27;收费站&#x27;</span>)) <span class="comment">// Remove the third parameter</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span> <span class="title class_">TabRoadBuilder</span>(<span class="attr">index</span>: <span class="built_in">number</span>, <span class="attr">name</span>: <span class="built_in">string</span>) &#123; <span class="comment">// Remove the original third parameter</span></span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(name + <span class="string">&#x27;(&#x27;</span> + <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.highSheepNum&#125;</span>`</span> + <span class="string">&#x27;)&#x27;</span>) <span class="comment">// Use this.highSheepNum</span></span><br><span class="line">      .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="string">&#x27;#015DFF&#x27;</span> : <span class="string">&#x27;#999999&#x27;</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">      .<span class="title function_">fontWeight</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="number">500</span> : <span class="number">400</span>)</span><br><span class="line">      .<span class="title function_">lineHeight</span>(<span class="number">22</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">6</span>, <span class="attr">bottom</span>: <span class="number">6</span> &#125;)</span><br><span class="line">    <span class="title class_">Divider</span>().<span class="title function_">strokeWidth</span>(<span class="number">3</span>).<span class="title function_">color</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> === index ? <span class="string">&#x27;#015DFF&#x27;</span> : <span class="string">&#x27;#999999&#x27;</span>).<span class="title function_">width</span>(<span class="number">24</span>)</span><br><span class="line">  &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/519-Daily-HarmonyOS-Next-Knowledge-Click-Event-Not-Responding-Soft-Keyboard-Pop-up-Animation-Effects-Text-Selection-Status-Bar-Font-Settings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/519-Daily-HarmonyOS-Next-Knowledge-Click-Event-Not-Responding-Soft-Keyboard-Pop-up-Animation-Effects-Text-Selection-Status-Bar-Font-Settings/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Click Event Not Responding, Soft Keyboard Pop-up, Animation Effects, Text Selection, Status Bar Font Settings</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:50:55 / Modified: 12:25:03" itemprop="dateCreated datePublished" datetime="2025-06-25T09:50:55+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Click-Event-Not-Responding-Soft-Keyboard-Pop-up-Animation-Effects-Text-Selection-Status-Bar-Font-Settings"><a href="#Daily-HarmonyOS-Next-Knowledge-Click-Event-Not-Responding-Soft-Keyboard-Pop-up-Animation-Effects-Text-Selection-Status-Bar-Font-Settings" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Click Event Not Responding, Soft Keyboard Pop-up, Animation Effects, Text Selection, Status Bar Font Settings"></a>[Daily HarmonyOS Next Knowledge] Click Event Not Responding, Soft Keyboard Pop-up, Animation Effects, Text Selection, Status Bar Font Settings</h3><h4 id="1-Only-one-of-two-buttons-on-a-HarmonyOS-page-receives-click-events"><a href="#1-Only-one-of-two-buttons-on-a-HarmonyOS-page-receives-click-events" class="headerlink" title="1. Only one of two buttons on a HarmonyOS page receives click events?"></a>1. Only one of two buttons on a HarmonyOS page receives click events?</h4><pre><code class="language-typescript">@Entry
@Component
struct SplashScreenPage &#123;
  @State pageShowTime: number = CommonConstants.TIME_DEFAULT_VALUE;
  @State intervalID: number = CommonConstants.INTERVAL_ID_DEFAULT;

  build() &#123;
    Column() &#123;
      Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;
        Image($r(&#39;app.media.ic_splash_page_background&#39;))
          .width(CommonConstants.IMAGE_WIDTH)
          .height(CommonConstants.IMAGE_HEIGHT)

        HideButton();
        SkipButton(&#123; secondsCount: (CommonConstants.DELAY_SECONDS - this.pageShowTime) &#125;);
      &#125;
      .layoutWeight(CommonConstants.STACK_LAYOUT_WEIGHT)
      .width(CommonConstants.STACK_WIDTH);
    &#125;
    .alignItems(HorizontalAlign.Start)
    .width(CommonConstants.COLUMN_WIDTH)
    .height(CommonConstants.COLUMN_HEIGHT)
  &#125;
&#125;

// Create two buttons separately
@Component
struct SkipButton &#123;
  @Prop secondsCount: number = 0;

  build() &#123;
    Flex(&#123;
      direction: FlexDirection.Row,
      justifyContent: FlexAlign.End
    &#125;) &#123;
      Text($r(&#39;app.string.skip&#39;, this.secondsCount))
        .onClick(() =&gt; &#123;
          console.log(&quot;EntryAbility Skip Button is clicked&quot;);
        &#125;)
    &#125;
  &#125;
&#125;

@Component
struct HideButton &#123;
  build() &#123;
    Flex(&#123;
      direction: FlexDirection.Row,
      justifyContent: FlexAlign.Start
    &#125;) &#123;
      Text($r(&#39;app.string.hide&#39;))
        .onClick(() =&gt; &#123;
          console.log(&quot;EntryAbility Hide Button is clicked&quot;);
        &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<p><strong>Solution</strong>: Add the <code>.hitTestBehavior(HitTestMode.Transparent)</code> attribute.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5</a>  </p>
<p>This attribute sets the touch test mode of a component. The ArkUI framework uses hit testing to collect components that should respond to touch events before distributing them. Different <code>hitTestBehavior</code> values affect which components are included in the hit test results, thus influencing event distribution.  </p>
<pre><code class="language-typescript">@Component
struct SkipButton &#123;
  @Prop secondsCount: number = 0;

  build() &#123;
    Flex(&#123;
      direction: FlexDirection.Row,
      justifyContent: FlexAlign.End
    &#125;) &#123;
      Text($r(&#39;app.string.app_name&#39;, this.secondsCount))
        .onClick(() =&gt; &#123;
          console.log(&quot;EntryAbility Skip Button is clicked&quot;);
        &#125;)
    &#125;
    .hitTestBehavior(HitTestMode.Transparent)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-handle-soft-keyboard-pop-up-in-HarmonyOS"><a href="#2-How-to-handle-soft-keyboard-pop-up-in-HarmonyOS" class="headerlink" title="2. How to handle soft keyboard pop-up in HarmonyOS?"></a>2. How to handle soft keyboard pop-up in HarmonyOS?</h4><p><strong>Issue</strong>: When a <code>TextArea</code> in a custom <code>@CustomDialog</code> gains focus, the soft keyboard pops up and pushes the entire dialog up. Requirement: The keyboard should only push up the area around the <code>TextArea</code> instead of the entire dialog.  </p>
<p><strong>Solution</strong>: The soft keyboard may obscure part of the UI by default. To ensure the focused input area is visible above the keyboard, get the keyboard’s avoid area and adjust the margin accordingly.  </p>
<pre><code class="language-typescript">import window from &#39;@ohos.window&#39;;
@Entry
@Component
struct ScrollExample &#123;
  scroller: Scroller = new Scroller()
  private arr: number[] = [0, 1, 2, 3, 4, 5]
  @State scrollHeight: number = 0;
  @State isRebuild: boolean = false;
  @State keyHeight: number =0;
  @State text: string = &#39;&#39;
  aboutToAppear() &#123;
    window.getLastWindow(getContext(this)).then(currentWindow =&gt;&#123;
      let property = currentWindow.getWindowProperties();
      // Init window height
      let avoidArea = currentWindow.getWindowAvoidArea(window.AvoidAreaType.TYPE_KEYBOARD);
      this.scrollHeight = px2vp(property.windowRect.height - avoidArea.bottomRect.height);
      // Monitor soft keyboard show/hide
      currentWindow.on(&#39;avoidAreaChange&#39;, async data =&gt; &#123;
        if (data.type !== window.AvoidAreaType.TYPE_KEYBOARD) &#123;
          this.keyHeight=avoidArea.bottomRect.height;
          return;
        &#125;
        this.scrollHeight = px2vp(property.windowRect.height - data.area.bottomRect.height);
      &#125;)
    &#125;)
  &#125;
  build() &#123;
    Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;
      Column() &#123;
        Scroll(this.scroller) &#123;
          Column() &#123;
            TextInput(&#123; text: this.text, placeholder: &#39;input your word...&#39; &#125;)
              .placeholderFont(&#123; size: 14, weight: 400 &#125;)
              .width(320)
              .height(40).margin(200)
              .fontSize(14)
              .fontColor(Color.Black)
              .backgroundColor(Color.White)
            ForEach(this.arr, (item:number) =&gt; &#123;
              Text(item.toString())
                .width(&#39;90%&#39;)
                .height(150)
                .backgroundColor(0xFFFFFF)
                .borderRadius(15)
                .fontSize(16)
                .textAlign(TextAlign.Center)
                .margin(&#123; top: 10 &#125;)
            &#125;)
          &#125;.width(&#39;100%&#39;)
        &#125;
        .width(&#39;100%&#39;).height(this.scrollHeight).layoutWeight(1)
        Text(&#39;这是一个测试文本&#39;)
          .width(&#39;100%&#39;)
          .height(50)
          .backgroundColor(Color.Red)
          .margin(&#123;bottom: this.scrollHeight&#125;)
      &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).justifyContent(FlexAlign.Start)
    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(0xDCDCDC)
  &#125;
&#125;
</code></pre>
<h4 id="3-No-animation-effect-when-using-scale-in-HarmonyOS"><a href="#3-No-animation-effect-when-using-scale-in-HarmonyOS" class="headerlink" title="3. No animation effect when using .scale in HarmonyOS?"></a>3. No animation effect when using <code>.scale</code> in HarmonyOS?</h4><p><strong>Issue</strong>: The <code>.scale</code> attribute does not trigger animation.  </p>
<pre><code class="language-typescript">@Component ImageScale &#123;
  @State scaleValue: ScaleOptions = &#123; x: 1, y: 1, z: 1 &#125;

  build() &#123;
    Column() &#123;
      Image(this.viewModel?.item?.image?.hdUrl)
        .width(&quot;100%&quot;)
        .aspectRatio(1.0)
        .animation(&#123; duration: 200, curve: &quot;ease&quot; &#125;)
        .scale(this.scaleValue)
        .gesture(TapGesture(&#123; count: 2 &#125;).onAction((event: GestureEvent) =&gt; &#123;
          let width = event.target.area.width.valueOf() as number
          let height = event.target.area.height.valueOf() as number
          let centerX = event.fingerList[0].localX / width
          let centerY = event.fingerList[0].localY / height

          if (this.scaleMode) &#123;
            this.scaleMode = false
            this.scaleValue = &#123;x : 1, y : 1&#125;
          &#125; else &#123;
            this.scaleMode = true
            this.scaleValue = &#123;x : 2, y : 2, centerX: `$&#123;centerX * 100&#125;%`, centerY:`$&#123;centerY * 100&#125;%`&#125;
          &#125;
        &#125;))
    &#125;
  &#125;
&#125;
</code></pre>
<p><strong>Reference implementation</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct AnimationPage &#123;
  @State message: string = &#39;Hello World fhlsfslfslfhklafhlaskhfkjsfhjksadfhlkjsafsafhkjsfhkljfhjksafhkjasfksfh&#39;;
  @State textY:number = 0

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .scale(&#123;x:1,y:this.textY&#125;)
          .animation(&#123;
            duration:2000,
            curve: &quot;linear&quot;
          &#125;).id(&quot;text&quot;)

        Button(&quot;点击动画展开&quot;).onClick((ele)=&gt;&#123;
          this.textY = 1
        &#125;).width(200).height(50)
          .backgroundColor(Color.Pink).borderRadius(10)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-Background-blur-effect-fails-when-selecting-items-in-TextPicker-within-a-custom-HarmonyOS-Dialog"><a href="#4-Background-blur-effect-fails-when-selecting-items-in-TextPicker-within-a-custom-HarmonyOS-Dialog" class="headerlink" title="4. Background blur effect fails when selecting items in TextPicker within a custom HarmonyOS Dialog?"></a>4. Background blur effect fails when selecting items in TextPicker within a custom HarmonyOS Dialog?</h4><p><strong>Issue</strong>: When a custom dialog sets <code>backgroundColor</code> and <code>backgroundBlurStyle</code> with an OPACITY transition animation, selecting an item in TextPicker causes the background blur to失效 (fail).  </p>
<p><strong>Cause</strong>: Using OPACITY in the transition may override <code>backgroundBlurStyle</code>.  </p>
<p><strong>Solutions</strong>:  </p>
<ol>
<li>Adjust animation order: Apply OPACITY after <code>backgroundBlurStyle</code>.  </li>
<li>Use separate animations: Apply OPACITY and blur effects to different properties.  </li>
<li>Adjust property order: Ensure <code>backgroundBlurStyle</code> takes effect after OPACITY.</li>
</ol>
<h4 id="5-Setting-status-bar-font-color-in-HarmonyOS-appears-ineffective"><a href="#5-Setting-status-bar-font-color-in-HarmonyOS-appears-ineffective" class="headerlink" title="5. Setting status bar font color in HarmonyOS appears ineffective?"></a>5. Setting status bar font color in HarmonyOS appears ineffective?</h4><p><strong>Issue</strong>: The <code>statusBarContentColor</code> setting in <code>setWindowSystemBarProperties</code> succeeds in the callback but does not change the status bar appearance.  </p>
<pre><code class="language-typescript">windowclass.setWindowSystemBarProperties(&#123; 
  statusBarContentColor: &#39;#000000&#39; // Status bar font color (supported from API Version 8)
&#125;).then((d)=&gt;&#123; 
  console.debug(&quot;&quot;) 
&#125;,(e:BusinessError)=&gt;&#123; 
  console.debug(&quot;&quot;) 
&#125;)
</code></pre>
<p><strong>Solution</strong>: Status bar settings apply to the entire window. To adjust per-page, call <code>setWindowSystemBarProperties</code> in the page’s lifecycle.  </p>
<p><strong>Notes</strong>:  </p>
<ul>
<li>This API does not take effect on 2in1 devices.  </li>
<li>In split-screen, floating, or free multi-window modes, changes only take effect when the window is in full-screen.</li>
</ul>
<pre><code class="language-typescript">onPageShow(): void &#123;
  window.getLastWindow(getContext(), (err, data) =&gt; &#123;
    let win: window.Window;
    if (err.code) &#123;
      console.error(&quot;error code :&quot; + JSON.stringify(err.code))
      return;
    &#125;
    try &#123;
      win = data;
      // Set window to full-screen
      win.setWindowLayoutFullScreen(true);
      // Set status bar properties
      win.setWindowSystemBarProperties(&#123;
        statusBarColor: &#39;#00ff00&#39;, // Status bar background color
        statusBarContentColor: &#39;#353535&#39; // Status bar text color
      &#125;)
      console.info(&#39;带状态栏沉浸式窗口设置完成&#39;)
    &#125; catch (expextion) &#123;
      console.error(&quot;error cause :&quot; + JSON.stringify(expextion))
    &#125;
  &#125;)
&#125;
</code></pre>
<p>#HarmonyOSCore #HarmonyOSDevelopmentTools #ArkCompiler #Social</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/518-Daily-HarmonyOS-Next-Knowledge-List-Component-Copy-Issues-Retrieving-Page-Routing-Information-Component-Exposed-Methods-Page-Destruction-Issues-Status-Bar-Color-Modification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/518-Daily-HarmonyOS-Next-Knowledge-List-Component-Copy-Issues-Retrieving-Page-Routing-Information-Component-Exposed-Methods-Page-Destruction-Issues-Status-Bar-Color-Modification/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] List Component Copy Issues, Retrieving Page Routing Information, Component Exposed Methods, Page Destruction Issues, Status Bar Color Modification</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:49:19 / Modified: 12:25:05" itemprop="dateCreated datePublished" datetime="2025-06-25T09:49:19+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-List-Component-Copy-Issues-Retrieving-Page-Routing-Information-Component-Exposed-Methods-Page-Destruction-Issues-Status-Bar-Color-Modification"><a href="#Daily-HarmonyOS-Next-Knowledge-List-Component-Copy-Issues-Retrieving-Page-Routing-Information-Component-Exposed-Methods-Page-Destruction-Issues-Status-Bar-Color-Modification" class="headerlink" title="[Daily HarmonyOS Next Knowledge] List Component Copy Issues, Retrieving Page Routing Information, Component Exposed Methods, Page Destruction Issues, Status Bar Color Modification"></a>[Daily HarmonyOS Next Knowledge] List Component Copy Issues, Retrieving Page Routing Information, Component Exposed Methods, Page Destruction Issues, Status Bar Color Modification</h3><h4 id="1-In-HarmonyOS-are-items-in-ForEach-and-LazyForEach-references-or-completely-new-copies"><a href="#1-In-HarmonyOS-are-items-in-ForEach-and-LazyForEach-references-or-completely-new-copies" class="headerlink" title="1. In HarmonyOS, are items in ForEach and LazyForEach references or completely new copies?"></a>1. In HarmonyOS, are items in ForEach and LazyForEach references or completely new copies?</h4><p><strong>Question</strong>: Are items in ForEach and LazyForEach references or new copies?  </p>
<p><strong>Scenario</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">LazyForEach</span>(<span class="variable language_">this</span>.<span class="property">treeData</span> <span class="keyword">as</span> <span class="title class_">MyDataSource</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">TreeNode</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">TreeItem</span>(&#123; <span class="attr">treeNode</span>: item, <span class="attr">option</span>: <span class="variable language_">this</span>.<span class="property">option</span>, <span class="attr">callback</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;asdfasdfasdf&#x27;</span>);</span><br><span class="line">  &#125;&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>Items in ForEach</strong>:<br>In ForEach, each <code>item</code> is a constant and a new copy during each iteration. This means that for every iteration, <code>item</code> is an independent copy, and its stored state and data do not affect other iterations.  </p>
<p><strong>Items in LazyForEach</strong>:<br>In LazyForEach, <code>item</code> is a unique and fixed key generated by a key-value generator. Each data item generates a key to identify the corresponding component. When the key changes, the ArkUI framework treats the array element as replaced or modified and creates a new component based on the new key. Therefore, <code>item</code> is passed by reference in LazyForEach, and its state and data can be observed during iterations.  </p>
<p><strong>Performance Considerations</strong>:  </p>
<ul>
<li><strong>ForEach</strong> creates new copies for each iteration, leading to higher memory consumption and potential performance issues with large datasets.  </li>
<li><strong>LazyForEach</strong> uses reference passing, reducing memory overhead and improving efficiency by reusing components.</li>
</ul>
<p><strong>Use Cases</strong>:  </p>
<ul>
<li>Use <strong>ForEach</strong> when you need independent, isolated copies of data.  </li>
<li>Use <strong>LazyForEach</strong> for efficient reference passing and component reuse.</li>
</ul>
<h4 id="2-How-to-retrieve-the-NavigationInfo-object-of-a-page-in-HarmonyOS"><a href="#2-How-to-retrieve-the-NavigationInfo-object-of-a-page-in-HarmonyOS" class="headerlink" title="2. How to retrieve the NavigationInfo object of a page in HarmonyOS?"></a>2. How to retrieve the NavigationInfo object of a page in HarmonyOS?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-api-V5#ZH-CN_TOPIC_0000001884917850__querynavigationinfo12">Custom Component API</a>  </p>
<p>Custom component built-in methods are APIs provided by the ArkUI framework. You can call these APIs on a custom component instance to retrieve information such as its UIContext.  </p>
<p><strong>Method</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">queryNavigationInfo</span>(): <span class="title class_">NavigationInfo</span> | <span class="literal">undefined</span></span><br><span class="line"><span class="comment">// Query the Navigation information to which the custom component belongs.</span></span><br></pre></td></tr></table></figure>


<h4 id="3-Can-HarmonyOS-components-expose-methods-for-parent-components-to-call"><a href="#3-Can-HarmonyOS-components-expose-methods-for-parent-components-to-call" class="headerlink" title="3. Can HarmonyOS components expose methods for parent components to call?"></a>3. Can HarmonyOS components expose methods for parent components to call?</h4><p><strong>Reference Demo</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;Initial Value&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">controller</span>: <span class="title class_">ChildController</span> = <span class="keyword">new</span> <span class="title class_">ChildController</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">controller</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="property">changeText</span> = <span class="variable language_">this</span>.<span class="property">changeText</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aaa&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> changeText = <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">text</span> = value;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;bbb&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">text</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChildController</span> &#123;</span><br><span class="line">  changeText = <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;11111&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> <span class="title class_">ChildRef</span> = <span class="keyword">new</span> <span class="title class_">ChildController</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">noShow</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Get Child\&#x27;s exposed method!&#x27;</span>).<span class="title function_">fontSize</span>(<span class="string">&#x27;18vp&#x27;</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>);</span><br><span class="line">      <span class="title class_">Divider</span>();</span><br><span class="line">      <span class="title class_">Child</span>(&#123; <span class="attr">controller</span>: <span class="title class_">ChildRef</span> &#125;);</span><br><span class="line">      <span class="title class_">Child</span>();</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Parent calls Child\&#x27;s changeText&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ChildRef</span>.<span class="title function_">changeText</span>(<span class="string">&#x27;Parent called Child\&#x27;s changeText&#x27;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="4-Why-do-local-instance-variables-persist-after-popping-a-page-using-HarmonyOS-navigation"><a href="#4-Why-do-local-instance-variables-persist-after-popping-a-page-using-HarmonyOS-navigation" class="headerlink" title="4. Why do local instance variables persist after popping a page using HarmonyOS navigation?"></a>4. Why do local instance variables persist after popping a page using HarmonyOS navigation?</h4><p><strong>Issue</strong>:  </p>
<ol>
<li>Navigate to <code>FlutterPageIndex</code>, which declares a <code>flutterEntry</code> instance.  </li>
<li>Pop to another page using navigation (closing <code>FlutterPageIndex</code>).  </li>
<li>Later, when <code>callbackTheme</code> is invoked, <code>this.flutterEntry?.refreshTheme()</code> still executes, indicating the instance was not destroyed.</li>
</ol>
<p><strong>Solution</strong>:<br><code>pop()</code> only removes the top element from the navigation stack and triggers the <code>onPop</code> callback. It does not destroy intermediate stack entries. Use <strong><code>popToIndex</code></strong> or <strong><code>popToName</code></strong> instead.  </p>
<h4 id="5-How-to-modify-the-status-bar-color-in-HarmonyOS"><a href="#5-How-to-modify-the-status-bar-color-in-HarmonyOS" class="headerlink" title="5. How to modify the status bar color in HarmonyOS?"></a>5. How to modify the status bar color in HarmonyOS?</h4><p>Use the <strong><code>setWindowSystemBarProperties</code></strong> method to customize the status bar:  </p>
<p><strong>Steps</strong>:  </p>
<ol>
<li>In <code>EntryAbility.ets</code>, use the <code>onWindowStageCreate</code> method.  </li>
<li>Call <code>setWindowSystemBarProperties</code> to set properties like background color and transparency.</li>
</ol>
<p><strong>Example</strong> (set status bar to white):  </p>
<pre><code class="language-typescript">setWindowSystemBarProperties(&#123;   
  backgroundColor: &#39;#FFFFFF&#39;   
&#125;);
</code></pre>
<p>This allows you to customize the status bar appearance to match your app’s UI requirements.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/517-Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/517-Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Routing Singleton Pattern, Routing Warnings, Verification Code Popups, Custom Routing Table Implementation, Querying Screen Orientation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 09:47:17 / Modified: 09:47:51" itemprop="dateCreated datePublished" datetime="2025-06-25T09:47:17+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation"><a href="#Daily-HarmonyOS-Next-Knowledge-Routing-Singleton-Pattern-Routing-Warnings-Verification-Code-Popups-Custom-Routing-Table-Implementation-Querying-Screen-Orientation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Routing Singleton Pattern, Routing Warnings, Verification Code Popups, Custom Routing Table Implementation, Querying Screen Orientation"></a>[Daily HarmonyOS Next Knowledge] Routing Singleton Pattern, Routing Warnings, Verification Code Popups, Custom Routing Table Implementation, Querying Screen Orientation</h3><h4 id="1-Is-there-a-way-in-HarmonyOS-Navigation-to-implement-a-singleton-pattern-similar-to-RouterMode-in-Router"><a href="#1-Is-there-a-way-in-HarmonyOS-Navigation-to-implement-a-singleton-pattern-similar-to-RouterMode-in-Router" class="headerlink" title="1. Is there a way in HarmonyOS Navigation to implement a singleton pattern similar to RouterMode in Router?"></a>1. Is there a way in HarmonyOS Navigation to implement a singleton pattern similar to RouterMode in Router?</h4><p>Reference demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">pushPathsingleTask</span>(<span class="attr">info</span>: <span class="title class_">NavPathInfo</span>, <span class="attr">animated</span>?: <span class="built_in">boolean</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageArray</span> = [];</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageArray</span> = <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">getIndexByName</span>(info.<span class="property">name</span>);</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">pageArray</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">pushPath</span>(info, animated);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageInfos</span>.<span class="title function_">popToIndex</span>(<span class="variable language_">this</span>.<span class="property">pageArray</span>.<span class="title function_">pop</span>(), animated);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-HarmonyOS-Warning-when-using-routeName-Is-there-an-alternative"><a href="#2-HarmonyOS-Warning-when-using-routeName-Is-there-an-alternative" class="headerlink" title="2. HarmonyOS: Warning when using routeName. Is there an alternative?"></a>2. HarmonyOS: Warning when using routeName. Is there an alternative?</h4><p><code>@Entry(&#123; routeName: ‘JLShowPrivacyPage’ &#125;)</code><br>Alert: <em>“It’s not a recommended way to export struct with @Entry decorator, which may cause ACE Engine error in component preview mode”</em>  </p>
<p><strong>Question</strong>: Will this warning cause exceptions during actual use? If so, what’s the alternative?<br><strong>Answer</strong>: This warning can be ignored. It may cause exceptions only in preview mode, but works fine on real devices.  </p>
<h4 id="3-HarmonyOS-Demo-for-preventing-SMS-verification-code-abuse-with-image-captcha-or-slider-verification"><a href="#3-HarmonyOS-Demo-for-preventing-SMS-verification-code-abuse-with-image-captcha-or-slider-verification" class="headerlink" title="3. HarmonyOS: Demo for preventing SMS verification code abuse with image captcha or slider verification?"></a>3. HarmonyOS: Demo for preventing SMS verification code abuse with image captcha or slider verification?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> promptAction <span class="keyword">from</span> <span class="string">&#x27;@ohos.promptAction&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">customDialogId</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> sliderValue = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">customDialogBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;安全验证&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">lineHeight</span>(<span class="number">60</span>);</span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.error&#x27;</span>))</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">16</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;请滑到最右端&quot;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId);</span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="title class_">Slider</span>(&#123; <span class="attr">style</span>: <span class="title class_">SliderStyle</span>.<span class="property">InSet</span>, <span class="attr">value</span>: sliderValue &#125;)</span><br><span class="line">        .<span class="title function_">trackColor</span>(<span class="string">&#x27;rgba(40,40,40,0.5)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">selectedColor</span>(<span class="string">&#x27;rgba(200,200,200,1)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">trackThickness</span>(<span class="number">66</span>)</span><br><span class="line">        .<span class="title function_">blockStyle</span>(&#123; <span class="attr">type</span>: <span class="title class_">SliderBlockType</span>.<span class="property">IMAGE</span>, <span class="attr">image</span>: $r(<span class="string">&#x27;app.media.arrow&#x27;</span>) &#125;)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">mode</span>: <span class="title class_">SliderChangeMode</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (value === <span class="number">100</span>) &#123;</span><br><span class="line">            promptAction.<span class="title function_">closeCustomDialog</span>(customDialogId);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">90</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">height</span>(<span class="number">220</span>)</span><br><span class="line">  .<span class="title function_">padding</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;获取验证码&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            promptAction.<span class="title function_">openCustomDialog</span>(&#123;</span><br><span class="line">              <span class="attr">builder</span>: customDialogBuilder.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">            &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="attr">dialogId</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              customDialogId = dialogId;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="4-HarmonyOS-Complete-demo-for-custom-routing-tables-and-dynamic-routing"><a href="#4-HarmonyOS-Complete-demo-for-custom-routing-tables-and-dynamic-routing" class="headerlink" title="4. HarmonyOS: Complete demo for custom routing tables and dynamic routing?"></a>4. HarmonyOS: Complete demo for custom routing tables and dynamic routing?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/samples/#section11434169191">App Navigation Design</a>  </p>
<h4 id="5-HarmonyOS-Query-current-screen-orientation-portrait-landscape"><a href="#5-HarmonyOS-Query-current-screen-orientation-portrait-landscape" class="headerlink" title="5. HarmonyOS: Query current screen orientation (portrait&#x2F;landscape)?"></a>5. HarmonyOS: Query current screen orientation (portrait&#x2F;landscape)?</h4><p><strong>1. Listen for orientation changes</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> listener = mediaquery.<span class="title function_">matchMediaSync</span>(<span class="string">&#x27;(orientation: landscape)&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>2. Query current orientation</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">orientation</span>: <span class="built_in">number</span> = display.<span class="title function_">getDefaultDisplaySync</span>().<span class="property">orientation</span>;</span><br><span class="line"><span class="keyword">switch</span> (orientation) &#123;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;竖屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;横屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">PORTRAIT_INVERTED</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;反向竖屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> display.<span class="property">Orientation</span>.<span class="property">LANDSCAPE_INVERTED</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;反向横屏&#x27;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">status</span> = <span class="string">&#x27;不知道&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Additional methods</strong>:  </p>
<ul>
<li>Use <code>display.on(&#39;windowSizeChange&#39;)</code> to listen for screen changes.  </li>
<li>Configure <code>orientation: auto_rotation</code> in <code>module.json5</code> for auto-rotation.  </li>
<li>Dynamically set orientation with <code>window.setPreferredOrientation</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5">Display API</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/516-Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/516-Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Listening for Visibility, Loading GIFs, User Page Access Data, Bottom Sliding Pop-ups, Sending Emoji Messages</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:39:20 / Modified: 08:39:45" itemprop="dateCreated datePublished" datetime="2025-06-25T08:39:20+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages"><a href="#Daily-HarmonyOS-Next-Knowledge-Listening-for-Visibility-Loading-GIFs-User-Page-Access-Data-Bottom-Sliding-Pop-ups-Sending-Emoji-Messages" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Listening for Visibility, Loading GIFs, User Page Access Data, Bottom Sliding Pop-ups, Sending Emoji Messages"></a>[Daily HarmonyOS Next Knowledge] Listening for Visibility, Loading GIFs, User Page Access Data, Bottom Sliding Pop-ups, Sending Emoji Messages</h3><h4 id="1-HarmonyOS-Can’t-listen-for-visible-invisible-states-of-Navigation-component-content"><a href="#1-HarmonyOS-Can’t-listen-for-visible-invisible-states-of-Navigation-component-content" class="headerlink" title="1. HarmonyOS: Can’t listen for visible&#x2F;invisible states of Navigation component content?"></a>1. HarmonyOS: Can’t listen for visible&#x2F;invisible states of Navigation component content?</h4><p>Issue: The navbar home page does not trigger the lifecycle. Currently, you can listen for navigation to the home page (named “navBar”) via <code>observer.on(&#39;navDestinationSwitch&#39;)</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5#ZH-CN_TOPIC_0000001930676413__observeronnavdestinationswitch12</a>  </p>
<h4 id="2-HarmonyOS-Can-I-control-GIF-playback-when-loading-with-image"><a href="#2-HarmonyOS-Can-I-control-GIF-playback-when-loading-with-image" class="headerlink" title="2. HarmonyOS: Can I control GIF playback when loading with image?"></a>2. HarmonyOS: Can I control GIF playback when loading with image?</h4><p>Yes, use the third-party library <code>ohos_gif-drawable</code> to control GIF play&#x2F;pause.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_gif-drawable">https://gitee.com/openharmony-sig/ohos_gif-drawable</a>  </p>
<h4 id="3-HarmonyOS-How-to-obtain-user-page-access-data-for埋点-tracking"><a href="#3-HarmonyOS-How-to-obtain-user-page-access-data-for埋点-tracking" class="headerlink" title="3. HarmonyOS: How to obtain user page access data for埋点 (tracking)?"></a>3. HarmonyOS: How to obtain user page access data for埋点 (tracking)?</h4><ol>
<li><p>Use the <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-hiviewdfx-hiappevent-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-hiviewdfx-hiappevent-V5</a> interface, a system-level event tracking mechanism for apps to record faults, statistics, security info, and user behaviors.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/2_3hiappevent_u4f7f_u7528_u6307_u5bfc-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/2_3hiappevent_u4f7f_u7528_u6307_u5bfc-V5</a>  </p>
</li>
<li><p>For global page lifecycle listening:  </p>
<ul>
<li>Use <code>observer.on(&#39;routerPageUpdate&#39;)</code> for pages.  </li>
<li>Use <code>observer.on(&#39;navDestinationUpdate&#39;)</code> for NavDestination.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5</a></li>
</ul>
</li>
</ol>
<h4 id="4-HarmonyOS-How-to-implement-a-bottom-sliding-pop-up-attached-to-the-page"><a href="#4-HarmonyOS-How-to-implement-a-bottom-sliding-pop-up-attached-to-the-page" class="headerlink" title="4. HarmonyOS: How to implement a bottom sliding pop-up attached to the page?"></a>4. HarmonyOS: How to implement a bottom sliding pop-up attached to the page?</h4><p>Check if half-modal transitions can meet the requirement. Bind a half-modal page to a component via the <code>bindSheet</code> attribute, and set the size using custom or default built-in heights.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5</a>  </p>
<h4 id="5-HarmonyOS-Demo-for-sending-edited-messages-with-text-and-emoji-in-instant-messaging"><a href="#5-HarmonyOS-Demo-for-sending-edited-messages-with-text-and-emoji-in-instant-messaging" class="headerlink" title="5. HarmonyOS: Demo for sending edited messages with text and emoji in instant messaging?"></a>5. HarmonyOS: Demo for sending edited messages with text and emoji in instant messaging?</h4><p>Use <code>RichEditor</code> to display text and emojis when sending edited messages in IM.<br>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos-cases/cases/blob/master/CommonAppDevelopment/feature/chatwithexpression/README.md">https://gitee.com/harmonyos-cases/cases/blob/master/CommonAppDevelopment/feature/chatwithexpression/README.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/515-Daily-HarmonyOS-Next-Knowledge-Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Modifier-Problems/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/515-Daily-HarmonyOS-Next-Knowledge-Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Modifier-Problems/" class="post-title-link" itemprop="url">515[Daily HarmonyOS Next Knowledge] Grid Drag Animation, Timer Control, Routing Selection Issues, State Modifier Problems</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 08:27:01 / Modified: 08:37:40" itemprop="dateCreated datePublished" datetime="2025-06-25T08:27:01+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-Learn-HarmonyOS-Next-Knowledge】Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Decoration-Problems"><a href="#【Daily-Learn-HarmonyOS-Next-Knowledge】Grid-Drag-Animation-Timer-Control-Routing-Selection-Issues-State-Decoration-Problems" class="headerlink" title="【Daily Learn HarmonyOS Next Knowledge】Grid Drag Animation, Timer Control, Routing Selection Issues, State Decoration Problems"></a>【Daily Learn HarmonyOS Next Knowledge】Grid Drag Animation, Timer Control, Routing Selection Issues, State Decoration Problems</h3><h4 id="1-HarmonyOS-Grid-Drag-Animation-Issue"><a href="#1-HarmonyOS-Grid-Drag-Animation-Issue" class="headerlink" title="1. HarmonyOS Grid Drag Animation Issue"></a>1. HarmonyOS Grid Drag Animation Issue</h4><p>The following demo implements partial items that do not respond to dragging, but the animation has issues where items get squeezed together.  </p>
<pre><code class="language-typescript">// Refer to the following Demo  
@Entry  
@Component  
struct GridExample &#123;  
  @State numbers: string[] = []  
  scroller: Scroller = new Scroller()  
  layoutOptions1: GridLayoutOptions = &#123;  
    regularSize: [1, 1], // Only supports [1, 1]  
    irregularIndexes: [0], // The GridItem at index 0 occupies a full row  
  &#125;  
  @State text: string = &#39;drag&#39;  
  @Builder pixelMapBuilder() &#123; // Dragging style during the process  
    Column() &#123;  
      Text(this.text)  
        .fontSize(16)  
        .backgroundColor(0xF9CF93)  
        .width(80)  
        .height(80)  
        .textAlign(TextAlign.Center)  
    &#125;  
  &#125;  
  aboutToAppear() &#123;  
    for (let i = 1; i &lt;= 9; i++) &#123;  
      this.numbers.push(i + &#39;&#39;)  
    &#125;  
  &#125;  
  changeIndex(index1: number, index2: number) &#123; // Swap positions in the array  
    const temp = this.numbers[index1];  
    if (index1 &gt; index2) &#123;  
      this.numbers.splice(index2, 0, temp);  
      this.numbers.splice(index1 + 1, 1);  
    &#125; else &#123;  
      this.numbers.splice(index2 + 1, 0, temp);  
      this.numbers.splice(index1, 1);  
    &#125;  
  &#125;  
  build() &#123;  
    Column(&#123; space: 5 &#125;) &#123;  
      Grid(this.scroller, this.layoutOptions1) &#123;  
        ForEach(this.numbers, (day: string) =&gt; &#123;  
          GridItem() &#123;  
            if (day == &quot;1&quot;) &#123;  
              Text(day)  
                .fontSize(16)  
                .backgroundColor(0xF9CF93)  
                .width(&quot;100%&quot;)  
                .height(80)  
                .textAlign(TextAlign.Center)  
            &#125; else &#123;  
              Text(day)  
                .fontSize(16)  
                .backgroundColor(0xF9CF93)  
                .width(80)  
                .height(80)  
                .textAlign(TextAlign.Center)  
            &#125;  
          &#125;  
        &#125;)  
      &#125;  
      .columnsTemplate(&#39;1fr 1fr 1fr 1fr&#39;)  
      .columnsGap(10)  
      .rowsGap(10)  
      .onScrollIndex((first: number) =&gt; &#123;  
        console.info(first.toString())  
      &#125;)  
      .width(&#39;100%&#39;)  
      .backgroundColor(0xFAEEE0)  
      .height(300)  
      .supportAnimation(true)  
      .editMode(true) // Set whether Grid enters edit mode; in edit mode, GridItems inside can be dragged  
      .onItemDragStart((event: ItemDragInfo, itemIndex: number) =&gt; &#123; // Triggered when dragging the bound component for the first time  
        if (itemIndex == 0) &#123;  
          return;  
        &#125;  
        this.text = this.numbers[itemIndex]  
        return this.pixelMapBuilder() // Set the image displayed during dragging  
      &#125;)  
      .onItemDrop((event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; &#123; // The bound component can act as a drop target; when dragging stops within its bounds, this callback is triggered  
        // If isSuccess=false, the drop position is outside the grid; if insertIndex &gt; length, a new element event occurs  
        if (!isSuccess || insertIndex &gt;= this.numbers.length || insertIndex == 0) &#123;  
          return  
        &#125;  
        console.info(&#39;tag&#39; + itemIndex + &#39;&#39;, insertIndex + &#39;&#39;) // itemIndex: drag start position, insertIndex: drag insert position  
        this.changeIndex(itemIndex, insertIndex)  
      &#125;)  
    &#125;.width(&#39;100%&#39;).margin(&#123; top: 5 &#125;)  
  &#125;  
&#125;  
</code></pre>
<p><strong>Reference Demo:</strong>  </p>
<pre><code class="language-typescript">import curves from &#39;@ohos.curves&#39;  
// xxx.ets  
@Entry  
@Component  
struct GridItemExample &#123;  
  @State numbers: number[] = []  
  @State dragItem: number = -1  
  @State scaleItem: number = -1  
  @State item: number = -1  
  private dragRefOffsetx: number = 0  
  private dragRefOffsety: number = 0  
  @State offsetX: number = 0  
  @State offsetY: number = 0  
  private FIX_VP_X: number = 108  
  private FIX_VP_Y: number = 120  
  aboutToAppear() &#123;  
    for (let i = 1; i &lt;= 11; i++) &#123;  
      this.numbers.push(i)  
    &#125;  
  &#125;  
  itemMove(index: number, newIndex: number): void &#123;  
    console.info(&#39;index:&#39; + index + &#39; newIndex:&#39; + newIndex)  
    if (!this.isDraggable(newIndex)) &#123;  
      return  
    &#125;  
    let tmp = this.numbers.splice(index, 1)  
    this.numbers.splice(newIndex, 0, tmp[0])  
  &#125;  
  // Scroll down  
  down(index: number): void &#123;  
    // Specify fixed GridItems that do not respond to events  
    if (!this.isDraggable(index + 3)) &#123;  
      return  
    &#125;  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 3)  
  &#125;  
  // Scroll down (bottom-right corner empty)  
  down2(index: number): void &#123;  
    if (!this.isDraggable(index + 3)) &#123;  
      return  
    &#125;  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 3)  
  &#125;  
  // Scroll up  
  up(index: number): void &#123;  
    if (!this.isDraggable(index - 3)) &#123;  
      return  
    &#125;  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 3)  
  &#125;  
  // Scroll left  
  left(index: number): void &#123;  
    if (!this.isDraggable(index - 1)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.itemMove(index, index - 1)  
  &#125;  
  // Scroll right  
  right(index: number): void &#123;  
    if (!this.isDraggable(index + 1)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.itemMove(index, index + 1)  
  &#125;  
  // Scroll bottom-right  
  lowerRight(index: number): void &#123;  
    if (!this.isDraggable(index + 4)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 4)  
  &#125;  
  // Scroll top-right  
  upperRight(index: number): void &#123;  
    if (!this.isDraggable(index - 2)) &#123;  
      return  
    &#125;  
    this.offsetX -= this.FIX_VP_X  
    this.dragRefOffsetx += this.FIX_VP_X  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 2)  
  &#125;  
  // Scroll bottom-left  
  lowerLeft(index: number): void &#123;  
    if (!this.isDraggable(index + 2)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.offsetY -= this.FIX_VP_Y  
    this.dragRefOffsety += this.FIX_VP_Y  
    this.itemMove(index, index + 2)  
  &#125;  
  // Scroll top-left  
  upperLeft(index: number): void &#123;  
    if (!this.isDraggable(index - 4)) &#123;  
      return  
    &#125;  
    this.offsetX += this.FIX_VP_X  
    this.dragRefOffsetx -= this.FIX_VP_X  
    this.offsetY += this.FIX_VP_Y  
    this.dragRefOffsety -= this.FIX_VP_Y  
    this.itemMove(index, index - 4)  
  &#125;  
  isDraggable(index: number): boolean &#123;  
    console.info(&#39;index:&#39; + index)  
    return index &gt; 1  
  &#125;  
  build() &#123;  
    Column(&#123;space:10&#125;) &#123;  
      Column(&#123;space:5&#125;) &#123;  
        Text(&quot;Grid Drag Sorting Animation&quot;)  
        Text(&quot;Components 1 and 2 cannot be dragged&quot;)  
      &#125;  
      Grid() &#123;  
        ForEach(this.numbers, (item: number) =&gt; &#123;  
          GridItem() &#123;  
            Text(item + &#39;&#39;)  
              .fontSize(16)  
              .width(&#39;100%&#39;)  
              .textAlign(TextAlign.Center)  
              .height(100)  
              .borderRadius(10)  
              .backgroundColor(0xFFFFFF)  
              .shadow(this.scaleItem == item ? &#123;  
                radius: 70,  
                color: &#39;#15000000&#39;,  
                offsetX: 0,  
                offsetY: 0  
              &#125; : &#123;  
                radius: 0,  
                color: &#39;#15000000&#39;,  
                offsetX: 0,  
                offsetY: 0  
              &#125;)  
              .animation(&#123; curve: Curve.Sharp, duration: 300 &#125;)  
          &#125;  
          // Specify fixed GridItems that do not respond to events  
          .hitTestBehavior(this.isDraggable(this.numbers.indexOf(item)) ? HitTestMode.Default : HitTestMode.None)  
          .scale(&#123; x: this.scaleItem == item ? 1.05 : 1, y: this.scaleItem == item ? 1.05 : 1 &#125;)  
          .zIndex(this.dragItem == item ? 1 : 0)  
          .translate(this.dragItem == item ? &#123; x: this.offsetX, y: this.offsetY &#125; : &#123; x: 0, y: 0 &#125;)  
          .padding(10)  
          .gesture(  
            // The following combined gestures are recognized in sequence; if the long-press gesture event is not triggered properly, the drag gesture event will not be triggered  
            GestureGroup(GestureMode.Sequence,  
              LongPressGesture(&#123; repeat: true &#125;)  
                .onAction((event?: GestureEvent) =&gt; &#123;  
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;  
                    this.scaleItem = item  
                  &#125;)  
                &#125;)  
                .onActionEnd(() =&gt; &#123;  
                  animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;  
                    this.scaleItem = -1  
                  &#125;)  
                &#125;),  
              PanGesture(&#123; fingers: 1, direction: null, distance: 0 &#125;)  
                .onActionStart(() =&gt; &#123;  
                  this.dragItem = item  
                  this.dragRefOffsetx = 0  
                  this.dragRefOffsety = 0  
                &#125;)  
                .onActionUpdate((event: GestureEvent) =&gt; &#123;  
                  this.offsetY = event.offsetY - this.dragRefOffsety  
                  this.offsetX = event.offsetX - this.dragRefOffsetx  
                  // console.log(&#39;X:&#39; + this.offsetX.toString())  
                  // console.log(&#39;Y:&#39; + this.offsetY.toString())  
                  animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;  
                    let index = this.numbers.indexOf(this.dragItem)  
                    if (this.offsetY &gt;= this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)  
                      &amp;&amp; ![8, 9, 10].includes(index)) &#123;  
                      // Scroll down  
                      this.down(index)  
                    &#125; else if (this.offsetY &lt;= -this.FIX_VP_Y / 2 &amp;&amp; (this.offsetX &lt;= 44 &amp;&amp; this.offsetX &gt;= -44)  
                      &amp;&amp; ![0, 1, 2].includes(index)) &#123;  
                      // Scroll up  
                      this.up(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)  
                      &amp;&amp; ![2, 5, 8, 10].includes(index)) &#123;  
                      // Scroll right  
                      this.right(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; (this.offsetY &lt;= 50 &amp;&amp; this.offsetY &gt;= -50)  
                      &amp;&amp; ![0, 3, 6, 9].includes(index)) &#123;  
                      // Scroll left  
                      this.left(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; ![2, 5, 7, 8, 9, 10].includes(index)) &#123;  
                      // Scroll bottom-right  
                      this.lowerRight(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 1, 2, 5, 8].includes(index)) &#123;  
                      // Scroll top-right  
                      this.upperRight(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 3, 6, 9, 10].includes(index)) &#123;  
                      // Scroll bottom-left  
                      this.lowerLeft(index)  
                    &#125; else if (this.offsetX &lt;= -this.FIX_VP_X / 2 &amp;&amp; this.offsetY &lt;= -this.FIX_VP_Y / 2  
                      &amp;&amp; ![0, 1, 2, 3, 6, 9].includes(index)) &#123;  
                      // Scroll top-left  
                      this.upperLeft(index)  
                    &#125; else if (this.offsetX &gt;= this.FIX_VP_X / 2 &amp;&amp; this.offsetY &gt;= this.FIX_VP_Y / 2  
                      &amp;&amp; [7].includes(index)) &#123;  
                      // Scroll bottom-right (bottom-right corner empty)  
                      this.down2(index)  
                    &#125;  
</code></pre>
<h4 id="2-HarmonyOS-TextTimer-Usage-Issue"><a href="#2-HarmonyOS-TextTimer-Usage-Issue" class="headerlink" title="2. HarmonyOS TextTimer Usage Issue"></a>2. HarmonyOS TextTimer Usage Issue</h4><p>When using <code>TextTimer</code> as a countdown timer, how to set the starting time? For example, how to start counting from <code>00:01:20</code> (1 minute and 20 seconds)?  </p>
<p>The <code>count</code> property represents the initial countdown value (only valid when <code>isCountDown</code> is <code>true</code>), in milliseconds. The maximum value is <code>86400000</code> milliseconds (24 hours). When <code>0 &lt; count &lt; 86400000</code>, an example is as follows:  </p>
<pre><code class="language-typescript">@Entry  
@Component  
struct Index &#123;  
  textTimerController: TextTimerController = new TextTimerController()  
  @State format: string = &#39;mm:ss.SS&#39;  
  build() &#123;  
    Column() &#123;  
      TextTimer(&#123; isCountDown: true, count: 1200, controller: this.textTimerController &#125;)  
        .format(this.format)  
        .fontColor(Color.Black)  
        .fontSize(50)  
        .onTimer((utc: number, elapsedTime: number) =&gt; &#123;  
          console.info(&#39;textTimer notCountDown utc is：&#39; + utc + &#39;, elapsedTime: &#39; + elapsedTime)  
        &#125;)  
      Row() &#123;  
        Button(&quot;start&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.start()  
        &#125;)  
        Button(&quot;pause&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.pause()  
        &#125;)  
        Button(&quot;reset&quot;).onClick(() =&gt; &#123;  
          this.textTimerController.reset()  
        &#125;)  
      &#125;  
    &#125;  
  &#125;  
&#125;  
</code></pre>
<h4 id="3-HarmonyOS-Navigation-If-onPop-is-Passed-When-A-Navigates-to-B-but-B-Calls-pop-Without-Passing-result-onPop-Is-Not-Triggered"><a href="#3-HarmonyOS-Navigation-If-onPop-is-Passed-When-A-Navigates-to-B-but-B-Calls-pop-Without-Passing-result-onPop-Is-Not-Triggered" class="headerlink" title="3. HarmonyOS Navigation: If onPop is Passed When A Navigates to B, but B Calls pop Without Passing result, onPop Is Not Triggered?"></a>3. HarmonyOS Navigation: If <code>onPop</code> is Passed When A Navigates to B, but B Calls <code>pop</code> Without Passing <code>result</code>, <code>onPop</code> Is Not Triggered?</h4><p>You can pass <code>null</code> when calling <code>pop</code> to trigger the <code>onPop</code> callback.  </p>
<h4 id="4-HarmonyOS-Routing-Management-Should-We-Use-router-or-Navigation"><a href="#4-HarmonyOS-Routing-Management-Should-We-Use-router-or-Navigation" class="headerlink" title="4. HarmonyOS Routing Management: Should We Use router or Navigation?"></a>4. HarmonyOS Routing Management: Should We Use <code>router</code> or <code>Navigation</code>?</h4><p>It is recommended to use <code>Navigation</code>. The <code>RouterModule</code> module includes global routing stack and routing table information. The routing stack is a <code>NavPathStack</code> object, which is bound to the <code>Navigation</code> component in <code>Entry.hap</code>. <code>RouterModule</code> manages the routing information of the <code>Navigation</code> component by holding the <code>NavPathStack</code>. The routing table <code>builderMap</code> is a <code>Map</code> structure, storing page component information in a key-value format, where the key is a custom unique route name, and the value is a <code>WrappedBuilder</code> object wrapping the corresponding page component. The implementation of <code>RouterModule</code> mainly includes the following steps:  </p>
<pre><code class="language-typescript">1. Define the routing table and routing stack.  
export class RouterModule &#123;  
  // WrappedBuilder supports encapsulating components described by @Builder as parameters for storage  
  static builderMap: Map&lt;string, WrappedBuilder&lt;[object]&gt;&gt; = new Map&lt;string, WrappedBuilder&lt;[object]&gt;&gt;();  
  // Initialize the routing stack, which needs to be associated with the Navigation component  
  static navPathStack: NavPathStack = new NavPathStack();  
&#125;  

2. Add routing registration and retrieval methods to the routing table. Business har modules register page components to be routed to `RouterModule` via the registration method.  
export class RouterModule &#123;  
  // ...  
  // Register a page component to the routing table. `builderName` is the route name, and `builder` is the `WrappedBuilder` object wrapping the page component  
  public static registerBuilder(builderName: string, builder: WrappedBuilder&lt;[object]&gt;): void &#123;  
    RouterModule.builderMap.set(builderName, builder);  
  &#125;  

  // Retrieve the specified page component from the routing table  
  public static getBuilder(builderName: string): WrappedBuilder&lt;[object]&gt; &#123;  
    const builder = RouterModule.builderMap.get(builderName);  
    if (!builder) &#123;  
      console.info(&#39;not found builder &#39; + builderName);  
    &#125;  
    return builder as WrappedBuilder&lt;[object]&gt;;  
  &#125;  
&#125;  
export class RouterModule &#123;  
  // ...  
  // Navigate to a specified page by retrieving it from the page stack  
  public static async push(harName: string, builderName: string): Promise&lt;void&gt; &#123;  
    // Dynamically import the har module where the page is located to avoid explicit dependencies between business har modules, enabling on-demand loading  
    await import(harName);  
    // Navigate via the routing stack method by route name  
    RouterModule.navPathStack.pushPathByName(builderName, null);  
  &#125;  
&#125;  
</code></pre>
<h4 id="5-HarmonyOS-Should-State-Decorated-Variables-Be-Mandatory-Initialized"><a href="#5-HarmonyOS-Should-State-Decorated-Variables-Be-Mandatory-Initialized" class="headerlink" title="5. HarmonyOS: Should @State-Decorated Variables Be Mandatory Initialized?"></a>5. HarmonyOS: Should <code>@State</code>-Decorated Variables Be Mandatory Initialized?</h4><p><code>@State</code>-decorated variables should not be mandatory initialized.  </p>
<p>Variables decorated with <code>@State</code>, like other decorated variables in declarative paradigms, are private and can only be accessed within the component. They must specify their type and local initialization upon declaration. Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-V5</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
