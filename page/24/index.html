<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/24/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/24/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/607-Daily-Harmony-Learnings-on-HarmonyOS-Next-Dialog-Controller-ArkUI-X-Marquee-Light-Dark-Mode-Global-Popup-Callback/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/607-Daily-Harmony-Learnings-on-HarmonyOS-Next-Dialog-Controller-ArkUI-X-Marquee-Light-Dark-Mode-Global-Popup-Callback/" class="post-title-link" itemprop="url">[Daily Harmony Learnings on HarmonyOS Next] Dialog Controller, ArkUI-X, Marquee, Light/Dark Mode, Global Popup Callback</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:08:42 / Modified: 12:25:00" itemprop="dateCreated datePublished" datetime="2025-06-25T11:08:42+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Learnings/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Learnings</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-Harmony-Learnings-on-HarmonyOS-Next-Dialog-Controller-ArkUI-X-Marquee-Light-Dark-Mode-Global-Popup-Callback"><a href="#Daily-Harmony-Learnings-on-HarmonyOS-Next-Dialog-Controller-ArkUI-X-Marquee-Light-Dark-Mode-Global-Popup-Callback" class="headerlink" title="[Daily Harmony Learnings on HarmonyOS Next] Dialog Controller, ArkUI-X, Marquee, Light&#x2F;Dark Mode, Global Popup Callback"></a>[Daily Harmony Learnings on HarmonyOS Next] Dialog Controller, ArkUI-X, Marquee, Light&#x2F;Dark Mode, Global Popup Callback</h3><h4 id="1-Why-is-HarmonyOS-CustomDialogController-always-undefined"><a href="#1-Why-is-HarmonyOS-CustomDialogController-always-undefined" class="headerlink" title="1. Why is HarmonyOS CustomDialogController always undefined?"></a>1. Why is HarmonyOS CustomDialogController always undefined?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">DialogBug</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title function_">getPublishWidgetBuilder</span>().<span class="property">builder</span>,</span><br><span class="line">    <span class="attr">cornerRadius</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">customStyle</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Center</span>,</span><br><span class="line">    <span class="attr">maskColor</span>: <span class="number">0x77000000</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">open</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">200</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPublishWidgetBuilder</span>(<span class="params"></span>): <span class="title class_">WrappedBuilder</span>&lt;[]&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">wrapBuilder</span>(<span class="title class_">DialogBuilder</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DialogBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Mydialog</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line">struct <span class="title class_">Mydialog</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>?: <span class="title class_">CustomDialogController</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;close&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dialogController</span>?.<span class="title function_">close</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Supplementary Note**: Using `</span><span class="keyword">new</span> <span class="title class_">CustomDialogController</span><span class="string">` in `</span><span class="title class_">Mydialog</span><span class="string">` still fails to close the dialog.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Refer to the following modifications**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Test5</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">DialogBug</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">DialogBug</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">Mydialog</span>(), <span class="comment">// Directly use the component instead of wrapBuilder</span></span><br><span class="line">    <span class="attr">cornerRadius</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">customStyle</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">alignment</span>: <span class="title class_">DialogAlignment</span>.<span class="property">Center</span>,</span><br><span class="line">    <span class="attr">maskColor</span>: <span class="number">0x77000000</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;open&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">open</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">200</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPublishWidgetBuilder</span>(<span class="params"></span>): <span class="title class_">WrappedBuilder</span>&lt;[]&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">wrapBuilder</span>(<span class="title class_">DialogBuilder</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DialogBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Mydialog</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line">struct <span class="title class_">Mydialog</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>?: <span class="title class_">CustomDialogController</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;close&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dialogController</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">close</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;dialogController is undefined&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. What are the advantages and disadvantages of HarmonyOS ArkUI-X compared to other cross-platform frameworks like React Native, Flutter, and Taro?  </span></span><br><span class="line"><span class="string">**Advantages**:  </span></span><br><span class="line"><span class="string">1. Development paradigm aligns with HarmonyOS, requiring no extra framework learning.  </span></span><br><span class="line"><span class="string">2. Cross-platform and cross-device compatibility.  </span></span><br><span class="line"><span class="string">3. Dynamism (core libraries, dynamic bundles).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Can HarmonyOS marquee and font adaptive sizing coexist?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;一二三四&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;250px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;50px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">maxFontSize</span>(<span class="string">&#x27;50px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">minFontSize</span>(<span class="string">&#x27;30px&#x27;</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&#x27;30px&#x27;</span> &#125;)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">MARQUEE</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Conclusion**: Marquee and font adaptive sizing cannot coexist.  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Does the HarmonyOS &quot;Hello World&quot; demo not follow the system light/dark mode?  </span></span><br><span class="line"><span class="string">Add the following line in `</span>onCreate<span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getApplicationContext</span>().<span class="title function_">setColorMode</span>(<span class="title class_">ConfigurationConstant</span>.<span class="property">ColorMode</span>.<span class="property">COLOR_MODE_NOT_SET</span>)<span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Example of globally custom popups with callback functions in HarmonyOS  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// CustomDialog_Globally.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span>;</span><br><span class="line"><span class="comment">// CustomDialog_Globally_other01.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ComponentContent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; buildText, <span class="title class_">Params</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./CustomDialog_Globally&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Params</span> &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attr">callback</span>: <span class="function">(<span class="params"><span class="attr">volumeType</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">text</span>: <span class="built_in">string</span>, <span class="attr">callback</span>: (volumeType: <span class="built_in">string</span>, value: <span class="built_in">number</span>) =&gt; <span class="built_in">void</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">text</span> = text;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callback</span> = callback;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">buildText</span>(<span class="params"><span class="attr">params</span>: <span class="title class_">Params</span></span>) &#123;</span><br><span class="line">  <span class="comment">// Popup content</span></span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(params.<span class="property">text</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">      .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">36</span> &#125;)</span><br><span class="line">    <span class="title class_">Button</span>(<span class="string">&quot;Login&quot;</span>)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        params.<span class="property">text</span> = <span class="string">&#x27;Login button clicked&#x27;</span>;</span><br><span class="line">        <span class="comment">// Login result callback</span></span><br><span class="line">        params.<span class="title function_">callback</span>(<span class="string">&#x27;1&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CustomDialog</span>_Globally &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;Click Me&quot;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> uiContext = <span class="variable language_">this</span>.<span class="title function_">getUIContext</span>();</span><br><span class="line">            <span class="keyword">const</span> promptAction = uiContext.<span class="title function_">getPromptAction</span>();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> contentNode = <span class="keyword">new</span> <span class="title class_">ComponentContent</span>(</span><br><span class="line">                uiContext,</span><br><span class="line">                <span class="title function_">wrapBuilder</span>(buildText),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Params</span>(<span class="variable language_">this</span>.<span class="property">message</span>, <span class="function">(<span class="params"><span class="keyword">type</span>, val</span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Callback: type=<span class="subst">$&#123;<span class="keyword">type</span>&#125;</span>, value=<span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">                &#125;)</span><br><span class="line">              );</span><br><span class="line">              promptAction.<span class="title function_">openCustomDialog</span>(contentNode);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              <span class="keyword">const</span> code = (error <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span>;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`OpenCustomDialog error code: <span class="subst">$&#123;code&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CustomDialog</span>_Globally_other01 &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;HelloWorld&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> uiContext = <span class="variable language_">this</span>.<span class="title function_">getUIContext</span>();</span><br><span class="line">          <span class="keyword">const</span> promptAction = uiContext.<span class="title function_">getPromptAction</span>();</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">callback</span> = (<span class="params"><span class="attr">volumeType</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Result: type=<span class="subst">$&#123;volumeType&#125;</span>, value=<span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">message</span> = volumeType;</span><br><span class="line">          &#125;;</span><br><span class="line">          <span class="keyword">const</span> contentNode = <span class="keyword">new</span> <span class="title class_">ComponentContent</span>(</span><br><span class="line">            uiContext,</span><br><span class="line">            <span class="title function_">wrapBuilder</span>(buildText),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Params</span>(<span class="variable language_">this</span>.<span class="property">message</span>, callback)</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            promptAction.<span class="title function_">openCustomDialog</span>(contentNode);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">const</span> msg = (error <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span>;</span><br><span class="line">            <span class="keyword">const</span> code = (error <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Error: code=<span class="subst">$&#123;code&#125;</span>, message=<span class="subst">$&#123;msg&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/606-Daily-Harmony-Learnings-on-HarmonyOS-Next-Dialog-Controller-ArkUI-X-Marquee-Light-Dark-Mode-Global-Popup-Callback/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/606-Daily-Harmony-Learnings-on-HarmonyOS-Next-Dialog-Controller-ArkUI-X-Marquee-Light-Dark-Mode-Global-Popup-Callback/" class="post-title-link" itemprop="url">[Daily Harmony Learnings on HarmonyOS Next] Dialog Controller, ArkUI-X, Marquee, Light/Dark Mode, Global Popup Callback</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:08:29 / Modified: 12:37:14" itemprop="dateCreated datePublished" datetime="2025-06-25T11:08:29+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Removing-Overlays-Navigating-from-Non-Build-Functions-Controlling-Line-Breaks-in-Flow-Layouts-Global-Focus-Events-and-Forcing-Portrait-Orientation-in-Floating-Windows-on-Landscape-Screens"><a href="#【Daily-HarmonyOS-Next-Knowledge】Removing-Overlays-Navigating-from-Non-Build-Functions-Controlling-Line-Breaks-in-Flow-Layouts-Global-Focus-Events-and-Forcing-Portrait-Orientation-in-Floating-Windows-on-Landscape-Screens" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Removing Overlays, Navigating from Non-Build Functions, Controlling Line Breaks in Flow Layouts, Global Focus Events, and Forcing Portrait Orientation in Floating Windows on Landscape Screens"></a>【Daily HarmonyOS Next Knowledge】Removing Overlays, Navigating from Non-Build Functions, Controlling Line Breaks in Flow Layouts, Global Focus Events, and Forcing Portrait Orientation in Floating Windows on Landscape Screens</h3><h4 id="1-How-to-remove-the-overlay-in-HarmonyOS’s-bindsheet"><a href="#1-How-to-remove-the-overlay-in-HarmonyOS’s-bindsheet" class="headerlink" title="1. How to remove the overlay in HarmonyOS’s bindsheet?"></a>1. How to remove the overlay in HarmonyOS’s bindsheet?</h4><p>In the options object, there is a <code>maskColor</code> property used to set the color of the overlay. To ensure the overlay is completely transparent, set <code>maskColor</code> to a transparent value (e.g., <code>Transparent</code>). This will make the overlay invisible.</p>
<h4 id="2-How-to-use-this-navPathStack-pushDestination-outside-of-the-build-function-in-HarmonyOS"><a href="#2-How-to-use-this-navPathStack-pushDestination-outside-of-the-build-function-in-HarmonyOS" class="headerlink" title="2. How to use this.navPathStack?.pushDestination outside of the build function in HarmonyOS?"></a>2. How to use <code>this.navPathStack?.pushDestination</code> outside of the <code>build</code> function in HarmonyOS?</h4><p>The documentation only shows examples of using <code>this.navPathStack?.pushDestination</code> within the <code>build</code> function, triggered by an <code>onClick</code> event. However, when trying to use it elsewhere (e.g., for a link), it throws an error without any error message.</p>
<p><strong>Solution</strong>: <code>NavPathStack</code> must be initialized within a <code>Navigation</code> component to enable navigation.</p>
<h4 id="3-How-to-control-the-spacing-between-lines-in-a-HarmonyOS-flex-flow-layout-when-components-wrap"><a href="#3-How-to-control-the-spacing-between-lines-in-a-HarmonyOS-flex-flow-layout-when-components-wrap" class="headerlink" title="3. How to control the spacing between lines in a HarmonyOS flex flow layout when components wrap?"></a>3. How to control the spacing between lines in a HarmonyOS flex flow layout when components wrap?</h4><p>In earlier API versions, the <code>space</code> property in <code>Flex(&#123; wrap: FlexWrap.Wrap &#125;)</code> might not be available. For older APIs, refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-flex-V5#Example6">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-flex-V5#Example6</a></p>
<p><strong>Workaround</strong>: Use alternative properties or layout components available in your API version.</p>
<h4 id="4-Does-HarmonyOS-provide-a-global-focus-event-callback-at-the-application-level-similar-to-OH-NativeXComponent-RegisterFocusEventCallback-for-XComponents"><a href="#4-Does-HarmonyOS-provide-a-global-focus-event-callback-at-the-application-level-similar-to-OH-NativeXComponent-RegisterFocusEventCallback-for-XComponents" class="headerlink" title="4. Does HarmonyOS provide a global focus event callback at the application level, similar to OH_NativeXComponent_RegisterFocusEventCallback for XComponents?"></a>4. Does HarmonyOS provide a global focus event callback at the application level, similar to <code>OH_NativeXComponent_RegisterFocusEventCallback</code> for XComponents?</h4><p>Is there a window-level focus event?</p>
<p><strong>Answer</strong>: Focus events are component-level; there is no application-level focus event.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-window">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-window</a></p>
<h4 id="5-How-to-force-a-floating-window-to-display-in-portrait-orientation-on-a-landscape-screen-in-HarmonyOS"><a href="#5-How-to-force-a-floating-window-to-display-in-portrait-orientation-on-a-landscape-screen-in-HarmonyOS" class="headerlink" title="5. How to force a floating window to display in portrait orientation on a landscape screen in HarmonyOS?"></a>5. How to force a floating window to display in portrait orientation on a landscape screen in HarmonyOS?</h4><p>When creating a floating window, setting it to强制 portrait orientation does not work as expected:<br>![[【Daily HarmonyOS Next Knowledge】25.06.06.png]]</p>
<p><strong>Solution</strong>: Use <code>windowClass.setPreferredOrientation(window.Orientation.LOCKED)</code> to lock the orientation based on the current display. Here’s an example:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;Index4HelloWorld&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span> &#125;,</span><br><span class="line">          <span class="attr">middle</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Lock Orientation&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>), <span class="function">(<span class="params">err, win</span>) =&gt;</span> &#123;</span><br><span class="line">          win.<span class="title function_">setPreferredOrientation</span>(<span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LOCKED</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Unlock Orientation&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>(<span class="variable language_">this</span>), <span class="function">(<span class="params">err, win</span>) =&gt;</span> &#123;</span><br><span class="line">            win.<span class="title function_">setPreferredOrientation</span>(<span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">AUTO_ROTATION</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Note</strong>: <code>LOCKED</code> locks the screen to the current orientation (portrait or landscape). Use <code>ORIENTATION_PORTRAIT</code> to force portrait mode regardless of the device orientation.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/605-Daily-HarmonyOS-Next-Knowledge-Add-Mask-to-Main-View-Stealth-Screenshot-Custom-Password-Icon-Flex-Subcomponent-Compression-Set-Minimum-Height-for-Popup-Dialog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/605-Daily-HarmonyOS-Next-Knowledge-Add-Mask-to-Main-View-Stealth-Screenshot-Custom-Password-Icon-Flex-Subcomponent-Compression-Set-Minimum-Height-for-Popup-Dialog/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Add Mask to Main View, Stealth Screenshot, Custom Password Icon, Flex Subcomponent Compression, Set Minimum Height for Popup Dialog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:04:12 / Modified: 11:05:05" itemprop="dateCreated datePublished" datetime="2025-06-25T11:04:12+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Add-Mask-to-Main-View-Stealth-Screenshot-Custom-Password-Icon-Flex-Subcomponent-Compression-Set-Minimum-Height-for-Popup-Dialog"><a href="#Daily-HarmonyOS-Next-Knowledge-Add-Mask-to-Main-View-Stealth-Screenshot-Custom-Password-Icon-Flex-Subcomponent-Compression-Set-Minimum-Height-for-Popup-Dialog" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Add Mask to Main View, Stealth Screenshot, Custom Password Icon, Flex Subcomponent Compression, Set Minimum Height for Popup Dialog"></a>[Daily HarmonyOS Next Knowledge] Add Mask to Main View, Stealth Screenshot, Custom Password Icon, Flex Subcomponent Compression, Set Minimum Height for Popup Dialog</h3><h4 id="1-Can-HarmonyOS-support-adding-a-full-screen-mask-to-the-main-view-in-a-structure-like-NavDestination-tab-index-main-view"><a href="#1-Can-HarmonyOS-support-adding-a-full-screen-mask-to-the-main-view-in-a-structure-like-NavDestination-tab-index-main-view" class="headerlink" title="1. Can HarmonyOS support adding a full-screen mask to the main view in a structure like NavDestination-tab-index (main view)?"></a>1. Can HarmonyOS support adding a full-screen mask to the main view in a structure like NavDestination-tab-index (main view)?</h4><p>The current structure is a Tab containing Navigation, with a mask added to the main view within Navigation. Although the height is set to 100%, the bottom tab bar is not covered. How can the tab bar be masked?  </p>
<p>Components added within Navigation do not extend beyond its boundaries. Add a full-screen sibling component to the Tab as the mask layer.  </p>
<h4 id="2-How-to-implement-stealth-screenshot-reporting-entire-screen-including-floating-windows-in-HarmonyOS"><a href="#2-How-to-implement-stealth-screenshot-reporting-entire-screen-including-floating-windows-in-HarmonyOS" class="headerlink" title="2. How to implement stealth screenshot reporting (entire screen including floating windows) in HarmonyOS?"></a>2. How to implement stealth screenshot reporting (entire screen including floating windows) in HarmonyOS?</h4><p>When detecting user actions such as screen switching, floating windows, or subtitle activation, the app silently captures a full-screen screenshot (including overlays) and reports it to the backend.  </p>
<p><strong>References</strong>:  </p>
<ol>
<li><p>Component Screenshot: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5</a><br>This module provides the ability to capture component screenshots, including loaded and unloaded components. The screenshot only captures the component’s defined area; content drawn outside this area (e.g., overflow from child or sibling components) will not be included.  </p>
</li>
<li><p>Window Screenshot: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/map-map-V5#section4803202315197">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/map-map-V5#section4803202315197</a></p>
</li>
</ol>
<h4 id="3-Why-does-the-custom-passwordIcon-stop-working-when-TextInput-enabled-false-is-set-in-HarmonyOS"><a href="#3-Why-does-the-custom-passwordIcon-stop-working-when-TextInput-enabled-false-is-set-in-HarmonyOS" class="headerlink" title="3. Why does the custom passwordIcon stop working when TextInput .enabled(false) is set in HarmonyOS?"></a>3. Why does the custom passwordIcon stop working when TextInput .enabled(false) is set in HarmonyOS?</h4><p>In a password input field, the custom passwordIcon does not work when enabled is set to false.  </p>
<pre><code class="language-typescript">TextInput(&#123;
  text: &#39;this.mWifiPassword&#39;
&#125;)
  .type(InputType.Password)
  .passwordIcon(&#123; onIconSrc: $r(&quot;app.media.ic_open_eye&quot;), offIconSrc: $r(&quot;app.media.ic_close_eye&quot;) &#125;)
  .height(44)
  .enabled(false)
</code></pre>
<p><strong>Explanation</strong>:  </p>
<ol>
<li>Setting the <code>enabled</code> property of TextInput to <code>false</code> disables all interactions (clicks, presses, focus).  </li>
<li><code>passwordIcon</code> is a property of TextInput for the end-of-field icon in password mode.  </li>
<li>When <code>enabled</code> is <code>false</code>, <code>passwordIcon</code> cannot respond to clicks or presses because the component itself is non-interactive.</li>
</ol>
<p><strong>Solution</strong>: To ensure the passwordIcon works, keep <code>enabled</code> set to <code>true</code>.  </p>
<h4 id="4-Does-Flex-compress-subcomponents-in-HarmonyOS-Should-constraintSize-min-be-used-to-fix-subcomponent-width-height"><a href="#4-Does-Flex-compress-subcomponents-in-HarmonyOS-Should-constraintSize-min-be-used-to-fix-subcomponent-width-height" class="headerlink" title="4. Does Flex compress subcomponents in HarmonyOS? Should constraintSize({min}) be used to fix subcomponent width&#x2F;height?"></a>4. Does Flex compress subcomponents in HarmonyOS? Should constraintSize({min}) be used to fix subcomponent width&#x2F;height?</h4><p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.06.05.png"><br>As shown, the component has left&#x2F;right icons with adaptive middle content that truncates when overflowing. When the text is too long, the left Image component is compressed.  </p>
<p><strong>Solution</strong>: Flex may compress subcomponents. Use <code>constraintSize(&#123;min&#125;)</code> to set fixed dimensions for internal components.  </p>
<h4 id="5-How-to-set-a-minimum-height-for-the-bindSheet-modal-dialog-in-HarmonyOS"><a href="#5-How-to-set-a-minimum-height-for-the-bindSheet-modal-dialog-in-HarmonyOS" class="headerlink" title="5. How to set a minimum height for the bindSheet modal dialog in HarmonyOS?"></a>5. How to set a minimum height for the bindSheet modal dialog in HarmonyOS?</h4><p>Where can I check if the Build Mode is Debug, Release, or <code>&lt;None&gt;</code> during compilation for HAP and HSP?  </p>
<p><strong>Solution</strong>:<br>The bindSheet modal dialog supports setting height using <code>SheetSize | Length</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#sheetoptions">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sheet-transition-V5#sheetoptions</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/604-Daily-HarmonyOS-Next-Knowledge-Search-Component-Callback-Print-Object-Specific-Type-Uninitialized-Exception-Semi-Modal-Failure-to-Display-Linear-Gradient-Adaptation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/604-Daily-HarmonyOS-Next-Knowledge-Search-Component-Callback-Print-Object-Specific-Type-Uninitialized-Exception-Semi-Modal-Failure-to-Display-Linear-Gradient-Adaptation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Search Component Callback, Print Object Specific Type, Uninitialized Exception, Semi-Modal Failure to Display, Linear Gradient Adaptation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:56:19 / Modified: 11:02:31" itemprop="dateCreated datePublished" datetime="2025-06-25T10:56:19+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Daily-HarmonyOS-Next-Knowledge-Search-Component-Callback-Print-Object-Specific-Type-Uninitialized-Exception-Semi-Modal-Failure-to-Display-Linear-Gradient-Adaptation"><a href="#Daily-HarmonyOS-Next-Knowledge-Search-Component-Callback-Print-Object-Specific-Type-Uninitialized-Exception-Semi-Modal-Failure-to-Display-Linear-Gradient-Adaptation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Search Component Callback, Print Object Specific Type, Uninitialized Exception, Semi-Modal Failure to Display, Linear Gradient Adaptation"></a>[Daily HarmonyOS Next Knowledge] Search Component Callback, Print Object Specific Type, Uninitialized Exception, Semi-Modal Failure to Display, Linear Gradient Adaptation</h4><h6 id="1-Does-the-HarmonyOS-Search-component-have-a-callback-event-for-the-“×”-icon-What-is-it-specifically"><a href="#1-Does-the-HarmonyOS-Search-component-have-a-callback-event-for-the-“×”-icon-What-is-it-specifically" class="headerlink" title="1. Does the HarmonyOS Search component have a callback event for the “×” icon? What is it specifically?"></a>1. Does the HarmonyOS Search component have a callback event for the “×” icon? What is it specifically?</h6><p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.06.04.png"></p>
<p>You can use <code>onChange</code> to listen for when the content is empty.  </p>
<h6 id="2-How-to-print-the-specific-type-of-an-object-in-HarmonyOS"><a href="#2-How-to-print-the-specific-type-of-an-object-in-HarmonyOS" class="headerlink" title="2. How to print the specific type of an object in HarmonyOS?"></a>2. How to print the specific type of an object in HarmonyOS?</h6><p>As shown below, except for clear types like <code>string/number/undefined</code>, others are all <code>Object</code>? Or are there other keywords to print?  </p>
<pre><code class="language-typescript">let a = &#39;&#39;;
let b = null;
let c = undefined;
let d = 4;
// let e = &#123;&#125;;
let f = [];
console.log(a, typeof(a)); // string
console.log(b, typeof(b)); // null object
console.log(c, typeof(c)); // undefined undefined
console.log(&#39;&#39;, d, typeof(d)); // 4 number
console.log(&#39;&#39;, f, typeof(f)); // object
// Ideally, it should be Array

let g: User = new User();
console.log(&#39;&#39;, typeof(g)); // object
// Ideally, it should display as xx.User object

class User &#123;
  id: number = 0;
  name: string = &#39;&#39;;
&#125;
</code></pre>
<p>In TypeScript, you can use <code>Object.getPrototypeOf(a).constructor.name</code> to get the object type.  </p>
<h6 id="3-When-a-static-readonly-constant-is-declared-in-a-HarmonyOS-class-the-app-runs-with-an-error-that-the-class-is-not-initialized"><a href="#3-When-a-static-readonly-constant-is-declared-in-a-HarmonyOS-class-the-app-runs-with-an-error-that-the-class-is-not-initialized" class="headerlink" title="3. When a static readonly constant is declared in a HarmonyOS class, the app runs with an error that the class is not initialized."></a>3. When a static readonly constant is declared in a HarmonyOS class, the app runs with an error that the class is not initialized.</h6><pre><code class="language-typescript">// Example of declaring a static readonly constant in class RouterConstant:
export class RouterConstant &#123;
  // Home page
  public static readonly MAIN_NOTDATA_PAGE: string = &#39;RemoteViewPage&#39;;
&#125;
</code></pre>
<p>Error message during runtime: <code>AAFwkAppKit: [invalidDomain]Error message: RouterConstant is not initialized</code>  </p>
<p><strong>Solutions</strong>:  </p>
<ol>
<li>Dynamic loading failure exists in the app, and there is an error in the reference chain.<br>Verification method: Use a static <code>import</code> statement in the entry file to preload the file containing the uninitialized variable. If no error occurs after this operation, it indicates dynamic loading failure.  </li>
<li>Circular dependency in the code. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide_no-cycle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide_no-cycle-V5</a></li>
</ol>
<h6 id="4-When-switching-semi-modal-gears-in-HarmonyOS-the-UX-occasionally-fails-to-fully-display"><a href="#4-When-switching-semi-modal-gears-in-HarmonyOS-the-UX-occasionally-fails-to-fully-display" class="headerlink" title="4. When switching semi-modal gears in HarmonyOS, the UX occasionally fails to fully display."></a>4. When switching semi-modal gears in HarmonyOS, the UX occasionally fails to fully display.</h6><p>When switching a semi-modal from half-screen to full-screen, a gray area sometimes appears, causing the interface to fail to load completely.  </p>
<p>This issue can be resolved by using properties introduced in semi-modal API 12.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.06.04-1.png"></p>
<h6 id="5-HarmonyOS-linearGradient-is-not-adapted-to-mirrored-languages"><a href="#5-HarmonyOS-linearGradient-is-not-adapted-to-mirrored-languages" class="headerlink" title="5. HarmonyOS linearGradient is not adapted to mirrored languages."></a>5. HarmonyOS linearGradient is not adapted to mirrored languages.</h6><p>When switching to a mirrored language, the property <code>GradientDirection.Left</code> does not change to <code>GradientDirection.Right</code>.  </p>
<pre><code class="language-typescript">Row()
  .size(&#123; width: &#39;100%&#39;, height: 50 &#125;)
  .linearGradient(&#123;
    direction: GradientDirection.Left,
    colors: [[this.getColorString(this.bottomColorInfo.mainColor, 0), 0.0],
      [this.getColorString(this.bottomColorInfo.mainColor, 1), 1.0]]
  &#125;)
</code></pre>
<p><code>linearGradient</code> does not require adaptation; <code>Left</code> remains the <code>Left</code> direction (it is not <code>start</code>). The app can determine the display angle based on RTL (right-to-left) logic independently.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/603-Daily-HarmonyOS-Next-Knowledge-Ability-Communication-Subcomponents-Click-Dropdown-Component-Refresh-XML-Processing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/603-Daily-HarmonyOS-Next-Knowledge-Ability-Communication-Subcomponents-Click-Dropdown-Component-Refresh-XML-Processing/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Ability Communication, Subcomponents, Click Dropdown, Component Refresh, XML Processing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:54:45 / Modified: 10:55:17" itemprop="dateCreated datePublished" datetime="2025-06-25T10:54:45+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Ability-Communication-Subcomponents-Click-Dropdown-Component-Refresh-XML-Processing"><a href="#Daily-HarmonyOS-Next-Knowledge-Ability-Communication-Subcomponents-Click-Dropdown-Component-Refresh-XML-Processing" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Ability Communication, Subcomponents, Click Dropdown, Component Refresh, XML Processing"></a>[Daily HarmonyOS Next Knowledge] Ability Communication, Subcomponents, Click Dropdown, Component Refresh, XML Processing</h3><h4 id="1-How-does-communication-work-between-HarmonyOS-UIExtensionAbility-and-UIAbility"><a href="#1-How-does-communication-work-between-HarmonyOS-UIExtensionAbility-and-UIAbility" class="headerlink" title="1. How does communication work between HarmonyOS UIExtensionAbility and UIAbility?"></a>1. How does communication work between HarmonyOS UIExtensionAbility and UIAbility?</h4><p>After storing the windowStage object in AppStorage within UIAbility, when navigating from a UIAbility-loaded page to a page in extensionAbility, the value retrieved from AppStorage is undefined.  </p>
<p>For communication, refer to the document:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-uiextensioncontext-V5#uiextensioncontextstartability">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-uiextensioncontext-V5#uiextensioncontextstartability</a>  </p>
<h4 id="2-Does-HarmonyOS-List-allow-using-Builder-as-its-subcomponent"><a href="#2-Does-HarmonyOS-List-allow-using-Builder-as-its-subcomponent" class="headerlink" title="2. Does HarmonyOS List allow using @Builder as its subcomponent?"></a>2. Does HarmonyOS List allow using @Builder as its subcomponent?</h4><h4 id="3-Does-HarmonyOS-ArkTS-have-an-event-triggered-by-clicking-a-dropdown"><a href="#3-Does-HarmonyOS-ArkTS-have-an-event-triggered-by-clicking-a-dropdown" class="headerlink" title="3. Does HarmonyOS ArkTS have an event triggered by clicking a dropdown?"></a>3. Does HarmonyOS ArkTS have an event triggered by clicking a dropdown?</h4><p>The select event only triggers after an option is chosen. Since select options need to be dynamically queried via an interface, is there a way to implement this?  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct SelectExample &#123;
  @State text: string = &quot;TTTTT&quot;
  @State index: number = 2
  @State space: number = 8
  @State arrowPosition: ArrowPosition = ArrowPosition.END
  @State options: Array&lt;SelectOption&gt; = [
    &#123; value: &#39;aaa&#39;, icon: $r(&quot;app.media.app_icon&quot;) &#125;,
    &#123; value: &#39;bbb&#39;, icon: $r(&quot;app.media.app_icon&quot;) &#125;,
    &#123; value: &#39;ccc&#39;, icon: $r(&quot;app.media.app_icon&quot;) &#125;,
    &#123; value: &#39;ddd&#39;, icon: $r(&quot;app.media.app_icon&quot;) &#125;]
  @State options2: Array&lt;SelectOption&gt; = []
  @State selected: string = &#39;&#39;
  @State @Watch(&#39;onSelectedIndexUpData&#39;) selectedIndex: number = -1

  onSelectedIndexUpData() &#123;
    console.info(&#39;Data changed&#39;)
    if (this.selectedIndex &lt; 0) &#123;
      return
    &#125;
    this.options2.push(this.options[this.selectedIndex])
  &#125;

  build() &#123;
    Row() &#123;
      TextInput(&#123; placeholder: &#39;input ...&#39;, text: this.selected &#125;)
        .onChange((value: string) =&gt; &#123;
          this.selected = value
          let index = this.options.findIndex(item =&gt; item.value === value)
          this.selectedIndex = index &gt;= 0 ? index : -1
          console.info(index.toString())
        &#125;)
        .width(&#39;60%&#39;)
      Select(this.options2)//.selected(this.index)
        .value(this.text)
        .font(&#123; size: 16, weight: 500 &#125;)
        .onSelect((index: number, text?: string | undefined) =&gt; &#123;
          console.info(&#39;Select:&#39; + index)
          this.index = index;
          if (text) &#123;
            this.text = text;
          &#125;
          this.options2.pop()
          this.selectedIndex = -1
        &#125;)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-refresh-the-content-of-HarmonyOS-Builder"><a href="#4-How-to-refresh-the-content-of-HarmonyOS-Builder" class="headerlink" title="4. How to refresh the content of HarmonyOS @Builder?"></a>4. How to refresh the content of HarmonyOS @Builder?</h4><pre><code class="language-typescript">/**
 Online status area content for the title bar
 */
@ObservedV2
export class AIOTitleOnlineStatusItem &#123;
  builder: WrappedBuilder&lt;[AIOTitleOnlineStatusItem]&gt; | undefined = undefined;
  @Trace title: string = &#39;&#39;;
  @Trace subTitle: string = &#39;&#39;;
&#125;
/**
 Data entity for title bar updates
 */
@ObservedV2
export class AIOTitleModel &#123;
  @Trace title: string = &#39;&#39;;

  @Trace unreadCnt: number = 0;

  @Trace memberCnt: number = 0;

  @Trace onlineStatusItem: AIOTitleOnlineStatusItem | undefined = undefined;

&#125;

const TAG = &#39;TroopAIOTitleComponent&#39;;

@Extend(Text) function navigationTextStyle() &#123;
  .lineHeight(24)
  .fontColor(Color.Black)
  .fontSize(17)
  .textAlign(TextAlign.Start)
  .fontWeight(500)
  .textOverflow(&#123; overflow: TextOverflow.Ellipsis &#125;)
  .maxLines(1)
&#125;

@Builder
export function getOnlineStatusBuilder(statusItem: AIOTitleOnlineStatusItem) &#123;
  Row() &#123;
    Text(statusItem.title).lineHeight(16)
      .fontSize(12)
    Text(statusItem.subTitle).lineHeight(16)
      .fontSize(12)
  &#125;.width(&#39;100%&#39;)
  .align(Alignment.Start)
    .height(20)
&#125;

const model: AIOTitleModel = new AIOTitleModel();

@Entry
@Component
export struct Test &#123;
  aboutToAppear(): void &#123;
    model.title = &#39;Test Title&#39;;
    model.unreadCnt = 25;
  &#125;
  build() &#123;
    Column() &#123;
      TitleComponent()
      Button(&#39;Click to change title content&#39;).onClick(() =&gt; &#123;
        if (model.onlineStatusItem != undefined) &#123;
          model.onlineStatusItem.title += &#39;11&#39;;
          model.onlineStatusItem.builder = wrapBuilder(getOnlineStatusBuilder)
          // model.onlineStatusItem.builder = wrapBuilder(getOnlineStatusBuilder(&#123; paramsItem: this.onlineStatusItem &#125;))
        &#125; else &#123;
          model.onlineStatusItem = &#123;
            builder: wrapBuilder(getOnlineStatusBuilder),
            // builder: wrapBuilder(getOnlineStatusBuilder(&#123; paramsItem: this.onlineStatusItem &#125;)),
            title: &#39;Currently Online&#39;,
            subTitle: &#39;-test&#39;
          &#125;;
        &#125;
      &#125;).margin(&#123;
        top: 20
      &#125;)
    &#125;.alignItems(HorizontalAlign.Center)
  &#125;
&#125;

@Component
export struct TitleComponent &#123;

  build() &#123;
    // Content area
    Flex(&#123; wrap: FlexWrap.Wrap, justifyContent: FlexAlign.Start, alignContent: FlexAlign.SpaceEvenly &#125;) &#123;
      // Nickname
      Text() &#123;
        // Left ear
        Span(&quot;TitleComponent&quot;)
        // Title
        Span(model.title)
        // Right ear
        // Group member count
        Span(($&#123;model.memberCnt&#125;))

      &#125;.navigationTextStyle()
      .alignSelf(ItemAlign.Start)
      .width(&#39;60%&#39;)
      .backgroundColor(Color.Pink)
      // Online status
      if (model.onlineStatusItem != undefined) &#123;
        model.onlineStatusItem.builder?.builder(model.onlineStatusItem)
      &#125;
    &#125;.height(44)
    .alignSelf(ItemAlign.Center)
    .backgroundColor(Color.Yellow)
  &#125;
&#125;
</code></pre>
<p>@ObservedV2 must be initialized with <code>new</code> and cannot be directly assigned.  </p>
<h4 id="5-How-to-save-a-written-ohos-xml-as-a-file-in-HarmonyOS"><a href="#5-How-to-save-a-written-ohos-xml-as-a-file-in-HarmonyOS" class="headerlink" title="5. How to save a written ohos.xml as a file in HarmonyOS?"></a>5. How to save a written ohos.xml as a file in HarmonyOS?</h4><pre><code class="language-typescript">// 1. Construct an XmlSerializer object based on ArrayBuffer
let arrayBuffer: ArrayBuffer = new ArrayBuffer(2048); // Create a 2048-byte buffer
let thatSer: xml.XmlSerializer = new xml.XmlSerializer(arrayBuffer); // Construct XmlSerializer based on ArrayBuffer

thatSer.setDeclaration(); // Write the XML declaration
thatSer.startElement(&#39;bookstore&#39;); // Write the start tag of the element
thatSer.startElement(&#39;book&#39;); // Write the start tag of the nested element
thatSer.setAttributes(&#39;category&#39;, &#39;COOKING&#39;); // Write attributes and values
thatSer.startElement(&#39;title&#39;);
thatSer.setAttributes(&#39;lang&#39;, &#39;en&#39;);
thatSer.setText(&#39;Everyday&#39;); // Write the tag value
thatSer.endElement(); // Write the end tag
thatSer.startElement(&#39;author&#39;);
thatSer.setText(&#39;Giada&#39;);
thatSer.endElement();
thatSer.startElement(&#39;year&#39;);
thatSer.setText(&#39;2005&#39;);
thatSer.endElement();
thatSer.endElement();
thatSer.endElement();
</code></pre>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/xml-generation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/xml-generation-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/602-Daily-HarmonyOS-Next-Knowledge-Orientation-Control-Rotation-Lock-Font-Units-Background-Cleanup-Callback-Routing-Selection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/602-Daily-HarmonyOS-Next-Knowledge-Orientation-Control-Rotation-Lock-Font-Units-Background-Cleanup-Callback-Routing-Selection/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Orientation Control, Rotation Lock, Font Units, Background Cleanup Callback, Routing Selection</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:51:48 / Modified: 10:52:02" itemprop="dateCreated datePublished" datetime="2025-06-25T10:51:48+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Orientation-Control-Rotation-Lock-Font-Units-Background-Cleanup-Callback-Routing-Selection"><a href="#Daily-HarmonyOS-Next-Knowledge-Orientation-Control-Rotation-Lock-Font-Units-Background-Cleanup-Callback-Routing-Selection" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Orientation Control, Rotation Lock, Font Units, Background Cleanup Callback, Routing Selection"></a>[Daily HarmonyOS Next Knowledge] Orientation Control, Rotation Lock, Font Units, Background Cleanup Callback, Routing Selection</h3><h4 id="1-When-HarmonyOS-orientation-is-set-to-auto-rotation-the-PAD-screen-can-rotate-automatically-How-to-set-the-orientation-to-unspecified-for-phone-sized-screens"><a href="#1-When-HarmonyOS-orientation-is-set-to-auto-rotation-the-PAD-screen-can-rotate-automatically-How-to-set-the-orientation-to-unspecified-for-phone-sized-screens" class="headerlink" title="1. When HarmonyOS orientation is set to auto_rotation, the PAD screen can rotate automatically. How to set the orientation to unspecified for phone-sized screens?"></a>1. When HarmonyOS orientation is set to auto_rotation, the PAD screen can rotate automatically. How to set the orientation to unspecified for phone-sized screens?</h4><p>Directly use: <code>window.getLastWindow(getContext(this), (err, win) =&gt; &#123; win.setPreferredOrientation(window.Orientation.UNSPECIFIED) &#125;)</code>  </p>
<h4 id="2-How-to-make-the-“orientation-sensor”-and-the-“rotation-lock”-in-the-control-center-both-affect-screen-rotation-in-HarmonyOS"><a href="#2-How-to-make-the-“orientation-sensor”-and-the-“rotation-lock”-in-the-control-center-both-affect-screen-rotation-in-HarmonyOS" class="headerlink" title="2. How to make the “orientation sensor” and the “rotation lock” in the control center both affect screen rotation in HarmonyOS?"></a>2. How to make the “orientation sensor” and the “rotation lock” in the control center both affect screen rotation in HarmonyOS?</h4><p>When listening to orientation changes via the orientation sensor, the screen rotates regardless of the rotation lock setting in the control center. Setting <code>windowC.setPreferredOrientation(window.Orientation.AUTO_ROTATION_RESTRICTED)</code> on the Index page is ineffective.  </p>
<p><strong>Expected behavior</strong>: When rotation lock is enabled, the orientation sensor should not be listened to, preventing automatic screen rotation. When rotation lock is disabled, the sensor should detect orientation changes, allowing automatic rotation.  </p>
<p>Solution: Listen or cancel listening based on whether the user has enabled rotation lock.<br>Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-settings-V5#ZH-CN_TOPIC_0000001893210469__general">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-settings-V5#ZH-CN_TOPIC_0000001893210469__general</a>  </p>
<h4 id="3-In-HarmonyOS-page-fonts-use-vp-units-How-to-prevent-them-from-changing-with-the-system-display-size"><a href="#3-In-HarmonyOS-page-fonts-use-vp-units-How-to-prevent-them-from-changing-with-the-system-display-size" class="headerlink" title="3. In HarmonyOS, page fonts use vp units. How to prevent them from changing with the system display size?"></a>3. In HarmonyOS, page fonts use vp units. How to prevent them from changing with the system display size?</h4><p>Convert all font sizes to vp units to fix physical pixel values.  </p>
<h4 id="4-When-an-app-is-cleared-from-the-background-in-HarmonyOS-if-stopServiceExtensionAbility-is-not-called-will-the-ServiceExtensionAbility-connection-persist-or-be-destroyed-automatically"><a href="#4-When-an-app-is-cleared-from-the-background-in-HarmonyOS-if-stopServiceExtensionAbility-is-not-called-will-the-ServiceExtensionAbility-connection-persist-or-be-destroyed-automatically" class="headerlink" title="4. When an app is cleared from the background in HarmonyOS, if stopServiceExtensionAbility is not called, will the ServiceExtensionAbility connection persist or be destroyed automatically?"></a>4. When an app is cleared from the background in HarmonyOS, if stopServiceExtensionAbility is not called, will the ServiceExtensionAbility connection persist or be destroyed automatically?</h4><p>In the onDestroy method of UIAbility, stopServiceExtensionAbility is called asynchronously. If the app is cleared from the background and reopened immediately, the stopServiceExtensionAbility method may not have completed, affecting business logic. Will ServiceExtensionAbility stop automatically if not manually stopped?  </p>
<ul>
<li>Since stopServiceExtensionAbility is asynchronous, it may still be executing after the app is cleared. Thus, reopening the app may find ServiceExtensionAbility still running.  </li>
<li>ServiceExtensionAbility only stops when stopServiceExtensionAbility completes execution.</li>
</ul>
<p><strong>Conclusion</strong>: If stopServiceExtensionAbility is called asynchronously in onDestroy and the app is quickly reopened after being cleared, ServiceExtensionAbility may not stop immediately.  </p>
<h4 id="5-How-to-use-HarmonyOS-Navigation-and-router"><a href="#5-How-to-use-HarmonyOS-Navigation-and-router" class="headerlink" title="5. How to use HarmonyOS Navigation and router?"></a>5. How to use HarmonyOS Navigation and router?</h4><ol>
<li>If using Navigation exclusively, can we reduce the number of pages?  </li>
<li>Are there issues with an app having only one page?  </li>
<li>Does Navigation not support page jumps?</li>
</ol>
<h5 id="1-Current-version"><a href="#1-Current-version" class="headerlink" title="1. Current version:"></a>1. Current version:</h5><p>（1）<strong>Cross-module page navigation</strong>:  </p>
<ul>
<li>For jumps between Hap and Hsp, use router for simpler routing. Declare in the page.json file and jump via URL to decouple modules.  </li>
<li>For jumps between Hap and Har, use router + named routing, but this requires dynamically importing pages, increasing module coupling. Complex apps should note that Navigation has the same dynamic import capability and issues, though dynamic imports can optimize first-load speed.</li>
</ul>
<p>（2）<strong>Intra-module page navigation</strong>:  </p>
<ul>
<li>Navigation, essentially component-level routing, suits intra-module jumps due to its complex component dependency management. It also offers better transition effects. Use Navigation for intra-module jumps in the current version.</li>
</ul>
<h5 id="2-Evolution-plan"><a href="#2-Evolution-plan" class="headerlink" title="2. Evolution plan:"></a>2. Evolution plan:</h5><p>Navigation will enhance cross-module navigation to address router limitations. Router with @Entry struggles with:<br>（1）<strong>Passing non-serializable parameters</strong>: Router (C++-stored data) has type restrictions; Navigation uses a unified frontend routing table with developer-defined state management.<br>（2）<strong>Complex animation interactions</strong>: Pages are independent, making shared element animations difficult. Navigation supports component-level routing for nested modal popups.<br>（3）<strong>Modal interactions</strong>: Semi-modal popups require component-level routing within the modal, not page routing.<br>（4）<strong>Flexible loading and destruction</strong>: @Entry generates self-executing code, limiting developer control over page lifecycle.<br>（5）<strong>Adaptive multi-column layout</strong>: Automatically switches to multi-column display on large windows.  </p>
<p><strong>Recommendation</strong>: Use Navigation for its advantages and consistent experience.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/601-Daily-HarmonyOS-Next-Knowledge-Webpage-Bottom-Obstruction-System-Popup-Selection-Box-Floating-Window-Rounded-Corners-Window-Creation-Failure-Disable-Maximization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/601-Daily-HarmonyOS-Next-Knowledge-Webpage-Bottom-Obstruction-System-Popup-Selection-Box-Floating-Window-Rounded-Corners-Window-Creation-Failure-Disable-Maximization/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Webpage Bottom Obstruction, System Popup Selection Box, Floating Window Rounded Corners, Window Creation Failure, Disable Maximization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:50:37 / Modified: 10:50:56" itemprop="dateCreated datePublished" datetime="2025-06-25T10:50:37+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Webpage-Bottom-Obstruction-System-Popup-Selection-Box-Floating-Window-Rounded-Corners-Window-Creation-Failure-Disable-Maximization"><a href="#Daily-HarmonyOS-Next-Knowledge-Webpage-Bottom-Obstruction-System-Popup-Selection-Box-Floating-Window-Rounded-Corners-Window-Creation-Failure-Disable-Maximization" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Webpage Bottom Obstruction, System Popup Selection Box, Floating Window Rounded Corners, Window Creation Failure, Disable Maximization"></a>[Daily HarmonyOS Next Knowledge] Webpage Bottom Obstruction, System Popup Selection Box, Floating Window Rounded Corners, Window Creation Failure, Disable Maximization</h3><h4 id="1-When-accessing-an-H5-page-via-HarmonyOS-webview-the-bottom-is-covered"><a href="#1-When-accessing-an-H5-page-via-HarmonyOS-webview-the-bottom-is-covered" class="headerlink" title="1. When accessing an H5 page via HarmonyOS webview, the bottom is covered?"></a>1. When accessing an H5 page via HarmonyOS webview, the bottom is covered?</h4><p>You can use immersive layout and call the setSpecificSystemBarEnabled() interface to set the specific display&#x2F;hide status of the status bar and navigation bar. In this scenario, set them to hidden.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-develop-apply-immersive-effects-V5#section202484117114</a>  </p>
<h4 id="2-Does-HarmonyOS-have-a-system-popup-list-selection-box-If-so-how-to-reference-it"><a href="#2-Does-HarmonyOS-have-a-system-popup-list-selection-box-If-so-how-to-reference-it" class="headerlink" title="2. Does HarmonyOS have a system popup list selection box? If so, how to reference it?"></a>2. Does HarmonyOS have a system popup list selection box? If so, how to reference it?</h4><p>For the list selection box ActionSheet.show, refer to the document:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-action-sheet-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-action-sheet-V5</a>  </p>
<h4 id="3-How-to-handle-rounded-corners-for-HarmonyOS-floating-windows"><a href="#3-How-to-handle-rounded-corners-for-HarmonyOS-floating-windows" class="headerlink" title="3. How to handle rounded corners for HarmonyOS floating windows?"></a>3. How to handle rounded corners for HarmonyOS floating windows?</h4><p>Currently, the outermost UI component in setUIContent has rounded corners, but there are white background right angles around it. How to fully implement rounded corners for the floating window?  </p>
<p>Set the window background color to full transparency in the setUIContent callback:<br>FloatWindowUtil.sub_windowClass?.setWindowBackgroundColor(‘#00000000’);<br>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowbackgroundcolor9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowbackgroundcolor9</a>  </p>
<p><code>setWindowBackgroundColor(color: string): void</code><br>Sets the window background color. In the Stage model, this interface must be used after loadContent() or setUIContent() is called and takes effect.  </p>
<h4 id="4-HarmonyOS-window-creation-fails-with-return-code-1300002"><a href="#4-HarmonyOS-window-creation-fails-with-return-code-1300002" class="headerlink" title="4. HarmonyOS window creation fails with return code 1300002?"></a>4. HarmonyOS window creation fails with return code 1300002?</h4><p>Window creation fails with error code 1300002 in a scenario requiring a floating window.  </p>
<p>For setting application sub-windows:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5#%E8%AE%BE%E7%BD%AE%E5%BA%94%E7%94%A8%E5%AD%90%E7%AA%97%E5%8F%A3">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5#%E8%AE%BE%E7%BD%AE%E5%BA%94%E7%94%A8%E5%AD%90%E7%AA%97%E5%8F%A3</a><br>Developers can create application sub-windows (such as popups) as needed and set their properties.  </p>
<ol>
<li>Create an application sub-window.<br>Use the createSubWindow interface to create an application sub-window.  </li>
<li>Set sub-window properties.<br>After successful creation, change the sub-window’s size, position, background color, brightness, etc.  </li>
<li>Load and display the sub-window content.<br>Use setUIContent and showWindow to load and display the sub-window content.  </li>
<li>Destroy the sub-window.<br>Use the destroyWindow interface to destroy unnecessary sub-windows based on business logic.</li>
</ol>
<p>Example code for creating a sub-window in onWindowStageCreate:  </p>
<pre><code class="language-typescript">import &#123; UIAbility &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; window &#125; from &#39;@kit.ArkUI&#39;;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;;


let windowStage_: window.WindowStage | null = null;
let sub_windowClass: window.Window | null = null;


export default class EntryAbility extends UIAbility &#123;
  showSubWindow() &#123;
    // 1. Create an application sub-window.
    if (windowStage_ == null) &#123;
      console.error(&#39;Failed to create the subwindow. Cause: windowStage_ is null&#39;);
    &#125;
    else &#123;
      windowStage_.createSubWindow(&quot;mySubWindow&quot;, (err: BusinessError, data) =&gt; &#123;
        let errCode: number = err.code;
        if (errCode) &#123;
          console.error(&#39;Failed to create the subwindow. Cause: &#39; + JSON.stringify(err));
          return;
        &#125;
        sub_windowClass = data;
        console.info(&#39;Succeeded in creating the subwindow. Data: &#39; + JSON.stringify(data));
        // 2. After successful creation, set the sub-window position, size, and properties.
        sub_windowClass.moveWindowTo(300, 300, (err: BusinessError) =&gt; &#123;
          let errCode: number = err.code;
          if (errCode) &#123;
            console.error(&#39;Failed to move the window. Cause:&#39; + JSON.stringify(err));
            return;
          &#125;
          console.info(&#39;Succeeded in moving the window.&#39;);
        &#125;);
        sub_windowClass.resize(500, 500, (err: BusinessError) =&gt; &#123;
          let errCode: number = err.code;
          if (errCode) &#123;
            console.error(&#39;Failed to change the window size. Cause:&#39; + JSON.stringify(err));
            return;
          &#125;
          console.info(&#39;Succeeded in changing the window size.&#39;);
        &#125;);
        // 3. Load the target page for the sub-window.
        sub_windowClass.setUIContent(&quot;pages/page3&quot;, (err: BusinessError) =&gt; &#123;
          let errCode: number = err.code;
          if (errCode) &#123;
            console.error(&#39;Failed to load the content. Cause:&#39; + JSON.stringify(err));
            return;
          &#125;
          console.info(&#39;Succeeded in loading the content.&#39;);
          // 3. Show the sub-window.
          (sub_windowClass as window.Window).showWindow((err: BusinessError) =&gt; &#123;
            let errCode: number = err.code;
            if (errCode) &#123;
              console.error(&#39;Failed to show the window. Cause: &#39; + JSON.stringify(err));
              return;
            &#125;
            console.info(&#39;Succeeded in showing the window.&#39;);
          &#125;);
        &#125;);
      &#125;)
    &#125;
  &#125;


  destroySubWindow() &#123;
    // 4. Destroy the sub-window when no longer needed.
    (sub_windowClass as window.Window).destroyWindow((err: BusinessError) =&gt; &#123;
      let errCode: number = err.code;
      if (errCode) &#123;
        console.error(&#39;Failed to destroy the window. Cause: &#39; + JSON.stringify(err));
        return;
      &#125;
      console.info(&#39;Succeeded in destroying the window.&#39;);
    &#125;);
  &#125;


  onWindowStageCreate(windowStage: window.WindowStage) &#123;
    windowStage_ = windowStage;
    // Create sub-windows at appropriate times (e.g., button clicks), not necessarily in onWindowStageCreate.
    this.showSubWindow();
  &#125;


  onWindowStageDestroy() &#123;
    // Destroy sub-windows at appropriate times (e.g., close button clicks).
    this.destroySubWindow();
  &#125;
&#125;;
</code></pre>
<h4 id="5-How-to-disable-maximization-on-HarmonyOS-2in1-devices"><a href="#5-How-to-disable-maximization-on-HarmonyOS-2in1-devices" class="headerlink" title="5. How to disable maximization on HarmonyOS 2in1 devices?"></a>5. How to disable maximization on HarmonyOS 2in1 devices?</h4><p>Disabling maximization on 2in1 devices via module.json5 configuration (<code>supportWindowMode</code>) will prevent full-screen mode on phones. How to dynamically configure this via code? Relevant APIs are currently unavailable.<br><code>&quot;supportWindowMode&quot;: [&quot;split&quot;, &quot;floating&quot;]</code>  </p>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-device-info-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-device-info-V5</a>  </p>
<p><code>import deviceInfo from &#39;@ohos.deviceInfo&#39;;</code><br><code>deviceInfo.deviceType === &#39;tablet&#39; || deviceInfo.deviceType === &#39;2in1&#39;;</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/531-Daily-HarmonyOS-Next-Knowledge-Page-level-Popup-Return-to-Desktop-API-Cumbersome-Portrait-Landscape-Switching-Status-Bar-Color-Setting-Screen-Always-On-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/531-Daily-HarmonyOS-Next-Knowledge-Page-level-Popup-Return-to-Desktop-API-Cumbersome-Portrait-Landscape-Switching-Status-Bar-Color-Setting-Screen-Always-On-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Page-level Popup, Return to Desktop API, Cumbersome Portrait-Landscape Switching, Status Bar Color Setting, Screen Always-On Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:26:18 / Modified: 10:26:36" itemprop="dateCreated datePublished" datetime="2025-06-25T10:26:18+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Page-level-Popup-Return-to-Desktop-API-Cumbersome-Portrait-Landscape-Switching-Status-Bar-Color-Setting-Screen-Always-On-Setting"><a href="#Daily-HarmonyOS-Next-Knowledge-Page-level-Popup-Return-to-Desktop-API-Cumbersome-Portrait-Landscape-Switching-Status-Bar-Color-Setting-Screen-Always-On-Setting" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Page-level Popup, Return to Desktop API, Cumbersome Portrait-Landscape Switching, Status Bar Color Setting, Screen Always-On Setting"></a>[Daily HarmonyOS Next Knowledge] Page-level Popup, Return to Desktop API, Cumbersome Portrait-Landscape Switching, Status Bar Color Setting, Screen Always-On Setting</h3><h4 id="1-Can-HarmonyOS-uiContext-getPromptAction-openCustomDialog-implement-a-page-level-popup"><a href="#1-Can-HarmonyOS-uiContext-getPromptAction-openCustomDialog-implement-a-page-level-popup" class="headerlink" title="1. Can HarmonyOS uiContext.getPromptAction().openCustomDialog implement a page-level popup?"></a>1. Can HarmonyOS uiContext.getPromptAction().openCustomDialog implement a page-level popup?</h4><p>Can uiContext.getPromptAction().openCustomDialog achieve a page-level popup? Or is there a way to open a page-level popup within a page? The scenario is opening a popup on Page A, where clicking a button in the popup opens a new Page B. When returning from Page B to Page A, the opened popup should still be present.  </p>
<p>Currently, no component directly supports this effect. You can simulate the popup by referencing the following demo:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">textValue</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">visible</span>: <span class="title class_">Visibility</span> = <span class="title class_">Visibility</span>.<span class="property">None</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hit me!&quot;</span>)</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">visible</span> == <span class="title class_">Visibility</span>.<span class="property">Visible</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">visible</span> = <span class="title class_">Visibility</span>.<span class="property">None</span></span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">visible</span> = <span class="title class_">Visibility</span>.<span class="property">Visible</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="number">0x777474</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="number">0x000000</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#36D&quot;</span>)</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">GridRow</span>(&#123;</span><br><span class="line">          <span class="attr">columns</span>:&#123;<span class="attr">xs</span>:<span class="number">1</span> ,<span class="attr">sm</span>: <span class="number">4</span>, <span class="attr">md</span>: <span class="number">8</span>, <span class="attr">lg</span>: <span class="number">12</span>&#125;,</span><br><span class="line">          <span class="attr">breakpoints</span>: &#123; <span class="attr">value</span>: [<span class="string">&quot;400vp&quot;</span>, <span class="string">&quot;600vp&quot;</span>, <span class="string">&quot;800vp&quot;</span>],</span><br><span class="line">            <span class="attr">reference</span>: <span class="title class_">BreakpointsReference</span>.<span class="property">WindowSize</span> &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="title class_">GridCol</span>(&#123;</span><br><span class="line">            <span class="attr">span</span>:&#123;<span class="attr">xs</span>:<span class="number">1</span> ,<span class="attr">sm</span>: <span class="number">2</span>, <span class="attr">md</span>: <span class="number">4</span>, <span class="attr">lg</span>: <span class="number">8</span>&#125;,</span><br><span class="line">            <span class="attr">offset</span>:&#123;<span class="attr">xs</span>:<span class="number">0</span> ,<span class="attr">sm</span>: <span class="number">1</span>, <span class="attr">md</span>: <span class="number">2</span>, <span class="attr">lg</span>: <span class="number">2</span>&#125;</span><br><span class="line">          &#125;)</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. HarmonyOS return to desktop API?  </span></span><br><span class="line"><span class="string">The return-to-desktop API hangs the app in the background.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You can try obtaining the main window object through windowStage and then minimizing the main window with minimize.  </span></span><br><span class="line"><span class="string">Reference document: https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-window  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Is implementing portrait-landscape switching in HarmonyOS too cumbersome?  </span></span><br><span class="line"><span class="string">The current experience is poor, requiring the rotation function to be written in the onPageShow of each page (Entry).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You can currently customize a utility class to uniformly manage the display mode of all pages. Refer to this demo:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Index7gongju.ets  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Stack</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.util.Stack&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; uiObserver, <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; common, <span class="title class_">UIAbility</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPage</span> &#123;</span><br><span class="line">  <span class="attr">id</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">name</span>?: <span class="title class_">ResourceStr</span></span><br><span class="line">  <span class="attr">path</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">type</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">lifeCricle</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> pageTracking &#123;</span><br><span class="line">  <span class="attr">page</span>: <span class="title class_">MyPage</span></span><br><span class="line">  <span class="comment">// onshown timestamp</span></span><br><span class="line">  <span class="attr">starttime</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="comment">//停留时间</span></span><br><span class="line">  <span class="attr">statetime</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Window identifier (string)</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">mypagestack</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Stack</span>&lt;pageTracking&gt;&gt; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">windows</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="variable language_">window</span>.<span class="property">Window</span>&gt; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">pageOrientations</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="variable language_">window</span>.<span class="property">Orientation</span>&gt; = &#123;</span><br><span class="line">  <span class="string">&quot;Index&quot;</span>: <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">UNSPECIFIED</span>,</span><br><span class="line">  <span class="string">&quot;Logon&quot;</span>: <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span>,</span><br><span class="line">  <span class="string">&quot;Detail&quot;</span>: <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE</span>,</span><br><span class="line">  <span class="string">&quot;Page2&quot;</span>: <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">PORTRAIT_INVERTED</span>,</span><br><span class="line">  <span class="string">&quot;Page3&quot;</span>: <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">LANDSCAPE_INVERTED</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Require mainWindow parameters</span></span><br><span class="line"><span class="comment">// The page path of each window must be a chain; default to main window if not passed</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">observerAll</span>(<span class="params"><span class="attr">curWindow</span>: <span class="variable language_">window</span>.<span class="title class_">Window</span>, <span class="attr">windowName</span> ?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="comment">// Determine if empty (mainWindow)</span></span><br><span class="line">  <span class="keyword">if</span> (!windowName || windowName == <span class="string">&#x27;mainWindow&#x27;</span>) &#123;</span><br><span class="line">    windowName = <span class="string">&#x27;mainWindow&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> name = windowName <span class="keyword">as</span> <span class="built_in">string</span></span><br><span class="line">  windows[name] = curWindow;</span><br><span class="line">  <span class="keyword">let</span> myObserve = curWindow.<span class="title function_">getUIContext</span>().<span class="title function_">getUIObserver</span>();</span><br><span class="line">  mypagestack[name] = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;pageTracking&gt;();</span><br><span class="line">  <span class="comment">// Listen for navDestination component lifecycle changes</span></span><br><span class="line">  myObserve.<span class="title function_">on</span>(<span class="string">&#x27;navDestinationUpdate&#x27;</span>, <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Map to mypage</span></span><br><span class="line">    <span class="keyword">let</span> mypage = <span class="keyword">new</span> <span class="title class_">MyPage</span></span><br><span class="line">    mypage.<span class="property">id</span> = info.<span class="property">navDestinationId</span></span><br><span class="line">    mypage.<span class="property">name</span> = info.<span class="property">name</span></span><br><span class="line">    mypage.<span class="property">path</span> = info.<span class="property">param</span>?.<span class="title function_">toString</span>()</span><br><span class="line">    mypage.<span class="property">type</span> = <span class="string">&#x27;NavDestination&#x27;</span></span><br><span class="line">    mypage.<span class="property">lifeCricle</span> = info.<span class="property">state</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="title function_">tracking</span>(mypage, name)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// Listen for page lifecycle changes</span></span><br><span class="line">  myObserve.<span class="title function_">on</span>(<span class="string">&#x27;routerPageUpdate&#x27;</span>, <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// enterPageLoaded = true;</span></span><br><span class="line">    <span class="keyword">let</span> mypage = <span class="keyword">new</span> <span class="title class_">MyPage</span></span><br><span class="line">    mypage.<span class="property">id</span> = <span class="title class_">String</span>(info.<span class="property">index</span>)</span><br><span class="line">    <span class="comment">// The name field of router additionally returns the path; take the last name</span></span><br><span class="line">    mypage.<span class="property">name</span> = info.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">pop</span>()</span><br><span class="line">    mypage.<span class="property">path</span> = info.<span class="property">path</span></span><br><span class="line">    mypage.<span class="property">type</span> = <span class="string">&#x27;page&#x27;</span></span><br><span class="line">    mypage.<span class="property">lifeCricle</span> = <span class="title function_">navState</span>(info.<span class="property">state</span>)</span><br><span class="line">    <span class="title function_">tracking</span>(mypage, name)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use mypage for tracking and store lifecycle information</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tracking</span>(<span class="params"><span class="attr">mypage</span>: <span class="title class_">MyPage</span>, <span class="attr">windowname</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">stack</span>: <span class="title class_">Stack</span>&lt;pageTracking&gt; = mypagestack[windowname]</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">pagetracking</span>: pageTracking;</span><br><span class="line">  <span class="comment">// 1. Store page information (abouttoappear) and print all current paths and stack order</span></span><br><span class="line">  <span class="comment">// If the stack has one element and it is a navd page, only modify the page type</span></span><br><span class="line">  <span class="comment">// Do not push to stack; instead, change the type of the top stack element to navPage</span></span><br><span class="line">  <span class="keyword">if</span> (mypage.<span class="property">lifeCricle</span> == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> firstPage = stack.<span class="title function_">peek</span>()</span><br><span class="line">    <span class="keyword">if</span> (stack.<span class="property">length</span> == <span class="number">1</span> &amp;&amp; firstPage.<span class="property">page</span>.<span class="property">type</span> == <span class="string">&#x27;NavDestination&#x27;</span>) &#123;</span><br><span class="line">      firstPage = stack.<span class="title function_">pop</span>()</span><br><span class="line">      firstPage.<span class="property">page</span>.<span class="property">type</span> = <span class="string">&#x27;navPage&#x27;</span></span><br><span class="line">      stack.<span class="title function_">push</span>(firstPage)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      stack.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">page</span>: mypage,</span><br><span class="line">        <span class="attr">starttime</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">        <span class="attr">statetime</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">let</span> pagesPath = windowname + <span class="string">&#x27;:&#x27;</span></span><br><span class="line">      stack.<span class="title function_">forEach</span>(<span class="function">(<span class="params">pagetraking</span>) =&gt;</span> &#123;</span><br><span class="line">        pagesPath += <span class="string">&#x27;-&gt;&#x27;</span> + pagetraking.<span class="property">page</span>.<span class="property">name</span>?.<span class="title function_">toString</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(pagesPath)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2. Update page information: onshown (refresh start time)</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (mypage.<span class="property">lifeCricle</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    pagetracking = stack.<span class="title function_">pop</span>();</span><br><span class="line">    pagetracking.<span class="property">starttime</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    stack.<span class="title function_">push</span>(pagetracking)</span><br><span class="line">    <span class="comment">// Change orientation:</span></span><br><span class="line">    <span class="keyword">let</span> defaultOrientation = <span class="variable language_">window</span>.<span class="property">Orientation</span>.<span class="property">PORTRAIT</span></span><br><span class="line">    <span class="keyword">if</span> (!!pageOrientations[mypage.<span class="property">name</span> <span class="keyword">as</span> <span class="built_in">string</span>]) &#123;</span><br><span class="line">      defaultOrientation = pageOrientations[mypage.<span class="property">name</span> <span class="keyword">as</span> <span class="built_in">string</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    windows[windowname].<span class="title function_">setPreferredOrientation</span>(defaultOrientation)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 3. Update page information: onhidden (accumulate and refresh stay time)</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (mypage.<span class="property">lifeCricle</span> == <span class="number">1</span>) &#123;</span><br><span class="line">    pagetracking = stack.<span class="title function_">pop</span>();</span><br><span class="line">    pagetracking.<span class="property">statetime</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>() - pagetracking.<span class="property">starttime</span></span><br><span class="line">    stack.<span class="title function_">push</span>(pagetracking)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 4. Output page information (abouttodistoappear) and delete page information</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (mypage.<span class="property">lifeCricle</span> == <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pagesPath = windowname + <span class="string">&#x27;:&#x27;</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// let time=Date.now()-stack.pop().starttime</span></span><br><span class="line">    <span class="comment">// console.log(&#x27;zyf&#x27;+)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Display current page stay time</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stack.forEach((pagetraking) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   // let time=Date.now()-pagetraking.starttime</span></span><br><span class="line">    <span class="comment">//   // console.log(&#x27;zyf&#x27;+pagetraking.page.name?.toString() + time + &#x27;ms&#x27;);</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;zyf&#x27;+pagetraking.page.name?.toString() + pagetraking.statetime + &#x27;ms&#x27;);</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="keyword">let</span> popPage = stack.<span class="title function_">pop</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(popPage.<span class="property">page</span>.<span class="property">name</span>?.<span class="title function_">toString</span>() + <span class="string">&#x27; statetime &#x27;</span> + popPage.<span class="property">statetime</span> + <span class="string">&#x27;ms&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;popPage ：&#x27;</span> + popPage.<span class="property">page</span>.<span class="property">name</span>)</span><br><span class="line">    stack.<span class="title function_">forEach</span>(<span class="function">(<span class="params">pagetraking</span>) =&gt;</span> &#123;</span><br><span class="line">      pagesPath += <span class="string">&#x27;-&gt;&#x27;</span> + pagetraking.<span class="property">page</span>.<span class="property">name</span>?.<span class="title function_">toString</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(pagesPath);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Unify NavDestination and page lifecycles</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">navState</span>(<span class="params"><span class="attr">state</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (state == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Then reference this utility class in Ability and call it in onWindowStageCreate. Refer to the following code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; observerAll &#125; <span class="keyword">from</span> <span class="string">&#x27;../pages/Index7gongju&#x27;</span>;</span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Main window is created, set main page for this ability</span></span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;%&#123;public&#125;s&#x27;</span>, <span class="string">&#x27;Ability onWindowStageCreate&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Logon&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">  hilog.<span class="title function_">error</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err) ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> mainWindow = windowStage.<span class="title function_">getMainWindowSync</span>()</span><br><span class="line">  <span class="title function_">observerAll</span>(mainWindow)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error, <span class="string">&quot;    zzzzzz&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Succeeded in loading the content.&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to set the status bar to a background image or color in HarmonyOS?  </span></span><br><span class="line"><span class="string">Refer to the following code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct  chuangkou&#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Button</span>(<span class="string">&quot;窗口设置&quot;</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="title class_">SystemBarProperties</span>: <span class="variable language_">window</span>.<span class="property">SystemBarProperties</span> = &#123;</span><br><span class="line">          <span class="attr">statusBarColor</span>: <span class="string">&#x27;#ffee5610&#x27;</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> promise = <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="title function_">getContext</span>());</span><br><span class="line">          promise.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            windowClass = data;</span><br><span class="line">            windowClass.<span class="title function_">setWindowSystemBarProperties</span>(<span class="title class_">SystemBarProperties</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in obtaining the top window. Data: &#x27;</span>+ <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">          &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the top window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the top window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to set the screen to always on and set the screen brightness to maximum in HarmonyOS?  </span></span><br><span class="line"><span class="string">Refer to the following code to set the screen to always on via a click event, or configure it through other methods based on business needs:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">window</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> common <span class="keyword">from</span> <span class="string">&#x27;@ohos.app.ability.common&#x27;</span>;</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WebPage</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> context = <span class="title function_">getContext</span>(<span class="variable language_">this</span>) <span class="keyword">as</span> common.<span class="property">UIAbilityContext</span>;</span><br><span class="line">  <span class="attr">controller</span>: webView.<span class="property">WebviewController</span> = <span class="keyword">new</span> webView.<span class="title class_">WebviewController</span>();</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;keeplight&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 1. Get the app&#x27;s main window.</span></span><br><span class="line">          <span class="keyword">let</span> <span class="attr">windowClass</span>: <span class="variable language_">window</span>.<span class="property">Window</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">getLastWindow</span>(<span class="variable language_">this</span>.<span class="property">context</span>, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span>, data</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>;</span><br><span class="line">              <span class="keyword">if</span> (errCode) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the top window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              windowClass = data;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in obtaining the top window. Data: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">              <span class="keyword">try</span> &#123;</span><br><span class="line">                windowClass.<span class="title function_">setWindowKeepScreenOn</span>(<span class="literal">true</span>, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="keyword">const</span> <span class="attr">errCode</span>: <span class="built_in">number</span> = err.<span class="property">code</span>;</span><br><span class="line">                  <span class="keyword">if</span> (errCode) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to set the screen to be always on. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Succeeded in setting the screen to be always on.&#x27;</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to set the screen to be always on. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception));</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to obtain the top window. Cause: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(exception));</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Console output when clicking the button:  </span></span><br></pre></td></tr></table></figure>
<p>05-15 14:48:04.050   12178-12178  A03d00&#x2F;JSAPP                   com.examp…lication  I     Succeeded in obtaining the top window. Data: {}<br>05-15 14:48:04.059   12178-12178  A03d00&#x2F;JSAPP                   com.examp…lication  I     Succeeded in setting the screen to be always on.<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/530-Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/530-Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Navigation Area Height, Screenshot/Screen Recording Monitoring, Device Auto-Rotation, Notch Screen Adaptation, Passing Page Parameters to Sub-Windows</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:22:13 / Modified: 10:24:00" itemprop="dateCreated datePublished" datetime="2025-06-25T10:22:13+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows"><a href="#Daily-HarmonyOS-Next-Knowledge-Navigation-Area-Height-Screenshot-Screen-Recording-Monitoring-Device-Auto-Rotation-Notch-Screen-Adaptation-Passing-Page-Parameters-to-Sub-Windows" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Navigation Area Height, Screenshot&#x2F;Screen Recording Monitoring, Device Auto-Rotation, Notch Screen Adaptation, Passing Page Parameters to Sub-Windows"></a>[Daily HarmonyOS Next Knowledge] Navigation Area Height, Screenshot&#x2F;Screen Recording Monitoring, Device Auto-Rotation, Notch Screen Adaptation, Passing Page Parameters to Sub-Windows</h3><h4 id="1-Is-the-height-of-the-navigation-area-accurate-in-HarmonyOS-windowClass-getWindowAvoidArea"><a href="#1-Is-the-height-of-the-navigation-area-accurate-in-HarmonyOS-windowClass-getWindowAvoidArea" class="headerlink" title="1. Is the height of the navigation area accurate in HarmonyOS windowClass.getWindowAvoidArea()?"></a>1. Is the height of the navigation area accurate in HarmonyOS windowClass.getWindowAvoidArea()?</h4><p>The following code is used to obtain the position information of the bottom navigation area, and the obtained height value is 91. Is this accurate? What is the logic behind this fixed value?  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const systemArea = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_NAVIGATION_INDICATOR); </span><br><span class="line">console.log(&quot;systemArea&gt;&gt;&gt;&gt;&gt;&gt;&quot;, JSON.stringify(systemArea)) </span><br><span class="line">```  </span><br><span class="line">Print result:  </span><br></pre></td></tr></table></figure>
<p>systemArea&gt;&gt;&gt;&gt;&gt;&gt; {“visible”:true,”leftRect”:{“left”:0,”top”:0,”width”:0,”height”:0},”topRect”:{“left”:0,”top”:0,”width”:0,”height”:0},”rightRect”:{“left”:0,”top”:0,”width”:0,”height”:0},”bottomRect”:{“left”:409,”top”:2629,”width”:442,”height”:91}}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Currently, the obtained 91 is in pixels (px). The navigation bar itself has a height of 6vp and a margin of 10vp from the screen edge.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2. How to distinguish between screenshot and screen recording events in HarmonyOS?  </span><br><span class="line">When using `@ohos.window.on(‘screenshot’)` to monitor screenshot events, both user screenshots and the end of screen recording trigger this event. How to distinguish between screenshot and screen recording events?  </span><br><span class="line"></span><br><span class="line">For monitoring changes in screen capture, casting, and screen recording status, refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-display-V5#ZH-CN_TOPIC_0000001930756769__displayoncapturestatuschange12  </span><br><span class="line"></span><br><span class="line">`on(type: &#x27;captureStatusChange&#x27;, callback: Callback&lt;boolean&gt;): void`  </span><br><span class="line">Monitors changes in screen capture, casting, and screen recording status.  </span><br><span class="line"></span><br><span class="line">**Parameters:**  </span><br><span class="line"></span><br><span class="line">| Parameter Name | Type                | Required | Description                                                                 |</span><br><span class="line">| :------------- | :------------------ | :------- | :-------------------------------------------------------------------------- |</span><br><span class="line">| type           | string              | Yes      | The event to monitor, fixed as &#x27;captureStatusChange&#x27; indicating changes in device screenshot, casting, or screen recording status. |</span><br><span class="line">| callback       | Callback&lt;boolean&gt;   | Yes      | The callback function. Indicates changes in device screenshot, casting, or screen recording status. `true` means starting screenshot/casting/screen recording, `false` means ending it. |  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. Does HarmonyOS support device auto-rotation?  </span><br><span class="line">Does HarmonyOS support automatic screen rotation? How to monitor device rotation to control portrait/landscape display of pages.  </span><br><span class="line"></span><br><span class="line">**App configuration for auto-rotation:**  </span><br><span class="line">1. In the module configuration file `module.json5`, set &quot;orientation&quot;: &quot;auto_rotation_restricted&quot; for EntryAbility.  </span><br><span class="line">2. Enable the device&#x27;s auto-rotation function.  </span><br><span class="line"></span><br><span class="line">**Implementation in the app:**  </span><br><span class="line">- Obtain the window instance via `window.getLastWindow`.  </span><br><span class="line">- Set the window display orientation using `setPreferredOrientation`.  </span><br><span class="line">- Monitor screen status changes via `display.on`.  </span><br><span class="line">- After setting a specific orientation, use the sensor mode to determine the screen direction.  </span><br><span class="line"></span><br><span class="line">**Demo:**  </span><br><span class="line">```typescript</span><br><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line">import display from &#x27;@ohos.display&#x27;;</span><br><span class="line"></span><br><span class="line">const TAG = &#x27;foo&#x27;</span><br><span class="line">const ORIENTATION: Array&lt;string&gt; = [&#x27;Vertical&#x27;, &#x27;Horizontal&#x27;, &#x27;Reverse Vertical&#x27;, &#x27;Reverse Horizontal&#x27;]</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line"></span><br><span class="line">  @State rotation: number = 0</span><br><span class="line">  @State message: string = ORIENTATION[this.rotation]</span><br><span class="line">  @Watch(&#x27;setWindowLayOut&#x27;) @State isLandscape: boolean = false; // Landscape status</span><br><span class="line"></span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line"></span><br><span class="line">    this.setOrientation(1)</span><br><span class="line">    let callback = async () =&gt; &#123;</span><br><span class="line">      let d = await display.getDefaultDisplaySync()</span><br><span class="line">      this.rotation = d.rotation</span><br><span class="line">      this.message = ORIENTATION[this.rotation]</span><br><span class="line">      console.info(TAG, JSON.stringify(d))</span><br><span class="line">    &#125;</span><br><span class="line">    try &#123;</span><br><span class="line">      display.on(&quot;change&quot;, callback); // Monitor screen status changes</span><br><span class="line">    &#125; catch (exception) &#123;</span><br><span class="line">      console.error(TAG, &#x27;Failed to register callback. Code: &#x27; + JSON.stringify(exception));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setOrientation(type: number) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      window.getLastWindow(getContext(this), (err, data) =&gt; &#123; // Get window instance</span><br><span class="line">        if (err.code) &#123;</span><br><span class="line">          console.error(TAG, &#x27;Failed to obtain the top window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        let windowClass = data;</span><br><span class="line">        console.info(TAG, &#x27;Succeeded in obtaining the top window. Data: &#x27; + JSON.stringify(data));</span><br><span class="line"></span><br><span class="line">        let orientation: number;</span><br><span class="line">        if (type === 1) &#123;</span><br><span class="line">          orientation = window.Orientation.AUTO_ROTATION; // Set window orientation to sensor auto-rotation mode</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          orientation = window.Orientation.UNSPECIFIED; // Set window orientation to sensor lock</span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">          windowClass.setPreferredOrientation(orientation, (err) =&gt; &#123;</span><br><span class="line">            if (err.code) &#123;</span><br><span class="line">              console.error(TAG, &#x27;Failed to set window orientation. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(TAG, &#x27;Succeeded in setting window orientation.&#x27;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; catch (exception) &#123;</span><br><span class="line">          console.error(TAG, &#x27;Failed to set window orientation. Cause: &#x27; + JSON.stringify(exception));</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; catch (exception) &#123;</span><br><span class="line">      console.error(TAG, &#x27;Failed to obtain the top window. Cause: &#x27; + JSON.stringify(exception));</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setWindowLayOut() &#123;</span><br><span class="line">    // Manually change device orientation (set full-screen mode, first force landscape, then add sensor mode)</span><br><span class="line">    window.getLastWindow(getContext(this)).then((windowClass) =&gt; &#123;</span><br><span class="line">      if (this.isLandscape) &#123;</span><br><span class="line">        console.log(&#x27;Set landscape orientation&#x27;)</span><br><span class="line">        windowClass.setPreferredOrientation(window.Orientation.AUTO_ROTATION_LANDSCAPE);</span><br><span class="line"></span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        console.log(&#x27;Set portrait orientation&#x27;)</span><br><span class="line">        windowClass.setPreferredOrientation(window.Orientation.AUTO_ROTATION_PORTRAIT);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(`$&#123;this.rotation&#125;`).fontSize(25)</span><br><span class="line">        Text(`$&#123;this.message&#125;`).fontSize(25)</span><br><span class="line">        Button(&#x27;Full Screen&#x27;)</span><br><span class="line">          .width(140)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            this.isLandscape = !this.isLandscape; // Toggle landscape</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&quot;100%&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. How to adapt to notch screens in HarmonyOS?  </span><br><span class="line">Adapt to notch screens by using the `setWindowLayoutFullScreen` interface to set the window to full-screen layout. Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5#%E4%BD%93%E9%AA%8C%E7%AA%97%E5%8F%A3%E6%B2%89%E6%B5%B8%E5%BC%8F%E8%83%BD%E5%8A%9B  </span><br><span class="line"></span><br><span class="line">In scenarios like watching videos or playing games, users often want to hide unnecessary system windows (status bar, navigation bar) for an immersive experience. This can be achieved using window immersive capabilities (applicable to the app&#x27;s main window):  </span><br><span class="line">- Starting from API version 10, immersive windows are configured as full-screen by default, with layout controlled by the component module. The status bar and navigation bar have transparent backgrounds and black text.  </span><br><span class="line">- The `setWindowLayoutFullScreen` interface controls immersive full-screen layout (ignoring status/navigation bars when `true`) or non-immersive full-screen layout (avoiding status/navigation bars when `false`).  </span><br><span class="line"></span><br><span class="line">**Development steps:**  </span><br><span class="line">1. **Obtain the app&#x27;s main window** via `getMainWindow`.  </span><br><span class="line">2. **Implement immersive effects** in two ways:  </span><br><span class="line">   - **Method 1**: When the main window is full-screen, call `setWindowSystemBarEnable` to hide the navigation and status bars.  </span><br><span class="line">   - **Method 2**: Call `setWindowLayoutFullScreen` to set the main window to full-screen layout, then use `setWindowSystemBarProperties` to configure transparency, background/text colors, and highlight icons for the system bars to match the main window.  </span><br><span class="line">3. **Load and display immersive window content** via `loadContent`.  </span><br><span class="line"></span><br><span class="line">**Code example:**  </span><br><span class="line">```typescript</span><br><span class="line">import &#123; UIAbility &#125; from &#x27;@kit.AbilityKit&#x27;;</span><br><span class="line">import &#123; window &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default class EntryAbility extends UIAbility &#123;</span><br><span class="line">  onWindowStageCreate(windowStage: window.WindowStage) &#123;</span><br><span class="line">    // 1. Obtain the app&#x27;s main window.</span><br><span class="line">    let windowClass: window.Window | null = null;</span><br><span class="line">    windowStage.getMainWindow((err: BusinessError, data) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to obtain the main window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      windowClass = data;</span><br><span class="line">      console.info(&#x27;Succeeded in obtaining the main window. Data: &#x27; + JSON.stringify(data));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      // 2. Implement immersive effects. Method 1: Hide system bars.</span><br><span class="line">      let names: Array&lt;&#x27;status&#x27; | &#x27;navigation&#x27;&gt; = [];</span><br><span class="line">      windowClass.setWindowSystemBarEnable(names)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.info(&#x27;Succeeded in hiding the system bar.&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;Failed to hide the system bar. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">        &#125;);</span><br><span class="line">      // 2. Implement immersive effects. Method 2: Set full-screen layout and configure system bar properties.</span><br><span class="line">      let isLayoutFullScreen = true;</span><br><span class="line">      windowClass.setWindowLayoutFullScreen(isLayoutFullScreen)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.info(&#x27;Succeeded in setting full-screen layout.&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;Failed to set full-screen layout. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">        &#125;);</span><br><span class="line">      let sysBarProps: window.SystemBarProperties = &#123;</span><br><span class="line">        statusBarColor: &#x27;#ff00ff&#x27;,</span><br><span class="line">        navigationBarColor: &#x27;#00ff00&#x27;,</span><br><span class="line">        // The following two properties are supported from API Version 8</span><br><span class="line">        statusBarContentColor: &#x27;#ffffff&#x27;,</span><br><span class="line">        navigationBarContentColor: &#x27;#ffffff&#x27;</span><br><span class="line">      &#125;;</span><br><span class="line">      windowClass.setWindowSystemBarProperties(sysBarProps)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.info(&#x27;Succeeded in setting system bar properties.&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;Failed to set system bar properties. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    // 3. Load the target page for the immersive window.</span><br><span class="line">    windowStage.loadContent(&quot;pages/page2&quot;, (err: BusinessError) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to load content. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.info(&#x27;Succeeded in loading content.&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. How to pass page parameters to a sub-window when creating it in HarmonyOS?  </span><br><span class="line">**Reference demo:**  </span><br><span class="line"></span><br><span class="line">**EntryAbility.ets**  </span><br><span class="line">```typescript</span><br><span class="line">onWindowStageCreate(windowStage: window.WindowStage): void &#123;</span><br><span class="line">  // Main window is created, set main page for this ability</span><br><span class="line">  hilog.info(0x0000, &#x27;testTag&#x27;, &#x27;%&#123;public&#125;s&#x27;, &#x27;Ability onWindowStageCreate&#x27;);</span><br><span class="line"></span><br><span class="line">  windowStage.loadContent(&#x27;pages/Index&#x27;, (err) =&gt; &#123;</span><br><span class="line">  if (err.code) &#123;</span><br><span class="line">  hilog.error(0x0000, &#x27;testTag&#x27;, &#x27;Failed to load the content. Cause: %&#123;public&#125;s&#x27;, JSON.stringify(err) ?? &#x27;&#x27;);</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line">hilog.info(0x0000, &#x27;testTag&#x27;, &#x27;Succeeded in loading the content.&#x27;);</span><br><span class="line">// Pass windowStage to the Index page</span><br><span class="line">AppStorage.setOrCreate(&#x27;windowStage&#x27;, windowStage);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**Index.ets**  </span><br><span class="line">```typescript</span><br><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@ohos.base&#x27;;</span><br><span class="line">let windowStage_: window.WindowStage | undefined = undefined;</span><br><span class="line">let sub_windowClass: window.Window | undefined = undefined;</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State message: string = &#x27;Hello World&#x27;;</span><br><span class="line"></span><br><span class="line">  storage: LocalStorage = new LocalStorage();</span><br><span class="line"></span><br><span class="line">  private CreateSubWindow()&#123;</span><br><span class="line">    // Get windowStage</span><br><span class="line">    windowStage_ = AppStorage.get(&#x27;windowStage&#x27;);</span><br><span class="line">    // 1. Create an app sub-window.</span><br><span class="line">    if (windowStage_ == null) &#123;</span><br><span class="line">      console.error(&#x27;Failed to create subwindow. Cause: windowStage_ is null&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      windowStage_.createSubWindow(&quot;mySubWindow&quot;, (err: BusinessError, data) =&gt; &#123;</span><br><span class="line">        let errCode: number = err.code;</span><br><span class="line">        if (errCode) &#123;</span><br><span class="line">          console.error(&#x27;Failed to create subwindow. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        sub_windowClass = data;</span><br><span class="line">        console.info(&#x27;Succeeded in creating subwindow. Data: &#x27; + JSON.stringify(data));</span><br><span class="line">        // 2. Set sub-window position, size, and properties.</span><br><span class="line">        sub_windowClass.moveWindowTo(300, 300, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to move window. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in moving window.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        sub_windowClass.resize(500, 500, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to resize window. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in resizing window.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        // 3. Load the target page for the sub-window and pass parameters via LocalStorage.</span><br><span class="line">        this.storage.setOrCreate(&#x27;storageSimpleProp&#x27;, 121);</span><br><span class="line">        sub_windowClass.loadContent(&quot;pages/SubWindow&quot;, this.storage, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to load content. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in loading content.&#x27;);</span><br><span class="line">          // 4. Show the sub-window.</span><br><span class="line">          (sub_windowClass as window.Window).showWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">            let errCode: number = err.code;</span><br><span class="line">            if (errCode) &#123;</span><br><span class="line">              console.error(&#x27;Failed to show window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;Succeeded in showing window.&#x27;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  private destroySubWindow()&#123;</span><br><span class="line">    // 5. Destroy the sub-window when no longer needed.</span><br><span class="line">    (sub_windowClass as window.Window).destroyWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to destroy window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.info(&#x27;Succeeded in destroying window.&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .fontSize(50)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">        Button()&#123;</span><br><span class="line">          Text(&#x27;CreateSubWindow&#x27;)</span><br><span class="line">            .fontSize(24)</span><br><span class="line">            .fontWeight(FontWeight.Normal)</span><br><span class="line">        &#125;.width(220).height(68)</span><br><span class="line">        .margin(&#123;left:10, top:60&#125;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.CreateSubWindow()</span><br><span class="line">        &#125;)</span><br><span class="line">        Button()&#123;</span><br><span class="line">          Text(&#x27;destroySubWindow&#x27;)</span><br><span class="line">            .fontSize(24)</span><br><span class="line">            .fontWeight(FontWeight.Normal)</span><br><span class="line">        &#125;.width(220).height(68)</span><br><span class="line">        .margin(&#123;left:10, top:60&#125;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.destroySubWindow()</span><br><span class="line">        &#125;)</span><br><span class="line">        Image($rawfile(&#x27;[library2].mmm.png&#x27;))</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/529-Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/529-Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Free Multi-Window Size Acquisition, Custom Keyboard Screen Recording Prevention, Foldable Screen Width, Tablet Free Multi-Window Activation, App Floating Button</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 10:19:56 / Modified: 12:24:56" itemprop="dateCreated datePublished" datetime="2025-06-25T10:19:56+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button"><a href="#Daily-HarmonyOS-Next-Knowledge-Free-Multi-Window-Size-Acquisition-Custom-Keyboard-Screen-Recording-Prevention-Foldable-Screen-Width-Tablet-Free-Multi-Window-Activation-App-Floating-Button" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Free Multi-Window Size Acquisition, Custom Keyboard Screen Recording Prevention, Foldable Screen Width, Tablet Free Multi-Window Activation, App Floating Button"></a>[Daily HarmonyOS Next Knowledge] Free Multi-Window Size Acquisition, Custom Keyboard Screen Recording Prevention, Foldable Screen Width, Tablet Free Multi-Window Activation, App Floating Button</h3><h4 id="1-Does-HarmonyOS-have-a-method-to-monitor-and-obtain-the-size-width-and-height-of-a-window-in-free-multi-window-mode"><a href="#1-Does-HarmonyOS-have-a-method-to-monitor-and-obtain-the-size-width-and-height-of-a-window-in-free-multi-window-mode" class="headerlink" title="1. Does HarmonyOS have a method to monitor and obtain the size (width and height) of a window in free multi-window mode?"></a>1. Does HarmonyOS have a method to monitor and obtain the size (width and height) of a window in free multi-window mode?</h4><p>For monitoring application window changes, refer to:<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-window.md#onwindowstatuschange11">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/js-apis-window.md#onwindowstatuschange11</a>  </p>
<h4 id="2-What-is-the-solution-for-preventing-screen-recording-of-custom-keyboards-in-HarmonyOS"><a href="#2-What-is-the-solution-for-preventing-screen-recording-of-custom-keyboards-in-HarmonyOS" class="headerlink" title="2. What is the solution for preventing screen recording of custom keyboards in HarmonyOS?"></a>2. What is the solution for preventing screen recording of custom keyboards in HarmonyOS?</h4><p>In project development, a custom keyboard is used. There is a security compliance requirement to ensure that the custom keyboard (or specified UI components) are not recorded in screen recordings. Is there a provided solution to prevent screen recording?  </p>
<p>Currently, there is no component-level screen recording prevention solution. Screen recording and screenshot prevention can only be achieved by setting privacy mode for specific windows. This configuration applies to the current window. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowprivacymode9</a>  </p>
<p><code>setWindowPrivacyMode(isPrivacyMode: boolean, callback: AsyncCallback&lt;void&gt;): void</code><br>Sets whether the window is in privacy mode, using an asynchronous callback. The content of a window set to privacy mode cannot be screenshotted or screen recorded. This API is suitable for scenarios requiring screenshot&#x2F;screen recording prohibition.  </p>
<table>
<thead>
<tr>
<th align="left">Parameter Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">isPrivacyMode</td>
<td align="left">boolean</td>
<td align="left">Yes</td>
<td align="left">Whether the window is in privacy mode. <code>true</code> enables the mode; <code>false</code> disables it.</td>
</tr>
<tr>
<td align="left">callback</td>
<td align="left">AsyncCallback<void></td>
<td align="left">Yes</td>
<td align="left">The callback function.</td>
</tr>
</tbody></table>
<h4 id="3-Why-is-the-screen-width-incorrectly-obtained-when-the-foldable-screen-in-HarmonyOS-switches-between-folded-and-unfolded-states"><a href="#3-Why-is-the-screen-width-incorrectly-obtained-when-the-foldable-screen-in-HarmonyOS-switches-between-folded-and-unfolded-states" class="headerlink" title="3. Why is the screen width incorrectly obtained when the foldable screen in HarmonyOS switches between folded and unfolded states?"></a>3. Why is the screen width incorrectly obtained when the foldable screen in HarmonyOS switches between folded and unfolded states?</h4><p>The <code>foldstatus</code> monitoring notifies changes in the fold state. When the fold&#x2F;unfold process exceeds the half-fold threshold, <code>foldstatus</code> updates. After <code>foldstatus</code> changes, the screen must be notified to update its width&#x2F;height and foldable display mode.  </p>
<ul>
<li><code>display.on(foldstatus)</code> notifies <code>foldstatus</code> changes, but querying <code>foldstatus</code> in real-time during fold&#x2F;unfold (before the process completes) returns old values, which are meaningless.  </li>
<li><code>display.on(change)</code> monitors screen property changes, triggered after property updates, but does not distinguish the cause of the change.  </li>
<li><code>display.on(folddisplaymode)</code> monitors screen display mode changes, notifying after the fold&#x2F;unfold display mode switches. Reading screen properties in this callback returns data after the fold&#x2F;unfold process completes.</li>
</ul>
<h4 id="4-How-to-enable-free-multi-window-mode-on-MatePad-devices-in-HarmonyOS"><a href="#4-How-to-enable-free-multi-window-mode-on-MatePad-devices-in-HarmonyOS" class="headerlink" title="4. How to enable free multi-window mode on MatePad devices in HarmonyOS?"></a>4. How to enable free multi-window mode on MatePad devices in HarmonyOS?</h4><p>Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E8%87%AA%E7%94%B1%E7%AA%97%E5%8F%A3">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E8%87%AA%E7%94%B1%E7%AA%97%E5%8F%A3</a>  </p>
<p>The free window feature is disabled by default. Enable it as follows:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># Extract the window configuration file and modify &lt;decor enable=&quot;false&quot;&gt;&lt;/decor&gt; to &lt;decor enable=&quot;true&quot;&gt;&lt;/decor&gt;</span><br><span class="line">hdc file recv system/etc/window/resources/window_manager_config.xml ./</span><br><span class="line"># Remount the root directory in read-write mode and update the configuration file</span><br><span class="line">hdc shell mount -o rw,remount /</span><br><span class="line">hdc file send window_manager_config.xml system/etc/window/resources/window_manager_config.xml</span><br><span class="line"># Reboot the device for the configuration to take effect</span><br><span class="line">hdc shell reboot</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">When the screen is small and finger operations are inconvenient, connect an external mouse:  </span><br><span class="line">- Hover the mouse over the app&#x27;s top to summon the window toolbar.  </span><br><span class="line">- Click the zoom button (second from the left) in the window toolbar to display the app in free window mode.  </span><br><span class="line">- In free window mode, drag the window&#x27;s border or corner to resize it, triggering app display refresh.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. What is the development solution for floating buttons within a HarmonyOS app?  </span><br><span class="line">The app requires a floating control (without requesting system floating window permissions) that remains visible across internal pages, enabling quick navigation to specified locations when clicked. Competitors implement this by adding floating controls to each page in `baseActivity`, creating the illusion of cross-page floating. HarmonyOS documentation on floating windows does not seem suitable for this scenario. Implementing cross-page floating via per-page controls is complex due to the lack of inheritance between pages. How to best achieve this in HarmonyOS?  </span><br><span class="line"></span><br><span class="line">Use `createSubWindow` to set a sub-window for floating control functionality. Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5#%E8%AE%BE%E7%BD%AE%E5%BA%94%E7%94%A8%E5%AD%90%E7%AA%97%E5%8F%A3  </span><br><span class="line"></span><br><span class="line">1. **Create an app sub-window**: Use the `createSubWindow` API.  </span><br><span class="line">2. **Set sub-window properties**: Modify size, position, background color, brightness, etc.  </span><br><span class="line">3. **Load and display sub-window content**: Use `setUIContent` and `showWindow`.  </span><br><span class="line">4. **Destroy the sub-window**: Use `destroyWindow` when no longer needed.  </span><br><span class="line"></span><br><span class="line">**Example code for creating a sub-window in `onWindowStageCreate`**:  </span><br><span class="line">```typescript</span><br><span class="line">import &#123; UIAbility &#125; from &#x27;@kit.AbilityKit&#x27;;</span><br><span class="line">import &#123; window &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let windowStage_: window.WindowStage | null = null;</span><br><span class="line">let sub_windowClass: window.Window | null = null;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default class EntryAbility extends UIAbility &#123;</span><br><span class="line">  showSubWindow() &#123;</span><br><span class="line">    // 1. Create an app sub-window.</span><br><span class="line">    if (windowStage_ == null) &#123;</span><br><span class="line">      console.error(&#x27;Failed to create the subwindow. Cause: windowStage_ is null&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      windowStage_.createSubWindow(&quot;mySubWindow&quot;, (err: BusinessError, data) =&gt; &#123;</span><br><span class="line">        let errCode: number = err.code;</span><br><span class="line">        if (errCode) &#123;</span><br><span class="line">          console.error(&#x27;Failed to create the subwindow. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        sub_windowClass = data;</span><br><span class="line">        console.info(&#x27;Succeeded in creating the subwindow. Data: &#x27; + JSON.stringify(data));</span><br><span class="line">        // 2. Set the sub-window&#x27;s position, size, and properties after creation.</span><br><span class="line">        sub_windowClass.moveWindowTo(300, 300, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to move the window. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in moving the window.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        sub_windowClass.resize(500, 500, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to change the window size. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in changing the window size.&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">        // 3. Load the target page for the sub-window.</span><br><span class="line">        sub_windowClass.setUIContent(&quot;pages/page3&quot;, (err: BusinessError) =&gt; &#123;</span><br><span class="line">          let errCode: number = err.code;</span><br><span class="line">          if (errCode) &#123;</span><br><span class="line">            console.error(&#x27;Failed to load the content. Cause:&#x27; + JSON.stringify(err));</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          console.info(&#x27;Succeeded in loading the content.&#x27;);</span><br><span class="line">          // 3. Show the sub-window.</span><br><span class="line">          (sub_windowClass as window.Window).showWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">            let errCode: number = err.code;</span><br><span class="line">            if (errCode) &#123;</span><br><span class="line">              console.error(&#x27;Failed to show the window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;Succeeded in showing the window.&#x27;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  destroySubWindow() &#123;</span><br><span class="line">    // 4. Destroy the sub-window when no longer needed.</span><br><span class="line">    (sub_windowClass as window.Window).destroyWindow((err: BusinessError) =&gt; &#123;</span><br><span class="line">      let errCode: number = err.code;</span><br><span class="line">      if (errCode) &#123;</span><br><span class="line">        console.error(&#x27;Failed to destroy the window. Cause: &#x27; + JSON.stringify(err));</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.info(&#x27;Succeeded in destroying the window.&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  onWindowStageCreate(windowStage: window.WindowStage) &#123;</span><br><span class="line">    windowStage_ = windowStage;</span><br><span class="line">    // Create the sub-window at an appropriate time (e.g., on a main window button click).</span><br><span class="line">    // Calling it in onWindowStageCreate is for demonstration only.</span><br><span class="line">    this.showSubWindow();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  onWindowStageDestroy() &#123;</span><br><span class="line">    // Destroy the sub-window at an appropriate time (e.g., on a sub-window close button click).</span><br><span class="line">    // Calling it in onWindowStageDestroy is for demonstration only.</span><br><span class="line">    this.destroySubWindow();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/23/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/25/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">305</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
