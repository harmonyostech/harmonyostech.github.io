<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/20/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/20/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/302%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/302%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Status Bar Font, Lifecycle, Custom Dialog Centering, Transparency, Tab Centering</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:09:37 / Modified: 20:12:20" itemprop="dateCreated datePublished" datetime="2025-06-26T20:09:37+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering"><a href="#【Daily-HarmonyOS-Next-Knowledge】Status-Bar-Font-Lifecycle-Custom-Dialog-Centering-Transparency-Tab-Centering" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Status Bar Font, Lifecycle, Custom Dialog Centering, Transparency, Tab Centering"></a>【Daily HarmonyOS Next Knowledge】Status Bar Font, Lifecycle, Custom Dialog Centering, Transparency, Tab Centering</h3><h4 id="1-How-to-control-the-status-bar-font-color-in-a-single-HarmonyOS-page"><a href="#1-How-to-control-the-status-bar-font-color-in-a-single-HarmonyOS-page" class="headerlink" title="1. How to control the status bar font color in a single HarmonyOS page?"></a>1. How to control the status bar font color in a single HarmonyOS page?</h4><p>The status bar font color can be modified by setting <code>statusBarContentColor</code>. Refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5</a>  </p>
<p>Reference code:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">import window from &#x27;@ohos.window&#x27;;</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State message: string = &#x27;Hello World&#x27;;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .align(Alignment.Center)</span><br><span class="line">          .fontSize(50)</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">          .fontColor(Color.White)</span><br><span class="line">        ColumnSplit().height(20)</span><br><span class="line">        Button() &#123;</span><br><span class="line">          Text(&quot;点我看效果&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        .width(100)</span><br><span class="line">        .height(50)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.message = &quot;我变了&quot;</span><br><span class="line">          window.getLastWindow(getContext(), (err, data) =&gt; &#123;</span><br><span class="line">            let win: window.Window;</span><br><span class="line">            if (err.code) &#123;</span><br><span class="line">              console.error(&quot;error code :&quot; + JSON.stringify(err.code))</span><br><span class="line">              return;</span><br><span class="line">            &#125;</span><br><span class="line">            try &#123;</span><br><span class="line">              win = data;</span><br><span class="line">              // Set the window to full-screen mode</span><br><span class="line">              win.setWindowLayoutFullScreen(true);</span><br><span class="line">              // Set status bar properties</span><br><span class="line">              win.setWindowSystemBarProperties(&#123;</span><br><span class="line">                // Set status bar background color</span><br><span class="line">                statusBarColor: &#x27;#ffe30520&#x27;,</span><br><span class="line">                // Set status bar text color to white</span><br><span class="line">                statusBarContentColor: &#x27;#ffffffff&#x27;</span><br><span class="line">              &#125;)</span><br><span class="line">              console.info(&#x27;Status bar immersive window setup completed&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">            catch (expextion) &#123;</span><br><span class="line">              console.error(&quot;error cause :&quot; + JSON.stringify(expextion))</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        ColumnSplit().height(20)</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">    .backgroundColor(Color.Green)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. When do HarmonyOS lifecycle callbacks trigger?  </span><br><span class="line">When the app is swiped up to exit, which callback triggers first: `onPageHide` or `aboutToDisappear`?  </span><br><span class="line"></span><br><span class="line">In this scenario, only the `aboutToDisappear` callback triggers. For lifecycle characteristics, refer to:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/js-framework-lifecycle-V5  </span><br><span class="line"></span><br><span class="line">Application lifecycle functions can be defined in `app.js` as follows:  </span><br><span class="line"></span><br><span class="line">| Attribute     | Type         | Description       | Trigger Time                |  </span><br><span class="line">| :---------- | :--------- | :------------- | :---------------------- |  </span><br><span class="line">| onCreate    | () =&gt; void | App creation      | Called when the app is created.       |  </span><br><span class="line">| onShow6+    | () =&gt; void | App in foreground   | Triggered when the app is in the foreground. |  </span><br><span class="line">| onHide6+    | () =&gt; void | App in background   | Triggered when the app is in the background. |  </span><br><span class="line">| onDestroy   | () =&gt; void | App destruction     | Triggered when the app exits.      |  </span><br><span class="line"></span><br><span class="line">#### 3. How to display a custom HarmonyOS dialog in the center of the screen?  </span><br><span class="line">How to center a custom time picker dialog or user privacy agreement dialog.  </span><br><span class="line"></span><br><span class="line">Reference demo:  </span><br></pre></td></tr></table></figure>
<p>@CustomDialog<br>struct CustomDialogExample {<br>  controller?: CustomDialogController<br>  private selectDate: Date &#x3D; new Date()</p>
<p>  build() {<br>    Column() {<br>      DatePicker({<br>        start: new Date(‘2009-1-1’),<br>        end: new Date(‘2100-12-31’),<br>        selected: this.selectDate<br>      })<br>    }<br>  }<br>}</p>
<p>@Entry<br>@Component<br>struct Index {<br>  @State textValue: string &#x3D; ‘’<br>  @State inputValue: string &#x3D; ‘click me’<br>  dialogController: CustomDialogController | null &#x3D; new CustomDialogController({<br>    builder: CustomDialogExample(),<br>    openAnimation: {<br>      duration: 1200,<br>      curve: Curve.Friction,<br>      delay: 500,<br>      playMode: PlayMode.Alternate,<br>      onFinish: () &#x3D;&gt; {<br>        console.info(‘play end’)<br>      }<br>    },<br>    autoCancel: true,<br>    alignment: DialogAlignment.Center,<br>    gridCount: 4,<br>    customStyle: true,<br>    backgroundColor: 0xd9ffffff,<br>    cornerRadius: 10,<br>  })</p>
<p>  &#x2F;&#x2F; Set dialogController to null when the custom component is about to be destroyed<br>  aboutToDisappear() {<br>    this.dialogController &#x3D; null &#x2F;&#x2F; Set dialogController to null<br>  }</p>
<p>  build() {<br>    Column() {<br>      Button(this.inputValue)<br>        .onClick(() &#x3D;&gt; {<br>          if (this.dialogController !&#x3D; null) {<br>            this.dialogController.open()<br>          }<br>        }).backgroundColor(0x317aff)<br>    }.width(‘100%’).margin({ top: 5 })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 4. Does the HarmonyOS UI component provide an `setAlpha` attribute?  </span><br><span class="line">Transparency can be set using `opacity`. Refer to:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-opacity-V5  </span><br><span class="line"></span><br><span class="line">`opacity(value: number | Resource)`  </span><br><span class="line">Sets the opacity of the component.  </span><br><span class="line"></span><br><span class="line">**Parameters:**  </span><br><span class="line"></span><br><span class="line">| Parameter Name | Type                 | Required | Description                                                                                                                                                                                                 |  </span><br><span class="line">| :--------- | :----------------- | :--- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |  </span><br><span class="line">| value      | number \| Resource | Yes  | The opacity of the element, ranging from 0 to 1. 1 means opaque, 0 means fully transparent (hiding the component, but it still occupies layout space).&lt;br&gt;&lt;br&gt;Default value: 1&lt;br&gt;&lt;br&gt;**Note:**&lt;br&gt;&lt;br&gt;Child components inherit the parent&#x27;s opacity, which is multiplied by their own. For example, if the parent has opacity 0.1 and the child sets 0.8, the child&#x27;s actual opacity is 0.1 * 0.8 = 0.08. |  </span><br><span class="line"></span><br><span class="line">Example:  </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; xxx.ets<br>@Entry<br>@Component<br>struct OpacityExample {<br>  build() {<br>    Column({ space: 5 }) {<br>      Text(‘opacity(1)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(1).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0.7)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0.7).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0.4)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0.4).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0.1)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0.1).backgroundColor(0xAFEEEE)<br>      Text(‘opacity(0)’).fontSize(9).width(‘90%’).fontColor(0xCCCCCC)<br>      Text().width(‘90%’).height(50).opacity(0).backgroundColor(0xAFEEEE)<br>    }<br>    .width(‘100%’)<br>    .padding({ top: 5 })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![[【每日学点HarmonyOS Next知识】25.03.02.png]]  </span><br><span class="line"></span><br><span class="line">#### 5. Can HarmonyOS Tabs be aligned left/right instead of only centered?  </span><br><span class="line">Does the Tabs component support left/right alignment?  </span><br><span class="line"></span><br><span class="line">The Tabs component does not provide a left-aligned style. You can customize a left-aligned tabBar using Flex,联动索引值 with the Tabs component via `onClick` to achieve switching:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>struct Index {<br>  private tabsController: TabsController &#x3D; new TabsController()<br>  @State currentIndex: number &#x3D; 0;</p>
<p>  @Builder<br>  TabBarBuilder(title: string, targetIndex: number) {<br>    Text(title)<br>      .fontWeight(targetIndex &#x3D;&#x3D;&#x3D; this.currentIndex ? FontWeight.Bold : FontWeight.Normal)<br>      .margin({ left: 10, right: 10 })<br>      .onClick(() &#x3D;&gt; {<br>        this.tabsController.changeIndex(targetIndex)<br>      })<br>  }</p>
<p>  build() {<br>    Row() {<br>      Column() {</p>
<p>Flex({ direction: FlexDirection.Row }) {<br>        Flex({ direction: FlexDirection.RowReverse }) {<br>          this.TabBarBuilder(‘页签1’, 0)<br>          this.TabBarBuilder(‘页签2’, 1)<br>          this.TabBarBuilder(‘页签3’, 2)<br>        }</p>
<pre><code>    Tabs(&#123; barPosition: BarPosition.End, controller: this.tabsController &#125;) &#123;
      TabContent() &#123;
        Text(&quot;页签1页面&quot;)
      &#125;

      TabContent() &#123;
        Text(&quot;页签2页面&quot;)
      &#125;

      TabContent() &#123;
        Text(&quot;页签3页面&quot;)
      &#125;
    &#125;.onChange((index: number) =&gt; &#123;
      this.currentIndex = index;
    &#125;)
  &#125;
&#125;
</code></pre>
<p>  }<br>}<br>&#96;&#96;&#96;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/301%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/301%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Image Pixels, State Binding, Slider Value Listening, Gesture Issues, Object-Map Conversion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 20:08:37 / Modified: 20:09:03" itemprop="dateCreated datePublished" datetime="2025-06-26T20:08:37+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion"><a href="#【Daily-HarmonyOS-Next-Knowledge】Image-Pixels-State-Binding-Slider-Value-Listening-Gesture-Issues-Object-Map-Conversion" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Image Pixels, State Binding, Slider Value Listening, Gesture Issues, Object-Map Conversion"></a>【Daily HarmonyOS Next Knowledge】Image Pixels, State Binding, Slider Value Listening, Gesture Issues, Object-Map Conversion</h3><h4 id="1-How-to-create-an-ImageBitmap-with-empty-content-of-a-specified-size-in-HarmonyOS"><a href="#1-How-to-create-an-ImageBitmap-with-empty-content-of-a-specified-size-in-HarmonyOS" class="headerlink" title="1. How to create an ImageBitmap with empty content of a specified size in HarmonyOS?"></a>1. How to create an ImageBitmap with empty content of a specified size in HarmonyOS?</h4><p>Refer to the official ImageBitmap documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-components-canvas-imagebitmap-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-components-canvas-imagebitmap-V5</a></p>
<p>ImageBitmap(data: PixelMap, unit?: LengthMetricsUnit)</p>
<p>Create an ImageBitmap object from a PixelMap.</p>
<h4 id="2-Why-is-the-ObservedV2-decorator-ineffective-for-state-monitoring-of-models-returned-by-interfaces"><a href="#2-Why-is-the-ObservedV2-decorator-ineffective-for-state-monitoring-of-models-returned-by-interfaces" class="headerlink" title="2. Why is the ObservedV2 decorator ineffective for state monitoring of models returned by interfaces?"></a>2. Why is the ObservedV2 decorator ineffective for state monitoring of models returned by interfaces?</h4><p>The ObservedV2 decorator does not work for state monitoring of models returned by interfaces.</p>
<p>Objects obtained via JSON.parse are not instances created by the User constructor, so their data changes cannot be observed, preventing UI updates. You can use third-party libraries <code>reflect-metadata</code> and <code>class-transformer</code>. Refer to the following demo (similarly applicable to observedv2):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">//test.ets</span><br><span class="line">export let jsonString:Record&lt;string, ESObject&gt; = &#123;</span><br><span class="line">  &quot;data&quot; : [</span><br><span class="line">    &#123; &quot;number&quot; :1,</span><br><span class="line">      &quot;age&quot;: 20,</span><br><span class="line">      &quot;testA&quot;: &#123;</span><br><span class="line">        &quot;str&quot;: &quot;123&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;number&quot; :2,</span><br><span class="line">      &quot;age&quot;: 21,</span><br><span class="line">      &quot;testA&quot;: &#123;</span><br><span class="line">        &quot;str&quot;: &quot;456&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">import &#123; Type, plainToClass &#125; from &#x27;class-transformer&#x27;</span><br><span class="line">import &#x27;reflect-metadata&#x27;</span><br><span class="line">import &#123; jsonString &#125; from &#x27;./test&#x27;</span><br><span class="line">import &#123; TestA, Person, ViewA&#125; from &#x27;./ViewA&#x27;;</span><br><span class="line">class ResponseObj &#123;</span><br><span class="line">  @Type (() =&gt; Person) data: Person[] = [];</span><br><span class="line">&#125;</span><br><span class="line">@Entry @Component struct Index &#123;</span><br><span class="line">  @State list: Person[] = [];</span><br><span class="line">  @State message: string = &#x27;Click me&#x27;;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .fontSize(40)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            let responseObj : ResponseObj = plainToClass(ResponseObj, jsonString);</span><br><span class="line">            console.log(` $&#123;responseObj.data[0] instanceof Person&#125;`)</span><br><span class="line">            this.list = this.list.concat(responseObj.data); &#125;)</span><br><span class="line">        ForEach(this.list, (item : Person, index: number) =&gt; &#123;</span><br><span class="line">          ViewA(&#123;index:index, testA: item.testA&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125; .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125; &#125;</span><br><span class="line">ViewA.ets</span><br><span class="line">import &#123; Type &#125; from &#x27;class-transformer&#x27;</span><br><span class="line">@Observed export class TestA &#123;</span><br><span class="line">  public str : string</span><br><span class="line">  constructor(str: string) &#123; this.str = str; &#125;</span><br><span class="line">&#125;</span><br><span class="line">export class Person &#123;</span><br><span class="line">  name: string = &#x27;&#x27;</span><br><span class="line">  age: number = 1</span><br><span class="line">  @Type(()=&gt;TestA) testA: TestA = new TestA(&#x27;&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">@Component export struct ViewA &#123;</span><br><span class="line">  @ObjectLink testA: TestA</span><br><span class="line">  index: number = -1;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Row()&#123;</span><br><span class="line">      Button(`View A $&#123;this.testA.str&#125;`)</span><br><span class="line">        .onClick(() =&gt;&#123;</span><br><span class="line">          this.index += 1;</span><br><span class="line">          this.testA.str = `$&#123;this.index&#125; : Test A String` &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .margin(&#123;top : 10 &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-Why-does-the-onChange-event-of-the-HarmonyOS-Slider-component-return-inaccurate-values"><a href="#3-Why-does-the-onChange-event-of-the-HarmonyOS-Slider-component-return-inaccurate-values" class="headerlink" title="3. Why does the onChange event of the HarmonyOS Slider component return inaccurate values?"></a>3. Why does the onChange event of the HarmonyOS Slider component return inaccurate values?</h4><p>During sliding, the Slider’s progress value is a repeating decimal. Use <code>.toFixed().toString()</code> to format the value.</p>
<h4 id="4-Gesture-handling-issues-in-HarmonyOS"><a href="#4-Gesture-handling-issues-in-HarmonyOS" class="headerlink" title="4. Gesture handling issues in HarmonyOS"></a>4. Gesture handling issues in HarmonyOS</h4><p>There are two sibling buttons, A and B, on the page. Button A has a long-press gesture and B has a touch event. Requirement: After a long-press on A, sliding to B should trigger B’s touch event.</p>
<p>Current implementations may cause long-press events to malfunction or be interrupted. Try using combined gestures or binding events: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-combined-gestures-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-combined-gestures-V5</a></p>
<p>Combined gestures are composed of multiple single gestures. Declare the type of combined gesture using different GestureModes in GestureGroup, supporting sequential, parallel, and exclusive recognition:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GestureGroup(mode:GestureMode, gesture:GestureType[])</span><br></pre></td></tr></table></figure>
<ul>
<li>mode: A GestureMode enum value defining the combination type.</li>
<li>gesture: An array of gestures composing this combined gesture.</li>
</ul>
<p><strong>Sequential Recognition</strong>:<br>Use GestureMode.Sequence. Gestures are recognized in registration order. If any gesture fails, subsequent gestures are skipped. Only the last gesture can respond to onActionEnd.</p>
<p>Example: A Column with a translate property for position movement, bound to a Sequence gesture combining LongPressGesture and PanGesture:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State offsetX: number = 0;</span><br><span class="line">  @State offsetY: number = 0;</span><br><span class="line">  @State count: number = 0;</span><br><span class="line">  @State positionX: number = 0;</span><br><span class="line">  @State positionY: number = 0;</span><br><span class="line">  @State borderStyles: BorderStyle = BorderStyle.Solid</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;sequence gesture\n&#x27; + &#x27;LongPress onAction:&#x27; + this.count + &#x27;\nPanGesture offset:\nX: &#x27; + this.offsetX + &#x27;\n&#x27; + &#x27;Y: &#x27; + this.offsetY)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">    &#125;.margin(10)</span><br><span class="line">    .borderWidth(1)</span><br><span class="line">    // Bind translate property to enable component movement</span><br><span class="line">    .translate(&#123; x: this.offsetX, y: this.offsetY, z: 0 &#125;)</span><br><span class="line">    .height(250)</span><br><span class="line">    .width(300)</span><br><span class="line">    // Sequential recognition: PanGesture triggers only after LongPressGesture succeeds</span><br><span class="line">    .gesture(</span><br><span class="line">      // Declare sequential gesture group</span><br><span class="line">      GestureGroup(GestureMode.Sequence,</span><br><span class="line">        // First gesture: LongPress with repeat enabled</span><br><span class="line">        LongPressGesture(&#123; repeat: true &#125;)</span><br><span class="line">          // Increment count when long-press is recognized</span><br><span class="line">          .onAction((event: GestureEvent|undefined) =&gt; &#123;</span><br><span class="line">            if(event)&#123;</span><br><span class="line">              if (event.repeat) &#123;</span><br><span class="line">                this.count++;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;LongPress onAction&#x27;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionEnd(() =&gt; &#123;</span><br><span class="line">            console.info(&#x27;LongPress end&#x27;);</span><br><span class="line">          &#125;),</span><br><span class="line">        // Second gesture: PanGesture (triggers after long-press)</span><br><span class="line">        PanGesture()</span><br><span class="line">          .onActionStart(() =&gt; &#123;</span><br><span class="line">            this.borderStyles = BorderStyle.Dashed;</span><br><span class="line">            console.info(&#x27;pan start&#x27;);</span><br><span class="line">          &#125;)</span><br><span class="line">          // Update position based on pan movement</span><br><span class="line">          .onActionUpdate((event: GestureEvent|undefined) =&gt; &#123;</span><br><span class="line">            if(event)&#123;</span><br><span class="line">              this.offsetX = (this.positionX + event.offsetX);</span><br><span class="line">              this.offsetY = this.positionY + event.offsetY;</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;pan update&#x27;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionEnd(() =&gt; &#123;</span><br><span class="line">            this.positionX = this.offsetX;</span><br><span class="line">            this.positionY = this.offsetY;</span><br><span class="line">            this.borderStyles = BorderStyle.Solid;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">      .onCancel(() =&gt; &#123;</span><br><span class="line">        console.log(&quot;sequence gesture canceled&quot;)</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>Parallel Recognition</strong>:<br>Use GestureMode.Parallel. All gestures are recognized simultaneously without interference.</p>
<p>Example: A Column with both single-tap and double-tap gestures:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State count1: number = 0;</span><br><span class="line">  @State count2: number = 0;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;Parallel gesture\n&#x27; + &#x27;tapGesture count is 1:&#x27; + this.count1 + &#x27;\ntapGesture count is 2:&#x27; + this.count2 + &#x27;\n&#x27;)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(200)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    // Parallel recognition: Both single-tap and double-tap can trigger</span><br><span class="line">    .gesture(</span><br><span class="line">      GestureGroup(GestureMode.Parallel,</span><br><span class="line">        TapGesture(&#123; count: 1 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count1++;</span><br><span class="line">          &#125;),</span><br><span class="line">        TapGesture(&#123; count: 2 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count2++;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>Exclusive Recognition</strong>:<br>Use GestureMode.Exclusive. Gestures are recognized simultaneously. The first successful gesture stops recognition for others.</p>
<p>Example: A Column with conflicting single-tap and double-tap gestures:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// xxx.ets</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State count1: number = 0;</span><br><span class="line">  @State count2: number = 0;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;Exclusive gesture\n&#x27; + &#x27;tapGesture count is 1:&#x27; + this.count1 + &#x27;\ntapGesture count is 2:&#x27; + this.count2 + &#x27;\n&#x27;)</span><br><span class="line">        .fontSize(28)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(200)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    // Exclusive recognition: Only one gesture can succeed</span><br><span class="line">    .gesture(</span><br><span class="line">      GestureGroup(GestureMode.Exclusive,</span><br><span class="line">        TapGesture(&#123; count: 1 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count1++;</span><br><span class="line">          &#125;),</span><br><span class="line">        TapGesture(&#123; count: 2 &#125;)</span><br><span class="line">          .onAction(() =&gt; &#123;</span><br><span class="line">            this.count2++;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="5-How-to-convert-a-HarmonyOS-Object-to-a-Map"><a href="#5-How-to-convert-a-HarmonyOS-Object-to-a-Map" class="headerlink" title="5. How to convert a HarmonyOS Object to a Map?"></a>5. How to convert a HarmonyOS Object to a Map?</h4><p>After receiving data of type Object from an interface, you want to convert it to a Map to use Map methods. Here’s how:</p>
<p>Reference demo:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct otj &#123;</span><br><span class="line"></span><br><span class="line">  @State obj: object = new Object();</span><br><span class="line">  @State map: Map&lt;string, string&gt; = new Map();</span><br><span class="line"></span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    this.obj[&#x27;first&#x27;] = &#x27;1&#x27;;</span><br><span class="line">    this.obj[&#x27;second&#x27;] = &#x27;2&#x27;;</span><br><span class="line">    // Object.entries(this.obj) converts to [[&quot;first&quot;,&quot;1&quot;],[&quot;second&quot;,&quot;2&quot;]]</span><br><span class="line">    Object.entries(this.obj).forEach((item:string[])=&gt;&#123;</span><br><span class="line">      // Method 1</span><br><span class="line">      //this.map[item[0]] = item[1];</span><br><span class="line">      // Method 2 (preferred)</span><br><span class="line">      this.map.set(item[0],item[1]);</span><br><span class="line">      // Access values: this.map[&#x27;key&#x27;] or this.map.get(&#x27;key&#x27;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/625%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O-%E8%B6%85%E5%87%BA-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/625%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O-%E8%B6%85%E5%87%BA-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Custom Layout, Content Exceeding Bottom Navigation Bar, Bottom O 超出 Screen Not Displaying, Obtaining Open Page List, Refresh Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:55:19 / Modified: 11:55:34" itemprop="dateCreated datePublished" datetime="2025-06-25T11:55:19+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O超出-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component"><a href="#【Daily-HarmonyOS-Next-Knowledge】Custom-Layout-Content-Exceeding-Bottom-Navigation-Bar-Bottom-O超出-Screen-Not-Displaying-Obtaining-Open-Page-List-Refresh-Component" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Custom Layout, Content Exceeding Bottom Navigation Bar, Bottom O超出 Screen Not Displaying, Obtaining Open Page List, Refresh Component"></a>【Daily HarmonyOS Next Knowledge】Custom Layout, Content Exceeding Bottom Navigation Bar, Bottom O超出 Screen Not Displaying, Obtaining Open Page List, Refresh Component</h3><h4 id="1-When-is-the-onPlaceChildren-of-HarmonyOS-custom-layout-redrawn"><a href="#1-When-is-the-onPlaceChildren-of-HarmonyOS-custom-layout-redrawn" class="headerlink" title="1. When is the onPlaceChildren of HarmonyOS custom layout redrawn?"></a>1. When is the onPlaceChildren of HarmonyOS custom layout redrawn?</h4><p>When using a @Prop data in the onPlaceChildren of a custom layout, modifying this @Prop data does not trigger a re-invocation of onPlaceChildren, meaning the layout does not update. How to handle this?  </p>
<p>The OnPlaceChildren method is called only when the component is refreshed. The component triggers a refresh only when the @State variable used in its rendering changes.  </p>
<h4 id="2-How-to-make-content-exceed-the-bottom-navigation-bar-in-HarmonyOS"><a href="#2-How-to-make-content-exceed-the-bottom-navigation-bar-in-HarmonyOS" class="headerlink" title="2. How to make content exceed the bottom navigation bar in HarmonyOS?"></a>2. How to make content exceed the bottom navigation bar in HarmonyOS?</h4><p><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-expand-safe-area-V5</a>  </p>
<p>The safe area refers to the page’s display area, which by default does not overlap with system-set non-safe areas such as the status bar and navigation bar. By default, interfaces developed by developers are laid out within the safe area. Attributes and methods are provided to allow developers to set components to break through the safe area restrictions:  </p>
<ul>
<li>The <code>expandSafeArea</code> attribute supports components to extend their drawing area beyond the safe area without changing the layout.  </li>
<li>The <code>setKeyboardAvoidMode</code> can be configured to define how the page avoids the virtual keyboard when it pops up.  </li>
<li>When text elements like the title bar should not overlap with non-safe areas, it is recommended to set the <code>expandSafeArea</code> attribute for components to achieve an immersive effect. Alternatively, the immersive effect can be directly enabled via the window interface <code>setWindowLayoutFullScreen</code>.</li>
</ul>
<h4 id="3-How-to-solve-the-problem-that-the-bottom-of-a-HarmonyOS-list-is-out-of-the-screen-and-not-visible"><a href="#3-How-to-solve-the-problem-that-the-bottom-of-a-HarmonyOS-list-is-out-of-the-screen-and-not-visible" class="headerlink" title="3. How to solve the problem that the bottom of a HarmonyOS list is out of the screen and not visible?"></a>3. How to solve the problem that the bottom of a HarmonyOS list is out of the screen and not visible?</h4><p>Setting the layout of the list to fill the remaining height can solve this issue.<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/faqs/faqs-arkui-component.md#%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6list%E5%9C%A8%E4%B8%8D%E8%AE%BE%E7%BD%AE%E9%AB%98%E5%BA%A6%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%BB%91%E5%8A%A8%E4%B8%8D%E5%88%B0%E5%BA%95%E7%9A%84%E9%97%AE%E9%A2%98api-10">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/faqs/faqs-arkui-component.md#%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6list%E5%9C%A8%E4%B8%8D%E8%AE%BE%E7%BD%AE%E9%AB%98%E5%BA%A6%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%BB%91%E5%8A%A8%E4%B8%8D%E5%88%B0%E5%BA%95%E7%9A%84%E9%97%AE%E9%A2%98api-10</a>  </p>
<p>When the List does not have a height set, if the total height of its child components exceeds the height of the List’s parent component, the List will adopt the parent component’s height. If the List has other sibling nodes, it may be pushed out of the parent component’s display area, making it appear that the bottom cannot be scrolled to.  </p>
<p>Solution: Set the <code>layoutWeight(1)</code> attribute for the List component to allocate all remaining space to it.  </p>
<h4 id="4-How-to-obtain-the-list-of-opened-pages-in-the-navigation-stack-in-HarmonyOS"><a href="#4-How-to-obtain-the-list-of-opened-pages-in-the-navigation-stack-in-HarmonyOS" class="headerlink" title="4. How to obtain the list of opened pages in the navigation stack in HarmonyOS?"></a>4. How to obtain the list of opened pages in the navigation stack in HarmonyOS?</h4><p>It is recommended to use Navigation for page jumping, as Navigation contains interfaces related to the page stack.  </p>
<p>Using Navigation routing provides interfaces to obtain page information in the page stack.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5</a>  </p>
<h4 id="5-How-to-implement-a-bottom-pull-up-component-effect-similar-to-the-Refresh-component-in-HarmonyOS"><a href="#5-How-to-implement-a-bottom-pull-up-component-effect-similar-to-the-Refresh-component-in-HarmonyOS" class="headerlink" title="5. How to implement a bottom pull-up component effect similar to the Refresh component in HarmonyOS?"></a>5. How to implement a bottom pull-up component effect similar to the Refresh component in HarmonyOS?</h4><p>It is found that there is a pull-down component (Refresh), but no bottom pull-up component. Implementing it via scroll calculation and ordinary views often results in unsmooth effects.  </p>
<p>Recommendation: Refer to or directly use the <code>@ohos/pulltorefresh</code> component to achieve pull-down&#x2F;pull-up effects.  </p>
<p>Component library: <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Fpulltorefresh">https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Fpulltorefresh</a><br>Gitee: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony-sig/ohos_pull_to_refresh">https://gitee.com/openharmony-sig/ohos_pull_to_refresh</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/624-Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/624-Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Component Position Determination, List Item Screen Exit Lifecycle, Calendar View Component, Component Update Issues, Vertical Floating Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:53:30 / Modified: 11:54:14" itemprop="dateCreated datePublished" datetime="2025-06-25T11:53:30+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Component-Position-Determination-List-Item-Screen-Exit-Lifecycle-Calendar-View-Component-Component-Update-Issues-Vertical-Floating-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Component Position Determination, List Item Screen Exit Lifecycle, Calendar View Component, Component Update Issues, Vertical Floating Issues"></a>[Daily HarmonyOS Next Knowledge] Component Position Determination, List Item Screen Exit Lifecycle, Calendar View Component, Component Update Issues, Vertical Floating Issues</h3><h4 id="1-How-to-determine-the-position-of-each-component-or-card-on-the-screen-in-HarmonyOS"><a href="#1-How-to-determine-the-position-of-each-component-or-card-on-the-screen-in-HarmonyOS" class="headerlink" title="1. How to determine the position of each component or card on the screen in HarmonyOS?"></a>1. How to determine the position of each component or card on the screen in HarmonyOS?</h4><p>Use <code>componentUtils.getRectangleById</code> to obtain the component instance object by ID. The object returns the component’s coordinates and size synchronously to the developer.  </p>
<p>Reference documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentutils-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentutils-V5</a>  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getRectangleById</span>(<span class="attr">id</span>: <span class="built_in">string</span>): <span class="title class_">ComponentInfo</span></span><br><span class="line"><span class="comment">// Obtain the component instance object by ID. The coordinates and size are returned synchronously to the developer via the instance object.</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. In HarmonyOS, when a ListItem in LazyForEach scrolls off-screen, onDisAppear is not called. Is this normal?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">space</span>: commonConst.<span class="property">LIST_ITEM_SPACE</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">LazyForEach</span>(<span class="variable language_">this</span>.<span class="property">goodsListData</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">GoodsListItemType</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>(item?.<span class="property">goodsImg</span>)</span><br><span class="line">                .<span class="title function_">width</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">                .<span class="title function_">height</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">width</span>(commonConst.<span class="property">GOODS_IMAGE_WIDTH</span>)</span><br><span class="line">            .<span class="title function_">height</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(item?.<span class="property">goodsName</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(commonConst.<span class="property">NORMAL_FONT_SIZE</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: commonConst.<span class="property">BIGGER_FONT_SIZE</span> &#125;)</span><br><span class="line">              <span class="title class_">Text</span>(item?.<span class="property">advertisingLanguage</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.gray&#x27;</span>))</span><br><span class="line">                .<span class="title function_">fontSize</span>(commonConst.<span class="property">GOODS_EVALUATE_FONT_SIZE</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: commonConst.<span class="property">MARGIN_RIGHT</span>, <span class="attr">bottom</span>: commonConst.<span class="property">BIGGER_FONT_SIZE</span> &#125;)</span><br><span class="line">              <span class="title class_">Row</span>() &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item?.<span class="property">evaluate</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(commonConst.<span class="property">GOODS_EVALUATE_FONT_SIZE</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.deepGray&#x27;</span>))</span><br><span class="line">                <span class="title class_">Text</span>(item?.<span class="property">price</span>).<span class="title function_">fontSize</span>(commonConst.<span class="property">NORMAL_FONT_SIZE</span>).<span class="title function_">fontColor</span>($r(<span class="string">&#x27;app.color.freshRed&#x27;</span>))</span><br><span class="line">              &#125;</span><br><span class="line">              .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span>)</span><br><span class="line">              .<span class="title function_">width</span>(commonConst.<span class="property">GOODS_LIST_WIDTH</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">padding</span>(commonConst.<span class="property">GOODS_LIST_PADDING</span>)</span><br><span class="line">            .<span class="title function_">width</span>(commonConst.<span class="property">GOODS_FONT_WIDTH</span>)</span><br><span class="line">            .<span class="title function_">height</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">          .<span class="title function_">height</span>(commonConst.<span class="property">GOODS_LIST_HEIGHT</span>)</span><br><span class="line">          .<span class="title function_">width</span>(commonConst.<span class="property">LAYOUT_WIDTH_OR_HEIGHT</span>)</span><br><span class="line">        &#125;.<span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet  dddd&quot;</span>)</span><br><span class="line">        &#125;).<span class="title function_">onDisAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet   eeeee&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `</span>onDisAppear<span class="string">` callback is not triggered when the item scrolls off-screen. Why?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet  dddd&quot;</span>)</span><br><span class="line">&#125;).<span class="title function_">onDisAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;lzqnet   eeeee&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Explanation**: `</span>onDisAppear<span class="string">` triggers when the component is unloaded from the component tree. To monitor visibility changes, use `</span>onVisibleAreaChange<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Reference for HarmonyOS calendar component in month view mode?  </span></span><br><span class="line"><span class="string">Supports switching to previous month (1st day), next month, or today. Allows date selection when browsing a specific month.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// import &#123; Lunar &#125; from &#x27;lunar-javascript&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dateClass <span class="keyword">from</span> <span class="string">&#x27;../beans/DateClass&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">DatePickerDialogExample01</span> &#123;</span><br><span class="line">  <span class="attr">weekList</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;一&#x27;</span>, <span class="string">&#x27;二&#x27;</span>, <span class="string">&#x27;三&#x27;</span>, <span class="string">&#x27;四&#x27;</span>, <span class="string">&#x27;五&#x27;</span>, <span class="string">&#x27;六&#x27;</span>, <span class="string">&#x27;日&#x27;</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">show</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectDate</span>: dayjs.<span class="property">Dayjs</span> = <span class="title function_">dayjs</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectMonth</span>: <span class="built_in">string</span> = <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月&#x27;</span>)</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">dataList</span>: <span class="title class_">Array</span>&lt;dateClass&gt; = []</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">monthParam</span>: <span class="built_in">number</span> = <span class="number">0</span> <span class="comment">// Parameter for calendar navigation</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;弹出或关闭日历&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">36</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">show</span> = !<span class="variable language_">this</span>.<span class="property">show</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectDate</span> = <span class="title function_">dayjs</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">monthParam</span> = <span class="number">0</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">show</span>) &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">selectMonth</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.startIcon&#x27;</span>))</span><br><span class="line">                .<span class="title function_">width</span>(<span class="number">24</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">12</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">            .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">monthParam</span>--</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.startIcon&#x27;</span>))</span><br><span class="line">                .<span class="title function_">width</span>(<span class="number">24</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">12</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">            .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">monthParam</span>++</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">48</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">weekList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">weekList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                  .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Grid</span>() &#123;</span><br><span class="line">              <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dataList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: dateClass</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">                  <span class="title class_">Column</span>() &#123;</span><br><span class="line">                    <span class="title class_">Text</span>(item.<span class="property">day</span>.<span class="title function_">toString</span>())</span><br><span class="line">                      .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                      .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                      .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                      .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                      .<span class="title function_">opacity</span>(item.<span class="property">isToMonth</span> ? <span class="number">1</span> : <span class="number">0.4</span>)</span><br><span class="line">                    <span class="title class_">Text</span>(item.<span class="property">lunarDay</span>)</span><br><span class="line">                      .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">                      .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                      .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                      .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                      .<span class="title function_">opacity</span>(item.<span class="property">isToMonth</span> ? <span class="number">1</span> : <span class="number">0.4</span>)</span><br><span class="line">                  &#125;</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">48</span>)</span><br><span class="line">                  .<span class="title function_">height</span>(<span class="number">48</span>)</span><br><span class="line">                  .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                  .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                  .<span class="title function_">backgroundColor</span>(item.<span class="property">dayjsObj</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ==</span><br><span class="line">                  <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ?</span><br><span class="line">                    <span class="string">&#x27;#007DFF&#x27;</span> : <span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">                  .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">                  .<span class="title function_">borderColor</span>(item.<span class="property">dayjsObj</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ==</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">selectDate</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) ?</span><br><span class="line">                    <span class="string">&#x27;#007DFF&#x27;</span> : <span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">                  .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">selectDate</span> = item.<span class="property">dayjsObj</span></span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">288</span>)</span><br><span class="line">            .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">            .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">            .<span class="title function_">columnsGap</span>(<span class="number">0</span>)</span><br><span class="line">            .<span class="title function_">rowsGap</span>(<span class="number">0</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">12</span>, <span class="attr">right</span>: <span class="number">12</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">getDataList</span>(<span class="params"><span class="attr">param</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = []</span><br><span class="line">        <span class="keyword">let</span> firstDate = <span class="title function_">dayjs</span>().<span class="title function_">add</span>(param, <span class="string">&#x27;month&#x27;</span>).<span class="title function_">startOf</span>(<span class="string">&#x27;month&#x27;</span>) <span class="comment">// First day of the month</span></span><br><span class="line">        <span class="keyword">let</span> afterDate = <span class="title function_">dayjs</span>().<span class="title function_">add</span>(param, <span class="string">&#x27;month&#x27;</span>).<span class="title function_">endOf</span>(<span class="string">&#x27;month&#x27;</span>) <span class="comment">// Last day of the month</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">selectMonth</span> = firstDate.<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> frontDay = <span class="number">0</span> <span class="comment">// Days to offset for calendar display</span></span><br><span class="line">        <span class="keyword">if</span> (firstDate.<span class="title function_">day</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">          frontDay = <span class="number">6</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          frontDay = firstDate.<span class="title function_">day</span>() - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> showFirstDay = firstDate.<span class="title function_">subtract</span>(frontDay, <span class="string">&#x27;day&#x27;</span>) <span class="comment">// First visible day in calendar</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>;i &lt; <span class="number">42</span>; i++) &#123;</span><br><span class="line">          <span class="keyword">let</span> dayjsObj = showFirstDay.<span class="title function_">add</span>(i, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line">          <span class="keyword">let</span> day = dayjsObj.<span class="title function_">date</span>()</span><br><span class="line">          <span class="keyword">let</span> lunarDay = <span class="string">&#x27;&#x27;</span></span><br><span class="line">          <span class="comment">// if (Lunar.fromDate(dayjsObj.toDate()).getFestivals().length !== 0) &#123; // Show festival</span></span><br><span class="line">          <span class="comment">// lunarDay = Lunar.fromDate(dayjsObj.toDate()).getFestivals()[0]</span></span><br><span class="line">          <span class="comment">// &#125; else if (Lunar.fromDate(dayjsObj.toDate()).getJieQi() !== &#x27;&#x27;) &#123; // Show solar term</span></span><br><span class="line">          <span class="comment">// lunarDay = Lunar.fromDate(dayjsObj.toDate()).getJieQi()</span></span><br><span class="line">          <span class="comment">// &#125; else &#123; // Show lunar date</span></span><br><span class="line">          <span class="comment">// lunarDay = Lunar.fromDate(dayjsObj.toDate()).getDayInChinese()</span></span><br><span class="line">          <span class="comment">// &#125;</span></span><br><span class="line">          <span class="keyword">let</span> isToMonth = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">if</span> (dayjsObj.<span class="title function_">isBefore</span>(firstDate) || dayjsObj.<span class="title function_">isAfter</span>(afterDate)) &#123;</span><br><span class="line">            isToMonth = <span class="literal">false</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dataList</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title function_">dateClass</span>(dayjsObj, day, lunarDay, isToMonth))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// console.log(&#x27;aboutToAppear&#x27;,JSON.stringify(this.dataList))</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getDataList</span>(<span class="variable language_">this</span>.<span class="property">monthParam</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// @ts-ignore</span></span><br><span class="line">    <span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">DateClass</span> &#123;</span><br><span class="line">      <span class="attr">dayjsObj</span>: dayjs.<span class="property">Dayjs</span> <span class="comment">// dayjs time object</span></span><br><span class="line">      <span class="attr">day</span>: <span class="built_in">number</span> <span class="comment">// Day of the month</span></span><br><span class="line">      <span class="attr">lunarDay</span>: <span class="built_in">string</span> <span class="comment">// Lunar calendar date</span></span><br><span class="line">      <span class="attr">isToMonth</span>: <span class="built_in">boolean</span> <span class="comment">// Whether it belongs to the current month</span></span><br><span class="line"></span><br><span class="line">      <span class="title function_">constructor</span>(<span class="params"><span class="attr">dayjsObj</span>: dayjs.<span class="title class_">Dayjs</span>, <span class="attr">day</span>: <span class="built_in">number</span>, <span class="attr">lunarDay</span>: <span class="built_in">string</span>, <span class="attr">isToMonth</span>: <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dayjsObj</span> = dayjsObj</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">day</span> = day</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lunarDay</span> = lunarDay</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">isToMonth</span> = isToMonth</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Components created via `</span><span class="title class_">WrappedBuilder</span>.<span class="property">builder</span><span class="string">` in HarmonyOS cannot be updated. Does `</span><span class="title class_">WrappedBuilder</span>.<span class="property">builder</span><span class="string">` not support updates?  </span></span><br><span class="line"><span class="string">When creating a component with `</span><span class="title class_">WrappedBuilder</span>.<span class="property">builder</span><span class="string">`, the initial build works, but state changes in the parent component do not trigger rebuilds.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dxItemRenderService</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">section</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">templateItem</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">section</span>?.<span class="property">template</span>?.<span class="property">name</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dxItemRenderService</span>?.<span class="title function_">getDxWrappedBuilder</span>().<span class="title function_">builder</span>(<span class="variable language_">this</span>.<span class="property">section</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">section</span>?.<span class="property">template</span>?.<span class="property">name</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;not found&#x27;</span> + <span class="variable language_">this</span>.<span class="property">templateItem</span>?.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">opacity</span>(<span class="variable language_">this</span>.<span class="title function_">searchBarHasRender</span>())</span><br><span class="line">  .<span class="title function_">onAreaChange</span>(<span class="variable language_">this</span>.<span class="property">searchBarAreaChange</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Explanation**: `</span><span class="title class_">BuilderNode</span><span class="string">` does not automatically update state variables. Manually call the `</span>update<span class="string">` method to refresh content.  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-buildernode-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. In HarmonyOS, setting `</span>responseRegion<span class="string">` to float vertically by 50% only works for the upper half?  </span></span><br><span class="line"><span class="string">Code example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&quot;按钮1&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">stateStyles</span>(&#123;</span><br><span class="line">      <span class="attr">pressed</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">normal</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">responseRegion</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="string">&#x27;-50%&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;200%&#x27;</span> &#125;)</span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Issue**: The lower half of the response region does not work due to layout遮挡 (similar to z-index conflicts in Stack).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. Replace `</span><span class="title class_">Blank</span><span class="string">` with `</span><span class="title class_">Row</span><span class="string">`.  </span></span><br><span class="line"><span class="string">2. Set `</span><span class="title function_">zIndex</span>(<span class="number">1</span>)<span class="string">` on the `</span><span class="title class_">Text</span><span class="string">` component to bring it to the top layer.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Fixed example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&quot;按钮1&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">stateStyles</span>(&#123;</span><br><span class="line">      <span class="attr">pressed</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">normal</span>: &#123;</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">responseRegion</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="string">&#x27;-50%&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;200%&#x27;</span> &#125;)</span><br><span class="line">    .<span class="title function_">zIndex</span>(<span class="number">1</span>)  <span class="comment">// Ensure the component is on top</span></span><br><span class="line">  <span class="title class_">Blank</span>().<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/623-Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/623-Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Toggle Control Dragging, Slider Component, Checkbox Component Style, Adding Data in Loops, List Safe Area Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:37:59 / Modified: 12:25:01" itemprop="dateCreated datePublished" datetime="2025-06-25T11:37:59+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Toggle-Control-Dragging-Slider-Component-Checkbox-Component-Style-Adding-Data-in-Loops-List-Safe-Area-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Toggle Control Dragging, Slider Component, Checkbox Component Style, Adding Data in Loops, List Safe Area Issues"></a>[Daily HarmonyOS Next Knowledge] Toggle Control Dragging, Slider Component, Checkbox Component Style, Adding Data in Loops, List Safe Area Issues</h3><h4 id="1-In-HarmonyOS-when-making-a-Toggle-draggable-Toggle-type-is-Button-the-click-event-fires-during-dragging-How-to-block-this"><a href="#1-In-HarmonyOS-when-making-a-Toggle-draggable-Toggle-type-is-Button-the-click-event-fires-during-dragging-How-to-block-this" class="headerlink" title="1. In HarmonyOS, when making a Toggle draggable (Toggle type is Button), the click event fires during dragging. How to block this?"></a>1. In HarmonyOS, when making a Toggle draggable (Toggle type is Button), the click event fires during dragging. How to block this?</h4><p>When making a Toggle draggable (type Button), the click event fires during dragging. How to block this? This issue only occurs with Button type; Checkbox and Switch work fine.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; hilog &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.PerformanceAnalysisKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">TestDragToggleWithBtn</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">offsetX</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">offsetY</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">positionX</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">positionY</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">toggleIsOn</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">isDragging</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Toggle</span>(&#123; <span class="attr">type</span>: <span class="title class_">ToggleType</span>.<span class="property">Button</span>, <span class="attr">isOn</span>: <span class="variable language_">this</span>.<span class="property">toggleIsOn</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Toggle&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">selectedColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">      <span class="comment">// onchange callback fires before onActionEnd</span></span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">isOn</span>: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">        hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;xxx %&#123;public&#125;s&#x27;</span>, onClick</span><br><span class="line">        <span class="title class_">Toggle</span>, <span class="attr">isOn</span>:</span><br><span class="line">        $</span><br><span class="line">        &#123;</span><br><span class="line">          isOn</span><br><span class="line">        &#125;</span><br><span class="line">        )</span><br><span class="line">        ;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isDragging======&#x27;</span> + <span class="variable language_">this</span>.<span class="property">isDragging</span>)</span><br><span class="line">        <span class="keyword">if</span> (isOn == <span class="variable language_">this</span>.<span class="property">toggleIsOn</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">toggleIsOn</span> = isOn</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isDragging</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">toggleIsOn</span> = !<span class="variable language_">this</span>.<span class="property">toggleIsOn</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">translate</span>(&#123; <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">offsetX</span>, <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">offsetY</span> &#125;)</span><br><span class="line">      .<span class="title function_">gesture</span>(</span><br><span class="line">        <span class="title class_">PanGesture</span>()</span><br><span class="line">          .<span class="title function_">onActionStart</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isDragging</span> = <span class="literal">true</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionUpdate</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">offsetX</span> = <span class="variable language_">this</span>.<span class="property">positionX</span> + event.<span class="property">offsetX</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">offsetY</span> = <span class="variable language_">this</span>.<span class="property">positionY</span> + event.<span class="property">offsetY</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">onActionEnd</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">positionX</span> = <span class="variable language_">this</span>.<span class="property">offsetX</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">positionY</span> = <span class="variable language_">this</span>.<span class="property">offsetY</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isDragging</span> = <span class="literal">false</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. The HarmonyOS Swiper component&#x27;s indicator has a default width/height that cannot be modified?  </span></span><br><span class="line"><span class="string">This can be resolved by modifying the `</span>bottom<span class="string">` attribute:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TestSwipper</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">bannerInfo</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">bannerInfo</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">bannerInfo</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title class_">Swiper</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">bannerInfo</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&quot;app.media.startIcon&quot;</span>))</span><br><span class="line">              .<span class="title function_">alt</span>($r(<span class="string">&quot;app.media.startIcon&quot;</span>))</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">              .<span class="title function_">aspectRatio</span>(<span class="number">3.649</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="string">&quot;8vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line"></span><br><span class="line">            &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">35</span>)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">cachedCount</span>(<span class="number">2</span>)</span><br><span class="line">      .<span class="title function_">autoPlay</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">interval</span>(<span class="number">3000</span>)</span><br><span class="line">      .<span class="title function_">vertical</span>(<span class="literal">false</span>)</span><br><span class="line">      .<span class="title function_">loop</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="string">&quot;16vp&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;16vp&quot;</span> &#125;)</span><br><span class="line">      .<span class="title function_">indicator</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DotIndicator</span>()</span><br><span class="line">          .<span class="title function_">bottom</span>(<span class="number">22</span>)</span><br><span class="line">          .<span class="title function_">itemWidth</span>(<span class="string">&quot;4vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">itemHeight</span>(<span class="string">&quot;4vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">selectedItemWidth</span>(<span class="string">&quot;6vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">selectedItemHeight</span>(<span class="string">&quot;6vp&quot;</span>)</span><br><span class="line">          .<span class="title function_">color</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">          .<span class="title function_">selectedColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS CheckBox custom styling issue?  </span></span><br><span class="line"><span class="string">Cannot modify the default CheckBox icon. Style must be set specifically for CheckBox.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the CheckBox style configuration documentation:  </span></span><br><span class="line"><span class="string">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-checkbox-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. In HarmonyOS, how to add data to a Row/Column via a loop?  </span></span><br><span class="line"><span class="string">For example, add each string from a `</span><span class="built_in">string</span>[]<span class="string">` as a Text in a Row.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use `</span><span class="title class_">ForEach</span><span class="string">` or `</span><span class="title class_">LazyForEach</span><span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="attr">msgs</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">msgs</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">Text</span>(item)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. HarmonyOS listItem does not support setting safe areas. Any workaround to make listItem extend beyond the safe area?  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> windowClass = <span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&quot;windowStage&quot;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">WindowStage</span></span><br><span class="line">  windowClass.<span class="title function_">getMainWindowSync</span>().<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onPageHide</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> windowClass = <span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&quot;windowStage&quot;</span>) <span class="keyword">as</span> <span class="variable language_">window</span>.<span class="property">WindowStage</span></span><br><span class="line">  windowClass.<span class="title function_">getMainWindowSync</span>().<span class="title function_">setWindowLayoutFullScreen</span>(<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/622-Daily-HarmonyOS-Next-Knowledge-Image-Display-Issues-Custom-Keyboard-Monitoring-State-Styles-Line-Spacing-Settings-Image-Component-Request-Headers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/622-Daily-HarmonyOS-Next-Knowledge-Image-Display-Issues-Custom-Keyboard-Monitoring-State-Styles-Line-Spacing-Settings-Image-Component-Request-Headers/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Image Display Issues, Custom Keyboard Monitoring, State Styles, Line Spacing Settings, Image Component Request Headers</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:36:33 / Modified: 11:36:47" itemprop="dateCreated datePublished" datetime="2025-06-25T11:36:33+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Image-Display-Issues-Custom-Keyboard-Monitoring-State-Styles-Line-Spacing-Settings-Image-Component-Request-Headers"><a href="#Daily-HarmonyOS-Next-Knowledge-Image-Display-Issues-Custom-Keyboard-Monitoring-State-Styles-Line-Spacing-Settings-Image-Component-Request-Headers" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Image Display Issues, Custom Keyboard Monitoring, State Styles, Line Spacing Settings, Image Component Request Headers"></a>[Daily HarmonyOS Next Knowledge] Image Display Issues, Custom Keyboard Monitoring, State Styles, Line Spacing Settings, Image Component Request Headers</h3><h4 id="1-Images-fail-to-display-when-the-HarmonyOS-file-path-contains-a-‘-’-symbol-How-to-resolve-this"><a href="#1-Images-fail-to-display-when-the-HarmonyOS-file-path-contains-a-‘-’-symbol-How-to-resolve-this" class="headerlink" title="1. Images fail to display when the HarmonyOS file path contains a ‘#’ symbol. How to resolve this?"></a>1. Images fail to display when the HarmonyOS file path contains a ‘#’ symbol. How to resolve this?</h4><p>The Image component does not support direct sandbox paths. Convert the sandbox path to a sandbox URI using <code>fileuri.getUriFromPath(file.path)</code> from the <code>@ohos.file.fileuri</code> module, then pass the URI to the Image component to display sandbox GIFs correctly.  </p>
<h4 id="2-How-to-monitor-system-events-to-retract-the-keyboard-in-a-HarmonyOS-custom-keyboard"><a href="#2-How-to-monitor-system-events-to-retract-the-keyboard-in-a-HarmonyOS-custom-keyboard" class="headerlink" title="2. How to monitor system events to retract the keyboard in a HarmonyOS custom keyboard?"></a>2. How to monitor system events to retract the keyboard in a HarmonyOS custom keyboard?</h4><p>Global events are used for keyboard retraction operations:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TextInputExample &#123;
  controller: TextInputController = new TextInputController()
  @State inputValue: string = &quot;&quot;

  // Custom keyboard component
  @Builder
  CustomKeyboardBuilder() &#123;
    Column() &#123;
      Button(&#39;x&#39;).onClick(() =&gt; &#123;
        // Close the custom keyboard
        this.controller.stopEditing()
      &#125;)
      Grid() &#123;
        ForEach([1, 2, 3, 4, 5, 6, 7, 8, 9, &#39;*&#39;, 0, &#39;#&#39;], (item: number | string) =&gt; &#123;
          GridItem() &#123;
            Button(item + &quot;&quot;)
              .width(110).onClick(() =&gt; &#123;
              this.inputValue += item
            &#125;)
          &#125;
        &#125;)
      &#125;.maxCount(3).columnsGap(10).rowsGap(10).padding(5)
    &#125;.backgroundColor(Color.Gray)
  &#125;

  build() &#123;
    Column() &#123;
      Text(&#39;1221213213&#39;)
        .height(&#39;20%&#39;)
        .backgroundColor(Color.Green)
      TextArea()
        .height(&#39;20%&#39;)
        .backgroundColor(Color.Orange)
      TextInput(&#123; controller: this.controller, text: this.inputValue &#125;)// Bind custom keyboard
        .customKeyboard(this.CustomKeyboardBuilder()).margin(10).border(&#123; width: 1 &#125;).height(&#39;48vp&#39;)
      Column()
        .width(&#39;100%&#39;)
        .height(&#39;70%&#39;)
        .backgroundColor(Color.Grey)
    &#125;.height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
    .onClick(() =&gt; &#123;
      this.controller.stopEditing()
    &#125;)
    .backgroundColor(Color.Pink)
  &#125;
&#125;
</code></pre>
<h4 id="3-How-to-set-line-spacing-for-Text-in-HarmonyOS"><a href="#3-How-to-set-line-spacing-for-Text-in-HarmonyOS" class="headerlink" title="3. How to set line spacing for Text in HarmonyOS?"></a>3. How to set line spacing for Text in HarmonyOS?</h4><p>Use the <code>lineHeight</code> attribute: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text</a>  </p>
<h4 id="4-Setting-fontColor-in-the-stateStyles-of-a-HarmonyOS-Button-component-does-not-work-Must-a-custom-state-be-created"><a href="#4-Setting-fontColor-in-the-stateStyles-of-a-HarmonyOS-Button-component-does-not-work-Must-a-custom-state-be-created" class="headerlink" title="4. Setting fontColor in the stateStyles of a HarmonyOS Button component does not work. Must a custom state be created?"></a>4. Setting <code>fontColor</code> in the <code>stateStyles</code> of a HarmonyOS Button component does not work. Must a custom state be created?</h4><p>Use <code>attributeModifier</code> for dynamic attribute settings:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-attribute-modifier-V5</a>  </p>
<p>Dynamically set component attributes using if&#x2F;else logic and polymorphic styles:<br><code>attributeModifier(modifier: AttributeModifier&lt;T&gt;)</code>  </p>
<h4 id="5-Does-the-HarmonyOS-ArKUI-Image-component-support-setting-request-headers"><a href="#5-Does-the-HarmonyOS-ArKUI-Image-component-support-setting-request-headers" class="headerlink" title="5. Does the HarmonyOS ArKUI Image component support setting request headers?"></a>5. Does the HarmonyOS ArKUI Image component support setting request headers?</h4><p>The ImageKnife library now supports custom request headers. Reference:<br><a target="_blank" rel="noopener" href="https://gitee.com/openharmony-tpc/ImageKnife#%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E">https://gitee.com/openharmony-tpc/ImageKnife#%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/621-Daily-HarmonyOS-Next-Knowledge-Video-Component-Slider-Component-Focus-Acquisition-Failure-Touch-Hotspot-Rich-Text-Component-Scrolling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/621-Daily-HarmonyOS-Next-Knowledge-Video-Component-Slider-Component-Focus-Acquisition-Failure-Touch-Hotspot-Rich-Text-Component-Scrolling/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Video Component, Slider Component, Focus Acquisition Failure, Touch Hotspot, Rich Text Component Scrolling</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:35:14 / Modified: 11:35:32" itemprop="dateCreated datePublished" datetime="2025-06-25T11:35:14+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Video-Component-Slider-Component-Focus-Acquisition-Failure-Touch-Hotspot-Rich-Text-Component-Scrolling"><a href="#Daily-HarmonyOS-Next-Knowledge-Video-Component-Slider-Component-Focus-Acquisition-Failure-Touch-Hotspot-Rich-Text-Component-Scrolling" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Video Component, Slider Component, Focus Acquisition Failure, Touch Hotspot, Rich Text Component Scrolling"></a>[Daily HarmonyOS Next Knowledge] Video Component, Slider Component, Focus Acquisition Failure, Touch Hotspot, Rich Text Component Scrolling</h3><h4 id="1-HarmonyOS-native-video-component-cannot-obtain-the-width-and-height-of-video-content"><a href="#1-HarmonyOS-native-video-component-cannot-obtain-the-width-and-height-of-video-content" class="headerlink" title="1. HarmonyOS native video component cannot obtain the width and height of video content?"></a>1. HarmonyOS native video component cannot obtain the width and height of video content?</h4><p>This issue can be addressed with the following code:  </p>
<pre><code class="language-typescript">aboutToAppear(): void &#123;
  media.createAVPlayer((error: BusinessError, player: media.AVPlayer) =&gt; &#123;
    player.on(&#39;stateChange&#39;, async (state: string, reason: media.StateChangeReason) =&gt; &#123;
      switch (state) &#123;
        case &#39;initialized&#39;:
          player.prepare();
          break;
        case &#39;prepared&#39;:
          player.getTrackDescription((error: BusinessError, arrList: Array&lt;media.MediaDescription&gt;) =&gt; &#123;
            if ((arrList) !== null) &#123;
              console.debug(&quot;getTrackDescription&quot;, arrList[0][media.MediaDescriptionKey.MD_KEY_WIDTH])
              console.debug(&quot;getTrackDescription&quot;, arrList[0][media.MediaDescriptionKey.MD_KEY_HEIGHT])
            &#125; else &#123;
              console.error(`video getTrackDescription fail, error:$&#123;error&#125;`);
            &#125;
            player.release();
          &#125;);
          break;
      &#125;
    &#125;)
    player.url = this.params.src
  &#125;);
&#125;
</code></pre>
<h4 id="2-When-a-HarmonyOS-swiper-is-nested-with-a-chart-the-swiper-scrolls-left-right-when-the-chart-is-dragged-horizontally"><a href="#2-When-a-HarmonyOS-swiper-is-nested-with-a-chart-the-swiper-scrolls-left-right-when-the-chart-is-dragged-horizontally" class="headerlink" title="2. When a HarmonyOS swiper is nested with a chart, the swiper scrolls left&#x2F;right when the chart is dragged horizontally."></a>2. When a HarmonyOS swiper is nested with a chart, the swiper scrolls left&#x2F;right when the chart is dragged horizontally.</h4><p>Refer to the PanGesture documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-gestures-pangesture-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-gestures-pangesture-V5</a>  </p>
<p>Simple example code:  </p>
<pre><code class="language-typescript">import web_webview from &#39;@ohos.web.webview&#39;

@Entry
@Component
struct TestSwiperPage &#123;
  private swiperController: SwiperController = new SwiperController()
  controller: web_webview.WebviewController = new web_webview.WebviewController()
  private panOption: PanGestureOptions = new PanGestureOptions(&#123; direction: PanDirection.Left | PanDirection.Right &#125;)

  build() &#123;
    Column() &#123;
      Swiper(this.swiperController) &#123;
        Text(&#39;前&#39;)
          .width(&#39;90%&#39;)
          .height(&#39;90%&#39;)
          .textAlign(TextAlign.Center)
          .fontSize(30)

        Scroll() &#123;
          Column() &#123;
            Web(&#123; src: &#39;https://www.huawei.com/&#39;, controller: this.controller &#125;)
              .height(200)
              .width(&#39;100%&#39;)
              .backgroundColor(&#39;#11ff11&#39;)
              .gesture(
                PanGesture(this.panOption)
              )

            Column() &#123;
              Text(&#39;此区域可正常操作&#39;).fontColor(&#39;#ffffff&#39;).fontSize(&#39;30vp&#39;).margin(&#123;top: 200&#125;)
            &#125;.height(2000)
            .width(&#39;100%&#39;)
            .backgroundColor(&#39;#112311&#39;)
          &#125;
        &#125;
        .width(&#39;90%&#39;)
        .height(&#39;100%&#39;)

        Text(&#39;后&#39;)
          .width(&#39;90%&#39;)
          .height(&#39;90%&#39;)
          .textAlign(TextAlign.Center)
          .fontSize(30)
      &#125;
      .interval(3000)
      .autoPlay(false)
      .height(&#39;100%&#39;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(&#39;#ff11ff&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-HarmonyOS-focusControl-requestFocus-fails-to-acquire-focus"><a href="#3-HarmonyOS-focusControl-requestFocus-fails-to-acquire-focus" class="headerlink" title="3. HarmonyOS focusControl.requestFocus fails to acquire focus."></a>3. HarmonyOS focusControl.requestFocus fails to acquire focus.</h4><p>The component may not be focusable by default. Set <code>focusable(true)</code> to enable focus.  </p>
<h4 id="4-HarmonyOS-touch-hotspot-deviates-from-the-actual-component-position-How-to-avoid-this"><a href="#4-HarmonyOS-touch-hotspot-deviates-from-the-actual-component-position-How-to-avoid-this" class="headerlink" title="4. HarmonyOS touch hotspot deviates from the actual component position. How to avoid this?"></a>4. HarmonyOS touch hotspot deviates from the actual component position. How to avoid this?</h4><p>Set the touch hotspot using: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-touch-target-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-touch-target-V5</a>  </p>
<h4 id="5-HarmonyOS-RichText-scrolls-when-exceeding-the-specified-height-but-scrolling-is-unexpected-How-to-disable-scrolling"><a href="#5-HarmonyOS-RichText-scrolls-when-exceeding-the-specified-height-but-scrolling-is-unexpected-How-to-disable-scrolling" class="headerlink" title="5. HarmonyOS RichText scrolls when exceeding the specified height, but scrolling is unexpected. How to disable scrolling?"></a>5. HarmonyOS RichText scrolls when exceeding the specified height, but scrolling is unexpected. How to disable scrolling?</h4><p>Set <code>hitTestMode</code> to <code>None</code> to make the component ignore touch events:<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-hit-test-behavior-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/620-Daily-HarmonyOS-Next-Knowledge-Mask-Gradient-Stack-Layout-Alignment-Top-Image-Clipping-Emoji-Panel-Keyboard-Height-Monitoring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/620-Daily-HarmonyOS-Next-Knowledge-Mask-Gradient-Stack-Layout-Alignment-Top-Image-Clipping-Emoji-Panel-Keyboard-Height-Monitoring/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Mask Gradient, Stack Layout Alignment, Top Image Clipping, Emoji Panel, Keyboard Height Monitoring</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:33:33 / Modified: 12:25:02" itemprop="dateCreated datePublished" datetime="2025-06-25T11:33:33+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Mask-Gradient-Stack-Layout-Alignment-Top-Image-Clipping-Emoji-Panel-Keyboard-Height-Monitoring"><a href="#Daily-HarmonyOS-Next-Knowledge-Mask-Gradient-Stack-Layout-Alignment-Top-Image-Clipping-Emoji-Panel-Keyboard-Height-Monitoring" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Mask Gradient, Stack Layout Alignment, Top Image Clipping, Emoji Panel, Keyboard Height Monitoring"></a>[Daily HarmonyOS Next Knowledge] Mask Gradient, Stack Layout Alignment, Top Image Clipping, Emoji Panel, Keyboard Height Monitoring</h3><h4 id="1-Does-HarmonyOS-mask-support-gradients"><a href="#1-Does-HarmonyOS-mask-support-gradients" class="headerlink" title="1. Does HarmonyOS mask support gradients?"></a>1. Does HarmonyOS mask support gradients?</h4><p>Use <code>blendMode</code>. Refer to the example: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5</a>  </p>
<h4 id="2-Why-does-align-not-work-in-HarmonyOS-Stack"><a href="#2-Why-does-align-not-work-in-HarmonyOS-Stack" class="headerlink" title="2. Why does align not work in HarmonyOS Stack?"></a>2. Why does <code>align</code> not work in HarmonyOS Stack?</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">icon</span>: <span class="title class_">ResourceStr</span> = $r(<span class="string">&quot;app.media.startIcon&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">icon</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">TopStart</span>)</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">icon</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">TopEnd</span>)</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">icon</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">BottomStart</span>)</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">icon</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">BottomEnd</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">`</span>align<span class="string">` sets the alignment of child elements within the container&#x27;s drawing area, effective in `</span><span class="title class_">Stack</span><span class="string">`, `</span><span class="title class_">Button</span><span class="string">`, `</span><span class="title class_">Marquee</span><span class="string">`, `</span><span class="title class_">StepperItem</span><span class="string">`, `</span><span class="title class_">Text</span><span class="string">`, `</span><span class="title class_">TextArea</span><span class="string">`, `</span><span class="title class_">TextInput</span><span class="string">`, and `</span><span class="title class_">FolderStack</span><span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use Flex layout for alignment:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Row</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123; <span class="comment">// Container sets child elements to center</span></span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;alignSelf Start&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">    .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Start</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;alignSelf Baseline&#x27;</span>)</span><br><span class="line">    .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Baseline</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;alignSelf Baseline&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">    .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Baseline</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;no alignSelf&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;no alignSelf&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">&#125;</span><br><span class="line">.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">.<span class="title function_">height</span>(<span class="number">220</span>)</span><br><span class="line">.<span class="title function_">backgroundColor</span>(<span class="number">0xAFEEEE</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-layout-development-flex-layout-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to clip the top and left content of an Image in HarmonyOS using `</span>clip<span class="string">`?  </span></span><br><span class="line"><span class="string">Use `</span><span class="keyword">new</span> <span class="title class_">Path</span>()<span class="string">` to define a custom path:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.app_icon&#x27;</span>))</span><br><span class="line">  .<span class="title function_">clip</span>(<span class="keyword">new</span> <span class="title class_">Path</span>().<span class="title function_">commands</span>(<span class="string">&#x27;M50 50 H280 V280 H50 Z&#x27;</span>))</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;280px&#x27;</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;280px&#x27;</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS emoji panel and soft keyboard  </span></span><br><span class="line"><span class="string">1. In user comment scenarios, the comment panel and emoji panel should switch smoothly.  </span></span><br><span class="line"><span class="string">2. Transitions must be smooth without flickering (e.g., the comment box should not drop then pop up when the keyboard is hidden).  </span></span><br><span class="line"><span class="string">3. Input emojis should be compatible with system emojis. Can this be achieved with `</span><span class="title class_">InputText</span><span class="string">`/`</span><span class="title class_">InputArea</span><span class="string">`?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to: https://gitee.com/harmonyos-cases/cases/blob/master/CommonAppDevelopment/feature/wordrecognition/README.md  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to monitor keyboard height in HarmonyOS, move components up when the keyboard pops up, restore them when the keyboard is hidden, and control the avoidance height?  </span></span><br><span class="line"><span class="string">Refer to the example below:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// WebViewComponent.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">IAdjustOffsetParams</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../viewmodel/IAdjustOffsetParams&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// WebViewNode.ets</span></span><br><span class="line"><span class="keyword">import</span> web_webview <span class="keyword">from</span> <span class="string">&#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UIContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.ArkUI.UIContext&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BuilderNode</span>, <span class="title class_">FrameNode</span>, <span class="title class_">NodeController</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.ArkUI.node&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">WebViewComponent</span> <span class="keyword">from</span> <span class="string">&#x27;../view/WebViewComponent&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">WebBuilderParmas</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../viewmodel/WebBuilderParmas&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">WebViewNodeUpdateParams</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../viewmodel/WebViewNodeUpdateParams&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> struct <span class="title class_">WebViewComponent</span> &#123;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="meta">@Watch</span>(<span class="string">&#x27;onAdjustOffsetChange&#x27;</span>) <span class="attr">adjustOffset</span>: <span class="title class_">IAdjustOffsetParams</span> | <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">onAdjustOffsetChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">adjustOffset</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`TAG adjustOffset changed: x=<span class="subst">$&#123;<span class="variable language_">this</span>.adjustOffset.x&#125;</span> y=<span class="subst">$&#123;<span class="variable language_">this</span>.adjustOffset.y&#125;</span>`</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`TAG adjustOffset is null !`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">webBuilder</span>(<span class="params"><span class="attr">params</span>: <span class="title class_">WebBuilderParmas</span></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">WebViewComponent</span>(&#123;</span><br><span class="line">      <span class="attr">adjustOffset</span>: params.<span class="property">adjustOffset</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyNodeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">NodeController</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">rootNode</span>: <span class="title class_">BuilderNode</span>&lt;[<span class="title class_">WebBuilderParmas</span>]&gt; | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">wrapBuilder</span>: <span class="title class_">WrappedBuilder</span>&lt;[<span class="title class_">WebBuilderParmas</span>]&gt; = <span class="title function_">wrapBuilder</span>(webBuilder);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">makeNode</span>(<span class="attr">uiContext</span>: <span class="title class_">UIContext</span>): <span class="title class_">FrameNode</span> | <span class="literal">null</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">rootNode</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rootNode</span> = <span class="keyword">new</span> <span class="title class_">BuilderNode</span>(uiContext);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rootNode</span>.<span class="title function_">build</span>(<span class="variable language_">this</span>.<span class="property">wrapBuilder</span>, &#123; <span class="attr">text</span>: <span class="string">&quot;This is a Text&quot;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">rootNode</span>.<span class="title function_">getFrameNode</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateNode</span>(<span class="params"><span class="attr">updateParams</span>: <span class="title class_">WebViewNodeUpdateParams</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">params</span>: <span class="title class_">WebBuilderParmas</span> = &#123;</span><br><span class="line">      <span class="attr">adjustOffset</span>: updateParams.<span class="property">adjustOffset</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`TAG updateNode: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(params)&#125;</span>`</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rootNode</span>?.<span class="title function_">update</span>(params)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MainPage</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: web_webview.<span class="property">WebviewController</span> = <span class="keyword">new</span> web_webview.<span class="title class_">WebviewController</span>()</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">myNodeController</span>: <span class="title class_">MyNodeController</span> = <span class="keyword">new</span> <span class="title class_">MyNodeController</span>();</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">currX</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">currY</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">NodeContainer</span>(<span class="variable language_">this</span>.<span class="property">myNodeController</span>)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;click to update&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">currX</span> += <span class="number">100</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">currY</span> += <span class="number">100</span>;</span><br><span class="line">          <span class="keyword">const</span> <span class="attr">updateParams</span>: <span class="title class_">WebViewNodeUpdateParams</span> = &#123;</span><br><span class="line">            <span class="attr">adjustOffset</span>: &#123;</span><br><span class="line">              <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">currX</span>,</span><br><span class="line">              <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">currY</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">myNodeController</span>.<span class="title function_">updateNode</span>(updateParams)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Related parameters:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// IAdjustOffsetParams.ets</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">IAdjustOffsetParams</span> &#123;</span><br><span class="line">  <span class="attr">x</span>?: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">y</span>?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// WebBuilderParmas.ets</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WebBuilderParmas</span> &#123;</span><br><span class="line">  <span class="attr">adjustOffset</span>: <span class="title class_">IAdjustOffsetParams</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// WebViewNodeUpdateParams.ets</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WebViewNodeUpdateParams</span> &#123;</span><br><span class="line">  <span class="attr">adjustOffset</span>: <span class="title class_">IAdjustOffsetParams</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/619-Daily-HarmonyOS-Next-Knowledge-Page-Lifecycle-Monitoring-Scroll-Usage-Disabling-List-Scrolling-Single-Page-Full-Screen-Setting-Reference-Counting-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/619-Daily-HarmonyOS-Next-Knowledge-Page-Lifecycle-Monitoring-Scroll-Usage-Disabling-List-Scrolling-Single-Page-Full-Screen-Setting-Reference-Counting-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Page Lifecycle Monitoring, Scroll Usage, Disabling List Scrolling, Single Page Full Screen Setting, Reference Counting Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:29:51 / Modified: 11:30:46" itemprop="dateCreated datePublished" datetime="2025-06-25T11:29:51+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Page-Lifecycle-Monitoring-Scroll-Usage-Disabling-List-Scrolling-Single-Page-Full-Screen-Setting-Reference-Counting-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Page-Lifecycle-Monitoring-Scroll-Usage-Disabling-List-Scrolling-Single-Page-Full-Screen-Setting-Reference-Counting-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Page Lifecycle Monitoring, Scroll Usage, Disabling List Scrolling, Single Page Full Screen Setting, Reference Counting Issues"></a>[Daily HarmonyOS Next Knowledge] Page Lifecycle Monitoring, Scroll Usage, Disabling List Scrolling, Single Page Full Screen Setting, Reference Counting Issues</h3><h4 id="1-How-to-monitor-the-lifecycle-of-a-specific-page-in-HarmonyOS"><a href="#1-How-to-monitor-the-lifecycle-of-a-specific-page-in-HarmonyOS" class="headerlink" title="1. How to monitor the lifecycle of a specific page in HarmonyOS?"></a>1. How to monitor the lifecycle of a specific page in HarmonyOS?</h4><ol>
<li>Refer to invisible monitoring: NavDestinationInfo: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-observer-V5</a>  </li>
<li>For lifecycle monitoring of a single page, refer to the page lifecycle methods: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5</a></li>
</ol>
<p><strong>Page Lifecycle</strong> (for components decorated with @Entry):  </p>
<ul>
<li><strong>onPageShow</strong>: Triggered once every time the page is displayed, including routing and app foreground scenarios.  </li>
<li><strong>onPageHide</strong>: Triggered once every time the page is hidden, including routing and app background scenarios.  </li>
<li><strong>onBackPress</strong>: Triggered when the user clicks the back button.</li>
</ul>
<p><strong>Component Lifecycle</strong> (for custom components decorated with @Component):  </p>
<ul>
<li><strong>aboutToAppear</strong>: Called before the component appears, after creating a new instance and before executing <code>build()</code>.  </li>
<li><strong>onDidBuild</strong>: Called after the component’s <code>build()</code> completes. Use for non-UI operations like data reporting. Avoid state changes or animations here to prevent unstable UI behavior.  </li>
<li><strong>aboutToDisappear</strong>: Called before the component is destroyed. Do not modify state variables, especially @Link variables, to avoid instability.</li>
</ul>
<p>The lifecycle flow for @Entry-decorated components (pages) is shown below:<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.06.19.png"></p>
<h4 id="2-Why-doesn’t-scrollToIndex-trigger-the-onScroll-callback-in-HarmonyOS-Scroller"><a href="#2-Why-doesn’t-scrollToIndex-trigger-the-onScroll-callback-in-HarmonyOS-Scroller" class="headerlink" title="2. Why doesn’t scrollToIndex trigger the onScroll callback in HarmonyOS Scroller?"></a>2. Why doesn’t <code>scrollToIndex</code> trigger the <code>onScroll</code> callback in HarmonyOS Scroller?</h4><p>In a List, <code>scrollToIndex</code> does not trigger the <code>onScroll</code> callback, while <code>scrollTo</code> does. <code>scrollToIndex</code> jumps directly to the target element without animation by default, thus not triggering the callback.  </p>
<p><strong>Solution</strong>: Add animation by setting the second parameter of <code>scrollToIndex</code> to <code>true</code>:  </p>
<pre><code class="language-typescript">List(&#123;
  space: 3,
  scroller: this.scroller,
&#125;) &#123;
  LazyForEach(this.data, (item: string, index: number) =&gt; &#123;
    ListItem() &#123;
      MyListItem(&#123; item &#125;)
        .onClick(() =&gt; &#123;
          this.scroller.scrollToIndex(index, true) // Add animation to trigger callbacks
        &#125;)
    &#125;
  &#125;, (item: string) =&gt; item)
&#125;
.onScroll((xOffset: number, yOffset: number) =&gt; &#123;
  console.info(&#39;onScroll&#39;, yOffset)
&#125;)
.onDidScroll((xOffset: number, yOffset: number) =&gt; &#123;
  console.info(&#39;onDidScroll&#39;, yOffset)
&#125;)
</code></pre>
<h4 id="3-How-to-dynamically-disable-scrolling-for-a-List-in-HarmonyOS"><a href="#3-How-to-dynamically-disable-scrolling-for-a-List-in-HarmonyOS" class="headerlink" title="3. How to dynamically disable scrolling for a List in HarmonyOS?"></a>3. How to dynamically disable scrolling for a List in HarmonyOS?</h4><p>When the finger slides down, the page follows. When sliding up, both the page and List scroll. To dynamically control List scrolling:  </p>
<p>Use the <code>enableScrollInteraction</code> method: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5</a>  </p>
<h4 id="4-Is-there-a-way-to-set-full-screen-non-full-screen-for-a-single-page-without-affecting-others-in-HarmonyOS"><a href="#4-Is-there-a-way-to-set-full-screen-non-full-screen-for-a-single-page-without-affecting-others-in-HarmonyOS" class="headerlink" title="4. Is there a way to set full screen&#x2F;non-full screen for a single page without affecting others in HarmonyOS?"></a>4. Is there a way to set full screen&#x2F;non-full screen for a single page without affecting others in HarmonyOS?</h4><p><strong>Solution</strong>: Set full screen in <code>onPageShow</code> and reset in <code>onPageHide</code>:  </p>
<pre><code class="language-typescript">import &#123; window &#125; from &#39;@kit.ArkUI&#39;

@Entry
@Component
struct Page2 &#123;
  onPageShow(): void &#123;
    window.getLastWindow(getContext(this), (err, win) =&gt; &#123;
      win.setWindowLayoutFullScreen(true)
    &#125;)
  &#125;

  onPageHide(): void &#123;
    window.getLastWindow(getContext(this), (err, win) =&gt; &#123;
      win.setWindowLayoutFullScreen(false)
    &#125;)
  &#125;

  build() &#123;
    Column() &#123;
      Text(&#39;Full screen page....&#39;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(Color.Green)
  &#125;
&#125;
</code></pre>
<h4 id="5-Does-the-HarmonyOS-API-OH-NativerWindow-CreateNativeWindowFromSurfaceId-increment-the-reference-count"><a href="#5-Does-the-HarmonyOS-API-OH-NativerWindow-CreateNativeWindowFromSurfaceId-increment-the-reference-count" class="headerlink" title="5. Does the HarmonyOS API OH_NativerWindow_CreateNativeWindowFromSurfaceId() increment the reference count?"></a>5. Does the HarmonyOS API <code>OH_NativerWindow_CreateNativeWindowFromSurfaceId()</code> increment the reference count?</h4><p><strong>Yes</strong>, it increments the reference count by 1.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/618-Daily-HarmonyOS-Next-Knowledge-Scroll-Events-Pixel-Units-Radius-Removal-Frame-Capture-Component-Reuse/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/618-Daily-HarmonyOS-Next-Knowledge-Scroll-Events-Pixel-Units-Radius-Removal-Frame-Capture-Component-Reuse/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Scroll Events, Pixel Units, Radius Removal, Frame Capture, Component Reuse</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 11:27:28 / Modified: 11:28:06" itemprop="dateCreated datePublished" datetime="2025-06-25T11:27:28+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Scroll-Events-Pixel-Units-Radius-Removal-Frame-Capture-Component-Reuse"><a href="#Daily-HarmonyOS-Next-Knowledge-Scroll-Events-Pixel-Units-Radius-Removal-Frame-Capture-Component-Reuse" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Scroll Events, Pixel Units, Radius Removal, Frame Capture, Component Reuse"></a>[Daily HarmonyOS Next Knowledge] Scroll Events, Pixel Units, Radius Removal, Frame Capture, Component Reuse</h3><h4 id="1-Does-HarmonyOS-Scroll-support-onendreachedthreshold-with-the-endreached-event-How-to-trigger-the-endreached-event-based-on-the-distance-from-the-bottom"><a href="#1-Does-HarmonyOS-Scroll-support-onendreachedthreshold-with-the-endreached-event-How-to-trigger-the-endreached-event-based-on-the-distance-from-the-bottom" class="headerlink" title="1. Does HarmonyOS Scroll support onendreachedthreshold with the endreached event? How to trigger the endreached event based on the distance from the bottom?"></a>1. Does HarmonyOS Scroll support onendreachedthreshold with the endreached event? How to trigger the endreached event based on the distance from the bottom?</h4><p>The component can be implemented by judging the offset. Refer to the demo below:  </p>
<pre><code class="language-typescript">import display from &#39;@ohos.display&#39;;

@Entry
@Component
struct page240510141709017 &#123;
  scroller: Scroller = new Scroller()
  @State yOffset: number = 0
  @State yPosition: number = 150
  private arr: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
  private childH: number = 0
  private screenH: number = 0

  build() &#123;
    Column() &#123;
      Scroll(this.scroller) &#123;
        Column() &#123;
          ForEach(this.arr, (item: number) =&gt; &#123;
            Text(item.toString())
              .width(&#39;90%&#39;)
              .height(150)
              .backgroundColor(0xFFFFFF)
              .borderRadius(15)
              .fontSize(16)
              .textAlign(TextAlign.Center)
              .margin(&#123; top: 10 &#125;)
          &#125;, (item: string) =&gt; item)
        &#125;
        .width(&#39;100%&#39;)
        .onAppear(() =&gt; &#123;
          this.childH = this.scroller.getItemRect(0).height
          console.log(&#39;this.childH&#39;, this.childH)
        &#125;)
      &#125;
      .scrollable(ScrollDirection.Vertical) // Vertical scrolling direction
      .scrollBar(BarState.On) // Scrollbar always visible
      .scrollBarColor(Color.Gray) // Scrollbar color
      .scrollBarWidth(10) // Scrollbar width
      .friction(0.6)
      .edgeEffect(EdgeEffect.None)
      .width(&#39;100%&#39;)
      .height(&#39;100%&#39;)
      .onDidScroll(() =&gt; &#123;
        if (!this.screenH) &#123;
          let displayClass: display.Display | null = null;
          displayClass = display.getDefaultDisplaySync()
          this.screenH = px2vp(displayClass.height)
          console.log(&#39;this.screenH&#39;, this.screenH)
        &#125;
        const yCurrentOffset = this.scroller.currentOffset().yOffset
        console.log(&#39;yCurrentOffset&#39;, yCurrentOffset)
        if (yCurrentOffset &lt; 100) &#123;
          console.log(&#39;is &lt; top 100&#39;)
        &#125; else if (yCurrentOffset &gt; this.childH - this.screenH - 100) &#123;
          console.log(&#39;is &gt; bottom 100&#39;)
        &#125;
      &#125;)
    &#125;.width(&#39;100%&#39;).height(&#39;100%&#39;).backgroundColor(0xDCDCDC)
  &#125;
&#125;
</code></pre>
<h4 id="2-Conversion-and-verification-of-pixel-units-in-HarmonyOS"><a href="#2-Conversion-and-verification-of-pixel-units-in-HarmonyOS" class="headerlink" title="2. Conversion and verification of pixel units in HarmonyOS"></a>2. Conversion and verification of pixel units in HarmonyOS</h4><p>Conversion between vp and px, and how to verify the correctness of the conversion.  </p>
<ul>
<li>Introduction to pixel units: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/design/ux-design/visual-basis.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/design/ux-design/visual-basis.md</a>  </li>
<li>Pixel unit conversion: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-pixel-units.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-pixel-units.md</a>  </li>
<li>Pixel unit conversion verification reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/key-features/multi-device-app-dev/typical-layout-scenario.md#%E4%B8%89%E5%88%86%E6%A0%8F">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/key-features/multi-device-app-dev/typical-layout-scenario.md#%E4%B8%89%E5%88%86%E6%A0%8F</a></li>
</ul>
<p>Convert length units from px to vp:<br><code>let windowWidthVp = windowWidth / (display.getDefaultDisplaySync().densityDPI / 160)</code>  </p>
<h4 id="3-How-to-remove-rounded-corners-from-bindPopup-in-HarmonyOS"><a href="#3-How-to-remove-rounded-corners-from-bindPopup-in-HarmonyOS" class="headerlink" title="3. How to remove rounded corners from bindPopup in HarmonyOS?"></a>3. How to remove rounded corners from bindPopup in HarmonyOS?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-popup.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-popup.md</a>  </p>
<p>Set the bubble corner radius through the <code>radius</code> attribute.  </p>
<h4 id="4-Does-HarmonyOS-xcomponent-have-an-API-to-capture-a-specific-frame-within-the-xcomponent"><a href="#4-Does-HarmonyOS-xcomponent-have-an-API-to-capture-a-specific-frame-within-the-xcomponent" class="headerlink" title="4. Does HarmonyOS xcomponent have an API to capture a specific frame within the xcomponent?"></a>4. Does HarmonyOS xcomponent have an API to capture a specific frame within the xcomponent?</h4><p>The XComponent itself does not have a related interface. Please refer to whether the <code>image.createPixelMapFromSurface</code> interface meets your needs:  </p>
<p>Documentation link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-image-V5#imagecreatepixelmapfromsurface11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-image-V5#imagecreatepixelmapfromsurface11</a>  </p>
<p><code>createPixelMapFromSurface(surfaceId: string, region: Region): Promise&lt;PixelMap&gt;</code>  </p>
<p>Creates a PixelMap object based on the Surface ID and region information. The region size is specified by <code>Region.size</code>, returned as a Promise.  </p>
<h4 id="5-How-to-avoid-attribute-value-conflicts-when-reusing-HarmonyOS-components"><a href="#5-How-to-avoid-attribute-value-conflicts-when-reusing-HarmonyOS-components" class="headerlink" title="5. How to avoid attribute value conflicts when reusing HarmonyOS components?"></a>5. How to avoid attribute value conflicts when reusing HarmonyOS components?</h4><p>Dynamic attributes can be used to set component properties to avoid conflicts: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-attribute-modifier.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-attribute-modifier.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">285</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
