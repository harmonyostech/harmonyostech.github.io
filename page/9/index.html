<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/9/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41023-Daily-HarmonyOS-Next-Knowledge-Static-Variable-Initialization-Custom-Dialog-Attributes-Floating-Menu-Invocation-Multi-Account-Management-Enterprise-App-Release/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41023-Daily-HarmonyOS-Next-Knowledge-Static-Variable-Initialization-Custom-Dialog-Attributes-Floating-Menu-Invocation-Multi-Account-Management-Enterprise-App-Release/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Static Variable Initialization, Custom Dialog Attributes, Floating Menu Invocation, Multi-Account Management, Enterprise App Release</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:13:16 / Modified: 10:13:39" itemprop="dateCreated datePublished" datetime="2025-06-29T10:13:16+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Static-Variable-Initialization-Custom-Dialog-Attributes-Floating-Menu-Invocation-Multi-Account-Management-Enterprise-App-Release"><a href="#Daily-HarmonyOS-Next-Knowledge-Static-Variable-Initialization-Custom-Dialog-Attributes-Floating-Menu-Invocation-Multi-Account-Management-Enterprise-App-Release" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Static Variable Initialization, Custom Dialog Attributes, Floating Menu Invocation, Multi-Account Management, Enterprise App Release"></a>[Daily HarmonyOS Next Knowledge] Static Variable Initialization, Custom Dialog Attributes, Floating Menu Invocation, Multi-Account Management, Enterprise App Release</h1><h4 id="1-HarmonyOS-Defining-an-environment-variable-enum-with-static-causes-an-uninitialized-prompt"><a href="#1-HarmonyOS-Defining-an-environment-variable-enum-with-static-causes-an-uninitialized-prompt" class="headerlink" title="1. HarmonyOS: Defining an environment variable enum with static causes an uninitialized prompt"></a>1. HarmonyOS: Defining an environment variable enum with static causes an uninitialized prompt</h4><p>When defining an environment variable enum decorated with <code>static</code>, an uninitialized prompt appears. How to use static to initialize environment variables within a class?  </p>
<p>The variable can only be used after importing the defined <code>Environment</code>:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// Model.Configs.ets</span><br><span class="line">import &#123; Environment &#125; from &#x27;./InterfaceTest&#x27;</span><br><span class="line">export class Configs &#123;</span><br><span class="line">  static environment: Environment = Environment.preRelease</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Model.InterfaceTest.ets</span><br><span class="line">export enum Environment&#123;</span><br><span class="line">  preRelease = 1</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. How to call custom attributes in HarmonyOS custom dialogs?  </span><br><span class="line">For a custom privacy policy `customdialog` pop-up on the welcome page, how to center it (currently defaulting to the bottom)?  </span><br><span class="line"></span><br><span class="line">Configure `alignment: DialogAlignment`; refer to the document:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5  </span><br><span class="line"></span><br><span class="line">#### 3. How to invoke the HarmonyOS menu floating window?  </span><br><span class="line">A business-encapsulated `TitleBar` component accepts `Resource`-type icons and exposes `iconClick` events. The official API `.bindMenu(this.MyMenu)` is inapplicable here. Are there alternative approaches?  </span><br><span class="line"></span><br><span class="line">**Demo**:  </span><br></pre></td></tr></table></figure>
<ol>
<li>TitleBar.ets<br>export default struct TitleBar {<br>  @Prop title:  string &#x3D; “”;<br>  @Prop icon: Resource | string &#x3D; “”;<br>  iconClick?: (() &#x3D;&gt; void);<br>  backClick?: (() &#x3D;&gt; void);</li>
</ol>
<p>  build() {<br>  }<br>}</p>
<ol start="2">
<li>Business usage<br>TitleBar({<br>  title: this.label,<br>  icon: $r(‘app.media.sort_icon’),<br>  iconClick: () &#x3D;&gt; {</li>
</ol>
<p>  },<br>  backClick: () &#x3D;&gt; {<br>    router.back()<br>  }<br>})</p>
<pre><code>
Set the trigger mode of the custom menu via the `responseType` parameter in the `bindContextMenu` attribute; refer to the document:  
https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-menu-V5  

#### 4. HarmonyOS app project configuration: Can project and app management under an account support multi-account management?  
Refer to the document on team accounts to set permissions for corresponding sub-accounts based on actual needs:  
https://developer.huawei.com/consumer/cn/doc/app/agc-help-account-overview-0000001146516647  
![](../images/【每日学点鸿蒙知识】24.10.23.png)

#### 5. For HarmonyOS enterprise apps published internally, if applied for上架 (release), can enterprise apps and released versions overwrite each other during installation?  
Enterprise apps and AppGallery apps must have different package names and are not the same app, so upgrades between them are impossible. For gray-scale release needs, check if invitation testing suits your requirements:  
https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-testapp-0000001873653977
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41024-Daily-HarmonyOS-Next-Knowledge-Obfuscation-Configuration-Main-Thread-Handling-Large-Data-Client-Drag-Effect-Third-Party-Website-Loading-Styles-List-Warning-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41024-Daily-HarmonyOS-Next-Knowledge-Obfuscation-Configuration-Main-Thread-Handling-Large-Data-Client-Drag-Effect-Third-Party-Website-Loading-Styles-List-Warning-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Obfuscation Configuration, Main Thread Handling Large Data, Client Drag Effect, Third-Party Website Loading Styles, List Warning Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:12:07 / Modified: 10:12:38" itemprop="dateCreated datePublished" datetime="2025-06-29T10:12:07+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Obfuscation-Configuration-Main-Thread-Handling-Large-Data-Client-Drag-Effect-Third-Party-Website-Loading-Styles-List-Warning-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Obfuscation-Configuration-Main-Thread-Handling-Large-Data-Client-Drag-Effect-Third-Party-Website-Loading-Styles-List-Warning-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Obfuscation Configuration, Main Thread Handling Large Data, Client Drag Effect, Third-Party Website Loading Styles, List Warning Issues"></a>[Daily HarmonyOS Next Knowledge] Obfuscation Configuration, Main Thread Handling Large Data, Client Drag Effect, Third-Party Website Loading Styles, List Warning Issues</h1><h4 id="1-Missing-obfuscation-configuration-file-after-HarmonyOS-API-upgrade"><a href="#1-Missing-obfuscation-configuration-file-after-HarmonyOS-API-upgrade" class="headerlink" title="1. Missing obfuscation configuration file after HarmonyOS API upgrade?"></a>1. Missing obfuscation configuration file after HarmonyOS API upgrade?</h4><p>Refer to the following documents:  </p>
<ul>
<li>Obfuscation configuration: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-build-obfuscation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-build-obfuscation-V5</a>  </li>
<li>Obfuscation rules: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/arkcompiler_ets_frontend/blob/master/arkguard/README-cn.md">https://gitee.com/openharmony/arkcompiler_ets_frontend/blob/master/arkguard/README-cn.md</a></li>
</ul>
<h4 id="2-HarmonyOS-main-thread-freezes-when-processing-large-data"><a href="#2-HarmonyOS-main-thread-freezes-when-processing-large-data" class="headerlink" title="2. HarmonyOS main thread freezes when processing large data?"></a>2. HarmonyOS main thread freezes when processing large data?</h4><p>After requesting data from the server, decryption is required. If the data volume is large (coordinates for hundreds of kilometers), parsing on the main thread may cause freezing or crashes. How to handle this correctly?<br><code>this.dataProcessor.process(result)</code> is a time-consuming operation, possibly taking over 5 seconds for large data.  </p>
<p><strong>TaskPool considerations</strong>:  </p>
<ul>
<li>The function implementing the task must be annotated with <code>@Concurrent</code> and can only be used in .ets files.  </li>
<li>Starting from API version 11, if the task function uses a class method, the class must be annotated with <code>@Sendable</code> and can only be used in .ets files.  </li>
<li>The execution time of the task function in the TaskPool worker thread must not exceed 3 minutes (excluding the time for Promise and async&#x2F;await asynchronous calls, such as network downloads or file I&#x2F;O operations), or it will be forcefully terminated.  </li>
<li>The input parameters of the task function must support serializable types (see TaskPool and Worker supported serializable types for details).  </li>
<li>ArrayBuffer parameters are transferred by default in TaskPool; use <code>setTransferList()</code> to set the transfer list if needed.  </li>
<li>Since context objects differ across threads, TaskPool worker threads can only use thread-safe libraries (e.g., non-thread-safe UI-related libraries are prohibited; see multithreading safety considerations for details).  </li>
<li>The data size limit for serialization is 16MB. Confirm whether TaskPool is used as required: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/taskpool-introduction-V5#taskpool%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/taskpool-introduction-V5#taskpool%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6</a></li>
</ul>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.10.24.png"></p>
<h4 id="3-How-to-implement-client-drag-effects-in-HarmonyOS"><a href="#3-How-to-implement-client-drag-effects-in-HarmonyOS" class="headerlink" title="3. How to implement client drag effects in HarmonyOS?"></a>3. How to implement client drag effects in HarmonyOS?</h4><p>For drag effects in screen recording, refer to the Grid component example:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-V5</a>  </p>
<h4 id="4-When-loading-third-party-websites-in-HarmonyOS-some-display-the-PC-version"><a href="#4-When-loading-third-party-websites-in-HarmonyOS-some-display-the-PC-version" class="headerlink" title="4. When loading third-party websites in HarmonyOS, some display the PC version?"></a>4. When loading third-party websites in HarmonyOS, some display the PC version?</h4><p>Obtain the system UA using <code>getUserAgent</code>, then override it with <code>setCustomUserAgent</code>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#getuseragent">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-webview-V5#getuseragent</a>  </p>
<h4 id="5-HarmonyOS-List-warning-“You-are-advised-to-initialize-the-width-and-height-attributes-of-the-List-component-”"><a href="#5-HarmonyOS-List-warning-“You-are-advised-to-initialize-the-width-and-height-attributes-of-the-List-component-”" class="headerlink" title="5. HarmonyOS List warning: “You are advised to initialize the width and height attributes of the List component.”"></a>5. HarmonyOS List warning: “You are advised to initialize the width and height attributes of the List component.”</h4><pre><code class="language-typescript">List() &#123;
  ForEach(this.middleList, (data: MineItem) =&gt; &#123;
    ListItem() &#123;
      Row() &#123;
        Image($r(data.icon))
          .width(20)
        Text(data.title)
          .fontSize(&#39;15&#39;)
          .fontColor(&#39;#000000&#39;)
          .margin(&#123; left: 15 &#125;)
        Blank()
        Image($r(&#39;app.media.mine_enter&#39;))
          .width(10)
      &#125;
      .width(&#39;100%&#39;)
      .height(50)
    &#125;
  &#125;)
&#125;
.padding(&#123; left: 15, right: 15 &#125;)
.width(&#39;100%&#39;)
.margin(&#123; top: 15 &#125;)
.backgroundColor(&#39;#ffffff&#39;)
.borderRadius(10)
</code></pre>
<p><strong>Explanation</strong>:<br>This warning does not affect actual usage. If the height is not initialized, the List component adapts to the content height, but this may cause incomplete display in some cases. Set the <code>layoutWeight</code> attribute (requires the parent component to have a fixed height) to allocate the parent component’s size proportionally with sibling components.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41025-Daily-HarmonyOS-Next-Knowledge-Image-Control-Alignment-Inability-to-Launch-App-Details-Page-for-Published-Apps-RotateOptions-Configuration-Signature-Configuration-Issues-Popup-Background-Color/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41025-Daily-HarmonyOS-Next-Knowledge-Image-Control-Alignment-Inability-to-Launch-App-Details-Page-for-Published-Apps-RotateOptions-Configuration-Signature-Configuration-Issues-Popup-Background-Color/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Image Control Alignment, Inability to Launch App Details Page for Published Apps, RotateOptions Configuration, Signature Configuration Issues, Popup Background Color</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:11:13 / Modified: 10:11:35" itemprop="dateCreated datePublished" datetime="2025-06-29T10:11:13+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Image-Control-Alignment-Inability-to-Launch-App-Details-Page-for-Published-Apps-RotateOptions-Configuration-Signature-Configuration-Issues-Popup-Background-Color"><a href="#Daily-HarmonyOS-Next-Knowledge-Image-Control-Alignment-Inability-to-Launch-App-Details-Page-for-Published-Apps-RotateOptions-Configuration-Signature-Configuration-Issues-Popup-Background-Color" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Image Control Alignment, Inability to Launch App Details Page for Published Apps, RotateOptions Configuration, Signature Configuration Issues, Popup Background Color"></a>[Daily HarmonyOS Next Knowledge] Image Control Alignment, Inability to Launch App Details Page for Published Apps, RotateOptions Configuration, Signature Configuration Issues, Popup Background Color</h1><h4 id="1-Does-the-HarmonyOS-asynchronous-interface-start-a-child-thread-to-execute-its-logic"><a href="#1-Does-the-HarmonyOS-asynchronous-interface-start-a-child-thread-to-execute-its-logic" class="headerlink" title="1. Does the HarmonyOS asynchronous interface start a child thread to execute its logic?"></a>1. Does the HarmonyOS asynchronous interface start a child thread to execute its logic?</h4><p>The asynchronous mechanism in ArkTS executes tasks only on a single thread (main thread). Its asynchronous mechanism is consistent with JavaScript, implemented through threads provided by the host environment (napi, with interfaces consistent with nodejs), i.e., via EventLoop.  </p>
<p>EventLoop monitors the call stack and callback queue cyclically. If the call stack is empty, it fetches the first event from the callback queue and pushes it onto the call stack.  </p>
<p>Take <code>setTimeout</code> as an example:  </p>
<pre><code>console.log(&#39;Hi&#39;);  
setTimeout(function cb1() &#123; console.log(&#39;cb1&#39;); &#125;, 5000);  
console.log(&#39;Bye&#39;);
</code></pre>
<p>Execution order:  </p>
<ul>
<li><code>console.log(&#39;Hi&#39;);</code> is added to the call stack, executed, and then removed.  </li>
<li><code>setTimeout(function cb1() &#123; ... &#125;)</code> is added to the call stack. When executed, the host environment creates a timer. After execution, it is removed from the call stack.  </li>
<li>After at least 5000ms, the timer expires, adding the <code>cb1</code> callback to the callback queue. EventLoop retrieves <code>cb1</code> from the callback queue and pushes it to the call stack.</li>
</ul>
<p><strong>Note</strong>: The time set in <code>setTimeout</code> is when the callback is placed in the callback queue, not when the callback function is executed (EventLoop only fetches from the call stack when it is empty).  </p>
<p>The execution order is the same as JavaScript, with both Macrotask and Microtask queues. Macrotasks include <code>setTimeout</code> and <code>setInterval</code>, while microtasks include ordinary callback functions and Promise-related functions.  </p>
<p>Execution sequence:  </p>
<ol>
<li>Dequeue and execute the earliest macrotask (only one at a time).  </li>
<li>Execute all microtasks: dequeue and execute the earliest microtask when the microtask queue is non-empty.  </li>
<li>Continue checking if the microtask queue is empty (newly created microtasks enter the queue immediately and execute without waiting for the next cycle).  </li>
<li>If there are changes, render them.  </li>
<li>If the macrotask queue is empty, sleep until a macrotask appears, then go to step 1.</li>
</ol>
<p><strong>Example</strong>:  </p>
<pre><code class="language-typescript">setTimeout(() =&gt; hilog.debug(0, TAG, &quot;timeout&quot;));  
new Promise&lt;void&gt;((resolve, reject) =&gt; &#123; hilog.debug(0, TAG, &quot;resolve&quot;); resolve(); &#125;)  
.then(() =&gt; hilog.debug(0, TAG, &quot;promise&quot;));  
hilog.debug(0, TAG, &quot;code&quot;);
</code></pre>
<p>Execution order:  </p>
<ul>
<li><code>resolve</code> is displayed first because the code inside the Promise executes synchronously.  </li>
<li><code>code</code> is displayed next as a regular synchronous call.  </li>
<li><code>promise</code> appears second because <code>then</code> uses the microtask queue and executes after the current code.  </li>
<li><code>timeout</code> is displayed last as a macrotask.</li>
</ul>
<h4 id="2-When-uploading-an-app-file-in-HarmonyOS-an-error-996-occurs-What’s-the-cause"><a href="#2-When-uploading-an-app-file-in-HarmonyOS-an-error-996-occurs-What’s-the-cause" class="headerlink" title="2. When uploading an app file in HarmonyOS, an error 996 occurs. What’s the cause?"></a>2. When uploading an app file in HarmonyOS, an error 996 occurs. What’s the cause?</h4><p>Missing resource icons in the <code>media</code> directory.  </p>
<h4 id="3-Demo-for-HarmonyOS-Web-cookie-and-data-storage-management-Cookie-management-cache-storage-management-Dom-Storage"><a href="#3-Demo-for-HarmonyOS-Web-cookie-and-data-storage-management-Cookie-management-cache-storage-management-Dom-Storage" class="headerlink" title="3. Demo for HarmonyOS Web cookie and data storage management (Cookie management&#x2F;cache storage management&#x2F;Dom Storage)?"></a>3. Demo for HarmonyOS Web cookie and data storage management (Cookie management&#x2F;cache storage management&#x2F;Dom Storage)?</h4><p>For cookie and data storage management, refer to the documentation:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cookie-and-data-storage-mgmt-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-cookie-and-data-storage-mgmt-V5</a>  </p>
<h4 id="4-How-to-customize-the-app-name-configuration-in-HarmonyOS"><a href="#4-How-to-customize-the-app-name-configuration-in-HarmonyOS" class="headerlink" title="4. How to customize the app name configuration in HarmonyOS?"></a>4. How to customize the app name configuration in HarmonyOS?</h4><p>To configure different parameters for different compilation environments (e.g., development, testing, and production packages), set different app names for these environments.  </p>
<ul>
<li><code>module.json5</code> in the <code>entry</code> module is module-level.  </li>
<li><code>build-profile.json5</code> at the project root is project (app)-level.  </li>
<li>The <code>label</code> under <code>app</code> in the <code>module.json</code> of the HAP package after building the APP is the <code>label</code> specified in <code>products</code>. The <code>label</code> under <code>module\abilities</code> is configured in the module-level <code>module.json5</code>.  </li>
<li>Resource files in <code>build-profile.json5</code> should be defined in the <code>resources</code> directory under <code>AppScope</code>.</li>
</ul>
<h4 id="5-Can-ActionSheetOptions-support-no-title-and-only-configuration-of-options-Can-option-styles-be-customized"><a href="#5-Can-ActionSheetOptions-support-no-title-and-only-configuration-of-options-Can-option-styles-be-customized" class="headerlink" title="5. Can ActionSheetOptions support no title and only configuration of options? Can option styles be customized?"></a>5. Can ActionSheetOptions support no title and only configuration of options? Can option styles be customized?</h4><ul>
<li>Pass an empty string for <code>title</code> to hide the title, showing only descriptions and options.  </li>
<li>Customizing option styles is not supported. For custom styles, use a custom dialog (e.g., <code>customDialog</code>).</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41027-Daily-HarmonyOS-Next-Knowledge-Introduction-to-Asynchronous-Operations-Upload-App-Errors-Web-Control-Interfaces-Custom-App-Name-Configuration-and-ActionSheetOptions-Customization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41027-Daily-HarmonyOS-Next-Knowledge-Introduction-to-Asynchronous-Operations-Upload-App-Errors-Web-Control-Interfaces-Custom-App-Name-Configuration-and-ActionSheetOptions-Customization/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Introduction to Asynchronous Operations, Upload App Errors, Web Control Interfaces, Custom App Name Configuration, and ActionSheetOptions Customization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:10:01 / Modified: 10:10:37" itemprop="dateCreated datePublished" datetime="2025-06-29T10:10:01+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Introduction-to-Asynchronous-Operations-Upload-App-Errors-Web-Control-Interfaces-Custom-App-Name-Configuration-and-ActionSheetOptions-Customization"><a href="#Daily-HarmonyOS-Next-Knowledge-Introduction-to-Asynchronous-Operations-Upload-App-Errors-Web-Control-Interfaces-Custom-App-Name-Configuration-and-ActionSheetOptions-Customization" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Introduction to Asynchronous Operations, Upload App Errors, Web Control Interfaces, Custom App Name Configuration, and ActionSheetOptions Customization"></a>[Daily HarmonyOS Next Knowledge] Introduction to Asynchronous Operations, Upload App Errors, Web Control Interfaces, Custom App Name Configuration, and ActionSheetOptions Customization</h1><h4 id="1-How-to-align-the-Y-value-of-an-Image-control-with-the-status-bar-in-HarmonyOS"><a href="#1-How-to-align-the-Y-value-of-an-Image-control-with-the-status-bar-in-HarmonyOS" class="headerlink" title="1. How to align the Y value of an Image control with the status bar in HarmonyOS?"></a>1. How to align the Y value of an Image control with the status bar in HarmonyOS?</h4><p>To align the Y value of an Image component with the status bar, follow these steps:  </p>
<ol>
<li><strong>Get the status bar height</strong>: Use <code>getWindowAvoidArea</code> to obtain the status bar height.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#getwindowavoidarea9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#getwindowavoidarea9</a>  </li>
<li><strong>Adjust the Image control’s Y value</strong>: Set the Y value of the Image control to the status bar height plus an offset (adjust according to design requirements).  </li>
<li><strong>Ensure the Image control is above the status bar</strong>: Make sure the Y value is greater than or equal to the status bar height to align the Image control’s bottom with the status bar.</li>
</ol>
<h4 id="2-The-app-details-page-cannot-be-launched-for-an-already-published-HarmonyOS-app"><a href="#2-The-app-details-page-cannot-be-launched-for-an-already-published-HarmonyOS-app" class="headerlink" title="2. The app details page cannot be launched for an already published HarmonyOS app?"></a>2. The app details page cannot be launched for an already published HarmonyOS app?</h4><p>Use the Store Kit <code>loadProduct</code> interface to launch the details page:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/store-productview-V5#section729012543213">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/store-productview-V5#section729012543213</a>  </p>
<h4 id="3-Is-there-a-demo-for-using-perspective-in-RotateOptions"><a href="#3-Is-there-a-demo-for-using-perspective-in-RotateOptions" class="headerlink" title="3. Is there a demo for using perspective in RotateOptions?"></a>3. Is there a demo for using <code>perspective</code> in <code>RotateOptions</code>?</h4><p>Add the <code>perspective</code> parameter as shown in this example:  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-transformation-V5#ZH-CN_TOPIC_0000001893211777__%E7%A4%BA%E4%BE%8B">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-transformation-V5#ZH-CN_TOPIC_0000001893211777__%E7%A4%BA%E4%BE%8B</a><br>The <code>perspective</code> attribute represents the distance from the viewpoint to the z&#x3D;0 plane. Similar to an angle parallel to the z-axis, <code>rotate</code> defaults to rotating around the z-axis. Set the x or y parameter in the rotation options to see the effect. There is no specific value range for <code>perspective</code>.  </p>
<p><strong>Demo</strong>:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TransformExample</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>()</span><br><span class="line">        .<span class="title function_">rotate</span>(&#123;</span><br><span class="line">          <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">z</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">centerX</span>: <span class="string">&#x27;50%&#x27;</span>,</span><br><span class="line">          <span class="attr">centerY</span>: <span class="string">&#x27;50%&#x27;</span>,</span><br><span class="line">          <span class="attr">angle</span>: <span class="number">300</span>,</span><br><span class="line">          <span class="attr">perspective</span>: <span class="number">10</span></span><br><span class="line">        &#125;) <span class="comment">// Rotate the component 300 degrees clockwise around the vector (1,0,0) through the center</span></span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xAFEEEE</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">15</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Issues with `</span>signingConfig<span class="string">` during HarmonyOS debugging?  </span></span><br><span class="line"><span class="string">When creating a new project for testing, the `</span>signingConfig<span class="string">` auto-generated in `</span>build-profile.<span class="property">json5</span><span class="string">` is committed to Git, causing other devices to pull the previous device&#x27;s configuration.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solutions**:  </span></span><br><span class="line"><span class="string">1. IDE signatures are currently bound to a single device ID.  </span></span><br><span class="line"><span class="string">2. Upgrade the debug certificate on the AGC platform and bind all device IDs to it. This allows all IDEs to use the same AGC debug certificate instead of individual IDE signatures. The certificate can be reused unless new devices are added.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Setting `</span>backgroundColor<span class="string">` in `</span>bindContextMenu<span class="string">` does not work in HarmonyOS?  </span></span><br><span class="line"><span class="string">Attempting to change the default background color of the menu popup using `</span>backgroundColor<span class="string">` is ineffective. Modifying the root layout color of a custom menu fails to fill the menu&#x27;s corners.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Solution to modify the popup menu color**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BindContextMenuTest</span> &#123;</span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">MsgMenuBuilder</span>() &#123;</span><br><span class="line">    <span class="title class_">Menu</span>() &#123;</span><br><span class="line">      <span class="title class_">MenuItem</span>(&#123; <span class="attr">content</span>: <span class="string">&quot;menu&quot;</span> &#125;)</span><br><span class="line">        .<span class="title function_">contentFontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">        .<span class="title function_">labelFontColor</span>(<span class="title class_">Color</span>.<span class="property">Black</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(&#123;</span><br><span class="line">          <span class="attr">left</span>: <span class="number">15</span>,</span><br><span class="line">          <span class="attr">right</span>: <span class="number">15</span>,</span><br><span class="line">          <span class="attr">top</span>: <span class="number">5</span>,</span><br><span class="line">          <span class="attr">bottom</span>: <span class="number">5</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Long Press Text&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">150</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">bindContextMenu</span>(<span class="variable language_">this</span>.<span class="property">MsgMenuBuilder</span>, <span class="title class_">ResponseType</span>.<span class="property">LongPress</span>, &#123;</span><br><span class="line">          <span class="attr">enableArrow</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">placement</span>: <span class="title class_">Placement</span>.<span class="property">Bottom</span>,</span><br><span class="line">          <span class="attr">backgroundColor</span>: <span class="string">&quot;#2A2C2D&quot;</span>,</span><br><span class="line">          <span class="attr">preview</span>: <span class="title class_">MenuPreviewMode</span>.<span class="property">IMAGE</span>,</span><br><span class="line">          <span class="attr">previewAnimationOptions</span>: &#123; <span class="attr">scale</span>: [<span class="number">0.8</span>, <span class="number">1.0</span>] &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The arrow color in bindContextMenu cannot be set. It is recommended to use bindPopup instead of bindContextMenu and set the backgroundBlurStyle property to BlurStyle.NONE. Refer to the following example code:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BindPopUpTest</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">customPopup</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span> <span class="title function_">popupBuilder</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">2</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Menu</span>() &#123;</span><br><span class="line">        <span class="title class_">MenuItem</span>(&#123; <span class="attr">content</span>: <span class="string">&quot;menu1&quot;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        <span class="title class_">MenuItem</span>(&#123; <span class="attr">content</span>: <span class="string">&quot;menu2&quot;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">125</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;LongPress&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">gesture</span>(</span><br><span class="line">          <span class="title class_">LongPressGesture</span>(&#123; <span class="attr">repeat</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">            .<span class="title function_">onAction</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span> | <span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">customPopup</span> = !<span class="variable language_">this</span>.<span class="property">customPopup</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">        .<span class="title function_">bindPopup</span>(<span class="variable language_">this</span>.<span class="property">customPopup</span>, &#123;</span><br><span class="line">          <span class="attr">builder</span>: <span class="variable language_">this</span>.<span class="property">popupBuilder</span>,</span><br><span class="line">          <span class="attr">placement</span>: <span class="title class_">Placement</span>.<span class="property">Bottom</span>,</span><br><span class="line">          <span class="attr">popupColor</span>: <span class="title class_">Color</span>.<span class="property">Green</span>,</span><br><span class="line">          <span class="attr">mask</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">backgroundBlurStyle</span>: <span class="title class_">BlurStyle</span>.<span class="property">NONE</span>,</span><br><span class="line">          <span class="attr">enableArrow</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">onStateChange</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!e.<span class="property">isVisible</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">customPopup</span> = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41028-Daily-HarmonyOS-Next-Knowledge-Type-Judgment-three-js-Support-Grid-Drag-Control-Subwindow-Routing-and-Real-Device-Breakpoint-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41028-Daily-HarmonyOS-Next-Knowledge-Type-Judgment-three-js-Support-Grid-Drag-Control-Subwindow-Routing-and-Real-Device-Breakpoint-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Type Judgment, three.js Support, Grid Drag Control, Subwindow Routing, and Real Device Breakpoint Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:08:54 / Modified: 10:09:27" itemprop="dateCreated datePublished" datetime="2025-06-29T10:08:54+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Type-Judgment-three-js-Support-Grid-Drag-Control-Subwindow-Routing-and-Real-Device-Breakpoint-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-Type-Judgment-three-js-Support-Grid-Drag-Control-Subwindow-Routing-and-Real-Device-Breakpoint-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Type Judgment, three.js Support, Grid Drag Control, Subwindow Routing, and Real Device Breakpoint Issues"></a>[Daily HarmonyOS Next Knowledge] Type Judgment, three.js Support, Grid Drag Control, Subwindow Routing, and Real Device Breakpoint Issues</h1><h4 id="1-How-to-determine-Object-types-in-HarmonyOS-ArkTS"><a href="#1-How-to-determine-Object-types-in-HarmonyOS-ArkTS" class="headerlink" title="1. How to determine Object types in HarmonyOS ArkTS?"></a>1. How to determine Object types in HarmonyOS ArkTS?</h4><p>Entity types can be determined using <code>instanceof</code>. Here’s a demo:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct TestPage1 &#123;</span><br><span class="line">  @State list: Array&lt;Object&gt; = [new Cat(), new Dog()]</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        ForEach(this.list, (item: Object) =&gt; &#123;</span><br><span class="line">          if (item instanceof Cat) &#123;</span><br><span class="line">            Text(&quot;this is Cat&quot;)</span><br><span class="line">          &#125; else if (item instanceof Dog) &#123;</span><br><span class="line">            Text(&quot;this is Dog&quot;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat &#123; &#125;</span><br><span class="line">class Dog &#123; &#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 2. Does HarmonyOS webView support three.js?  </span><br><span class="line">Three.js is not currently supported. For 3D rendering, use the XComponent capability.  </span><br><span class="line">Reference for XComponent: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/napi-xcomponent-guidelines-V5  </span><br><span class="line"></span><br><span class="line">#### 3. Does HarmonyOS Grid support partial drag functionality (some content draggable, others not) when long-pressing?  </span><br><span class="line">Based on the description, refer to the following code where items 0-8 cannot be dragged or swapped:  </span><br></pre></td></tr></table></figure>
<p>@Entry<br>@Component<br>struct GridExample {<br>  @State numbers: string[] &#x3D; []<br>  scroller: Scroller &#x3D; new Scroller()<br>  @State text: string &#x3D; ‘drag’</p>
<p>  @Builder pixelMapBuilder() { &#x2F;&#x2F; Drag process style<br>    Column() {<br>      Text(this.text)<br>        .fontSize(16)<br>        .backgroundColor(0xF9CF93)<br>        .width(80)<br>        .height(80)<br>        .textAlign(TextAlign.Center)<br>    }<br>  }</p>
<p>  aboutToAppear() {<br>    for (let i &#x3D; 1; i &lt;&#x3D; 15; i++) {<br>      this.numbers.push(i + ‘’)<br>    }<br>  }</p>
<p>  changeIndex(index1: number, index2: number) { &#x2F;&#x2F; Swap array positions<br>    if (index2 &lt;&#x3D; 8) { &#x2F;&#x2F; Disallow swapping with items 0-8<br>      return<br>    }<br>    let temp: string;<br>    temp &#x3D; this.numbers[index1];<br>    this.numbers[index1] &#x3D; this.numbers[index2];<br>    this.numbers[index2] &#x3D; temp;<br>  }</p>
<p>  build() {<br>    Column({ space: 5 }) {<br>      Grid(this.scroller) {<br>        ForEach(this.numbers, (day: string) &#x3D;&gt; {<br>          GridItem() {<br>            Text(day)<br>              .fontSize(16)<br>              .backgroundColor(0xF9CF93)<br>              .width(80)<br>              .height(80)<br>              .textAlign(TextAlign.Center)<br>          }<br>        })<br>      }<br>      .columnsTemplate(‘1fr 1fr 1fr’)<br>      .columnsGap(10)<br>      .rowsGap(10)<br>      .width(‘90%’)<br>      .backgroundColor(0xFAEEE0)<br>      .height(300)<br>      .editMode(true) &#x2F;&#x2F; Enable edit mode for Grid to allow dragging GridItems<br>      .onItemDragStart((event: ItemDragInfo, itemIndex: number) &#x3D;&gt; { &#x2F;&#x2F; Callback on first drag<br>        if (itemIndex &lt;&#x3D; 8) { &#x2F;&#x2F; Items with index 0-8 cannot be dragged<br>          return<br>        }<br>        this.text &#x3D; this.numbers[itemIndex]<br>        return this.pixelMapBuilder() &#x2F;&#x2F; Set drag preview<br>      })<br>      .onItemDrop((event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) &#x3D;&gt; { &#x2F;&#x2F; Callback on drop<br>        if (!isSuccess || insertIndex &gt;&#x3D; this.numbers.length) {<br>          return<br>        }<br>        console.info(‘tag’ + itemIndex + ‘’, insertIndex + ‘’) &#x2F;&#x2F; Log drag start and insert positions<br>        this.changeIndex(itemIndex, insertIndex)<br>      })<br>    }.width(‘100%’).margin({ top: 5 })<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In the following demo, the first two items are fixed:  </span><br></pre></td></tr></table></figure>
<p>import curves from ‘@ohos.curves’<br>&#x2F;&#x2F; xxx.ets<br>@Entry<br>@Component<br>struct GridItemExample {<br>  @State numbers: number[] &#x3D; []<br>  @State dragItem: number &#x3D; -1<br>  @State scaleItem: number &#x3D; -1<br>  @State item: number &#x3D; -1<br>  private dragRefOffsetx: number &#x3D; 0<br>  private dragRefOffsety: number &#x3D; 0<br>  @State offsetX: number &#x3D; 0<br>  @State offsetY: number &#x3D; 0<br>  private FIX_VP_X: number &#x3D; 108<br>  private FIX_VP_Y: number &#x3D; 120<br>  aboutToAppear() {<br>    for (let i &#x3D; 1; i &lt;&#x3D; 11; i++) {<br>      this.numbers.push(i)<br>    }<br>  }<br>  itemMove(index: number, newIndex: number): void {<br>    console.info(‘index:’ + index + ‘ newIndex:’ + newIndex)<br>    if (!this.isDraggable(newIndex)) {<br>      return<br>    }<br>    let tmp &#x3D; this.numbers.splice(index, 1)<br>    this.numbers.splice(newIndex, 0, tmp[0])<br>  }<br>  &#x2F;&#x2F; Downward drag<br>  down(index: number): void {<br>    if (!this.isDraggable(index + 3)) {<br>      return<br>    }<br>    this.offsetY -&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety +&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index + 3)<br>  }<br>  &#x2F;&#x2F; Downward drag (empty lower-right)<br>  down2(index: number): void {<br>    if (!this.isDraggable(index + 3)) {<br>      return<br>    }<br>    this.offsetY -&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety +&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index + 3)<br>  }<br>  &#x2F;&#x2F; Upward drag<br>  up(index: number): void {<br>    if (!this.isDraggable(index - 3)) {<br>      return<br>    }<br>    this.offsetY +&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety -&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index - 3)<br>  }<br>  &#x2F;&#x2F; Left drag<br>  left(index: number): void {<br>    if (!this.isDraggable(index - 1)) {<br>      return<br>    }<br>    this.offsetX +&#x3D; this.FIX_VP_X<br>    this.dragRefOffsetx -&#x3D; this.FIX_VP_X<br>    this.itemMove(index, index - 1)<br>  }<br>  &#x2F;&#x2F; Right drag<br>  right(index: number): void {<br>    if (!this.isDraggable(index + 1)) {<br>      return<br>    }<br>    this.offsetX -&#x3D; this.FIX_VP_X<br>    this.dragRefOffsetx +&#x3D; this.FIX_VP_X<br>    this.itemMove(index, index + 1)<br>  }<br>  &#x2F;&#x2F; Lower-right drag<br>  lowerRight(index: number): void {<br>    if (!this.isDraggable(index + 4)) {<br>      return<br>    }<br>    this.offsetX -&#x3D; this.FIX_VP_X<br>    this.dragRefOffsetx +&#x3D; this.FIX_VP_X<br>    this.offsetY -&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety +&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index + 4)<br>  }<br>  &#x2F;&#x2F; Upper-right drag<br>  upperRight(index: number): void {<br>    if (!this.isDraggable(index - 2)) {<br>      return<br>    }<br>    this.offsetX -&#x3D; this.FIX_VP_X<br>    this.dragRefOffsetx +&#x3D; this.FIX_VP_X<br>    this.offsetY +&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety -&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index - 2)<br>  }<br>  &#x2F;&#x2F; Lower-left drag<br>  lowerLeft(index: number): void {<br>    if (!this.isDraggable(index + 2)) {<br>      return<br>    }<br>    this.offsetX +&#x3D; this.FIX_VP_X<br>    this.dragRefOffsetx -&#x3D; this.FIX_VP_X<br>    this.offsetY -&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety +&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index + 2)<br>  }<br>  &#x2F;&#x2F; Upper-left drag<br>  upperLeft(index: number): void {<br>    if (!this.isDraggable(index - 4)) {<br>      return<br>    }<br>    this.offsetX +&#x3D; this.FIX_VP_X<br>    this.dragRefOffsetx -&#x3D; this.FIX_VP_X<br>    this.offsetY +&#x3D; this.FIX_VP_Y<br>    this.dragRefOffsety -&#x3D; this.FIX_VP_Y<br>    this.itemMove(index, index - 4)<br>  }<br>  isDraggable(index: number): boolean {<br>    console.info(‘index:’ + index)<br>    return index &gt; 1<br>  }<br>  build() {<br>    Column() {<br>      Grid() {<br>        ForEach(this.numbers, (item: number) &#x3D;&gt; {<br>          GridItem() {<br>            Text(item + ‘’)<br>              .fontSize(16)<br>              .width(‘100%’)<br>              .textAlign(TextAlign.Center)<br>              .height(100)<br>              .borderRadius(10)<br>              .backgroundColor(0xFFFFFF)<br>              .shadow(this.scaleItem &#x3D;&#x3D; item ? {<br>                radius: 70,<br>                color: ‘#15000000’,<br>                offsetX: 0,<br>                offsetY: 0<br>              } :<br>                {<br>                  radius: 0,<br>                  color: ‘#15000000’,<br>                  offsetX: 0,<br>                  offsetY: 0<br>                })<br>              .animation({ curve: Curve.Sharp, duration: 300 })<br>          }<br>          &#x2F;&#x2F; Set fixed GridItems to ignore events<br>          .hitTestBehavior(this.isDraggable(this.numbers.indexOf(item)) ? HitTestMode.Default : HitTestMode.None)<br>          .scale({ x: this.scaleItem &#x3D;&#x3D; item ? 1.05 : 1, y: this.scaleItem &#x3D;&#x3D; item ? 1.05 : 1 })<br>          .zIndex(this.dragItem &#x3D;&#x3D; item ? 1 : 0)<br>          .translate(this.dragItem &#x3D;&#x3D; item ? { x: this.offsetX, y: this.offsetY } : { x: 0, y: 0 })<br>          .padding(10)<br>          .gesture(<br>            &#x2F;&#x2F; Combined gestures with sequential recognition: drag gestures trigger only if long-press gestures succeed<br>            GestureGroup(GestureMode.Sequence,<br>              LongPressGesture({ repeat: true })<br>                .onAction((event?: GestureEvent) &#x3D;&gt; {<br>                  animateTo({ curve: Curve.Friction, duration: 300 }, () &#x3D;&gt; {<br>                    this.scaleItem &#x3D; item<br>                  })<br>                })<br>                .onActionEnd(() &#x3D;&gt; {<br>                  animateTo({ curve: Curve.Friction, duration: 300 }, () &#x3D;&gt; {<br>                    this.scaleItem &#x3D; -1<br>                  })<br>                }),<br>              PanGesture({ fingers: 1, direction: null, distance: 0 })<br>                .onActionStart(() &#x3D;&gt; {<br>                  this.dragItem &#x3D; item<br>                  this.dragRefOffsetx &#x3D; 0<br>                  this.dragRefOffsety &#x3D; 0<br>                })<br>                .onActionUpdate((event: GestureEvent) &#x3D;&gt; {<br>                  this.offsetY &#x3D; event.offsetY - this.dragRefOffsety<br>                  this.offsetX &#x3D; event.offsetX - this.dragRefOffsetx<br>                  &#x2F;&#x2F; console.log(‘X:’ + this.offsetX.toString())<br>                  &#x2F;&#x2F; console.log(‘Y:’ + this.offsetY.toString())<br>                  animateTo({ curve: curves.interpolatingSpring(0, 1, 400, 38) }, () &#x3D;&gt; {<br>                    let index &#x3D; this.numbers.indexOf(this.dragItem)<br>                    if (this.offsetY &gt;&#x3D; this.FIX_VP_Y &#x2F; 2 &amp;&amp; (this.offsetX &lt;&#x3D; 44 &amp;&amp; this.offsetX &gt;&#x3D; -44)<br>                      &amp;&amp; ![8, 9, 10].includes(index)) {<br>                      &#x2F;&#x2F; Downward drag<br>                      this.down(index)<br>                    } else if (this.offsetY &lt;&#x3D; -this.FIX_VP_Y &#x2F; 2 &amp;&amp; (this.offsetX &lt;&#x3D; 44 &amp;&amp; this.offsetX &gt;&#x3D; -44)<br>                      &amp;&amp; ![0, 1, 2].includes(index)) {<br>                      &#x2F;&#x2F; Upward drag<br>                      this.up(index)<br>                    } else if (this.offsetX &gt;&#x3D; this.FIX_VP_X &#x2F; 2 &amp;&amp; (this.offsetY &lt;&#x3D; 50 &amp;&amp; this.offsetY &gt;&#x3D; -50)<br>                      &amp;&amp; ![2, 5, 8, 10].includes(index)) {<br>                      &#x2F;&#x2F; Right drag<br>                      this.right(index)<br>                    } else if (this.offsetX &lt;&#x3D; -this.FIX_VP_X &#x2F; 2 &amp;&amp; (this.offsetY &lt;&#x3D; 50 &amp;&amp; this.offsetY &gt;&#x3D; -50)<br>                      &amp;&amp; ![0, 3, 6, 9].includes(index)) {<br>                      &#x2F;&#x2F; Left drag<br>                      this.left(index)<br>                    } else if (this.offsetX &gt;&#x3D; this.FIX_VP_X &#x2F; 2 &amp;&amp; this.offsetY &gt;&#x3D; this.FIX_VP_Y &#x2F; 2<br>                      &amp;&amp; ![2, 5, 7, 8, 9, 10].includes(index)) {<br>                      &#x2F;&#x2F; Lower-right drag<br>                      this.lowerRight(index)<br>                    } else if (this.offsetX &gt;&#x3D; this.FIX_VP_X &#x2F; 2 &amp;&amp; this.offsetY &lt;&#x3D; -this.FIX_VP_Y &#x2F; 2<br>                      &amp;&amp; ![0, 1, 2, 5, 8].includes(index)) {<br>                      &#x2F;&#x2F; Upper-right drag<br>                      this.upperRight(index)<br>                    } else if (this.offsetX &lt;&#x3D; -this.FIX_VP_X &#x2F; 2 &amp;&amp; this.offsetY &gt;&#x3D; this.FIX_VP_Y &#x2F; 2<br>                      &amp;&amp; ![3, 4, 5, 6, 7, 10].includes(index)) {<br>                      &#x2F;&#x2F; Lower-left drag<br>                      this.lowerLeft(index)<br>                    } else if (this.offsetX &lt;&#x3D; -this.FIX_VP_X &#x2F; 2 &amp;&amp; this.offsetY &lt;&#x3D; -this.FIX_VP_Y &#x2F; 2<br>                      &amp;&amp; ![0, 1, 3, 4, 6, 7].includes(index)) {<br>                      &#x2F;&#x2F; Upper-left drag<br>                      this.upperLeft(index)<br>                    }<br>                  })<br>                })<br>                .onActionEnd((event: GestureEvent) &#x3D;&gt; {<br>                  animateTo({ curve: curves.interpolatingSpring(0, 1, 400, 38) }, () &#x3D;&gt; {<br>                    this.dragItem &#x3D; -1<br>                    this.offsetX &#x3D; 0<br>                    this.offsetY &#x3D; 0<br>                  })<br>                  animateTo({ curve: curves.interpolatingSpring(14, 1, 170, 17), delay: 150 }, () &#x3D;&gt; {<br>                    this.scaleItem &#x3D; -1<br>                  })<br>                })<br>            )<br>          )<br>        })<br>      }<br>      .columnsTemplate(‘1fr 1fr 1fr’)<br>      .columnsGap(5)<br>      .rowsGap(5)<br>      .width(‘100%’)<br>      .height(500)<br>    }<br>    .width(‘100%’)<br>    .height(‘100%’)<br>    .backgroundColor(0xDCDCDC)<br>  }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 4. In HarmonyOS, when pushing a route (router.push...) from a subwindow, how to ensure the target page routes from the main window instead of the subwindow?  </span><br><span class="line">Refer to the following approach:  </span><br></pre></td></tr></table></figure>
<p>onWindowStageCreate(windowStage: window.WindowStage) {<br>  windowStage.getMainWindow().then((windowObj) &#x3D;&gt; {<br>    windowObj.setWindowLayoutFullScreen(true);<br>    windowObj.setWindowSystemBarEnable([‘status’])<br>  });<br>}</p>
<pre><code>Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5  

#### 5. In HarmonyOS, why can&#39;t breakpoints be set on a real device?  
Follow these steps to troubleshoot:  
**CPP breakpoint failure (e.g., breakpoints are grayed out or not hit even if the app runs to the target file):**  

**Root cause analysis:**  
1. The app hasn&#39;t reached the file where the breakpoint is set.  
2. The SO library corresponding to the CPP file isn&#39;t loaded into LLDB.  
3. The SO file lacks debugging information.  

**Troubleshooting steps:**  
1. Verify if the app runs normally and reaches the target file. Compare normal run and debug modes. Check if the debug console loads page information (if not, the app might not have reached the target page).  
2. Check if the SO library for the CPP file is loaded into LLDB by viewing SO loading information (see image below). This issue often results from framework problems.  
3. Check breakpoint validity in the LLDB console (input `br list`). Breakpoints marked `(pending)` are invalid, usually due to missing debugging information.  
4. Confirm if the SO lacks debugging information. If multiple breakpoints in the same file are invalid, use the LLVM tool `llvm-objdump.exe` (located in `SDK install directory\HarmonyOS-NEXT-DP1\base\native\llvm\bin`) to check the SO&#39;s debugging information.
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41029-Daily-HarmonyOS-Next-Knowledge-Thread-Creation-Variable-Initialization-in-Constructor-List-Drag-and-Drop-JS-Code-Invocation-and-CSR-File-Selection-Issue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41029-Daily-HarmonyOS-Next-Knowledge-Thread-Creation-Variable-Initialization-in-Constructor-List-Drag-and-Drop-JS-Code-Invocation-and-CSR-File-Selection-Issue/" class="post-title-link" itemprop="url">41029[Daily HarmonyOS Next Knowledge] Thread Creation, Variable Initialization in Constructor, List Drag-and-Drop, JS Code Invocation, and CSR File Selection Issue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:07:19 / Modified: 10:08:16" itemprop="dateCreated datePublished" datetime="2025-06-29T10:07:19+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Thread-Creation-Variable-Initialization-in-Constructor-List-Drag-and-Drop-JS-Code-Invocation-and-CSR-File-Selection-Issue"><a href="#Daily-HarmonyOS-Next-Knowledge-Thread-Creation-Variable-Initialization-in-Constructor-List-Drag-and-Drop-JS-Code-Invocation-and-CSR-File-Selection-Issue" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Thread Creation, Variable Initialization in Constructor, List Drag-and-Drop, JS Code Invocation, and CSR File Selection Issue"></a>[Daily HarmonyOS Next Knowledge] Thread Creation, Variable Initialization in Constructor, List Drag-and-Drop, JS Code Invocation, and CSR File Selection Issue</h1><h4 id="1-How-to-create-a-single-thread-in-HarmonyOS"><a href="#1-How-to-create-a-single-thread-in-HarmonyOS" class="headerlink" title="1. How to create a single-thread in HarmonyOS?"></a>1. How to create a single-thread in HarmonyOS?</h4><ol>
<li>Is a worker a single-thread or multi-thread?  </li>
<li>If workers are not single-threaded, how to create a single-thread?</li>
</ol>
<p>ArkTS uses a single-thread model, so workers are also single-threaded. They are child threads created on the host thread: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/worker-introduction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/worker-introduction-V5</a>  </p>
<h4 id="2-Why-does-an-error-still-occur-after-creating-a-variable-in-the-constructor-in-HarmonyOS"><a href="#2-Why-does-an-error-still-occur-after-creating-a-variable-in-the-constructor-in-HarmonyOS" class="headerlink" title="2. Why does an error still occur after creating a variable in the constructor in HarmonyOS?"></a>2. Why does an error still occur after creating a variable in the constructor in HarmonyOS?</h4><p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.10.29.png"></p>
<p>Reference code:  </p>
<pre><code class="language-typescript">cat1?: Cat
constructor() &#123;
  super();
  this.cat1 = new Cat()
&#125;
// Or:
cat1: Cat = new Cat()
constructor() &#123;
  super();
  // this.cat1 = new Cat()
&#125;
// Or:
cat1!: Cat
constructor() &#123;
  super();
  this.cat1 = new Cat()
&#125;
</code></pre>
<h4 id="3-How-to-support-vertical-drag-and-drop-sorting-for-List-items-in-HarmonyOS"><a href="#3-How-to-support-vertical-drag-and-drop-sorting-for-List-items-in-HarmonyOS" class="headerlink" title="3. How to support vertical drag-and-drop sorting for List items in HarmonyOS?"></a>3. How to support vertical drag-and-drop sorting for List items in HarmonyOS?</h4><p>Refer to the following demo:  </p>
<pre><code class="language-typescript">import curves from &#39;@ohos.curves&#39;;
import Curves from &#39;@ohos.curves&#39;; // xxx.ets

@Entry
@Component
struct ListDemo &#123;
  @State private arr: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
  @State dragItem: number = -1;
  @State scaleItem: number = -1;
  @State neighborItem: number = -1;
  @State neighborScale: number = -1;
  private dragRefOffset: number = 0;
  @State offsetX: number = 0;
  @State offsetY: number = 0;
  private ITEM_INTV: number = 120;

  scaleSelect(item: number): number &#123;
    if (this.scaleItem === item) &#123;
      return 1.05;
    &#125; else if (this.neighborItem === item) &#123;
      return this.neighborScale;
    &#125; else &#123;
      return 1;
    &#125;
  &#125;

  itemMove(index: number, newIndex: number): void &#123;
    let tmp = this.arr.splice(index, 1);
    this.arr.splice(newIndex, 0, tmp[0]);
  &#125;

  build() &#123;
    Stack() &#123;
      List(&#123; space: 20, initialIndex: 0 &#125;) &#123;
        ForEach(this.arr, (item: number) =&gt; &#123;
          ListItem() &#123;
            Text(&#39;&#39; + item)
              .width(&#39;100%&#39;)
              .height(100)
              .fontSize(16)
              .textAlign(TextAlign.Center)
              .borderRadius(10)
              .backgroundColor(0xFFFFFF)
              .shadow(this.scaleItem === item ? &#123; radius: 70, color: &#39;#15000000&#39;, offsetX: 0, offsetY: 0 &#125; : &#123;
                radius: 0,
                color: &#39;#15000000&#39;,
                offsetX: 0,
                offsetY: 0
              &#125;)
              .animation(&#123; curve: Curve.Sharp, duration: 300 &#125;);
          &#125;
          .margin(&#123; left: 12, right: 12 &#125;)
          .scale(&#123; x: this.scaleSelect(item), y: this.scaleSelect(item) &#125;)
          .zIndex(this.dragItem === item ? 1 : 0)
          .translate(this.dragItem === item ? &#123; y: this.offsetY &#125; : &#123; y: 0 &#125;)
          .gesture(
            // The following combined gestures are recognized in sequence; drag gestures will not trigger if long-press gestures fail.
            GestureGroup(GestureMode.Sequence, LongPressGesture(&#123; repeat: true &#125;)
              .onAction((event?: GestureEvent) =&gt; &#123;
                animateTo(&#123; curve: Curve.Friction, duration: 300 &#125;, () =&gt; &#123;
                  this.scaleItem = item;
                &#125;);
              &#125;)
              .onActionEnd(() =&gt; &#123;
                animateTo(&#123;
                  curve: Curve.Friction, duration: 300
                &#125;, () =&gt; &#123;
                  this.scaleItem = -1;
                &#125;);
              &#125;),
              PanGesture(&#123; fingers: 1, direction: null, distance: 0 &#125;)
                .onActionStart(() =&gt; &#123;
                  this.dragItem = item;
                  this.dragRefOffset = 0;
                &#125;)
                .onActionUpdate((event: GestureEvent) =&gt; &#123;
                  this.offsetY = event.offsetY - this.dragRefOffset;
                  // console.log(&#39;Y:&#39; + this.offsetY.toString());
                  this.neighborItem = -1;
                  let index = this.arr.indexOf(item);
                  let curveValue = Curves.initCurve(Curve.Sharp);
                  let value: number = 0; // Calculate adjacent item scale based on displacement
                  if (this.offsetY &lt; 0) &#123;
                    value = curveValue.interpolate(-this.offsetY / this.ITEM_INTV);
                    this.neighborItem = this.arr[index - 1];
                    this.neighborScale = 1 - value / 20;
                    console.log(&#39;neighborScale:&#39; + this.neighborScale.toString());
                  &#125; else if (this.offsetY &gt; 0) &#123;
                    value = curveValue.interpolate(this.offsetY / this.ITEM_INTV);
                    this.neighborItem = this.arr[index + 1];
                    this.neighborScale = 1 - value / 20;
                  &#125; // Swap order based on displacement
                  if (this.offsetY &gt; this.ITEM_INTV / 2) &#123;
                    animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                      this.offsetY -= this.ITEM_INTV;
                      this.dragRefOffset += this.ITEM_INTV;
                      this.itemMove(index, index + 1);
                    &#125;);
                  &#125; else if (this.offsetY &lt; -this.ITEM_INTV / 2) &#123;
                    animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                      this.offsetY += this.ITEM_INTV;
                      this.dragRefOffset -= this.ITEM_INTV;
                      this.itemMove(index, index - 1);
                    &#125;);
                  &#125;
                &#125;)
                .onActionEnd((event: GestureEvent) =&gt; &#123;
                  animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                    this.dragItem = -1;
                    this.neighborItem = -1;
                  &#125;);
                  animateTo(&#123; curve: curves.interpolatingSpring(14, 1, 170, 17), delay: 150 &#125;, () =&gt; &#123;
                    this.scaleItem = -1;
                  &#125;);
                &#125;))
              .onCancel(() =&gt; &#123;
                animateTo(&#123; curve: curves.interpolatingSpring(0, 1, 400, 38) &#125;, () =&gt; &#123;
                  this.dragItem = -1;
                  this.neighborItem = -1;
                &#125;);
                animateTo(&#123; curve: curves.interpolatingSpring(14, 1, 170, 17), delay: 150 &#125;, () =&gt; &#123;
                  this.scaleItem = -1;
                &#125;);
              &#125;))
        &#125;, (item: number) =&gt; item.toString());
      &#125;
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(0xDCDCDC)
    .padding(&#123; top: 5 &#125;);
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-invoke-JS-code-in-HarmonyOS"><a href="#4-How-to-invoke-JS-code-in-HarmonyOS" class="headerlink" title="4. How to invoke JS code in HarmonyOS?"></a>4. How to invoke JS code in HarmonyOS?</h4><p>Applications can invoke JavaScript functions on front-end pages via the <code>runJavaScript()</code> method.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-in-app-frontend-page-function-invoking-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/web-in-app-frontend-page-function-invoking-V5</a>  </p>
<h4 id="5-Inability-to-select-local-CSR-files-when-creating-development-and-release-certificates-in-HarmonyOS"><a href="#5-Inability-to-select-local-CSR-files-when-creating-development-and-release-certificates-in-HarmonyOS" class="headerlink" title="5. Inability to select local CSR files when creating development and release certificates in HarmonyOS?"></a>5. Inability to select local CSR files when creating development and release certificates in HarmonyOS?</h4><p>Please try the following solutions:  </p>
<ol>
<li>Verify if the account is实名认证 (identity-verified).  </li>
<li>Each account can apply for up to 1 release certificate and 2 debug certificates.  </li>
<li>If certificates are expired or unused, delete them by clicking “Revoke”. After deleting expired certificates, refresh the page to check if new certificates can be added.</li>
</ol>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166">https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41030-Daily-HarmonyOS-Next-Knowledge-WebView-Performance-Optimization-Taskpool-Hot-Update-Navigation-Issues-and-Reinstall-Problems-During-Debugging/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41030-Daily-HarmonyOS-Next-Knowledge-WebView-Performance-Optimization-Taskpool-Hot-Update-Navigation-Issues-and-Reinstall-Problems-During-Debugging/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] WebView Performance Optimization, Taskpool, Hot Update, Navigation Issues, and Reinstall Problems During Debugging</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:05:58 / Modified: 10:06:47" itemprop="dateCreated datePublished" datetime="2025-06-29T10:05:58+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-WebView-Performance-Optimization-Taskpool-Hot-Update-Navigation-Issues-and-Reinstall-Problems-During-Debugging"><a href="#Daily-HarmonyOS-Next-Knowledge-WebView-Performance-Optimization-Taskpool-Hot-Update-Navigation-Issues-and-Reinstall-Problems-During-Debugging" class="headerlink" title="[Daily HarmonyOS Next Knowledge] WebView Performance Optimization, Taskpool, Hot Update, Navigation Issues, and Reinstall Problems During Debugging"></a>[Daily HarmonyOS Next Knowledge] WebView Performance Optimization, Taskpool, Hot Update, Navigation Issues, and Reinstall Problems During Debugging</h1><h4 id="1-HarmonyOS-WebView-performance-optimization-The-second-and-third-openings-of-a-WebView-page-feel-as-slow-as-the-first-Are-there-optimization-solutions-or-“instant-open”-schemes-for-WebView"><a href="#1-HarmonyOS-WebView-performance-optimization-The-second-and-third-openings-of-a-WebView-page-feel-as-slow-as-the-first-Are-there-optimization-solutions-or-“instant-open”-schemes-for-WebView" class="headerlink" title="1. HarmonyOS WebView performance optimization: The second and third openings of a WebView page feel as slow as the first. Are there optimization solutions or “instant open” schemes for WebView?"></a>1. HarmonyOS WebView performance optimization: The second and third openings of a WebView page feel as slow as the first. Are there optimization solutions or “instant open” schemes for WebView?</h4><p>Currently, there is no “instant open” scheme for WebView. For Web scenario optimizations, refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5">https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-web-develop-optimization-V5</a>  </p>
<p>ArkWeb is a Web component platform designed to provide applications with the capability to display Web page content and offer developers rich functionalities, including page loading, interaction, debugging, etc. In the digital era, page loading speed directly reflects an application’s fluency and influences users’ impressions and experience. Fast page loading and display not only attract users to stay but also reduce waiting time and impatience, thereby enhancing satisfaction.  </p>
<p>The Web page display process includes multiple stages: DNS resolution, connection establishment, request sending, response receiving, HTML parsing, resource downloading, etc. Many factors affect page speed, such as network latency, server response time, page size, and resource compression. To improve performance, developers can optimize Web page loading, resource downloading, and page rendering.  </p>
<p>This article introduces common optimization methods:  </p>
<ul>
<li><strong>Web page loading optimization</strong>: Crucial for user experience, accelerating page loading directly enhances application fluency.  </li>
<li><strong>JSBridge</strong>: Enables communication to avoid redundant environment switches in ArkTS and UI blocking.  </li>
<li><strong>Same-layer rendering</strong>: Layers page elements to reduce repaints and reflows, improving rendering efficiency.</li>
</ul>
<p>ArkWeb provides developers with methods to optimize page display speed. Implementing these optimizations can improve application performance and user experience, allowing users to browse Web pages more quickly and smoothly, thus increasing satisfaction and retention.  </p>
<h4 id="2-How-to-real-time-transfer-data-from-a-Concurrent-function-in-HarmonyOS-taskpool-to-the-external-context"><a href="#2-How-to-real-time-transfer-data-from-a-Concurrent-function-in-HarmonyOS-taskpool-to-the-external-context" class="headerlink" title="2. How to real-time transfer data from a @Concurrent function in HarmonyOS taskpool to the external context?"></a>2. How to real-time transfer data from a @Concurrent function in HarmonyOS taskpool to the external context?</h4><p>Refer to Task.sendData in the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-taskpool-V5#ZH-CN_TOPIC_0000001884757654__task">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-taskpool-V5#ZH-CN_TOPIC_0000001884757654__task</a>  </p>
<p><strong>Taskpool</strong> provides a multi-threading environment for applications, reducing resource consumption and improving overall system performance without requiring developers to manage thread lifecycles. You can use taskpool APIs to create background tasks (Task) and perform operations like execution or cancellation. Theoretically, task creation is unlimited, but memory constraints advise against excessive tasks. Avoid blocking operations (especially indefinite ones) in tasks, as they occupy worker threads, potentially blocking other task scheduling and degrading performance.  </p>
<p>Tasks of the same priority execute in the order determined by you, consistent with the order of calling task execution interfaces. The default priority is MEDIUM.  </p>
<p>When pending tasks exceed the number of worker threads, taskpool scales out by adding threads to reduce waiting time. Conversely, when task数量 decreases and idle threads exist, it scales in to optimize resource usage.  </p>
<h4 id="3-Does-HarmonyOS-have-a-hot-update-plugin-mechanism-allowing-apps-to-update-specific-components"><a href="#3-Does-HarmonyOS-have-a-hot-update-plugin-mechanism-allowing-apps-to-update-specific-components" class="headerlink" title="3. Does HarmonyOS have a hot update&#x2F;plugin mechanism allowing apps to update specific components?"></a>3. Does HarmonyOS have a hot update&#x2F;plugin mechanism allowing apps to update specific components?</h4><p>HarmonyOS AppGallery does not provide hotfix capabilities due to security, compliance, and user privacy considerations. For urgent bug fixes, AppGallery offers a fast release scheme: rapid review combined with in-app update prompts can accelerate the update process.  </p>
<h4 id="4-When-monitoring-route-changes-using-uiObserver-on-‘navDestinationUpdate’-this-navDestinationUpdateCallback-in-HarmonyOS-why-does-the-callback-trigger-with-index-1-when-navigating-back-via-router-in-Navigation"><a href="#4-When-monitoring-route-changes-using-uiObserver-on-‘navDestinationUpdate’-this-navDestinationUpdateCallback-in-HarmonyOS-why-does-the-callback-trigger-with-index-1-when-navigating-back-via-router-in-Navigation" class="headerlink" title="4. When monitoring route changes using uiObserver.on(‘navDestinationUpdate’, this.navDestinationUpdateCallback) in HarmonyOS, why does the callback trigger with index -1 when navigating back via router in Navigation?"></a>4. When monitoring route changes using uiObserver.on(‘navDestinationUpdate’, this.navDestinationUpdateCallback) in HarmonyOS, why does the callback trigger with index -1 when navigating back via router in Navigation?</h4><p>The callback triggers because the routed page contains a NavDestination component, but this component is not in the Navigation stack, hence the index -1.  </p>
<h4 id="5-Why-does-DevEco-Studio-uninstall-and-reinstall-the-app-every-time-I-run-or-debug-in-HarmonyOS"><a href="#5-Why-does-DevEco-Studio-uninstall-and-reinstall-the-app-every-time-I-run-or-debug-in-HarmonyOS" class="headerlink" title="5. Why does DevEco Studio uninstall and reinstall the app every time I run or debug in HarmonyOS?"></a>5. Why does DevEco Studio uninstall and reinstall the app every time I run or debug in HarmonyOS?</h4><p>To retain application data, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-run-debug-configurations-V5#section531811771410">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-run-debug-configurations-V5#section531811771410</a>  </p>
<p>During debugging, HAP can be installed in two ways:  </p>
<ol>
<li><strong>Uninstall then reinstall</strong>: Clears all app&#x2F;cache data.  <ul>
<li>Starting from DevEco Studio 4.1 Canary2, if code changes are absent, package pushing is skipped. Only changed modules and dependencies are reinstalled.</li>
</ul>
</li>
<li><strong>Overwrite installation</strong>: Retains app&#x2F;cache data.</li>
</ol>
<p><strong>Setting method</strong>:<br>Go to <strong>Run &gt; Edit Configurations</strong>, select the module, and check “Keep Application Data” for overwrite installation.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.10.30.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41031-Daily-HarmonyOS-Next-Knowledge-Zoom-Animation-Identifying-Page-Root-Directory-Code-Checker-Errors-Side-Slip-Return-Interception-App-Upgrade-Issues-in-Development-and-Debugging-Phase/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41031-Daily-HarmonyOS-Next-Knowledge-Zoom-Animation-Identifying-Page-Root-Directory-Code-Checker-Errors-Side-Slip-Return-Interception-App-Upgrade-Issues-in-Development-and-Debugging-Phase/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Zoom Animation, Identifying Page Root Directory, Code Checker Errors, Side-Slip Return Interception, App Upgrade Issues in Development and Debugging Phase</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:04:18 / Modified: 11:19:43" itemprop="dateCreated datePublished" datetime="2025-06-29T10:04:18+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Zoom-Animation-Identifying-Page-Root-Directory-Code-Checker-Errors-Side-Slip-Return-Interception-App-Upgrade-Issues-in-Development-and-Debugging-Phase"><a href="#Daily-HarmonyOS-Next-Knowledge-Zoom-Animation-Identifying-Page-Root-Directory-Code-Checker-Errors-Side-Slip-Return-Interception-App-Upgrade-Issues-in-Development-and-Debugging-Phase" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Zoom Animation, Identifying Page Root Directory, Code Checker Errors, Side-Slip Return Interception, App Upgrade Issues in Development and Debugging Phase"></a>[Daily HarmonyOS Next Knowledge] Zoom Animation, Identifying Page Root Directory, Code Checker Errors, Side-Slip Return Interception, App Upgrade Issues in Development and Debugging Phase</h1><h4 id="1-HarmonyOS-zoom-animation-issue"><a href="#1-HarmonyOS-zoom-animation-issue" class="headerlink" title="1. HarmonyOS zoom animation issue?"></a>1. HarmonyOS zoom animation issue?</h4><p>Please provide a complete example, such as a Text with a border that gradually zooms from 0.5x to full size.  </p>
<p>Demo is as follows:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State message: string = &#39;Hello World&#39;;
  @State x: number = 0.5;
  @State y: number = 0.5;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .borderWidth(&quot;2px&quot;)
          .borderColor(Color.Blue)
          .scale(&#123; x: this.x, y: this.y &#125;)
          .animation(&#123;
            duration: 1000,
            curve: Curve.EaseOut,
            iterations: 3,
            playMode: PlayMode.Normal
          &#125;)
          .onAppear(() =&gt; &#123;
            this.x = 1;
            this.y = 1;
          &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-identify-the-root-page-using-NavDestionInfo-in-HarmonyOS"><a href="#2-How-to-identify-the-root-page-using-NavDestionInfo-in-HarmonyOS" class="headerlink" title="2. How to identify the root page using NavDestionInfo in HarmonyOS?"></a>2. How to identify the root page using NavDestionInfo in HarmonyOS?</h4><p>Judge in the callback method:  </p>
<ul>
<li>Check if the <code>name</code> in the result equals the subpage opened immediately after the main page.  </li>
<li>Check if the <code>state</code> status equals 1.</li>
</ul>
<h4 id="3-Code-compiler-check-error-when-writing-in-ArkTS-for-HarmonyOS"><a href="#3-Code-compiler-check-error-when-writing-in-ArkTS-for-HarmonyOS" class="headerlink" title="3. Code compiler check error when writing in ArkTS for HarmonyOS?"></a>3. Code compiler check error when writing in ArkTS for HarmonyOS?</h4><p>When defining a custom class and using <code>this</code> to reference variables, an error occurs. How to solve it?  </p>
<p><strong>Solution 1</strong>: Remove the <code>static</code> keyword before the attribute.<br><strong>Solution 2</strong>: If using a <code>static</code>-decorated attribute, refer to the following code:  </p>
<pre><code class="language-typescript">CninfoWindowUtil.m_window 
</code></pre>
<h4 id="4-How-to-intercept-the-return-gesture-during-side-slipping-in-UIAbility-for-HarmonyOS"><a href="#4-How-to-intercept-the-return-gesture-during-side-slipping-in-UIAbility-for-HarmonyOS" class="headerlink" title="4. How to intercept the return gesture during side-slipping in UIAbility for HarmonyOS?"></a>4. How to intercept the return gesture during side-slipping in UIAbility for HarmonyOS?</h4><p>Add the following demo when loading the page to achieve this:  </p>
<pre><code class="language-typescript">onBackPress(): boolean | void &#123;
  return true;
&#125;
</code></pre>
<h4 id="5-App-upgrade-during-development-and-debugging-for-HarmonyOS"><a href="#5-App-upgrade-during-development-and-debugging-for-HarmonyOS" class="headerlink" title="5. App upgrade during development and debugging for HarmonyOS?"></a>5. App upgrade during development and debugging for HarmonyOS?</h4><ol>
<li>Currently developing and testing the app upgrade function, but app upgrades all jump to AppGallery. Are there corresponding testing approaches?  </li>
<li>We previously had our own gray-scale upgrade background service. Is gray-scale update for apps now only configurable in Huawei AppGallery, and are there exposed external interfaces?</li>
</ol>
<p>Currently, app updates are all downloaded through AppGallery, and direct in-app download updates are not supported. There are two app package update methods:  </p>
<ol>
<li><strong>In-AppGallery update</strong>: After a new app version is released on AppGallery, AppGallery notifies end users of the new version, who can upgrade the app via AppGallery (client).  </li>
<li><strong>In-app update detection</strong>: When an end user launches the app, AppGallery detects the new version and notifies the user to download and update via AppGallery.</li>
</ol>
<p>For app update references, see the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/store-update-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/store-update-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4111-Daily-HarmonyOS-Next-Knowledge-H5-C-Communication-Dynamic-Parameterized-Configuration-ArkTS-Calling-JS-JSON-Object-Conversion-showToast-Multiple-Invocation-Issues/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4111-Daily-HarmonyOS-Next-Knowledge-H5-C-Communication-Dynamic-Parameterized-Configuration-ArkTS-Calling-JS-JSON-Object-Conversion-showToast-Multiple-Invocation-Issues/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] H5-C++ Communication, Dynamic Parameterized Configuration, ArkTS Calling JS, JSON Object Conversion, showToast Multiple Invocation Issues</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:03:20 / Modified: 10:03:32" itemprop="dateCreated datePublished" datetime="2025-06-29T10:03:20+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-H5-C-Communication-Dynamic-Parameterized-Configuration-ArkTS-Calling-JS-JSON-Object-Conversion-showToast-Multiple-Invocation-Issues"><a href="#Daily-HarmonyOS-Next-Knowledge-H5-C-Communication-Dynamic-Parameterized-Configuration-ArkTS-Calling-JS-JSON-Object-Conversion-showToast-Multiple-Invocation-Issues" class="headerlink" title="[Daily HarmonyOS Next Knowledge] H5-C++ Communication, Dynamic Parameterized Configuration, ArkTS Calling JS, JSON Object Conversion, showToast Multiple Invocation Issues"></a>[Daily HarmonyOS Next Knowledge] H5-C++ Communication, Dynamic Parameterized Configuration, ArkTS Calling JS, JSON Object Conversion, showToast Multiple Invocation Issues</h1><h4 id="1-How-does-two-way-communication-between-HarmonyOS-H5-pages-and-C-work"><a href="#1-How-does-two-way-communication-between-HarmonyOS-H5-pages-and-C-work" class="headerlink" title="1. How does two-way communication between HarmonyOS H5 pages and C++ work?"></a>1. How does two-way communication between HarmonyOS H5 pages and C++ work?</h4><p>The current specification states that H5 can only communicate with ArkTS, and ArkTS communicates with C++ via NDK interfaces. Only network interception provides C interfaces.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/_web-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/_web-V5</a>  </p>
<h4 id="2-Why-does-dynamic-parameterized-configuration-fail-to-take-effect-during-HarmonyOS-compilation-and-building"><a href="#2-Why-does-dynamic-parameterized-configuration-fail-to-take-effect-during-HarmonyOS-compilation-and-building" class="headerlink" title="2. Why does dynamic parameterized configuration fail to take effect during HarmonyOS compilation and building?"></a>2. Why does dynamic parameterized configuration fail to take effect during HarmonyOS compilation and building?</h4><p>The app currently has configurations for test and production environments, with different versions of second-party and third-party libraries. Parameterized configuration is used, defining two parameterized configuration files: <code>debug.json</code> and <code>product.json</code>. The <code>oh-package.json5</code> file in the project root directory defaults to referencing <code>debug.json</code>. When using the command <code>ohpm i --parameterFile ./product.json --all</code> to specify the parameterized configuration file, the dependency version numbers in the subsequent compiled HSP and HAP still follow <code>debug.json</code>.  </p>
<p><strong>Solution</strong>: Confirm whether the parameterized configuration file is specified during hvigor packaging.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-commandline-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-commandline-V5</a>  </p>
<h4 id="3-How-does-HarmonyOS-ArkTS-import-and-call-JS-libraries"><a href="#3-How-does-HarmonyOS-ArkTS-import-and-call-JS-libraries" class="headerlink" title="3. How does HarmonyOS ArkTS import and call JS libraries?"></a>3. How does HarmonyOS ArkTS import and call JS libraries?</h4><p>For ArkTS calling JS libraries, the following methods are available:  </p>
<ul>
<li><strong>dsbridge third-party library</strong>: <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/detail/@hzw%2Fohos-dsbridge">https://ohpm.openharmony.cn/#/cn/detail/@hzw%2Fohos-dsbridge</a>  </li>
<li><strong>sbridge third-party library</strong>: <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/detail/@ncc%2Fjsbridge">https://ohpm.openharmony.cn/#/cn/detail/@ncc%2Fjsbridge</a><br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkweb-kit-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-arkweb-kit-V5</a></li>
</ul>
<h4 id="4-Why-does-calling-object-methods-after-HarmonyOS-JSON-conversion-throw-an-error"><a href="#4-Why-does-calling-object-methods-after-HarmonyOS-JSON-conversion-throw-an-error" class="headerlink" title="4. Why does calling object methods after HarmonyOS JSON conversion throw an error?"></a>4. Why does calling object methods after HarmonyOS JSON conversion throw an error?</h4><p><code>JSON.parse()</code> and <code>JSON.stringify()</code> handle conversion between JSON strings and object instances but do not support method conversion, as methods are not part of JSON rules.  </p>
<h4 id="5-Why-does-HarmonyOS-promptAction-showToast-generate-multiple-instances-on-multiple-calls"><a href="#5-Why-does-HarmonyOS-promptAction-showToast-generate-multiple-instances-on-multiple-calls" class="headerlink" title="5. Why does HarmonyOS promptAction.showToast generate multiple instances on multiple calls?"></a>5. Why does HarmonyOS promptAction.showToast generate multiple instances on multiple calls?</h4><p><code>promptAction.showToast</code> lacks a method to update toast content and reset display time without reloading. If called again before the toast disappears, the system may treat it as a new prompt, displaying it after the old one fades out.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4113-Daily-HarmonyOS-Next-Knowledge-Grid-Item-Dragging-Swiper-Indicator-Gesture-Event-Reporting-Specifying-Release-Version-API-Packaging-Signature-Failure-Error-109/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4113-Daily-HarmonyOS-Next-Knowledge-Grid-Item-Dragging-Swiper-Indicator-Gesture-Event-Reporting-Specifying-Release-Version-API-Packaging-Signature-Failure-Error-109/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Grid Item Dragging, Swiper Indicator, Gesture Event Reporting, Specifying Release Version API, Packaging Signature Failure Error 109</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 10:02:34 / Modified: 10:02:47" itemprop="dateCreated datePublished" datetime="2025-06-29T10:02:34+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Grid-Item-Dragging-Swiper-Indicator-Gesture-Event-Reporting-Specifying-Release-Version-API-Packaging-Signature-Failure-Error-109"><a href="#Daily-HarmonyOS-Next-Knowledge-Grid-Item-Dragging-Swiper-Indicator-Gesture-Event-Reporting-Specifying-Release-Version-API-Packaging-Signature-Failure-Error-109" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Grid Item Dragging, Swiper Indicator, Gesture Event Reporting, Specifying Release Version API, Packaging Signature Failure Error 109"></a>[Daily HarmonyOS Next Knowledge] Grid Item Dragging, Swiper Indicator, Gesture Event Reporting, Specifying Release Version API, Packaging Signature Failure Error 109</h1><h4 id="1-HarmonyOS-Grid-component-item-dragging-issue"><a href="#1-HarmonyOS-Grid-component-item-dragging-issue" class="headerlink" title="1. HarmonyOS Grid component item dragging issue?"></a>1. HarmonyOS Grid component item dragging issue?</h4><p>The Grid component contains 20 GridItem child components, where the first 4 GridItems cannot be dragged, and the rest can be dragged for sorting.  </p>
<p>For draggable Grid and GridItem, refer to the following code (note: <code>.draggable(parseInt(day) &lt;= 6 ? true : false)</code> means the first 6 GridItems are non-draggable):  </p>
<pre><code class="language-typescript">@Entry @Component struct GridExample &#123;
  @State numbers: string[] = []
  scroller: Scroller = new Scroller()
  @State text: string = &#39;drag&#39;

  @Builder
  pixelMapBuilder() &#123; // Drag process style
    Column() &#123;
      Text(this.text)
        .fontSize(16)
        .backgroundColor(0xF9CF93)
        .width(80)
        .height(80)
        .textAlign(TextAlign.Center)
    &#125;
  &#125;

  aboutToAppear() &#123;
    for (let i = 1; i &lt;= 15; i++) &#123;
      this.numbers.push(i + &#39;&#39;)
    &#125;
  &#125;

  changeIndex(index1: number, index2: number) &#123; // Swap array positions
    let temp: string;
    temp = this.numbers[index1];
    this.numbers[index1] = this.numbers[index2];
    this.numbers[index2] = temp;
  &#125;

  build() &#123;
    Column(&#123; space: 5 &#125;) &#123;
      Grid(this.scroller) &#123;
        ForEach(this.numbers, (day: string) =&gt; &#123;
          GridItem() &#123;
            Text(day)
              .fontSize(16)
              .backgroundColor(parseInt(day) &lt;= 6 ? Color.Red : Color.Green)
              .width(80)
              .height(80)
              .textAlign(TextAlign.Center)
          &#125;
          .draggable(parseInt(day) &lt;= 6 ? true : false)
        &#125;)
      &#125;
      .supportAnimation(true)
      .columnsTemplate(&#39;1fr 1fr 1fr&#39;)
      .columnsGap(10)
      .rowsGap(10)
      .width(&#39;90%&#39;)
      .backgroundColor(0xFAEEE0)
      .height(300)
      .editMode(true)
      // Set whether the Grid enters edit mode, allowing GridItem dragging inside the Grid component
      .onItemDragStart((event: ItemDragInfo, itemIndex: number) =&gt; &#123; // Callback triggered when dragging this component for the first time
        this.text = this.numbers[itemIndex]
        return this.pixelMapBuilder() // Set the displayed image during dragging
      &#125;)
      .onItemDrop((event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; &#123;
        // This component bound to the event can be a drag release target, triggering the callback when dragging stops within this component&#39;s range
        // isSuccess=false indicates the drop position is outside the grid; insertIndex &gt; length indicates a new element event
        if (!isSuccess || insertIndex &gt;= this.numbers.length) &#123;
          return
        &#125;
        this.changeIndex(itemIndex, insertIndex)
      &#125;)
    &#125;
  &#125;
</code></pre>
<h4 id="2-HarmonyOS-Swiper-indicator-issue"><a href="#2-HarmonyOS-Swiper-indicator-issue" class="headerlink" title="2. HarmonyOS Swiper indicator issue?"></a>2. HarmonyOS Swiper indicator issue?</h4><p>Using <code>DotIndicator.bottom(0)</code> for Swiper cannot place the indicator at the bottom, as there is always a margin.  </p>
<p>The Swiper component’s <code>indicator</code> attribute sets the distance from navigation dots to the Swiper. The indicator has its own width and height, so it cannot fully adhere to the edge after setting.  </p>
<h4 id="3-HarmonyOS-gesture-event-reporting-issue"><a href="#3-HarmonyOS-gesture-event-reporting-issue" class="headerlink" title="3. HarmonyOS gesture event reporting issue?"></a>3. HarmonyOS gesture event reporting issue?</h4><p>For video playback control gestures (swiping the screen to adjust volume, brightness, and progress, and displaying the control interface), some gesture conflicts exist. The following code is written based on documentation but is not functional:  </p>
<pre><code class="language-typescript">Stack() &#123;
  Column() &#123;

  &#125;
  .gesture(PanGesture()) // Expected to pass through to this position

  Column() &#123;
    this.top()

    Blank()
      .parallelGesture(null, GestureMask.IgnoreInternal) // Expected to pass this gesture event to the upper component

    this.bottom()
  &#125;
  .parallelGesture(null, GestureMask.IgnoreInternal)
&#125;
</code></pre>
<p>Refer to <code>hitTestBehavior</code> to implement gesture passthrough.  </p>
<h4 id="4-How-to-specify-using-release-version-API-during-HarmonyOS-packaging"><a href="#4-How-to-specify-using-release-version-API-during-HarmonyOS-packaging" class="headerlink" title="4. How to specify using release version API during HarmonyOS packaging?"></a>4. How to specify using release version API during HarmonyOS packaging?</h4><p>When packaging a release package (Build APP) in DevEco Studio, the pack.info shows <code>apiVersion - releaseType</code> as “Beta1”. When attempting to publish the package, a prompt appears to use the release version API for development. How to specify the release version API during packaging?  </p>
<p>Locate the <code>uni-package.json</code> file in the <code>hms\toolchains</code> directory under the SDK, and modify <code>releaseType</code> to “Release”. Refer to the following example:  </p>
<pre><code class="language-json">&#123;
  &quot;apiVersion&quot;: &quot;11&quot;,
  &quot;displayName&quot;: &quot;Toolchains&quot;,
  &quot;meta&quot;: &#123;
    &quot;metaVersion&quot;: &quot;3.1.0&quot;
  &#125;,
  &quot;path&quot;: &quot;toolchains&quot;,
  &quot;platformVersion&quot;: &quot;4.1.0&quot;,
  &quot;releaseType&quot;: &quot;Release&quot;,
  &quot;version&quot;: &quot;4.1.0.71&quot;
&#125;
</code></pre>
<p>After successful modification, repackage. The <code>releaseType</code> value from this configuration file will be included in the build.<br><strong>Check method</strong>: View <code>releaseType</code> in <code>apiversion</code> within <code>pack.info</code> under <code>build/outputs/default</code>.<br>Re-upload the modified package to AGC Software Package Management and resubmit for review.  </p>
<h4 id="5-HarmonyOS-error-code-109"><a href="#5-HarmonyOS-error-code-109" class="headerlink" title="5. HarmonyOS error code 109?"></a>5. HarmonyOS error code 109?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-compiling-and-building-101-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs-V5/faqs-compiling-and-building-101-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">344</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
