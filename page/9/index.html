<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/9/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41123-Daily-HarmonyOS-Next-Knowledge-Component-Encapsulation-General-Methods-Performance-Comparison-Between-Callback-and-Await-Web-Component-Pull-Down-Refresh-HSP-Package-Error-WebView-Rounded-Corners/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41123-Daily-HarmonyOS-Next-Knowledge-Component-Encapsulation-General-Methods-Performance-Comparison-Between-Callback-and-Await-Web-Component-Pull-Down-Refresh-HSP-Package-Error-WebView-Rounded-Corners/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Component Encapsulation General Methods, Performance Comparison Between Callback and Await, Web Component Pull-Down Refresh, HSP Package Error, WebView Rounded Corners</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:39:59 / Modified: 09:40:25" itemprop="dateCreated datePublished" datetime="2025-06-29T09:39:59+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Component-Encapsulation-General-Methods-Performance-Comparison-Between-Callback-and-Await-Web-Component-Pull-Down-Refresh-HSP-Package-Error-WebView-Rounded-Corners"><a href="#Daily-HarmonyOS-Next-Knowledge-Component-Encapsulation-General-Methods-Performance-Comparison-Between-Callback-and-Await-Web-Component-Pull-Down-Refresh-HSP-Package-Error-WebView-Rounded-Corners" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Component Encapsulation General Methods, Performance Comparison Between Callback and Await, Web Component Pull-Down Refresh, HSP Package Error, WebView Rounded Corners"></a>[Daily HarmonyOS Next Knowledge] Component Encapsulation General Methods, Performance Comparison Between Callback and Await, Web Component Pull-Down Refresh, HSP Package Error, WebView Rounded Corners</h1><h4 id="1-How-to-encapsulate-common-attributes-and-methods-for-custom-components-in-HarmonyOS-similar-to-inheritance-in-Java"><a href="#1-How-to-encapsulate-common-attributes-and-methods-for-custom-components-in-HarmonyOS-similar-to-inheritance-in-Java" class="headerlink" title="1. How to encapsulate common attributes and methods for custom components in HarmonyOS, similar to inheritance in Java?"></a>1. How to encapsulate common attributes and methods for custom components in HarmonyOS, similar to inheritance in Java?</h4><pre><code class="language-typescript">export class Animal &#123;
  name: string;
  age: string;
  constructor(name: string, age: string) &#123;
    this.name = name;
    this.age = age;
  &#125;
&#125;

export class Person extends Animal &#123;
  reading: string;
  constructor(reading: string, name: string, age: string) &#123;
    super(name, age);
    this.reading = reading;
  &#125;
&#125;
</code></pre>
<h4 id="2-Which-performs-better-in-HarmonyOS-callback-or-await"><a href="#2-Which-performs-better-in-HarmonyOS-callback-or-await" class="headerlink" title="2. Which performs better in HarmonyOS, callback or await?"></a>2. Which performs better in HarmonyOS, callback or await?</h4><p><strong>1. Callback Functions</strong>  </p>
<ul>
<li><strong>Advantages</strong>: Solve synchronization issues (long-running tasks no longer block subsequent tasks, improving overall program execution efficiency).  </li>
<li><strong>Disadvantages</strong>: Nested callbacks lead to “callback hell,” increasing code coupling and reducing maintainability. Errors cannot be caught with <code>try-catch</code>, and <code>return</code> statements do not work as expected.</li>
</ul>
<p><strong>2. Promise</strong>  </p>
<ul>
<li><strong>Advantages</strong>: Chain callbacks to avoid callback hell.  </li>
<li><strong>Disadvantages</strong>: Cannot cancel a Promise once initiated. Errors must be handled via <code>.catch()</code>.</li>
</ul>
<p><strong>3. Async&#x2F;Await</strong><br>Async functions are syntactic sugar built on generators and Promises, with an automatic executor. When encountering an <code>await</code> statement, the function pauses until the Promise resolves. This allows writing asynchronous logic in a synchronous style.  </p>
<ul>
<li><strong>Advantages</strong>: Cleaner code structure, eliminates callback hell.  </li>
<li><strong>Disadvantages</strong>: <code>await</code> forces asynchronous operations to execute sequentially. Using <code>await</code> for independent operations may degrade performance.</li>
</ul>
<h4 id="3-How-to-add-pull-down-refresh-to-a-HarmonyOS-Web-component"><a href="#3-How-to-add-pull-down-refresh-to-a-HarmonyOS-Web-component" class="headerlink" title="3. How to add pull-down refresh to a HarmonyOS Web component?"></a>3. How to add pull-down refresh to a HarmonyOS Web component?</h4><p>Refer to the following demo:  </p>
<pre><code class="language-typescript">import web_webview from &#39;@ohos.web.webview&#39;;
import &#123; PullToRefresh &#125; from &#39;@ohos/pulltorefresh&#39;;

@Entry
@Component
struct WebPage &#123;
  controller: web_webview.WebviewController = new web_webview.WebviewController();
  @State dataArray: Array&lt;string&gt; = [];
  private scroller: Scroller = new Scroller();

  @Builder
  getContentView() &#123;
    Column() &#123;
      Web(&#123; src: &#39;http://www.huawei.com&#39;, controller: this.controller &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;);
  &#125;

  build() &#123;
    Scroll(this.scroller) &#123;
      PullToRefresh(&#123;
        // Required: Data bound to the list component (pass empty array if not using a list)
        data: $dataArray,
        // Required: Scroller for the main layout
        scroller: this.scroller,
        // Required: Custom main layout
        customList: () =&gt; &#123;
          // A UI method decorated with @Builder where the Web component is defined
          this.getContentView();
        &#125;,
        // Optional: Pull-down refresh callback
        onRefresh: () =&gt; &#123;
          return new Promise&lt;string&gt;((resolve, reject) =&gt; &#123;
            setTimeout(() =&gt; &#123;
              resolve(&#39;&#39;);
              // this.controller.loadUrl(&#39;https://www.huawei.com&#39;);
            &#125;, 1000);
          &#125;);
        &#125;,
      &#125;)
      .width(&#39;100%&#39;)
      .height(&#39;100%&#39;);
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
<h4 id="4-When-depending-on-an-HSP-package-it-works-fine-with-the-debug-version-but-fails-with-“versionname-mismatch”-in-the-release-version"><a href="#4-When-depending-on-an-HSP-package-it-works-fine-with-the-debug-version-but-fails-with-“versionname-mismatch”-in-the-release-version" class="headerlink" title="4. When depending on an HSP package, it works fine with the debug version but fails with “versionname mismatch” in the release version."></a>4. When depending on an HSP package, it works fine with the debug version but fails with “versionname mismatch” in the release version.</h4><p>Ensure the <code>versionname</code> and <code>releaseType</code> of the HSP package exactly match those of the HAP.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/in-app-hsp-V5#restrictions">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/in-app-hsp-V5#restrictions</a>  </p>
<h4 id="5-Rounded-corners-on-a-HarmonyOS-WebView-do-not-take-effect"><a href="#5-Rounded-corners-on-a-HarmonyOS-WebView-do-not-take-effect" class="headerlink" title="5. Rounded corners on a HarmonyOS WebView do not take effect."></a>5. Rounded corners on a HarmonyOS WebView do not take effect.</h4><p>In some scenarios, setting rounded corners (e.g., top-left and top-right) for a Web component may not work when it is not displayed full-screen. The following demo demonstrates this issue:  </p>
<pre><code class="language-typescript">import web_webview from &#39;@ohos.web.webview&#39;;
import business_error from &#39;@ohos.base&#39;;

@Entry
@Component
struct Page2 &#123;
  controller: web_webview.WebviewController = new web_webview.WebviewController();
  @State progress: number = 0;
  @State src: string = &#39;https://www.huawei.com/u/bmmain/helpsale/evaluate?random=1000&amp;channel=BM_0933&amp;needHideHead=3&amp;cateId=101&amp;type=B&amp;plainSceneId=B2COld2New&amp;modelId=125986&amp;brandId=10532&amp;modelName=%E5%8D%8E%E4%B8%BA%20Mate%2060%20Pro&amp;skip2NextUrl=https%3A%2F%2Fm.zhuanzhuan.com%2Fzlj%2Fold_for_new_service_h5%2Fvaluation%3FneedHideHead%3D3%26needNewWebview%3D1%26serviceIds%3D%26productId%3D1779861808894005248%26metric%3D%26from%3Dc2b%26isUserEval%3D1&#39;;

  build() &#123;
    Column() &#123;
      Row().height(&#39;30%&#39;);
      Stack() &#123;
        Web(&#123; src: this.src, controller: this.controller &#125;)
          .borderRadius(&#123; topLeft: 100, topRight: 100, bottomLeft: 0, bottomRight: 0 &#125;)
          .javaScriptAccess(true)
          .domStorageAccess(true)
          .onProgressChange((event) =&gt; &#123;
            this.progress = event?.newProgress || 0;
            // console.log(`progress: $&#123;this.progress&#125;`);
          &#125;)
          .height(&#39;100%&#39;);
        Column(&#123; space: 20 &#125;) &#123;
          Text(`progress: $&#123;this.progress&#125;`).fontSize(30).fontColor(Color.Black);
          Button(&#39;loadUrl&#39;)
            .onClick(() =&gt; &#123;
              try &#123;
                this.controller.setCustomUserAgent(&quot;zzVersion/8.18.20 zzT/16 zzDevice/1_44.0_3.0 zzApp/58ZhuanZhuan&quot;);
                const customUa = this.controller.getCustomUserAgent();
                const ua = this.controller.getUserAgent();
                console.log(`customUa: $&#123;customUa&#125;, ua: $&#123;ua&#125;`);
              &#125; catch (error) &#123;
                let e: business_error.BusinessError = error as business_error.BusinessError;
                console.error(`ErrorCode: $&#123;e.code&#125;,  Message: $&#123;e.message&#125;`);
              &#125;
            &#125;);
        &#125;
      &#125;
      .height(&#39;70%&#39;);
    &#125;.backgroundColor(Color.Black);
  &#125;
&#125;
</code></pre>
<p><strong>Solution</strong>: Set <code>clip</code> to <code>true</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sharp-clipping-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-sharp-clipping-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41124-Daily-HarmonyOS-Next-Knowledge-PersistentStorage-Persistence-Slot-Methods-Relative-Layout-Pull-to-Load-and-Pull-to-Refresh-List-Linked-Sliding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41124-Daily-HarmonyOS-Next-Knowledge-PersistentStorage-Persistence-Slot-Methods-Relative-Layout-Pull-to-Load-and-Pull-to-Refresh-List-Linked-Sliding/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] PersistentStorage Persistence, Slot Methods, Relative Layout, Pull-to-Load and Pull-to-Refresh, List Linked Sliding</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:37:44 / Modified: 09:38:31" itemprop="dateCreated datePublished" datetime="2025-06-29T09:37:44+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-PersistentStorage-Persistence-Slot-Methods-Relative-Layout-Pull-to-Load-and-Pull-to-Refresh-List-Linked-Sliding"><a href="#Daily-HarmonyOS-Next-Knowledge-PersistentStorage-Persistence-Slot-Methods-Relative-Layout-Pull-to-Load-and-Pull-to-Refresh-List-Linked-Sliding" class="headerlink" title="[Daily HarmonyOS Next Knowledge] PersistentStorage Persistence, Slot Methods, Relative Layout, Pull-to-Load and Pull-to-Refresh, List Linked Sliding"></a>[Daily HarmonyOS Next Knowledge] PersistentStorage Persistence, Slot Methods, Relative Layout, Pull-to-Load and Pull-to-Refresh, List Linked Sliding</h1><h4 id="1-Why-is-PersistentStorage-persistence-of-user-information-invalid-in-HarmonyOS"><a href="#1-Why-is-PersistentStorage-persistence-of-user-information-invalid-in-HarmonyOS" class="headerlink" title="1. Why is PersistentStorage persistence of user information invalid in HarmonyOS?"></a>1. Why is PersistentStorage persistence of user information invalid in HarmonyOS?</h4><p>When obtaining user information on the home page via <code>@StorageLink(&#39;userInfoTest&#39;) userInfoTest: string = &#39;&#39;</code>, it returns <code>undefined</code>. What is the reason?  </p>
<p>First, declare <code>PersistentStorage.persistProp</code> outside the <code>@Entry</code> on the home page. Second, when setting the value after login, use <code>AppStorage.set</code> instead of <code>PersistentStorage.persistProp</code> to modify the value. Take <code>userInfo</code> as an example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;userInfo&#x27;</span>, <span class="string">&quot;111&quot;</span>) <span class="comment">// Can be directly placed below the import code. This example only uses userInfo; each property requiring persistent storage needs to be declared.</span></span><br><span class="line"><span class="comment">// The value set during declaration can be arbitrary and modified via set later. Try to keep the property consistent with the target value.</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Click to test&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Testing set&quot;</span>)</span><br><span class="line">        <span class="title class_">AppStorage</span>.<span class="title function_">set</span>(<span class="string">&#x27;userInfo&#x27;</span>, <span class="string">&quot;ceshi&quot;</span>) <span class="comment">// Use AppStorage.set directly instead of PersistentStorage.persistProp; otherwise, modification will fail.</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;Find userInfo&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> ut = <span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;userInfo&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ut); <span class="comment">// The test result shows the value in userInfo becomes &quot;ceshi&quot;. After killing the process and re-entering, clicking the button directly logs &quot;ceshi&quot;, achieving persistent storage.</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. Does HarmonyOS have slot usage methods like Vue?  </span></span><br><span class="line"><span class="string">The `</span><span class="meta">@BuilderParam</span><span class="string">` decorator can be used, which declares an element for any UI description, similar to a slot placeholder.  </span></span><br><span class="line"><span class="string">Reference link: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. For HarmonyOS RelativeContainer, can the anchor position coordinates set by offset not be used as anchors, and only the old coordinates without offset configuration can be used as anchors for calibrating the next component?  </span></span><br><span class="line"><span class="string">For example, if component A has its position configured via an anchor (with coordinate `</span>pos1<span class="string">`) and an offset sets a new position `</span>pos2<span class="string">`, component B must include the offset of component A to calibrate based on `</span>pos2<span class="string">`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Take the following three components as an example: The desired effect is a 13-unit gap between &quot;Personal Information&quot; and &quot;Age&quot;, and between &quot;Gender&quot; and &quot;Age&quot;. However, the actual gap between the three components is 0.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Row</span>() &#123;</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;Personal Information&#x27;</span>)</span><br><span class="line">    .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">    .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">      <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;row1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;,</span><br><span class="line">      <span class="attr">center</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;row1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">offset</span>(&#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">13</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">id</span>(<span class="string">&quot;person_info_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Button</span>(<span class="string">&#x27;Age&#x27;</span>)</span><br><span class="line">    .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">    .<span class="title function_">aspectRatio</span>(<span class="number">1.857</span>)</span><br><span class="line">    .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">      <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;person_info_text&quot;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;,</span><br><span class="line">      <span class="attr">center</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;row1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">offset</span>(&#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">13</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">id</span>(<span class="string">&quot;age_btn&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Button</span>(<span class="string">&#x27;Gender&#x27;</span>)</span><br><span class="line">    .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">    .<span class="title function_">aspectRatio</span>(<span class="number">1.857</span>)</span><br><span class="line">    .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">      <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&quot;age_btn&quot;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;,</span><br><span class="line">      <span class="attr">center</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;row1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">offset</span>(&#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">13</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">id</span>(<span class="string">&quot;gender_btn&quot;</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The anchor position set by `</span><span class="title class_">RelativeContainer</span><span class="string">` via `</span>offset<span class="string">` remains the original position before offset. Therefore, subsequent components reference the pre-offset position. To achieve the desired effect, set the offset as follows:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line">.<span class="title function_">offset</span>(&#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">13</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">offset</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">26</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">offset</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">39</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Are there any pre-encapsulated controls for pull-to-load and pull-to-refresh in HarmonyOS?  </span></span><br><span class="line"><span class="string">Writing data requests in `</span>listTouchEvent<span class="string">` is too coupled. A pre-encapsulated component is needed to expose the pull-to-refresh and pull-to-load layout for user configuration, along with event listening.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="title class_">PullToRefresh</span><span class="string">` is a usable component for pull-to-refresh and pull-to-load.  </span></span><br><span class="line"><span class="string">Reference link: https://gitee.com/openharmony-sig/ohos_pull_to_refresh  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PullToRefresh</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos/pulltorefresh&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">refreshText</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">dataNumbers</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;10&#x27;</span>];</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">dataStrings</span>: <span class="built_in">string</span>[] =</span><br><span class="line">    [<span class="string">&#x27;My Comments&#x27;</span>, <span class="string">&#x27;Related to Me&#x27;</span>, <span class="string">&#x27;Personal Center 1&#x27;</span>, <span class="string">&#x27;Personal Center 2&#x27;</span>, <span class="string">&#x27;Personal Center 3&#x27;</span>, <span class="string">&#x27;My Posts&#x27;</span>, <span class="string">&#x27;Settings&#x27;</span>, <span class="string">&#x27;Logout&#x27;</span>];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">data</span>: <span class="built_in">string</span>[] = <span class="variable language_">this</span>.<span class="property">dataStrings</span>;</span><br><span class="line">  <span class="comment">// List or grid component must be bound</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">PullToRefresh</span>(&#123;</span><br><span class="line">        <span class="comment">// Required: Data bound to the list component</span></span><br><span class="line">        <span class="attr">data</span>: $data,</span><br><span class="line">        <span class="comment">// Required: Scroller bound to the list or grid component in the main layout</span></span><br><span class="line">        <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scroller</span>,</span><br><span class="line">        <span class="comment">// Required: Custom main layout with list or grid component inside</span></span><br><span class="line">        <span class="attr">customList</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// A UI method decorated with @Builder</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getListView</span>();</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// Optional: Pull-to-refresh callback</span></span><br><span class="line">        <span class="attr">onRefresh</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// Simulate network request: After 2 seconds, resolve and update list data</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="title function_">resolve</span>(<span class="string">&#x27;Refresh successful&#x27;</span>);</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">data</span> = <span class="variable language_">this</span>.<span class="property">dataNumbers</span>;</span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// Optional: Pull-to-load-more callback</span></span><br><span class="line">        <span class="attr">onLoadMore</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// Simulate network request: After 2 seconds, resolve and append data to the list</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="title function_">resolve</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">push</span>(<span class="string">&quot;Added item &quot;</span> + <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">length</span>);</span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">customLoad</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">customRefresh</span>: <span class="literal">null</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getListView</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scroller</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">data</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(item)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">160</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#95efd2&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eeeeee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="number">0x222222</span> &#125;)</span><br><span class="line">    .<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">None</span>) <span class="comment">// Must set no edge effect for scrolling</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to achieve linked sliding for Lists in HarmonyOS?  </span></span><br><span class="line"><span class="string">A page requires two linked Lists, with the first List needing to stick to the top. However, using `</span><span class="title class_">ListItemGroup</span><span class="string">` for the sticky effect causes the index to behave as described in the API documentation: `</span><span class="title class_">ListItemGroup</span><span class="string">` calculates an index as a whole, and `</span><span class="title class_">ListItem</span><span class="string">` inside it does not calculate an index. This breaks the linked sliding based on indices between the two Lists.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Demo example:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// Top product categories</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CategoriesType</span> &#123;</span><br><span class="line">  <span class="attr">current</span>: <span class="built_in">string</span>[],</span><br><span class="line">  <span class="attr">hot</span>: <span class="built_in">string</span>[],</span><br><span class="line">  <span class="title class_">Categories</span>: <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Category</span>[]&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Category</span> &#123;</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">category</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> struct <span class="title class_">CityList</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">currentCategory</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">hotCategories</span>: <span class="built_in">string</span>[] = []</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">groupCategories</span>: <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Category</span>[]&gt; = <span class="keyword">new</span> <span class="title class_">Map</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">groupNameList</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;Area A&#x27;</span>, <span class="string">&#x27;Area B&#x27;</span>, <span class="string">&#x27;Area C&#x27;</span>, <span class="string">&#x27;Area D&#x27;</span>, <span class="string">&#x27;Area F&#x27;</span>, <span class="string">&#x27;Area G&#x27;</span>, <span class="string">&#x27;Area H&#x27;</span>, <span class="string">&#x27;Area J&#x27;</span>, <span class="string">&#x27;Area K&#x27;</span>, <span class="string">&#x27;Area L&#x27;</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">selectGroupIndex</span>: <span class="built_in">number</span> = -<span class="number">1</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">categoryScroller</span>: <span class="title class_">ListScroller</span> = <span class="keyword">new</span> <span class="title class_">ListScroller</span>()</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">categoryScroller1</span>: <span class="title class_">ListScroller</span> = <span class="keyword">new</span> <span class="title class_">ListScroller</span>()</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">isClickScroll</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">jsonString</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#123;&quot;current&quot;:[&quot;Health Products Zone&quot;],&quot;hot&quot;:[&quot;Insurance Type Conversion&quot;,&quot;Policy Loss Report&quot;,&quot;Policy Replacement&quot;],&quot;Categories&quot;:&#123;&quot;A区&quot;:[&#123;&quot;code&quot;:&quot;001&quot;,&quot;category&quot;:&quot;Add Additional Insurance&quot;&#125;,&#123;&quot;code&quot;:&quot;002&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;003&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;004&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;005&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;006&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;,&#123;&quot;code&quot;:&quot;007&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 6&quot;&#125;],&quot;B区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;],&quot;C区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;D区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;E区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;F区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;G区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;H区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;J区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;K区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;],&quot;L区&quot;:[&#123;&quot;code&quot;:&quot;008&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 1&quot;&#125;,&#123;&quot;code&quot;:&quot;009&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 2&quot;&#125;,&#123;&quot;code&quot;:&quot;010&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 3&quot;&#125;,&#123;&quot;code&quot;:&quot;011&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 4&quot;&#125;,&#123;&quot;code&quot;:&quot;012&quot;,&quot;category&quot;:&quot;Insurance Reinstatement 5&quot;&#125;]&#125;&#125;&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">data</span>: <span class="title class_">CategoriesType</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonString) <span class="keyword">as</span> <span class="title class_">CategoriesType</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentCategory</span> = data.<span class="property">current</span>[<span class="number">0</span>]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hotCategories</span> = data.<span class="property">hot</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">groupCategories</span> = data.<span class="property">Categories</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fxm = &#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">groupCategories</span>[<span class="string">&#x27;A区&#x27;</span>]))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">navigationList</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">42</span>)</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">categoryList</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getCitiesWithGroupName</span>(<span class="attr">name</span>: <span class="built_in">string</span>): <span class="title class_">Category</span>[] &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fxm &#x27;</span>, <span class="variable language_">this</span>.<span class="property">groupCategories</span>[name])</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">groupCategories</span>[name]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">itemHead</span>(<span class="params"><span class="attr">text</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(text)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="number">0xEEEEEE</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">categoryList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">categoryScroller</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">ListItemGroup</span>(&#123; <span class="attr">header</span>: <span class="variable language_">this</span>.<span class="title function_">itemHead</span>(<span class="string">&#x27;Current Zone&#x27;</span>) &#125;) &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">currentCategory</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">            .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">ListItemGroup</span>(&#123; <span class="attr">header</span>: <span class="variable language_">this</span>.<span class="title function_">itemHead</span>(<span class="string">&#x27;Hot Zones&#x27;</span>) &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">hotCategories</span>, <span class="function">(<span class="params"><span class="attr">hotCategory</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(hotCategory)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">              .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Grouping for Areas A~L</span></span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">groupNameList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItemGroup</span>(&#123; <span class="attr">header</span>: <span class="variable language_">this</span>.<span class="title function_">itemHead</span>(item) &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="title function_">getCitiesWithGroupName</span>(item), <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">Category</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(item.<span class="property">category</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">                .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">Category</span></span>) =&gt;</span> item.<span class="property">category</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">    .<span class="title function_">sticky</span>(<span class="title class_">StickyStyle</span>.<span class="property">Header</span>)</span><br><span class="line">    .<span class="title function_">onTouch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// When the category list is touched to scroll, set isClickScroll to false to prevent scrolling conflicts with the navigation list</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isClickScroll</span> = <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">onScrollIndex</span>(<span class="function">(<span class="params"><span class="attr">start</span>: <span class="built_in">number</span>, <span class="attr">end</span>: <span class="built_in">number</span>, <span class="attr">center</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//联动控制导航列表选中状态 via selectGroupIndex state variable and start</span></span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isClickScroll</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">selectGroupIndex</span> = start - <span class="number">2</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">navigationList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">categoryScroller1</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">groupNameList</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span>, <span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(item)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">42</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(index == <span class="variable language_">this</span>.<span class="property">selectGroupIndex</span> ? <span class="number">0xCCCCCC</span> : <span class="title class_">Color</span>.<span class="property">Transparent</span>)</span><br><span class="line">            .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">            .<span class="title function_">borderRadius</span>(<span class="number">15</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// When the navigation list is selected, set isClickScroll to true to prevent the category list from driving state changes during scrolling</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">isClickScroll</span> = <span class="literal">true</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">selectGroupIndex</span> = index</span><br><span class="line">              <span class="comment">// Control the category list to scroll to the corresponding position via selectGroupIndex and Scroller</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">categoryScroller</span>.<span class="title function_">scrollToIndex</span>(index + <span class="number">2</span>, <span class="literal">true</span>, <span class="title class_">ScrollAlign</span>.<span class="property">START</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Horizontal</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Transparent</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41125-Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41125-Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Initializing BigInt, Package Size Optimization, Tabs Nested in Grid, Aging Adaptation, Release Packaging Failure</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:36:36 / Modified: 09:37:15" itemprop="dateCreated datePublished" datetime="2025-06-29T09:36:36+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure"><a href="#Daily-HarmonyOS-Next-Knowledge-Initializing-BigInt-Package-Size-Optimization-Tabs-Nested-in-Grid-Aging-Adaptation-Release-Packaging-Failure" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Initializing BigInt, Package Size Optimization, Tabs Nested in Grid, Aging Adaptation, Release Packaging Failure"></a>[Daily HarmonyOS Next Knowledge] Initializing BigInt, Package Size Optimization, Tabs Nested in Grid, Aging Adaptation, Release Packaging Failure</h1><h4 id="1-How-to-initialize-a-BigInt-type-property-in-a-class-in-HarmonyOS"><a href="#1-How-to-initialize-a-BigInt-type-property-in-a-class-in-HarmonyOS" class="headerlink" title="1. How to initialize a BigInt type property in a class in HarmonyOS?"></a>1. How to initialize a BigInt type property in a class in HarmonyOS?</h4><p>BigInt can be initialized using the keyword, for example:  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">let a = BigInt(1); let b = BigInt(&quot;2&quot;); </span><br><span class="line">```  </span><br><span class="line">Example of mutual conversion between Uint8Array and string:  </span><br><span class="line">```typescript</span><br><span class="line">// String to Uint8Array  </span><br><span class="line">let text1 = &quot;hello world&quot;;</span><br><span class="line">let buf = new ArrayBuffer(text1.length * 2);</span><br><span class="line">let uint8 = new Uint8Array(buf);</span><br><span class="line">for (let i = 0; i &lt; text1.length; i++) &#123;</span><br><span class="line">  uint8[i] = text1.charCodeAt(i);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;uint8----&#x27;, uint8);</span><br><span class="line"></span><br><span class="line">// Uint8Array to string  </span><br><span class="line">let spArray = uint8.slice(0, 3);</span><br><span class="line">let dataString = &#x27;&#x27;;</span><br><span class="line">for (let i = 0; i &lt; spArray.length; i++) &#123;</span><br><span class="line">  dataString += String.fromCharCode(spArray[i]);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;dataString-----&#x27;, dataString);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2. Can the same so be merged when packaging final apps for different haps? Reduce package size due to duplicate so files.  </span><br><span class="line">Reducing the app package size is crucial for improving download and installation experience. Compressing, streamlining, or reusing code/resources in the app can effectively reduce its size, enhance download/installation speed, and minimize system space occupation.  </span><br><span class="line"></span><br><span class="line">Developers can refer to the following three methods to reduce the app package size:  </span><br><span class="line"></span><br><span class="line">##### Configure so compression options  </span><br><span class="line">By compressing so libraries, the app package size can be reduced. In scenarios with multiple packages (HAP, HSP), use HSP (Harmony Shared Package) to dynamically share code/resources among multiple packages, eliminating duplicate copies caused by HAR (Harmony Archive) static shared packages.  </span><br><span class="line"></span><br><span class="line">**Configuration method**: https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/module-configuration-file.md  </span><br><span class="line">Modify the `compressNativeLibs` field in the module configuration file `module.json5` to `true`:  </span><br><span class="line">```json5</span><br><span class="line">&#123;</span><br><span class="line">  &quot;module&quot;: &#123;</span><br><span class="line">    // ...</span><br><span class="line">    &quot;compressNativeLibs&quot;: true // Indicate that libs should be packaged in compressed form</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">##### So compression effect  </span><br><span class="line">Taking the default C++ library in DevEco Studio as an example, the size comparison before/after compression is as follows:  </span><br><span class="line">| File Name | Original Size | Compressed Size | Compression Rate |  </span><br><span class="line">|-----------|---------------|-----------------|------------------|  </span><br><span class="line">| armeabi-v7a/libc++_shared.so | 1,108k | 386k | 34% |  </span><br><span class="line"></span><br><span class="line">##### Use HSP to share code/resources in multi-package scenarios  </span><br><span class="line">The system provides two shared packages: HAR (static) and HSP (dynamic).  </span><br><span class="line">- HAR code/resources are compiled with the user, leading to duplicate copies in multiple users&#x27; outputs.  </span><br><span class="line">- HSP code/resources are independently compiled, with only one copy existing in a process at runtime.  </span><br><span class="line"></span><br><span class="line">In multi-package scenarios, using HAR for sharing causes redundant copies. Replacing HAR with HSP can reduce the package size when the total size of shared resources exceeds HSP (11k).  </span><br><span class="line"></span><br><span class="line">##### Use scanning tools to analyze app packages  </span><br><span class="line">Scanning tools can:  </span><br><span class="line">- Scan duplicate files.  </span><br><span class="line">- Identify files exceeding specified sizes.  </span><br><span class="line">- Statistically analyze the total size and proportion of each file type.  </span><br><span class="line"></span><br><span class="line">**Optimization measures based on scan results**:  </span><br><span class="line">- Remove duplicate resources within the same package.  </span><br><span class="line">- Use HSP to reuse duplicate resources across multi-packages.  </span><br><span class="line">- Compress large files (e.g., JPG, PNG, GIF).  </span><br><span class="line">- Compress so files by configuring compression options.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. Issues with Tabs nested in Grid in HarmonyOS?  </span><br><span class="line">When using a Grid container in TabContent, the dynamic number of Grid elements causes inconsistent TabContent heights (the height of the TabContent with the most elements is applied to all).  </span><br><span class="line"></span><br><span class="line">**Solution**:  </span><br><span class="line">The TabContent component does not support universal height settings, as its height is determined by the Tabs parent component and TabBar. The Grid component can achieve adaptive height by setting `maxCount` (which acts as a height control switch). For details, refer to:  </span><br><span class="line">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-grid-V5#example6  </span><br><span class="line"></span><br><span class="line">```typescript</span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State numbers: string[] = [];</span><br><span class="line"></span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line">    for (let i = 1; i &lt;= 35; i++) &#123;</span><br><span class="line">      this.numbers.push(i + &#x27;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Scroll() &#123;</span><br><span class="line">      Column(&#123; space: 5 &#125;) &#123;</span><br><span class="line">        Blank();</span><br><span class="line">        Text(&#x27;rowsTemplate and columnsTemplate are not set; layoutDirection, maxcount, minCount, and cellLength take effect&#x27;)</span><br><span class="line">          .fontSize(15)</span><br><span class="line">          .fontColor(0xCCCCCC)</span><br><span class="line">          .width(&#x27;90%&#x27;);</span><br><span class="line">        Grid() &#123;</span><br><span class="line">          ForEach(this.numbers, (day: string) =&gt; &#123;</span><br><span class="line">            GridItem() &#123;</span><br><span class="line">              Text(day).fontSize(16).backgroundColor(0xF9CF93);</span><br><span class="line">            &#125;.width(40).height(80).borderWidth(2).borderColor(Color.Red);</span><br><span class="line">          &#125;, (day: string) =&gt; day);</span><br><span class="line">        &#125;</span><br><span class="line">        .columnsGap(10)</span><br><span class="line">        .rowsGap(10)</span><br><span class="line">        .backgroundColor(0xFAEEE0)</span><br><span class="line">        .maxCount(6)</span><br><span class="line">        .minCount(2)</span><br><span class="line">        .cellLength(0)</span><br><span class="line">        .layoutDirection(GridDirection.Row)</span><br><span class="line">        .backgroundColor(Color.Blue);</span><br><span class="line">      &#125;.width(&#x27;90%&#x27;).margin(&#123; top: 5, left: 5, right: 5 &#125;).align(Alignment.Center);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 4. Are there best practices or demos for aging adaptation in HarmonyOS?  </span><br><span class="line">When the system font size is adjusted, the app layout may become ugly. It is desired to limit the font size within a specific range (min/max) regardless of system settings.  </span><br><span class="line"></span><br><span class="line">```typescript</span><br><span class="line">// xxx.ets</span><br><span class="line">import measure from &#x27;@ohos.measure&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct TextInputExample &#123;</span><br><span class="line">  @State text: string = &#x27;&#x27;;</span><br><span class="line">  @State truncatedHint: string = &quot;Text not truncated&quot;;</span><br><span class="line">  controller: TextInputController = new TextInputController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      TextInput(&#123; text: this.text, placeholder: &#x27;input your word...&#x27;, controller: this.controller &#125;)</span><br><span class="line">        .placeholderColor(Color.Grey)</span><br><span class="line">        .placeholderFont(&#123; size: 14, weight: 400 &#125;)</span><br><span class="line">        .caretColor(Color.Blue)</span><br><span class="line">        .width(400)</span><br><span class="line">        .height(40)</span><br><span class="line">        .margin(20)</span><br><span class="line">        .fontSize(14)</span><br><span class="line">        .fontColor(Color.Black)</span><br><span class="line">        .onChange((value: string) =&gt; &#123;</span><br><span class="line">          this.text = value;</span><br><span class="line">          let textSizeShow1: SizeOptions = measure.measureTextSize(&#123;</span><br><span class="line">            textContent: this.text,</span><br><span class="line">            constraintWidth: 100,</span><br><span class="line">            fontSize: 14,</span><br><span class="line">            overflow: TextOverflow.Ellipsis,</span><br><span class="line">            maxLines: 2</span><br><span class="line">          &#125;);</span><br><span class="line">          let textSizeShow2: SizeOptions = measure.measureTextSize(&#123;</span><br><span class="line">            textContent: this.text + &quot; &quot;,</span><br><span class="line">            constraintWidth: 100,</span><br><span class="line">            fontSize: 14,</span><br><span class="line">            overflow: TextOverflow.Ellipsis,</span><br><span class="line">            maxLines: 2000000</span><br><span class="line">          &#125;);</span><br><span class="line">          console.log(&quot;tag textSizeShow1.height=&quot; + textSizeShow1.height);</span><br><span class="line">          console.log(&quot;tag textSizeShow2.height=&quot; + textSizeShow2.height);</span><br><span class="line"></span><br><span class="line">          if (textSizeShow2 &amp;&amp; textSizeShow1 &amp;&amp; textSizeShow2?.height &amp;&amp; textSizeShow1?.height &amp;&amp; (textSizeShow2?.height &gt; textSizeShow1?.height)) &#123;</span><br><span class="line">            console.log(&quot;tag Text truncated&quot;);</span><br><span class="line">            this.truncatedHint = &quot;Text truncated&quot;;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            console.log(&quot;tag Text not truncated&quot;);</span><br><span class="line">            this.truncatedHint = &quot;Text not truncated&quot;;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      Text(this.text)</span><br><span class="line">        .maxLines(2)</span><br><span class="line">        .width(100)</span><br><span class="line">        .textOverflow(&#123; overflow: TextOverflow.Ellipsis &#125;)</span><br><span class="line">        .border(&#123; width: 1 &#125;)</span><br><span class="line">        .minFontSize(14)</span><br><span class="line">        .maxFontSize(24);</span><br><span class="line">      Text(this.truncatedHint);</span><br><span class="line">    &#125;.width(&#x27;100%&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5. Release package compilation failed?  </span><br></pre></td></tr></table></figure>
<p>hvigor ERROR: Failed ::PackageApp…<br>hvigor ERROR: Tools execution failed.<br>2024&#x2F;06&#x2F;17 16:55:38.923 - Ohos BundleTool [Error]: debug is different.<br>2024&#x2F;06&#x2F;17 16:55:38.923 - Ohos BundleTool [Error]: some app variable is different.<br>2024&#x2F;06&#x2F;17 16:55:38.923 - Ohos BundleTool [Error]: Compressor::compressAppMode compress failed.<br>2024&#x2F;06&#x2F;17 16:55:38.926 - Ohos BundleTool [Error]: Compressor::compressProcess Bundle exception.<br>2024&#x2F;06&#x2F;17 16:55:38.926 - Ohos BundleTool [Error]: Compressor::compressProcess compress failed.<br>2024&#x2F;06&#x2F;17 16:55:38.926 - Ohos BundleTool [Error]: CompressEntrance::main exit, compress failed<br>Detail: Please check the message from tools.<br>hvigor ERROR: BUILD FAILED in 23 s 837 ms</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**Cause**: Inconsistent `vendor` fields in `app.json5` of multi-module references.  </span><br><span class="line"></span><br><span class="line">**Troubleshooting steps**:  </span><br><span class="line">1. In File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Hvigor, set Use log level to Debug.  </span><br><span class="line">2. Rebuild the app.  </span><br><span class="line">3. Search the build log for &quot;app_packing_tool&quot; parameters (–hap-path, –hsp-path) to identify all dependent haps/hsps.  </span><br><span class="line">4. Ensure consistent `vendor` fields across haps/hsps.  </span><br><span class="line"></span><br><span class="line">Example build log snippet:  </span><br></pre></td></tr></table></figure>
<p>hvigor DEBUG BasePackAppTask Use tool [PackageApp][‘java’,‘-Dfile.encoding&#x3D;GBK’,‘-jar’,<br>‘D:\DevEco_pakage\Huawei\harmonyos\HarmonyOS-NEXT-DP1\base\toolchains\lib\app_packing_tool.jar’,‘–mode’,‘app’,‘–pack-info-path’,‘D:\demo\MyApplication\build\outputs\default\pack.info’,‘–hap-path’,<br>‘D:\demo\MyApplication\entry\build\default\outputs\default\app\entry-default.hap’,‘–hsp-path’,<br>‘D:\demo\MyApplication\library\build\default\outputs\default\app\library-default.hsp’,‘–force’,‘true’,‘–out-path’,<br>‘D:\demo\MyApplication\build\outputs\default\MyApplication-default-unsigned.app’,‘–main-module-limit’,‘2’,‘–normal-module-limit’,‘2’]</p>
<pre><code>
For specific configuration procedures, refer to: https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-internalrelease-0000001756878768
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41126-Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41126-Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Node Destruction Issues, Distinguishing Between Mobile and Pad, Navigation Routing Problems, Tabs Component Width, and How to Monitor Maps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:35:32 / Modified: 09:36:10" itemprop="dateCreated datePublished" datetime="2025-06-29T09:35:32+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps"><a href="#Daily-HarmonyOS-Next-Knowledge-Node-Destruction-Issues-Distinguishing-Between-Mobile-and-Pad-Navigation-Routing-Problems-Tabs-Component-Width-and-How-to-Monitor-Maps" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Node Destruction Issues, Distinguishing Between Mobile and Pad, Navigation Routing Problems, Tabs Component Width, and How to Monitor Maps"></a>[Daily HarmonyOS Next Knowledge] Node Destruction Issues, Distinguishing Between Mobile and Pad, Navigation Routing Problems, Tabs Component Width, and How to Monitor Maps</h1><h4 id="1-In-HarmonyOS-if-only-the-root-node’s-dispose-is-called-can-its-child-nodes-be-destroyed-or-do-child-nodes-need-to-be-traversed-and-their-dispose-methods-executed-for-proper-destruction"><a href="#1-In-HarmonyOS-if-only-the-root-node’s-dispose-is-called-can-its-child-nodes-be-destroyed-or-do-child-nodes-need-to-be-traversed-and-their-dispose-methods-executed-for-proper-destruction" class="headerlink" title="1. In HarmonyOS, if only the root node’s dispose is called, can its child nodes be destroyed, or do child nodes need to be traversed and their dispose methods executed for proper destruction?"></a>1. In HarmonyOS, if only the root node’s dispose is called, can its child nodes be destroyed, or do child nodes need to be traversed and their dispose methods executed for proper destruction?</h4><p>Frontend-referenced objects need to be disposed, and builderNodes and FrameNodes created with new also require dispose. Calling only the root node’s dispose cannot guarantee that child nodes will be properly released.  </p>
<h4 id="2-How-to-distinguish-between-mobile-and-pad-devices-in-the-Web-UserAgent-of-HarmonyOS"><a href="#2-How-to-distinguish-between-mobile-and-pad-devices-in-the-Web-UserAgent-of-HarmonyOS" class="headerlink" title="2. How to distinguish between mobile and pad devices in the Web UserAgent of HarmonyOS?"></a>2. How to distinguish between mobile and pad devices in the Web UserAgent of HarmonyOS?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#ZH-CN_TOPIC_0000001884757262__%E5%A6%82%E4%BD%95%E6%9F%A5%E8%AF%A2%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/multi-faq-V5#ZH-CN_TOPIC_0000001884757262__%E5%A6%82%E4%BD%95%E6%9F%A5%E8%AF%A2%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B</a>  </p>
<ol>
<li><p>Query device type via command line.<br>Query the specified system parameter (const.product.devicetype) via command line to determine the device type:  </p>
<pre><code class="language-bash"># Method 1  
hdc shell param get &quot;const.product.devicetype&quot;  
# Method 2  
hdc shell cat /etc/param/ohos.para | grep const.product.devicetype  
</code></pre>
</li>
<li><p>Query device type during application development.  </p>
<pre><code class="language-typescript">import &#123; deviceInfo &#125; from &#39;@kit.BasicServicesKit&#39;;

@Entry
@Component
struct GetDeviceTypeSample &#123;
  @State deviceType: string = &#39;unknown&#39;;

  aboutToAppear() &#123;
    this.deviceType = deviceInfo.deviceType;
  &#125;

  build() &#123;
    Column() &#123;
      Text(this.deviceType).fontSize(24);
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;);
  &#125;
&#125;
</code></pre>
</li>
</ol>
<h4 id="3-Navigation-routing-issues-in-HarmonyOS"><a href="#3-Navigation-routing-issues-in-HarmonyOS" class="headerlink" title="3. Navigation routing issues in HarmonyOS?"></a>3. Navigation routing issues in HarmonyOS?</h4><p>When navigating from the Index page to the PageOne page, the navigation bar is hidden (hideNavBar), but why does a white screen appear when returning from PageOne to the previous page?  </p>
<pre><code class="language-typescript">// Index.ets  
@Entry
@Component
struct Index &#123;
  @State hideNavBar: boolean = false;
  private pageStack: NavPathStack = new NavPathStack();

  build() &#123;
    Navigation(this.pageStack) &#123;
      Column() &#123;
        Button(&#39;Jump to PageOne, hide NavBar&#39;)
          .onClick(() =&gt; &#123;
            this.hideNavBar = true;
            this.pageStack.replacePath(&#123;
              name: &#39;PageOne&#39;
            &#125;);
          &#125;);
      &#125;
      .height(&#39;100%&#39;)
      .justifyContent(FlexAlign.Center);
    &#125;
    .hideNavBar(this.hideNavBar)
    .hideTitleBar(true)
    .hideBackButton(true);
  &#125;
&#125;

// PageOne.ets  
@Builder
function PageOneBuilder() &#123;
  PageOne();
&#125;

@Component
export struct PageOne &#123;
  pageStack: NavPathStack | null = null;
  build() &#123;
    NavDestination() &#123;
      Column() &#123;
        Button(&#39;Return to previous page&#39;)
          .onClick(() =&gt; &#123;
            // Return to the previous page here  
            this.pageStack?.pop?.();
          &#125;);
      &#125;.height(&#39;100%&#39;);
    &#125;
    .hideTitleBar(true)
    .onReady((ctx: NavDestinationContext) =&gt; &#123;
      this.pageStack = ctx.pathStack;
    &#125;);
  &#125;
&#125;
</code></pre>
<p>API reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5</a>  </p>
<p><strong>White screen cause</strong>: Hiding the navigation bar via hideNavBar(true) leads to this issue. Setting it to false restores the previous page’s navigation bar buttons. Adding a Button component to Navigation ensures visibility even when Navigation is hidden. Refer to the API documentation for details.  </p>
<h4 id="4-Width-issues-with-the-HarmonyOS-Tabs-component"><a href="#4-Width-issues-with-the-HarmonyOS-Tabs-component" class="headerlink" title="4. Width issues with the HarmonyOS Tabs component?"></a>4. Width issues with the HarmonyOS Tabs component?</h4><p>Documentation states that the Tabs component’s indicator matches the view width. The app’s home page has numerous columns, with a semi-transparent cover strip and button on the right, causing operational issues—some columns may be unreachable. Is there a way to separate these elements or use alternative components?  </p>
<p>Refer to the following demo:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct tabTest &#123;
  @State tabArray: Array&lt;number&gt; = [0, 1, 2, 3, 4];
  @State focusIndex: number = 0;
  @State pre: number = 0;
  @State index: number = 0;
  private controller: TabsController = new TabsController();
  @State test: boolean = false;
  @State animationDuration: number = 300;
  @State indicatorLeftMargin: number = 0;
  @State indicatorWidth: number = 0;
  private tabsWidth: number = 0;
  private tabWidth: number = 0;
  private scrollerForScroll: Scroller = new Scroller();

  // Individual tab  
  @Builder
  Tab(tabName: string, tabItem: number, tabIndex: number) &#123;
    Row(&#123; space: 20 &#125;) &#123;
      Text(tabName)
        .fontSize(18)
        .fontColor(tabIndex === this.focusIndex ? Color.Blue : Color.Black)
        .id(tabIndex.toString())
        .onAreaChange((oldValue: Area, newValue: Area) =&gt; &#123;
          if (this.focusIndex === tabIndex &amp;&amp; (this.indicatorLeftMargin === 0 || this.indicatorWidth === 0)) &#123;
            if (newValue.position.x !== undefined) &#123;
              let positionX = Number.parseFloat(newValue.position.x.toString());
              this.indicatorLeftMargin = Number.isNaN(positionX) ? 0 : positionX;
            &#125;
            let width = Number.parseFloat(newValue.width.toString());
            this.tabWidth = Number.isNaN(width) ? 0 : width;
            this.indicatorWidth = this.tabWidth;
          &#125;
        &#125;);
    &#125;
    .justifyContent(FlexAlign.Center)
    .constraintSize(&#123; minWidth: 35 &#125;)
    .width(100)
    .height(30)
    .onClick(() =&gt; &#123;
      this.controller.changeIndex(tabIndex);
      this.focusIndex = tabIndex;
    &#125;)
    .backgroundColor(&quot;#ffb7b7b7&quot;);
  &#125;

  @Builder
  textTest(textName: string) &#123;
    Row(&#123; space: 20 &#125;) &#123;
      Text(textName).fontSize(18);
    &#125;
    .justifyContent(FlexAlign.Center)
    .constraintSize(&#123; minWidth: 35 &#125;)
    .height(30)
    .backgroundColor(&quot;#ffb7b7b7&quot;);
  &#125;

  build() &#123;
    Column() &#123;
      Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;
        Column() &#123;
          // Tabs  
          Row(&#123; space: 8 &#125;) &#123;
            List(&#123; space: 20, initialIndex: 0, scroller: this.scrollerForScroll &#125;) &#123;
              ForEach(this.tabArray, (item: number, index: number) =&gt; &#123;
                ListItem() &#123;
                  this.Tab(&quot;Tab &quot; + item, item, index);
                &#125;
              &#125;, (item: string) =&gt; item);
            &#125;
            .listDirection(Axis.Horizontal)
            .height(30)
            .width(&#39;80%&#39;)
            .friction(0.6)
            .alignListItem(ListItemAlign.Start)
            .scrollBar(BarState.Off)
            .width(&#39;80%&#39;)
            .backgroundColor(&quot;#ffb7b7b7&quot;)
            .onScroll((xOffset: number, yOffset: number) =&gt; &#123;
              this.indicatorLeftMargin -= xOffset;
            &#125;);
            this.textTest(&#39;More&#39;);
          &#125;
          .alignItems(VerticalAlign.Bottom)
          .width(&#39;100%&#39;)
          .backgroundColor(&quot;#ffb7b7b7&quot;);
        &#125;
        .alignItems(HorizontalAlign.Start)
        .width(&#39;100%&#39;);

        Column()
          .height(2)
          .width(this.indicatorWidth)
          .margin(&#123; left: this.indicatorLeftMargin, top: 30 &#125;)
          .backgroundColor(Color.Blue);
        Column()
          .height(10)
          .width(&quot;20%&quot;)
          .margin(&#123; left: &#39;80%&#39;, top: 28 &#125;)
          .backgroundColor(&quot;#ffb7b7b7&quot;);
      &#125;
      .height(40)
      .width(&#39;100%&#39;)
      .backgroundColor(&quot;#ffb7b7b7&quot;);
      // Tabs  
      Tabs(&#123; barPosition: BarPosition.Start, controller: this.controller &#125;) &#123;
        ForEach(this.tabArray, (item: number, index: number) =&gt; &#123;
          TabContent() &#123;
            Text(&#39;Content of Page &#39; + item)
              .height(300)
              .width(&#39;100%&#39;)
              .fontSize(30);
          &#125;
          .backgroundColor(Color.White);
        &#125;, (item: string) =&gt; item);
      &#125;
      .onAreaChange((oldValue: Area, newValue: Area) =&gt; &#123;
        let width = Number.parseFloat(newValue.width.toString());
        this.tabsWidth = Number.isNaN(width) ? 0 : width;
      &#125;)
      .width(&#39;100%&#39;)
      .barHeight(0)
      .animationDuration(100)
      .onChange((index: number) =&gt; &#123;
        console.log(&#39;foo change&#39;);
        this.focusIndex = index;
        this.scrollerForScroll.scrollToIndex(index - 1, true);
      &#125;)
      .onAnimationStart((index: number, targetIndex: number, event: TabsAnimationEvent) =&gt; &#123;
        // Callback triggered at the start of the tab switch animation. The underline slides with the page.  
        this.focusIndex = targetIndex;
        let targetIndexInfo = this.getTextInfo(targetIndex);
        this.startAnimateTo(this.animationDuration, targetIndexInfo.left, targetIndexInfo.width);
      &#125;)
      .onAnimationEnd((index: number, event: TabsAnimationEvent) =&gt; &#123;
        // Callback triggered at the end of the tab switch animation. The underline animation stops.  
        let currentIndicatorInfo = this.getCurrentIndicatorInfo(index, event);
        this.startAnimateTo(0, currentIndicatorInfo.left, currentIndicatorInfo.width);
      &#125;)
      .onGestureSwipe((index: number, event: TabsAnimationEvent) =&gt; &#123;
        // Callback triggered frame-by-frame during page swipe.  
        let currentIndicatorInfo = this.getCurrentIndicatorInfo(index, event);
        this.focusIndex = currentIndicatorInfo.index;
        this.indicatorLeftMargin = currentIndicatorInfo.left;
        this.tabWidth = currentIndicatorInfo.width;
        this.indicatorWidth = currentIndicatorInfo.width;
      &#125;);
    &#125;
    .height(&#39;100%&#39;);
  &#125;

  private getTextInfo(index: number): Record&lt;string, number&gt; &#123;
    let strJson = getInspectorByKey(index.toString());
    try &#123;
      let obj: Record&lt;string, string&gt; = JSON.parse(strJson);
      let rectInfo: number[][] = JSON.parse(&#39;[&#39; + obj.$rect + &#39;]&#39;);
      return &#123; &#39;left&#39;: px2vp(rectInfo[0][0]), &#39;width&#39;: px2vp(rectInfo[1][0] - rectInfo[0][0]) &#125;;
    &#125; catch (error) &#123;
      return &#123; &#39;left&#39;: 0, &#39;width&#39;: 0 &#125;;
    &#125;
  &#125;

  private getCurrentIndicatorInfo(index: number, event: TabsAnimationEvent): Record&lt;string, number&gt; &#123;
    let nextIndex = index;
    if (index &gt; 0 &amp;&amp; event.currentOffset &gt; 0) &#123;
      nextIndex--;
    &#125; else if (index &lt; 4 &amp;&amp; event.currentOffset &lt; 0) &#123;
      nextIndex++;
    &#125;
    let indexInfo = this.getTextInfo(index);
    let nextIndexInfo = this.getTextInfo(nextIndex);
    let swipeRatio = Math.abs(event.currentOffset / this.tabsWidth);
    let currentIndex = swipeRatio &gt; 0.5 ? nextIndex : index; // Switch to the next tab if the page swipe exceeds half.  
    let currentLeft = indexInfo.left + (nextIndexInfo.left - indexInfo.left) * swipeRatio;
    let currentWidth = indexInfo.width + (nextIndexInfo.width - indexInfo.width) * swipeRatio;
    return &#123; &#39;index&#39;: currentIndex, &#39;left&#39;: currentLeft, &#39;width&#39;: currentWidth &#125;;
  &#125;

  private startAnimateTo(duration: number, leftMargin: number, width: number) &#123;
    animateTo(&#123;
      duration: duration, // Animation duration  
      curve: Curve.Linear, // Animation curve  
      iterations: 1, // Number of plays  
      playMode: PlayMode.Normal, // Animation mode  
      onFinish: () =&gt; &#123;
        console.info(&#39;play end&#39;);
      &#125;
    &#125;, () =&gt; &#123;
      this.indicatorLeftMargin = leftMargin;
      this.tabWidth = width;
      this.indicatorWidth = width;
    &#125;);
  &#125;
&#125;
</code></pre>
<h4 id="5-How-to-monitor-Maps-in-HarmonyOS"><a href="#5-How-to-monitor-Maps-in-HarmonyOS" class="headerlink" title="5. How to monitor Maps in HarmonyOS?"></a>5. How to monitor Maps in HarmonyOS?</h4><p>Map variables can be decorated with @State. Currently, Map and Set types are supported, but HashMap is not.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41127-Daily-HarmonyOS-Next-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41127-Daily-HarmonyOS-Next-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Web Height Adaptation, Variable Declaration Specifications, Animation Cancellation, Signature Files, and Package Size Optimization-related</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:34:25 / Modified: 09:36:44" itemprop="dateCreated datePublished" datetime="2025-06-29T09:34:25+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related"><a href="#Daily-HarmonyOS-Knowledge-Web-Height-Adaptation-Variable-Declaration-Specifications-Animation-Cancellation-Signature-Files-and-Package-Size-Optimization-related" class="headerlink" title="[Daily HarmonyOS Knowledge] Web Height Adaptation, Variable Declaration Specifications, Animation Cancellation, Signature Files, and Package Size Optimization-related"></a>[Daily HarmonyOS Knowledge] Web Height Adaptation, Variable Declaration Specifications, Animation Cancellation, Signature Files, and Package Size Optimization-related</h1><h4 id="1-How-to-Adapt-the-Height-of-a-HarmonyOS-Web-Page"><a href="#1-How-to-Adapt-the-Height-of-a-HarmonyOS-Web-Page" class="headerlink" title="1. How to Adapt the Height of a HarmonyOS Web Page?"></a>1. How to Adapt the Height of a HarmonyOS Web Page?</h4><p>When setting the height of a Web page to 100%, it is found that the height is inconsistent with that of the Web control. What needs to be set to make the page height consistent with the Web container height?</p>
<p>Currently, only two web layout modes are supported, namely Web layout following the system WebLayoutMode.NONE and Web adaptive webpage layout based on page size WebLayoutMode.FIT_CONTENT. The default is WebLayoutMode.NONE mode. Reference document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabcontent-V5#layoutmode10%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-tabcontent-V5#layoutmode10%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Web(&#123; src: $rawfile(&#x27;index.html&#x27;), controller: this.controller &#125;)</span><br><span class="line">  .width(CommonConstants.WIDTH_OR_HEIGHT)</span><br><span class="line">  .layoutMode(WebLayoutMode.FIT_CONTENT)</span><br></pre></td></tr></table></figure>

<h4 id="2-Does-HarmonyOS-ArkTS-have-relevant-specifications-for-variable-type-declaration"><a href="#2-Does-HarmonyOS-ArkTS-have-relevant-specifications-for-variable-type-declaration" class="headerlink" title="2. Does HarmonyOS ArkTS have relevant specifications for variable type declaration?"></a>2. Does HarmonyOS ArkTS have relevant specifications for variable type declaration?</h4><p>Is it necessary to add variable types when declaring variables? Are the requirements consistent for different types? For example:<br>Is let result &#x3D; ‘’ required to be written as let result: string &#x3D; ‘’?<br>Is const TEST_RESULT &#x3D; ‘ok’ required to be written as const TEST_RESULT: string &#x3D; ‘ok’?<br>Are there differences between member variables and temporary variables?</p>
<p>Using let result &#x3D; ‘’; is sufficient, and the engine will infer the type based on the value. let and const are the same, and regardless of the type of variable, the type can be automatically inferred.</p>
<h4 id="3-How-to-cancel-the-animateTo-or-animation-in-HarmonyOS"><a href="#3-How-to-cancel-the-animateTo-or-animation-in-HarmonyOS" class="headerlink" title="3. How to cancel the animateTo or animation in HarmonyOS?"></a>3. How to cancel the animateTo or animation in HarmonyOS?</h4><p>I didn’t see the relevant cancellation method in the document.</p>
<p>If you need to interrupt the animation, you can refer to this demo, which sets an animation with a value of 0 to interrupt the previous animation.<br>Reference demo:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Entry</span><br><span class="line">struct Index &#123;</span><br><span class="line">  @State clickNumber: number = 0;</span><br><span class="line">  @State myScale: number = 1.0;</span><br><span class="line">  uiContext: UIContext | undefined = undefined;</span><br><span class="line">  imageIndex: number = 0</span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line">    this.uiContext = this.getUIContext?.();</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Stack(&#123; alignContent: Alignment.TopEnd &#125;) &#123;</span><br><span class="line">      // Wooden fish picture</span><br><span class="line">      Image($r(&#x27;app.media.startIcon&#x27;))</span><br><span class="line">        .zIndex(2)</span><br><span class="line">        .width(200)</span><br><span class="line">        .height(200)</span><br><span class="line">        .margin(&#123; top: 300, right: 130 &#125;)</span><br><span class="line">        .scale(&#123; x: this.myScale, y: this.myScale &#125;)// .clickEffect(&#123;level:ClickEffectLevel.LIGHT,scale:0.5&#125;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          if (!this.uiContext) &#123;</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          // Set an animation with a display animation of 0 to interrupt the previous animation</span><br><span class="line">          animateTo(&#123; duration: 0, iterations: 1&#125;, () =&gt; &#123;</span><br><span class="line">            console.info(&#x27;this.dur0xxx---&#x27;, this.myScale)</span><br><span class="line">            this.myScale = 1;</span><br><span class="line">          &#125;)</span><br><span class="line">          animateTo(&#123; duration: 1500, iterations: 1 ,onFinish: () =&gt; &#123;</span><br><span class="line">            animateTo(&#123; duration: 1500, iterations: 1&#125;, () =&gt;&#123;</span><br><span class="line">              console.info(&#x27;this.dur2---&#x27;, this.myScale)</span><br><span class="line">              this.myScale = 1;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;&#125;, () =&gt; &#123;</span><br><span class="line">            console.info(&#x27;this.dur1---&#x27;, this.myScale)</span><br><span class="line">            this.myScale = 0.8;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.backgroundColor(Color.Black)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-How-to-configure-to-use-one-signature-file-in-debug-mode-and-another-in-release-mode-in-build-profile"><a href="#4-How-to-configure-to-use-one-signature-file-in-debug-mode-and-another-in-release-mode-in-build-profile" class="headerlink" title="4. How to configure to use one signature file in debug mode and another in release mode in build-profile?"></a>4. How to configure to use one signature file in debug mode and another in release mode in build-profile?</h4><p>In the project-level build-profile.json5 file, add customized products and use different signature certificates respectively.</p>
<ol>
<li>Configure the signature file</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;signingConfigs&quot;: [ &#123; &quot;name&quot;: &quot;default&quot;, &quot;type&quot;: &quot;HarmonyOS&quot;, &quot;material&quot;: &#123; &quot;certpath&quot;: &quot;&quot;, &quot;storePassword&quot;: &quot;&quot;, &quot;keyAlias&quot;: &quot;&quot;, &quot;keyPassword&quot;: &quot;&quot;, &quot;profile&quot;: &quot;b&quot;, &quot;signAlg&quot;: &quot;&quot;, &quot;storeFile&quot;: &quot;&quot; &#125; &#125;, &#123; &quot;name&quot;: &quot;useForRelease&quot;, &quot;type&quot;: &quot;HarmonyOS&quot;, &quot;material&quot;: &#123; &quot;certpath&quot;: &quot;&quot;, &quot;storePassword&quot;: &quot;&quot;, &quot;keyAlias&quot;: &quot;&quot;, &quot;keyPassword&quot;: &quot;&quot;, &quot;profile&quot;: &quot;b&quot;, &quot;signAlg&quot;: &quot;&quot;, &quot;storeFile&quot;: &quot;&quot; &#125; &#125;, &#123; &quot;name&quot;: &quot;useForDebug&quot;, &quot;type&quot;: &quot;HarmonyOS&quot;, &quot;material&quot;: &#123; &quot;certpath&quot;: &quot;&quot;, &quot;storePassword&quot;: &quot;&quot;, &quot;keyAlias&quot;: &quot;&quot;, &quot;keyPassword&quot;: &quot;&quot;, &quot;profile&quot;: &quot;b&quot;, &quot;signAlg&quot;: &quot;&quot;, &quot;storeFile&quot;: &quot;&quot; &#125; ] </span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Configure</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;products&quot;: [ &#123; &quot;name&quot;: &quot;default&quot;, &quot;signingConfig&quot;: &quot;default&quot;, &quot;compatibleSdkVersion&quot;: &quot;5.0.0(12)&quot;, &quot;runtimeOS&quot;: &quot;HarmonyOS&quot;, &#125;, &#123; &quot;name&quot;: &quot;useForDebug&quot;, &quot;signingConfig&quot;: &quot;useForDebug&quot;, &quot;compatibleSdkVersion&quot;: &quot;5.0.0(12)&quot;, &quot;runtimeOS&quot;: &quot;HarmonyOS&quot;, &#125;, &#123; &quot;name&quot;: &quot;useForRelease&quot;, &quot;signingConfig&quot;: &quot;useForRelease&quot;, &quot;compatibleSdkVersion&quot;: &quot;5.0.0(12)&quot;, &quot;runtimeOS&quot;: &quot;HarmonyOS&quot;, &#125; ],</span><br></pre></td></tr></table></figure>
<p>Click the Product button in the upper right corner. Select useForDebug in Product to choose the hap using the debug certificate, and select useForRelease-&gt;apply. The built APP will use the release certificate. Do not delete the default configuration item.</p>
<ol start="3">
<li>In the module, add the two parameters useForDebug and useForRelease to the applytoProducts attribute “modules”:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ &#123; &quot;name&quot;: &quot;entry&quot;, &quot;srcPath&quot;: &quot;./entry&quot;, &quot;targets&quot;: [ &#123; &quot;name&quot;: &quot;default&quot;, &quot;applyToProducts&quot;: [ &quot;default&quot;, &quot;default_debug&quot;, &quot;default_realse&quot; ] &#125; ] &#125; ] </span><br></pre></td></tr></table></figure>

<h4 id="5-What-is-the-difference-between-configuring-dependent-third-party-applications-in-the-global-configuration-oh-package-and-configuring-them-in-the-module’s-oh-package-and-will-it-affect-the-package-size"><a href="#5-What-is-the-difference-between-configuring-dependent-third-party-applications-in-the-global-configuration-oh-package-and-configuring-them-in-the-module’s-oh-package-and-will-it-affect-the-package-size" class="headerlink" title="5. What is the difference between configuring dependent third-party applications in the global configuration oh-package and configuring them in the module’s oh-package, and will it affect the package size?"></a>5. What is the difference between configuring dependent third-party applications in the global configuration oh-package and configuring them in the module’s oh-package, and will it affect the package size?</h4><p>Does configuring third-party library dependencies globally or in the module affect the package size?</p>
<p>Configuring dependent third-party applications in the global oh-package can be used throughout the entire project, while configuring them in the module’s oh-package can only be used in that module. Therefore, global configuration will affect the package size of the entire project, while module configuration will only affect the package size of that module.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41128-Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41128-Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] userAgent Identification, StatusBar Color, Operating the Same Object in taskpool, Scroll Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:33:11 / Modified: 09:34:23" itemprop="dateCreated datePublished" datetime="2025-06-29T09:33:11+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component"><a href="#Daily-HarmonyOS-Next-Knowledge-userAgent-Identification-StatusBar-Color-Operating-the-Same-Object-in-taskpool-Scroll-Component" class="headerlink" title="[Daily HarmonyOS Next Knowledge] userAgent Identification, StatusBar Color, Operating the Same Object in taskpool, Scroll Component"></a>[Daily HarmonyOS Next Knowledge] userAgent Identification, StatusBar Color, Operating the Same Object in taskpool, Scroll Component</h1><h4 id="1-What-values-can-be-obtained-by-HarmonyOS-window-navigator-userAgent-toLowerCase"><a href="#1-What-values-can-be-obtained-by-HarmonyOS-window-navigator-userAgent-toLowerCase" class="headerlink" title="1. What values can be obtained by HarmonyOS window.navigator.userAgent.toLowerCase()?"></a>1. What values can be obtained by HarmonyOS window.navigator.userAgent.toLowerCase()?</h4><p>H5 cannot identify through window.navigator.userAgent for the time being, and can only be identified by injecting fixed fields natively. You can refer to this document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/forum/topic/0201145720536373106?fid=0101587866109860105">https://developer.huawei.com/consumer/cn/forum/topic/0201145720536373106?fid=0101587866109860105</a>  </p>
<h4 id="2-How-to-dynamically-set-the-font-color-in-the-StatusBar-in-HarmonyOS"><a href="#2-How-to-dynamically-set-the-font-color-in-the-StatusBar-in-HarmonyOS" class="headerlink" title="2. How to dynamically set the font color in the StatusBar in HarmonyOS?"></a>2. How to dynamically set the font color in the StatusBar in HarmonyOS?</h4><p>The APP has set an immersive layout, but the status bar font color at the top does not change when switching the theme color. How to handle this? The following code shows our setting method:  </p>
<pre><code class="language-typescript">private checkDarkMode(darkModeConfig: DarkModeSettingsConfig): void &#123;
  AppStorage.setOrCreate&lt;DarkModeSettingsConfig&gt;(&#39;darkModeConfig&#39;, darkModeConfig);
  let applicationContext = getContext(this).getApplicationContext();
  let colorMode: ConfigurationConstant.ColorMode = ConfigurationConstant.ColorMode.COLOR_MODE_NOT_SET;
  if (darkModeConfig.switchType === DarkModeType.FOLLOW_UP) &#123;
    colorMode = (getContext(this) as common.UIAbilityContext).config.colorMode ||
    ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT;
  &#125; else if (darkModeConfig.switchType === DarkModeType.DARK) &#123;
    colorMode = ConfigurationConstant.ColorMode.COLOR_MODE_DARK;
  &#125; else &#123;
    colorMode = ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT;
  &#125;
  AppStorage.setOrCreate(&#39;currentColorMode&#39;, colorMode);
  applicationContext.setColorMode(colorMode);
  try &#123;
    AppUtil.getMainWindow()?.setWindowSystemBarProperties(&#123;
      statusBarContentColor: colorMode === ConfigurationConstant.ColorMode.COLOR_MODE_DARK ?  &#39;0xffffffff&#39; : &#39;0x00000000&#39;,
    &#125;, (err: BusinessError) =&gt; &#123;
      const errCode: number = err.code;
      if (errCode) &#123;
        console.error(&#39;Failed to set the system bar properties. Cause: &#39; + JSON.stringify(err));
        return;
      &#125;
      console.info(&#39;Succeeded in setting the system bar properties.&#39;);
    &#125;);
  &#125; catch (exception) &#123;
    console.error(&#39;Failed to set the system bar properties. Cause: &#39; + JSON.stringify(exception));
  &#125;
&#125;
</code></pre>
<p>Currently, setting the status bar color uses the window’s API, which adjusts the dimension from the entire window. To achieve page-level control, you need to adjust it in the page’s lifecycle and directly call the setWindowSystemBarProperties method on the page that needs to change. You can refer to the official document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9</a>  </p>
<p>Sample code is as follows:  </p>
<pre><code class="language-typescript">onPageShow(): void &#123;
  window.getLastWindow(getContext(), (err, data) =&gt; &#123;
    let win: window.Window;
    if (err.code) &#123;
      console.error(&quot;error code :&quot; + JSON.stringify(err.code))
      return;
    &#125;
    try &#123;
      win = data;
      // Set the window to full-screen mode
      win.setWindowLayoutFullScreen(true);
      // Set the status bar
      win.setWindowSystemBarProperties(&#123;
        // Set the status bar color to another color
        statusBarColor: &#39;#00ff00&#39;,
        // Set the status bar text color to white
        statusBarContentColor: &#39;#353535&#39;
      &#125;)
      console.info(&#39;Immersive window with status bar set up&#39;)
    &#125; catch (expextion) &#123;
      console.error(&quot;error cause :&quot; + JSON.stringify(expextion))
    &#125;
  &#125;)
&#125;
// The demo is implemented using API10, and the complete demo is as follows:
import window1 from &#39;@ohos.window&#39;;
import &#123; BusinessError &#125; from &#39;@ohos.base&#39;;
import Stack from &#39;@ohos.util.Stack&#39;;


class StatusBarColor &#123;
  statusBarColor: string;
  statusBarContentColor: string

  constructor(statusBarColor: string, statusBarContentColor: string) &#123;
    // Status bar background
    this.statusBarColor = statusBarColor;
    // Status bar content
    this.statusBarContentColor = statusBarContentColor;
  &#125;
&#125;

export class StatusBarUtils &#123;
  static testNumber: number = 0;
  private static barColor: Stack&lt;StatusBarColor&gt; = new Stack();

  private static setBarColor(statusBarColor: StatusBarColor) &#123;
    let mainWindow: window1.Window | undefined = AppStorage.get(&quot;mainWindow&quot;)
    let sysBarProps: window1.SystemBarProperties = &#123;
      statusBarColor: statusBarColor.statusBarColor,
      statusBarContentColor: statusBarColor.statusBarContentColor,
    &#125;;
    mainWindow?.setWindowSystemBarProperties(sysBarProps, (err: BusinessError) =&gt; &#123;
      let errCode: number = err.code;
      if (errCode) &#123;
        console.error(&#39;[StaticUtils] Failed to set the system bar properties. Cause: &#39; + JSON.stringify(err));
        return;
      &#125;
      console.info(&#39;[StaticUtils] Succeeded in setting the system bar properties.&#39;);
    &#125;);
  &#125;

  static pushStatusColor(statusBarColor: string, statusBarContentColor: string) &#123;
    StatusBarUtils.barColor.push(new StatusBarColor(statusBarColor, statusBarContentColor))
    StatusBarUtils.setBarColor(StatusBarUtils.barColor.peek());
  &#125;

  static popStatusColor() &#123;
    if (!StatusBarUtils.barColor.isEmpty()) &#123;
      StatusBarUtils.barColor.pop();
      if (!StatusBarUtils.barColor.isEmpty()) &#123;
        StatusBarUtils.setBarColor(StatusBarUtils.barColor.peek());
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="3-How-to-operate-the-same-object-in-multiple-taskpools-in-HarmonyOS"><a href="#3-How-to-operate-the-same-object-in-multiple-taskpools-in-HarmonyOS" class="headerlink" title="3. How to operate the same object in multiple taskpools in HarmonyOS?"></a>3. How to operate the same object in multiple taskpools in HarmonyOS?</h4><p>The goal here is to jointly operate a cache class in multiple taskpool threads and populate values into the cache class. Since taskpool is thread-isolated, the @sendable annotation is used. After using the @sendable annotation, it is found that certain types of fields cannot be serialized. What is the solution? Or if @sendable is not used, are there other ways to operate the same cache object in multiple threads?  </p>
<p>Only SharedArrayBuffer sharing and @sendable are available, with no other methods.  </p>
<h4 id="4-Issues-with-HarmonyOS-scroll-components"><a href="#4-Issues-with-HarmonyOS-scroll-components" class="headerlink" title="4. Issues with HarmonyOS scroll components?"></a>4. Issues with HarmonyOS scroll components?</h4><ol>
<li><p>How to use the ontouch callback to handle the calculation of the y-axis offset distance for multiple fingers  </p>
</li>
<li><p>Why can’t a scroll nested in relative scroll? The relative contains 2 Row components, the first component is above the second component, and the second component has a height of 100%  </p>
</li>
<li><p>How to use the ontouch callback to handle the calculation of the y-axis offset for multiple fingers: The onActionUpdate method of the PanGesture event can be used to obtain the gesture offset and set the number of fingers triggering the swipe gesture. Reference link: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture-0000001815767760#ZH-CN_TOPIC_0000001815767760__%E4%BA%8B%E4%BB%B6">https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture-0000001815767760#ZH-CN_TOPIC_0000001815767760__%E4%BA%8B%E4%BB%B6</a><br>If the ontouch callback must be used for processing, record the y-axis coordinate when the finger presses and when the finger lifts, then subtract the two to obtain the y-axis offset. For multiple fingers, the position of each finger will be recorded, which can be obtained through the touches array of the TouchEvent object, where the order of fingers is determined by the order of touching the screen.  </p>
</li>
<li><p>The problem that the RelativeContainer component cannot scroll: Set the second sub-component in the RelativeContainer to use the first sub-component as an anchor and position it below the first sub-component, and set the height attribute of the RelativeContainer to auto. The reason why it does not scroll with two Row components is that the RelativeContainer component itself is rendered starting from the upper-left corner of the screen, and parts exceeding the upper-left corner will be invisible or not rendered, resulting in no scrolling. Therefore, if the RelativeContainer component itself is to be scrollable, the sub-component anchor must be determined as the component at the upper-left corner of the screen.  </p>
</li>
<li><p>No callback when the scrollTo animation ends.</p>
</li>
</ol>
<h4 id="5-When-AppStorage-is-updated-in-HarmonyOS-using-it-in-a-mask-does-not-trigger-re-rendering"><a href="#5-When-AppStorage-is-updated-in-HarmonyOS-using-it-in-a-mask-does-not-trigger-re-rendering" class="headerlink" title="5. When AppStorage is updated in HarmonyOS, using it in a mask does not trigger re-rendering."></a>5. When AppStorage is updated in HarmonyOS, using it in a mask does not trigger re-rendering.</h4><p>When storage is updated, all components that use it will be updated. Therefore, the intention is to encapsulate a mask (overlay), reference the corresponding key, and open&#x2F;close the mask by toggling a switch (updating storage), but in fact, the update is not triggered.  </p>
<p>All parameters of custom pop-ups do not support dynamic refresh. @Link and @Prop have different refresh mechanisms: @Link is equivalent to reference passing, and @State will directly notify @Link after an update. It is recommended to use @Link here.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41129-Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41129-Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Text Filling Parent Control, Native Array Reception, JS Logic Execution Issue, UIAbility Context Problem, Page Navigation Stack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:28:59 / Modified: 09:32:07" itemprop="dateCreated datePublished" datetime="2025-06-29T09:28:59+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack"><a href="#Daily-HarmonyOS-Next-Knowledge-Text-Filling-Parent-Control-Native-Array-Reception-JS-Logic-Execution-Issue-UIAbility-Context-Problem-Page-Navigation-Stack" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Text Filling Parent Control, Native Array Reception, JS Logic Execution Issue, UIAbility Context Problem, Page Navigation Stack"></a>[Daily HarmonyOS Next Knowledge] Text Filling Parent Control, Native Array Reception, JS Logic Execution Issue, UIAbility Context Problem, Page Navigation Stack</h1><h4 id="1-How-to-make-the-Text-component-fill-the-parent-component-in-HarmonyOS"><a href="#1-How-to-make-the-Text-component-fill-the-parent-component-in-HarmonyOS" class="headerlink" title="1. How to make the Text component fill the parent component in HarmonyOS?"></a>1. How to make the Text component fill the parent component in HarmonyOS?</h4><pre><code class="language-typescript">build() &#123;
  Row() &#123;
    Row() &#123;
      Text(this.str)
        .constraintSize(&#123; maxWidth: &#39;100%&#39;, minHeight: &quot;30vp&quot; &#125;)
        .backgroundColor(Color.Gray)
        .fontSize(&#39;24vp&#39;)
    &#125;
    .key(&#39;row1&#39;)
    .constraintSize(&#123; maxWidth: &#39;100%&#39;&#125;)
    .backgroundColor(Color.Green)
  &#125;
  .key(&#39;row2&#39;)
  .backgroundColor(Color.Yellow)
  .width(&#39;90%&#39;)

  Button(&#39;add&#39;)
    .onClick(() =&gt; &#123;
      this.str += &#39;hello&#39;;
    &#125;)
  Button(&#39;reset&#39;)
    .onClick(() =&gt; &#123;
      this.str = &#39;hello&#39;;
    &#125;)
&#125;
</code></pre>
<p><strong>Requirement</strong>: Make row1’s size change with the Text component, auto-wrap when the outermost row2 width is insufficient, and fully fill the row2 container. Currently, there is an unfilled area outside row1 (yellow area on the right in the image). How to modify it to make row1&#x2F;Text fully fill row2?  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.29.png"><br><strong>Solution</strong>: Remove the <code>width</code> attribute from row2. Use <code>margin</code> for layout adjustment if needed.  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.29-1.png"></p>
<h4 id="2-In-HarmonyOS-NAPI-how-to-receive-a-Uint8Array-passed-from-the-ArkTS-side-in-Native"><a href="#2-In-HarmonyOS-NAPI-how-to-receive-a-Uint8Array-passed-from-the-ArkTS-side-in-Native" class="headerlink" title="2. In HarmonyOS NAPI, how to receive a Uint8Array passed from the ArkTS side in Native?"></a>2. In HarmonyOS NAPI, how to receive a Uint8Array passed from the ArkTS side in Native?</h4><p>Refer to the following code:  </p>
<pre><code class="language-c">napi_typedarray_type arr_type;
napi_value arr_buffer;
size_t arr_offset;
size_t arr_i, arr_length;
// Get the length and type of the passed array
napi_status status = napi_get_typedarray_info(env, arr, &amp;arr_type, &amp;arr_length, NULL, &amp;arr_buffer, &amp;arr_offset);
LOGI(&quot;-------arr--%&#123;public&#125;d-------&quot;, arr_length);
void *data;
size_t byte_len;
napi_create_array_with_length(env, arr_length, &amp;arr_buffer);
napi_get_arraybuffer_info(env, arr_buffer, &amp;data, &amp;byte_len);
napi_value output_buffer;
void *output_ptr = NULL;
napi_create_arraybuffer(env, byte_len, &amp;output_ptr, &amp;output_buffer);
napi_value out_arr;
napi_create_typedarray(env, arr_type, arr_length, output_buffer, arr_offset, &amp;out_arr);
if (arr_type == napi_uint8_array) &#123;
  uint8_t *input_bytes = (uint8_t *)(data) + arr_offset;
  uint8_t *output_bytes = (uint8_t *)(output_ptr);
  for (arr_i = 0; arr_i &lt; arr_length; arr_i++) &#123;
    OH_LOG_INFO(LOG_APP, &quot;Multiply_for_arraybuffer input_bytes %&#123;public&#125;d&quot;, input_bytes[arr_i]);
    output_bytes[arr_i] = (uint8_t)(input_bytes[arr_i] * 1);
    LOGI(&quot;Final result,============%&#123;public&#125;zi&quot;, output_bytes[arr_i]);
  &#125;
&#125;
</code></pre>
<h4 id="3-After-opening-a-new-page-via-window-open-hyperlink-blank-in-a-HarmonyOS-H5-page-the-JS-logic-of-the-original-page-does-not-execute-when-returning"><a href="#3-After-opening-a-new-page-via-window-open-hyperlink-blank-in-a-HarmonyOS-H5-page-the-JS-logic-of-the-original-page-does-not-execute-when-returning" class="headerlink" title="3. After opening a new page via window.open(&quot;hyperlink&quot;, &quot;_blank&quot;) in a HarmonyOS H5 page, the JS logic of the original page does not execute when returning."></a>3. After opening a new page via <code>window.open(&quot;hyperlink&quot;, &quot;_blank&quot;)</code> in a HarmonyOS H5 page, the JS logic of the original page does not execute when returning.</h4><p><strong>Cause</strong>: If the Web component supports multi-windows (i.e., <code>multiWindowAccess</code> is set to <code>true</code>), the <code>event.handler.setWebController</code> interface must be called in <code>onWindowNew</code>; otherwise, the Render process will be blocked. The issue occurs because the app did not call this interface.  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkweb/ts-basic-components-web.md#onwindownew9">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkweb/ts-basic-components-web.md#onwindownew9</a>  </p>
<h4 id="4-In-HarmonyOS-TS-BaseAbility-extends-UIAbility-shows-Cannot-find-name-Context"><a href="#4-In-HarmonyOS-TS-BaseAbility-extends-UIAbility-shows-Cannot-find-name-Context" class="headerlink" title="4. In HarmonyOS TS, BaseAbility extends UIAbility shows Cannot find name &#39;Context&#39;."></a>4. In HarmonyOS TS, <code>BaseAbility extends UIAbility</code> shows <code>Cannot find name &#39;Context&#39;</code>.</h4><pre><code class="language-typescript">export default abstract class BaseAbility extends UIAbility &#123;

  static appContext: common.ApplicationContext;

  onWindowStageCreate(windowStage: window.WindowStage): void &#123;
    BaseAbility.appContext = this.context.getApplicationContext()
    Logger.info(&#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;BaseAbility onWindowStageCreate&#39;);
    super.onWindowStageCreate(windowStage)
  &#125;

  static getContext(): common.ApplicationContext &#123;
    return BaseAbility.appContext;
  &#125;
&#125;
</code></pre>
<h4 id="5-How-to-obtain-the-navigation-stack-for-page-transitions-in-HarmonyOS"><a href="#5-How-to-obtain-the-navigation-stack-for-page-transitions-in-HarmonyOS" class="headerlink" title="5. How to obtain the navigation stack for page transitions in HarmonyOS?"></a>5. How to obtain the navigation stack for page transitions in HarmonyOS?</h4><p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5#navpathstack10">Navigation</a><br><code>NavPathStack</code> is the Navigation route stack, allowing inheritance. Developers can add attributes&#x2F;methods to derived classes or override methods of the base <code>NavPathStack</code>. Derived class objects can replace base <code>NavPathStack</code> objects. Provided methods include:  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.29-2.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41130-Daily-HarmonyOS-Next-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41130-Daily-HarmonyOS-Next-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:27:17 / Modified: 09:36:45" itemprop="dateCreated datePublished" datetime="2025-06-29T09:27:17+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings"><a href="#Daily-HarmonyOS-Knowledge-hvigor-Upgrade-Dialog-Animation-LocalStorage-Inefficiency-Page-and-Subcomponent-Lifecycles-Cookie-Settings" class="headerlink" title="[Daily HarmonyOS Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings"></a>[Daily HarmonyOS Knowledge] hvigor Upgrade, Dialog Animation, LocalStorage Inefficiency, Page and Subcomponent Lifecycles, Cookie Settings</h1><h4 id="1-How-to-upgrade-HarmonyOS-compilation-tool-hvigor-to-version-“hvigorVersion”-“4-2-0”"><a href="#1-How-to-upgrade-HarmonyOS-compilation-tool-hvigor-to-version-“hvigorVersion”-“4-2-0”" class="headerlink" title="1. How to upgrade HarmonyOS compilation tool hvigor to version “hvigorVersion”: “4.2.0”?"></a>1. How to upgrade HarmonyOS compilation tool hvigor to version “hvigorVersion”: “4.2.0”?</h4><p>Manual update to the specified version is supported. Refer to the link below: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-plugin-V5</a>  </p>
<h4 id="2-How-to-modify-the-pop-up-animation-of-a-custom-Dialog-in-HarmonyOS"><a href="#2-How-to-modify-the-pop-up-animation-of-a-custom-Dialog-in-HarmonyOS" class="headerlink" title="2. How to modify the pop-up animation of a custom Dialog in HarmonyOS?"></a>2. How to modify the pop-up animation of a custom Dialog in HarmonyOS?</h4><pre><code class="language-typescript">let anmDuration: number = 300;

// Pop-up interaction
@CustomDialog
struct CustomDialogExample &#123;
  controller: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;&#125;),
    autoCancel: false
  &#125;)
  @State showFlag: Visibility = Visibility.Visible;
  @State isAutoCancel: boolean = false;
  textController: TextAreaController = new TextAreaController()

  build() &#123;
    Column() &#123;
      Row() &#123;
        Text(&quot;Custom animated pop-up&quot;)
      &#125;
      .borderRadius(20)
      .backgroundColor(&#39;#ff6288cb&#39;)
      .height(200)
      .width(&#39;100%&#39;)
    &#125;
    .margin(&#123; top: 10 &#125;)
    .justifyContent(FlexAlign.Center)
    .width(&#39;100%&#39;)
    .height(&quot;100%&quot;)
    .onClick(() =&gt; &#123;
      console.log(&quot;dialogClick&quot;)
      if (this.isAutoCancel) &#123;
        console.log(&quot;dialogClick2&quot;)
        this.cancel();
      &#125;
    &#125;)
    .visibility(this.showFlag)
    // Define entry and exit transition animation effects
    .transition(TransitionEffect.OPACITY.animation(&#123; duration: anmDuration &#125;)
      .combine(TransitionEffect.translate(&#123; y: 500 &#125;)))
  &#125;
  // Delay closing the pop-up to display the custom exit animation
  cancel() &#123;
    this.showFlag = Visibility.Hidden
    console.log(&quot;closeDialog&quot;)
    setTimeout(() =&gt; &#123;
      this.controller.close()
    &#125;, anmDuration)
  &#125;
&#125;

@Entry
@Component
struct CustomDialogUser &#123;
  @State isAutoCancel: boolean = true;
  dialogController: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123; isAutoCancel: this.isAutoCancel &#125;),
    autoCancel: this.isAutoCancel,
    customStyle: true,
  &#125;)

  build() &#123;
    Column() &#123;
      Button(&#39;click me&#39;)
        .onClick(() =&gt; &#123;
          this.dialogController.open()
        &#125;)
    &#125;.width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-Issue-with-LocalStorage-in-HarmonyOS-NavDestination-being-ineffective"><a href="#3-Issue-with-LocalStorage-in-HarmonyOS-NavDestination-being-ineffective" class="headerlink" title="3. Issue with LocalStorage in HarmonyOS NavDestination being ineffective"></a>3. Issue with LocalStorage in HarmonyOS NavDestination being ineffective</h4><p>The project currently uses Navigation for page transitions. The problem is that LocalStorage is ineffective in pages opened via navigation.  </p>
<p>When using localStorage, changes in values decorated by @state will cause page updates:  </p>
<pre><code class="language-typescript">let para: Record&lt;string, number&gt; = &#123; &#39;PropA&#39;: 47 &#125;;
let storage: LocalStorage = new LocalStorage(para);
@Entry(storage)
@Component
export default struct APage &#123;
  @Consume(&#39;navigation&#39;) navigation: NavPathStack;
  @LocalStorageLink(&#39;PropA&#39;) storageLink: number = 0;
  @State testid: number = 0
  number: number = 0

  build() &#123;
    NavDestination() &#123;
      Column() &#123;
        Text(JSON.stringify(this.testid))
          .fontSize(&quot;20vp&quot;)
          .textAlign(TextAlign.Center)
          .width(&#39;100%&#39;)
          .height(&quot;20vp&quot;)
          .onClick(() =&gt; &#123;
            this.navigation.pushPath(&#123;
              name: &quot;BPage&quot;
            &#125;, false);
          &#125;)

        Text(&quot;Click to change testId&quot;)
          .fontSize(&quot;20vp&quot;)
          .textAlign(TextAlign.Center)
          .width(&#39;100%&#39;)
          .height(&quot;20vp&quot;)
          .margin(&#123; top: &#39;20vp&#39; &#125;)
          .onClick(() =&gt; &#123;
            this.number++
            storage.set(&#39;PropA&#39;, this.number)
            this.testid = storage.get(&#39;PropA&#39;) as number
          &#125;)
      &#125;
      .width(&quot;100%&quot;)
      .height(&#39;100%&#39;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-What-is-the-execution-order-of-the-lifecycle-between-the-Entry-page-and-subcomponents-in-HarmonyOS"><a href="#4-What-is-the-execution-order-of-the-lifecycle-between-the-Entry-page-and-subcomponents-in-HarmonyOS" class="headerlink" title="4. What is the execution order of the lifecycle between the Entry page and subcomponents in HarmonyOS?"></a>4. What is the execution order of the lifecycle between the Entry page and subcomponents in HarmonyOS?</h4><p>The Entry lifecycle is aboutToAppear → build → onPageShow. For subcomponents in build, does their aboutToAppear execute after build → component aboutToAppear → onPageShow, or after build → onPageShow → component aboutToAppear?  </p>
<p>Refer to the lifecycle documentation for pages and custom components: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-custom-components-lifecycle-V5</a>  </p>
<p>The cold start initialization process is: MyComponent aboutToAppear → MyComponent build → MyComponent onDidBuild → Child aboutToAppear → Child build → Child onDidBuild → Index onPageShow.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9%E9%B8%BF%E8%92%99%E7%9F%A5%E8%AF%86%E3%80%9124.11.30.png"></p>
<h4 id="5-How-to-retrieve-cookies-set-in-WebCookieManager-on-an-H5-page-in-HarmonyOS"><a href="#5-How-to-retrieve-cookies-set-in-WebCookieManager-on-an-H5-page-in-HarmonyOS" class="headerlink" title="5. How to retrieve cookies set in WebCookieManager on an H5 page in HarmonyOS?"></a>5. How to retrieve cookies set in WebCookieManager on an H5 page in HarmonyOS?</h4><p>Refer to the official documentation for webviewmanager operations: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5?catalogVersion=V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-web-V5?catalogVersion=V5</a><br>Use methods like getCookie to obtain cookie values.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/4121-Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/4121-Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:26:25 / Modified: 09:26:47" itemprop="dateCreated datePublished" datetime="2025-06-29T09:26:25+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists"><a href="#Daily-HarmonyOS-Next-Knowledge-Transferring-gbk2313-to-Native-NAPI-Logging-Issues-Table-Controls-Web-New-Window-Stuck-Decorating-Lists" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists"></a>[Daily HarmonyOS Next Knowledge] Transferring gbk2313 to Native, NAPI Logging Issues, Table Controls, Web New Window Stuck, Decorating Lists</h1><h4 id="1-In-HarmonyOS-NAPI-calls-which-method-should-be-used-to-pass-a-gbk2313-encoded-string-from-ArkTS-to-the-Native-layer"><a href="#1-In-HarmonyOS-NAPI-calls-which-method-should-be-used-to-pass-a-gbk2313-encoded-string-from-ArkTS-to-the-Native-layer" class="headerlink" title="1. In HarmonyOS NAPI calls, which method should be used to pass a gbk2313-encoded string from ArkTS to the Native layer?"></a>1. In HarmonyOS NAPI calls, which method should be used to pass a gbk2313-encoded string from ArkTS to the Native layer?</h4><p>To pass a gbk2313-encoded string from ArkTS to the Native layer, use the <code>napi_get_value_string_utf8</code> method. This method allows obtaining the length of the string passed from the ArkTS side into a char array.  </p>
<h4 id="2-HarmonyOS-NAPI-logs-cannot-be-printed-neither-OH-LOG-INFO-nor-printf-work"><a href="#2-HarmonyOS-NAPI-logs-cannot-be-printed-neither-OH-LOG-INFO-nor-printf-work" class="headerlink" title="2. HarmonyOS NAPI logs cannot be printed, neither OH_LOG_INFO nor printf work."></a>2. HarmonyOS NAPI logs cannot be printed, neither OH_LOG_INFO nor printf work.</h4><p>Refer to the following code:  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Macro definition, which can be replaced as needed</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGI(format, args) OH_LOG_Print(LOG_APP, LOG_INFO, 0, <span class="string">&quot;logI&quot;</span>, format, args);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Call the macro, add `public` before print parameters; use `d` for numbers and `s` for strings</span></span><br><span class="line">LOGI(<span class="string">&quot;Calling macro======%&#123;public&#125;d==================&quot;</span>, <span class="number">123</span>);</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">3.</span> Does HarmonyOS have a table control?  </span><br><span class="line">Currently, there is no built-in table component. As a workaround, use a Web component to introduce a local HTML file with a table. Demo:  </span><br><span class="line">```typescript</span><br><span class="line">import web_webview from <span class="string">&#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TableHtml</span> &#123;</span></span><br><span class="line">  controller: web_webview.WebviewController = new web_webview.WebviewController();</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Button(<span class="string">&quot;Click to load HTML rich text&quot;</span>).onClick(() =&gt; &#123;</span><br><span class="line">        this.controller.loadData(`&lt;html&gt; &lt;head&gt; &lt;style&gt; .table-font-size&#123; font-size:<span class="number">20</span>px; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body bgcolor=\<span class="string">&quot;white\&quot;&gt; &lt;table width=&quot;</span><span class="number">1000</span><span class="string">&quot; border=&quot;</span><span class="number">5</span><span class="string">&quot; height=&quot;</span><span class="number">1000</span><span class="string">&quot;&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;tr class=&quot;</span>table-font-size<span class="string">&quot;&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Month&lt;/th&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;/html&gt;`, &quot;</span>text/html<span class="string">&quot;, &quot;</span>UTF<span class="number">-8</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string">      &#125;) </span></span><br><span class="line"><span class="string">      Web(&#123; src: &#x27;www&#x27;, controller: this.controller &#125;).javaScriptAccess(true).domStorageAccess(true).fileAccess(true)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. HarmonyOS Web freezes when triggering a new window.  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">import webview from &#x27;@ohos.web.webview&#x27;</span></span><br><span class="line"><span class="string">import router from &#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct WebDemo &#123;</span></span><br><span class="line"><span class="string">  controller = new webview.WebviewController</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  getUrl(): string &#123;</span></span><br><span class="line"><span class="string">    const params = router.getParams() as Record&lt;string, string&gt;</span></span><br><span class="line"><span class="string">    return params?.url ?? &#x27;https://www.huawei.com/appview/question/56402307?appview=1&#x27;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Column() &#123;</span></span><br><span class="line"><span class="string">      Web(&#123;</span></span><br><span class="line"><span class="string">        src: this.getUrl(),</span></span><br><span class="line"><span class="string">        controller: this.controller,</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">        .height(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .multiWindowAccess(true)</span></span><br><span class="line"><span class="string">        .onWindowNew((e) =&gt; &#123;</span></span><br><span class="line"><span class="string">          console.log(&#x27;onWindowNew&#x27;, e.targetUrl)</span></span><br><span class="line"><span class="string">          router.pushUrl(&#123;</span></span><br><span class="line"><span class="string">            url: &#x27;pages/WebDemo&#x27;,</span></span><br><span class="line"><span class="string">            params: &#123;</span></span><br><span class="line"><span class="string">              url: e.targetUrl,</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          // Key code: Return the new window&#x27;s WebviewController to the Web kernel.</span></span><br><span class="line"><span class="string">          // Set to null via event.handler.setWebController if the new window is not needed.</span></span><br><span class="line"><span class="string">          // Failing to call this interface will block the render process.</span></span><br><span class="line"><span class="string">          e.handler.setWebController(null)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Application of @State or @Link to decorate Arrays in HarmonyOS.  </span></span><br><span class="line"><span class="string">Given a data Bean type:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">export class TagBean &#123;</span></span><br><span class="line"><span class="string">  title: string = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  id: string = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  is_choose: boolean = false</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string">When decorating an Array of this Bean with @State or @Link (e.g., `@Link tagBeans: TagBean[]`), updating `tagBeans[index].is_choose=true` in a click event does not refresh the UI in real time when using `BackgroundColor($r(item.is_choose ? &quot;</span>Color A<span class="string">&quot; : &quot;</span>Color B<span class="string">&quot;))` in `ForEach(this.tagBeans)`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">However, using a separate string object to record clicked IDs (e.g., `this.chooseIds.indexOf(item.id) &gt;= 0`) enables real-time UI updates.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For bidirectional data synchronization in scenarios involving nested objects or arrays, use the `@ObjectLink` and `@Observed` decorators: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-observed-and-objectlink-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Demo reference:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">import util from &#x27;@ohos.util&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Observed</span></span><br><span class="line"><span class="string">class TagBean &#123;</span></span><br><span class="line"><span class="string">  key: string = util.generateRandomUUID(true);</span></span><br><span class="line"><span class="string">  name: string;</span></span><br><span class="line"><span class="string">  is_Choose: boolean;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  constructor(name: string, is_choose: boolean) &#123;</span></span><br><span class="line"><span class="string">    this.name = name;</span></span><br><span class="line"><span class="string">    this.is_Choose = is_choose;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct ViewListItem &#123;</span></span><br><span class="line"><span class="string">  @ObjectLink tagBean: TagBean;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    ListItem() &#123;</span></span><br><span class="line"><span class="string">      Text(this.tagBean.name)</span></span><br><span class="line"><span class="string">        .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">        .height(100)</span></span><br><span class="line"><span class="string">        .fontSize(16)</span></span><br><span class="line"><span class="string">        .textAlign(TextAlign.Center)</span></span><br><span class="line"><span class="string">        .borderRadius(10)</span></span><br><span class="line"><span class="string">        .backgroundColor(this.tagBean.is_Choose ? Color.White : Color.Red)</span></span><br><span class="line"><span class="string">    &#125;.onClick(() =&gt; &#123;</span></span><br><span class="line"><span class="string">      this.tagBean.is_Choose = !this.tagBean.is_Choose</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct ObservedDemo &#123;</span></span><br><span class="line"><span class="string">  @State tagBeans: Array&lt;TagBean&gt; = [</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 1&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 2&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 3&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 4&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 5&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 6&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 7&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 8&#x27;, false),</span></span><br><span class="line"><span class="string">    new TagBean(&#x27;Xiaohong 9&#x27;, false),</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Column() &#123;</span></span><br><span class="line"><span class="string">      List(&#123; space: 20, initialIndex: 0 &#125;) &#123;</span></span><br><span class="line"><span class="string">        ForEach(this.tagBeans, (item: TagBean) =&gt; &#123;</span></span><br><span class="line"><span class="string">          ViewListItem(&#123; tagBean: item &#125;)</span></span><br><span class="line"><span class="string">        &#125;, (item: TagBean) =&gt; item.key)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .listDirection(Axis.Vertical)</span></span><br><span class="line"><span class="string">      .friction(0.6)</span></span><br><span class="line"><span class="string">      .divider(&#123;</span></span><br><span class="line"><span class="string">        strokeWidth: 2,</span></span><br><span class="line"><span class="string">        color: 0xFFFFFF,</span></span><br><span class="line"><span class="string">        startMargin: 20,</span></span><br><span class="line"><span class="string">        endMargin: 20</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">      .edgeEffect(EdgeEffect.Spring)</span></span><br><span class="line"><span class="string">      .width(&#x27;90%&#x27;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .backgroundColor(Color.Black)</span></span><br><span class="line"><span class="string">    .width(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">    .height(&#x27;100%&#x27;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/29/41231-Daily-HarmonyOS-Next-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/29/41231-Daily-HarmonyOS-Next-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground/Background Switching, Long Press Events</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-29 09:25:01 / Modified: 09:25:15" itemprop="dateCreated datePublished" datetime="2025-06-29T09:25:01+08:00">2025-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Daily-HarmonyOS-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events"><a href="#Daily-HarmonyOS-Knowledge-Arrow-Functions-Watch-State-Variables-H5-Location-Data-Acquisition-Foreground-Background-Switching-Long-Press-Events" class="headerlink" title="[Daily HarmonyOS Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground&#x2F;Background Switching, Long Press Events"></a>[Daily HarmonyOS Knowledge] Arrow Functions, Watch State Variables, H5 Location Data Acquisition, Foreground&#x2F;Background Switching, Long Press Events</h1><h4 id="1-What-is-the-format-of-confirm-void-in-HarmonyOS"><a href="#1-What-is-the-format-of-confirm-void-in-HarmonyOS" class="headerlink" title="1. What is the format of confirm: () =&gt; void = () =&gt; { } in HarmonyOS?"></a>1. What is the format of <code>confirm: () =&gt; void = () =&gt; &#123; &#125;</code> in HarmonyOS?</h4><p><code>confirm: () =&gt; void = () =&gt; &#123; &#125;</code> is an arrow function. Its type is <code>() =&gt; void</code>, indicating that the function takes no parameters and has no return value. The function body is empty, so it executes no operations and simply returns when called.  </p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/introduction-to-arkts-V5#arrow-function-lambda-function">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/introduction-to-arkts-V5#arrow-function-lambda-function</a>  </p>
<p><strong>Arrow functions (Lambda functions)</strong>: Functions can be defined as arrow functions. For example:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = (<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">- The return type of an arrow function can be omitted, and it is inferred from the function body.  </span></span><br><span class="line"><span class="string">- Expressions can be specified as arrow functions for brevity. The following two expressions are equivalent:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum1</span> = (<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) =&gt; &#123; <span class="keyword">return</span> x + y; &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum2</span> = (<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) =&gt; x + y</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. In HarmonyOS, when changing a class in an array, the List does not trigger an update.  </span></span><br><span class="line"><span class="string">Refer to the following demo using a combination of `</span><span class="meta">@Watch</span><span class="string">` and `</span><span class="meta">@Link</span><span class="string">`: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-watch-V5  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PurchaseItem</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title class_">NextId</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">price</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">price</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = <span class="title class_">PurchaseItem</span>.<span class="property">NextId</span>++;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BasketViewer</span> &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="meta">@Watch</span>(<span class="string">&#x27;onBasketUpdated&#x27;</span>) <span class="attr">shopBasket</span>: <span class="title class_">PurchaseItem</span>[];</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">totalPurchase</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateTotal</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="variable language_">this</span>.<span class="property">shopBasket</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, i</span>) =&gt;</span> sum + i.<span class="property">price</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 10% discount for totals ≥ 100 euros</span></span><br><span class="line">    <span class="keyword">if</span> (total &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">      total = <span class="number">0.9</span> * total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// @Watch callback</span></span><br><span class="line">  <span class="title function_">onBasketUpdated</span>(<span class="attr">propName</span>: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">totalPurchase</span> = <span class="variable language_">this</span>.<span class="title function_">updateTotal</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">shopBasket</span>,</span><br><span class="line">        <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">PurchaseItem</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Price: <span class="subst">$&#123;item.price.toFixed(<span class="number">2</span>)&#125;</span> €`</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">PurchaseItem</span></span>) =&gt;</span> item.<span class="property">id</span>.<span class="title function_">toString</span>()</span><br><span class="line">      )</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`Total: <span class="subst">$&#123;<span class="variable language_">this</span>.totalPurchase.toFixed(<span class="number">2</span>)&#125;</span> €`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BasketModifier</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">shopBasket</span>: <span class="title class_">PurchaseItem</span>[] = [];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Add to basket&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">shopBasket</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">PurchaseItem</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">100</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>())))</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">BasketViewer</span>(&#123; <span class="attr">shopBasket</span>: $shopBasket &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">**@Watch** is used to monitor state variables. If developers need to track changes in a state variable, they can use `</span><span class="meta">@Watch</span><span class="string">` to set a callback function for the state variable. `</span><span class="meta">@Watch</span><span class="string">` provides state variable monitoring but only detects observable changes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. The location data obtained via `</span>getCurrentPosition<span class="string">` in HarmonyOS H5 is an empty object.  </span></span><br><span class="line"><span class="string">Configure the `</span>ohos.<span class="property">permission</span>.<span class="property">LOCATION</span><span class="string">` and `</span>ohos.<span class="property">permission</span>.<span class="property">APPROXIMATELY_LOCATION</span><span class="string">` permissions in the `</span><span class="variable language_">module</span>.<span class="property">json5</span><span class="string">` file:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json5</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.LOCATION&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;$string:reason&quot;</span>,</span><br><span class="line">  <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;FormAbility&quot;</span>],</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;inuse&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.APPROXIMATELY_LOCATION&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;$string:reason&quot;</span>,</span><br><span class="line">  <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;FormAbility&quot;</span>],</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;inuse&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. In HarmonyOS, how to distinguish between route switching and foreground/background switching in `</span>onPageShow<span class="string">`/`</span>onPageHide<span class="string">`?  </span></span><br><span class="line"><span class="string">To perform specific operations when returning from the background to the foreground or from a secondary page, use `</span><span class="title class_">Navigation</span><span class="string">` to control routing:  </span></span><br><span class="line"><span class="string">- `</span><span class="title class_">Navigation</span><span class="string">` has its own lifecycle. Use `</span>onAppear<span class="string">` to handle returns from secondary routes and `</span>onPageShow<span class="string">` for foreground returns.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. Does HarmonyOS support long-press events for components?  </span></span><br><span class="line"><span class="string">Long-press events are not supported, but long-press gestures are. Implement similar functionality using long-press gestures:  </span></span><br><span class="line"><span class="string">**Reference**: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-gesture-events-single-gesture-V5#long-press-gesture  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A long-press gesture (`</span><span class="title class_">LongPressGesture</span><span class="string">`) has three optional parameters:  </span></span><br><span class="line"><span class="string">- `</span>fingers<span class="string">`: Minimum number of fingers required (1–10, default: 1).  </span></span><br><span class="line"><span class="string">- `</span>repeat<span class="string">`: Whether to trigger the callback continuously (default: `</span><span class="literal">false</span><span class="string">`).  </span></span><br><span class="line"><span class="string">- `</span>duration<span class="string">`: Minimum duration (ms) to trigger the gesture (default: 500ms).  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Example of binding a repeatable long-press gesture to a Text component**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;LongPress OnAction:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">count</span>).<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">gesture</span>(</span><br><span class="line">          <span class="title class_">LongPressGesture</span>(&#123; <span class="attr">repeat</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">            .<span class="title function_">onAction</span>(<span class="function">(<span class="params"><span class="attr">event</span>: <span class="title class_">GestureEvent</span>|<span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event &amp;&amp; event.<span class="property">repeat</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">onActionEnd</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">count</span> = <span class="number">0</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">250</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">    .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">3</span> &#125;)</span><br><span class="line">    .<span class="title function_">margin</span>(<span class="number">30</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">317</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
