<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/page/9/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/327-Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/327-Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Status Bar Background Color, Global Page Grayscale, Close Pop-up on Blank Click, UI Component as Parameter, Disable Default Startup Effect</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:34:57 / Modified: 22:35:12" itemprop="dateCreated datePublished" datetime="2025-06-26T22:34:57+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect"><a href="#Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Status Bar Background Color, Global Page Grayscale, Close Pop-up on Blank Click, UI Component as Parameter, Disable Default Startup Effect"></a>[Daily HarmonyOS Next Knowledge] Status Bar Background Color, Global Page Grayscale, Close Pop-up on Blank Click, UI Component as Parameter, Disable Default Startup Effect</h3><h4 id="1-How-to-get-the-background-color-and-font-color-of-the-status-bar-in-HarmonyOS"><a href="#1-How-to-get-the-background-color-and-font-color-of-the-status-bar-in-HarmonyOS" class="headerlink" title="1. How to get the background color and font color of the status bar in HarmonyOS?"></a>1. How to get the background color and font color of the status bar in HarmonyOS?</h4><p>How to get the background color and font color of the status bar?  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9</a><br><code>setWindowSystemBarProperties(systemBarProperties: SystemBarProperties): Promise&lt;void&gt;</code><br>Sets the properties of the main window’s three-key navigation bar and status bar using a Promise asynchronous callback.  </p>
<p>This interface does not take effect on 2in1 devices. On other devices, it will not take effect immediately in split-screen mode (window.WindowStatusType.SPLIT_SCREEN), floating window mode (window.WindowStatusType.FLOATING), or free multi-window mode (enabled by clicking the free multi-window button in the device control center), and will only take effect when entering the full-screen main window.  </p>
<p><code>setWindowLayoutFullScreen</code> sets the full-screen navigation bar color to change with the page color.  </p>
<pre><code class="language-typescript">import &#123; router, window &#125; from &#39;@kit.ArkUI&#39;;
import &#123; common &#125; from &#39;@kit.AbilityKit&#39;;

@Entry
@Component
struct SystemBarPropertiesTest &#123;
  @State message: string = &#39;Hello World&#39;;
  @State barHeight: number = 0;
  private context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;

  async setSystemBar() &#123;
    // Get the current application window
    let windowClass: window.Window = await window.getLastWindow(this.context)
    // Get the status bar height
    this.barHeight = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM).topRect.height
    // Precondition: Set the window to full-screen
    windowClass.setWindowLayoutFullScreen(true);
    // Immersive solution 1: Set the system bar to not display [], set [&#39;status&#39;, &#39;navigation&#39;] to display
    // windowClass.setWindowSystemBarEnable([]);
    // Immersive solution 2: Set the background color of the status bar and navigation bar to the same as the application window
    /*await windowClass.setWindowSystemBarProperties(&#123;
    // The color attribute is ARGB, set the opacity to 0% to make it transparent
    // Navigation bar color
    navigationBarColor: &quot;#fd121de5&quot;,
    // Status bar color
    statusBarColor: &quot;#ff0ad9c2&quot;,
    // Navigation bar text color
    navigationBarContentColor: &quot;#fde20606&quot;,
    // Status bar text color
    statusBarContentColor: &quot;#fff1e50a&quot;
    &#125;)*/

  &#125;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .onClick(()=&gt;&#123;
            this.setSystemBar()
          &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
    .backgroundColor(Color.Brown)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-implement-global-page-grayscale-in-HarmonyOS"><a href="#2-How-to-implement-global-page-grayscale-in-HarmonyOS" class="headerlink" title="2. How to implement global page grayscale in HarmonyOS?"></a>2. How to implement global page grayscale in HarmonyOS?</h4><p>Grayscale can be achieved by setting the following universal attributes for the page root component: <code>.saturate(0)</code> and <code>.grayscale(1)</code>.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5</a>  </p>
<h4 id="3-For-HarmonyOS-custom-pop-up-components-how-to-make-the-pop-up-disappear-when-clicking-on-a-blank-area"><a href="#3-For-HarmonyOS-custom-pop-up-components-how-to-make-the-pop-up-disappear-when-clicking-on-a-blank-area" class="headerlink" title="3. For HarmonyOS custom pop-up components, how to make the pop-up disappear when clicking on a blank area?"></a>3. For HarmonyOS custom pop-up components, how to make the pop-up disappear when clicking on a blank area?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__basedialogoptions11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__basedialogoptions11</a>  </p>
<h4 id="4-In-HarmonyOS-this-weightDao-is-null-when-using-a-UI-component-as-a-parameter-Temporarily-solved-by-using-new-WeightHIstoryDao-How-to-modify-it-so-that-this-weightDao-is-available-in-onRightClick"><a href="#4-In-HarmonyOS-this-weightDao-is-null-when-using-a-UI-component-as-a-parameter-Temporarily-solved-by-using-new-WeightHIstoryDao-How-to-modify-it-so-that-this-weightDao-is-available-in-onRightClick" class="headerlink" title="4. In HarmonyOS, this.weightDao is null when using a UI component as a parameter. (Temporarily solved by using new WeightHIstoryDao. How to modify it so that this.weightDao is available in onRightClick?)"></a>4. In HarmonyOS, this.weightDao is null when using a UI component as a parameter. (Temporarily solved by using new WeightHIstoryDao. How to modify it so that this.weightDao is available in onRightClick?)</h4><p>Refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5</a>, which includes detailed examples of this pointing.  </p>
<p>When developers create a custom component and want to add specific functions to it, such as adding a click-to-navigate operation in a specified custom component, embedding an event method directly within the component will add the function to all instances of the custom component. To solve this, ArkUI introduces the @BuilderParam decorator, which decorates variables pointing to @Builder methods ( @BuilderParam is used to承接 @Builder functions). Developers can pass parameters to the @BuilderParam-decorated custom build function in different ways (e.g., parameter modification, trailing closure, borrowing arrow functions) when initializing the custom component, and call @BuilderParam within the custom component to add specific functions. This decorator is used to declare an element of any UI description, similar to a slot placeholder.  </p>
<h4 id="5-Can-the-default-startup-effect-of-a-HarmonyOS-APP-be-canceled"><a href="#5-Can-the-default-startup-effect-of-a-HarmonyOS-APP-be-canceled" class="headerlink" title="5. Can the default startup effect of a HarmonyOS APP be canceled?"></a>5. Can the default startup effect of a HarmonyOS APP be canceled?</h4><p>Question 1: Can the default startup effect of an APP be canceled? Can developers customize the launch page, i.e., create their own LaunchAbility new page?<br>Question 2: Can the icon (startWindowIcon) in the default startup effect be customized in size?  </p>
<p>Question 1: The default startup effect of an APP is set through the startWindowIcon and startWindowBackground fields in module.json5. A launch page is mandatory for each UIAbility, and these two fields cannot be omitted; otherwise, compilation will fail. To customize the launch page, set startWindowIcon to a transparent image to cancel the default effect. The UIAbility component sets the launch page icon and background color, but it is not a real launch page in the true sense. Developers can manually create a splash page for business initialization to achieve a custom launch page, referring to the Splash Screen Ability sample.  </p>
<p>Question 2: The icon (startWindowIcon) in the default startup effect will be displayed as its actual size, without adaptive adjustment based on the device screen or window size. For example, to set a full-screen image, provide an image according to the device’s full-screen dimensions.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/326-Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/326-Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Relative Layout, High-Performance List Optimization, Text Centering, Control Size Acquisition, Click Callback</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:33:58 / Modified: 22:34:13" itemprop="dateCreated datePublished" datetime="2025-06-26T22:33:58+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback"><a href="#Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Relative Layout, High-Performance List Optimization, Text Centering, Control Size Acquisition, Click Callback"></a>[Daily HarmonyOS Next Knowledge] Relative Layout, High-Performance List Optimization, Text Centering, Control Size Acquisition, Click Callback</h3><h4 id="1-How-to-set-the-height-of-HarmonyOS-RelativeContainer-to-auto-to-adapt-to-the-height-of-child-controls"><a href="#1-How-to-set-the-height-of-HarmonyOS-RelativeContainer-to-auto-to-adapt-to-the-height-of-child-controls" class="headerlink" title="1. How to set the height of HarmonyOS RelativeContainer to auto to adapt to the height of child controls?"></a>1. How to set the height of HarmonyOS RelativeContainer to auto to adapt to the height of child controls?</h4><p>The height of an item cannot be controlled, and it is desired to follow the height of child controls. How to achieve this?  </p>
<p>When width is set to auto, if child components in the horizontal direction use the container as an anchor, auto will not take effect, and the same applies to the vertical direction. The code should not use <strong>container</strong> as an anchor. Refer to the documentation rules: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a>  </p>
<p><strong>Relative layout component</strong> for element alignment in complex scenarios:  </p>
<ul>
<li>Child components in the container are divided into horizontal and vertical directions:  <ul>
<li>Horizontal: left, middle, right (corresponding to HorizontalAlign.Start, Center, End).  </li>
<li>Vertical: top, center, bottom (corresponding to VerticalAlign.Top, Center, Bottom).</li>
</ul>
</li>
<li>Child components can use the container, guideline, barrier, or other child components as anchors:  <ul>
<li>Components in the relative layout container without an id can be displayed but cannot be used as anchors by other child components. The container will generate an id for them, whose pattern is not perceivable by the application. The container id is fixed as <strong>container</strong>; guideline and barrier ids must not repeat with components, with priority: component &gt; guideline &gt; barrier.  </li>
<li>For a child component, the three positions in one direction (e.g., left, middle, right for horizontal) can specify the same-direction positions of the container or other child components (e.g., HorizontalAlign.Start, Center, End for horizontal) as anchors. If more than two anchors are set in the same direction, Start and Center (horizontal) or Top and Center (vertical) take precedence. For example, if left is anchored to the container’s Start, middle to Center, and right to End, and the component width and container width cannot satisfy all three constraints, Start and Center constraints are prioritized.  </li>
<li>When both the child component size set in the front-end and relative layout rules exist, the drawing size of the child component depends on the constraints (this rule changed in API Version 11, where the drawing size depends on the front-end set size).  </li>
<li>Additional offset can be set after alignment (bias was added in API Version 11, and offset is no longer recommended).  </li>
<li>From API Version 11, in the RelativeContainer component, setting width&#x2F;height to auto means adapting to child components.  </li>
<li>When width is set to auto, if child components in the horizontal direction use the container as an anchor, auto does not take effect (same for the vertical direction).  </li>
<li>The margin of child components in the relative layout container differs from the general attribute margin, meaning the distance to the anchor in that direction. If there is no anchor in that direction, the margin does not take effect.  </li>
<li>When the guideline position is not declared or is an invalid value (e.g., undefined), it takes the start: 0 position; only one of start or end needs to be declared, with start taking precedence if both are declared.  </li>
<li>When the container’s size in a direction is declared as “auto”, the guideline position in that direction can only be declared using start (percentage is not allowed).  </li>
<li>Vertical guidelines and barriers can only be used as horizontal anchors for components (vertical anchor takes 0), while horizontal guidelines and barriers can only be used as vertical anchors (horizontal anchor takes 0).  </li>
<li>Chains are formed by dependency relationships between components. For example, a minimum horizontal chain of components A and B requires anchor1 &lt;– A &lt;—&gt; B –&gt; anchor2, i.e., A has a left anchor, B has a right anchor, A’s right anchor is B’s Start, and B’s left anchor is A’s End.  </li>
<li>The chain direction and style are declared in the chainMode interface of the chain head component; the bias attribute of elements within the chain is invalid, and the chain head’s bias applies to the entire chain.  </li>
<li>If the size of elements within the chain exceeds the chain anchor constraints, the excess is evenly distributed on both sides. In a Packed chain, the excess distribution can be set via bias.</li>
</ul>
</li>
<li><strong>Special cases</strong>:  <ul>
<li>If the child component size cannot be determined by constraints and its own size attribute, it will not be drawn.  </li>
<li>Mutually dependent or circularly dependent child components will not be drawn.  </li>
<li>If two or more positions in the same direction set anchors but the anchor positions are in reverse order, the child component size is 0 (not drawn).</li>
</ul>
</li>
</ul>
<p><strong>Reference demo example</strong>:  </p>
<pre><code class="language-typescript">@Component
export struct CommentItem &#123;
  index: number = 0

  build() &#123;
    Column() &#123;
      RelativeContainer() &#123;
        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead1&quot; + this.index)

        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead2&quot; + this.index).alignRules(&#123;
          top: &#123; anchor: &quot;ivHead1&quot; + this.index, align: VerticalAlign.Top &#125;,
          left: &#123; anchor: &quot;ivHead1&quot; + this.index, align: HorizontalAlign.End &#125;
        &#125;)

        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead3&quot; + this.index).alignRules(&#123;
          top: &#123; anchor: &quot;ivHead1&quot; + this.index, align: VerticalAlign.Bottom &#125;,
          left: &#123; anchor: &quot;ivHead1&quot; + this.index, align: HorizontalAlign.Start &#125;
        &#125;)
        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead4&quot; + this.index).alignRules(&#123;
          top: &#123; anchor: &quot;ivHead2&quot; + this.index, align: VerticalAlign.Bottom &#125;,
          left: &#123; anchor: &quot;ivHead3&quot; + this.index, align: HorizontalAlign.End &#125;
        &#125;)

      &#125;.width(&quot;auto&quot;).height(&quot;auto&quot;).padding(13)
    &#125;.width(&#39;100%&#39;)

  &#125;
&#125;


@Entry
@Component
struct Index3 &#123;

  build() &#123;
    Column() &#123;
      List() &#123;
        ForEach([1, 2, 3], (item: number, index: number) =&gt; &#123;
          ListItem() &#123;
            CommentItem(&#123; index: index &#125;)
          &#125;
        &#125;)
      &#125;
    &#125;.height(&quot;100%&quot;)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-optimize-high-performance-lists-in-HarmonyOS"><a href="#2-How-to-optimize-high-performance-lists-in-HarmonyOS" class="headerlink" title="2. How to optimize high-performance lists in HarmonyOS?"></a>2. How to optimize high-performance lists in HarmonyOS?</h4><p>Stock lists trigger multiple data updates per second, causing continuous refreshes of list item data. Fast scrolling in this scenario leads to frame drops. What technology should be used for optimization?  </p>
<p>For large list data and complex list components, use LazyForEach for data lazy loading. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5</a>  </p>
<p>LazyForEach iterates data on demand from the provided data source and creates corresponding components during each iteration. When used in a scrolling container, the framework creates components on demand based on the container’s visible area and destroys&#x2F;recycles components when they scroll out of view to reduce memory usage.  </p>
<p><strong>Usage limitations</strong>:  </p>
<ul>
<li>LazyForEach must be used within a container component. Only List, Grid, Swiper, and WaterFlow support data lazy loading (configurable cachedCount for buffering visible and adjacent data); other components load all data at once.  </li>
<li>LazyForEach relies on generated keys to determine whether to refresh child components. If keys do not change, the corresponding child components will not be refreshed.  </li>
<li>When using LazyForEach in a container component, only one LazyForEach is allowed. For example, List should not contain both ListItem and ForEach&#x2F;LazyForEach, nor multiple LazyForEach instances.  </li>
<li>Each LazyForEach iteration must create exactly one child component (the child component generation function has one root component).  </li>
<li>The generated child component must be allowed in the LazyForEach parent container.  </li>
<li>LazyForEach can be included in if&#x2F;else conditional rendering, and if&#x2F;else can appear within LazyForEach.  </li>
<li>The key generator must produce a unique value for each data item. Duplicate keys will cause rendering issues for UI components.  </li>
<li>LazyForEach must use a DataChangeListener object for updates; reassigning the first parameter dataSource will cause exceptions, and changes to state variables in dataSource will not trigger UI refresh.  </li>
<li>For high-performance rendering, when updating UI via the DataChangeListener’s onDataChange method, generate keys different from the original to trigger component refresh.  </li>
<li>LazyForEach must be used with the @Reusable decorator to enable node reuse (decorate the LazyForEach list component with @Reusable).</li>
</ul>
<p><strong>Key generation rules</strong>:<br>During LazyForEach rendering, the system generates a unique and persistent key for each item to identify the component. When the key changes, the ArkUI framework treats the array element as replaced&#x2F;modified and creates a new component based on the new key.  </p>
<p>LazyForEach provides a keyGenerator parameter (a function) for custom key generation. If not defined, the default key generator is used: (item: Object, index: number) &#x3D;&gt; { return viewId + ‘-‘ + index.toString(); }, where viewId is generated during compilation and consistent within the same LazyForEach component.  </p>
<h4 id="3-How-to-center-text-in-HarmonyOS"><a href="#3-How-to-center-text-in-HarmonyOS" class="headerlink" title="3. How to center text in HarmonyOS?"></a>3. How to center text in HarmonyOS?</h4><p>How to set text to center display? Setting height and lineHeight to the same value does not center the text.  </p>
<p><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Pagetext &#123;
  @State message: string = &#39;Hell&#39;;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .width(70)
          .height(30)
            // .lineHeight(30)
          .textAlign(TextAlign.Center)
          .backgroundColor(&#39;#99000000&#39;)
            // .align(Alignment.TopEnd)
          .border(&#123;
            radius: 15
          &#125;)
          .fontSize(17)
          .fontColor(Color.White)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-get-the-current-size-of-a-control-in-HarmonyOS"><a href="#4-How-to-get-the-current-size-of-a-control-in-HarmonyOS" class="headerlink" title="4. How to get the current size of a control in HarmonyOS?"></a>4. How to get the current size of a control in HarmonyOS?</h4><p>Use the component area event onAreaChange(event: (oldValue: Area, newValue: Area) &#x3D;&gt; void) to obtain the component size.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5</a>  </p>
<h4 id="5-In-the-willClick-listener-callback-of-HarmonyOS-is-there-a-way-to-get-page-route-information-of-the-clicked-control"><a href="#5-In-the-willClick-listener-callback-of-HarmonyOS-is-there-a-way-to-get-page-route-information-of-the-clicked-control" class="headerlink" title="5. In the willClick listener callback of HarmonyOS, is there a way to get page&#x2F;route information of the clicked control?"></a>5. In the willClick listener callback of HarmonyOS, is there a way to get page&#x2F;route information of the clicked control?</h4><p>Through willClick to listen for control clicks, can pageinfo&#x2F;route information be obtained via frameNode?  </p>
<p>There are no related interfaces on frameNode, so pageinfo&#x2F;route information cannot be obtained via frameNode.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/325-Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/325-Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Numeric Precision Issues, Slider Problems, Routing Animation Issues, Fixed-Count Loop Rendering, Canvas Animation Implementation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:32:35 / Modified: 22:32:57" itemprop="dateCreated datePublished" datetime="2025-06-26T22:32:35+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation"><a href="#Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Numeric Precision Issues, Slider Problems, Routing Animation Issues, Fixed-Count Loop Rendering, Canvas Animation Implementation"></a>[Daily HarmonyOS Next Knowledge] Numeric Precision Issues, Slider Problems, Routing Animation Issues, Fixed-Count Loop Rendering, Canvas Animation Implementation</h3><h4 id="1-Does-HarmonyOS-directly-convert-to-number-type-for-addition-subtraction-multiplication-and-division-How-to-avoid-precision-anomalies-after-calculation"><a href="#1-Does-HarmonyOS-directly-convert-to-number-type-for-addition-subtraction-multiplication-and-division-How-to-avoid-precision-anomalies-after-calculation" class="headerlink" title="1. Does HarmonyOS directly convert to number type for addition, subtraction, multiplication, and division? How to avoid precision anomalies after calculation?"></a>1. Does HarmonyOS directly convert to number type for addition, subtraction, multiplication, and division? How to avoid precision anomalies after calculation?</h4><p>Are calculations directly converted to the number type for addition, subtraction, multiplication, and division? How to avoid precision anomalies in calculated data?  </p>
<p>Since all numbers are double-precision floating-point numbers stored in binary in computers, decimals and non-safe integers (data exceeding the integer safety range <code>[-Math.pow(2, 53), Math.pow(2, 53)]</code>) may experience precision loss during calculations.  </p>
<ol>
<li><p><strong>Decimal operations</strong>: For example, “0.2 + 2.22 &#x3D; 2.4200000000000004”. Convert decimals to integers for calculation, then scale the result down:<br><code>(0.2 * 100 + 2.22 * 100) / 100 = 2.42</code>.  </p>
</li>
<li><p><strong>Non-safe integer operations</strong>: For example, “9007199254740992 + 1 &#x3D; 9.007199254740992”. Convert numbers longer than 15 digits to scientific notation:<br><code>9007199254740992 + 1 = 9.007199254740993e15</code>.<br>Refer to the official demo: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SimpleCalculator">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SimpleCalculator</a></p>
</li>
</ol>
<h4 id="2-When-the-HarmonyOS-Slider-is-set-to-vertical-direction-with-blockStyle-as-IMAGE-the-slider-cannot-be-moved"><a href="#2-When-the-HarmonyOS-Slider-is-set-to-vertical-direction-with-blockStyle-as-IMAGE-the-slider-cannot-be-moved" class="headerlink" title="2. When the HarmonyOS Slider is set to vertical direction with blockStyle as IMAGE, the slider cannot be moved?"></a>2. When the HarmonyOS Slider is set to vertical direction with blockStyle as IMAGE, the slider cannot be moved?</h4><p>The Slider can move normally when set to vertical direction with blockStyle as IMAGE.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SliderExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">vInSetValueOne</span>: <span class="built_in">number</span> = <span class="number">40</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">vInSetValueTwo</span>: <span class="built_in">number</span> = <span class="number">40</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">8</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;vertical inset slider&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">9</span>).<span class="title function_">fontColor</span>(<span class="number">0xCCCCCC</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Slider</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">vInSetValueOne</span>,</span><br><span class="line">            <span class="attr">style</span>: <span class="title class_">SliderStyle</span>.<span class="property">InSet</span>,</span><br><span class="line">            <span class="attr">direction</span>: <span class="title class_">Axis</span>.<span class="property">Vertical</span>,</span><br><span class="line">            <span class="attr">reverse</span>: <span class="literal">true</span> <span class="comment">// The vertical Slider defaults to min at the top and max at the bottom; set reverse to true for bottom-to-top sliding</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">blockStyle</span>(&#123; <span class="attr">type</span>: <span class="title class_">SliderBlockType</span>.<span class="property">IMAGE</span>, <span class="attr">image</span>: $r(<span class="string">&#x27;sys.media.ohos_ic_public_ok&#x27;</span>) &#125;)</span><br><span class="line">            .<span class="title function_">showTips</span>(<span class="literal">true</span>)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">mode</span>: <span class="title class_">SliderChangeMode</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">vInSetValueOne</span> = value</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;value:&#x27;</span> + value + <span class="string">&#x27;mode:&#x27;</span> + mode.<span class="title function_">toString</span>())</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Slider</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">vInSetValueTwo</span>,</span><br><span class="line">            <span class="attr">step</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">style</span>: <span class="title class_">SliderStyle</span>.<span class="property">InSet</span>,</span><br><span class="line">            <span class="attr">direction</span>: <span class="title class_">Axis</span>.<span class="property">Vertical</span>,</span><br><span class="line">            <span class="attr">reverse</span>: <span class="literal">true</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">blockStyle</span>(&#123; <span class="attr">type</span>: <span class="title class_">SliderBlockType</span>.<span class="property">IMAGE</span>, <span class="attr">image</span>: $r(<span class="string">&#x27;sys.media.ohos_app_icon&#x27;</span>) &#125;)</span><br><span class="line">            .<span class="title function_">showSteps</span>(<span class="literal">true</span>)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">mode</span>: <span class="title class_">SliderChangeMode</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">vInSetValueTwo</span> = value</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;value:&#x27;</span> + value + <span class="string">&#x27;mode:&#x27;</span> + mode.<span class="title function_">toString</span>())</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. [router] When page 1 disables the exit transition animation, pushing to page 2 makes page 2 fully transparent during transition, revealing page 1 until the animation ends?  </span></span><br><span class="line"><span class="string">Steps:  </span></span><br><span class="line"><span class="string">1. Page 1 overrides `</span>pageTransition<span class="string">` to disable the exit transition animation.  </span></span><br><span class="line"><span class="string">2. Page 1 pushes to page 2 via router.  </span></span><br><span class="line"><span class="string">3. Page 2 becomes fully transparent during transition, showing page 1 until the animation completes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Expectation**: Page 2 should not become fully transparent during transition.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To disable page transition animations, set both entry and exit transitions. Refer to the code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// main.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>).<span class="title function_">fontSize</span>(<span class="number">50</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/240115173611047_second&#x27;</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#A0FF0000&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// second.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Second</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Back&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        router.<span class="title function_">back</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#A00000FF&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The Navigation component is suitable for in-module page switching in cross-device scenarios, offering natural transition effects and various title bar styles. It automatically adapts to window sizes, switching to split-column display for larger windows. Use Navigation for page routing (router will not be further evolved). Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to render a fixed number of items in a loop in HarmonyOS ArkUI?  </span></span><br><span class="line"><span class="string">How to render a fixed number of items in a loop in ArkUI?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Currently, component rendering only supports `</span><span class="title class_">ForEach</span><span class="string">`, which requires an array as the first parameter. For simple rendering without complex elements, create a dummy array:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">ForEach</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],<span class="function">(<span class="params"><span class="attr">item</span>:<span class="built_in">number</span></span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;这是Item=&#x27;</span>+item)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to implement animations with HarmonyOS Canvas?  </span></span><br><span class="line"><span class="string">Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-canvasrenderingcontext2d-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ArkTS Canvas usage is similar to web Canvas. Animations can be ported from web Canvas demos:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">timerId</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">startAngle</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">0.2</span> + (<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>) * <span class="number">90</span>; <span class="comment">// Start angle (radians)</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">endAngle</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">1.8</span> + (<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>) * <span class="number">90</span>; <span class="comment">// End angle (radians)</span></span><br><span class="line">  <span class="attr">lengthToAdd</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">360</span>; <span class="comment">// Length added per draw (radians)</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentAngle</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">step</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// Center coordinates and radius</span></span><br><span class="line">  centerX = <span class="number">200</span>;</span><br><span class="line">  centerY = <span class="number">200</span>;</span><br><span class="line">  radius = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentAngle</span> = <span class="variable language_">this</span>.<span class="property">startAngle</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timerId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">step</span> %<span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentAngle</span> += <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">drawArc</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentAngle</span> &gt; <span class="variable language_">this</span>.<span class="property">endAngle</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">step</span>++;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&quot;destination-out&quot;</span>; <span class="comment">// Change composite mode for erasing</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">21</span>; <span class="comment">// Wider line for erasing to prevent residues</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">eraseArc</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentAngle</span> -= <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentAngle</span>&lt;= <span class="variable language_">this</span>.<span class="property">startAngle</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">step</span>++;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&quot;source-over&quot;</span>; <span class="comment">// Restore composite mode for normal drawing</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">20</span>; <span class="comment">// Normal line width</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">drawArc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Draw arc</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerX</span>, <span class="comment">// Arc center x-coordinate</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerY</span> + <span class="number">30</span>, <span class="comment">// Arc center y-coordinate</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">radius</span>, <span class="comment">// Arc radius</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> - <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>, <span class="comment">// Start angle (radians)</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> + <span class="variable language_">this</span>.<span class="property">lengthToAdd</span> <span class="comment">// End angle (radians)</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">eraseArc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerX</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerY</span> + <span class="number">30</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">radius</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> - <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> + <span class="number">2</span> * <span class="variable language_">this</span>.<span class="property">lengthToAdd</span> <span class="comment">// Wider erasing to prevent residues</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// Set arc color and width</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">20</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/324-Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/324-Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Click Event Bubble Prevention, Payment Input Dialog, Color Handling Methods, Text Component Positioning, Text Component Width Compression</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:31:20 / Modified: 22:31:45" itemprop="dateCreated datePublished" datetime="2025-06-26T22:31:20+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression"><a href="#Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Click Event Bubble Prevention, Payment Input Dialog, Color Handling Methods, Text Component Positioning, Text Component Width Compression"></a>[Daily HarmonyOS Next Knowledge] Click Event Bubble Prevention, Payment Input Dialog, Color Handling Methods, Text Component Positioning, Text Component Width Compression</h3><h4 id="1-How-to-prevent-event-bubbling-for-the-HarmonyOS-onClick-event"><a href="#1-How-to-prevent-event-bubbling-for-the-HarmonyOS-onClick-event" class="headerlink" title="1. How to prevent event bubbling for the HarmonyOS onClick event?"></a>1. How to prevent event bubbling for the HarmonyOS onClick event?</h4><p>How to prevent event bubbling for the onClick event?  </p>
<p>Since only events supporting <code>stopPropagation</code> can use this method, and the ClickEvent for click events does not support it, you cannot directly use <code>stopPropagation</code> to prevent event bubbling.  </p>
<h4 id="2-HarmonyOS-payment-input-dialog"><a href="#2-HarmonyOS-payment-input-dialog" class="headerlink" title="2. HarmonyOS payment input dialog?"></a>2. HarmonyOS payment input dialog?</h4><p>Payment input dialog  </p>
<p>The overall implementation can use <code>CustomDialog</code>. Since payment inputs have no cursor, it is recommended to use six <code>Text</code> components spliced together instead of <code>TextInput</code>. When the custom keyboard is clicked, trigger an event to display the input in the <code>Text</code> components. Use images to display encrypted characters like <code>*</code>. Refer to the following implementation:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line"><span class="comment">// Dialog decorator for custom dialogs</span></span><br><span class="line">struct <span class="title class_">CustomDialogExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(&#123;&#125;),</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="attr">services</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;X&#x27;</span>]</span><br><span class="line">  <span class="attr">numbers</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">Inputs</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = []</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123; <span class="comment">// Set dialog content</span></span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Please enter payment password&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">10</span>, <span class="attr">bottom</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">5</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">numbers</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="property">length</span> &gt;= item ? <span class="string">&#x27;*&#x27;</span> : <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#C0C0C0&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;15%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">services</span>, <span class="function">(<span class="params"><span class="attr">service</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(service)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">borderWidth</span>(<span class="number">0.4</span>)</span><br><span class="line">          .<span class="title function_">borderColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (service != <span class="string">&#x27;X&#x27;</span> &amp;&amp; service != <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="title function_">push</span>(service)</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="property">length</span> == <span class="number">6</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">close</span>()</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (service == <span class="string">&#x27;X&#x27;</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="title function_">pop</span>()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="comment">// Dialog constructor, corresponding to the decorator</span></span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(),</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Pay&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">open</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS method to get ARGB of a color or handle colors?  </span></span><br><span class="line"><span class="string">`</span>uint32_t <span class="title function_">OH_Drawing_BrushGetColor</span> (<span class="keyword">const</span> OH_Drawing_Brush * )<span class="string">`  </span></span><br><span class="line"><span class="string">Gets the color attribute of a brush. The color attribute describes the color used when the brush fills a graphic, represented by a 32-bit (ARGB) variable. For details, refer to the official documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/drawing__brush_8h-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To get color values, you can also use `</span><span class="title function_">getColorSync</span>(<span class="attr">resId</span>: <span class="built_in">number</span>) : <span class="built_in">number</span>;<span class="string">` to retrieve the color value corresponding to a specified resource ID synchronously. Detailed documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5#getcolorsync10  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="title function_">getColorSync</span>(<span class="attr">resId</span>: <span class="built_in">number</span>) : <span class="built_in">number</span>;<span class="string">`  </span></span><br><span class="line"><span class="string">Retrieves the color value corresponding to a specified resource ID synchronously.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For other color types, refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-types-V5#resourcecolor  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**ResourceColor**  </span></span><br><span class="line"><span class="string">Color type used to describe resource colors.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Type       | Description                                                                                         |</span></span><br><span class="line"><span class="string">| :------- | :----------------------------------------------------------------------------------------- |</span></span><br><span class="line"><span class="string">| Color    | Color enum value.                                                                                     |</span></span><br><span class="line"><span class="string">| number   | HEX format color, supporting rgb or argb. Examples: 0xffffff, 0xffff0000. The number type cannot识别 the number of digits passed; the format is determined by the value size (e.g., 0x00ffffff is parsed as rgb).  |</span></span><br><span class="line"><span class="string">| string   | rgb or argb format color. Examples: &#x27;#ffffff&#x27;, &#x27;#ff000000&#x27;, &#x27;rgb(255, 100, 255)&#x27;, &#x27;rgba(255, 100, 255, 0.5)&#x27;. |</span></span><br><span class="line"><span class="string">| Resource | Introduces colors from system resources or application resources using resource references.                                                                |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to set the position of a HarmonyOS Text component to the upper right corner?  </span></span><br><span class="line"><span class="string">The `</span><span class="title class_">Edges</span><span class="string">` type supports `</span>right<span class="string">` and `</span>left<span class="string">`, allowing positioning in the upper right corner. Refer to the following demo:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;66666&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#f04b3d&#x27;</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(&#123;</span><br><span class="line">          <span class="attr">bottomLeft</span>: <span class="number">12</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">10</span>)</span><br><span class="line">      <span class="title class_">Flex</span>().<span class="title function_">width</span>(<span class="number">10</span>).<span class="title function_">height</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>).<span class="title function_">position</span>(&#123;<span class="attr">right</span>:<span class="number">0</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(<span class="number">50</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. When there are multiple Text components in a Flex in HarmonyOS, how to compress the width of a specific Text?  </span></span><br><span class="line"><span class="string">Use the `</span>flexShrink<span class="string">` property in combination with `</span>textOverflow<span class="string">`, `</span>wordBreak<span class="string">`, and `</span>maxLines<span class="string">` to compress the width and content of a Text component:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">AdaptiveText</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Row</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;flexShrink(2)flexShrink(2)flexShrink(2)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">flexShrink</span>(<span class="number">2</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">        .<span class="title function_">wordBreak</span>(<span class="title class_">WordBreak</span>.<span class="property">BREAK_WORD</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;no flexShrink&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">        .<span class="title function_">wordBreak</span>(<span class="title class_">WordBreak</span>.<span class="property">BREAK_WORD</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;flexShrink(6)flexShrink(6)flexShrink(6)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">flexShrink</span>(<span class="number">6</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">        .<span class="title function_">wordBreak</span>(<span class="title class_">WordBreak</span>.<span class="property">BREAK_WORD</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">2</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>).<span class="title function_">height</span>(<span class="number">120</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xAFEEEE</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/323-Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/323-Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Lifecycle Triggering, This Pointer, Countdown Component, State Variables, Swiper Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:29:54 / Modified: 22:30:09" itemprop="dateCreated datePublished" datetime="2025-06-26T22:29:54+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component"><a href="#Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Lifecycle Triggering, This Pointer, Countdown Component, State Variables, Swiper Component"></a>[Daily HarmonyOS Next Knowledge] Lifecycle Triggering, This Pointer, Countdown Component, State Variables, Swiper Component</h3><h4 id="1-HarmonyOS-lifecycle-not-triggering"><a href="#1-HarmonyOS-lifecycle-not-triggering" class="headerlink" title="1. HarmonyOS lifecycle not triggering?"></a>1. HarmonyOS lifecycle not triggering?</h4><p>The lifecycle of the page corresponding to a tab does not trigger or triggers only once.  </p>
<p>Use the <code>onTabBarClick</code> event to trigger actions when tabs are clicked. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-container-tabs-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-container-tabs-V5</a>  </p>
<h4 id="2-Issue-with-this-pointer-in-HarmonyOS-custom-callbacks-unable-to-call-methods-within-the-Page"><a href="#2-Issue-with-this-pointer-in-HarmonyOS-custom-callbacks-unable-to-call-methods-within-the-Page" class="headerlink" title="2. Issue with this pointer in HarmonyOS custom callbacks; unable to call methods within the Page?"></a>2. Issue with <code>this</code> pointer in HarmonyOS custom callbacks; unable to call methods within the Page?</h4><p>Save the <code>this</code> pointer outside the method:  </p>
<pre><code class="language-typescript">let _this = this
onReceiveData()&#123;
  ......
&#125;
</code></pre>
<h4 id="3-HarmonyOS-TextTimer-component-shows-0-first-when-isCountDown-is-true-then-starts-counting-down"><a href="#3-HarmonyOS-TextTimer-component-shows-0-first-when-isCountDown-is-true-then-starts-counting-down" class="headerlink" title="3. HarmonyOS TextTimer component shows 0 first when isCountDown is true, then starts counting down?"></a>3. HarmonyOS TextTimer component shows 0 first when <code>isCountDown</code> is <code>true</code>, then starts counting down?</h4><p>Code example:  </p>
<pre><code class="language-typescript">TextTimer(&#123; isCountDown: false, count: 60000, controller: this.textTimerController &#125;)
  .size(&#123; width: 100, height: &#39;100%&#39; &#125;)
  .margin(&#123; left: 12 &#125;)
  .format(&#39;s&#39;)
  .fontColor(Color.White)
  .fontSize(14)
  .align(Alignment.Center)
  .onTimer((utc: number, elapsedTime: number) =&gt; &#123;
    console.info(&#39;textTimer notCountDown utc is：&#39; + utc + &#39;, elapsedTime: &#39; + elapsedTime)
  &#125;)
</code></pre>
<p>In the demo, a 60-second countdown automatically converts to 1 minute (01:00.00). Using <code>format(&#39;s&#39;)</code> will display only seconds (0). There is no configuration to disable this automatic conversion. Alternatively, implement the countdown manually:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TestTextTimerPage &#123;
  @State timeTaskNumber: number = 120;
  task: number = -1;

  countDown() &#123;
    this.task = setInterval(() =&gt; &#123;
      this.timeTaskNumber--;
      if (this.timeTaskNumber == 0) &#123;
        clearInterval(this.task);
        this.task = -1;
      &#125;
    &#125;, 1000);
  &#125;

  build() &#123;
    Column() &#123;
      Row() &#123;
        Text(this.timeTaskNumber + &#39;&#39;);

        Button(&#39;start&#39;).onClick(() =&gt; &#123;
          this.countDown();
        &#125;);

        Button(&#39;stop&#39;).onClick(() =&gt; &#123;
          if (this.task &gt;= 0) &#123;
            clearInterval(this.task);
            this.task = -1;
          &#125;
        &#125;)
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-Parameters-in-HarmonyOS-Builder-functions-for-initializing-Provide-variables-in-Components-do-not-update-when-Builder-parameters-change"><a href="#4-Parameters-in-HarmonyOS-Builder-functions-for-initializing-Provide-variables-in-Components-do-not-update-when-Builder-parameters-change" class="headerlink" title="4. Parameters in HarmonyOS Builder functions for initializing @Provide variables in Components do not update when Builder parameters change?"></a>4. Parameters in HarmonyOS Builder functions for initializing @Provide variables in Components do not update when Builder parameters change?</h4><p>Variables decorated with @Provide and @Prop should both be stateful, but there are differences. When using the BuilderNode’s <code>update</code> function to update uiFunc parameters, only @Prop-decorated <code>args2</code> updates, while @Provide-decorated <code>args1</code> does not.  </p>
<p>@Provide on a parent component is equivalent to @State. <code>update</code> passes data from the builderNode to child components. Custom components are children of the builderNode; @Prop properties update from parent to child, while @Provide updates from ancestor to descendant. Refer to state management documentation:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/Readme-CN.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/Readme-CN.md</a>  </li>
<li><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-provide-and-consume.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-provide-and-consume.md</a></li>
</ul>
<p>@Provide and @Consume enable two-way data synchronization between ancestors and descendants, supporting cross-level state propagation. Unlike parameter passing between parent and child components, @Provide and @Consume allow direct cross-level binding:  </p>
<ul>
<li>@Provide: Decorates variables in ancestor components to “provide” state to descendants.  </li>
<li>@Consume: Decorates variables in descendant components to “consume” (bind to) ancestor-provided state.</li>
</ul>
<p>Before using @Provide&#x2F;@Consume, developers should understand basic UI syntax and custom components.  </p>
<h4 id="5-HarmonyOS-Swiper’s-displayCount-set-to-auto-does-not-adapt-when-items-use-the-position-attribute"><a href="#5-HarmonyOS-Swiper’s-displayCount-set-to-auto-does-not-adapt-when-items-use-the-position-attribute" class="headerlink" title="5. HarmonyOS Swiper’s displayCount set to auto does not adapt when items use the position attribute?"></a>5. HarmonyOS Swiper’s <code>displayCount</code> set to <code>auto</code> does not adapt when items use the <code>position</code> attribute?</h4><p><code>position</code> uses absolute positioning, fixing child component positions relative to the parent. Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-location.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-location.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/322-Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/322-Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Image Caching, chainMode, Custom Dialog, State Manager, Relative Position Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:28:39 / Modified: 22:28:56" itemprop="dateCreated datePublished" datetime="2025-06-26T22:28:39+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting"><a href="#Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Image Caching, chainMode, Custom Dialog, State Manager, Relative Position Setting"></a>[Daily HarmonyOS Next Knowledge] Image Caching, chainMode, Custom Dialog, State Manager, Relative Position Setting</h3><h4 id="1-Can-the-image-component-in-HarmonyOS-cache-network-images"><a href="#1-Can-the-image-component-in-HarmonyOS-cache-network-images" class="headerlink" title="1. Can the image component in HarmonyOS cache network images?"></a>1. Can the image component in HarmonyOS cache network images?</h4><p>When loading network images, the Image component reads resources from the network for the first time, and subsequent loads are read from the cache. For specific image caching details, refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-app-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-app-V5</a>  </p>
<p><strong>static setImageCacheCount(value: number): void</strong><br>Sets the upper limit of decoded images cached in memory to improve loading speed for the same source. The default is 0 (no caching). The cache uses a built-in LRU strategy: if the limit is exceeded, the least recently used cache is removed. Set a reasonable value based on memory requirements to avoid high memory usage.  </p>
<ul>
<li>This method takes effect when set in <code>onPageShow</code> or <code>aboutToAppear</code> of an <code>@Entry</code>-marked page.  </li>
<li><code>setImageCacheCount</code>, <code>setImageRawDataCacheSize</code>, and <code>setImageFileCacheSize</code> have limited flexibility. For complex scenarios, use ImageKnife instead.</li>
</ul>
<pre><code class="language-typescript">// xxx.ets
import app, &#123; AppResponse &#125; from &#39;@system.app&#39;

@Entry
@Component
struct Index &#123;
  onPageShow() &#123;
    // Set the memory cache limit for decoded images to 100
    app.setImageCacheCount(100) 
    console.info(&#39;Application onPageShow&#39;)
  &#125;
  onDestroy() &#123;
    console.info(&#39;Application onDestroy&#39;)
  &#125;

  build() &#123;
    Row()&#123;
      // xxxxxxxxxxxxx is the image URL
      Image(&#39;xxxxxxxxxxxxx&#39;)
        .width(200)
        .height(50)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p><strong>static setImageRawDataCacheSize(value: number): void</strong><br>Sets the upper limit (in bytes) for raw image data cached in memory before decoding. The default is 0 (no caching). The LRU strategy applies: if the limit is exceeded, the least recently used raw data is removed. Adjust the value to balance memory usage.  </p>
<pre><code class="language-typescript">// xxx.ets
import app, &#123; AppResponse &#125; from &#39;@system.app&#39;

@Entry
@Component
struct Index &#123;
  onPageShow() &#123;
    // Set the memory cache limit for raw image data to 100MB (100MB = 100*1024*1024B = 104857600B)
    app.setImageRawDataCacheSize(104857600) 
    console.info(&#39;Application onPageShow&#39;)
  &#125;
  onDestroy() &#123;
    console.info(&#39;Application onDestroy&#39;)
  &#125;

  build() &#123;
    Row()&#123;
      // xxxxxxxxxxxxx is the image URL
      Image(&#39;xxxxxxxxxxxxx&#39;)
        .width(200)
        .height(50)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-Why-does-chainMode-not-work-in-the-vertical-direction-for-HarmonyOS-api-RelativeContainer"><a href="#2-Why-does-chainMode-not-work-in-the-vertical-direction-for-HarmonyOS-api-RelativeContainer" class="headerlink" title="2. Why does chainMode not work in the vertical direction for HarmonyOS api RelativeContainer?"></a>2. Why does chainMode not work in the vertical direction for HarmonyOS api RelativeContainer?</h4><p>When using horizontal chainMode for three components (A, B, C), it works, but vertical chainMode for two components (A, B) fails.  </p>
<p>For vertical chainMode, set the chain direction to <code>Axis.Vertical</code> and ensure the layout links to the parent container with connected anchors. Refer to dependency rules: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a>  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  build() &#123;
    Row() &#123;
      RelativeContainer() &#123;
        Stack()&#123;
          Image(&quot;Any image&quot;).width(80).aspectRatio(1).objectFit(ImageFit.Cover)
            .alt($r(&#39;app.media.background&#39;))
        &#125;.borderRadius(&#39;11vp&#39;).clip(true)
        .id(&#39;image&#39;)
        .alignRules(&#123;
          top: &#123;anchor: &quot;__container__&quot;, align: VerticalAlign.Top&#125;,
          bottom:&#123; anchor: &#39;a&#39;, align: VerticalAlign.Top&#125;,
          middle: &#123;anchor: &quot;__container__&quot;, align: HorizontalAlign.Center&#125;
        &#125;)
        .id(&quot;row1&quot;)
        .chainMode(Axis.Vertical, ChainStyle.SPREAD)
        Row().width(80).height(80)
          .backgroundColor(&quot;#FFCC00&quot;)
          .alignRules(&#123;
            top: &#123;anchor: &quot;row1&quot;, align: VerticalAlign.Bottom&#125;,
            bottom: &#123;anchor: &quot;b&quot;, align: VerticalAlign.Top&#125;,
            left: &#123;anchor: &quot;row1&quot;, align: HorizontalAlign.Start&#125;
          &#125;)
          .id(&quot;a&quot;)
        Row().width(80).height(80)
          .backgroundColor(&quot;#FF6633&quot;)
          .alignRules(&#123;
            top: &#123;anchor: &quot;a&quot;, align: VerticalAlign.Bottom&#125;,
            bottom: &#123;anchor: &quot;__container__&quot;, align : VerticalAlign.Bottom&#125;,
            left: &#123;anchor: &quot;row1&quot;, align: HorizontalAlign.Start&#125;
          &#125;)
          .id(&quot;b&quot;)
      &#125;
      .id(&#39;test&#39;)
      .width(300).height(300)
      .margin(&#123;left: 50&#125;)
      .border(&#123;width:2, color: &quot;#6699FF&quot;&#125;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-When-using-CustomDialog-to-decorate-a-pop-up-using-ObjectLink-causes-an-error-Can-it-be-decorated-with-Component-simultaneously"><a href="#3-When-using-CustomDialog-to-decorate-a-pop-up-using-ObjectLink-causes-an-error-Can-it-be-decorated-with-Component-simultaneously" class="headerlink" title="3. When using @CustomDialog to decorate a pop-up, using @ObjectLink causes an error. Can it be decorated with @Component simultaneously?"></a>3. When using @CustomDialog to decorate a pop-up, using @ObjectLink causes an error. Can it be decorated with @Component simultaneously?</h4><p>Yes, @Component can decorate a @CustomDialog pop-up component, and decorators work normally. Here’s a sample using @ObjectLink in a dialog:  </p>
<pre><code class="language-typescript">@Observed
class Person &#123;
  name: string = &quot;Jerry&quot;
  age: number = 0
&#125;

@CustomDialog
@Component
struct CustomDialogExample &#123;
  @ObjectLink curPerson: Person
  controller?: CustomDialogController
  build() &#123;
    Column() &#123;
      TextInput(&#123;text: this.curPerson.name&#125;)
        .onChange((input: string) =&gt; &#123;
          this.curPerson.name = input
        &#125;)
        .width(&quot;100%&quot;)
        .height(100)
    &#125;
    .width(&quot;100%&quot;)
    .backgroundColor(Color.White)
    .borderRadius(&#123;topLeft: 32, topRight: 32&#125;)
  &#125;
&#125;
@Entry
@Component
struct CustomDialogTest &#123;
  @State person: Person = new Person()
  dialogController: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;curPerson: this.person&#125;),
    alignment: DialogAlignment.Bottom,
    customStyle: true
  &#125;)
  build() &#123;
    RelativeContainer() &#123;
      Text(this.person.name)
        .id(&#39;HelloWorld&#39;)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
        .alignRules(&#123;
          center: &#123; anchor: &#39;container&#39;, align: VerticalAlign.Center &#125;,
          middle: &#123; anchor: &#39;container&#39;, align: HorizontalAlign.Center &#125;
        &#125;)
        .onClick(() =&gt; &#123;
          this.dialogController.open()
        &#125;)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-Does-HarmonyOS-have-a-state-manager-similar-to-Flutter’s-provider"><a href="#4-Does-HarmonyOS-have-a-state-manager-similar-to-Flutter’s-provider" class="headerlink" title="4. Does HarmonyOS have a state manager similar to Flutter’s provider?"></a>4. Does HarmonyOS have a state manager similar to Flutter’s provider?</h4><p>Refer to the state management documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-management-overview-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-management-overview-V5</a>  </p>
<p>In declarative UI frameworks, the UI is a function of the program’s state. When state parameters change, the UI updates accordingly. This mechanism in ArkUI is called state management.  </p>
<p>Custom components use variables decorated by decorators to become state variables. Changes to state variables trigger UI re-rendering. Without state variables, the UI only renders once during initialization.  </p>
<h4 id="5-How-to-set-relative-positions-for-child-controls-in-a-HarmonyOS-Stack"><a href="#5-How-to-set-relative-positions-for-child-controls-in-a-HarmonyOS-Stack" class="headerlink" title="5. How to set relative positions for child controls in a HarmonyOS Stack?"></a>5. How to set relative positions for child controls in a HarmonyOS Stack?</h4><p>Setting <code>align(Alignment.End)</code> fails to place a close button on the far right. Use the following approach:  </p>
<pre><code class="language-typescript">.alignRules(&#123;
  top: &#123;anchor: &quot;__container__&quot;, align: VerticalAlign.Top&#125;,
  left: &#123;anchor: &quot;__container__&quot;, align: HorizontalAlign.Start&#125;
&#125;)
</code></pre>
<p>For specific examples, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/321-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-App-Management-Window-Callback-Manual-Refresh-Trigger-Image-Caching-Sandbox-Access/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/321-Daily-HarmonyOS-Next-Knowledge-Dark-Mode-App-Management-Window-Callback-Manual-Refresh-Trigger-Image-Caching-Sandbox-Access/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Dark Mode, App Management Window Callback, Manual Refresh Trigger, Image Caching, Sandbox Access</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:25:39 / Modified: 22:26:51" itemprop="dateCreated datePublished" datetime="2025-06-26T22:25:39+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Dark-Mode-App-Management-Window-Callback-Manual-Refresh-Trigger-Image-Caching-Sandbox-Access"><a href="#Daily-HarmonyOS-Next-Knowledge-Dark-Mode-App-Management-Window-Callback-Manual-Refresh-Trigger-Image-Caching-Sandbox-Access" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Dark Mode, App Management Window Callback, Manual Refresh Trigger, Image Caching, Sandbox Access"></a>[Daily HarmonyOS Next Knowledge] Dark Mode, App Management Window Callback, Manual Refresh Trigger, Image Caching, Sandbox Access</h3><h4 id="1-Can-the-App-style-be-set-to-dark-mode-in-HarmonyOS"><a href="#1-Can-the-App-style-be-set-to-dark-mode-in-HarmonyOS" class="headerlink" title="1. Can the App style be set to dark mode in HarmonyOS?"></a>1. Can the App style be set to dark mode in HarmonyOS?</h4><p>Can the App style be set to dark mode?  </p>
<p>For setting dark mode, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-dark-mode-adaptation">https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-dark-mode-adaptation</a>  </p>
<p><strong>Dark Mode</strong> (also known as暗色模式) is a UI theme that contrasts with the light mode commonly used in daily applications. Originating from human-computer interaction research and practice, dark mode is not merely changing the background to black and text to white but provides a comprehensive color theme adapted to dark environments. Compared to light mode, dark mode is gentler, reducing eye strain and fatigue from brightness. Additionally, it can lower application power consumption and improve battery life.  </p>
<p>To adapt to dark mode, applications should follow basic UX design principles to ensure readability, comfort, and consistency of page content, as detailed in the dark mode design principles. The adaptation process mainly includes:  </p>
<ul>
<li>Adapting color resources (font colors, element background colors).  </li>
<li>Adapting media resources (images, icons).  </li>
<li>Adapting the system status bar.  </li>
<li>Handling special cases (e.g., Web pages loaded by Web components).</li>
</ul>
<p><strong>Implementation Principle</strong>:<br>When the system switches to dark mode, some in-app elements (e.g., status bar, pop-up backgrounds, system controls) may automatically switch to dark themes, potentially causing layout inconsistencies. To address this, content adaptation for dark mode relies primarily on resource directories. When system settings change (e.g., language, light&#x2F;dark mode), the app automatically loads resources from the corresponding directory.  </p>
<p>The system reserves a <code>dark</code> directory for dark mode (not created by default). Developers must manually create <code>src/main/resources/dark</code> and place dark-mode resources there, while light-mode resources go into the default <code>src/main/resources/base</code> directory.  </p>
<p>Typically, light&#x2F;dark mode switching maintains page structure but changes theme colors and images to ensure aesthetic consistency. Below is a UX example of dark mode adaptation:<br><img src="/../images/66%E3%80%81Vue.js%20%E4%B8%8E%20RESTful%20API%20%E9%9B%86%E6%88%90%20%E4%B9%8B%20%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8.png"></p>
<p>Key adaptation items for dark mode include:  </p>
<ul>
<li>Color resource adaptation  </li>
<li>Media resource adaptation  </li>
<li>Status bar adaptation  </li>
<li>Web page adaptation (if using Web components)</li>
</ul>
<p>Common methods for enabling light&#x2F;dark mode switching:  </p>
<ul>
<li><strong>Follow system mode</strong>: Use <code>setColorMode(COLOR_MODE_NOT_SET)</code> to allow the app to automatically detect system mode changes and switch accordingly.  </li>
<li><strong>Manual in-app control</strong>: Call <code>setColorMode(COLOR_MODE_DARK)</code> for dark mode or <code>COLOR_MODE_LIGHT</code> for light mode.</li>
</ul>
<h4 id="2-Does-HarmonyOS-provide-an-event-callback-when-an-App-is-swiped-to-the-app-management-window"><a href="#2-Does-HarmonyOS-provide-an-event-callback-when-an-App-is-swiped-to-the-app-management-window" class="headerlink" title="2. Does HarmonyOS provide an event callback when an App is swiped to the app management window?"></a>2. Does HarmonyOS provide an event callback when an App is swiped to the app management window?</h4><p>When playing a video and swiping the App to the app management window, the video continues playing. Is there an event to listen for this swipe?  </p>
<p>Refer to window event listening: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#offwindowevent10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#offwindowevent10</a>  </p>
<p><strong>Demo</strong>:  </p>
<pre><code class="language-typescript">curWindow: window.Window | undefined = undefined;
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext
async aboutToAppear(): Promise&lt;void&gt; &#123;
  if (this.context) &#123;
  window.getLastWindow(getContext(this), (err, data) =&gt; &#123;
  this.curWindow = data
  if (this.curWindow) &#123;
  this.curWindow.on(&#39;windowEvent&#39;, (data) =&gt; &#123;
  console.info(&#39;Window event happened. Event:&#39; + JSON.stringify(data));
  if (data.toString() == &#39;6&#39;) &#123;
  this.videoPlayerModel.controller.pause();
&#125;
</code></pre>
<h4 id="3-Can-HarmonyOS-Refresh-trigger-pull-to-refresh-via-a-method-call"><a href="#3-Can-HarmonyOS-Refresh-trigger-pull-to-refresh-via-a-method-call" class="headerlink" title="3. Can HarmonyOS Refresh trigger pull-to-refresh via a method call?"></a>3. Can HarmonyOS Refresh trigger pull-to-refresh via a method call?</h4><p>Refresh can be triggered by controlling the <code>refreshing</code> parameter, which indicates whether the component is refreshing.  </p>
<p>Refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5#ZH-CN_TOPIC_0000001930756929__refreshoptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-refresh-V5#ZH-CN_TOPIC_0000001930756929__refreshoptions%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E</a>  </p>
<p><strong>Demo</strong>:  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct RefreshExample &#123;
  @State isRefreshing: boolean = false
  @State arr: String[] = [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;10&#39;]

  build() &#123;
    Column() &#123;
      Button(&#39;Refresh&#39;).onClick(()=&gt;&#123;
        this.isRefreshing = true
      &#125;)
      Refresh(&#123; refreshing: $$this.isRefreshing&#125;) &#123;
        List() &#123;
          ForEach(this.arr, (item: string) =&gt; &#123;
            ListItem() &#123;
              Text(&#39;&#39; + item)
                .width(&#39;100%&#39;).height(100).fontSize(16)
                .textAlign(TextAlign.Center).borderRadius(10).backgroundColor(0xFFFFFF)
            &#125;
          &#125;, (item: string) =&gt; item)
        &#125;
        .onScrollIndex((first: number) =&gt; &#123;
          console.info(first.toString())
        &#125;)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;)
        .divider(&#123;strokeWidth:1,color:Color.Yellow,startMargin:10,endMargin:10&#125;)
        .scrollBar(BarState.Off)
      &#125;
      .onStateChange((refreshStatus: RefreshStatus) =&gt; &#123;
        console.info(&#39;Refresh onStatueChange state is &#39; + refreshStatus)
      &#125;)
      .onOffsetChange((value: number) =&gt; &#123;
        console.info(&#39;Refresh onOffsetChange offset:&#39; + value)
      &#125;)
      .onRefreshing(() =&gt; &#123;
        setTimeout(() =&gt; &#123;
          this.isRefreshing = false
        &#125;, 2000)
        console.log(&#39;onRefreshing test&#39;)
      &#125;)
      .backgroundColor(0x89CFF0)
      .refreshOffset(64)
      .pullToRefresh(true)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-Does-the-HarmonyOS-Image-component-support-cache-loading"><a href="#4-Does-the-HarmonyOS-Image-component-support-cache-loading" class="headerlink" title="4. Does the HarmonyOS Image component support cache loading?"></a>4. Does the HarmonyOS Image component support cache loading?</h4><p>Does the official Image component support loading cached images when there is no network? For example, can an image be loaded from cache if a URL is set but no network is available?  </p>
<p>The Image component supports caching via <code>setImageRawDataCacheSize</code> and <code>setImageCacheCount</code>, using a built-in LRU strategy. When caching is enabled:  </p>
<ul>
<li>The first load reads the network image.  </li>
<li>Subsequent loads read from the cache.</li>
</ul>
<p>Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-app-V5#setimagecachecount7">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-app-V5#setimagecachecount7</a>  </p>
<h4 id="5-How-to-access-sandbox-paths-in-HarmonyOS-ArkTS"><a href="#5-How-to-access-sandbox-paths-in-HarmonyOS-ArkTS" class="headerlink" title="5. How to access sandbox paths in HarmonyOS ArkTS?"></a>5. How to access sandbox paths in HarmonyOS ArkTS?</h4><p>Local paths of sent image messages may be sandbox paths, but the Image control cannot display them directly.  </p>
<p><strong>Solution</strong>:<br>The Image component requires a sandbox URI instead of a path. Convert the sandbox path to a URI using <code>@ohos.file.fileuri.getUriFromPath(file.path)</code>:  </p>
<pre><code class="language-typescript">this.ImageUri = fileUri.getUriFromPath(ImagePath);
</code></pre>
<p>Refer to the API documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-file-fileuri-V5#ZH-CN_TOPIC_0000001884918402__fileurigeturifrompath">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-file-fileuri-V5#ZH-CN_TOPIC_0000001884918402__fileurigeturifrompath</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/320-Daily-HarmonyOS-Next-Knowledge-Asynchronous-Interface-Judgment-Event-Bubbling-Split-Screen-Disable-Long-Screenshot-Screenshot-Prevention/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/320-Daily-HarmonyOS-Next-Knowledge-Asynchronous-Interface-Judgment-Event-Bubbling-Split-Screen-Disable-Long-Screenshot-Screenshot-Prevention/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Asynchronous Interface Judgment, Event Bubbling, Split-Screen Disable, Long Screenshot, Screenshot Prevention</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:24:29 / Modified: 22:24:51" itemprop="dateCreated datePublished" datetime="2025-06-26T22:24:29+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Asynchronous-Interface-Judgment-Event-Bubbling-Split-Screen-Disable-Long-Screenshot-Screenshot-Prevention"><a href="#Daily-HarmonyOS-Next-Knowledge-Asynchronous-Interface-Judgment-Event-Bubbling-Split-Screen-Disable-Long-Screenshot-Screenshot-Prevention" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Asynchronous Interface Judgment, Event Bubbling, Split-Screen Disable, Long Screenshot, Screenshot Prevention"></a>[Daily HarmonyOS Next Knowledge] Asynchronous Interface Judgment, Event Bubbling, Split-Screen Disable, Long Screenshot, Screenshot Prevention</h3><h4 id="1-How-do-HarmonyOS-developers-independently-determine-if-an-interface-is-asynchronous"><a href="#1-How-do-HarmonyOS-developers-independently-determine-if-an-interface-is-asynchronous" class="headerlink" title="1. How do HarmonyOS developers independently determine if an interface is asynchronous?"></a>1. How do HarmonyOS developers independently determine if an interface is asynchronous?</h4><p><strong>How to independently determine an asynchronous interface?</strong>  </p>
<p>Asynchronous concurrency is implemented via Promise and async&#x2F;await. Interfaces using these implementations can be considered asynchronous. For details, refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/async-concurrency-overview-V5?catalogVersion=V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/async-concurrency-overview-V5?catalogVersion=V5</a>  </p>
<p>Promise and async&#x2F;await provide asynchronous concurrency capabilities and follow standard JS asynchronous syntax. Asynchronous code is suspended and resumed later, with only one code segment executing at a time. This suits single I&#x2F;O tasks like network requests or file read&#x2F;write operations, eliminating the need for additional threads.  </p>
<p>Asynchronous syntax is a programming language feature allowing programs to execute other operations without waiting for certain tasks to complete.  </p>
<p><strong>Promise</strong>: An object for handling asynchronous operations, converting them into a synchronous-like style for easier coding and maintenance. It uses a state mechanism to manage asynchronous phases and provides methods to register callbacks for successful or failed outcomes.  </p>
<ul>
<li><strong>Promise states</strong>: pending (in progress), fulfilled (completed), rejected (failed).  </li>
<li><strong>Basic usage</strong>: Instantiate via a constructor with an executor function taking <code>resolve</code> (success callback) and <code>reject</code> (failure callback). Example:</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">promise</span>: <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params"><span class="attr">resolve</span>: <span class="title class_">Function</span>, <span class="attr">reject</span>: <span class="title class_">Function</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">randomNumber</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">    <span class="keyword">if</span> (randomNumber &gt; <span class="number">0.5</span>) &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(randomNumber);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Random number is too small&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**async/await**: A Promise syntax sugar for handling asynchronous operations, simplifying and enhancing readability. Declare a function as asynchronous with `</span><span class="keyword">async</span><span class="string">` and use `</span><span class="keyword">await</span><span class="string">` to wait for Promise resolution.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- An `</span><span class="keyword">async</span><span class="string">` function returns a Promise, representing an asynchronous operation. `</span><span class="keyword">await</span><span class="string">` waits for Promise resolution and returns its value. If an exception is thrown, the returned Promise is rejected.  </span></span><br><span class="line"><span class="string">- Example simulating a synchronous-style asynchronous operation:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myAsyncFunction</span>(<span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">result</span>: <span class="built_in">string</span> = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params"><span class="attr">resolve</span>: <span class="title class_">Function</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">&#x27;Hello, world!&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(result); <span class="comment">// Output: Hello, world!</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">myAsyncFunction</span>();</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;res is: &quot;</span> + res);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How are event bubbling and event delegation implemented in HarmonyOS NEXT?  </span></span><br><span class="line"><span class="string">For event bubbling, refer to the documentation: https://gitee.com/sunfei2021/ace-test-source/blob/master/specs/event_spec.md#%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%E6%B5%81%E7%A8%8B  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Touch events include three complete phases:  </span></span><br><span class="line"><span class="string">- **Event touch test**: Triggered on touch down (TouchDown). Starting from the root node, a hit test finds the event distribution path via touch coordinates.  </span></span><br><span class="line"><span class="string">- **Event distribution**: Distributes events sequentially along the path generated by the touch test (gesture recognition occurs here).  </span></span><br><span class="line"><span class="string">- **Event response bubbling**: When reaching a leaf node, if the node can respond, the event triggers and bubbles up to parent nodes for response.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>mermaid</span><br><span class="line">graph <span class="variable constant_">TD</span></span><br><span class="line">    S[<span class="title class_">Start</span> <span class="keyword">from</span> root node] --&gt; A</span><br><span class="line">    A[<span class="title class_">Acquire</span> node] --&gt; B[<span class="title class_">Get</span> current touch point coordinates]</span><br><span class="line">    B --&gt; C[<span class="title class_">Process</span> affine transformation <span class="keyword">of</span> current node]</span><br><span class="line">    C --&gt; <span class="variable constant_">ENABLE</span>&#123;<span class="title class_">Is</span> event disabled?&#125;</span><br><span class="line">    <span class="variable constant_">ENABLE</span> --<span class="variable constant_">NO</span>--&gt; I&#123;<span class="title class_">HitTestMode</span> is <span class="title class_">None</span>?&#125;</span><br><span class="line">    <span class="variable constant_">ENABLE</span> -- <span class="variable constant_">YES</span> --&gt; G&#123;<span class="title class_">Is</span> there a next sibling?&#125;</span><br><span class="line">    I --<span class="variable constant_">YES</span>--&gt; H[<span class="title class_">Convert</span> touch point to child node coordinate system]</span><br><span class="line">    I --<span class="variable constant_">NO</span>--&gt; E&#123;<span class="title class_">Is</span> touch point within current node<span class="string">&#x27;s hit area?&#125;</span></span><br><span class="line"><span class="string">    E -- YES --&gt; F[Add current node to event distribution list]</span></span><br><span class="line"><span class="string">    E -- NO --&gt; G</span></span><br><span class="line"><span class="string">    F --&gt; H</span></span><br><span class="line"><span class="string">    H --&gt; D&#123;HitTestMode is Block?&#125;</span></span><br><span class="line"><span class="string">    D --YES--&gt; L</span></span><br><span class="line"><span class="string">    D --NO--&gt; K&#123;Are there child nodes?&#125;</span></span><br><span class="line"><span class="string">    G --YES--&gt; A</span></span><br><span class="line"><span class="string">    G --NO--&gt; L&#123;Is there a parent node?&#125;</span></span><br><span class="line"><span class="string">    K --YES--&gt; A</span></span><br><span class="line"><span class="string">    K --NO--&gt; L</span></span><br><span class="line"><span class="string">    L --YES--&gt; M&#123;Parent node HitTestMode is None or Transparent?&#125;</span></span><br><span class="line"><span class="string">    L --NO--&gt; J[End]</span></span><br><span class="line"><span class="string">    M --YES--&gt; G</span></span><br><span class="line"><span class="string">    M --NO--&gt; L</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Touch test process specifications**:  </span></span><br><span class="line"><span class="string">- Touch testing is required only for single-point touch down (TouchDown).  </span></span><br><span class="line"><span class="string">- The starting node is the window root, with coordinates relative to the window.  </span></span><br><span class="line"><span class="string">- Subsequent tests use coordinates relative to the parent node.  </span></span><br><span class="line"><span class="string">- Check if the touch point falls within the node&#x27;</span>s hit <span class="title function_">area</span> (set by <span class="string">`responseRegion`</span>, defaulting to the display area).  </span><br><span class="line">- <span class="title class_">The</span> <span class="keyword">default</span> hit area includes the border.  </span><br><span class="line">- <span class="title class_">Consider</span> the node<span class="string">&#x27;s graphic transformations relative to the parent.  </span></span><br><span class="line"><span class="string">- Account for `hitTestBehavior` (general attribute) and `enabled` (blocks self-testing, not siblings).  </span></span><br><span class="line"><span class="string">- Siblings are traversed in descending order of `zIndex` (or reverse order if no `zIndex`).  </span></span><br><span class="line"><span class="string">- Nodes meeting test conditions form a distribution tree for subsequent event distribution.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to disable app split-screen or floating window display in HarmonyOS?  </span></span><br><span class="line"><span class="string">**Disable split-screen or floating window display by setting `supportWindowMode`**: Identifies the window modes supported by the UIAbility component. Values include:  </span></span><br><span class="line"><span class="string">- `fullscreen`: Full-screen mode.  </span></span><br><span class="line"><span class="string">- `split`: Split-screen mode.  </span></span><br><span class="line"><span class="string">- `floating`: Floating window mode.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5#abilities%E6%A0%87%E7%AD%BE  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To disable split-screen/floating window, set `supportWindowMode` to `[&quot;fullscreen&quot;]`.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. When taking a long screenshot in HarmonyOS, why does the underlying page get captured if multiple pages reuse the same ID?  </span></span><br><span class="line"><span class="string">When using the screenshot component, ensure unique component IDs. Reusing IDs will reference the first component.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to prevent screenshots in HarmonyOS?  </span></span><br><span class="line"><span class="string">To enable screenshot prevention on a specific page, follow these steps and refer to the demo:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. **Declare permission in module.json5**:  </span></span><br><span class="line"><span class="string">```json</span></span><br><span class="line"><span class="string">&quot;requestPermissions&quot;: [</span></span><br><span class="line"><span class="string">  &#123;</span></span><br><span class="line"><span class="string">    &quot;name&quot;: &quot;ohos.permission.PRIVACY_WINDOW&quot;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. **Sample code**:  </span></span><br><span class="line"><span class="string">```typescript</span></span><br><span class="line"><span class="string">// windowUtils.ets</span></span><br><span class="line"><span class="string">import window from &#x27;</span><span class="meta">@ohos</span>.<span class="property">window</span><span class="string">&#x27;;</span></span><br><span class="line"><span class="string">import common from &#x27;</span><span class="meta">@ohos</span>.<span class="property">app</span>.<span class="property">ability</span>.<span class="property">common</span><span class="string">&#x27;;</span></span><br><span class="line"><span class="string">export class windowUtils &#123;</span></span><br><span class="line"><span class="string">  static setWindowPrivacyModeInPage(context: common.UIAbilityContext, isFlag: boolean) &#123;</span></span><br><span class="line"><span class="string">    window.getLastWindow(context).then((lastWindow)=&gt;&#123;</span></span><br><span class="line"><span class="string">      lastWindow.setWindowPrivacyMode(isFlag);</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// Page</span></span><br><span class="line"><span class="string">import common from &#x27;</span><span class="meta">@ohos</span>.<span class="property">app</span>.<span class="property">ability</span>.<span class="property">common</span><span class="string">&#x27;;</span></span><br><span class="line"><span class="string">import &#123; windowUtils &#125; from &#x27;</span>../common/windowUtils<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">@Entry</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">struct Index3 &#123;</span></span><br><span class="line"><span class="string">  @State message: string = &#x27;</span><span class="title class_">Hello</span> <span class="title class_">World</span><span class="string">&#x27;;</span></span><br><span class="line"><span class="string">  onPageShow(): void &#123;</span></span><br><span class="line"><span class="string">    windowUtils.setWindowPrivacyModeInPage(getContext(this) as common.UIAbilityContext, true);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  onPageHide() &#123;</span></span><br><span class="line"><span class="string">    windowUtils.setWindowPrivacyModeInPage(getContext(this) as common.UIAbilityContext, false);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  build() &#123;</span></span><br><span class="line"><span class="string">    Row() &#123;</span></span><br><span class="line"><span class="string">      Column() &#123;</span></span><br><span class="line"><span class="string">        Text(this.message)</span></span><br><span class="line"><span class="string">          .fontSize(50)</span></span><br><span class="line"><span class="string">          .fontWeight(FontWeight.Bold)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .width(&#x27;</span><span class="number">100</span>%<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .height(&#x27;</span><span class="number">100</span>%<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/319-Daily-HarmonyOS-Next-Knowledge-Text-Height-Calculation-Control-Background-Animation-Dotted-Line-Functionality-Screenshot-Prevention-Entry-Home-Page-Replacement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/319-Daily-HarmonyOS-Next-Knowledge-Text-Height-Calculation-Control-Background-Animation-Dotted-Line-Functionality-Screenshot-Prevention-Entry-Home-Page-Replacement/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Text Height Calculation, Control Background Animation, Dotted Line Functionality, Screenshot Prevention, Entry Home Page Replacement</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:23:08 / Modified: 22:29:04" itemprop="dateCreated datePublished" datetime="2025-06-26T22:23:08+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Text-Height-Calculation-Control-Background-Animation-Dotted-Line-Functionality-Screenshot-Prevention-Entry-Home-Page-Replacement"><a href="#Daily-HarmonyOS-Next-Knowledge-Text-Height-Calculation-Control-Background-Animation-Dotted-Line-Functionality-Screenshot-Prevention-Entry-Home-Page-Replacement" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Text Height Calculation, Control Background Animation, Dotted Line Functionality, Screenshot Prevention, Entry Home Page Replacement"></a>[Daily HarmonyOS Next Knowledge] Text Height Calculation, Control Background Animation, Dotted Line Functionality, Screenshot Prevention, Entry Home Page Replacement</h3><h4 id="1-How-to-calculate-the-height-of-a-HarmonyOS-Text-component"><a href="#1-How-to-calculate-the-height-of-a-HarmonyOS-Text-component" class="headerlink" title="1. How to calculate the height of a HarmonyOS Text component?"></a>1. How to calculate the height of a HarmonyOS Text component?</h4><p>When the backend returns copy, the height of the displayed text needs to be calculated based on its width.  </p>
<p>Use <code>measure.measureTextSize</code> to calculate text height. Reference documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-measure-V5</a>  </p>
<p>The <code>@ohos.measure</code> module provides text width and height calculations:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MeasureText</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">textSize</span>: <span class="title class_">SizeOptions</span> = <span class="title class_">MeasureText</span>.<span class="title function_">measureTextSize</span>(&#123;</span><br><span class="line">    <span class="comment">// It is recommended to use this.getUIContext().getMeasureUtils().measureText()</span></span><br><span class="line">    <span class="attr">textContent</span>: <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="string">&#x27;50px&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`The width of &#x27;Hello World&#x27;: <span class="subst">$&#123;<span class="variable language_">this</span>.textSize.width&#125;</span>`</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`The height of &#x27;Hello World&#x27;: <span class="subst">$&#123;<span class="variable language_">this</span>.textSize.height&#125;</span>`</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to animate a control&#x27;s background using linearGradient and animation when a Column appears in HarmonyOS?  </span></span><br><span class="line"><span class="string">The following animation approach is ineffective:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Row</span>()</span><br><span class="line">  .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;32lpx&#x27;</span>)</span><br><span class="line">  .<span class="title function_">animatableBgColor</span>(<span class="variable language_">this</span>.<span class="title function_">bgColor</span>(item.<span class="property">type</span>), <span class="variable language_">this</span>.<span class="property">animationVal</span>)</span><br><span class="line">  .<span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">        <span class="attr">delay</span>: <span class="number">200</span>, <span class="attr">onFinish</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">animationVal</span> = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">animationVal</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@AnimatableExtend</span>(<span class="title class_">Row</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animatableBgColor</span>(<span class="params"><span class="attr">colors</span>: <span class="built_in">string</span>[], <span class="attr">position</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  .<span class="title function_">linearGradient</span>(position === <span class="number">0</span> ? &#123;</span><br><span class="line">    <span class="attr">colors</span>: [</span><br><span class="line">      [<span class="string">&#x27;#00000000&#x27;</span>, <span class="number">0.0</span>],</span><br><span class="line">      [<span class="string">&#x27;#00000000&#x27;</span>, <span class="number">1.0</span>],</span><br><span class="line">    ]</span><br><span class="line">  &#125; : &#123;</span><br><span class="line">    <span class="attr">angle</span>: <span class="number">90</span>,</span><br><span class="line">    <span class="attr">colors</span>: [</span><br><span class="line">      [colors[<span class="number">0</span>], <span class="number">0.0</span>],</span><br><span class="line">      [colors[<span class="number">1</span>], position],</span><br><span class="line">      [colors[<span class="number">2</span>], <span class="number">1.0</span>],</span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Refer to the demo below:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">linearGradientParam</span>: <span class="built_in">number</span> = <span class="number">0.1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">animationVal</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">flage</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Test&#x27;</span>).<span class="title function_">fontSize</span>(<span class="string">&#x27;32lpx&#x27;</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;228lpx&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;88lpx&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      <span class="comment">// Set the color to transparent</span></span><br><span class="line">      .<span class="title function_">linearGradient</span>(&#123;</span><br><span class="line">        <span class="attr">angle</span>: <span class="string">&#x27;109.26deg&#x27;</span>,</span><br><span class="line">        <span class="attr">colors</span>: [</span><br><span class="line">          [<span class="variable language_">this</span>.<span class="property">animationVal</span> === <span class="number">0</span> ? <span class="title class_">Color</span>.<span class="property">Transparent</span> : (<span class="variable language_">this</span>.<span class="property">flage</span> ? <span class="title class_">Color</span>.<span class="property">Transparent</span> : <span class="string">&#x27;#008c8c&#x27;</span>), <span class="number">0.1</span>],</span><br><span class="line">          [<span class="variable language_">this</span>.<span class="property">animationVal</span> === <span class="number">0</span> ? <span class="title class_">Color</span>.<span class="property">Transparent</span> : (<span class="variable language_">this</span>.<span class="property">flage</span> ? <span class="title class_">Color</span>.<span class="property">Transparent</span> : <span class="string">&#x27;rgba(255, 255, 255, 0.4)&#x27;</span>), <span class="number">0.5</span>],</span><br><span class="line">        ]</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">onAppear</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;console&#x27;</span>, <span class="variable language_">this</span>.<span class="property">animationVal</span>);</span><br><span class="line">        <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">2000</span>, <span class="attr">onFinish</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;animation finish&quot;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">animationVal</span> = <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;click&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;console&#x27;</span>, <span class="variable language_">this</span>.<span class="property">animationVal</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aboutToAppear&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">animationVal</span> === <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">flage</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">2000</span>, <span class="attr">onFinish</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;animation finish&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">animationVal</span> = <span class="number">0</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">animateTo</span>(&#123;</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">2000</span>, <span class="attr">onFinish</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;animation finish&quot;</span>)</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">flage</span> = !<span class="variable language_">this</span>.<span class="property">flage</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">animationVal</span> = <span class="number">1</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. How to implement dotted lines in HarmonyOS?  </span></span><br><span class="line"><span class="string">Refer to the demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">Divider</span>().<span class="title function_">height</span>(<span class="number">0</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: &#123;<span class="attr">left</span>:<span class="number">0</span>,<span class="attr">right</span>:<span class="number">0</span>,<span class="attr">top</span>:<span class="number">0</span>,<span class="attr">bottom</span>:<span class="number">2</span>&#125;,<span class="attr">color</span>:<span class="title class_">Color</span>.<span class="property">Grey</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dashed</span> &#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. Why can screenshots still be taken after setting setWindowPrivacyMode in HarmonyOS?  </span></span><br><span class="line"><span class="string">Check if the following code is added to module.json5. `</span>setWindowPrivacyMode<span class="string">` requires the `</span>ohos.<span class="property">permission</span>.<span class="property">PRIVACY_WINDOW</span><span class="string">` permission:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span> : <span class="string">&quot;ohos.permission.PRIVACY_WINDOW&quot;</span>&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to replace the home page in an entry in HarmonyOS?  </span></span><br><span class="line"><span class="string">Using `</span>router.<span class="title function_">replaceUrl</span>(&#123;<span class="attr">url</span>: <span class="string">&#x27;pages/Home&#x27;</span>&#125;)<span class="string">` in the entry can only find routes within the entry&#x27;s HSP. To navigate to pages in shared packages (HAR/HSP), use named routes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-routing-V5#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Steps for shared package routing**:  </span></span><br><span class="line"><span class="string">1. In the shared package (HAR/HSP) page to which you want to navigate, name the @Entry-decorated component:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// library/src/main/ets/pages/Index.ets</span></span><br><span class="line"><span class="meta">@Entry</span>(&#123; <span class="attr">routeName</span>: <span class="string">&#x27;myPage&#x27;</span> &#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Library Page&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. Import the named route in the source page and use `</span>pushNamedRoute<span class="string">`:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@ohos/library/src/main/ets/pages/Index&#x27;</span>; <span class="comment">// Import the named route page in the shared package</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">getUIContext</span>().<span class="title function_">getRouter</span>().<span class="title function_">pushNamedRoute</span>(&#123;</span><br><span class="line">              <span class="attr">name</span>: <span class="string">&#x27;myPage&#x27;</span>,</span><br><span class="line">              <span class="attr">params</span>: &#123;</span><br><span class="line">                <span class="attr">data1</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">data2</span>: &#123;</span><br><span class="line">                  <span class="attr">data3</span>: [<span class="number">123</span>, <span class="number">456</span>, <span class="number">789</span>]</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="keyword">let</span> message = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span></span><br><span class="line">            <span class="keyword">let</span> code = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`pushNamedRoute failed, code is <span class="subst">$&#123;code&#125;</span>, message is <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/318-Daily-HarmonyOS-Next-Knowledge-Popup-Issues-Transparent-Background-Setting-any-Type-Problem-Combination-Gestures-for-Swipe-and-Drag-Desktop-Icon-Specifications/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/318-Daily-HarmonyOS-Next-Knowledge-Popup-Issues-Transparent-Background-Setting-any-Type-Problem-Combination-Gestures-for-Swipe-and-Drag-Desktop-Icon-Specifications/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Popup Issues, Transparent Background Setting, any Type Problem, Combination Gestures for Swipe and Drag, Desktop Icon Specifications</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:21:31 / Modified: 22:22:20" itemprop="dateCreated datePublished" datetime="2025-06-26T22:21:31+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Popup-Issues-Transparent-Background-Setting-any-Type-Problem-Combination-Gestures-for-Swipe-and-Drag-Desktop-Icon-Specifications"><a href="#Daily-HarmonyOS-Next-Knowledge-Popup-Issues-Transparent-Background-Setting-any-Type-Problem-Combination-Gestures-for-Swipe-and-Drag-Desktop-Icon-Specifications" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Popup Issues, Transparent Background Setting, any Type Problem, Combination Gestures for Swipe and Drag, Desktop Icon Specifications"></a>[Daily HarmonyOS Next Knowledge] Popup Issues, Transparent Background Setting, any Type Problem, Combination Gestures for Swipe and Drag, Desktop Icon Specifications</h3><h4 id="1-Problems-with-HarmonyOS-bindPopup"><a href="#1-Problems-with-HarmonyOS-bindPopup" class="headerlink" title="1. Problems with HarmonyOS bindPopup?"></a>1. Problems with HarmonyOS bindPopup?</h4><p>Added a Popup for long-pressing each ListItem.  </p>
<p><strong>Problem 1</strong>: When using a @state variable at the outer level, long-pressing triggers multiple Popups. How to listen and display the Popup for the specific item pressed?  </p>
<p><strong>Problem 2</strong>: After clicking a Popup to delete the current item, how to listen for Popup clicks and make the Popup disappear after deletion?  </p>
<p>Refer to the following demo:  </p>
<pre><code class="language-typescript">import &#123; router &#125; from &#39;@kit.ArkUI&#39;
import &#123; BusinessError &#125; from &#39;@kit.BasicServicesKit&#39;

@Entry
@Component
export struct Index &#123;
  @State list: stockListData = new stockListData([])

  aboutToAppear(): void &#123;
    const list: ItemInfo[] = []
    for (let i = 0; i &lt; 50; ++i) &#123;
      let stockName = &quot;item&quot; + i
      let bgState = 0
      list.push(new ItemInfo(stockName, bgState))
    &#125;
    this.list.modifyAllData(list)

  &#125;

  build() &#123;
    Column() &#123;
      Text(&quot;Start&quot;).height(&#39;50&#39;)
        .width(&#39;100%&#39;).onClick(() =&gt; &#123;
      &#125;)
      List(&#123; space: 10 &#125;) &#123;
        LazyForEach(this.list, (info: ItemInfo, index: number) =&gt; &#123;
          ListItem() &#123;
            ItemView(&#123;
              info: info, itemFun: (name) =&gt; &#123;
                let itemIndex = 0
                for (let im of this.list.getAllData()) &#123;
                  if (im.stockName === name) &#123;
                    break
                  &#125;
                  itemIndex++
                &#125;
                console.info(&quot;animate--ItemView--aboutToReuse---delete Name=&quot; + name)
                this.list.getAllData().splice(itemIndex, 1)
                this.list.notifyDataDelete(itemIndex)
              &#125;
            &#125;)
              .onClick(() =&gt; &#123;
              &#125;)
          &#125;.height(&#39;80&#39;)
        &#125;, (info: ItemInfo, index: number) =&gt; info.stockName + &quot;type&quot; + index)
      &#125;
      .height(&#39;100%&#39;)
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;

@Reusable
@Component
struct ItemView &#123;
  @Prop info: ItemInfo
  private lastName: string = &quot;&quot;

  aboutToAppear(): void &#123;
    this.lastName = this.info.stockName
  &#125;

  aboutToReuse(params: Record&lt;string, Object&gt;): void &#123;
    console.info(&quot;animate--ItemView--aboutToReuse---name=&quot; + this.info.stockName + &quot;,lastName=&quot; + this.lastName)

    this.lastName = this.info.stockName
  &#125;

  @State customPopup: boolean = false
  itemFun: (name: string) =&gt; void = (name) =&gt; &#123;
  &#125;

  @Builder
  popItemsView() &#123;
    Text(&quot;qipao pop&quot;).onClick(() =&gt; &#123;
      this.customPopup = !this.customPopup
      this.itemFun(this.info.stockName)
    &#125;)
  &#125;

  build() &#123;
    Column() &#123;
      Flex(&#123; justifyContent: FlexAlign.Center, alignItems: ItemAlign.Center &#125;) &#123;
        Column() &#123;
          Text(this.info.stockName)
            .maxFontSize(&#39;16&#39;)
            .minFontSize(&#39;8&#39;)
            .maxLines(1)
            .margin(&#123; bottom: 2 &#125;)
        &#125;
        .width(&#39;36.27%&#39;)
        .alignItems(HorizontalAlign.Start)
        .padding(&#123; left: &#39;16&#39;, right: 8 &#125;)
      &#125;
      .backgroundColor(&quot;#00ffea&quot;)
      .height(&#39;100%&#39;)
    &#125;
    .bindPopup(this.customPopup, &#123;
      builder: this.popItemsView, // Popup content
      placement: Placement.Top, // Popup position
      offset: &#123; x: 0, y: 30 &#125;,
      radius: 12,
      popupColor: Color.Pink, // Popup background color
      onStateChange: (e) =&gt; &#123;
        console.info(&#39;tag&#39;, JSON.stringify(e.isVisible))
        if (!e.isVisible) &#123;
          this.customPopup = false
          // this.bgColor = this.info.topStatus == 1 ? $r(&#39;app.color.dialog_background&#39;) : $r(&#39;app.color.start_window_background&#39;)
        &#125; else &#123;
          this.customPopup = true
          // this.bgColor = $r(&#39;app.color.dialog_button&#39;)
        &#125;
      &#125;
    &#125;)
    .gesture(
      LongPressGesture(&#123; repeat: false &#125;)// Setting repeat to true triggers continuous long-press events at intervals of duration (default 500ms)
        .onAction((event?: GestureEvent) =&gt; &#123;
          console.log(&quot;tag&quot;, &quot;LongPressGesture start event--customPopup=&quot; + this.customPopup)
          if (event) &#123;
            this.customPopup = !this.customPopup
          &#125;
          // if (event &amp;&amp; event.repeat) &#123;
          // &#125;
        &#125;)// Triggers when the long-press action ends
        .onActionEnd((event?: GestureEvent) =&gt; &#123;
          if (event) &#123;
          &#125;
        &#125;)
    )
  &#125;
&#125;

@Observed
class ItemInfo &#123;
  @Track
  stockName: string = &quot;--&quot;
  @Track
  bgState: number = 0

  constructor(name: string, bg: number) &#123;
    this.stockName = name
    this.bgState = bg
  &#125;
&#125;


class BasicDataSource implements IDataSource &#123;
  private listeners: DataChangeListener[] = [];

  public totalCount(): number &#123;
    return 0;
  &#125;

  public getData(index: number): ItemInfo | undefined &#123;
    return undefined;
  &#125;

  registerDataChangeListener(listener: DataChangeListener): void &#123;
    if (this.listeners.indexOf(listener) &lt; 0) &#123;
      this.listeners.push(listener);
    &#125;
  &#125;

  unregisterDataChangeListener(listener: DataChangeListener): void &#123;
    const position = this.listeners.indexOf(listener);
    if (position &gt;= 0) &#123;
      this.listeners.splice(position, 1);
    &#125;
  &#125;

  notifyDataReload(): void &#123;
    this.listeners.forEach((listener: DataChangeListener) =&gt; &#123;
      listener.onDataReloaded();
    &#125;)
  &#125;

  notifyDataAdd(index: number): void &#123;
    this.listeners.forEach((listener: DataChangeListener) =&gt; &#123;
      listener.onDataAdd(index);
    &#125;)
  &#125;

  notifyDataChange(index: number): void &#123;
    this.listeners.forEach((listener: DataChangeListener) =&gt; &#123;
      listener.onDataChange(index);
    &#125;)
  &#125;

  notifyDataDelete(index: number): void &#123;
    this.listeners.forEach((listener: DataChangeListener) =&gt; &#123;
      listener.onDataDelete(index);
    &#125;)
  &#125;

  notifyDataMove(from: number, to: number): void &#123;
    this.listeners.forEach((listener: DataChangeListener) =&gt; &#123;
      listener.onDataMove(from, to);
    &#125;)
  &#125;
&#125;

export class stockListData extends BasicDataSource &#123;
  private listData: ItemInfo[] = [];

  constructor(dataArray: ItemInfo[]) &#123;
    super()
    this.listData = dataArray;
  &#125;

  public totalCount(): number &#123;
    return this.listData.length;
  &#125;

  public getAllData(): ItemInfo[] &#123;
    return this.listData;
  &#125;

  public getData(index: number): ItemInfo &#123;
    return this.listData[index];
  &#125;

  public modifyAllData(data: ItemInfo[]): void &#123;
    this.listData = data
    this.notifyDataReload()
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-set-a-transparent-background-for-a-HarmonyOS-Entry-page"><a href="#2-How-to-set-a-transparent-background-for-a-HarmonyOS-Entry-page" class="headerlink" title="2. How to set a transparent background for a HarmonyOS @Entry page?"></a>2. How to set a transparent background for a HarmonyOS @Entry page?</h4><p>For the router routing mode, refer to the following demo:  </p>
<pre><code class="language-typescript">// Page1.ets
import window from &#39;@ohos.window&#39;;

@Entry
@Component
struct Page2 &#123;
  @State message: string = &#39;page Page2&#39;;

  onPageHide() &#123;
    console.log(&quot;pageHide&quot;)
  &#125;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
        Button(&quot;pageB&quot;).onClick(() =&gt; &#123;
          let windowStege: window.WindowStage = AppStorage.get(&quot;windowStage&quot;) as window.WindowStage;
          windowStege.createSubWindow(&quot;hello&quot;, (err, win) =&gt; &#123;
            win.setUIContent(&#39;pages/Page2&#39;);
            win.showWindow();
          &#125;)
        &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
    .backgroundColor(Color.Pink)
  &#125;
&#125;

// Page2.ets
import window from &#39;@ohos.window&#39;;

@Entry
@Component
struct Index &#123;
  @State message: string = &#39;page Index&#39;;

  aboutToAppear() &#123;
    window.findWindow(&quot;hello&quot;).setWindowBackgroundColor(&quot;#00000000&quot;)
  &#125;

  onBackPress() &#123;
    window.findWindow(&quot;hello&quot;).destroyWindow().then((res) =&gt; &#123;
      console.log(&quot;destroyWindow success&quot;)
    &#125;).catch(() =&gt; &#123;
      console.log(&quot;destroyWindow fail&quot;)
    &#125;)
    return true
  &#125;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
      &#125;
      .width(&#39;100%&#39;)
      .backgroundColor(Color.Red)
    &#125;
    .alignItems(VerticalAlign.Top)
    .height(&#39;100%&#39;)
    .backgroundColor(&quot;#80ffffff&quot;)
  &#125;
&#125;

// Note: Add the key code in EntryAbility
onWindowStageCreate(windowStage: window.WindowStage): void &#123;
  // Main window is created, set main page for this ability
  hilog.info(0x0000, &#39;testTag&#39;, &#39;%&#123;public&#125;s&#39;, &#39;Ability onWindowStageCreate&#39;);

  windowStage.loadContent(&#39;pages/Page231206095213071&#39;, (err, data) =&gt; &#123;
  if (err.code) &#123;
  hilog.error(0x0000, &#39;testTag&#39;, &#39;Failed to load the content. Cause: %&#123;public&#125;s&#39;, JSON.stringify(err) ?? &#39;&#39;);
  return;
&#125;
AppStorage.setAndLink(&quot;windowStage&quot;, windowStage);// Key code
hilog.info(0x0000, &#39;testTag&#39;, &#39;Succeeded in loading the content. Data: %&#123;public&#125;s&#39;, JSON.stringify(data) ?? &#39;&#39;);
&#125;);
&#125;
</code></pre>
<p>AppStorage.setAndLink(“windowStage”, windowStage);&#x2F;&#x2F; This key code configures windowStage.loadContent(‘pages&#x2F;page1’). The demo shows Page1 jumping to Page2, where Page2 has a transparent effect.  </p>
<h4 id="3-In-HarmonyOS-ArkTS-ArkUI-how-to-define-generics-when-any-null-etc-cannot-be-used-and-parameters-may-be-arrays-objects-or-multi-level-structures"><a href="#3-In-HarmonyOS-ArkTS-ArkUI-how-to-define-generics-when-any-null-etc-cannot-be-used-and-parameters-may-be-arrays-objects-or-multi-level-structures" class="headerlink" title="3. In HarmonyOS ArkTS ArkUI, how to define generics when any, null, etc., cannot be used, and parameters may be arrays, objects, or multi-level structures?"></a>3. In HarmonyOS ArkTS ArkUI, how to define generics when any, null, etc., cannot be used, and parameters may be arrays, objects, or multi-level structures?</h4><p>ArkTS does not support <code>any</code>, <code>undefined</code>, or <code>unknown</code> types. Explicitly specify specific types.  </p>
<p><strong>Modification solutions</strong>:  </p>
<ol>
<li>All variables should explicitly specify their specific types.  </li>
<li>For literals, use <code>Record&lt;&gt;</code> with <code>as</code> to specify types.</li>
</ol>
<p><strong>How to define generics for component parameters</strong>:<br>Refer to the demo:  </p>
<pre><code class="language-typescript">let strArr: string[] = [&quot;java&quot;, &quot;python&quot;, &quot;C++&quot;] 
let intArr: number[] = [1, 2, 3]
@Entry
@Component struct Index &#123;
  build() &#123;
    Row() &#123;
      Column() &#123;
        this.printArray(strArr) 
        Text(&#39;Divider&#39;)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .fontColor(Color.Green) 
        this.printArray(intArr)
      &#125;
      .width(&#39;100%&#39;) 
    &#125;
    .height(&#39;100%&#39;) 
  &#125;
  @Builder printArray&lt;T&gt;(arr: T[]) &#123;
    Column() &#123; 
      ForEach(arr, (item: T) =&gt; &#123;
        Text(String(item)) 
          .fontSize(50)
          .fontWeight(FontWeight.Bold) 
      &#125;, (item: string) =&gt; item) 
    &#125; 
  &#125; 
&#125;
</code></pre>
<h4 id="4-How-to-write-combination-gestures-for-a-control-to-recognize-swipe-and-drag-in-HarmonyOS-and-how-to-determine-the-swipe-direction"><a href="#4-How-to-write-combination-gestures-for-a-control-to-recognize-swipe-and-drag-in-HarmonyOS-and-how-to-determine-the-swipe-direction" class="headerlink" title="4. How to write combination gestures for a control to recognize swipe and drag in HarmonyOS, and how to determine the swipe direction?"></a>4. How to write combination gestures for a control to recognize swipe and drag in HarmonyOS, and how to determine the swipe direction?</h4><p>A control listens for gestures, directly operating on swipe and moving according to the drag distance on drag.  </p>
<p>Refer to the following demo:  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct Index &#123;
  @State offsetX: number = 0;
  @State offsetY: number = 0;
  @State count: number = 0;
  @State positionX: number = 0;
  @State positionY: number = 0;
  @State borderStyles: BorderStyle = BorderStyle.Solid
  build() &#123;
    Column() &#123;
      Text(&#39;sequence gesture\n&#39; + &#39;LongPress onAction:&#39; + this.count + &#39;\nPanGesture offset:\nX: &#39; + this.offsetX + &#39;\n&#39; + &#39;Y: &#39; + this.offsetY)
        .fontSize(28)
    &#125;
    // Binding the translate property enables component position movement
    .translate(&#123; x: this.offsetX, y: this.offsetY, z: 0 &#125;)
    .height(250)
    .width(300)
    // The following combination gestures are recognized in sequence; drag gestures will not trigger if long-press events do not fire normally
    .gesture(
      // Declare the combination gesture type as Sequence
      GestureGroup(GestureMode.Sequence,
        // The first trigger in the combination gesture is a long-press gesture, which can respond multiple times
        LongPressGesture(&#123; repeat: true &#125;)
          // When the long-press gesture is recognized, increment the count displayed on the Text component
          .onAction((event: GestureEvent|undefined) =&gt; &#123;
            if(event)&#123;
              if (event.repeat) &#123;
                this.count++;
              &#125;
            &#125;
            console.info(&#39;LongPress onAction&#39;);
          &#125;)
          .onActionEnd(() =&gt; &#123;
            console.info(&#39;LongPress end&#39;);
          &#125;),
        // When dragging after a long-press, the PanGesture is triggered
        PanGesture()
          .onActionStart(() =&gt; &#123;
            this.borderStyles = BorderStyle.Dashed;
            console.info(&#39;pan start&#39;);
          &#125;)
            // When the gesture is triggered, modify the component&#39;s displacement based on the drag distance from the callback
          .onActionUpdate((event: GestureEvent|undefined) =&gt; &#123;
            if(event)&#123;
              this.offsetX = this.positionX + event.offsetX;
              this.offsetY = this.positionY + event.offsetY;
            &#125;
            console.info(&#39;pan update&#39;);
          &#125;)
          .onActionEnd(() =&gt; &#123;
            this.positionX = this.offsetX;
            this.positionY = this.offsetY;
            this.borderStyles = BorderStyle.Solid;
          &#125;)
      )
    )
  &#125;
&#125;
</code></pre>
<h4 id="5-Are-there-specifications-or-documentation-for-HarmonyOS-desktop-icons"><a href="#5-Are-there-specifications-or-documentation-for-HarmonyOS-desktop-icons" class="headerlink" title="5. Are there specifications or documentation for HarmonyOS desktop icons?"></a>5. Are there specifications or documentation for HarmonyOS desktop icons?</h4><p>For desktop icon and launch page icon resolution specifications, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/design-guides-V1/app-icon-0000001188065088-V1">https://developer.huawei.com/consumer/cn/doc/design-guides-V1/app-icon-0000001188065088-V1</a>  </p>
<p>HarmonyOS app icon design aims to return to basics, accurately conveying functions, services, and branding through modern semantic expression. Visually, it balances aesthetics and recognizability; formally, it is inclusive and harmonious yet distinct.  </p>
<p><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.03.18.png"></p>
<p>HarmonyOS app icons follow these design principles:  </p>
<ol>
<li><strong>Conciseness and Elegance</strong>: Simple element icons with elegant line expressions convey design aesthetics.  </li>
<li><strong>Rapid Meaning Conveyance</strong>: Icon graphics accurately communicate functions, services, and branding, with readability and recognizability.  </li>
<li><strong>Emotional Expression</strong>: Summarize emotional expression through graphics and colors to convey brand visual identity.</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">200</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
