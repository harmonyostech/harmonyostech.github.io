<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/A-Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C/" class="post-title-link" itemprop="url">Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 14:13:57 / Modified: 14:16:36" itemprop="dateCreated datePublished" datetime="2025-06-27T14:13:57+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C"><a href="#Mastering-DevEco-Studio-Efficiently-Implementing-Glue-Code-Between-ArkTS-and-C" class="headerlink" title="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++"></a>Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++</h1><h3 id="1-Background-Introduction"><a href="#1-Background-Introduction" class="headerlink" title="1. Background Introduction"></a>1. Background Introduction</h3><p>HarmonyOS primarily offers two development languages: ArkTS and C++.</p>
<ul>
<li><p><strong>ArkTS</strong> is the preferred main application development language for HarmonyOS. It extends the TypeScript (TS) ecosystem with additional features tailored for application development, maintaining the basic style of TS while enhancing static checks and analysis during development through standardized definitions. This improves program stability and performance. ArkTS is well-suited for efficient UI interface development scenarios.</p>
</li>
<li><p><strong>C++</strong> is supported through the NDK (Native Development Kit) toolset. The NDK is a collection of native APIs, corresponding compilation scripts, and toolchains provided by the HarmonyOS SDK, enabling developers to implement critical application functionalities using C or C++. The NDK only covers some of HarmonyOS’s basic underlying capabilities, such as the C runtime base library (libc), graphics libraries, window systems, multimedia, compression libraries, and Node-API for cross-language interoperability between ArkTS&#x2F;JS and C. It does not provide the complete capabilities of ArkTS&#x2F;JS APIs. C++ is suitable for the following scenarios:</p>
<ul>
<li>Performance-sensitive scenarios, such as gaming and physics simulations, which are compute-intensive.</li>
<li>Scenarios requiring the reuse of existing C or C++ libraries.</li>
<li>Scenarios needing specialized libraries tailored to CPU features, such as Neon acceleration.</li>
</ul>
</li>
</ul>
<p>Some capabilities in HarmonyOS are only available through C++ interfaces, such as audio and video encoding&#x2F;decoding. Notably, the latest HarmonyOS 5.0.1 version primarily introduces new capabilities through C APIs. To fully leverage HarmonyOS’s capabilities and become a proficient HarmonyOS developer, mastering mixed development with ArkTS and C++ is essential.</p>
<p>Calling C++ from ArkTS involves a series of complex processes. This article focuses on introducing a one-click tool provided by DevEco Studio to generate cross-language “glue” code, helping developers improve efficiency.</p>
<h3 id="2-ArkTS-Calling-C-Methods-Process"><a href="#2-ArkTS-Calling-C-Methods-Process" class="headerlink" title="2. ArkTS Calling C++ Methods Process"></a>2. ArkTS Calling C++ Methods Process</h3><p>Similar to Android’s JNI, HarmonyOS enables ArkTS to call C++ methods primarily through NAPI. This section uses a Native C++ project demo created in DevEco Studio to illustrate the process of ArkTS calling C++ methods. The following diagram shows the code structure after creating a Native C++ project:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++"></p>
<p>The project mainly consists of three parts:</p>
<ul>
<li><p><strong>types</strong>:</p>
<ul>
<li><code>Index.d.ts</code>: Contains the C++ interfaces exposed to ArkTS.</li>
<li><code>oh-package.json5</code>: Specifies the dynamic library name and the path to the <code>Index.d.ts</code> file.</li>
</ul>
</li>
<li><p><strong>CMakeLists.txt</strong>: The C++ code build script.</p>
</li>
<li><p><strong>napi_init.cpp</strong>: The C++ implementation code.</p>
</li>
</ul>
<p>Developing a Native module generally involves implementing the corresponding modules mentioned above.</p>
<h4 id="2-1-Declaring-C-Interfaces-in-Index-d-ts"><a href="#2-1-Declaring-C-Interfaces-in-Index-d-ts" class="headerlink" title="2.1 Declaring C++ Interfaces in Index.d.ts"></a>2.1 Declaring C++ Interfaces in Index.d.ts</h4><p>The declared functions are used for both C++ implementation and ArkTS calls.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">add</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-Registering-and-Implementing-Declared-Methods-in-C"><a href="#2-2-Registering-and-Implementing-Declared-Methods-in-C" class="headerlink" title="2.2 Registering and Implementing Declared Methods in C++"></a>2.2 Registering and Implementing Declared Methods in C++</h4><p>First, register the methods declared in <code>Index.d.ts</code> in the NAPI’s <code>Init</code> method:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">EXTERN_C_START  </span></span><br><span class="line"><span class="function"><span class="type">static</span> napi_value <span class="title">Init</span><span class="params">(napi_env env, napi_value exports)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    napi_property_descriptor desc[] = &#123;  </span><br><span class="line">        &#123; <span class="string">&quot;add&quot;</span>, <span class="literal">nullptr</span>, Add, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, napi_default, <span class="literal">nullptr</span> &#125;  </span><br><span class="line">    &#125;;  </span><br><span class="line">    <span class="built_in">napi_define_properties</span>(env, exports, <span class="built_in">sizeof</span>(desc) / <span class="built_in">sizeof</span>(desc[<span class="number">0</span>]), desc);  </span><br><span class="line">    <span class="keyword">return</span> exports;  </span><br><span class="line">&#125;  </span><br><span class="line">EXTERN_C_END</span><br></pre></td></tr></table></figure>

<p><code>napi_property_descriptor</code> is an array that can implement multiple methods. In the example, the string <code>&quot;add&quot;</code> represents the <code>add</code> method declared in <code>Index.d.ts</code>, and the third parameter <code>Add</code> is the name of the method implemented in C++. Next, implement the <code>Add</code> method:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> napi_value <span class="title">Add</span><span class="params">(napi_env env, napi_callback_info info)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="type">size_t</span> argc = <span class="number">2</span>;  </span><br><span class="line">    napi_value args[<span class="number">2</span>] = &#123;<span class="literal">nullptr</span>&#125;;  </span><br><span class="line">  </span><br><span class="line">    <span class="built_in">napi_get_cb_info</span>(env, info, &amp;argc, args , <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype0;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">0</span>], &amp;valuetype0);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype1;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">1</span>], &amp;valuetype1);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value0;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">0</span>], &amp;value0);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value1;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">1</span>], &amp;value1);  </span><br><span class="line">  </span><br><span class="line">    napi_value sum;  </span><br><span class="line">    <span class="built_in">napi_create_double</span>(env, value0 + value1, &amp;sum);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> sum;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The structure of the NAPI implementation method is fixed. The return value must be <code>napi_value</code>, and the parameters must be <code>napi_env</code> and <code>napi_callback_info</code>. The method parses specific parameter information from <code>napi_callback_info</code> to implement the desired functionality.</p>
<h4 id="2-3-Configuring-the-Dynamic-Library-Name-and-C-Source-List-in-CMakeLists-txt"><a href="#2-3-Configuring-the-Dynamic-Library-Name-and-C-Source-List-in-CMakeLists-txt" class="headerlink" title="2.3 Configuring the Dynamic Library Name and C++ Source List in CMakeLists.txt"></a>2.3 Configuring the Dynamic Library Name and C++ Source List in CMakeLists.txt</h4><p><code>add_library</code> specifies the name of the compiled library and the list of C++ code files to be compiled:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_library</span>(entry SHARED napi_init.cpp)</span><br></pre></td></tr></table></figure>

<p>For more information on this, refer to the CMake build tool documentation: <a target="_blank" rel="noopener" href="https://cmake.org/">https://cmake.org/</a></p>
<h4 id="2-4-Calling-the-Declared-Methods-in-ArkTS"><a href="#2-4-Calling-the-Declared-Methods-in-ArkTS" class="headerlink" title="2.4 Calling the Declared Methods in ArkTS"></a>2.4 Calling the Declared Methods in ArkTS</h4><p>Once implemented, you can call the corresponding methods in ArkTS:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// First, import the dynamic library:</span></span><br><span class="line"><span class="keyword">import</span> testNapi <span class="keyword">from</span> <span class="string">&#x27;libentry.so&#x27;</span>;</span><br><span class="line"><span class="comment">// Call the corresponding add method</span></span><br><span class="line">hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>, <span class="string">&#x27;testTag&#x27;</span>, <span class="string">&#x27;Test NAPI 2 + 3 = %&#123;public&#125;d&#x27;</span>, testNapi.<span class="title function_">add</span>(<span class="number">2</span>, <span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<h3 id="3-DevEco-Studio’s-One-Click-Generation-of-Glue-Code"><a href="#3-DevEco-Studio’s-One-Click-Generation-of-Glue-Code" class="headerlink" title="3. DevEco Studio’s One-Click Generation of Glue Code"></a>3. DevEco Studio’s One-Click Generation of Glue Code</h3><p>From the ArkTS calling C++ methods process outlined above, it’s evident that the process is somewhat cumbersome, requiring handling in three places across two files. Is there a more convenient method? Don’t worry; the highlight of this article is the <strong>cross-language code editing</strong> feature provided by DevEco Studio IDE.</p>
<p>DevEco Studio IDE offers two creation methods:</p>
<ol>
<li>Write function declarations in <code>Index.d.ts</code> and generate C++ functions with one click.</li>
<li>Write C++ function declarations in a C++ header file and generate registration code with one click.</li>
</ol>
<p>The following sections provide detailed explanations of each method.</p>
<h4 id="3-1-Writing-Function-Declarations-in-Index-d-ts-and-Generating-C-Functions-with-One-Click"><a href="#3-1-Writing-Function-Declarations-in-Index-d-ts-and-Generating-C-Functions-with-One-Click" class="headerlink" title="3.1 Writing Function Declarations in Index.d.ts and Generating C++ Functions with One Click"></a>3.1 Writing Function Declarations in Index.d.ts and Generating C++ Functions with One Click</h4><p>After declaring methods in <code>Index.d.ts</code>, the IDE will prompt an error. Hovering over it will display the following prompt:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-1.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 1"></p>
<p>Clicking “Generate native implementation” will quickly generate the registration code and implementation code in C++:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-2.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 2"></p>
<p>This reduces three manual implementations to one, significantly improving efficiency by more than two-thirds.</p>
<h4 id="3-2-Writing-C-Function-Declarations-in-a-C-Header-File-and-Generating-Registration-Code-with-One-Click"><a href="#3-2-Writing-C-Function-Declarations-in-a-C-Header-File-and-Generating-Registration-Code-with-One-Click" class="headerlink" title="3.2 Writing C++ Function Declarations in a C++ Header File and Generating Registration Code with One Click"></a>3.2 Writing C++ Function Declarations in a C++ Header File and Generating Registration Code with One Click</h4><p>To create registration code with one click via C++ function declarations, you first need to create a header file and declare methods within it:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-3.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 3"></p>
<p>Right-click the method and select “Generate”:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-4.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 4"></p>
<p>Then, click on “NAPI”:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-5.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 5"></p>
<p>The registration function and the corresponding NAPI function implementation are automatically generated:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-6.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 6"></p>
<p>The method declaration in <code>Index.d.ts</code> is also automatically generated:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-7.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 7"></p>
<p>With the IDE’s assistance, writing cross-language “glue” code significantly improves efficiency. It’s fair to say that this feature provided by DevEco Studio is quite impressive and considerate for developers.</p>
<p>There are three points to note:</p>
<ol>
<li>The header files supported for one-click code generation include <code>.hpp</code>, <code>.hxx</code>, <code>.hh</code>, and <code>.h</code>.</li>
<li>The NAPI function declarations that can be quickly generated currently support parameter types such as <code>bool</code>, <code>int</code>, <code>string</code>, <code>void</code>, <code>float</code>, <code>double</code>, <code>std::array</code>, and <code>std::vector</code>.</li>
<li>If the project already has a <code>napi_init.cpp</code> file, the <code>Init</code> function within it will be appended. If not, the IDE will automatically create it for you.</li>
</ol>
<h3 id="4-Enhancing-NAPI-Type-Conversion-Code-Writing-in-C-with-AI"><a href="#4-Enhancing-NAPI-Type-Conversion-Code-Writing-in-C-with-AI" class="headerlink" title="4. Enhancing NAPI Type Conversion Code Writing in C++ with AI"></a>4. Enhancing NAPI Type Conversion Code Writing in C++ with AI</h3><p>While the IDE’s automatic generation of cross-language glue code greatly aids Native code development, some developers may still find the TODO code generated to be cumbersome, with many ArkTS and C++ cross-language conversion codes being template-heavy and tedious. Is there a way to improve efficiency?</p>
<p>Taking the automatically generated <code>add</code> code as an example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> napi_value <span class="title">Add</span><span class="params">(napi_env env, napi_callback_info info)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="type">size_t</span> argc = <span class="number">2</span>;  </span><br><span class="line">    napi_value args[<span class="number">2</span>] = &#123;<span class="literal">nullptr</span>&#125;;  </span><br><span class="line">  </span><br><span class="line">    <span class="built_in">napi_get_cb_info</span>(env, info, &amp;argc, args , <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype0;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">0</span>], &amp;valuetype0);  </span><br><span class="line">  </span><br><span class="line">    napi_valuetype valuetype1;  </span><br><span class="line">    <span class="built_in">napi_typeof</span>(env, args[<span class="number">1</span>], &amp;valuetype1);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value0;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">0</span>], &amp;value0);  </span><br><span class="line">  </span><br><span class="line">    <span class="type">double</span> value1;  </span><br><span class="line">    <span class="built_in">napi_get_value_double</span>(env, args[<span class="number">1</span>], &amp;value1);  </span><br><span class="line">  </span><br><span class="line">    napi_value sum;  </span><br><span class="line">    <span class="built_in">napi_create_double</span>(env, value0 + value1, &amp;sum);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> sum;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This code requires parsing two <code>int</code> type parameters from <code>napi_callback_info</code>, performing the operation, and then generating an <code>napi_value</code> to return.</p>
<p>Since this cross-language data type conversion is part of the NAPI protocol, the DevEco CodeGenie plugin also provides excellent support. You can install the Genie plugin in DevEco Studio to help quickly generate C++ implementation code:</p>
<p><img src="/../images/%E6%8E%8C%E6%8F%A1DevEco%20Studio%E8%BF%99%E4%B8%80%E5%8A%9F%E8%83%BD%EF%BC%8C%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0ArkTS%E4%B8%8EC++%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81-8.png" alt="Mastering DevEco Studio: Efficiently Implementing Glue Code Between ArkTS and C++ - 8"></p>
<p>With just a few “TAB” key presses, the code is almost complete, and you can then implement your business logic as needed.</p>
<h3 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5. Conclusion"></a>5. Conclusion</h3><p>This article primarily introduced the implementation steps for Native C++ code and the cross-language code editing tools provided by DevEco Studio IDE. These tools enable developers to write only function declarations and generate corresponding initialization registration methods and C++ implementation methods with one click. We hope you will explore and experience these tools to enhance your development efficiency.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-Embracing-HarmonyOS-Next-Efficient-Use-of-DevEco/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/A-Embracing-HarmonyOS-Next-Efficient-Use-of-DevEco/" class="post-title-link" itemprop="url">Embracing HarmonyOS Next: Efficient Use of DevEco</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 12:34:08 / Modified: 12:35:47" itemprop="dateCreated datePublished" datetime="2025-06-27T12:34:08+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Embracing-HarmonyOS-Next-Efficient-Use-of-DevEco"><a href="#Embracing-HarmonyOS-Next-Efficient-Use-of-DevEco" class="headerlink" title="Embracing HarmonyOS Next: Efficient Use of DevEco"></a>Embracing HarmonyOS Next: Efficient Use of DevEco</h1><p>In the past six months, I worked on adapting our IM SDK to HarmonyOS. Now that the system has been launched on the app store alongside the app, I’d like to share some experience and tips from the adaptation process, hoping they will be helpful to others.</p>
<h2 id="1-AI-Assisted-Code-Translation"><a href="#1-AI-Assisted-Code-Translation" class="headerlink" title="1. AI-Assisted Code Translation"></a>1. AI-Assisted Code Translation</h2><p>The biggest difference between an IM SDK and a regular application lies in the amount of logical code. Those familiar with declarative UI know that declarative programming is very AI-friendly, offering high development efficiency. However, it’s less suitable for logic-heavy code. Moreover, the IM system itself has a lot of logic and historical baggage. The new platform’s SDK must also be compatible with these historical logics. Many new team members are unfamiliar with these historical logics, and getting up to speed would be time-consuming. Therefore, directly translating the code from Android and iOS was a good choice. However, manual translation is inefficient and requires proficiency in both Java&#x2F;Objective-C and TypeScript. Leveraging AI proved to be an excellent solution.</p>
<p>ArkTS imposes many constraints on TypeScript, and the foundational models of existing large language models lack this knowledge. Thus, directly translating code into immediately usable code isn’t realistic. Instead, we translated the code according to TypeScript syntax and made minor adjustments afterward. Here’s a prompt I used:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You are a programming assistant. Convert the Java code I input into TypeScript code, preserving the comments in the code. Change the creation time in the comments to the current time. Initialize variable types by default, and initialize defined entity classes with default values. Replace JsonUtil.toJson() with JsonUtils.toJSONString() and JsonUtil.fromJson with JsonUtils.parse().</span><br></pre></td></tr></table></figure>

<p>This approach ensured that many tool calls in the translated code were directly compatible with the tools we封装 for HarmonyOS.</p>
<h2 id="2-Utilizing-Huawei’s-Official-AI-Tools"><a href="#2-Utilizing-Huawei’s-Official-AI-Tools" class="headerlink" title="2. Utilizing Huawei’s Official AI Tools"></a>2. Utilizing Huawei’s Official AI Tools</h2><p>Currently, programming assistants like GitHub Copilot and Alibaba Tongyi do not support ArkTS. However, after HDC, Huawei opened up its AI-assisted programming tools in DevEco Studio, which can be accessed through <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/activity/101718933685103243/singup">official channels</a>. These tools currently offer three functionalities: knowledge Q&amp;A, code generation, and Universal Cards. Compared to searching through official documentation, AI can significantly boost efficiency. In terms of code completion, it’s not yet on par with GitHub Copilot, but you can manually trigger it using the shortcut <code>alt+\</code>. The model requires that there are more than five lines of valid code within the previous ten lines of the cursor (excluding lines with only <code>&#123;&#125;</code>, <code>()</code>, <code>[]</code>, blank lines, or pure comments) to understand the code context. Here’s a demonstration:</p>
<p><img src="/../images/%E6%8B%A5%E6%8A%B1HarmonyOS%E4%B9%8B%E9%AB%98%E6%95%88%E4%BD%BF%E7%94%A8DevEco.gif" alt="Efficient Use of DevEco"></p>
<p>Although it can’t compete with the highly mature Copilot available in the market, it’s still a great tool for those new to HarmonyOS development.</p>
<h2 id="3-Configuring-Custom-Templates"><a href="#3-Configuring-Custom-Templates" class="headerlink" title="3. Configuring Custom Templates"></a>3. Configuring Custom Templates</h2><p>In Android Studio, when creating a new file, we can automatically generate comments with the author’s name, date, etc., by simply specifying what the file is for. DevEco offers similar configuration options:</p>
<ol>
<li>Open DevEco’s preference settings under the File and Code Template tab, where you can customize Files and Includes.</li>
<li>In the Files section, you can use <code>#parse(&quot;ArkTS Header&quot;)</code> to include custom parts defined in Includes.</li>
</ol>
<p><img src="/../images/%E6%8B%A5%E6%8A%B1HarmonyOS%E4%B9%8B%E9%AB%98%E6%95%88%E4%BD%BF%E7%94%A8DevEco.png" alt="Efficient Use of DevEco"></p>
<p>Using the <code>#parse</code> directive, you can include code snippets in file templates (Files tab). A template can be shared by multiple file templates. Besides static text, code, and comments, you can also use predefined variables that expand like macros into corresponding values.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/*  </span><br><span class="line">* $&#123;PACKAGE_NAME&#125; The package name where the new file resides  </span><br><span class="line">* $&#123;USER&#125; The current user&#x27;s system login name, e.g., qingkouwei  </span><br><span class="line">* $&#123;DATE&#125; The current system date, e.g., 2024/03/05  </span><br><span class="line">* $&#123;TIME&#125; The current system time, e.g., 11:27  </span><br><span class="line">* $&#123;YEAR&#125; The current year, e.g., 2024  </span><br><span class="line">* $&#123;MONTH&#125; The current month, e.g., 03  </span><br><span class="line">* $&#123;MONTH_NAME_SHORT&#125; The first three letters of the current month, e.g., 2月  </span><br><span class="line">* $&#123;MONTH_NAME_FULL&#125; The full name of the current month, e.g., 二月  </span><br><span class="line">* $&#123;DAY&#125; The day of the current date, e.g., 05  </span><br><span class="line">* $&#123;DAY_NAME_SHORT&#125; The first three letters of the current day of the week, e.g., 周一  </span><br><span class="line">* $&#123;DAY_NAME_FULL&#125; The full name of the current day of the week, e.g., 星期一  </span><br><span class="line">* $&#123;HOUR&#125; The current hour, e.g., 11  </span><br><span class="line">* $&#123;MINUTE&#125; The current minute, e.g., 27  </span><br><span class="line">* $&#123;PROJECT_NAME&#125; The name of the current project, e.g., im_chat_module  </span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>Using templates is quite convenient. They can include text, code, comments, and a variety of predefined variables that automatically expand into the corresponding values.</p>
<p>Want to use your own custom variables? No problem, just use the format <code>$&#123;MY_CUSTOM_VAR&#125;</code>. When creating a new file in the IDE, if there are custom variables, it will prompt you for their values.</p>
<p>Template example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ArkTS File Template Code</span><br><span class="line"></span><br><span class="line">/**  </span><br><span class="line">* $&#123;PROJECT_NAME&#125;  </span><br><span class="line">* $&#123;FILE_NAME&#125;  </span><br><span class="line">* Created by $&#123;USER&#125; on $&#123;DATE&#125;  </span><br><span class="line">*   </span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>Predefined variables configuration:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#parse(&quot;ArtTS Header&quot;)</span><br><span class="line">* $&#123;DATE&#125; The current system date, e.g., 2024/06/30</span><br><span class="line">* $&#123;PROJECT_NAME&#125; The name of the current project, e.g., my_main_module  </span><br><span class="line">* $&#123;USER&#125; The current user&#x27;s system login name, e.g., qingkouwei  </span><br></pre></td></tr></table></figure>

<p>You can also define custom code blocks, but we generally don’t need them, so I won’t elaborate further.</p>
<h2 id="4-IDE-Configuration-for-Chinese-Display"><a href="#4-IDE-Configuration-for-Chinese-Display" class="headerlink" title="4. IDE Configuration for Chinese Display"></a>4. IDE Configuration for Chinese Display</h2><p>By default, DevEco’s menu and other elements are in English. To display them in Chinese, you need to enable Chinese in the plugins:</p>
<p><img src="/../images/%E6%8B%A5%E6%8A%B1HarmonyOS%E4%B9%8B%E9%AB%98%E6%95%88%E4%BD%BF%E7%94%A8DevEco-1.png" alt="Efficient Use of DevEco - Chinese"></p>
<h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5. Conclusion"></a>5. Conclusion</h2><p>This article shares some very useful tips for adapting old systems, using AI code completion tools, configuring templates, and displaying Chinese in the development process of HarmonyOS. I hope these insights will be beneficial to you.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-Understanding-What-HarmonyOS-Adds-to-OpenHarmony/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/A-Understanding-What-HarmonyOS-Adds-to-OpenHarmony/" class="post-title-link" itemprop="url">Understanding What HarmonyOS Adds to OpenHarmony</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 12:30:08 / Modified: 12:31:43" itemprop="dateCreated datePublished" datetime="2025-06-27T12:30:08+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Understanding-What-HarmonyOS-Adds-to-OpenHarmony"><a href="#Understanding-What-HarmonyOS-Adds-to-OpenHarmony" class="headerlink" title="Understanding What HarmonyOS Adds to OpenHarmony"></a>Understanding What HarmonyOS Adds to OpenHarmony</h1><p>Many people wonder about the relationship between HarmonyOS and OpenHarmony. The simplest answer is that HarmonyOS is a distribution of OpenHarmony. A more detailed explanation would delve into their historical origins:</p>
<p>Huawei open-sourced the foundational capabilities of HarmonyOS and donated them to the OpenAtom Open Source Foundation, officially establishing the OpenHarmony open-source project. This laid the foundation for OpenHarmony’s development and created a shared technical origin for both. Both are designed based on distributed technology, supporting seamless connectivity across devices and aiming to build a unified operating system platform to enable multi-device collaboration and provide users with a better experience.</p>
<p>OpenHarmony is a completely open-source project managed by the OpenAtom Open Source Foundation, targeting global developers and manufacturers. It can be applied to various IoT devices and more scenarios. In contrast, HarmonyOS is Huawei’s commercial version. While some of its source code is open, it is primarily used for Huawei’s own devices and ecosystem, with a focus on consumer-grade smart devices. OpenHarmony emphasizes providing foundational functionalities and frameworks for system development, offering underlying support for the development of different hardware devices and applications. HarmonyOS, on the other hand, builds upon OpenHarmony by further integrating Huawei’s unique services.</p>
<p>This article will explore the specific services Huawei has integrated into HarmonyOS based on OpenHarmony, aiming to provide a comprehensive understanding of the capabilities HarmonyOS has added to OpenHarmony.</p>
<h2 id="OpenHarmony-Architecture-Overview"><a href="#OpenHarmony-Architecture-Overview" class="headerlink" title="OpenHarmony Architecture Overview"></a>OpenHarmony Architecture Overview</h2><p>The official technical architecture diagram of OpenHarmony is as follows:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E7%9C%8B%E6%87%82HarmonyOS%E5%9C%A8Openharmony%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88.png" alt="Understanding What HarmonyOS Adds to OpenHarmony"></p>
<p>It consists of four layers: the Kernel Layer, System Services Layer, Framework Layer, and Application Layer.</p>
<h3 id="Kernel-Layer"><a href="#Kernel-Layer" class="headerlink" title="Kernel Layer"></a>Kernel Layer</h3><p>In addition to the KAL (Kernel Abstraction Layer), the Kernel Layer includes the Driver Subsystem and HDF (Hardware Driver Foundation). HDF can be understood as analogous to Android’s HAL (Hardware Abstraction Layer). Different hardware vendors implement their own hardware drivers while maintaining consistent upper-layer interfaces. Since HarmonyOS runs on Huawei hardware, this layer is undoubtedly proprietary to Huawei.</p>
<h3 id="Framework-Layer-and-System-Services-Layer"><a href="#Framework-Layer-and-System-Services-Layer" class="headerlink" title="Framework Layer and System Services Layer"></a>Framework Layer and System Services Layer</h3><p>HarmonyOS also provides its own capabilities in the Framework Layer and System Services Layer, such as AI capabilities. The Framework Layer offers application development frameworks for multiple languages, including C&#x2F;C++, JS, and the ArkUI framework for JS-based applications, as well as multi-language framework APIs for various software and hardware services. Depending on the degree of system component modularization, this aspect remains consistent between HarmonyOS and OpenHarmony.</p>
<h3 id="Application-Layer"><a href="#Application-Layer" class="headerlink" title="Application Layer"></a>Application Layer</h3><p>HarmonyOS provides numerous system applications on the Application Layer, such as the AppGallery, which offers an app store and more.</p>
<p>In terms of overall design philosophy, both are highly aligned, emphasizing:</p>
<ul>
<li><strong>Hardware Mutual Assistance and Resource Sharing</strong></li>
<li><strong>Develop Once, Deploy Across Multiple Devices</strong></li>
<li><strong>Unified OS with Elastic Deployment</strong></li>
</ul>
<p>Moreover, Huawei has publicly committed to ensuring interoperability between OpenHarmony and HarmonyOS.</p>
<h2 id="Unique-Capabilities-of-HarmonyOS"><a href="#Unique-Capabilities-of-HarmonyOS" class="headerlink" title="Unique Capabilities of HarmonyOS"></a>Unique Capabilities of HarmonyOS</h2><p>Next, we will delve into the specific capabilities HarmonyOS offers on top of OpenHarmony.</p>
<p>The simplest way to understand this is by examining the official application services provided by HarmonyOS:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E7%9C%8B%E6%87%82HarmonyOS%E5%9C%A8Openharmony%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88-1.png" alt="Understanding What HarmonyOS Adds to OpenHarmony - Services"></p>
<p>These are Huawei’s “unique” services, connecting to Huawei’s servers and leveraging Huawei’s capabilities. They include:</p>
<ol>
<li>Huawei Account Service</li>
<li>Advertising Service</li>
<li>Calendar Service</li>
<li>Calling Service</li>
<li>Cloud Development Service</li>
<li>Contacts Service</li>
<li>Gaming Service</li>
<li>Health &amp; Fitness Service</li>
<li>In-App Payment Service</li>
<li>Live Window Service</li>
<li>Location Service</li>
<li>Map Service</li>
<li>User Notification Service</li>
<li>Huawei Payment Service</li>
<li>PDF Service</li>
<li>File Preview Service</li>
<li>Push Notification Service</li>
<li>Integrated Scenario Service</li>
<li>Sharing Service</li>
<li>App Market Service</li>
<li>Wallet Service</li>
<li>Weather Service</li>
</ol>
<p>These services provide users with a richer and more convenient experience by utilizing capabilities offered by Huawei’s servers. These are functionalities that OpenHarmony does not possess and cannot offer. If another mobile phone manufacturer were to develop a phone based on OpenHarmony, these services would need to be developed from scratch.</p>
<h3 id="AI-Capabilities-Exclusive-to-HarmonyOS"><a href="#AI-Capabilities-Exclusive-to-HarmonyOS" class="headerlink" title="AI Capabilities Exclusive to HarmonyOS"></a>AI Capabilities Exclusive to HarmonyOS</h3><p>Beyond these services, AI capabilities are also unique to HarmonyOS:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E7%9C%8B%E6%87%82HarmonyOS%E5%9C%A8Openharmony%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88-2.png" alt="Understanding What HarmonyOS Adds to OpenHarmony - AI"></p>
<p>Take the Intent Framework as an example. The Intents Kit (Intent Framework Service) is a HarmonyOS-level intent standard system that connects business functionalities within applications&#x2F;meta-services.</p>
<p>The Intent Framework helps developers intelligently distribute business functionalities within applications&#x2F;meta-services to various system entry points, a process known as intelligent distribution. These system entry points include:</p>
<ul>
<li>Xiaoyi (Huawei’s AI assistant) Conversation</li>
<li>Xiaoyi Search</li>
<li>Xiaoyi Suggestions</li>
</ul>
<p>The relationship between system entry points, the Intent Framework, and the HarmonyOS ecosystem is illustrated below:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E7%9C%8B%E6%87%82HarmonyOS%E5%9C%A8Openharmony%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88-3.png" alt="Understanding What HarmonyOS Adds to OpenHarmony - Ecosystem"></p>
<p>By leveraging HarmonyOS’s large models and multi-dimensional device perception AI capabilities, the framework accurately and promptly captures users’ explicit and potential intentions, enabling personalized, multimodal, and precise intelligent distribution. The intelligent distribution offers various feature categories, with habits recommendation, event recommendation, skill invocation (voice), and local search currently available, and more categories to be introduced in the future.</p>
<p>In the interaction between HarmonyOS and applications&#x2F;meta-services, intent operations are divided into intent invocation and intent sharing:</p>
<p><img src="/%E4%B8%80%E6%96%87%E7%9C%8B%E6%87%82HarmonyOS%E5%9C%A8Openharmony%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88-4.png" alt="Understanding What HarmonyOS Adds to OpenHarmony - Intent Operations"></p>
<p>As shown in the diagram, these capabilities ultimately rely on Huawei’s cloud services, making them unique to HarmonyOS.</p>
<p>By now, when someone asks about the differences between HarmonyOS and OpenHarmony, you should be able to enumerate several specific unique capabilities that HarmonyOS offers.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>This article has introduced the application services and AI services provided by HarmonyOS on top of OpenHarmony, as well as an overview of the OpenHarmony architecture.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-Understanding-Various-Contexts-in-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/A-Understanding-Various-Contexts-in-HarmonyOS-Next/" class="post-title-link" itemprop="url">Understanding Various Contexts in HarmonyOS Next</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 12:26:57 / Modified: 12:29:08" itemprop="dateCreated datePublished" datetime="2025-06-27T12:26:57+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Understanding-Various-Contexts-in-HarmonyOS-Next"><a href="#Understanding-Various-Contexts-in-HarmonyOS-Next" class="headerlink" title="Understanding Various Contexts in HarmonyOS Next"></a>Understanding Various Contexts in HarmonyOS Next</h1><h3 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h3><p>Both Android and HarmonyOS Next incorporate the concept of Context, which is essential in many scenarios such as accessing file resources. There are various types of Contexts, each with different acquisition methods and purposes. To develop effectively for HarmonyOS, it’s crucial to understand these various Contexts.</p>
<h3 id="Concept-of-Context"><a href="#Concept-of-Context" class="headerlink" title="Concept of Context"></a>Concept of Context</h3><p>Context in an application provides contextual information about objects, including basic information such as <code>resourceManager</code> (resource management), <code>applicationInfo</code> (current application information), <code>dir</code> (application file paths), <code>area</code> (file partitions), and basic methods like <code>createBundleContext()</code> and <code>getApplicationContext()</code>.</p>
<p>Different components in HarmonyOS Next, such as UIAbility and various ExtensionAbility-derived components, have their own specific Context classes. These include the base class <code>Context</code>, <code>ApplicationContext</code>, <code>AbilityStageContext</code>, <code>UIAbilityContext</code>, <code>ExtensionContext</code>, <code>ServiceExtensionContext</code>, and other specialized Contexts.</p>
<p>The inheritance relationships among these various Contexts are illustrated in the following diagram:<br><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E5%90%84%E7%A7%8DContext.png" alt="Understanding Various Contexts in HarmonyOS Next"></p>
<p>The ownership relationships among these Contexts are shown below:<br><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E5%90%84%E7%A7%8DContext-1.png" alt="Understanding Various Contexts in HarmonyOS Next - Ownership"></p>
<p>There are nine types of Contexts mentioned:</p>
<ol>
<li>BaseContext</li>
<li>Context</li>
<li>ApplicationContext</li>
<li>AbilityStageContext</li>
<li>UIAbilityContext</li>
<li>ExtensionContext</li>
<li>Other ExtensionContext</li>
<li>FormExtensionContext</li>
<li>ServiceExtensionContext</li>
</ol>
<h3 id="Capabilities-Provided-by-Various-Contexts"><a href="#Capabilities-Provided-by-Various-Contexts" class="headerlink" title="Capabilities Provided by Various Contexts"></a>Capabilities Provided by Various Contexts</h3><p>Let’s explore the capabilities provided by each type of Context.</p>
<h4 id="BaseContext"><a href="#BaseContext" class="headerlink" title="BaseContext"></a>BaseContext</h4><p>The <code>BaseContext</code> abstract class is used to indicate whether the inheriting Context subclass is based on the Stage model or the FA (Feature Ability) model. It serves as the parent class for all Context types. The primary attribute it provides is:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Readable</th>
<th align="left">Writable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">stageMode</td>
<td align="left">boolean</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
<td align="left">Indicates whether it is the Stage model.<br><br>true: Stage model<br><br>false: FA model</td>
</tr>
</tbody></table>
<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><p>The <code>Context</code> class inherits from <code>BaseContext</code> and provides the ability to access the context of an ability or application, including accessing specific application resources. It offers the following attributes:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Read-only</th>
<th align="left">Optional</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">resourceManager</td>
<td align="left">resmgr.ResourceManager</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Resource management object</td>
</tr>
<tr>
<td align="left">applicationInfo</td>
<td align="left">ApplicationInfo</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Information about the current application</td>
</tr>
<tr>
<td align="left">cacheDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Cache directory</td>
</tr>
<tr>
<td align="left">tempDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Temporary directory</td>
</tr>
<tr>
<td align="left">resourceDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Resource directory</td>
</tr>
<tr>
<td align="left">filesDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Files directory</td>
</tr>
<tr>
<td align="left">databaseDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Database directory</td>
</tr>
<tr>
<td align="left">preferencesDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Preferences directory</td>
</tr>
<tr>
<td align="left">bundleCodeDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Installation package directory. Note: Path concatenation for accessing resource files is not allowed; use resource management interfaces instead</td>
</tr>
<tr>
<td align="left">distributedFilesDir</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Distributed files directory</td>
</tr>
<tr>
<td align="left">cloudFileDir12+</td>
<td align="left">string</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Cloud files directory</td>
</tr>
<tr>
<td align="left">eventHub</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-eventhub-V5">EventHub</a></td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">Event center, providing methods to subscribe, unsubscribe, and trigger events</td>
</tr>
<tr>
<td align="left">area</td>
<td align="left">contextConstant.AreaMode</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">File partition information</td>
</tr>
</tbody></table>
<p>As seen, the <code>Context</code> class already provides attributes for accessing resources and resource paths.</p>
<p><strong>Methods Provided:</strong></p>
<ul>
<li><code>getApplicationContext(): ApplicationContext</code> - Retrieves the application context for the current application.</li>
<li><code>getGroupDir(dataGroupID: string): Promise&lt;string&gt;</code> - Retrieves the shared directory corresponding to the specified Group ID within the application, using a Promise for asynchronous callback.</li>
<li><code>getGroupDir(dataGroupID: string, callback: AsyncCallback&lt;string&gt;): void</code> - Retrieves the shared directory corresponding to the specified Group ID within the application, using a callback for asynchronous callback.</li>
</ul>
<h4 id="ApplicationContext"><a href="#ApplicationContext" class="headerlink" title="ApplicationContext"></a>ApplicationContext</h4><p>The <code>ApplicationContext</code> class inherits from <code>Context</code> and provides application-level context capabilities for developers. This includes interfaces for registering and unregistering listeners for component lifecycles within the application. The following methods are provided:</p>
<ul>
<li><code>on(type: &#39;abilityLifecycle&#39;, callback: AbilityLifecycleCallback): number</code> - Registers a listener for application lifecycle events. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>off(type: &#39;abilityLifecycle&#39;, callbackId: number, callback: AsyncCallback&lt;void&gt;): void</code> - Unregisters a listener for application lifecycle events. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>on(type: &#39;environment&#39;, callback: EnvironmentCallback): number</code> - Registers a listener for system environment changes. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>off(type: &#39;environment&#39;, callbackId: number, callback: AsyncCallback&lt;void&gt;): void</code> - Unregisters a listener for system environment changes. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>on(type: &#39;applicationStateChange&#39;, callback: ApplicationStateChangeCallback): void</code> - Registers a listener for foreground&#x2F;background state changes of the current application. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>off(type: &#39;applicationStateChange&#39;, callback?: ApplicationStateChangeCallback): void</code> - Unregisters all listeners for foreground&#x2F;background state changes of the current application. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>getRunningProcessInformation(): Promise&lt;Array&lt;ProcessInformation&gt;&gt;</code> - Retrieves information about running processes. Uses a Promise for asynchronous notification.</li>
<li><code>getRunningProcessInformation(callback: AsyncCallback&lt;Array&lt;ProcessInformation&gt;&gt;): void</code> - Retrieves information about running processes. Uses a callback for asynchronous notification.</li>
<li><code>killAllProcesses(): Promise&lt;void&gt;</code> - Terminates all processes of the application. Process termination does not follow the normal application lifecycle. Uses a Promise for asynchronous notification. Only supported on the main thread.</li>
<li><code>setColorMode(colorMode: ConfigurationConstant.ColorMode): void</code> - Sets the color mode of the application. Only supported on the main thread.</li>
<li><code>setLanguage(language: string): void</code> - Sets the language of the application. Only supported on the main thread.</li>
<li><code>clearUpApplicationData(): Promise&lt;void&gt;</code> - Clears the application’s own data and revokes permissions granted to the user. Uses a Promise for asynchronous notification. Only supported on the main thread.</li>
<li><code>clearUpApplicationData(callback: AsyncCallback&lt;void&gt;): void</code> - Clears the application’s own data and revokes permissions granted to the user. Uses a callback for asynchronous notification. Only supported on the main thread.</li>
<li><code>restartApp(want: Want): void</code> - Restarts the application and launches a specified UIAbility. The <code>onDestroy</code> callback is not invoked during restart. Only supported on the main thread, and the application to be restarted must be in the focused state.</li>
<li><code>getCurrentAppCloneIndex(): number</code> - Retrieves the current application’s clone index.</li>
<li><code>setFont(font: string): void</code> - Sets the font type of the application. Only supported on the main thread.</li>
<li><code>setSupportedProcessCache(isSupported : boolean): void</code> - Configures whether the application supports cached fast startup. Only supported on the main thread.</li>
</ul>
<h4 id="AbilityStageContext"><a href="#AbilityStageContext" class="headerlink" title="AbilityStageContext"></a>AbilityStageContext</h4><p><code>AbilityStageContext</code> is the context environment for <code>AbilityStage</code>, inheriting from <code>Context</code>.</p>
<p><code>AbilityStageContext</code> provides the ability to access resources specific to <code>AbilityStage</code>, including obtaining the <code>ModuleInfo</code> object corresponding to <code>AbilityStage</code> and environment change objects. The following attributes are provided:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Readable</th>
<th align="left">Writable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">currentHapModuleInfo</td>
<td align="left">HapModuleInfo</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">The <code>ModuleInfo</code> object corresponding to <code>AbilityStage</code></td>
</tr>
<tr>
<td align="left">config</td>
<td align="left">Configuration</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Environment change object</td>
</tr>
</tbody></table>
<h4 id="UIAbilityContext"><a href="#UIAbilityContext" class="headerlink" title="UIAbilityContext"></a>UIAbilityContext</h4><p><code>UIAbilityContext</code> is the context corresponding to a UIAbility that needs to preserve state. It inherits from <code>Context</code> and provides configuration information related to UIAbility, as well as methods to operate UIAbility and <code>ServiceExtensionAbility</code>, such as starting UIAbility, stopping the current UIAbilityContext’s UIAbility, starting&#x2F;stopping&#x2F;connecting&#x2F;disconnecting <code>ServiceExtensionAbility</code>, etc. The following attributes are provided:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Readable</th>
<th align="left">Writable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">abilityInfo</td>
<td align="left">AbilityInfo</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Information related to UIAbility.<br><br><strong>Meta-Service API:</strong> Starting from API version 11, this interface is supported in meta-services.</td>
</tr>
<tr>
<td align="left">currentHapModuleInfo</td>
<td align="left">HapModuleInfo</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Information about the current HAP.<br><br><strong>Meta-Service API:</strong> Starting from API version 11, this interface is supported in meta-services.</td>
</tr>
<tr>
<td align="left">config</td>
<td align="left">Configuration</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Configuration information related to UIAbility, such as language and color mode.<br><br><strong>Meta-Service API:</strong> Starting from API version 11, this interface is supported in meta-services.</td>
</tr>
<tr>
<td align="left">windowStage12+</td>
<td align="left">window.WindowStage</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">The current <code>WindowStage</code> object. Only supported on the main thread.<br><br><strong>Meta-Service API:</strong> Starting from API version 12, this interface is supported in meta-services.</td>
</tr>
</tbody></table>
<p><strong>Capabilities Provided:</strong></p>
<ul>
<li><strong>Start Ability:</strong> <code>startAbility</code>, <code>startAbilityForResult</code></li>
<li><strong>Stop Ability Itself:</strong> <code>terminateSelf</code>, <code>terminateSelfWithResult</code></li>
<li><strong>Connect Current Ability to a ServiceExtensionAbility:</strong> <code>connectServiceExtensionAbility</code></li>
<li><strong>Disconnect from a ServiceExtensionAbility:</strong> <code>disconnectServiceExtensionAbility</code> (After disconnection, the <code>remote</code> object returned upon successful connection should be set to null)</li>
<li><strong>Start a Specified Ability to Foreground or Background in Cross-Device Scenarios, and Obtain Its Caller Communication Interface:</strong> <code>startAbilityByCall</code> (The caller can use <code>Caller</code> to communicate with the started Ability)</li>
<li><strong>Set the Name Displayed by UIAbility in Tasks:</strong> <code>setMissionLabel</code></li>
<li><strong>Set the Flow State of UIAbility in Tasks:</strong> <code>setMissionContinueState</code></li>
<li><strong>Restore WindowStage Data in UIAbility:</strong> <code>restoreWindowStage</code></li>
<li><strong>Query Whether UIAbility Is in Terminating State:</strong> <code>isTerminating</code></li>
<li><strong>Start a ServiceExtensionAbility That Supports Modal Pop-ups:</strong> <code>requestDialogService</code> (After the <code>ServiceExtensionAbility</code> is started, the application displays a modal pop-up, and the caller can return results to the caller via <code>setRequestResult</code>)</li>
<li><strong>Provide a Callback Function for Developers When Page Loading Is Complete (<code>loadContent</code> Success):</strong> <code>reportDrawnCompleted</code></li>
<li><strong>Implicitly Start UIExtensionAbility via Type:</strong> <code>startAbilityByType</code> (Uses a callback for asynchronous notification)</li>
<li><strong>Show Current Ability:</strong> <code>showAbility</code></li>
<li><strong>Hide Current Ability:</strong> <code>hideAbility</code></li>
<li><strong>Move the Foreground Ability to the Background:</strong> <code>moveAbilityToBackground</code></li>
<li><strong>Jump-Start an EmbeddableUIAbility and Return Results:</strong> <code>openAtomicService</code></li>
<li><strong>Start UIAbility via AppLinking:</strong> <code>openLink</code></li>
<li><strong>Return Results to the Caller When Target Ability Is Launched via <code>startAbilityForResult</code> or <code>openLink</code> and Needs to Return Results:</strong> <code>backToCallerAbilityWithResult</code> (Unlike <code>terminateSelfWithResult</code>, this interface does not destroy the current Ability when returning results)</li>
</ul>
<h4 id="ExtensionContext"><a href="#ExtensionContext" class="headerlink" title="ExtensionContext"></a>ExtensionContext</h4><p><code>ExtensionContext</code> is the context environment for <code>Extension</code>, inheriting from <code>Context</code>.</p>
<p>The <code>ExtensionContext</code> module provides the ability to access resources specific to an Extension. For extended Extensions, you can directly use <code>ExtensionContext</code> as the context environment or define a type that inherits from <code>ExtensionContext</code> as the context environment.</p>
<p>The following attributes are provided:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Readable</th>
<th align="left">Writable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">currentHapModuleInfo</td>
<td align="left">HapModuleInfo</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Information about the owning HAP package.<br><br>(For details, refer to <code>api\bundle\hapModuleInfo.d.ts</code> in the SDK directory)</td>
</tr>
<tr>
<td align="left">config</td>
<td align="left">Configuration</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Configuration information of the owning Module.<br><br>(For details, refer to <code>api\@ohos.app.ability.Configuration.d.ts</code> in the SDK directory)</td>
</tr>
<tr>
<td align="left">extensionAbilityInfo</td>
<td align="left">ExtensionAbilityInfo</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">Information about the owning Extension.<br><br>(For details, refer to <code>api\bundle\extensionAbilityInfo.d.ts</code> in the SDK directory)</td>
</tr>
</tbody></table>
<h3 id="Common-Usage-Scenarios-for-Context"><a href="#Common-Usage-Scenarios-for-Context" class="headerlink" title="Common Usage Scenarios for Context"></a>Common Usage Scenarios for Context</h3><p>From the analysis above, Context is primarily used in the following scenarios:</p>
<ul>
<li><strong>Accessing Application File Paths</strong></li>
<li><strong>Accessing and Modifying Encrypted Partitions</strong></li>
<li><strong>Obtaining Contexts of Other Modules within the Same Application</strong></li>
<li><strong>Subscribing to Lifecycle Changes of UIAbilities Within the Process</strong></li>
</ul>
<p><strong>Typical Example: Retrieving String Resources via <code>resourceManager</code></strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">getStringSync</span>(<span class="attr">context</span>: common.<span class="property">Context</span> | <span class="literal">undefined</span>, <span class="attr">resource</span>: <span class="title class_">Resource</span>): <span class="built_in">string</span> &#123;  </span><br><span class="line">  <span class="keyword">let</span> rscManager = (context ?? <span class="title function_">getContext</span>() <span class="keyword">as</span> common.<span class="property">UIAbilityContext</span>).<span class="property">resourceManager</span>;  </span><br><span class="line">    <span class="keyword">return</span> rscManager.<span class="title function_">getStringSync</span>(resource.<span class="property">id</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this example, <code>Context</code> is required. What kind of <code>Context</code> do we get when calling <code>getContext()</code> in a general class?</p>
<p>When inspecting the <code>Context</code> type obtained via <code>getContext()</code> in a page and <code>getUIContext()</code>, we find they are <code>AbilityContext</code> and <code>UIContext</code>, respectively:<br><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E5%90%84%E7%A7%8DContext-4.png" alt="Understanding Various Contexts in HarmonyOS Next - Context Types in Pages"></p>
<p>Similarly, in a ViewModel, <code>getContext()</code> also retrieves the same <code>AbilityContext</code>:<br><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E5%90%84%E7%A7%8DContext-3.png" alt="Understanding Various Contexts in HarmonyOS Next - Context Types in ViewModels"></p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>This article has provided a detailed explanation of the relationships between various Contexts in HarmonyOS Next, along with the attributes and methods they offer.</p>
<h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-basecontext-V5">BaseContext</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-context-V5#contextgetapplicationcontext">Context</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-uiabilitycontext-V5">UIAbilityContext</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-extensioncontext-V5">ExtensionContext</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-abilitystagecontext-V5">AbilityStageContext</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-Understanding-Abilities-in-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/A-Understanding-Abilities-in-HarmonyOS-Next/" class="post-title-link" itemprop="url">Understanding Abilities in HarmonyOS Next</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 12:23:18 / Modified: 12:25:21" itemprop="dateCreated datePublished" datetime="2025-06-27T12:23:18+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Understanding-Abilities-in-HarmonyOS-Next"><a href="#Understanding-Abilities-in-HarmonyOS-Next" class="headerlink" title="Understanding Abilities in HarmonyOS Next"></a>Understanding Abilities in HarmonyOS Next</h1><p>When developing for Android, we’re familiar with the four main components. In HarmonyOS Next development, the first concept we encounter is the “Ability.” But what exactly is an Ability? This article aims to thoroughly explore and clarify this concept.</p>
<p>In HarmonyOS, the basic page element is a Page annotated with <code>@Entry</code>. So, what’s the relationship between Pages and Abilities? The following Stage model conceptual diagram provides an overview:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E7%9A%84Ability.png" alt="Understanding Abilities in HarmonyOS Next"></p>
<ul>
<li>Applications submitted to app stores are packaged as Apps, which can contain one or multiple HAPs (Harmony Ability Packages).</li>
<li>During runtime, an App corresponds to an Application instance, which holds an ApplicationContext.</li>
<li>A HAP corresponds to an AbilityStage during runtime, which maintains an AbilityStageContext and can manage multiple UIAbilities and ExtensionAbilities.</li>
<li>A UIAbility manages a WindowStage, which contains a Window, and a Window can host multiple ArkUI Pages.</li>
<li>Each UIAbility holds a UIAbilityContext.</li>
</ul>
<h2 id="Fundamental-Concepts"><a href="#Fundamental-Concepts" class="headerlink" title="Fundamental Concepts"></a>Fundamental Concepts</h2><h3 id="AbilityStage"><a href="#AbilityStage" class="headerlink" title="AbilityStage"></a>AbilityStage</h3><p>AbilityStage is the runtime class for HAPs. It provides developers with notifications when a HAP is loaded, allowing for initialization tasks such as resource preloading and thread creation.</p>
<p>AbilityStage serves as a module-level component container. When a HAP is first loaded, an AbilityStage instance is created for that module, enabling initialization operations. AbilityStage and Module have a one-to-one correspondence - each Module has exactly one AbilityStage.</p>
<p>In DevEco Studio’s default project template, AbilityStage isn’t automatically generated. To utilize AbilityStage’s capabilities, you need to manually create an AbilityStage file. Here’s the step-by-step process:</p>
<ol>
<li>In the ets directory of your project module, right-click and select “New &gt; Directory” to create a new directory named “myabilitystage.”</li>
<li>Within the myabilitystage directory, right-click and select “New &gt; ArkTS File” to create a file named “MyAbilityStage.ets.”</li>
<li>Open MyAbilityStage.ets and import the AbilityStage dependency package. Create a custom class that extends AbilityStage and implement the required lifecycle callbacks. The example below includes an <code>onCreate()</code> lifecycle callback:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AbilityStage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAbilityStage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbilityStage</span> &#123;</span><br><span class="line">    <span class="comment">// Called when the application is created.</span></span><br><span class="line">    <span class="title function_">onCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MyAbilityStage.onCreate is called&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Event triggered when starting a specified ability</span></span><br><span class="line">    <span class="title function_">onAcceptWant</span>(<span class="params"><span class="attr">want</span>: <span class="title class_">Want</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MyAbilityStage.onAcceptWant called&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;com.example.test&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Callback when starting a UIAbility in a specified process</span></span><br><span class="line">    <span class="title function_">onNewProcessRequest</span>(<span class="params"><span class="attr">want</span>: <span class="title class_">Want</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MyAbilityStage.onNewProcessRequest called&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;com.example.test&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Environment change notification interface, called when global configuration changes occur</span></span><br><span class="line">    <span class="title function_">onConfigurationUpdate</span>(<span class="params"><span class="attr">config</span>: <span class="title class_">Configuration</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`onConfigurationUpdate, language: <span class="subst">$&#123;config.language&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Called when the system decides to adjust memory usage. For example, when there&#x27;s insufficient memory to run background processes.</span></span><br><span class="line">    <span class="title function_">onMemoryLevel</span>(<span class="params"><span class="attr">level</span>: <span class="title class_">AbilityConstant</span>.<span class="title class_">MemoryLevel</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`onMemoryLevel, level: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(level)&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Called when the application is being destroyed. This method is invoked during normal lifecycle scheduling.</span></span><br><span class="line">    <span class="comment">// It won&#x27;t be called if the application exits abnormally or is terminated.</span></span><br><span class="line">    <span class="title function_">onDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MyAbilityStage.onDestroy is called&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>In the module.json5 configuration file, specify the srcEntry parameter to define the code path corresponding to the module, serving as the entry point for HAP loading:</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;entry&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;entry&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;srcEntry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./ets/myabilitystage/MyAbilityStage.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="UIAbility"><a href="#UIAbility" class="headerlink" title="UIAbility"></a>UIAbility</h3><p>UIAbility is an application component that contains a UI interface, inheriting from Ability. It provides lifecycle callbacks for component creation, destruction, and foreground&#x2F;background transitions, as well as component collaboration capabilities. The main collaboration features include:</p>
<ul>
<li><strong>Caller</strong>: Returned by the <code>startAbilityByCall</code> interface, the CallerAbility (calling component) can communicate with the CalleeAbility (called component) using the Caller.</li>
<li><strong>Callee</strong>: An internal object of UIAbility, through which the CalleeAbility (called component) can communicate with the Caller.</li>
</ul>
<p>The inheritance relationships among various Abilities are illustrated in the following diagram:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E7%9A%84Ability-3.png" alt="Understanding Abilities in HarmonyOS Next - Ability Relationships"></p>
<p>UIAbility is an application component that incorporates a UI, primarily designed for user interaction.</p>
<p><strong>Design Philosophy of UIAbility:</strong></p>
<ol>
<li>Natively supports cross-end migration and multi-end collaboration at the application component level.</li>
<li>Supports multiple devices and various window forms.</li>
</ol>
<p><strong>Division Principles and Recommendations for UIAbility:</strong><br>UIAbility is the basic unit of system scheduling, providing windows for application interface rendering. An application can contain one or multiple UIAbility components. For example, in a payment application, the entry functionality and payment&#x2F;receipt functions can be configured as separate UIAbilities.</p>
<p>Each instance of a UIAbility component displays a corresponding task in the recent tasks list.</p>
<p>For developers, the choice between using a single or multiple UIAbilities depends on specific scenarios:</p>
<ul>
<li>If you want to see only one task in the task view, it’s recommended to use a “single UIAbility + multiple pages” approach to avoid unnecessary resource loading.</li>
<li>If you need to display multiple tasks in the task view or require simultaneous multi-window support, it’s advisable to use multiple UIAbilities to implement different functions.</li>
</ul>
<p>For instance, in an instant messaging application, using separate UIAbilities for the message list and audio&#x2F;video calls enables easy task window switching and allows the application’s two task windows to be displayed side-by-side on a single screen.</p>
<p>To enable proper functionality of UIAbility in your application, you need to declare the UIAbility’s name, entry point, label, and other relevant information in the abilities tag of the module.json5 configuration file:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;abilities&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EntryAbility&quot;</span><span class="punctuation">,</span> <span class="comment">// Name of the UIAbility component</span></span><br><span class="line">        <span class="attr">&quot;srcEntry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./ets/entryability/EntryAbility.ets&quot;</span><span class="punctuation">,</span> <span class="comment">// Code path of the UIAbility component</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$string:EntryAbility_desc&quot;</span><span class="punctuation">,</span> <span class="comment">// Description information of the UIAbility component</span></span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$media:icon&quot;</span><span class="punctuation">,</span> <span class="comment">// Icon of the UIAbility component</span></span><br><span class="line">        <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$string:EntryAbility_label&quot;</span><span class="punctuation">,</span> <span class="comment">// Label of the UIAbility component</span></span><br><span class="line">        <span class="attr">&quot;startWindowIcon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$media:icon&quot;</span><span class="punctuation">,</span> <span class="comment">// Index of the resource file for the startup page icon of the UIAbility component</span></span><br><span class="line">        <span class="attr">&quot;startWindowBackground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$color:start_window_background&quot;</span><span class="punctuation">,</span> <span class="comment">// Index of the resource file for the startup page background color of the UIAbility component</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="WindowStage"><a href="#WindowStage" class="headerlink" title="WindowStage"></a>WindowStage</h3><p>The WindowStage serves as a window manager, overseeing various basic window units. It supports the following methods:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E7%9A%84Ability-4.png" alt="Understanding Abilities in HarmonyOS Next - WindowStage Methods"></p>
<h3 id="Window"><a href="#Window" class="headerlink" title="Window"></a>Window</h3><p>The current window instance, which is the basic unit managed by the window manager.</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E7%9A%84Ability-5.png" alt="Understanding Abilities in HarmonyOS Next - Window"></p>
<h3 id="HAP-Harmony-Ability-Package"><a href="#HAP-Harmony-Ability-Package" class="headerlink" title="HAP (Harmony Ability Package)"></a>HAP (Harmony Ability Package)</h3><p>A HAP (Harmony Ability Package) is the basic unit for application installation and execution. A HAP package is a module package generated by bundling code, resources, third-party libraries, configuration files, etc. It primarily comes in two types:</p>
<ul>
<li><strong>entry</strong>: The main module of the application, serving as the entry point and providing the application’s basic functionalities.</li>
<li><strong>feature</strong>: A dynamic feature module of the application, acting as an extension of the application’s capabilities, which can be selectively installed based on user needs and device type.</li>
</ul>
<p>An application package can contain just a basic entry package or a combination of a basic entry package and multiple functional feature packages.</p>
<p>There are two usage scenarios for HAPs:</p>
<ul>
<li><p><strong>Single HAP Scenario</strong>: If the application only contains UIAbility components and doesn’t require ExtensionAbility components, it’s preferable to use a single HAP (i.e., one entry package) for development. Although a single HAP can contain one or multiple UIAbility components, to avoid unnecessary resource loading, the “single UIAbility + multiple pages” approach is recommended.</p>
</li>
<li><p><strong>Multiple HAP Scenario</strong>: For applications with more complex functionalities requiring ExtensionAbility components, a multiple HAP approach (i.e., one entry package + multiple feature packages) is suitable. Each HAP contains either a UIAbility component or an ExtensionAbility component. In this scenario, multiple HAPs might reference the same library files, potentially leading to duplicate packaging issues.</p>
</li>
</ul>
<p><strong>Development and Compilation State Project Structure Views:</strong></p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E7%9A%84Ability-1.png" alt="Understanding Abilities in HarmonyOS Next - Project Structure"></p>
<p>Each application must include at least one <code>.hap</code> file and may include several <code>.hsp</code> files (or none). All <code>.hap</code> and <code>.hsp</code> files within an application collectively form a Bundle, with the corresponding <code>bundleName</code> serving as the application’s unique identifier (refer to the <code>bundleName</code> tag in the app.json5 configuration file).</p>
<p>When publishing an application to an app store, the Bundle needs to be packaged into an <code>.app</code> file (referred to as an App Pack or Application Package). Simultaneously, DevEco Studio automatically generates a <code>pack.info</code> file. This <code>pack.info</code> file describes the attributes of each HAP and HSP in the App Pack, including the <code>bundleName</code> and <code>versionCode</code> information of the APP, as well as details such as the <code>name</code>, <code>type</code>, and <code>abilities</code> within each Module.</p>
<p><strong>Compilation, Publishing, and Deployment Workflow:</strong></p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82HarmonyOS%20Next%E4%B8%AD%E7%9A%84Ability-2.png" alt="Understanding Abilities in HarmonyOS Next - Compilation and Deployment Workflow"></p>
<p>In essence, a HAP is the basic unit installed on a device, while an App is merely a package collection for store distribution. The actual installation still occurs on a per-HAP basis.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/stage-model-development-overview-V5">Stage Model Development Overview</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/abilitystage-V5">AbilityStage Component Container</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-abilitystage-V5">@ohos.app.ability.AbilityStage (AbilityStage)</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-package-structure-stage-V5">Stage Model Application Package Structure</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/hap-package-V5">HAP</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5">@ohos.app.ability.UIAbility (UIAbility)</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-ability-V5">@ohos.app.ability.Ability (Ability Base Class)</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5">Managing Application Windows (Stage Model)</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#windowstage9">@ohos.window (Window)</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/uiability-overview-V5">UIAbility Component Overview</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/extensionability-overview-V5">ExtensionAbility Component</a></li>
</ol>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Abilities in HarmonyOS Next provide system configuration update callbacks and system memory adjustment callbacks. Among these, UIAbility is an application component that incorporates a UI, primarily designed for user interaction. Each UIAbility corresponds to a Window and can contain multiple Pages. Furthermore, each UIAbility corresponds to a single task in the recent tasks list.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/A-A-Comprehensive-Guide-to-Resources-and-Access-in-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/A-A-Comprehensive-Guide-to-Resources-and-Access-in-HarmonyOS-Next/" class="post-title-link" itemprop="url">A Comprehensive Guide to Resources and Access in HarmonyOS Next</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 12:18:54 / Modified: 12:20:42" itemprop="dateCreated datePublished" datetime="2025-06-27T12:18:54+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="A-Comprehensive-Guide-to-Resources-and-Access-in-HarmonyOS-Next"><a href="#A-Comprehensive-Guide-to-Resources-and-Access-in-HarmonyOS-Next" class="headerlink" title="A Comprehensive Guide to Resources and Access in HarmonyOS Next"></a>A Comprehensive Guide to Resources and Access in HarmonyOS Next</h1><h3 id="1-Background-Introduction"><a href="#1-Background-Introduction" class="headerlink" title="1. Background Introduction"></a>1. Background Introduction</h3><p>In application development, we utilize various types of resource files, including strings, images, audio&#x2F;video media, color values, themes, etc. Strings may involve internationalization requirements, while colors and images might need to support theme switching.</p>
<p>Developers familiar with Android know that Android has three types of resources:</p>
<ol>
<li><strong>Compiled Resources</strong>: Stored under the <code>res</code> directory, these resources participate in compilation and are accessed through the R file. They include application resources such as icons and GUI layouts. During packaging, these resources are processed by the aapt (Android Asset Packaging Tool) and mapped to IDs in the Android project’s R file, typically accessed via resource IDs.</li>
<li><strong>Raw Resources</strong>: Located under <code>res/raw</code>, these store original, unprocessed resource files like audio, video, and plain text files. These files remain unchanged during compilation.</li>
<li><strong>Assets</strong>: Stored in the <code>assets</code> directory, these are static files packaged into the application for deployment to devices. Files in the <code>assets</code> folder are not compiled into binary format but are copied directly to the device.</li>
</ol>
<p>HarmonyOS Next provides a similar resource directory structure for storing resources such as colors, fonts, spacing, and icons. The values of these resources may vary across different devices or configurations. Let’s first explore the resource directory structure in HarmonyOS Next.</p>
<h3 id="2-Resource-Directory-Structure"><a href="#2-Resource-Directory-Structure" class="headerlink" title="2. Resource Directory Structure"></a>2. Resource Directory Structure</h3><p>HarmonyOS Next’s directories are divided into two categories:</p>
<ul>
<li><strong>Resource Directories</strong>: Include base directory, qualifier directories, rawfile directory, and resfile directory</li>
<li><strong>Resource Group Directories</strong>: Include element, media, profile</li>
</ul>
<p>The resource structure in a project is shown in the following diagram:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E4%BA%86%E8%A7%A3HarmonyOS%20Next%E8%B5%84%E6%BA%90%E5%8F%8A%E8%AE%BF%E9%97%AE.png" alt="Resource Directory Structure"></p>
<p>Now, let’s detail the purpose of each directory:</p>
<h4 id="Base-Directory"><a href="#Base-Directory" class="headerlink" title="Base Directory"></a>Base Directory</h4><ul>
<li>The base directory is a default directory that exists by default.</li>
<li>Its secondary subdirectory <code>element</code> stores basic elements such as strings, colors, and boolean values.</li>
<li>The <code>media</code> and <code>profile</code> subdirectories store resource files like media, animations, and layouts.</li>
<li>Resource files in this directory are compiled into binary files and assigned resource IDs.</li>
<li>Access is provided by specifying the resource type (type) and resource name (name).</li>
<li>This is similar to Android’s res directory.</li>
</ul>
<h4 id="Qualifier-Directories"><a href="#Qualifier-Directories" class="headerlink" title="Qualifier Directories"></a>Qualifier Directories</h4><ul>
<li>Two default qualifier directories are provided: <code>en_US</code> (American English) and <code>zh_CN</code> (Simplified Chinese).</li>
<li>Developers can create additional qualifier directories as needed for their development.</li>
<li>The secondary subdirectories <code>element</code>, <code>media</code>, and <code>profile</code> store basic elements like strings, colors, and boolean values, as well as resource files like media, animations, and layouts.</li>
<li>Resource files in these directories are compiled into binary files and assigned resource IDs.</li>
<li>Access is provided by specifying the resource type (type) and resource name (name).</li>
<li>Available qualifiers include:<ul>
<li>Mobile country code and mobile network code</li>
<li>Language</li>
<li>Text</li>
<li>Country or region</li>
<li>Screen orientation (portrait&#x2F;landscape)</li>
<li>Device type</li>
<li>Color mode</li>
<li>Screen density</li>
</ul>
</li>
</ul>
<h4 id="Rawfile-Directory"><a href="#Rawfile-Directory" class="headerlink" title="Rawfile Directory"></a>Rawfile Directory</h4><ul>
<li>Supports creating multiple levels of subdirectories with customizable names.</li>
<li>Allows flexible placement of various resource files within the folders.</li>
<li>Resource files in this directory are directly packaged into the application without compilation and without being assigned resource IDs.</li>
<li>Access is provided by specifying the file path and filename.</li>
</ul>
<h4 id="Resfile-Directory"><a href="#Resfile-Directory" class="headerlink" title="Resfile Directory"></a>Resfile Directory</h4><ul>
<li>Supports creating multiple levels of subdirectories with customizable names.</li>
<li>Allows flexible placement of various resource files within the folders.</li>
<li>Resource files in this directory are directly packaged into the application without compilation and without being assigned resource IDs.</li>
<li>After application installation, resfile resources are extracted to the application’s sandbox path.</li>
<li>The resource directory can be accessed via the <code>resourceDir</code> property of the Context object, and files can then be accessed through file paths.</li>
</ul>
<h3 id="3-Resource-Access"><a href="#3-Resource-Access" class="headerlink" title="3. Resource Access"></a>3. Resource Access</h3><p>Within a har package, resources can generally be accessed using <code>$r</code> or <code>$rawfile</code>:</p>
<ul>
<li>For resource types such as “color”, “float”, “string”, “plural”, “media”, and “profile”, access is provided through the form <code>$r(&#39;app.type.name&#39;)</code>. Here, <code>app</code> refers to resources defined in the resources directory; <code>type</code> indicates the resource type or storage location; and <code>name</code> is the resource name, determined when defining the resource.</li>
<li>For resources in the rawfile directory, access is provided through the form <code>$rawfile(&#39;filename&#39;)</code>. Here, <code>filename</code> is the relative path of the file under the rawfile directory, including the file extension, and the path must not start with “&#x2F;“.</li>
<li>By obtaining the ResourceManager through the application context, different resource management interfaces can be called to access various resources. For example:<ul>
<li><code>getContext().resourceManager.getStringByNameSync(&#39;test&#39;)</code> can retrieve string resources.</li>
<li><code>getContext().resourceManager.getRawFd(&#39;rawfilepath&#39;)</code> can obtain the descriptor information of the hap package where the Rawfile is located. When accessing rawfile files, the combination of <code>&#123;fd, offset, length&#125;</code> is required.</li>
</ul>
</li>
</ul>
<p>Here are two important notes:</p>
<ul>
<li>For cases where multiple placeholders are used in string.json, access is provided through the form <code>$r(&#39;app.string.label&#39;,&#39;aaa&#39;,&#39;bbb&#39;,444)</code>.</li>
<li>Accessing resources via resource IDs is more performant than direct resource access.</li>
</ul>
<p>For accessing application resources across HAP&#x2F;HSP packages, the <code>createModuleContext(context, moduleName)</code> interface is used to create contexts for different modules within the same application. After obtaining the ResourceManager object, different resource management interfaces can be called to access various resources. Resources can be accessed through <code>$r</code> or <code>$rawfile</code>.</p>
<h3 id="4-API-Introduction"><a href="#4-API-Introduction" class="headerlink" title="4. API Introduction"></a>4. API Introduction</h3><p>The system provides the <code>@ohos.resourceManager</code> interface for resource access.<br>First, obtain the ResourceManager through <code>resourceManager.getResourceManager</code>, and then access various interfaces such as <code>getStringSync</code> and <code>getMediaContent</code>. The provided interfaces are shown in the following diagrams:</p>
<p><img src="/../images/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E4%BA%86%E8%A7%A3HarmonyOS%20Next%E8%B5%84%E6%BA%90%E5%8F%8A%E8%AE%BF%E9%97%AE-1.png" alt="Resource Access API 1"><br><img src="/../images/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E4%BA%86%E8%A7%A3HarmonyOS%20Next%E8%B5%84%E6%BA%90%E5%8F%8A%E8%AE%BF%E9%97%AE-2.png" alt="Resource Access API 2"><br><img src="/../images/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E4%BA%86%E8%A7%A3HarmonyOS%20Next%E8%B5%84%E6%BA%90%E5%8F%8A%E8%AE%BF%E9%97%AE-3.png" alt="Resource Access API 3"></p>
<h3 id="5-Reference-Materials"><a href="#5-Reference-Materials" class="headerlink" title="5. Reference Materials"></a>5. Reference Materials</h3><ul>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/resource-categories-and-access-V5#%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95">Resource Classification and Access</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5">@ohos.resourceManager (Resource Management)</a></li>
</ul>
<h3 id="6-Summary"><a href="#6-Summary" class="headerlink" title="6. Summary"></a>6. Summary</h3><p>HarmonyOS Next provides resource directories similar to Android, including base, qualifier, and rawfile directories. The base directory contains compiled binary files, while qualifier directories store corresponding resources based on different languages or device types. The rawfile directory directly packages original files without compilation. Resources can be accessed through <code>$r</code> or <code>$rawfile</code>, or by using the ResourceManager interface.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/B-HarmonyOS-Next-ArkTS-Memory-Leak-Analysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/B-HarmonyOS-Next-ArkTS-Memory-Leak-Analysis/" class="post-title-link" itemprop="url">HarmonyOS Next ArkTS Memory Leak Analysis</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 11:59:03 / Modified: 12:02:04" itemprop="dateCreated datePublished" datetime="2025-06-27T11:59:03+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="HarmonyOS-Next-ArkTS-Memory-Leak-Analysis"><a href="#HarmonyOS-Next-ArkTS-Memory-Leak-Analysis" class="headerlink" title="HarmonyOS Next ArkTS Memory Leak Analysis"></a>HarmonyOS Next ArkTS Memory Leak Analysis</h2><p>Memory leaks are a common issue that can lead to performance degradation, application crashes, and even device memory exhaustion. In Android development, common causes of memory leaks include:  </p>
<ol>
<li><strong>View Holders Retaining Activity&#x2F;Fragment References</strong>: When inner classes or anonymous classes within an Activity or Fragment hold references to the parent component, preventing garbage collection.  </li>
<li><strong>Improper Context Handling</strong>: Directly using <code>Context</code> in Activities or Fragments without proper management can lead to leaks.  </li>
<li><strong>Strong References in Listeners&#x2F;Callbacks</strong>: Listeners or callbacks holding strong references to external objects, which persist even after the Activity&#x2F;Fragment is destroyed.  </li>
<li><strong>Unclosed Resources</strong>: Database connections, file streams, or network connections left open.  </li>
<li><strong>Improper Image Loading&#x2F;Release</strong>: Large images or incorrect handling of image resources.  </li>
<li><strong>Collection Classes Holding References</strong>: <code>ArrayList</code>, <code>HashMap</code>, etc., retaining strong references to external objects.  </li>
<li><strong>Singletons Holding Resources</strong>: Singletons retaining other resources without proper cleanup.</li>
</ol>
<p>In Android, tools like Android Studio’s <strong>Memory Profiler</strong> help detect and locate memory leaks. But what about HarmonyOS Next? What are the common memory leak scenarios, and how can we quickly identify them? This article explores ArkTS memory leak analysis.  </p>
<hr>
<h3 id="Memory-Leak-Analysis-Steps-in-HarmonyOS-Next"><a href="#Memory-Leak-Analysis-Steps-in-HarmonyOS-Next" class="headerlink" title="Memory Leak Analysis Steps in HarmonyOS Next"></a><strong>Memory Leak Analysis Steps in HarmonyOS Next</strong></h3><ol>
<li><strong>Capture a Snapshot Before the Leak</strong>: Take a memory snapshot before the suspected leak occurs.  </li>
<li><strong>Trigger the Leak Operation</strong>: Perform the operation suspected to cause the leak.  </li>
<li><strong>Capture a Second Snapshot</strong>: Take another snapshot after the leak operation.  </li>
<li><strong>Compare Snapshots</strong>: Analyze differences between the two snapshots to identify leaked objects.  </li>
<li><strong>Iterative Comparison</strong>: If multiple objects appear in both snapshots, repeat the leak-triggering process and compare again to observe linear growth trends, narrowing down the leak source.</li>
</ol>
<hr>
<h3 id="Recording-Snapshot-Template-Data"><a href="#Recording-Snapshot-Template-Data" class="headerlink" title="Recording Snapshot Template Data"></a><strong>Recording Snapshot Template Data</strong></h3><p>Use DevEco Studio’s <strong>Profiler</strong> tool to record memory snapshots:  </p>
<ol>
<li>Open <strong>Profiler</strong>, select the target device, and choose the debugging process.  </li>
<li>Navigate to <strong>Snapshot</strong>, select it, and click <strong>“Create Session”</strong>.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90.png" alt="Create Session">  </li>
<li>Click the green <strong>Play</strong> button to start recording.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-1.png" alt="Start Recording">  </li>
<li>The <strong>recording</strong> indicator in the timeline confirms active recording.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-2.png" alt="Recording Active">  </li>
<li>Click the <strong>camera icon</strong> to take a snapshot; a purple bar indicates completion.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-3.png" alt="Capture Snapshot">  </li>
<li>Export the snapshot data after recording.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-4.png" alt="Export Snapshot"></li>
</ol>
<hr>
<h3 id="Analyzing-Snapshot-Data"><a href="#Analyzing-Snapshot-Data" class="headerlink" title="Analyzing Snapshot Data"></a><strong>Analyzing Snapshot Data</strong></h3><p>Import the snapshot for analysis or directly inspect the purple snapshot regions:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-5.png" alt="Analyze Snapshot">  </p>
<p>Focus on analyzing ArkTS objects and methods.  </p>
<h4 id="Object-Analysis"><a href="#Object-Analysis" class="headerlink" title="Object Analysis"></a><strong>Object Analysis</strong></h4><h5 id="JSArray"><a href="#JSArray" class="headerlink" title="JSArray"></a><strong>JSArray</strong></h5><p>Expanding a <code>JSArray</code> reveals its elements:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-8.png" alt="JSArray Structure">  </p>
<ul>
<li><code>_proto_</code>: Prototype object (consistent across all arrays).  </li>
<li><code>length</code>: Built-in property accessor for array length.</li>
</ul>
<h5 id="JSObject"><a href="#JSObject" class="headerlink" title="JSObject"></a><strong>JSObject</strong></h5><p>Expanding a <code>JSObject</code> shows its internal properties:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-7.png" alt="JSObject Structure">  </p>
<p><strong>Example Code</strong>:  </p>
<pre><code class="language-typescript">class People &#123;
  old: number;
  name: string;
  constructor(old: number, name: string) &#123;
    this.old = old;
    this.name = name;
  &#125;
  printOld() &#123; console.log(&quot;old = &quot;, this.old); &#125;
  printName() &#123; console.log(&quot;name = &quot;, this.name); &#125;
&#125;
let p = new People(20, &quot;Tom&quot;);
</code></pre>
<p><strong>Snapshot Data</strong>:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-6.png" alt="JSObject Snapshot">  </p>
<ul>
<li><strong>Object <code>92729</code></strong> corresponds to the <code>People</code> class, showing its properties and methods.  </li>
<li>The <code>_proto_</code> of an instance points to the class declaration, which includes the <code>constructor</code>.  </li>
<li>Multiple instances share the same class declaration and constructor.</li>
</ul>
<h5 id="JSFunction"><a href="#JSFunction" class="headerlink" title="JSFunction"></a><strong>JSFunction</strong></h5><p>All <code>JSFunction</code> instances are listed under the <strong>(closure)</strong> tag:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-9.png" alt="JSFunction List">  </p>
<p>Expanding a function reveals its properties:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-10.png" alt="JSFunction Details">  </p>
<p>Key Properties:  </p>
<ul>
<li><strong>HomeObject</strong>: Parent object to which the function belongs.  </li>
<li><code>_proto_</code>: Prototype object.  </li>
<li><strong>LexicalEnv</strong>: Closure context.  </li>
<li><strong>name</strong>: Built-in accessor for the function name.  </li>
<li><strong>FunctionExtraInfo</strong>: Additional metadata (e.g., NAPI interface addresses).  </li>
<li><strong>ProtoOrHClass</strong>: Prototype or hidden class.</li>
</ul>
<p><strong>Anonymous&#x2F;Unnamed Functions</strong>:  </p>
<ul>
<li>If a function is unnamed (<code>anonymous()</code>), it may be a dynamically created function.  </li>
<li>If labeled <code>JSFunction()</code>, it might be a framework-generated function without an explicit name.  </li>
<li>Use <strong>references</strong> to infer the function’s purpose:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-11.png" alt="Function References"></li>
</ul>
<hr>
<h4 id="Method-Analysis"><a href="#Method-Analysis" class="headerlink" title="Method Analysis"></a><strong>Method Analysis</strong></h4><p><strong>Identifying Object Names</strong>:  </p>
<ul>
<li>For <strong>declared objects</strong>, check the <code>constructor</code> property.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-12.png" alt="Constructor Check">  </li>
<li>For <strong>instances</strong>, expand <code>_proto_</code> to find the <code>constructor</code>.<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-13.png" alt="Instance Constructor">  </li>
<li>Search code for <strong>distinctive properties</strong> to match objects.</li>
</ul>
<p><strong>Inheritance Analysis</strong>:<br>Expand <code>_proto_</code> to trace inheritance hierarchies:<br><img src="/../images/HarmonyOS%20Next%20ArkTS%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%88%86%E6%9E%90-14.png" alt="Inheritance Example"><br>The above shows that <code>Man</code> inherits from <code>People</code>.  </p>
<hr>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a><strong>Summary</strong></h3><p>This guide outlines the process of identifying and analyzing memory leaks in HarmonyOS Next ArkTS applications. By leveraging DevEco Studio’s <strong>Profiler</strong> and snapshot comparison, developers can pinpoint leaked objects, inspect their properties, and trace their origins. Key steps include:  </p>
<ol>
<li><strong>Capturing snapshots</strong> before and after suspected leaks.  </li>
<li><strong>Comparing data</strong> to identify abnormal object retention.  </li>
<li><strong>Analyzing objects</strong> (e.g., <code>JSArray</code>, <code>JSObject</code>, <code>JSFunction</code>) to understand their lifecycle.</li>
</ol>
<p>With these tools, developers can efficiently diagnose and resolve memory issues, ensuring robust and performant HarmonyOS applications.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/B-Introduction-to-the-ArkTS-Compilation-Toolchain-for-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/B-Introduction-to-the-ArkTS-Compilation-Toolchain-for-HarmonyOS-Next/" class="post-title-link" itemprop="url">Introduction to the ArkTS Compilation Toolchain for HarmonyOS Next</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 11:55:47 / Modified: 11:56:46" itemprop="dateCreated datePublished" datetime="2025-06-27T11:55:47+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Introduction-to-the-ArkTS-Compilation-Toolchain-for-HarmonyOS-Next"><a href="#Introduction-to-the-ArkTS-Compilation-Toolchain-for-HarmonyOS-Next" class="headerlink" title="Introduction to the ArkTS Compilation Toolchain for HarmonyOS Next"></a>Introduction to the ArkTS Compilation Toolchain for HarmonyOS Next</h2><p><img src="/../images/HarmonyOS%20Next%20ArkTS%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE%E4%BB%8B%E7%BB%8D.png"><br>In the field of HarmonyOS application development, ArkTS serves as a critical programming language, and its compilation process plays a pivotal role in determining an application’s performance, security, and development efficiency. The ArkTS compilation toolchain is a comprehensive suite of tools designed to provide end-to-end support for compiling ArkTS applications, ensuring that developers can efficiently transform ArkTS&#x2F;TS&#x2F;JS source code into Ark bytecode files (<code>*.abc</code>) that run seamlessly on HarmonyOS.  </p>
<hr>
<h2 id="I-Core-Functions-of-the-Compilation-Toolchain"><a href="#I-Core-Functions-of-the-Compilation-Toolchain" class="headerlink" title="I. Core Functions of the Compilation Toolchain"></a><strong>I. Core Functions of the Compilation Toolchain</strong></h2><h3 id="1-1-Syntax-Checking"><a href="#1-1-Syntax-Checking" class="headerlink" title="1.1 Syntax Checking"></a><strong>1.1 Syntax Checking</strong></h3><p>Syntax checking is the initial and crucial phase of compilation, responsible for verifying the grammatical correctness of ArkTS&#x2F;TS code. Even experienced developers inevitably introduce syntax errors during coding. If left undetected and uncorrected, these errors can prevent successful compilation or runtime execution. For instance, common mistakes such as missing semicolons when defining variables or mismatched parameter counts in function calls are precisely identified by syntax-checking tools, which provide detailed error messages. This not only helps developers quickly locate issues but also prevents potential runtime errors early in the development cycle, significantly improving efficiency.  </p>
<h3 id="1-2-UI-Transformation"><a href="#1-2-UI-Transformation" class="headerlink" title="1.2 UI Transformation"></a><strong>1.2 UI Transformation</strong></h3><p>ArkTS features a unique UI paradigm syntax that aligns with developers’ mental models for interface design. However, to facilitate subsequent compilation, this syntax must be converted into standard TS syntax. The UI transformation tool handles this conversion, automatically translating ArkTS UI-related code—such as declarative layout definitions and style declarations—into standard TS code.  </p>
<p>For example, a simple button component defined in ArkTS using concise, intuitive syntax for styling and click events is transformed into equivalent standard TS code. This ensures smooth processing in later compilation stages while preserving the component’s functionality and characteristics.  </p>
<h3 id="1-3-Source-Code-Obfuscation"><a href="#1-3-Source-Code-Obfuscation" class="headerlink" title="1.3 Source Code Obfuscation"></a><strong>1.3 Source Code Obfuscation</strong></h3><p>In today’s environment, where data security and intellectual property protection are paramount, source code obfuscation is essential. The ArkTS compilation toolchain integrates the ArkGuard obfuscation tool, which developers can enable based on their requirements. Obfuscation applies a series of transformations to the code—such as renaming variables and restructuring code—to make it difficult to reverse-engineer or analyze.  </p>
<p>For commercial applications, obfuscated code effectively safeguards core algorithms, business logic, and sensitive information, preventing competitors from easily accessing or exploiting them. This enhances both the security and competitiveness of the application.  </p>
<h3 id="1-4-Bytecode-Compilation"><a href="#1-4-Bytecode-Compilation" class="headerlink" title="1.4 Bytecode Compilation"></a><strong>1.4 Bytecode Compilation</strong></h3><p>Bytecode compilation is one of the core functions of the ArkTS compilation toolchain. The Ark Compiler transforms preprocessed code into Ark bytecode files (<code>*.abc</code>). Ark bytecode serves as an intermediate representation with advantages such as cross-platform compatibility and high execution efficiency. It can be interpreted and executed by the Ark runtime environment, ensuring consistent performance across different hardware devices and operating systems.  </p>
<p>Through bytecode compilation, ArkTS&#x2F;TS&#x2F;JS source code is converted into a format optimized for HarmonyOS, laying the foundation for efficient application execution.  </p>
<h3 id="1-5-Custom-Modification-of-Ark-Bytecode"><a href="#1-5-Custom-Modification-of-Ark-Bytecode" class="headerlink" title="1.5 Custom Modification of Ark Bytecode"></a><strong>1.5 Custom Modification of Ark Bytecode</strong></h3><p>To accommodate developers’ specific needs, the ArkTS compilation toolchain provides the capability to customize Ark bytecode before it is finalized. Developers can load and execute custom modification code at this stage, offering significant flexibility.  </p>
<p>For example:  </p>
<ul>
<li><strong>Performance Optimization</strong>: Developers can apply bytecode-level optimizations to specific algorithms or code blocks.  </li>
<li><strong>Feature Expansion</strong>: Custom logic can be injected to extend functionality.</li>
</ul>
<p>However, bytecode modifications must be performed cautiously, as incorrect changes may lead to application anomalies or runtime failures.  </p>
<h3 id="1-6-Disassembly"><a href="#1-6-Disassembly" class="headerlink" title="1.6 Disassembly"></a><strong>1.6 Disassembly</strong></h3><p>The disassembler tool, <strong>Disassembler</strong>, plays a vital role in development and debugging. It converts bytecode files into human-readable assembly instructions, allowing developers to inspect the exact content and execution logic of the bytecode.  </p>
<p>When performance issues or runtime anomalies arise, developers can use the disassembler to analyze bytecode, examine instruction sequences, and trace data processing flows to pinpoint root causes. This provides strong support for optimizing performance and troubleshooting complex problems.  </p>
<hr>
<h2 id="II-Detailed-Compilation-Process"><a href="#II-Detailed-Compilation-Process" class="headerlink" title="II. Detailed Compilation Process"></a><strong>II. Detailed Compilation Process</strong></h2><p>The ArkTS compilation toolchain’s workflow can be divided into the following stages:  </p>
<ol>
<li><p><strong>Syntax Transformation Stage</strong>  </p>
<ul>
<li><strong>Syntax Checking</strong>: The <code>Checker</code> first verifies the grammar of ArkTS&#x2F;TS source code. If errors are found, developers must fix them based on the prompts before proceeding.  </li>
<li><strong>UI Transformation</strong>: ArkTS UI paradigm syntax is converted into standard TS syntax. Optionally, ArkGuard can be used for source code obfuscation to enhance security.</li>
</ul>
</li>
<li><p><strong>Bytecode Generation Stage</strong>  </p>
<ul>
<li>The preprocessed code enters the bytecode compilation phase, where the Ark Compiler generates Ark bytecode.  </li>
<li>If custom bytecode modifications are required, developers can inject custom code at this stage before the final <code>*.abc</code> file is produced.</li>
</ul>
</li>
<li><p><strong>Application Packaging Stage</strong>  </p>
<ul>
<li>The generated bytecode files are packaged into a <code>.hap</code> file, which can be installed and run on HarmonyOS devices.  </li>
<li>This stage also involves resource integration, signing, and other operations to ensure the application’s integrity and security.</li>
</ul>
</li>
</ol>
<hr>
<h2 id="III-Conclusion"><a href="#III-Conclusion" class="headerlink" title="III. Conclusion"></a><strong>III. Conclusion</strong></h2><p>The ArkTS compilation toolchain, with its robust set of tools and rigorous compilation process, provides solid support for HarmonyOS application development. From fundamental syntax checking and UI transformation to critical bytecode compilation and secure source code obfuscation, and from flexible bytecode customization to practical disassembly capabilities, every component works in harmony to help developers build high-quality ArkTS applications.  </p>
<p>As the HarmonyOS ecosystem continues to evolve, the ArkTS compilation toolchain will undergo ongoing optimization and enhancement, delivering increasingly efficient and convenient development experiences. This will drive continuous advancements in HarmonyOS application development technologies, empowering developers to create innovative and high-performance applications.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/B-Introduction-to-CodeGenie-The-Most-Powerful-AI-Powered-Programming-Assistant-for-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/B-Introduction-to-CodeGenie-The-Most-Powerful-AI-Powered-Programming-Assistant-for-HarmonyOS-Next/" class="post-title-link" itemprop="url">Introduction to CodeGenie: The Most Powerful AI-Powered Programming Assistant for HarmonyOS Next</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 11:43:04 / Modified: 11:45:21" itemprop="dateCreated datePublished" datetime="2025-06-27T11:43:04+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Introduction-to-CodeGenie-The-Most-Powerful-AI-Powered-Programming-Assistant-for-HarmonyOS-Next"><a href="#Introduction-to-CodeGenie-The-Most-Powerful-AI-Powered-Programming-Assistant-for-HarmonyOS-Next" class="headerlink" title="Introduction to CodeGenie: The Most Powerful AI-Powered Programming Assistant for HarmonyOS Next"></a>Introduction to CodeGenie: The Most Powerful AI-Powered Programming Assistant for HarmonyOS Next</h2><h3 id="Background-Introduction"><a href="#Background-Introduction" class="headerlink" title="Background Introduction"></a>Background Introduction</h3><p>With the rise of large language models, AI-powered coding assistance has first found its application in the field of intelligent programming. From Microsoft Copilot internationally to domestic solutions like Alibaba’s Tongyi and ByteDance’s MarsCode, various Copilot-style intelligent programming tools have emerged. As a relatively new operating system that has only been available for about a year, HarmonyOS Next initially faced limitations in intelligence due to its limited codebase and documentation. However, with the rapid development of the HarmonyOS Next ecosystem, Huawei has officially launched its AI-powered programming assistant tool, CodeGenie.</p>
<p>The DevEco AI Programming Assistant (CodeGenie) provides developers with efficient AI-powered support for application and service development. It offers intelligent knowledge Q&amp;A capabilities, ArkTS code generation, and the ability to create Universal Cards, helping developers significantly improve their coding efficiency. CodeGenie operates as a plugin within the DevEco Studio environment. This article focuses on introducing CodeGenie’s capabilities and usage.</p>
<h3 id="Tool-Installation"><a href="#Tool-Installation" class="headerlink" title="Tool Installation"></a>Tool Installation</h3><ol>
<li><p><strong>Download from Official Website</strong></p>
<ul>
<li>Visit the <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/download/all">Huawei Developer Official Website</a> to find and download CodeGenie.<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D.png" alt="Download Page"></li>
</ul>
</li>
<li><p><strong>Installation in DevEco Studio</strong></p>
<ul>
<li>Open DevEco Studio → Click on “DevEco Studio” in the menu bar → Select “Preferences” → Click on “Plugins”<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-1.png" alt="Plugin Menu"></li>
<li>Click the settings icon → Select “Install Plugin from Disk” → Choose the downloaded CodeGenie package<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-2.png" alt="Install Step"></li>
<li>After installation, restart DevEco Studio<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-3.png" alt="Restart Prompt"></li>
</ul>
</li>
<li><p><strong>Activation</strong></p>
<ul>
<li>After restarting DevEco Studio, click on the CodeGenie icon on the right side to open the CodeGenie panel<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-4.png" alt="Tool Panel"></li>
<li>Click “Login” to complete the installation of CodeGenie<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-5.png" alt="Login Interface"></li>
</ul>
</li>
</ol>
<h3 id="CodeGenie-Feature-Overview"><a href="#CodeGenie-Feature-Overview" class="headerlink" title="CodeGenie Feature Overview"></a>CodeGenie Feature Overview</h3><p>CodeGenie currently offers three main capabilities: HarmonyOS applications, Universal Cards, and code generation.</p>
<h4 id="HarmonyOS-Applications"><a href="#HarmonyOS-Applications" class="headerlink" title="HarmonyOS Applications"></a>HarmonyOS Applications</h4><p>The HarmonyOS application feature (previously known as intelligent Q&amp;A) utilizes generative search capabilities to efficiently understand user intentions through query generation and content optimization services, providing interactive Q&amp;A for coding-related knowledge.<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-6.png" alt="HarmonyOS Application"></p>
<h4 id="Universal-Cards"><a href="#Universal-Cards" class="headerlink" title="Universal Cards"></a>Universal Cards</h4><p>Based on AI large models, this feature understands developers’ card requirements and intelligently generates HarmonyOS Universal Card projects through conversational interaction.</p>
<p>Official recommendations for describing card requirements:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>No.</strong></td>
<td><strong>Recommended Description Dimensions</strong></td>
<td><strong>Explanation</strong></td>
<td><strong>Examples</strong></td>
</tr>
<tr>
<td>1</td>
<td>Card Purpose</td>
<td>The purpose&#x2F;business scenario of the card, such as e-commerce shopping, entertainment, lifestyle services, etc.</td>
<td>Examples: “E-commerce shopping card”, “Entertainment card”</td>
</tr>
<tr>
<td>2</td>
<td>Card Functionality</td>
<td>Components included in the card, such as icons, titles, buttons, etc.; component state information, such as icon themes, title content, button text, etc.</td>
<td>Examples: “New product launch main title”, “Product search button”, “Hot movies subsection entry”</td>
</tr>
<tr>
<td>3</td>
<td>Card Dimensions</td>
<td>Four card sizes provided by HarmonyOS official website: 1<em>2 (micro card), 2</em>2 (small card), 2<em>4 (medium card), 4</em>4 (large card);<br><br>Card size is optional, AI will intelligently select the most suitable size based on the first two dimensions described.</td>
<td>Examples: “2*2 size card”, “medium card”</td>
</tr>
</tbody></table>
<p>Currently, incremental modifications through additional descriptions after generating the card preview are not supported.</p>
<p>Examples:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-7.png" alt="Example 1"><br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-8.png" alt="Example 2"></p>
<p>Click on the areas in the image to view the generated card’s UI code, configuration information, and download static resource files:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-9.png" alt="View Details"></p>
<p>There are two ways to save card projects:</p>
<p>Method 1: Manually save card code and configuration information using buttons like “Copy”, “Insert”, or “Create File” in the code&#x2F;configuration viewing window.</p>
<p>Method 2: Click the “Save Project” button to automatically save the card project, with card code, configuration, and static resource files automatically saved to the corresponding directories in the project. The logic code is selected by default, which is used to configure card events and data.</p>
<p>After clicking “Save Project,” a project configuration dialog will appear:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-12.png" alt="Project Configuration"></p>
<p>Click “Next” to modify the configuration code:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-13.png" alt="Configuration Modification"></p>
<p>After the project is saved, the following card-related files will be added to the project:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-10.png" alt="Project Files"></p>
<p>Additionally, you can customize the configuration logic code, which includes two categories:</p>
<ul>
<li>Card Data Interaction: Triggers card page refreshes. For application projects, data interaction can be triggered through database or network requests; for meta-service projects, data interaction is triggered via network requests.</li>
<li>Card Events: Use router events to navigate to specified UIAbilities, call events to launch UIAbilities in the background, and message events to refresh card content.</li>
</ul>
<h4 id="Code-Generation"><a href="#Code-Generation" class="headerlink" title="Code Generation"></a>Code Generation</h4><p>This feature utilizes AI large models to analyze and understand the context information in the code editing area or natural language descriptions, intelligently generating ArkTS or C++ code snippets that fit the context. It supports both shortcut-key triggered code generation in the code editing area and natural language description-based generation.</p>
<p>It is generally recommended to use code generation when there is sufficient context in the editor for the model to understand the programming scenario. With limited content in the editor, AI may not effectively understand user intent and generate appropriate code.</p>
<p>Model response requirements: Within 10 lines above the cursor, there should be more than 5 lines of valid code (excluding standalone {}、()、<code>[]</code> bracket lines, empty lines, and pure comment lines) to help the model understand the code context.</p>
<p>After installing CodeGenie, simply pause briefly while coding, and CodeGenie will instantly generate code at the current line. If you approve of the suggested content, press Tab to accept it, or press ESC to ignore the generated content.<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E5%BC%BAAI%E6%99%BA%E8%83%BD%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%20CodeGenie%E4%BB%8B%E7%BB%8D-11.png" alt="Code Generation"></p>
<p>When CodeGenie is installed, pressing Enter in the coding area will display multiple lines of code snippets generated by CodeGenie based on the context. Use the Tab key to accept the generated content or ESC to ignore it.</p>
<h3 id="Common-Keyboard-Shortcuts"><a href="#Common-Keyboard-Shortcuts" class="headerlink" title="Common Keyboard Shortcuts"></a>Common Keyboard Shortcuts</h3><ul>
<li>Enter: Trigger automatic generation under function&#x2F;method signatures</li>
<li>Tab: Accept current generation result</li>
<li>Esc: Ignore current generation result</li>
<li>Alt+[(Windows) &#x2F; Option+[(Mac): View previous recommendation</li>
<li>Alt+](Windows) &#x2F; Option+](Mac): View next recommendation</li>
<li>Alt+X(Windows) &#x2F; Option+X(Mac): Manually trigger single-line code generation</li>
<li>Alt+C(Windows) &#x2F; Option+C(Mac): Manually trigger code generation</li>
<li>Alt+R(Windows) &#x2F; Option+R(Mac): Regenerate code</li>
<li>Alt+U(Windows) &#x2F; Option+U(Mac): Open right-side dialog for features and settings</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/27/B-Best-Practices-for-Publishing-an-SDK-to-the-OpenHarmony-Central-Repository-in-HarmonyOS-Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/27/B-Best-Practices-for-Publishing-an-SDK-to-the-OpenHarmony-Central-Repository-in-HarmonyOS-Next/" class="post-title-link" itemprop="url">Best Practices for Publishing an SDK to the OpenHarmony Central Repository in HarmonyOS Next</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-27 11:37:18 / Modified: 11:39:57" itemprop="dateCreated datePublished" datetime="2025-06-27T11:37:18+08:00">2025-06-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HarmonyOS-Next-Tech/" itemprop="url" rel="index"><span itemprop="name">HarmonyOS Next Tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Best-Practices-for-Publishing-an-SDK-to-the-OpenHarmony-Central-Repository-in-HarmonyOS-Next"><a href="#Best-Practices-for-Publishing-an-SDK-to-the-OpenHarmony-Central-Repository-in-HarmonyOS-Next" class="headerlink" title="Best Practices for Publishing an SDK to the OpenHarmony Central Repository in HarmonyOS Next"></a>Best Practices for Publishing an SDK to the OpenHarmony Central Repository in HarmonyOS Next</h2><h3 id="Background-Introduction"><a href="#Background-Introduction" class="headerlink" title="Background Introduction"></a>Background Introduction</h3><p>Previously, during the adaptation of Mars in HarmonyOS Next, we submitted a PR to the official Mars repository for xlog compatibility. Some developers privately requested compiled xlog dynamic libraries, so we decided to open-source the qlog source code (<a target="_blank" rel="noopener" href="https://gitcode.com/wodekouwei/qlog">https://gitcode.com/wodekouwei/qlog</a>) for easier access. To facilitate usage, we aimed to upload the compiled binaries to the OpenHarmony central repository. This article documents the publishing process to help other developers.</p>
<h3 id="QLog-Introduction"><a href="#QLog-Introduction" class="headerlink" title="QLog Introduction"></a>QLog Introduction</h3><p>QLog is a persistent logging library that asynchronously encrypts and compresses console logs into files, making it easier for developers to view and analyze logs, especially for troubleshooting online issues.</p>
<p>QLog is based on WeChat’s XLog, a high-performance logging system designed for WeChat’s mobile clients (Android&#x2F;iOS). Key features include:</p>
<ol>
<li><p><strong>Encryption &amp; Security</strong></p>
<ul>
<li><strong>Log Encryption</strong>: All logs are encrypted (e.g., AES) during storage and transmission to prevent sensitive data leaks and comply with privacy regulations.</li>
<li><strong>Tamper-Proof</strong>: Encrypted logs cannot be modified, ensuring integrity and trustworthiness.</li>
</ul>
</li>
<li><p><strong>High Performance &amp; Low Overhead</strong></p>
<ul>
<li><strong>Asynchronous Writing</strong>: Logs are written in background threads to avoid blocking the main thread, ensuring app smoothness.</li>
<li><strong>Memory-Mapped Files (mmap)</strong>: Direct file writing via memory mapping reduces I&#x2F;O operations, improving efficiency.</li>
<li><strong>Compression</strong>: Logs are compressed before storage or upload, reducing disk usage and network traffic.</li>
</ul>
</li>
<li><p><strong>Flexible Log Levels</strong></p>
<ul>
<li>Supports multiple log levels (VERBOSE, DEBUG, INFO, WARN, ERROR), allowing developers to filter logs as needed.</li>
<li>Dynamic log level adjustment (e.g., only ERROR logs in production) balances debugging and performance.</li>
</ul>
</li>
<li><p><strong>Log Retrieval Mechanism</strong></p>
<ul>
<li><strong>Remote Trigger</strong>: Servers can instruct clients to upload specific logs without user intervention, simplifying issue diagnosis.</li>
<li><strong>Conditional Filtering</strong>: Logs can be retrieved by time, user ID, log level, etc., for precise debugging.</li>
</ul>
</li>
<li><p><strong>Fault Tolerance &amp; Stability</strong></p>
<ul>
<li><strong>Error Handling</strong>: Automatically downgrades or caches logs if writing fails or storage is full, preventing crashes.</li>
<li><strong>Chunked Storage</strong>: Logs are split by size or time to avoid performance issues with large files.</li>
</ul>
</li>
<li><p><strong>Cross-Platform Support</strong></p>
<ul>
<li>Supports Android and iOS with a unified API, reducing maintenance costs.</li>
</ul>
</li>
<li><p><strong>Selective Logging Control</strong></p>
<ul>
<li>Non-critical logs can be disabled to save resources in production.</li>
<li>Dynamic module-level logging enables targeted debugging.</li>
</ul>
</li>
<li><p><strong>Typical Use Cases</strong></p>
<ul>
<li><strong>Issue Tracking</strong>: Encrypt and retrieve logs to diagnose user-reported crashes.</li>
<li><strong>Performance Monitoring</strong>: Record key metrics (e.g., startup time) with minimal overhead.</li>
<li><strong>Security Auditing</strong>: Encrypted logs provide tamper-proof records of sensitive operations.</li>
</ul>
</li>
</ol>
<p>XLog balances security, performance, and flexibility, making it ideal for large-scale mobile apps. QLog brings these capabilities to the HarmonyOS platform.</p>
<h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><h5 id="Dependency-Installation"><a href="#Dependency-Installation" class="headerlink" title="Dependency Installation"></a>Dependency Installation</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ohpm i @qing/qlog</span><br></pre></td></tr></table></figure>
<p>For OpenHarmony <code>ohpm</code> setup, refer to <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/help/downloadandinstall">How to Install OpenHarmony ohpm Packages</a>.</p>
<h5 id="Initialize-QLogSDK"><a href="#Initialize-QLogSDK" class="headerlink" title="Initialize QLogSDK"></a>Initialize QLogSDK</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LogDep</span> <span class="keyword">implements</span> <span class="title class_">LogDependency</span> &#123;</span><br><span class="line">  <span class="title function_">isDebug</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// Debug mode prints more logs</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getFileLogLevel</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">LogLevel</span>.<span class="property">LEVEL_DEBUG</span>; <span class="comment">// Set log level</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">LogSdk</span>.<span class="title function_">init</span>(<span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getApplicationContext</span>(), <span class="keyword">new</span> <span class="title class_">LogDep</span>());</span><br></pre></td></tr></table></figure>

<h5 id="Log-Messages"><a href="#Log-Messages" class="headerlink" title="Log Messages"></a>Log Messages</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Logg</span>.<span class="title function_">d</span>(<span class="string">&#x27;HelloWorldTAG&#x27;</span>, <span class="string">&#x27;debug log...&#x27;</span>);</span><br><span class="line"><span class="title class_">Logg</span>.<span class="title function_">i</span>(<span class="string">&#x27;HelloWorldTAG&#x27;</span>, <span class="string">&#x27;info log...&#x27;</span>);</span><br><span class="line"><span class="title class_">Logg</span>.<span class="title function_">w</span>(<span class="string">&#x27;HelloWorldTAG&#x27;</span>, <span class="string">&#x27;warn log...&#x27;</span>);</span><br><span class="line"><span class="title class_">Logg</span>.<span class="title function_">e</span>(<span class="string">&#x27;HelloWorldTAG&#x27;</span>, <span class="string">&#x27;error log...&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="Retrieve-Log-Files"><a href="#Retrieve-Log-Files" class="headerlink" title="Retrieve Log Files"></a>Retrieve Log Files</h5><p>Logs are stored in the app’s sandbox:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-5.png" alt="Log Storage"><br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-6.png" alt="Log Storage"></p>
<p>Logs are retained for up to 10 days and auto-cleaned on app startup. Use <code>Log.uploadLogFiles()</code> to compress and retrieve logs. Decrypt the exported ZIP file with <code>decod_mars.py</code>.</p>
<hr>
<h3 id="Publishing-Process"><a href="#Publishing-Process" class="headerlink" title="Publishing Process"></a>Publishing Process</h3><ol>
<li><p><strong>Prepare Files in the Library Module</strong> (same level as <code>src</code>):</p>
<ul>
<li><code>README.md</code>: Describe the package and usage.</li>
<li><code>CHANGELOG.md</code>: Version update history.</li>
<li><code>LICENSE</code>: License file.</li>
</ul>
</li>
<li><p><strong>Recompile the Library</strong> to generate a <code>*.har</code> file.</p>
</li>
<li><p><strong>Generate SSH Keys</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -m PEM -t RSA -b 4096 -f ~/.ssh_ohpm/mykey</span><br></pre></td></tr></table></figure>
<ul>
<li>Private key: <code>mykey</code> (specify path).</li>
<li>Public key: <code>mykey.pub</code> (auto-generated in the same directory).</li>
<li><strong>Note</strong>: <code>ohpm</code> requires encrypted keys with a password.</li>
</ul>
</li>
<li><p><strong>Add Public Key to OpenHarmony Center</strong>:</p>
<ul>
<li>Visit <a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/home">OpenHarmony ohpm</a>, click <strong>Profile</strong>, and paste <code>mykey.pub</code> under <strong>Public Key</strong>.<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-7.png" alt="Add Public Key"></li>
</ul>
</li>
<li><p><strong>Configure <code>.ohpmrc</code></strong>:</p>
<ul>
<li>Set the private key path:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ohpm config <span class="built_in">set</span> key_path ~/.ssh_ohpm/mykey</span><br></pre></td></tr></table></figure></li>
<li>Get the <strong>Publish Code</strong> from the website and configure it:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ohpm config <span class="built_in">set</span> publish_id your_publish_id</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>Publish the HAR File</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ohpm publish &lt;HAR路径&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>Wait for Review</strong>:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-10.png" alt="Review Status"></p>
<p>After approval, the package will appear in the repository:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-11.png" alt="Package Listing"></p>
<hr>
<h3 id="Common-Issues"><a href="#Common-Issues" class="headerlink" title="Common Issues"></a>Common Issues</h3><h4 id="1-oh-package-json5-Configuration"><a href="#1-oh-package-json5-Configuration" class="headerlink" title="1. oh-package.json5 Configuration"></a>1. <code>oh-package.json5</code> Configuration</h4><p>Example:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@qing/qlog&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Persistent log utility for HarmonyOS Next.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Index.ets&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;qingkouwei&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;homepage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://gitcode.com/wodekouwei/qlog&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;repository&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://gitcode.com/wodekouwei/qlog&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compatibleSdkVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compatibleSdkType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HarmonyOS&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;obfuscated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Fields Displayed in Repository</strong>:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-8.png" alt="Repository Details"></li>
<li>Ensure <code>license</code> matches the <code>LICENSE</code> file.</li>
<li>If using a <strong>namespace</strong> (e.g., <code>@group/name</code>), register it in <strong>Organization Management</strong>:<br><img src="/../images/HarmonyOS%20Next%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E5%8F%91%E5%B8%83SDK%E5%88%B0OpenHarmony%20%E4%B8%AD%E5%BF%83%E4%BB%93-9.png" alt="Namespace Registration"></li>
</ul>
<h4 id="2-Private-Key-Password-Requirement"><a href="#2-Private-Key-Password-Requirement" class="headerlink" title="2. Private Key Password Requirement"></a>2. Private Key Password Requirement</h4><p>Always set a password when generating keys:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -m PEM -t RSA -b 4096 -f ~/.ssh_ohpm/mykey</span><br></pre></td></tr></table></figure>

<h4 id="3-Publishing-to-Both-Private-and-Central-Repositories"><a href="#3-Publishing-to-Both-Private-and-Central-Repositories" class="headerlink" title="3. Publishing to Both Private and Central Repositories"></a>3. Publishing to Both Private and Central Repositories</h4><p>To avoid overwriting <code>.ohpmrc</code>, specify central repo settings during publish:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ohpm publish --publish_registry https://ohpm.openharmony.cn/ohpm --publish_id xxx --key_path ~/.ssh_ohpm/mykey qloglib/build/default/outputs/default/qloglib.har</span><br></pre></td></tr></table></figure>
<p>For command details, see <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-ohpm-publish-V5">ohpm Publish Docs</a>.</p>
<hr>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>This guide outlines the steps to publish a HAR file to the OpenHarmony central repository using <code>ohpm</code>, including key generation, configuration, and submission. Key takeaways:</p>
<ul>
<li><strong>Security</strong>: Always set passwords for SSH keys.</li>
<li><strong>Metadata</strong>: Ensure <code>oh-package.json5</code> and <code>LICENSE</code> are accurate.</li>
<li><strong>Review</strong>: Double-check parameters to avoid submission failures.</li>
</ul>
<p>By following these practices, developers can efficiently manage and share SDKs within the OpenHarmony ecosystem.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
