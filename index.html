<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/331-Daily-HarmonyOS-Next-Knowledge-Modify-Status-Bar-Background-Input-Box-Height-Adaptation-Immersive-Effect-Call-Methods-Based-on-Strings-Set-Blur-Effect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/331-Daily-HarmonyOS-Next-Knowledge-Modify-Status-Bar-Background-Input-Box-Height-Adaptation-Immersive-Effect-Call-Methods-Based-on-Strings-Set-Blur-Effect/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Modify Status Bar Background, Input Box Height Adaptation, Immersive Effect, Call Methods Based on Strings, Set Blur Effect</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:41:01 / Modified: 22:41:21" itemprop="dateCreated datePublished" datetime="2025-06-26T22:41:01+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Modify-Status-Bar-Background-Input-Box-Height-Adaptation-Immersive-Effect-Call-Methods-Based-on-Strings-Set-Blur-Effect"><a href="#Daily-HarmonyOS-Next-Knowledge-Modify-Status-Bar-Background-Input-Box-Height-Adaptation-Immersive-Effect-Call-Methods-Based-on-Strings-Set-Blur-Effect" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Modify Status Bar Background, Input Box Height Adaptation, Immersive Effect, Call Methods Based on Strings, Set Blur Effect"></a>[Daily HarmonyOS Next Knowledge] Modify Status Bar Background, Input Box Height Adaptation, Immersive Effect, Call Methods Based on Strings, Set Blur Effect</h3><h4 id="1-How-to-modify-the-status-bar-background-to-black-and-font-to-white-in-HarmonyOS"><a href="#1-How-to-modify-the-status-bar-background-to-black-and-font-to-white-in-HarmonyOS" class="headerlink" title="1. How to modify the status bar background to black and font to white in HarmonyOS?"></a>1. How to modify the status bar background to black and font to white in HarmonyOS?</h4><p>Tool class GlobalContext  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GlobalContext</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="attr">instance</span>: <span class="title class_">GlobalContext</span>;</span><br><span class="line">  <span class="keyword">private</span> _objects = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Object</span>&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">getContext</span>(): <span class="title class_">GlobalContext</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">GlobalContext</span>.<span class="property">instance</span>) &#123;</span><br><span class="line">      <span class="title class_">GlobalContext</span>.<span class="property">instance</span> = <span class="keyword">new</span> <span class="title class_">GlobalContext</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">GlobalContext</span>.<span class="property">instance</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getObject</span>(<span class="attr">value</span>: <span class="built_in">string</span>): <span class="title class_">Object</span> | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_objects</span>.<span class="title function_">get</span>(value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setObject</span>(<span class="attr">key</span>: <span class="built_in">string</span>, <span class="attr">objectClass</span>: <span class="title class_">Object</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_objects</span>.<span class="title function_">set</span>(key, objectClass);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2. How to adapt the height of TextInput and cancel the upper and lower spacing in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The height of TextInput is related to the font size. The TextInput box comes with built-in top and bottom margins. To remove them, set the padding attribute and coordinate with the fontSize to make characters fit the input box without margins.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">customValue</span>: <span class="built_in">string</span> = <span class="string">&#x27;文本内容&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">message</span>, <span class="attr">placeholder</span>: <span class="string">&quot;搜索&quot;</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">20</span>) <span class="comment">// TextInput height is related to font size</span></span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">          .<span class="title function_">placeholderColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">          .<span class="title function_">placeholderFont</span>(&#123; <span class="attr">size</span>: <span class="number">20</span> &#125;) <span class="comment">// Hint font size is also related to height; it is recommended to set them uniformly</span></span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">20</span> &#125;) <span class="comment">// The upper and lower spacing is specified as such</span></span><br><span class="line">          .<span class="title function_">enterKeyType</span>(<span class="title class_">EnterKeyType</span>.<span class="property">Search</span>)</span><br><span class="line">          .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">message</span> = value</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">customValue</span>, <span class="attr">placeholder</span>: <span class="string">&#x27;自定义&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">padding</span>(<span class="number">0</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          <span class="comment">// .placeholderFont(&#123;size:40&#125;)</span></span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Brown</span>)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. Can the expandSafeArea for immersive effect in HarmonyOS development be dynamically refreshed based on parameters?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Dynamic refresh can be achieved through parameters.  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;Top Row&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">40</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F08080&#x27;</span>)</span><br><span class="line">  <span class="comment">// Set the top drawing to extend to the status bar</span></span><br><span class="line">  .<span class="title function_">expandSafeArea</span>([<span class="title class_">SafeAreaType</span>.<span class="property">SYSTEM</span>], [<span class="title class_">SafeAreaEdge</span>.<span class="property">TOP</span>])</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;Top Row&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">40</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to call methods based on configuration strings in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In a List, when an item is clicked, it is desired to call the corresponding function based on the method name (string) configured for the item.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reference demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">dddd</span> &#123;</span><br><span class="line">  <span class="attr">fun</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Function</span>&gt; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fun</span> = &#123; <span class="string">&#x27;ssss&#x27;</span>: <span class="variable language_">this</span>.<span class="property">ddd1</span>, <span class="string">&#x27;sdss&#x27;</span>: <span class="variable language_">this</span>.<span class="property">ccc</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">ddd1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ddd1&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">ccc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;cccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// When calling:</span></span><br><span class="line"><span class="keyword">import</span> display <span class="keyword">from</span> <span class="string">&#x27;@ohos.display&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; dddd &#125; <span class="keyword">from</span> <span class="string">&#x27;./FunTest&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">DisplayTest</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">ddd</span>: dddd = <span class="keyword">new</span> <span class="title function_">dddd</span>()</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Test&#x27;</span>)</span><br><span class="line">        .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ddd</span>.<span class="property">fun</span>[<span class="string">&#x27;ssss&#x27;</span>]()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ddd</span>.<span class="property">fun</span>[<span class="string">&#x27;sdss&#x27;</span>]()</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to set a blur effect for the current page or application in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For adding content blur, refer to the documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-blur-effect-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Animation effects can enrich interface details and enhance the realism and quality of the UI. For example, blur and shadow effects can make objects appear more three-dimensional, making animations more vivid. ArkUI provides rich effect interfaces, allowing developers to quickly create exquisite and personalized effects. This chapter mainly introduces commonly used effect interfaces such as blur, shadow, and color effects.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Blur can be used to reflect the depth of the interface space and distinguish the hierarchical relationship between front and rear elements.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Interface               | Description                                                                 |</span></span><br><span class="line"><span class="string">| :--------------------- | :-------------------------------------------------------------------------- |</span></span><br><span class="line"><span class="string">| backdropBlur           | Adds a background blur effect to the current component, with the input being the blur radius.                     |</span></span><br><span class="line"><span class="string">| blur                   | Adds a content blur effect to the current component, with the input being the blur radius.                       |</span></span><br><span class="line"><span class="string">| backgroundBlurStyle    | Adds a background blur effect to the current component, with the input being the blur style.                     |</span></span><br><span class="line"><span class="string">| foregroundBlurStyle    | Adds a content blur effect to the current component, with the input being the blur style.                       |</span></span><br><span class="line"><span class="string">| motionBlur             | Adds a dynamic blur effect during motion caused by scaling or displacement changes to the current component, with inputs being the blur radius and anchor coordinates. |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example of using backdropBlur to add background blur to a component:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BlurEffectsExample</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;backdropBlur&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">backdropBlur</span>(<span class="number">10</span>) <span class="comment">// Blurs the background</span></span><br><span class="line">        .<span class="title function_">backgroundImage</span>($r(<span class="string">&#x27;app.media.share&#x27;</span>))</span><br><span class="line">        .<span class="title function_">backgroundImageSize</span>(&#123; <span class="attr">width</span>: <span class="number">400</span>, <span class="attr">height</span>: <span class="number">300</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;50%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/330-Daily-HarmonyOS-Next-Knowledge-Multi-level-Variables-Concurrent-Method-Errors-Navigation-Scenarios-State-Variable-Issues-Seamless-Transition-Animation-Solutions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/330-Daily-HarmonyOS-Next-Knowledge-Multi-level-Variables-Concurrent-Method-Errors-Navigation-Scenarios-State-Variable-Issues-Seamless-Transition-Animation-Solutions/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Multi-level Variables, Concurrent Method Errors, Navigation Scenarios, State Variable Issues, Seamless Transition Animation Solutions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:39:10 / Modified: 22:39:39" itemprop="dateCreated datePublished" datetime="2025-06-26T22:39:10+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Multi-level-Variables-Concurrent-Method-Errors-Navigation-Scenarios-State-Variable-Issues-Seamless-Transition-Animation-Solutions"><a href="#Daily-HarmonyOS-Next-Knowledge-Multi-level-Variables-Concurrent-Method-Errors-Navigation-Scenarios-State-Variable-Issues-Seamless-Transition-Animation-Solutions" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Multi-level Variables, Concurrent Method Errors, Navigation Scenarios, State Variable Issues, Seamless Transition Animation Solutions"></a>[Daily HarmonyOS Next Knowledge] Multi-level Variables, Concurrent Method Errors, Navigation Scenarios, State Variable Issues, Seamless Transition Animation Solutions</h3><h4 id="1-How-to-synchronize-changes-in-multi-level-variables-to-the-UI-in-HarmonyOS"><a href="#1-How-to-synchronize-changes-in-multi-level-variables-to-the-UI-in-HarmonyOS" class="headerlink" title="1. How to synchronize changes in multi-level variables to the UI in HarmonyOS?"></a>1. How to synchronize changes in multi-level variables to the UI in HarmonyOS?</h4><p>How to synchronize changes in attribute values of nested classes (3-4 levels deep) to the UI?  </p>
<p>Reference demo:  </p>
<pre><code class="language-typescript">@Observed
class type extends Array&lt;Person&gt; &#123;

&#125;

@Observed
class Grade &#123;
  chinese: boolean;
  math: boolean;
  constructor(chinese: boolean, math: boolean) &#123;
    this.chinese = chinese;
    this.math = math;
  &#125;
&#125;

@Observed
class Person &#123;
  name: string;
  age: number;
  changed: boolean;
  grage: Grade;
  constructor(name: string, age: number, changed: boolean, grade: Grade) &#123;
    this.name = name;
    this.age = age;
    this.changed = changed;
    this.grage = grade;
  &#125;
&#125;

@Component
struct ItemView1 &#123;
  @ObjectLink person1: type;
  build() &#123;
    Column() &#123;
      Text(JSON.stringify(this.person1));
    &#125;
  &#125;
&#125;

@Component
struct ItemView &#123;
  @ObjectLink person: Person;
  build() &#123;
    Column() &#123;
      Row() &#123;
        Text(this.person.name).itemText(this.person.changed);
        Blank();
        Text(this.person.age.toString()).itemText(this.person.changed);
      &#125;
      .width(&#39;100%&#39;)
      .height(50)
      .padding(5)
      .backgroundColor(&#39;#F7F8FA&#39;)
      .onClick(() =&gt; &#123;
        this.person.age++;
        this.person.changed = true;
        this.person.grage.chinese = !this.person.grage.chinese;
        this.person.grage.math = !this.person.grage.math;
      &#125;);
      Text(&quot;chinese:&quot; + this.person.grage.chinese);
      Text(&quot;math:&quot; + this.person.grage.math);
    &#125;
  &#125;
&#125;

@Entry
@Component
struct ObjectArrDemo2Page &#123;
  @State per1: Person = new Person(&#39;Roes&#39;, 12, false, new Grade(true, false));
  @State persons: Person[] = [this.per1];
  private count: number = 0;
  build() &#123;
    Column(&#123; space: 10 &#125;) &#123;
      ItemView1(&#123; person1: [this.per1] &#125;);

      List(&#123; space: 5 &#125;) &#123;
        ForEach(this.persons, (item: Person, index: number) =&gt; &#123;
          ListItem() &#123;
            ItemView(&#123; person: item &#125;);
          &#125;
        &#125;);
      &#125;
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .padding(5);
  &#125;
&#125;

@Extend(Text)
function itemText(changed: boolean) &#123;
  .fontSize(22)
  .fontColor(changed ? &#39;#21A3A1&#39; : &#39;#000000&#39;);
&#125;
</code></pre>
<h4 id="2-Error-when-instantiating-an-object-in-a-HarmonyOS-Concurrent-decorated-method"><a href="#2-Error-when-instantiating-an-object-in-a-HarmonyOS-Concurrent-decorated-method" class="headerlink" title="2. Error when instantiating an object in a HarmonyOS @Concurrent decorated method?"></a>2. Error when instantiating an object in a HarmonyOS @Concurrent decorated method?</h4><p>Method A is decorated with @Concurrent:  </p>
<ol>
<li>If the OBData object and Method A are defined in the same file, instantiating OBData in Method A throws an error.  </li>
<li>If OBData is defined in another file, instantiating OBData in Method A works fine.</li>
</ol>
<p>@Concurrent allows using local variables, parameters, and variables imported via <code>import</code>. Using closure variables is prohibited.  </p>
<h4 id="3-Use-cases-for-HarmonyOS-Navigator"><a href="#3-Use-cases-for-HarmonyOS-Navigator" class="headerlink" title="3. Use cases for HarmonyOS Navigator?"></a>3. Use cases for HarmonyOS Navigator?</h4><p>What are the use cases for the Navigator component? How does it differ from Navigation in terms of route navigation?  </p>
<p><strong>Navigator</strong> is a routing container component that provides route navigation capabilities. It is not recommended for future development; use <strong>Navigation</strong> instead. <strong>Navigation</strong> is typically used as the root container for Page components and displays the page title bar, toolbar, navigation bar, etc. via properties.<br>Navigation reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5</a>  </p>
<h4 id="4-UI-not-updating-when-modifying-properties-of-an-ObjectLink-decorated-element-in-HarmonyOS"><a href="#4-UI-not-updating-when-modifying-properties-of-an-ObjectLink-decorated-element-in-HarmonyOS" class="headerlink" title="4. UI not updating when modifying properties of an ObjectLink decorated element in HarmonyOS?"></a>4. UI not updating when modifying properties of an ObjectLink decorated element in HarmonyOS?</h4><p>When dragging Module A to swap with Module B, Module A should hide during dragging and reappear after the swap. Currently, it remains visible after the swap.  </p>
<p>This can be achieved by importing third-party libraries <code>reflect-metadata</code> and <code>class-transformer</code>. Refer to the following demo:  </p>
<pre><code class="language-typescript">// TestJson.ets
import &#123; plainToClass, Type &#125; from &#39;class-transformer&#39;;
import &#39;reflect-metadata&#39;;
import &#123; Person, ViewA &#125; from &#39;./ViewA&#39;;

class ResponseObj &#123;
  @Type(() =&gt; Person)
  data: Person[] = [];
&#125;

@Entry
@Component
struct TestJson &#123;
  @State list: Person[] = [];
  @State message: string = &#39;Click me&#39;;
  
  aboutToAppear(): void &#123;
    let str = &#39;&#123;&quot;data&quot; : [&#123;&quot;number&quot; :1,&quot;age&quot;: 20, &quot;testA&quot;: &#123; &quot;str&quot; : &quot;123&quot;&#125;&#125;,&#123;&quot;number&quot; :2,&quot;age&quot;: 21,&quot;testA&quot;: &#123;&quot;str&quot; : &quot;456&quot;&#125;&#125;]&#125;&#39;;
    let jsonData: ESObject = JSON.parse(str);
    let responseObj: ResponseObj = plainToClass(ResponseObj, jsonData);
    console.log(`$&#123;responseObj.data[0] instanceof Person&#125;`);
    this.list = this.list.concat(responseObj.data);
  &#125;
  
  build() &#123;
    Row() &#123;
      Column() &#123;
        ForEach(this.list, (item: Person, index: number) =&gt; &#123;
          ViewA(&#123; index: index, testA: item.testA &#125;);
        &#125;);
      &#125;
      .width(&#39;100%&#39;);
    &#125;
    .height(&#39;100%&#39;);
  &#125;
&#125;

// ViewA.ets
import &#123; Type &#125; from &#39;class-transformer&#39;;

@Observed
export class TestA &#123;
  public str: string;
  constructor(str: string) &#123;
    this.str = str;
  &#125;
&#125;

export class Person &#123;
  name: string = &#39;&#39;;
  age: number = 1;
  @Type(() =&gt; TestA)
  testA: TestA = new TestA(&#39;&#39;);
&#125;

@Component
export struct ViewA &#123;
  @ObjectLink testA: TestA;
  index: number = -1;
  
  build() &#123;
    Row() &#123;
      Button(`View A $&#123;this.testA.str&#125;`).onClick(() =&gt; &#123;
        this.index += 1;
        this.testA.str = `$&#123;this.index&#125; : Test A String`;
      &#125;);
    &#125;.margin(&#123; top: 10 &#125;);
  &#125;
&#125;
</code></pre>
<h4 id="5-Recommended-seamless-transition-animation-solutions-for-HarmonyOS"><a href="#5-Recommended-seamless-transition-animation-solutions-for-HarmonyOS" class="headerlink" title="5. Recommended seamless transition animation solutions for HarmonyOS?"></a>5. Recommended seamless transition animation solutions for HarmonyOS?</h4><p>Refer to the documentation for transition animations: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-animation-transition-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-animation-transition-V5</a>  </p>
<p>Slide-out transitions can be achieved by setting the <code>translate</code> property. Example of sliding down:  </p>
<pre><code class="language-typescript">import curves from &#39;@ohos.curves&#39;;

@Entry
@Component
struct TransitionEffectDemo &#123;
  @State isPresent: boolean = true;

  // Step 1: Create TransitionEffect
  private effect: TransitionEffect =
    TransitionEffect.OPACITY.animation(&#123; curve: curves.springMotion(0.6, 0.8) &#125;)
      .combine(TransitionEffect.translate(&#123; y: 150 &#125;).animation(&#123; curve: curves.springMotion() &#125;));

  build() &#123;
    Stack() &#123;
      if (this.isPresent) &#123;
        Column() &#123;
          Text(&#39;ArkUI&#39;)
            .fontWeight(FontWeight.Bold)
            .fontSize(20)
            .fontColor(Color.White);
        &#125;
        .justifyContent(FlexAlign.Center)
        .width(150)
        .height(150)
        .borderRadius(10)
        .backgroundColor(0xf56c6c)
        // Step 2: Apply the transition effect via the transition interface
        .transition(this.effect);
      &#125;

      // Border
      Column()
        .width(155)
        .height(155)
        .border(&#123;
          width: 5,
          radius: 10,
          color: Color.Black
        &#125;);

      // Step 3: Trigger the transition by adding/removing components
      Button(&#39;Click&#39;)
        .margin(&#123; top: 320 &#125;)
        .onClick(() =&gt; &#123;
          this.isPresent = !this.isPresent;
        &#125;);
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;60%&#39;);
  &#125;
&#125;
</code></pre>
<ul>
<li>Refer to this codelab for various transition animations: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-TransitionAnimation">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-TransitionAnimation</a>  </li>
<li>ArkTS does not recommend page transition animations. For better effects, use the Navigation component and modal transitions. See: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-transition-animation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-page-transition-animation-V5</a>  </li>
<li>Control page entry&#x2F;exit effects with <code>pageTransition</code>. Parameters and examples: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-page-transition-animation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-page-transition-animation-V5</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/329-Daily-HarmonyOS-Next-Knowledge-Extending-to-Status-Bar-Global-Storage-Issues-State-Variable-Collaboration-Refresh-Component-Usage-Scrolling-to-Fixed-Position/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/329-Daily-HarmonyOS-Next-Knowledge-Extending-to-Status-Bar-Global-Storage-Issues-State-Variable-Collaboration-Refresh-Component-Usage-Scrolling-to-Fixed-Position/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Extending to Status Bar, Global Storage Issues, State Variable Collaboration, Refresh Component Usage, Scrolling to Fixed Position</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:37:37 / Modified: 22:38:22" itemprop="dateCreated datePublished" datetime="2025-06-26T22:37:37+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Extending-to-Status-Bar-Global-Storage-Issues-State-Variable-Collaboration-Refresh-Component-Usage-Scrolling-to-Fixed-Position"><a href="#Daily-HarmonyOS-Next-Knowledge-Extending-to-Status-Bar-Global-Storage-Issues-State-Variable-Collaboration-Refresh-Component-Usage-Scrolling-to-Fixed-Position" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Extending to Status Bar, Global Storage Issues, State Variable Collaboration, Refresh Component Usage, Scrolling to Fixed Position"></a>[Daily HarmonyOS Next Knowledge] Extending to Status Bar, Global Storage Issues, State Variable Collaboration, Refresh Component Usage, Scrolling to Fixed Position</h3><h4 id="1-HarmonyOS-Page-top-extension-to-status-bar-is-ineffective"><a href="#1-HarmonyOS-Page-top-extension-to-status-bar-is-ineffective" class="headerlink" title="1. HarmonyOS: Page top extension to status bar is ineffective?"></a>1. HarmonyOS: Page top extension to status bar is ineffective?</h4><p>Refer to the demo:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  build() &#123;
    Swiper() &#123;
      Column() &#123;
        Image($r(&#39;app.media.background&#39;))
          .height(&#39;50%&#39;).width(&#39;100%&#39;)
          // Set image to extend to status bar
          .expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP])
        Column() &#123;
          Text(&#39;HarmonyOS 第一课&#39;)
            .fontSize(32)
            .margin(30)
          Text(&#39;Through a gradual learning path, both inexperienced and experienced developers can master the ArkTS declarative development paradigm and experience a simpler and more friendly HarmonyOS application development journey.&#39;)
            .fontSize(20).margin(20)
        &#125;.height(&#39;50%&#39;).width(&#39;100%&#39;)
        .backgroundColor(Color.White)
        // Set text content area background to extend to navigation bar
        .expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.BOTTOM])
      &#125;
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    // Disable the default clipping effect of the Swiper component to allow child nodes to draw outside the Swiper.
    .clip(false)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-much-information-can-HarmonyOS-AppStorage-store"><a href="#2-How-much-information-can-HarmonyOS-AppStorage-store" class="headerlink" title="2. How much information can HarmonyOS AppStorage store?"></a>2. How much information can HarmonyOS AppStorage store?</h4><ol>
<li>The project needs to store user information and uses AppStorage for storage. After logging in, the information can be retrieved via AppStorage.get. However, when the app is reopened, the data cannot be obtained directly. Is it because too much information is stored to retrieve?  </li>
<li>If this is not feasible, what storage methods can be used?</li>
</ol>
<p>This issue occurs because each IDE compilation is equivalent to uninstalling and reinstalling the app, and previously flushed data is cleared with the app during uninstallation. Thus, data flushed before cannot be queried after the second compilation. This does not affect data flushing in normal user scenarios. Simply check <strong>Keep Application Data</strong> in the IDE.<br><img src="/../images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.03.29.png"></p>
<p>AppStorage is not persistent storage. For persistent storage, use PersistentStorage. PersistentStorage variables should preferably be less than 2KB; avoid persisting large data volumes because disk writes in PersistentStorage are synchronous, and extensive local read&#x2F;write operations execute on the UI thread, affecting UI rendering performance. For large data storage, use database APIs. Related documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-persiststorage-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-persiststorage-V5</a>  </p>
<p>Both LocalStorage and AppStorage are runtime memories, but they can retain selected results after the app restarts, a common requirement in app development. PersistentStorage, an optional singleton in the app, persists selected AppStorage attributes to ensure their values remain unchanged between app restarts.  </p>
<p>PersistentStorage saves selected AppStorage attributes to device disk. The app uses APIs to determine which AppStorage attributes to persist via PersistentStorage. UI and business logic do not directly access PersistentStorage attributes; all access occurs through AppStorage, with changes automatically synced to PersistentStorage.  </p>
<p>PersistentStorage and AppStorage establish bidirectional synchronization for attributes. App development typically accesses PersistentStorage via AppStorage, with additional interfaces for managing persistent attributes, though business logic always retrieves and sets attributes through AppStorage.  </p>
<h4 id="3-How-does-HarmonyOS-Sendable-work-with-ObservedV2"><a href="#3-How-does-HarmonyOS-Sendable-work-with-ObservedV2" class="headerlink" title="3. How does HarmonyOS @Sendable work with @ObservedV2?"></a>3. How does HarmonyOS @Sendable work with @ObservedV2?</h4><p>Currently, a class cannot support both @Sendable and @ObservedV2. An object cannot be both a multi-thread shared object and an observable object.  </p>
<p>Based on the issue that @Sendable and @ObservedV2 cannot be mixed, two solutions are provided:  </p>
<ol>
<li><strong>Whole tracking of Sendable objects</strong> (sample code):</li>
</ol>
<pre><code class="language-typescript">import taskpool from &#39;@ohos.taskpool&#39;;
import &#123; SendableData &#125; from &#39;./SendableData&#39;;

@Concurrent
function threadGetData(param: string): SendableData &#123;
  let ret = new SendableData()
  ret.name = param + &quot;-o&quot;
  ret.age = Math.floor(Math.random() * 40)
  ret.likes = Math.floor(Math.random() * 100)
  return ret // Return a new SendableData instance
&#125;


@ObservedV2
class ViewModelWithSendable &#123;
  @Trace data?: SendableData // Track the entire object with @Trace
  @Trace sendParam: string = &quot;chen&quot;

  runTask() &#123;
    taskpool.execute(threadGetData, this.sendParam).then((value: object) =&gt; &#123;
      this.data = value as SendableData // Replace the entire data object
      this.sendParam = this.data.name
    &#125;)
  &#125;
&#125;

@Entry
@Component
struct Index &#123;
  mySendData: ViewModelWithSendable = new ViewModelWithSendable()

  build() &#123;
    Column() &#123;
      Text(`SendParam=$&#123;this.mySendData.sendParam&#125;`).fontSize(30).fontColor(Color.Red)
      Button(&quot;runTask&quot;).onClick(this.mySendData.runTask.bind(this.mySendData))
      if (this.mySendData.data) &#123;
        Row() &#123;
          Text(this.mySendData.data.name).fontSize(30).layoutWeight(4)
          Text(this.mySendData.data.age.toString()).fontSize(30).fontColor(Color.Blue).layoutWeight(1)
          Text(this.mySendData.data.likes.toString()).fontSize(30).fontColor(Color.Green).layoutWeight(1)
          Text(this.mySendData.data.follow ? &quot;已关注&quot; : &quot;关注&quot;).fontSize(30).fontColor(Color.Green).layoutWeight(2)
        &#125;
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<ol start="2">
<li><strong>Partial update of Sendable objects</strong> (sample code):</li>
</ol>
<pre><code class="language-typescript">import taskpool from &#39;@ohos.taskpool&#39;;
import &#123; SendableData &#125; from &#39;./SendableData&#39;;

@Concurrent
function threadLike(param: SendableData): boolean &#123;
  param.likes++
  return true
&#125;

@Concurrent
function threadFollow(param: SendableData): boolean &#123;
  param.likes++
  return true
&#125;

@Concurrent
function threadReset(param: SendableData): boolean &#123;
  let likes: number = param.likes
  // .....
  return true
&#125;


@ObservedV2
class ViewModelWithSendable &#123;
  data: SendableData = new SendableData() // No need to track overall changes
  @Trace sendParam: string = &quot;chen&quot;
  @Trace likes: number = 0 // Define responsive data
  @Trace follow: boolean = false // Define responsive data

  iLike() &#123;
    taskpool.execute(threadLike, this.data).then((value: object) =&gt; &#123;
      this.likes = this.data.likes // Assign only changed properties for UI refresh
    &#125;)
  &#125;

  iFollow() &#123;
    taskpool.execute(threadFollow, this.data).then((value: object) =&gt; &#123;
      this.follow = this.data.follow // Assign only changed properties for UI refresh
    &#125;)
  &#125;
  reset() &#123;
    // Update data first, then refresh the UI, and then use the thread to work
    this.likes = 0
    this.data.likes = this.likes
    this.follow = false
    this.data.follow = this.follow
    taskpool.execute(threadReset, this.data)
  &#125;
&#125;

@Entry
@Component
struct Index &#123;
  mySendData: ViewModelWithSendable = new ViewModelWithSendable()

  build() &#123;
    Column() &#123;
      Row() &#123;
        Button(&quot;Like&quot;).onClick(this.mySendData.iLike.bind(this.mySendData))
        Button(&quot;Follow&quot;).onClick(this.mySendData.iFollow.bind(this.mySendData))
        Button(&quot;Reset&quot;).onClick(this.mySendData.reset.bind(this.mySendData))
      &#125;

      Row() &#123;
        Text(this.mySendData.data.name).fontSize(30).layoutWeight(4)
        Text(this.mySendData.data.age.toString()).fontSize(30).fontColor(Color.Blue).layoutWeight(1)
        Text(this.mySendData.data.likes.toString()).fontSize(30).fontColor(Color.Green).layoutWeight(1)
        Text(this.mySendData.data.follow ? &quot;已关注&quot; : &quot;关注&quot;).fontSize(30).fontColor(Color.Green).layoutWeight(2)
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-HarmonyOS-Refresh-component-usage-issues"><a href="#4-HarmonyOS-Refresh-component-usage-issues" class="headerlink" title="4. HarmonyOS Refresh component usage issues?"></a>4. HarmonyOS Refresh component usage issues?</h4><ol>
<li>After setting the LoadingProgress height, part of it is exposed without scrolling.  </li>
<li>Expect that when quickly scrolling from the bottom to the top, the Builder does not actively display.</li>
</ol>
<p>Add the <code>.clip(true)</code> attribute. Specific demo:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  @State isRefreshing: boolean = false
  @State arr: String[] = [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;10&#39;]

  @Builder
  refreshComponent() &#123;
    Stack() &#123;
      Row() &#123;
        LoadingProgress()
          .height(32)
          .width(40)
          .color(Color.Red)
        Text(&quot;正在刷新...&quot;)
          .fontSize(16)
          .margin(&#123; left: 20 &#125;)
      &#125;
      .clip(true)
      .alignItems(VerticalAlign.Center)
    &#125;.width(&quot;100%&quot;).align(Alignment.Center)
  &#125;

  build() &#123;
    Stack(&#123; alignContent: Alignment.TopStart &#125;) &#123;
      Flex(&#123; direction: FlexDirection.Column &#125;) &#123;
        Refresh(&#123;
          refreshing: $$this.isRefreshing,
          builder: this.refreshComponent()
        &#125;) &#123;
          Scroll() &#123;
            Column() &#123;
              ForEach(this.arr, (item: string) =&gt; &#123;
                Text(&#39;&#39; + item)
                  .width(&#39;100%&#39;)
                  .height(100)
                  .fontSize(16)
                  .textAlign(TextAlign.Center)
                  .borderRadius(10)
              &#125;, (item: string) =&gt; item)
            &#125;

          &#125;

        &#125;
        .onStateChange((refreshStatus: RefreshStatus) =&gt; &#123;
          console.info(&#39;Refresh onStatueChange state is &#39; + refreshStatus)
        &#125;)
        .onRefreshing(() =&gt; &#123;
          setTimeout(() =&gt; &#123;
            this.isRefreshing = false
          &#125;, 2000)
          console.log(&#39;onRefreshing test&#39;)
        &#125;)

      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="5-HarmonyOS-list-scrollToIndex"><a href="#5-HarmonyOS-list-scrollToIndex" class="headerlink" title="5. HarmonyOS list scrollToIndex?"></a>5. HarmonyOS list scrollToIndex?</h4><p>When scrolling a List to a specified index with multiple ListItemGroups (each containing multiple ListItems), which index should be specified for scrollToIndex?  </p>
<p>Use <code>scrollToItemInGroup</code> to scroll to a specified ListItem in a ListItemGroup. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#scrolltoitemingroup11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-list-V5#scrolltoitemingroup11</a>  </p>
<p><code>scrollToItemInGroup(index: number, indexInGroup: number, smooth?: boolean, align?: ScrollAlign): void</code>  </p>
<p>Scrolls to a specified ListItem in a ListItemGroup.<br>Enabling smooth animation triggers loading and layout calculations for all passed items, potentially causing performance issues with large item counts.  </p>
<p><strong>Parameters</strong>:  </p>
<table>
<thead>
<tr>
<th align="left">Parameter Name</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">index</td>
<td align="left">number</td>
<td align="left">Yes</td>
<td align="left">The index of the target ListItemGroup in the current container.<br><br><strong>Note:</strong><br><br>Negative values or values greater than the maximum index of child components are invalid, and the jump does not take effect.</td>
</tr>
<tr>
<td align="left">indexInGroup</td>
<td align="left">number</td>
<td align="left">Yes</td>
<td align="left">The index of the target ListItem within the specified ListItemGroup.<br><br><strong>Note:</strong><br><br>Negative values or values greater than the maximum index of child components in the ListItemGroup are invalid, and the jump does not take effect.</td>
</tr>
<tr>
<td align="left">smooth</td>
<td align="left">boolean</td>
<td align="left">No</td>
<td align="left">Whether to enable animation when scrolling to the list item. <code>true</code> enables animation, <code>false</code> disables it.<br><br>Default: <code>false</code>.</td>
</tr>
<tr>
<td align="left">align</td>
<td align="left">ScrollAlign</td>
<td align="left">No</td>
<td align="left">Specifies the alignment of the scrolled element with the current container.<br><br>Default: <code>ScrollAlign.START</code>.</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/328-Daily-HarmonyOS-Next-Knowledge-Image-Saving-Scrolling-Issues-Dialog-Page-Effect-Child-Components-Throwing-Custom-Events-to-Parent-Components-Interface-Grayscale/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/328-Daily-HarmonyOS-Next-Knowledge-Image-Saving-Scrolling-Issues-Dialog-Page-Effect-Child-Components-Throwing-Custom-Events-to-Parent-Components-Interface-Grayscale/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Image Saving, Scrolling Issues, Dialog Page Effect, Child Components Throwing Custom Events to Parent Components, Interface Grayscale</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:36:00 / Modified: 22:36:55" itemprop="dateCreated datePublished" datetime="2025-06-26T22:36:00+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Image-Saving-Scrolling-Issues-Dialog-Page-Effect-Child-Components-Throwing-Custom-Events-to-Parent-Components-Interface-Grayscale"><a href="#Daily-HarmonyOS-Next-Knowledge-Image-Saving-Scrolling-Issues-Dialog-Page-Effect-Child-Components-Throwing-Custom-Events-to-Parent-Components-Interface-Grayscale" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Image Saving, Scrolling Issues, Dialog Page Effect, Child Components Throwing Custom Events to Parent Components, Interface Grayscale"></a>[Daily HarmonyOS Next Knowledge] Image Saving, Scrolling Issues, Dialog Page Effect, Child Components Throwing Custom Events to Parent Components, Interface Grayscale</h3><h4 id="1、Image-Saving-in-HarmonyOS"><a href="#1、Image-Saving-in-HarmonyOS" class="headerlink" title="1、Image Saving in HarmonyOS"></a>1、Image Saving in HarmonyOS</h4><p>The background returns the image address, and the front end needs to save it to the album after loading.  </p>
<p>The SaveButton security control can temporarily obtain storage permissions without requiring permission pop-up authorization confirmation. You can also save images after obtaining the user’s media authorization according to normal procedures. Refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/photoaccesshelper-resource-guidelines-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/photoaccesshelper-resource-guidelines-V5</a>  </p>
<p>Developers can query media resources based on specific conditions, such as specified types, dates, albums, etc.  </p>
<p>The application calls PhotoAccessHelper.getAssets to obtain media resources and passes in a FetchOptions object to specify retrieval conditions. Unless otherwise stated, the resources involved in the documentation that need to be obtained are considered to be pre-installed and have corresponding data in the database. If the example code executes and the obtained resources are empty, please confirm whether the file has been pre-installed and whether the file’s data exists in the database.  </p>
<p>If you only want to obtain an object at a specific position (such as the first, last, specified index, etc.), you can use the interface in FetchResult to obtain the media resource object at the corresponding position.  </p>
<p><strong>Prerequisites</strong>:  </p>
<ul>
<li>Obtain the photoAccessHelper instance of the album management module.  </li>
<li>Apply for the album management module read permission ‘ohos.permission.READ_IMAGEVIDEO’.  </li>
<li>Import the dataSharePredicates module.</li>
</ul>
<p><strong>Saving User Files</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/save-user-file-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/save-user-file-V5</a>  </p>
<p>To add images to the user album, refer to this document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/photoaccesshelper-useralbum-guidelines-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/photoaccesshelper-useralbum-guidelines-V5</a>  </p>
<p><strong>Adding Images and Videos to the User Album</strong>:<br>First, obtain the user album object and the array of images or video objects to be added to the album, then call the MediaAlbumChangeRequest.addAssets and PhotoAccessHelper.applyChanges interfaces to add images or videos to the user album.  </p>
<p><strong>Prerequisites</strong>:  </p>
<ul>
<li>Obtain the photoAccessHelper instance of the album management module.  </li>
<li>Apply for the album management module permissions ‘ohos.permission.READ_IMAGEVIDEO’ and ‘ohos.permission.WRITE_IMAGEVIDEO’.  </li>
<li>The following takes adding an image to the user album named ‘albumName’ as an example.</li>
</ul>
<p><strong>Development Steps</strong>:  </p>
<ol>
<li>Establish album retrieval conditions to obtain user albums.  </li>
<li>Establish image retrieval conditions to obtain images.  </li>
<li>Call the PhotoAccessHelper.getAlbums interface to obtain user album resources.  </li>
<li>Call the FetchResult.getFirstObject interface to obtain the first user album.  </li>
<li>Call the PhotoAccessHelper.getAssets interface to obtain image resources.  </li>
<li>Call the FetchResult.getFirstObject interface to obtain the first image.  </li>
<li>Call the MediaAlbumChangeRequest.addAssets interface to add images to the user album.  </li>
<li>Call the PhotoAccessHelper.applyChanges interface to submit the album change request.</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; dataSharePredicates &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; photoAccessHelper &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.MediaLibraryKit&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> context = <span class="title function_">getContext</span>(<span class="variable language_">this</span>);</span><br><span class="line"><span class="keyword">let</span> phAccessHelper = photoAccessHelper.<span class="title function_">getPhotoAccessHelper</span>(context);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">albumPredicates</span>: dataSharePredicates.<span class="property">DataSharePredicates</span> = <span class="keyword">new</span> dataSharePredicates.<span class="title class_">DataSharePredicates</span>();</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">albumName</span>: photoAccessHelper.<span class="property">AlbumKeys</span> = photoAccessHelper.<span class="property">AlbumKeys</span>.<span class="property">ALBUM_NAME</span>;</span><br><span class="line">  albumPredicates.<span class="title function_">equalTo</span>(albumName, <span class="string">&#x27;albumName&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">albumFetchOptions</span>: photoAccessHelper.<span class="property">FetchOptions</span> = &#123;</span><br><span class="line">    <span class="attr">fetchColumns</span>: [],</span><br><span class="line">    <span class="attr">predicates</span>: albumPredicates</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">photoPredicates</span>: dataSharePredicates.<span class="property">DataSharePredicates</span> = <span class="keyword">new</span> dataSharePredicates.<span class="title class_">DataSharePredicates</span>();</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">photoFetchOptions</span>: photoAccessHelper.<span class="property">FetchOptions</span> = &#123;</span><br><span class="line">    <span class="attr">fetchColumns</span>: [],</span><br><span class="line">    <span class="attr">predicates</span>: photoPredicates</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">albumFetchResult</span>: photoAccessHelper.<span class="property">FetchResult</span>&lt;photoAccessHelper.<span class="property">Album</span>&gt; = <span class="keyword">await</span> phAccessHelper.<span class="title function_">getAlbums</span>(photoAccessHelper.<span class="property">AlbumType</span>.<span class="property">USER</span>, photoAccessHelper.<span class="property">AlbumSubtype</span>.<span class="property">USER_GENERIC</span>, albumFetchOptions);</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">album</span>: photoAccessHelper.<span class="property">Album</span> = <span class="keyword">await</span> albumFetchResult.<span class="title function_">getFirstObject</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;getAlbums successfully, albumName: &#x27;</span> + album.<span class="property">albumName</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">photoFetchResult</span>: photoAccessHelper.<span class="property">FetchResult</span>&lt;photoAccessHelper.<span class="property">PhotoAsset</span>&gt; = <span class="keyword">await</span> phAccessHelper.<span class="title function_">getAssets</span>(photoFetchOptions);</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">photoAsset</span>: photoAccessHelper.<span class="property">PhotoAsset</span> = <span class="keyword">await</span> photoFetchResult.<span class="title function_">getFirstObject</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;getAssets successfully, albumName: &#x27;</span> + photoAsset.<span class="property">displayName</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">albumChangeRequest</span>: photoAccessHelper.<span class="property">MediaAlbumChangeRequest</span> = <span class="keyword">new</span> photoAccessHelper.<span class="title class_">MediaAlbumChangeRequest</span>(album);</span><br><span class="line">    albumChangeRequest.<span class="title function_">addAssets</span>([photoAsset]);</span><br><span class="line">    <span class="keyword">await</span> phAccessHelper.<span class="title function_">applyChanges</span>(albumChangeRequest);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;succeed to add &#x27;</span> + photoAsset.<span class="property">displayName</span> + <span class="string">&#x27; to &#x27;</span> + album.<span class="property">albumName</span>);</span><br><span class="line">    albumFetchResult.<span class="title function_">close</span>();</span><br><span class="line">    photoFetchResult.<span class="title function_">close</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;addAssets failed with err: &#x27;</span> + err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 2、Scrolling Issues in HarmonyOS  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Operation Steps**:  </span></span><br><span class="line"><span class="string">1. Pass a title when navigating from another page to the all-apps page.  </span></span><br><span class="line"><span class="string">2. If the title is not empty, scroll to the title&#x27;s position.  </span></span><br><span class="line"><span class="string">3. This `</span><span class="variable language_">this</span>.<span class="property">bgScroller</span>.<span class="title function_">scrollTo</span>(&#123; <span class="attr">xOffset</span>: <span class="number">0</span>, <span class="attr">yOffset</span>: -<span class="number">100</span> &#125;);<span class="string">` has no effect.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You can use the component&#x27;s `</span>scrollToIndex<span class="string">` method to jump to a specified position. Refer to the link: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-scroll-V5#scrolltoindex  </span></span><br><span class="line"><span class="string">Refer to the demo:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CategoryPage3</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">categoryTabIndex</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">scrollerIndex</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">sideClickFlag</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">tabTitle</span>:<span class="built_in">string</span>[] = [<span class="string">&#x27;页签1&#x27;</span>,<span class="string">&#x27;页签2&#x27;</span>,<span class="string">&#x27;页签3&#x27;</span>,<span class="string">&#x27;页签4&#x27;</span>,<span class="string">&#x27;页签5&#x27;</span>];</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>();</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Tabs</span>(&#123;</span><br><span class="line">        <span class="attr">index</span>: <span class="variable language_">this</span>.<span class="property">categoryTabIndex</span>,</span><br><span class="line">        <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span></span><br><span class="line">      &#125;)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">tabTitle</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span>, <span class="attr">index</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">            <span class="title class_">GridRow</span>(&#123;</span><br><span class="line">              <span class="attr">columns</span>: <span class="number">4</span></span><br><span class="line">            &#125;) &#123;</span><br><span class="line">              <span class="title class_">GridCol</span>() &#123;</span><br><span class="line">                <span class="title class_">SideListComponent</span>(&#123;</span><br><span class="line">                  <span class="attr">sideListIndex</span>: $scrollerIndex,</span><br><span class="line">                  <span class="attr">sideClickFlag</span>: $sideClickFlag,</span><br><span class="line">                  <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="title class_">GridCol</span>(&#123;</span><br><span class="line">                <span class="attr">span</span>: <span class="number">3</span></span><br><span class="line">              &#125;) &#123;</span><br><span class="line">                <span class="title class_">DetailListComponent</span>(&#123;</span><br><span class="line">                  <span class="attr">sideListIndex</span>: $scrollerIndex,</span><br><span class="line">                  <span class="attr">sideClickFlag</span>: $sideClickFlag,</span><br><span class="line">                  <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scroller</span></span><br><span class="line">                &#125;)</span><br><span class="line">                  .<span class="title function_">margin</span>( &#123; <span class="attr">top</span>: <span class="string">&quot;29vp&quot;</span> &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">margin</span>(&#123;</span><br><span class="line">              <span class="attr">left</span>: <span class="string">&quot;24vp&quot;</span>,</span><br><span class="line">              <span class="attr">right</span>: <span class="string">&quot;24vp&quot;</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBottom</span>(item, index))</span><br><span class="line">        &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span>, <span class="attr">index</span>?: <span class="built_in">number</span></span>) =&gt;</span> index + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item))</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">      .<span class="title function_">barWidth</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">barHeight</span>(<span class="string">&quot;56vp&quot;</span>)</span><br><span class="line">      .<span class="title function_">barMode</span>(<span class="title class_">BarMode</span>.<span class="property">Fixed</span>)</span><br><span class="line">      .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">index</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">categoryTabIndex</span> = index;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#F1F3F5&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Builder</span> <span class="title class_">TabBottom</span>(<span class="attr">item</span>: <span class="built_in">string</span>, <span class="attr">index</span>?: <span class="built_in">number</span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(item)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&quot;14vp&quot;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="string">&quot;10fp&quot;</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">categoryTabIndex</span> === index ? <span class="string">&quot;#007DFF&quot;</span> : <span class="string">&quot;#99182431&quot;</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="string">&quot;7vp&quot;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">DetailListComponent</span> &#123;</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>();</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">subTitle</span>:<span class="built_in">string</span>[] = [<span class="string">&#x27;分类1子标题1&#x27;</span>,<span class="string">&#x27;分类2子标题2&#x27;</span>,<span class="string">&#x27;分类3子标题3&#x27;</span>,<span class="string">&#x27;分类4子标题4&#x27;</span>,<span class="string">&#x27;分类5子标题5&#x27;</span>,<span class="string">&#x27;分类6子标题6&#x27;</span>];</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">sideListIndex</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">sideClickFlag</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">scroller</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">subTitle</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="string">&quot;22vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="string">&quot;16fp&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="string">&quot;#FF182431&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Start</span>)</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;内容&#x27;</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="string">&quot;72vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="string">&quot;14fp&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="string">&quot;16vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#0C000000&quot;</span>)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123;<span class="attr">top</span>:<span class="number">10</span>&#125;)</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;内容&#x27;</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="string">&quot;72vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="string">&quot;14fp&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="string">&quot;16vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#0C000000&quot;</span>)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123;<span class="attr">top</span>:<span class="number">10</span>&#125;)</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;内容&#x27;</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="string">&quot;72vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="string">&quot;14fp&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="string">&quot;16vp&quot;</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#0C000000&quot;</span>)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123;<span class="attr">top</span>:<span class="number">10</span>&#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">          .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Start</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">      &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span>, <span class="attr">index</span>?: <span class="built_in">number</span></span>) =&gt;</span> index + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item))</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onScrollIndex</span>(<span class="function">(<span class="params"><span class="attr">firstIndex</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">sideClickFlag</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sideListIndex</span> = firstIndex;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">sideClickFlag</span> = <span class="literal">false</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">scroller</span>.<span class="title function_">scrollToIndex</span>(<span class="variable language_">this</span>.<span class="property">sideListIndex</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">SideListComponent</span> &#123;</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>();</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">sideListIndex</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">sideClickFlag</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">listData</span>:<span class="built_in">string</span>[] = [<span class="string">&#x27;分类1&#x27;</span>,<span class="string">&#x27;分类2&#x27;</span>,<span class="string">&#x27;分类3&#x27;</span>,<span class="string">&#x27;分类4&#x27;</span>,<span class="string">&#x27;分类5&#x27;</span>,<span class="string">&#x27;分类6&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">List</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">listData</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span>, <span class="attr">index</span>?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="string">&quot;14fp&quot;</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="string">&#x27;400&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">sideListIndex</span> === index ? <span class="string">&#x27;#007DFF&#x27;</span> : <span class="string">&#x27;#182431&#x27;</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123;</span><br><span class="line">                <span class="attr">top</span>: <span class="string">&#x27;12&#x27;</span>,</span><br><span class="line">                <span class="attr">bottom</span>: <span class="string">&#x27;16&#x27;</span>,</span><br><span class="line">                <span class="attr">left</span>: <span class="string">&#x27;0&#x27;</span></span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">sideClickFlag</span> = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span> (index != <span class="literal">undefined</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">sideListIndex</span> = index;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">scroller</span>.<span class="title function_">scrollToIndex</span>(<span class="variable language_">this</span>.<span class="property">sideListIndex</span>);</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;.<span class="title function_">animation</span>(&#123;</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">1200</span>,</span><br><span class="line">            <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Friction</span>,</span><br><span class="line">            <span class="attr">delay</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="attr">iterations</span>: -<span class="number">1</span>, <span class="comment">// Set to -1 for infinite loop</span></span><br><span class="line">            <span class="attr">playMode</span>: <span class="title class_">PlayMode</span>.<span class="property">Alternate</span>,</span><br><span class="line">            <span class="attr">expectedFrameRateRange</span>: &#123;</span><br><span class="line">              <span class="attr">min</span>: <span class="number">20</span>,</span><br><span class="line">              <span class="attr">max</span>: <span class="number">120</span>,</span><br><span class="line">              <span class="attr">expected</span>: <span class="number">90</span>,</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .<span class="title function_">constraintSize</span>(&#123;</span><br><span class="line">        <span class="attr">minWidth</span>: (<span class="number">100</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="string">&#x27;12vp&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Divider</span>()</span><br><span class="line">        .<span class="title function_">vertical</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">color</span>(<span class="string">&quot;#0C000000&quot;</span>)</span><br><span class="line">        .<span class="title function_">strokeWidth</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="string">&#x27;8vp&#x27;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3、How to Achieve a DialogActivity-like Effect in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Need to navigate to a Page, but hope this Page has a Dialog-style layout.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You can use a custom pop-up component to achieve the effect. Refer to the address: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5#%E7%A4%BA%E4%BE%8B  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PageB is directly an empty page. In the page&#x27;s `</span><span class="title function_">aboutToAppear</span>()<span class="string">` method, open the custom pop-up. Add the `</span>router.<span class="title function_">back</span>()<span class="string">` method to the pop-up&#x27;s internal buttons to return to PageA after processing the logic.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**PageA in the entry package**:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="keyword">import</span> &#123; router &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;library_hsp/src/main/ets/pages/PageB&#x27;</span>); <span class="comment">// Import the named route page in the shared package</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(&#123; <span class="attr">routeName</span>: <span class="string">&quot;PageA&quot;</span> &#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">PageA</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;PageA&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">32</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;进入B页面&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          router.<span class="title function_">pushNamedRoute</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;PageB&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4、How Do Child Components Throw Custom Events to Parent Components for Operations in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For child components to call parent component methods, refer to this demo:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index12</span> &#123;</span><br><span class="line">  <span class="title function_">clickFunc</span> (<span class="attr">data</span>:<span class="built_in">number</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>())</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title function_">child</span>(&#123;<span class="attr">click</span>:(<span class="attr">data</span>:<span class="built_in">number</span>):<span class="function"><span class="params">void</span>=&gt;</span><span class="variable language_">this</span>.<span class="title function_">clickFunc</span>(data)&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct child &#123;</span><br><span class="line"></span><br><span class="line">  click?=<span class="function">(<span class="params"><span class="attr">data</span>:<span class="built_in">number</span></span>)=&gt;</span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;点击子组件&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">click</span> != <span class="literal">undefined</span> ) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">click</span>(<span class="number">123</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5、Is There a Way to Grayscale the Interface in HarmonyOS?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You need to configure the grayscale attribute of the root component of each page to 1. Refer to the documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5  </span></span><br><span class="line"><span class="string">Sample code is as follows:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ArkUIClubTest</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">saturateValue</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Red Text&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">22</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Blue Text&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">22</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;White Text&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Flex</span>()</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Image</span>($r(<span class="string">&quot;app.media.startIcon&quot;</span>))</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;页面置灰&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">saturateValue</span> = <span class="number">1</span>; <span class="comment">// Grayscale the page</span></span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;恢复彩色&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">saturateValue</span> = <span class="number">0</span>; <span class="comment">// Restore the page to color</span></span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">    .<span class="title function_">grayscale</span>(<span class="variable language_">this</span>.<span class="property">saturateValue</span>) <span class="comment">// Set the color saturation of the root component</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/327-Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/327-Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Status Bar Background Color, Global Page Grayscale, Close Pop-up on Blank Click, UI Component as Parameter, Disable Default Startup Effect</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:34:57 / Modified: 22:35:12" itemprop="dateCreated datePublished" datetime="2025-06-26T22:34:57+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect"><a href="#Daily-HarmonyOS-Next-Knowledge-Status-Bar-Background-Color-Global-Page-Grayscale-Close-Pop-up-on-Blank-Click-UI-Component-as-Parameter-Disable-Default-Startup-Effect" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Status Bar Background Color, Global Page Grayscale, Close Pop-up on Blank Click, UI Component as Parameter, Disable Default Startup Effect"></a>[Daily HarmonyOS Next Knowledge] Status Bar Background Color, Global Page Grayscale, Close Pop-up on Blank Click, UI Component as Parameter, Disable Default Startup Effect</h3><h4 id="1-How-to-get-the-background-color-and-font-color-of-the-status-bar-in-HarmonyOS"><a href="#1-How-to-get-the-background-color-and-font-color-of-the-status-bar-in-HarmonyOS" class="headerlink" title="1. How to get the background color and font color of the status bar in HarmonyOS?"></a>1. How to get the background color and font color of the status bar in HarmonyOS?</h4><p>How to get the background color and font color of the status bar?  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setwindowsystembarproperties9</a><br><code>setWindowSystemBarProperties(systemBarProperties: SystemBarProperties): Promise&lt;void&gt;</code><br>Sets the properties of the main window’s three-key navigation bar and status bar using a Promise asynchronous callback.  </p>
<p>This interface does not take effect on 2in1 devices. On other devices, it will not take effect immediately in split-screen mode (window.WindowStatusType.SPLIT_SCREEN), floating window mode (window.WindowStatusType.FLOATING), or free multi-window mode (enabled by clicking the free multi-window button in the device control center), and will only take effect when entering the full-screen main window.  </p>
<p><code>setWindowLayoutFullScreen</code> sets the full-screen navigation bar color to change with the page color.  </p>
<pre><code class="language-typescript">import &#123; router, window &#125; from &#39;@kit.ArkUI&#39;;
import &#123; common &#125; from &#39;@kit.AbilityKit&#39;;

@Entry
@Component
struct SystemBarPropertiesTest &#123;
  @State message: string = &#39;Hello World&#39;;
  @State barHeight: number = 0;
  private context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;

  async setSystemBar() &#123;
    // Get the current application window
    let windowClass: window.Window = await window.getLastWindow(this.context)
    // Get the status bar height
    this.barHeight = windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM).topRect.height
    // Precondition: Set the window to full-screen
    windowClass.setWindowLayoutFullScreen(true);
    // Immersive solution 1: Set the system bar to not display [], set [&#39;status&#39;, &#39;navigation&#39;] to display
    // windowClass.setWindowSystemBarEnable([]);
    // Immersive solution 2: Set the background color of the status bar and navigation bar to the same as the application window
    /*await windowClass.setWindowSystemBarProperties(&#123;
    // The color attribute is ARGB, set the opacity to 0% to make it transparent
    // Navigation bar color
    navigationBarColor: &quot;#fd121de5&quot;,
    // Status bar color
    statusBarColor: &quot;#ff0ad9c2&quot;,
    // Navigation bar text color
    navigationBarContentColor: &quot;#fde20606&quot;,
    // Status bar text color
    statusBarContentColor: &quot;#fff1e50a&quot;
    &#125;)*/

  &#125;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
          .onClick(()=&gt;&#123;
            this.setSystemBar()
          &#125;)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
    .backgroundColor(Color.Brown)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-implement-global-page-grayscale-in-HarmonyOS"><a href="#2-How-to-implement-global-page-grayscale-in-HarmonyOS" class="headerlink" title="2. How to implement global page grayscale in HarmonyOS?"></a>2. How to implement global page grayscale in HarmonyOS?</h4><p>Grayscale can be achieved by setting the following universal attributes for the page root component: <code>.saturate(0)</code> and <code>.grayscale(1)</code>.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-image-effect-V5</a>  </p>
<h4 id="3-For-HarmonyOS-custom-pop-up-components-how-to-make-the-pop-up-disappear-when-clicking-on-a-blank-area"><a href="#3-For-HarmonyOS-custom-pop-up-components-how-to-make-the-pop-up-disappear-when-clicking-on-a-blank-area" class="headerlink" title="3. For HarmonyOS custom pop-up components, how to make the pop-up disappear when clicking on a blank area?"></a>3. For HarmonyOS custom pop-up components, how to make the pop-up disappear when clicking on a blank area?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__basedialogoptions11">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5#ZH-CN_TOPIC_0000001884757698__basedialogoptions11</a>  </p>
<h4 id="4-In-HarmonyOS-this-weightDao-is-null-when-using-a-UI-component-as-a-parameter-Temporarily-solved-by-using-new-WeightHIstoryDao-How-to-modify-it-so-that-this-weightDao-is-available-in-onRightClick"><a href="#4-In-HarmonyOS-this-weightDao-is-null-when-using-a-UI-component-as-a-parameter-Temporarily-solved-by-using-new-WeightHIstoryDao-How-to-modify-it-so-that-this-weightDao-is-available-in-onRightClick" class="headerlink" title="4. In HarmonyOS, this.weightDao is null when using a UI component as a parameter. (Temporarily solved by using new WeightHIstoryDao. How to modify it so that this.weightDao is available in onRightClick?)"></a>4. In HarmonyOS, this.weightDao is null when using a UI component as a parameter. (Temporarily solved by using new WeightHIstoryDao. How to modify it so that this.weightDao is available in onRightClick?)</h4><p>Refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5</a>, which includes detailed examples of this pointing.  </p>
<p>When developers create a custom component and want to add specific functions to it, such as adding a click-to-navigate operation in a specified custom component, embedding an event method directly within the component will add the function to all instances of the custom component. To solve this, ArkUI introduces the @BuilderParam decorator, which decorates variables pointing to @Builder methods ( @BuilderParam is used to承接 @Builder functions). Developers can pass parameters to the @BuilderParam-decorated custom build function in different ways (e.g., parameter modification, trailing closure, borrowing arrow functions) when initializing the custom component, and call @BuilderParam within the custom component to add specific functions. This decorator is used to declare an element of any UI description, similar to a slot placeholder.  </p>
<h4 id="5-Can-the-default-startup-effect-of-a-HarmonyOS-APP-be-canceled"><a href="#5-Can-the-default-startup-effect-of-a-HarmonyOS-APP-be-canceled" class="headerlink" title="5. Can the default startup effect of a HarmonyOS APP be canceled?"></a>5. Can the default startup effect of a HarmonyOS APP be canceled?</h4><p>Question 1: Can the default startup effect of an APP be canceled? Can developers customize the launch page, i.e., create their own LaunchAbility new page?<br>Question 2: Can the icon (startWindowIcon) in the default startup effect be customized in size?  </p>
<p>Question 1: The default startup effect of an APP is set through the startWindowIcon and startWindowBackground fields in module.json5. A launch page is mandatory for each UIAbility, and these two fields cannot be omitted; otherwise, compilation will fail. To customize the launch page, set startWindowIcon to a transparent image to cancel the default effect. The UIAbility component sets the launch page icon and background color, but it is not a real launch page in the true sense. Developers can manually create a splash page for business initialization to achieve a custom launch page, referring to the Splash Screen Ability sample.  </p>
<p>Question 2: The icon (startWindowIcon) in the default startup effect will be displayed as its actual size, without adaptive adjustment based on the device screen or window size. For example, to set a full-screen image, provide an image according to the device’s full-screen dimensions.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/326-Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/326-Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Relative Layout, High-Performance List Optimization, Text Centering, Control Size Acquisition, Click Callback</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:33:58 / Modified: 22:34:13" itemprop="dateCreated datePublished" datetime="2025-06-26T22:33:58+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback"><a href="#Daily-HarmonyOS-Next-Knowledge-Relative-Layout-High-Performance-List-Optimization-Text-Centering-Control-Size-Acquisition-Click-Callback" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Relative Layout, High-Performance List Optimization, Text Centering, Control Size Acquisition, Click Callback"></a>[Daily HarmonyOS Next Knowledge] Relative Layout, High-Performance List Optimization, Text Centering, Control Size Acquisition, Click Callback</h3><h4 id="1-How-to-set-the-height-of-HarmonyOS-RelativeContainer-to-auto-to-adapt-to-the-height-of-child-controls"><a href="#1-How-to-set-the-height-of-HarmonyOS-RelativeContainer-to-auto-to-adapt-to-the-height-of-child-controls" class="headerlink" title="1. How to set the height of HarmonyOS RelativeContainer to auto to adapt to the height of child controls?"></a>1. How to set the height of HarmonyOS RelativeContainer to auto to adapt to the height of child controls?</h4><p>The height of an item cannot be controlled, and it is desired to follow the height of child controls. How to achieve this?  </p>
<p>When width is set to auto, if child components in the horizontal direction use the container as an anchor, auto will not take effect, and the same applies to the vertical direction. The code should not use <strong>container</strong> as an anchor. Refer to the documentation rules: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a>  </p>
<p><strong>Relative layout component</strong> for element alignment in complex scenarios:  </p>
<ul>
<li>Child components in the container are divided into horizontal and vertical directions:  <ul>
<li>Horizontal: left, middle, right (corresponding to HorizontalAlign.Start, Center, End).  </li>
<li>Vertical: top, center, bottom (corresponding to VerticalAlign.Top, Center, Bottom).</li>
</ul>
</li>
<li>Child components can use the container, guideline, barrier, or other child components as anchors:  <ul>
<li>Components in the relative layout container without an id can be displayed but cannot be used as anchors by other child components. The container will generate an id for them, whose pattern is not perceivable by the application. The container id is fixed as <strong>container</strong>; guideline and barrier ids must not repeat with components, with priority: component &gt; guideline &gt; barrier.  </li>
<li>For a child component, the three positions in one direction (e.g., left, middle, right for horizontal) can specify the same-direction positions of the container or other child components (e.g., HorizontalAlign.Start, Center, End for horizontal) as anchors. If more than two anchors are set in the same direction, Start and Center (horizontal) or Top and Center (vertical) take precedence. For example, if left is anchored to the container’s Start, middle to Center, and right to End, and the component width and container width cannot satisfy all three constraints, Start and Center constraints are prioritized.  </li>
<li>When both the child component size set in the front-end and relative layout rules exist, the drawing size of the child component depends on the constraints (this rule changed in API Version 11, where the drawing size depends on the front-end set size).  </li>
<li>Additional offset can be set after alignment (bias was added in API Version 11, and offset is no longer recommended).  </li>
<li>From API Version 11, in the RelativeContainer component, setting width&#x2F;height to auto means adapting to child components.  </li>
<li>When width is set to auto, if child components in the horizontal direction use the container as an anchor, auto does not take effect (same for the vertical direction).  </li>
<li>The margin of child components in the relative layout container differs from the general attribute margin, meaning the distance to the anchor in that direction. If there is no anchor in that direction, the margin does not take effect.  </li>
<li>When the guideline position is not declared or is an invalid value (e.g., undefined), it takes the start: 0 position; only one of start or end needs to be declared, with start taking precedence if both are declared.  </li>
<li>When the container’s size in a direction is declared as “auto”, the guideline position in that direction can only be declared using start (percentage is not allowed).  </li>
<li>Vertical guidelines and barriers can only be used as horizontal anchors for components (vertical anchor takes 0), while horizontal guidelines and barriers can only be used as vertical anchors (horizontal anchor takes 0).  </li>
<li>Chains are formed by dependency relationships between components. For example, a minimum horizontal chain of components A and B requires anchor1 &lt;– A &lt;—&gt; B –&gt; anchor2, i.e., A has a left anchor, B has a right anchor, A’s right anchor is B’s Start, and B’s left anchor is A’s End.  </li>
<li>The chain direction and style are declared in the chainMode interface of the chain head component; the bias attribute of elements within the chain is invalid, and the chain head’s bias applies to the entire chain.  </li>
<li>If the size of elements within the chain exceeds the chain anchor constraints, the excess is evenly distributed on both sides. In a Packed chain, the excess distribution can be set via bias.</li>
</ul>
</li>
<li><strong>Special cases</strong>:  <ul>
<li>If the child component size cannot be determined by constraints and its own size attribute, it will not be drawn.  </li>
<li>Mutually dependent or circularly dependent child components will not be drawn.  </li>
<li>If two or more positions in the same direction set anchors but the anchor positions are in reverse order, the child component size is 0 (not drawn).</li>
</ul>
</li>
</ul>
<p><strong>Reference demo example</strong>:  </p>
<pre><code class="language-typescript">@Component
export struct CommentItem &#123;
  index: number = 0

  build() &#123;
    Column() &#123;
      RelativeContainer() &#123;
        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead1&quot; + this.index)

        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead2&quot; + this.index).alignRules(&#123;
          top: &#123; anchor: &quot;ivHead1&quot; + this.index, align: VerticalAlign.Top &#125;,
          left: &#123; anchor: &quot;ivHead1&quot; + this.index, align: HorizontalAlign.End &#125;
        &#125;)

        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead3&quot; + this.index).alignRules(&#123;
          top: &#123; anchor: &quot;ivHead1&quot; + this.index, align: VerticalAlign.Bottom &#125;,
          left: &#123; anchor: &quot;ivHead1&quot; + this.index, align: HorizontalAlign.Start &#125;
        &#125;)
        Image($r(&quot;app.media.xxx&quot;)).width(30).height(30).id(&quot;ivHead4&quot; + this.index).alignRules(&#123;
          top: &#123; anchor: &quot;ivHead2&quot; + this.index, align: VerticalAlign.Bottom &#125;,
          left: &#123; anchor: &quot;ivHead3&quot; + this.index, align: HorizontalAlign.End &#125;
        &#125;)

      &#125;.width(&quot;auto&quot;).height(&quot;auto&quot;).padding(13)
    &#125;.width(&#39;100%&#39;)

  &#125;
&#125;


@Entry
@Component
struct Index3 &#123;

  build() &#123;
    Column() &#123;
      List() &#123;
        ForEach([1, 2, 3], (item: number, index: number) =&gt; &#123;
          ListItem() &#123;
            CommentItem(&#123; index: index &#125;)
          &#125;
        &#125;)
      &#125;
    &#125;.height(&quot;100%&quot;)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-optimize-high-performance-lists-in-HarmonyOS"><a href="#2-How-to-optimize-high-performance-lists-in-HarmonyOS" class="headerlink" title="2. How to optimize high-performance lists in HarmonyOS?"></a>2. How to optimize high-performance lists in HarmonyOS?</h4><p>Stock lists trigger multiple data updates per second, causing continuous refreshes of list item data. Fast scrolling in this scenario leads to frame drops. What technology should be used for optimization?  </p>
<p>For large list data and complex list components, use LazyForEach for data lazy loading. Refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-rendering-control-lazyforeach-V5</a>  </p>
<p>LazyForEach iterates data on demand from the provided data source and creates corresponding components during each iteration. When used in a scrolling container, the framework creates components on demand based on the container’s visible area and destroys&#x2F;recycles components when they scroll out of view to reduce memory usage.  </p>
<p><strong>Usage limitations</strong>:  </p>
<ul>
<li>LazyForEach must be used within a container component. Only List, Grid, Swiper, and WaterFlow support data lazy loading (configurable cachedCount for buffering visible and adjacent data); other components load all data at once.  </li>
<li>LazyForEach relies on generated keys to determine whether to refresh child components. If keys do not change, the corresponding child components will not be refreshed.  </li>
<li>When using LazyForEach in a container component, only one LazyForEach is allowed. For example, List should not contain both ListItem and ForEach&#x2F;LazyForEach, nor multiple LazyForEach instances.  </li>
<li>Each LazyForEach iteration must create exactly one child component (the child component generation function has one root component).  </li>
<li>The generated child component must be allowed in the LazyForEach parent container.  </li>
<li>LazyForEach can be included in if&#x2F;else conditional rendering, and if&#x2F;else can appear within LazyForEach.  </li>
<li>The key generator must produce a unique value for each data item. Duplicate keys will cause rendering issues for UI components.  </li>
<li>LazyForEach must use a DataChangeListener object for updates; reassigning the first parameter dataSource will cause exceptions, and changes to state variables in dataSource will not trigger UI refresh.  </li>
<li>For high-performance rendering, when updating UI via the DataChangeListener’s onDataChange method, generate keys different from the original to trigger component refresh.  </li>
<li>LazyForEach must be used with the @Reusable decorator to enable node reuse (decorate the LazyForEach list component with @Reusable).</li>
</ul>
<p><strong>Key generation rules</strong>:<br>During LazyForEach rendering, the system generates a unique and persistent key for each item to identify the component. When the key changes, the ArkUI framework treats the array element as replaced&#x2F;modified and creates a new component based on the new key.  </p>
<p>LazyForEach provides a keyGenerator parameter (a function) for custom key generation. If not defined, the default key generator is used: (item: Object, index: number) &#x3D;&gt; { return viewId + ‘-‘ + index.toString(); }, where viewId is generated during compilation and consistent within the same LazyForEach component.  </p>
<h4 id="3-How-to-center-text-in-HarmonyOS"><a href="#3-How-to-center-text-in-HarmonyOS" class="headerlink" title="3. How to center text in HarmonyOS?"></a>3. How to center text in HarmonyOS?</h4><p>How to set text to center display? Setting height and lineHeight to the same value does not center the text.  </p>
<p><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Pagetext &#123;
  @State message: string = &#39;Hell&#39;;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(this.message)
          .width(70)
          .height(30)
            // .lineHeight(30)
          .textAlign(TextAlign.Center)
          .backgroundColor(&#39;#99000000&#39;)
            // .align(Alignment.TopEnd)
          .border(&#123;
            radius: 15
          &#125;)
          .fontSize(17)
          .fontColor(Color.White)
      &#125;
      .width(&#39;100%&#39;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-get-the-current-size-of-a-control-in-HarmonyOS"><a href="#4-How-to-get-the-current-size-of-a-control-in-HarmonyOS" class="headerlink" title="4. How to get the current size of a control in HarmonyOS?"></a>4. How to get the current size of a control in HarmonyOS?</h4><p>Use the component area event onAreaChange(event: (oldValue: Area, newValue: Area) &#x3D;&gt; void) to obtain the component size.  </p>
<p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5</a>  </p>
<h4 id="5-In-the-willClick-listener-callback-of-HarmonyOS-is-there-a-way-to-get-page-route-information-of-the-clicked-control"><a href="#5-In-the-willClick-listener-callback-of-HarmonyOS-is-there-a-way-to-get-page-route-information-of-the-clicked-control" class="headerlink" title="5. In the willClick listener callback of HarmonyOS, is there a way to get page&#x2F;route information of the clicked control?"></a>5. In the willClick listener callback of HarmonyOS, is there a way to get page&#x2F;route information of the clicked control?</h4><p>Through willClick to listen for control clicks, can pageinfo&#x2F;route information be obtained via frameNode?  </p>
<p>There are no related interfaces on frameNode, so pageinfo&#x2F;route information cannot be obtained via frameNode.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/325-Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/325-Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Numeric Precision Issues, Slider Problems, Routing Animation Issues, Fixed-Count Loop Rendering, Canvas Animation Implementation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:32:35 / Modified: 22:32:57" itemprop="dateCreated datePublished" datetime="2025-06-26T22:32:35+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation"><a href="#Daily-HarmonyOS-Next-Knowledge-Numeric-Precision-Issues-Slider-Problems-Routing-Animation-Issues-Fixed-Count-Loop-Rendering-Canvas-Animation-Implementation" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Numeric Precision Issues, Slider Problems, Routing Animation Issues, Fixed-Count Loop Rendering, Canvas Animation Implementation"></a>[Daily HarmonyOS Next Knowledge] Numeric Precision Issues, Slider Problems, Routing Animation Issues, Fixed-Count Loop Rendering, Canvas Animation Implementation</h3><h4 id="1-Does-HarmonyOS-directly-convert-to-number-type-for-addition-subtraction-multiplication-and-division-How-to-avoid-precision-anomalies-after-calculation"><a href="#1-Does-HarmonyOS-directly-convert-to-number-type-for-addition-subtraction-multiplication-and-division-How-to-avoid-precision-anomalies-after-calculation" class="headerlink" title="1. Does HarmonyOS directly convert to number type for addition, subtraction, multiplication, and division? How to avoid precision anomalies after calculation?"></a>1. Does HarmonyOS directly convert to number type for addition, subtraction, multiplication, and division? How to avoid precision anomalies after calculation?</h4><p>Are calculations directly converted to the number type for addition, subtraction, multiplication, and division? How to avoid precision anomalies in calculated data?  </p>
<p>Since all numbers are double-precision floating-point numbers stored in binary in computers, decimals and non-safe integers (data exceeding the integer safety range <code>[-Math.pow(2, 53), Math.pow(2, 53)]</code>) may experience precision loss during calculations.  </p>
<ol>
<li><p><strong>Decimal operations</strong>: For example, “0.2 + 2.22 &#x3D; 2.4200000000000004”. Convert decimals to integers for calculation, then scale the result down:<br><code>(0.2 * 100 + 2.22 * 100) / 100 = 2.42</code>.  </p>
</li>
<li><p><strong>Non-safe integer operations</strong>: For example, “9007199254740992 + 1 &#x3D; 9.007199254740992”. Convert numbers longer than 15 digits to scientific notation:<br><code>9007199254740992 + 1 = 9.007199254740993e15</code>.<br>Refer to the official demo: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SimpleCalculator">https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-SimpleCalculator</a></p>
</li>
</ol>
<h4 id="2-When-the-HarmonyOS-Slider-is-set-to-vertical-direction-with-blockStyle-as-IMAGE-the-slider-cannot-be-moved"><a href="#2-When-the-HarmonyOS-Slider-is-set-to-vertical-direction-with-blockStyle-as-IMAGE-the-slider-cannot-be-moved" class="headerlink" title="2. When the HarmonyOS Slider is set to vertical direction with blockStyle as IMAGE, the slider cannot be moved?"></a>2. When the HarmonyOS Slider is set to vertical direction with blockStyle as IMAGE, the slider cannot be moved?</h4><p>The Slider can move normally when set to vertical direction with blockStyle as IMAGE.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SliderExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">vInSetValueOne</span>: <span class="built_in">number</span> = <span class="number">40</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">vInSetValueTwo</span>: <span class="built_in">number</span> = <span class="number">40</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">8</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;vertical inset slider&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">9</span>).<span class="title function_">fontColor</span>(<span class="number">0xCCCCCC</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Slider</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">vInSetValueOne</span>,</span><br><span class="line">            <span class="attr">style</span>: <span class="title class_">SliderStyle</span>.<span class="property">InSet</span>,</span><br><span class="line">            <span class="attr">direction</span>: <span class="title class_">Axis</span>.<span class="property">Vertical</span>,</span><br><span class="line">            <span class="attr">reverse</span>: <span class="literal">true</span> <span class="comment">// The vertical Slider defaults to min at the top and max at the bottom; set reverse to true for bottom-to-top sliding</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">blockStyle</span>(&#123; <span class="attr">type</span>: <span class="title class_">SliderBlockType</span>.<span class="property">IMAGE</span>, <span class="attr">image</span>: $r(<span class="string">&#x27;sys.media.ohos_ic_public_ok&#x27;</span>) &#125;)</span><br><span class="line">            .<span class="title function_">showTips</span>(<span class="literal">true</span>)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">mode</span>: <span class="title class_">SliderChangeMode</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">vInSetValueOne</span> = value</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;value:&#x27;</span> + value + <span class="string">&#x27;mode:&#x27;</span> + mode.<span class="title function_">toString</span>())</span><br><span class="line">            &#125;)</span><br><span class="line">          <span class="title class_">Slider</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">vInSetValueTwo</span>,</span><br><span class="line">            <span class="attr">step</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">style</span>: <span class="title class_">SliderStyle</span>.<span class="property">InSet</span>,</span><br><span class="line">            <span class="attr">direction</span>: <span class="title class_">Axis</span>.<span class="property">Vertical</span>,</span><br><span class="line">            <span class="attr">reverse</span>: <span class="literal">true</span></span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">blockStyle</span>(&#123; <span class="attr">type</span>: <span class="title class_">SliderBlockType</span>.<span class="property">IMAGE</span>, <span class="attr">image</span>: $r(<span class="string">&#x27;sys.media.ohos_app_icon&#x27;</span>) &#125;)</span><br><span class="line">            .<span class="title function_">showSteps</span>(<span class="literal">true</span>)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">mode</span>: <span class="title class_">SliderChangeMode</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">vInSetValueTwo</span> = value</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;value:&#x27;</span> + value + <span class="string">&#x27;mode:&#x27;</span> + mode.<span class="title function_">toString</span>())</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. [router] When page 1 disables the exit transition animation, pushing to page 2 makes page 2 fully transparent during transition, revealing page 1 until the animation ends?  </span></span><br><span class="line"><span class="string">Steps:  </span></span><br><span class="line"><span class="string">1. Page 1 overrides `</span>pageTransition<span class="string">` to disable the exit transition animation.  </span></span><br><span class="line"><span class="string">2. Page 1 pushes to page 2 via router.  </span></span><br><span class="line"><span class="string">3. Page 2 becomes fully transparent during transition, showing page 1 until the animation completes.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Expectation**: Page 2 should not become fully transparent during transition.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To disable page transition animations, set both entry and exit transitions. Refer to the code:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="comment">// main.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>).<span class="title function_">fontSize</span>(<span class="number">50</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/240115173611047_second&#x27;</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#A0FF0000&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// second.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">Second</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Back&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        router.<span class="title function_">back</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#A00000FF&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">type</span>: <span class="title class_">RouteType</span>.<span class="property">None</span>, <span class="attr">duration</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The Navigation component is suitable for in-module page switching in cross-device scenarios, offering natural transition effects and various title bar styles. It automatically adapts to window sizes, switching to split-column display for larger windows. Use Navigation for page routing (router will not be further evolved). Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-navigation-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to render a fixed number of items in a loop in HarmonyOS ArkUI?  </span></span><br><span class="line"><span class="string">How to render a fixed number of items in a loop in ArkUI?  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Currently, component rendering only supports `</span><span class="title class_">ForEach</span><span class="string">`, which requires an array as the first parameter. For simple rendering without complex elements, create a dummy array:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="title class_">ForEach</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],<span class="function">(<span class="params"><span class="attr">item</span>:<span class="built_in">number</span></span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="title class_">Text</span>(<span class="string">&#x27;这是Item=&#x27;</span>+item)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. How to implement animations with HarmonyOS Canvas?  </span></span><br><span class="line"><span class="string">Refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-canvasrenderingcontext2d-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ArkTS Canvas usage is similar to web Canvas. Animations can be ported from web Canvas demos:  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">timerId</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">startAngle</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">0.2</span> + (<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>) * <span class="number">90</span>; <span class="comment">// Start angle (radians)</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">endAngle</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">1.8</span> + (<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>) * <span class="number">90</span>; <span class="comment">// End angle (radians)</span></span><br><span class="line">  <span class="attr">lengthToAdd</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">360</span>; <span class="comment">// Length added per draw (radians)</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentAngle</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">step</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// Center coordinates and radius</span></span><br><span class="line">  centerX = <span class="number">200</span>;</span><br><span class="line">  centerY = <span class="number">200</span>;</span><br><span class="line">  radius = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentAngle</span> = <span class="variable language_">this</span>.<span class="property">startAngle</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timerId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">step</span> %<span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentAngle</span> += <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">drawArc</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentAngle</span> &gt; <span class="variable language_">this</span>.<span class="property">endAngle</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">step</span>++;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&quot;destination-out&quot;</span>; <span class="comment">// Change composite mode for erasing</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">21</span>; <span class="comment">// Wider line for erasing to prevent residues</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">eraseArc</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentAngle</span> -= <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentAngle</span>&lt;= <span class="variable language_">this</span>.<span class="property">startAngle</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">step</span>++;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&quot;source-over&quot;</span>; <span class="comment">// Restore composite mode for normal drawing</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">20</span>; <span class="comment">// Normal line width</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">drawArc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Draw arc</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerX</span>, <span class="comment">// Arc center x-coordinate</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerY</span> + <span class="number">30</span>, <span class="comment">// Arc center y-coordinate</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">radius</span>, <span class="comment">// Arc radius</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> - <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>, <span class="comment">// Start angle (radians)</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> + <span class="variable language_">this</span>.<span class="property">lengthToAdd</span> <span class="comment">// End angle (radians)</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">eraseArc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerX</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">centerY</span> + <span class="number">30</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">radius</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> - <span class="variable language_">this</span>.<span class="property">lengthToAdd</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentAngle</span> + <span class="number">2</span> * <span class="variable language_">this</span>.<span class="property">lengthToAdd</span> <span class="comment">// Wider erasing to prevent residues</span></span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// Set arc color and width</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">20</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/324-Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/324-Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Click Event Bubble Prevention, Payment Input Dialog, Color Handling Methods, Text Component Positioning, Text Component Width Compression</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:31:20 / Modified: 22:31:45" itemprop="dateCreated datePublished" datetime="2025-06-26T22:31:20+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression"><a href="#Daily-HarmonyOS-Next-Knowledge-Click-Event-Bubble-Prevention-Payment-Input-Dialog-Color-Handling-Methods-Text-Component-Positioning-Text-Component-Width-Compression" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Click Event Bubble Prevention, Payment Input Dialog, Color Handling Methods, Text Component Positioning, Text Component Width Compression"></a>[Daily HarmonyOS Next Knowledge] Click Event Bubble Prevention, Payment Input Dialog, Color Handling Methods, Text Component Positioning, Text Component Width Compression</h3><h4 id="1-How-to-prevent-event-bubbling-for-the-HarmonyOS-onClick-event"><a href="#1-How-to-prevent-event-bubbling-for-the-HarmonyOS-onClick-event" class="headerlink" title="1. How to prevent event bubbling for the HarmonyOS onClick event?"></a>1. How to prevent event bubbling for the HarmonyOS onClick event?</h4><p>How to prevent event bubbling for the onClick event?  </p>
<p>Since only events supporting <code>stopPropagation</code> can use this method, and the ClickEvent for click events does not support it, you cannot directly use <code>stopPropagation</code> to prevent event bubbling.  </p>
<h4 id="2-HarmonyOS-payment-input-dialog"><a href="#2-HarmonyOS-payment-input-dialog" class="headerlink" title="2. HarmonyOS payment input dialog?"></a>2. HarmonyOS payment input dialog?</h4><p>Payment input dialog  </p>
<p>The overall implementation can use <code>CustomDialog</code>. Since payment inputs have no cursor, it is recommended to use six <code>Text</code> components spliced together instead of <code>TextInput</code>. When the custom keyboard is clicked, trigger an event to display the input in the <code>Text</code> components. Use images to display encrypted characters like <code>*</code>. Refer to the following implementation:  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomDialog</span></span><br><span class="line"><span class="comment">// Dialog decorator for custom dialogs</span></span><br><span class="line">struct <span class="title class_">CustomDialogExample</span> &#123;</span><br><span class="line">  <span class="attr">controller</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(&#123;&#125;),</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="attr">services</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;X&#x27;</span>]</span><br><span class="line">  <span class="attr">numbers</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="title class_">Inputs</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = []</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123; <span class="comment">// Set dialog content</span></span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Please enter payment password&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">10</span>, <span class="attr">bottom</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">5</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">numbers</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="property">length</span> &gt;= item ? <span class="string">&#x27;*&#x27;</span> : <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#C0C0C0&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;15%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">services</span>, <span class="function">(<span class="params"><span class="attr">service</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(service)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">borderWidth</span>(<span class="number">0.4</span>)</span><br><span class="line">          .<span class="title function_">borderColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (service != <span class="string">&#x27;X&#x27;</span> &amp;&amp; service != <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="title function_">push</span>(service)</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="property">length</span> == <span class="number">6</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">close</span>()</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (service == <span class="string">&#x27;X&#x27;</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">Inputs</span>.<span class="title function_">pop</span>()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">dialogController</span>: <span class="title class_">CustomDialogController</span> = <span class="keyword">new</span> <span class="title class_">CustomDialogController</span>(&#123;</span><br><span class="line">    <span class="comment">// Dialog constructor, corresponding to the decorator</span></span><br><span class="line">    <span class="attr">builder</span>: <span class="title class_">CustomDialogExample</span>(),</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;Pay&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">dialogController</span>.<span class="title function_">open</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceAround</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 3. HarmonyOS method to get ARGB of a color or handle colors?  </span></span><br><span class="line"><span class="string">`</span>uint32_t <span class="title function_">OH_Drawing_BrushGetColor</span> (<span class="keyword">const</span> OH_Drawing_Brush * )<span class="string">`  </span></span><br><span class="line"><span class="string">Gets the color attribute of a brush. The color attribute describes the color used when the brush fills a graphic, represented by a 32-bit (ARGB) variable. For details, refer to the official documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/drawing__brush_8h-V5  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To get color values, you can also use `</span><span class="title function_">getColorSync</span>(<span class="attr">resId</span>: <span class="built_in">number</span>) : <span class="built_in">number</span>;<span class="string">` to retrieve the color value corresponding to a specified resource ID synchronously. Detailed documentation: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-resource-manager-V5#getcolorsync10  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="title function_">getColorSync</span>(<span class="attr">resId</span>: <span class="built_in">number</span>) : <span class="built_in">number</span>;<span class="string">`  </span></span><br><span class="line"><span class="string">Retrieves the color value corresponding to a specified resource ID synchronously.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For other color types, refer to: https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-types-V5#resourcecolor  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**ResourceColor**  </span></span><br><span class="line"><span class="string">Color type used to describe resource colors.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| Type       | Description                                                                                         |</span></span><br><span class="line"><span class="string">| :------- | :----------------------------------------------------------------------------------------- |</span></span><br><span class="line"><span class="string">| Color    | Color enum value.                                                                                     |</span></span><br><span class="line"><span class="string">| number   | HEX format color, supporting rgb or argb. Examples: 0xffffff, 0xffff0000. The number type cannot识别 the number of digits passed; the format is determined by the value size (e.g., 0x00ffffff is parsed as rgb).  |</span></span><br><span class="line"><span class="string">| string   | rgb or argb format color. Examples: &#x27;#ffffff&#x27;, &#x27;#ff000000&#x27;, &#x27;rgb(255, 100, 255)&#x27;, &#x27;rgba(255, 100, 255, 0.5)&#x27;. |</span></span><br><span class="line"><span class="string">| Resource | Introduces colors from system resources or application resources using resource references.                                                                |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4. How to set the position of a HarmonyOS Text component to the upper right corner?  </span></span><br><span class="line"><span class="string">The `</span><span class="title class_">Edges</span><span class="string">` type supports `</span>right<span class="string">` and `</span>left<span class="string">`, allowing positioning in the upper right corner. Refer to the following demo:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;66666&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#f04b3d&#x27;</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(&#123;</span><br><span class="line">          <span class="attr">bottomLeft</span>: <span class="number">12</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">10</span>)</span><br><span class="line">      <span class="title class_">Flex</span>().<span class="title function_">width</span>(<span class="number">10</span>).<span class="title function_">height</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>).<span class="title function_">position</span>(&#123;<span class="attr">right</span>:<span class="number">0</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(<span class="number">50</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 5. When there are multiple Text components in a Flex in HarmonyOS, how to compress the width of a specific Text?  </span></span><br><span class="line"><span class="string">Use the `</span>flexShrink<span class="string">` property in combination with `</span>textOverflow<span class="string">`, `</span>wordBreak<span class="string">`, and `</span>maxLines<span class="string">` to compress the width and content of a Text component:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>typescript</span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">AdaptiveText</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Row</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;flexShrink(2)flexShrink(2)flexShrink(2)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">flexShrink</span>(<span class="number">2</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">        .<span class="title function_">wordBreak</span>(<span class="title class_">WordBreak</span>.<span class="property">BREAK_WORD</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;no flexShrink&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">        .<span class="title function_">wordBreak</span>(<span class="title class_">WordBreak</span>.<span class="property">BREAK_WORD</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;flexShrink(6)flexShrink(6)flexShrink(6)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">flexShrink</span>(<span class="number">6</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">        .<span class="title function_">textOverflow</span>(&#123; <span class="attr">overflow</span>: <span class="title class_">TextOverflow</span>.<span class="property">Ellipsis</span> &#125;)</span><br><span class="line">        .<span class="title function_">wordBreak</span>(<span class="title class_">WordBreak</span>.<span class="property">BREAK_WORD</span>)</span><br><span class="line">        .<span class="title function_">maxLines</span>(<span class="number">2</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&quot;100%&quot;</span>).<span class="title function_">height</span>(<span class="number">120</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xAFEEEE</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/323-Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/323-Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Lifecycle Triggering, This Pointer, Countdown Component, State Variables, Swiper Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:29:54 / Modified: 22:30:09" itemprop="dateCreated datePublished" datetime="2025-06-26T22:29:54+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component"><a href="#Daily-HarmonyOS-Next-Knowledge-Lifecycle-Triggering-This-Pointer-Countdown-Component-State-Variables-Swiper-Component" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Lifecycle Triggering, This Pointer, Countdown Component, State Variables, Swiper Component"></a>[Daily HarmonyOS Next Knowledge] Lifecycle Triggering, This Pointer, Countdown Component, State Variables, Swiper Component</h3><h4 id="1-HarmonyOS-lifecycle-not-triggering"><a href="#1-HarmonyOS-lifecycle-not-triggering" class="headerlink" title="1. HarmonyOS lifecycle not triggering?"></a>1. HarmonyOS lifecycle not triggering?</h4><p>The lifecycle of the page corresponding to a tab does not trigger or triggers only once.  </p>
<p>Use the <code>onTabBarClick</code> event to trigger actions when tabs are clicked. Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-container-tabs-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-components-container-tabs-V5</a>  </p>
<h4 id="2-Issue-with-this-pointer-in-HarmonyOS-custom-callbacks-unable-to-call-methods-within-the-Page"><a href="#2-Issue-with-this-pointer-in-HarmonyOS-custom-callbacks-unable-to-call-methods-within-the-Page" class="headerlink" title="2. Issue with this pointer in HarmonyOS custom callbacks; unable to call methods within the Page?"></a>2. Issue with <code>this</code> pointer in HarmonyOS custom callbacks; unable to call methods within the Page?</h4><p>Save the <code>this</code> pointer outside the method:  </p>
<pre><code class="language-typescript">let _this = this
onReceiveData()&#123;
  ......
&#125;
</code></pre>
<h4 id="3-HarmonyOS-TextTimer-component-shows-0-first-when-isCountDown-is-true-then-starts-counting-down"><a href="#3-HarmonyOS-TextTimer-component-shows-0-first-when-isCountDown-is-true-then-starts-counting-down" class="headerlink" title="3. HarmonyOS TextTimer component shows 0 first when isCountDown is true, then starts counting down?"></a>3. HarmonyOS TextTimer component shows 0 first when <code>isCountDown</code> is <code>true</code>, then starts counting down?</h4><p>Code example:  </p>
<pre><code class="language-typescript">TextTimer(&#123; isCountDown: false, count: 60000, controller: this.textTimerController &#125;)
  .size(&#123; width: 100, height: &#39;100%&#39; &#125;)
  .margin(&#123; left: 12 &#125;)
  .format(&#39;s&#39;)
  .fontColor(Color.White)
  .fontSize(14)
  .align(Alignment.Center)
  .onTimer((utc: number, elapsedTime: number) =&gt; &#123;
    console.info(&#39;textTimer notCountDown utc is：&#39; + utc + &#39;, elapsedTime: &#39; + elapsedTime)
  &#125;)
</code></pre>
<p>In the demo, a 60-second countdown automatically converts to 1 minute (01:00.00). Using <code>format(&#39;s&#39;)</code> will display only seconds (0). There is no configuration to disable this automatic conversion. Alternatively, implement the countdown manually:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TestTextTimerPage &#123;
  @State timeTaskNumber: number = 120;
  task: number = -1;

  countDown() &#123;
    this.task = setInterval(() =&gt; &#123;
      this.timeTaskNumber--;
      if (this.timeTaskNumber == 0) &#123;
        clearInterval(this.task);
        this.task = -1;
      &#125;
    &#125;, 1000);
  &#125;

  build() &#123;
    Column() &#123;
      Row() &#123;
        Text(this.timeTaskNumber + &#39;&#39;);

        Button(&#39;start&#39;).onClick(() =&gt; &#123;
          this.countDown();
        &#125;);

        Button(&#39;stop&#39;).onClick(() =&gt; &#123;
          if (this.task &gt;= 0) &#123;
            clearInterval(this.task);
            this.task = -1;
          &#125;
        &#125;)
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-Parameters-in-HarmonyOS-Builder-functions-for-initializing-Provide-variables-in-Components-do-not-update-when-Builder-parameters-change"><a href="#4-Parameters-in-HarmonyOS-Builder-functions-for-initializing-Provide-variables-in-Components-do-not-update-when-Builder-parameters-change" class="headerlink" title="4. Parameters in HarmonyOS Builder functions for initializing @Provide variables in Components do not update when Builder parameters change?"></a>4. Parameters in HarmonyOS Builder functions for initializing @Provide variables in Components do not update when Builder parameters change?</h4><p>Variables decorated with @Provide and @Prop should both be stateful, but there are differences. When using the BuilderNode’s <code>update</code> function to update uiFunc parameters, only @Prop-decorated <code>args2</code> updates, while @Provide-decorated <code>args1</code> does not.  </p>
<p>@Provide on a parent component is equivalent to @State. <code>update</code> passes data from the builderNode to child components. Custom components are children of the builderNode; @Prop properties update from parent to child, while @Provide updates from ancestor to descendant. Refer to state management documentation:  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/Readme-CN.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/Readme-CN.md</a>  </li>
<li><a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-provide-and-consume.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/arkts-provide-and-consume.md</a></li>
</ul>
<p>@Provide and @Consume enable two-way data synchronization between ancestors and descendants, supporting cross-level state propagation. Unlike parameter passing between parent and child components, @Provide and @Consume allow direct cross-level binding:  </p>
<ul>
<li>@Provide: Decorates variables in ancestor components to “provide” state to descendants.  </li>
<li>@Consume: Decorates variables in descendant components to “consume” (bind to) ancestor-provided state.</li>
</ul>
<p>Before using @Provide&#x2F;@Consume, developers should understand basic UI syntax and custom components.  </p>
<h4 id="5-HarmonyOS-Swiper’s-displayCount-set-to-auto-does-not-adapt-when-items-use-the-position-attribute"><a href="#5-HarmonyOS-Swiper’s-displayCount-set-to-auto-does-not-adapt-when-items-use-the-position-attribute" class="headerlink" title="5. HarmonyOS Swiper’s displayCount set to auto does not adapt when items use the position attribute?"></a>5. HarmonyOS Swiper’s <code>displayCount</code> set to <code>auto</code> does not adapt when items use the <code>position</code> attribute?</h4><p><code>position</code> uses absolute positioning, fixing child component positions relative to the parent. Reference: <a target="_blank" rel="noopener" href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-location.md">https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/reference/apis-arkui/arkui-ts/ts-universal-attributes-location.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/26/322-Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/26/322-Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Image Caching, chainMode, Custom Dialog, State Manager, Relative Position Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-26 22:28:39 / Modified: 22:28:56" itemprop="dateCreated datePublished" datetime="2025-06-26T22:28:39+08:00">2025-06-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting"><a href="#Daily-HarmonyOS-Next-Knowledge-Image-Caching-chainMode-Custom-Dialog-State-Manager-Relative-Position-Setting" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Image Caching, chainMode, Custom Dialog, State Manager, Relative Position Setting"></a>[Daily HarmonyOS Next Knowledge] Image Caching, chainMode, Custom Dialog, State Manager, Relative Position Setting</h3><h4 id="1-Can-the-image-component-in-HarmonyOS-cache-network-images"><a href="#1-Can-the-image-component-in-HarmonyOS-cache-network-images" class="headerlink" title="1. Can the image component in HarmonyOS cache network images?"></a>1. Can the image component in HarmonyOS cache network images?</h4><p>When loading network images, the Image component reads resources from the network for the first time, and subsequent loads are read from the cache. For specific image caching details, refer to the documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-app-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-system-app-V5</a>  </p>
<p><strong>static setImageCacheCount(value: number): void</strong><br>Sets the upper limit of decoded images cached in memory to improve loading speed for the same source. The default is 0 (no caching). The cache uses a built-in LRU strategy: if the limit is exceeded, the least recently used cache is removed. Set a reasonable value based on memory requirements to avoid high memory usage.  </p>
<ul>
<li>This method takes effect when set in <code>onPageShow</code> or <code>aboutToAppear</code> of an <code>@Entry</code>-marked page.  </li>
<li><code>setImageCacheCount</code>, <code>setImageRawDataCacheSize</code>, and <code>setImageFileCacheSize</code> have limited flexibility. For complex scenarios, use ImageKnife instead.</li>
</ul>
<pre><code class="language-typescript">// xxx.ets
import app, &#123; AppResponse &#125; from &#39;@system.app&#39;

@Entry
@Component
struct Index &#123;
  onPageShow() &#123;
    // Set the memory cache limit for decoded images to 100
    app.setImageCacheCount(100) 
    console.info(&#39;Application onPageShow&#39;)
  &#125;
  onDestroy() &#123;
    console.info(&#39;Application onDestroy&#39;)
  &#125;

  build() &#123;
    Row()&#123;
      // xxxxxxxxxxxxx is the image URL
      Image(&#39;xxxxxxxxxxxxx&#39;)
        .width(200)
        .height(50)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p><strong>static setImageRawDataCacheSize(value: number): void</strong><br>Sets the upper limit (in bytes) for raw image data cached in memory before decoding. The default is 0 (no caching). The LRU strategy applies: if the limit is exceeded, the least recently used raw data is removed. Adjust the value to balance memory usage.  </p>
<pre><code class="language-typescript">// xxx.ets
import app, &#123; AppResponse &#125; from &#39;@system.app&#39;

@Entry
@Component
struct Index &#123;
  onPageShow() &#123;
    // Set the memory cache limit for raw image data to 100MB (100MB = 100*1024*1024B = 104857600B)
    app.setImageRawDataCacheSize(104857600) 
    console.info(&#39;Application onPageShow&#39;)
  &#125;
  onDestroy() &#123;
    console.info(&#39;Application onDestroy&#39;)
  &#125;

  build() &#123;
    Row()&#123;
      // xxxxxxxxxxxxx is the image URL
      Image(&#39;xxxxxxxxxxxxx&#39;)
        .width(200)
        .height(50)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-Why-does-chainMode-not-work-in-the-vertical-direction-for-HarmonyOS-api-RelativeContainer"><a href="#2-Why-does-chainMode-not-work-in-the-vertical-direction-for-HarmonyOS-api-RelativeContainer" class="headerlink" title="2. Why does chainMode not work in the vertical direction for HarmonyOS api RelativeContainer?"></a>2. Why does chainMode not work in the vertical direction for HarmonyOS api RelativeContainer?</h4><p>When using horizontal chainMode for three components (A, B, C), it works, but vertical chainMode for two components (A, B) fails.  </p>
<p>For vertical chainMode, set the chain direction to <code>Axis.Vertical</code> and ensure the layout links to the parent container with connected anchors. Refer to dependency rules: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a>  </p>
<pre><code class="language-typescript">@Entry
@Component
struct Index &#123;
  build() &#123;
    Row() &#123;
      RelativeContainer() &#123;
        Stack()&#123;
          Image(&quot;Any image&quot;).width(80).aspectRatio(1).objectFit(ImageFit.Cover)
            .alt($r(&#39;app.media.background&#39;))
        &#125;.borderRadius(&#39;11vp&#39;).clip(true)
        .id(&#39;image&#39;)
        .alignRules(&#123;
          top: &#123;anchor: &quot;__container__&quot;, align: VerticalAlign.Top&#125;,
          bottom:&#123; anchor: &#39;a&#39;, align: VerticalAlign.Top&#125;,
          middle: &#123;anchor: &quot;__container__&quot;, align: HorizontalAlign.Center&#125;
        &#125;)
        .id(&quot;row1&quot;)
        .chainMode(Axis.Vertical, ChainStyle.SPREAD)
        Row().width(80).height(80)
          .backgroundColor(&quot;#FFCC00&quot;)
          .alignRules(&#123;
            top: &#123;anchor: &quot;row1&quot;, align: VerticalAlign.Bottom&#125;,
            bottom: &#123;anchor: &quot;b&quot;, align: VerticalAlign.Top&#125;,
            left: &#123;anchor: &quot;row1&quot;, align: HorizontalAlign.Start&#125;
          &#125;)
          .id(&quot;a&quot;)
        Row().width(80).height(80)
          .backgroundColor(&quot;#FF6633&quot;)
          .alignRules(&#123;
            top: &#123;anchor: &quot;a&quot;, align: VerticalAlign.Bottom&#125;,
            bottom: &#123;anchor: &quot;__container__&quot;, align : VerticalAlign.Bottom&#125;,
            left: &#123;anchor: &quot;row1&quot;, align: HorizontalAlign.Start&#125;
          &#125;)
          .id(&quot;b&quot;)
      &#125;
      .id(&#39;test&#39;)
      .width(300).height(300)
      .margin(&#123;left: 50&#125;)
      .border(&#123;width:2, color: &quot;#6699FF&quot;&#125;)
    &#125;
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="3-When-using-CustomDialog-to-decorate-a-pop-up-using-ObjectLink-causes-an-error-Can-it-be-decorated-with-Component-simultaneously"><a href="#3-When-using-CustomDialog-to-decorate-a-pop-up-using-ObjectLink-causes-an-error-Can-it-be-decorated-with-Component-simultaneously" class="headerlink" title="3. When using @CustomDialog to decorate a pop-up, using @ObjectLink causes an error. Can it be decorated with @Component simultaneously?"></a>3. When using @CustomDialog to decorate a pop-up, using @ObjectLink causes an error. Can it be decorated with @Component simultaneously?</h4><p>Yes, @Component can decorate a @CustomDialog pop-up component, and decorators work normally. Here’s a sample using @ObjectLink in a dialog:  </p>
<pre><code class="language-typescript">@Observed
class Person &#123;
  name: string = &quot;Jerry&quot;
  age: number = 0
&#125;

@CustomDialog
@Component
struct CustomDialogExample &#123;
  @ObjectLink curPerson: Person
  controller?: CustomDialogController
  build() &#123;
    Column() &#123;
      TextInput(&#123;text: this.curPerson.name&#125;)
        .onChange((input: string) =&gt; &#123;
          this.curPerson.name = input
        &#125;)
        .width(&quot;100%&quot;)
        .height(100)
    &#125;
    .width(&quot;100%&quot;)
    .backgroundColor(Color.White)
    .borderRadius(&#123;topLeft: 32, topRight: 32&#125;)
  &#125;
&#125;
@Entry
@Component
struct CustomDialogTest &#123;
  @State person: Person = new Person()
  dialogController: CustomDialogController = new CustomDialogController(&#123;
    builder: CustomDialogExample(&#123;curPerson: this.person&#125;),
    alignment: DialogAlignment.Bottom,
    customStyle: true
  &#125;)
  build() &#123;
    RelativeContainer() &#123;
      Text(this.person.name)
        .id(&#39;HelloWorld&#39;)
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
        .alignRules(&#123;
          center: &#123; anchor: &#39;container&#39;, align: VerticalAlign.Center &#125;,
          middle: &#123; anchor: &#39;container&#39;, align: HorizontalAlign.Center &#125;
        &#125;)
        .onClick(() =&gt; &#123;
          this.dialogController.open()
        &#125;)
    &#125;
    .height(&#39;100%&#39;)
    .width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="4-Does-HarmonyOS-have-a-state-manager-similar-to-Flutter’s-provider"><a href="#4-Does-HarmonyOS-have-a-state-manager-similar-to-Flutter’s-provider" class="headerlink" title="4. Does HarmonyOS have a state manager similar to Flutter’s provider?"></a>4. Does HarmonyOS have a state manager similar to Flutter’s provider?</h4><p>Refer to the state management documentation: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-management-overview-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-state-management-overview-V5</a>  </p>
<p>In declarative UI frameworks, the UI is a function of the program’s state. When state parameters change, the UI updates accordingly. This mechanism in ArkUI is called state management.  </p>
<p>Custom components use variables decorated by decorators to become state variables. Changes to state variables trigger UI re-rendering. Without state variables, the UI only renders once during initialization.  </p>
<h4 id="5-How-to-set-relative-positions-for-child-controls-in-a-HarmonyOS-Stack"><a href="#5-How-to-set-relative-positions-for-child-controls-in-a-HarmonyOS-Stack" class="headerlink" title="5. How to set relative positions for child controls in a HarmonyOS Stack?"></a>5. How to set relative positions for child controls in a HarmonyOS Stack?</h4><p>Setting <code>align(Alignment.End)</code> fails to place a close button on the far right. Use the following approach:  </p>
<pre><code class="language-typescript">.alignRules(&#123;
  top: &#123;anchor: &quot;__container__&quot;, align: VerticalAlign.Top&#125;,
  left: &#123;anchor: &quot;__container__&quot;, align: HorizontalAlign.Start&#125;
&#125;)
</code></pre>
<p>For specific examples, refer to: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-relativecontainer-V5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">124</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
