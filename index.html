<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"harmonyostech.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:type" content="website">
<meta property="og:title" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:url" content="https://harmonyostech.github.io/index.html">
<meta property="og:site_name" content="HarmonyOS NEXT Knowledge Charging Station">
<meta property="og:description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next&#96;s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Qingkouwei">
<meta property="article:tag" content="HarmonyOSNext, HarmonyOS NEXT, HarmonyOS, Cangjie">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://harmonyostech.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HarmonyOS NEXT Knowledge Charging Station</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HarmonyOS NEXT Knowledge Charging Station</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Analysis of Core Technologies and Application Scenarios of HarmonyOS NEXT</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/416%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Textbox-Focus-Acquisition-Custom-Component-Subcomponent-Addition-Floating-Button-Dialog-Button-Update-Variable-Name-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/416%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Textbox-Focus-Acquisition-Custom-Component-Subcomponent-Addition-Floating-Button-Dialog-Button-Update-Variable-Name-Component/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Textbox Focus Acquisition, Custom Component Subcomponent Addition, Floating Button, Dialog Button Update, Variable Name Component</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 07:01:40 / Modified: 07:03:34" itemprop="dateCreated datePublished" datetime="2025-06-25T07:01:40+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Textbox-Focus-Acquisition-Custom-Component-Subcomponent-Addition-Floating-Button-Dialog-Button-Update-Variable-Name-Component"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Textbox-Focus-Acquisition-Custom-Component-Subcomponent-Addition-Floating-Button-Dialog-Button-Update-Variable-Name-Component" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Textbox Focus Acquisition, Custom Component Subcomponent Addition, Floating Button, Dialog Button Update, Variable Name Component"></a>【Daily HarmonyOS Next Knowledge】 Textbox Focus Acquisition, Custom Component Subcomponent Addition, Floating Button, Dialog Button Update, Variable Name Component</h3><h4 id="1-Why-can’t-HarmonyOS-TextArea-automatically-focus-when-displayed"><a href="#1-Why-can’t-HarmonyOS-TextArea-automatically-focus-when-displayed" class="headerlink" title="1. Why can’t HarmonyOS TextArea automatically focus when displayed?"></a>1. Why can’t HarmonyOS TextArea automatically focus when displayed?</h4><p>Obtain focus through <code>requestFocus</code>. Refer to the demo below:  </p>
<pre><code class="language-typescript">import inputMethod from &#39;@ohos.inputMethod&#39;;

@Entry
@Component
export struct AsrPage &#123;
  @State message: string = &#39;Hello World&#39;
  @State show: boolean = false
  inputMethodController = inputMethod.getController();
  controller: TextInputController = new TextInputController()
  inputId: string = &#39;ceshi&#39;
  aboutToAppear(): void &#123;
    let textConfig: inputMethod.TextConfig = &#123;
      inputAttribute: &#123;
        textInputType: 0,
        enterKeyType: 1
      &#125;
    &#125;
    this.inputMethodController.attach(false, textConfig)
      .then(() =&gt; &#123;
      &#125;)
      .catch((reason: ESObject) =&gt; &#123;
      &#125;)
  &#125;
  build() &#123;
    NavDestination() &#123;
      Column() &#123;
        TextArea(&#123;
          placeholder: &#39;&#39;,
          text: &#39;&#39;
        &#125;)
          .width(&#39;100%&#39;)
          .height(26)
          .defaultFocus(true)
          .visibility(this.show ? Visibility.Visible : Visibility.None)
          .borderColor(&#39;#ff0000&#39;)
          .backgroundColor(&#39;#ff0000&#39;)
          .id(this.inputId)

        Button(&#39;打开&#39;).onClick(() =&gt; &#123;
          this.show = true
          this.controller.caretPosition(this.message.length)
          focusControl.requestFocus(this.inputId)
          this.inputMethodController.showTextInput().then(() =&gt; &#123;
          &#125;).catch((reason: ESObject) =&gt; &#123;

          &#125;)

        &#125;)
        Button(&#39;关闭&#39;).onClick(() =&gt; &#123;
          this.show = true
          this.inputMethodController.hideTextInput().then(() =&gt; &#123;
          &#125;).catch((reason: ESObject) =&gt; &#123;
          &#125;)

        &#125;)
      &#125;.justifyContent(FlexAlign.Center).width(&#39;100%&#39;).height(&#39;100%&#39;)
    &#125;.hideTitleBar(true)
  &#125;
&#125;
</code></pre>
<h4 id="2-How-to-add-child-controls-to-a-HarmonyOS-custom-component-when-using-it"><a href="#2-How-to-add-child-controls-to-a-HarmonyOS-custom-component-when-using-it" class="headerlink" title="2. How to add child controls to a HarmonyOS custom component when using it?"></a>2. How to add child controls to a HarmonyOS custom component when using it?</h4><p>If you have customized a control and want to add controls inside it like using containers such as Row or Column, refer to the following example. You can pass subcomponents to the custom component via <code>builder</code>:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-layout-V5#sizeresult10">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-custom-component-layout-V5#sizeresult10</a>  </p>
<h4 id="3-Does-HarmonyOS-have-a-floatingActionButton-component"><a href="#3-Does-HarmonyOS-have-a-floatingActionButton-component" class="headerlink" title="3. Does HarmonyOS have a floatingActionButton component?"></a>3. Does HarmonyOS have a floatingActionButton component?</h4><p>There is no built-in <code>floatingActionButton</code> component. To achieve a floating button effect, you can customize it using the <code>Button()</code> component. Refer to the demo below:  </p>
<pre><code class="language-typescript">// xxx.ets
@Entry
@Component
struct HoverButtonExample &#123;
  private arr: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
  build() &#123;
    Stack() &#123;
      List(&#123; space: 20, initialIndex: 0 &#125;) &#123;
        ForEach(this.arr, (item: number) =&gt; &#123;
          ListItem() &#123;
            Text(&#39;&#39; + item)
              .width(&#39;100%&#39;).height(100).fontSize(16)
              .textAlign(TextAlign.Center).borderRadius(10).backgroundColor(0xFFFFFF)
          &#125;
        &#125;, (item: number) =&gt; item.toString())
      &#125;.width(&#39;90%&#39;)
      Button() &#123;
        Image($r(&#39;app.media.ic_public_add&#39;))
          .width(50)
          .height(50)
      &#125;
      .width(60)
      .height(60)
      .position(&#123; x: &#39;80%&#39;, y: 600 &#125;)
      .shadow(&#123; radius: 10 &#125;)
      .onClick(() =&gt; &#123;
        // Operations to be executed
      &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
    .backgroundColor(0xDCDCDC)
    .padding(&#123; top: 5 &#125;)
  &#125;
&#125;
</code></pre>
<h4 id="4-How-to-update-the-button-content-of-AlertDialog-in-HarmonyOS"><a href="#4-How-to-update-the-button-content-of-AlertDialog-in-HarmonyOS" class="headerlink" title="4. How to update the button content of AlertDialog in HarmonyOS?"></a>4. How to update the button content of AlertDialog in HarmonyOS?</h4><p>When the cancel button content passed to AlertDialog is set with a <code>@State</code> variable, it does not update and always displays the initial value.  </p>
<p><img src="/../images/%E3%80%90Daily%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.16.png"><br><img src="/../images/%E3%80%90Daily%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.16-1.png"></p>
<p>AlertDialog does not support setting variables for the <code>value</code> of <code>primaryButton</code>. You can try customizing a pop-up window.<br>Refer to the document: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-methods-custom-dialog-box-V5</a>  </p>
<h4 id="5-How-to-use-variable-name-components-similar-to-React-in-HarmonyOS-ArkTS"><a href="#5-How-to-use-variable-name-components-similar-to-React-in-HarmonyOS-ArkTS" class="headerlink" title="5. How to use variable-name components (similar to React) in HarmonyOS ArkTS?"></a>5. How to use variable-name components (similar to React) in HarmonyOS ArkTS?</h4><p>In the following example, the subcomponent referenced in Row is a variable passed from outside, which may be View1 or View2. How to support syntax similar to the following:  </p>
<pre><code class="language-typescript">@Prop private view;
build() &#123;
  Row() &#123;
    view();
  &#125;
  .width(&#39;100%&#39;)
  .height(&#39;100%&#39;)
&#125;
</code></pre>
<p>Dynamic component loading can be achieved via <code>@builderParam</code>.<br>Refer to the official website example: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-builderparam-V5</a>  </p>
<p>When developers create a custom component and want to add specific functions to it (e.g., adding a click-to-navigate operation to a specified custom component), embedding event methods directly in the component will cause all instances of the custom component to gain the function. To solve this, ArkUI introduces the <code>@BuilderParam</code> decorator, which decorates variables pointing to <code>@Builder</code> methods (i.e., <code>@BuilderParam</code> is used to承接 <code>@Builder</code> functions). Developers can assign values to the <code>@BuilderParam</code>-decorated custom build function in different ways (e.g., parameter modification, trailing closure, arrow function borrowing) when initializing the custom component, and add specific functions to the component by calling <code>@BuilderParam</code> inside the custom component. This decorator is used to declare an element of any UI description, similar to a slot placeholder.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/415%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Nested-Class-State-Observation-Text-Emoji-Display-Dynamic-Screenshot-Dialog-in-Functions-Component-Size-Change-Detection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/415%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Nested-Class-State-Observation-Text-Emoji-Display-Dynamic-Screenshot-Dialog-in-Functions-Component-Size-Change-Detection/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Nested Class State Observation, Text & Emoji Display, Dynamic Screenshot, Dialog in Functions, Component Size Change Detection</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-25 06:59:03 / Modified: 06:59:33" itemprop="dateCreated datePublished" datetime="2025-06-25T06:59:03+08:00">2025-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Nested-Class-State-Observation-Text-Emoji-Display-Dynamic-Screenshot-Dialog-in-Functions-Component-Size-Change-Detection"><a href="#【Daily-HarmonyOS-Next-Knowledge】Nested-Class-State-Observation-Text-Emoji-Display-Dynamic-Screenshot-Dialog-in-Functions-Component-Size-Change-Detection" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Nested Class State Observation, Text &amp; Emoji Display, Dynamic Screenshot, Dialog in Functions, Component Size Change Detection"></a>【Daily HarmonyOS Next Knowledge】Nested Class State Observation, Text &amp; Emoji Display, Dynamic Screenshot, Dialog in Functions, Component Size Change Detection</h3><h4 id="1-HarmonyOS-nested-class-state-observation-issue"><a href="#1-HarmonyOS-nested-class-state-observation-issue" class="headerlink" title="1. HarmonyOS nested class state observation issue?"></a>1. HarmonyOS nested class state observation issue?</h4><pre><code class="language-typescript">@Observed
class A &#123;
  field1?: string
  field2?: Array&lt;ClassB&gt;
&#125;
@Observed
class B &#123;
  field3?: string
&#125;
@Component
struct View &#123;
  @ObjectLink a: ClassA
  build() &#123;
    if (this.a &amp;&amp; this.a.field2 &amp;&amp; this.a.field2.field3) &#123;
      Text(this.a.field2.field3)
    &#125;
  &#125;
&#125;
</code></pre>
<p>How to observe the state change of <code>field3</code> in ClassB? Currently, updating <code>field3</code> does not refresh the page.  </p>
<p><strong>Reference demo</strong>:  </p>
<pre><code class="language-typescript">@ObservedV2
class Son &#123;
  @Trace age: string = &quot;100&quot;;
&#125;
class Father &#123;
  son: Son = new Son();
&#125;
@Entry
@Component
struct Index &#123;
  father: Father = new Father();
  build() &#123;
    Column() &#123;
      // When clicking to change age, the Text component refreshes
      Text(`$&#123;this.father.son.age&#125;`)
        .onClick(() =&gt; &#123;
          this.father.son.age = &quot;102&quot;;
        &#125;)
      TextInput(&#123;text: `$&#123;this.father.son.age&#125;`, placeholder: &quot;aaa&quot;&#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-Does-the-HarmonyOS-text-component-support-simultaneous-display-of-text-and-emojis"><a href="#2-Does-the-HarmonyOS-text-component-support-simultaneous-display-of-text-and-emojis" class="headerlink" title="2. Does the HarmonyOS text component support simultaneous display of text and emojis?"></a>2. Does the HarmonyOS text component support simultaneous display of text and emojis?</h4><p>Is there a text component that supports displaying text and emojis together?  </p>
<p>The Text component does not support small images or emojis. Use the RichEditor component instead:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5</a>  </p>
<h4 id="3-Does-HarmonyOS-have-an-interface-for-dynamic-screenshot"><a href="#3-Does-HarmonyOS-have-an-interface-for-dynamic-screenshot" class="headerlink" title="3. Does HarmonyOS have an interface for dynamic screenshot?"></a>3. Does HarmonyOS have an interface for dynamic screenshot?</h4><p>Is there an interface to implement screenshot dynamically?  </p>
<p>Use component screenshot capabilities:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5</a><br><code>@ohos.arkui.componentSnapshot</code>  </p>
<p>This module provides screenshot capabilities for both loaded and unloaded components. It captures only the component’s defined area—content drawn outside the component or parent boundaries is not included, and sibling components are not visible in the screenshot.  </p>
<h4 id="4-How-to-trigger-a-custom-dialog-in-an-external-function-in-HarmonyOS"><a href="#4-How-to-trigger-a-custom-dialog-in-an-external-function-in-HarmonyOS" class="headerlink" title="4. How to trigger a custom dialog in an external function in HarmonyOS?"></a>4. How to trigger a custom dialog in an external function in HarmonyOS?</h4><p>Implement via global popups:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a><br><code>@ohos.promptAction</code>  </p>
<h4 id="5-How-to-accurately-obtain-component-size-changes-in-HarmonyOS-ArkUI"><a href="#5-How-to-accurately-obtain-component-size-changes-in-HarmonyOS-ArkUI" class="headerlink" title="5. How to accurately obtain component size changes in HarmonyOS ArkUI?"></a>5. How to accurately obtain component size changes in HarmonyOS ArkUI?</h4><ul>
<li><p><strong>onAreaChange</strong>: Triggers when the component’s display size or position changes.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5</a>  </p>
</li>
<li><p><strong>onSizeChange</strong>: Triggers when the component’s display size changes.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-size-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-size-change-event-V5</a>  </p>
</li>
<li><p><strong>onVisibleAreaChange</strong>: Triggers when the component’s screen visibility area changes, suitable for ad exposure tracking.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-visible-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-visible-area-change-event-V5</a></p>
</li>
</ul>
<p><strong>onVisibleAreaChange(ratios: Array<number>, event: (isVisible: boolean, currentRatio: number) &#x3D;&gt; void): T</strong>  </p>
<ul>
<li><strong>ratios</strong>: Array of thresholds (0.0–1.0). The callback triggers when the visible area ratio approaches any threshold.  </li>
<li><strong>event</strong>:  <ul>
<li><code>isVisible</code>: True if the ratio increases, false if it decreases.  </li>
<li><code>currentRatio</code>: The visible area ratio when the callback triggers.### [Daily HarmonyOS Next Knowledge] Nested Class State Observation, Simultaneous Text and Emoji Display, Dynamic Screenshot Implementation, Popping Dialogs in Functions, Obtaining Component Size Changes</li>
</ul>
</li>
</ul>
<h4 id="1-HarmonyOS-Nested-Class-State-Observation-Issue"><a href="#1-HarmonyOS-Nested-Class-State-Observation-Issue" class="headerlink" title="1. HarmonyOS Nested Class State Observation Issue?"></a>1. HarmonyOS Nested Class State Observation Issue?</h4><pre><code class="language-typescript">@Observed
class A &#123;
  field1?: string;
  field2?: Array&lt;ClassB&gt;;
&#125;

@Observed
class B &#123;
  field3?: string;
&#125;

@Component
struct View &#123;
  @ObjectLink a: ClassA;
  
  build() &#123;
    if (this.a &amp;&amp; this.a.field2 &amp;&amp; this.a.filed2.field3) &#123;
      Text(this.a.filed2.field3);
    &#125;
  &#125;
&#125;
</code></pre>
<p>How can we observe state changes in <code>field3</code> of <code>ClassB</code>? Currently, the UI does not refresh when <code>field3</code> is updated.  </p>
<p><strong>Reference Demo</strong>:  </p>
<pre><code class="language-typescript">@ObservedV2
class Son &#123;
  @Trace age: string = &quot;100&quot;;
&#125;

class Father &#123;
  son: Son = new Son();
&#125;

@Entry
@Component
struct Index &#123;
  father: Father = new Father();
  
  build() &#123;
    Column() &#123;
      // The Text component refreshes when age is updated via click
      Text(`$&#123;this.father.son.age&#125;`)
        .onClick(() =&gt; &#123;
          this.father.son.age = &quot;102&quot;;
        &#125;);
      
      TextInput(&#123; text: `$&#123;this.father.son.age&#125;`, placeholder: &quot;aaa&quot; &#125;);
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-Does-the-HarmonyOS-Text-component-currently-support-simultaneous-display-of-text-and-emojis"><a href="#2-Does-the-HarmonyOS-Text-component-currently-support-simultaneous-display-of-text-and-emojis" class="headerlink" title="2. Does the HarmonyOS Text component currently support simultaneous display of text and emojis?"></a>2. Does the HarmonyOS Text component currently support simultaneous display of text and emojis?</h4><p>Is there a component that supports displaying both text and emojis?  </p>
<p>The <code>Text</code> component does not currently support small images or emojis. Use the <code>RichEditor</code> component instead:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5</a>  </p>
<h4 id="3-Are-there-interfaces-in-HarmonyOS-to-dynamically-capture-screenshots"><a href="#3-Are-there-interfaces-in-HarmonyOS-to-dynamically-capture-screenshots" class="headerlink" title="3. Are there interfaces in HarmonyOS to dynamically capture screenshots?"></a>3. Are there interfaces in HarmonyOS to dynamically capture screenshots?</h4><p>Can screenshots be dynamically captured via interfaces?  </p>
<p>Use the Component Snapshot API:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-arkui-componentsnapshot-V5</a><br><code>@ohos.arkui.componentSnapshot (Component Snapshot)</code>  </p>
<p>This module provides the ability to capture screenshots of components, including both loaded and unloaded components. The screenshot only captures the component’s defined area; content drawn outside this area (e.g., overflow or sibling components) will not be included.  </p>
<h4 id="4-How-to-display-a-custom-dialog-from-an-external-function-in-HarmonyOS"><a href="#4-How-to-display-a-custom-dialog-from-an-external-function-in-HarmonyOS" class="headerlink" title="4. How to display a custom dialog from an external function in HarmonyOS?"></a>4. How to display a custom dialog from an external function in HarmonyOS?</h4><p>Consider using global dialogs:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-promptaction-V5</a><br><code>@ohos.promptAction (Dialogs)</code>  </p>
<h4 id="5-How-to-accurately-detect-component-size-changes-in-HarmonyOS-ArkUI"><a href="#5-How-to-accurately-detect-component-size-changes-in-HarmonyOS-ArkUI" class="headerlink" title="5. How to accurately detect component size changes in HarmonyOS ArkUI?"></a>5. How to accurately detect component size changes in HarmonyOS ArkUI?</h4><p><strong>Component Area Change Event (<code>onAreaChange</code>)</strong>:<br>Triggered when the component’s display size or position changes.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-area-change-event-V5</a>  </p>
<p><strong>Component Size Change Event (<code>onSizeChange</code>)</strong>:<br>Triggered when the component’s display size changes.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-size-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-size-change-event-V5</a>  </p>
<p><strong>Component Visible Area Change Event (<code>onVisibleAreaChange</code>)</strong>:<br>Triggered when the component’s visible area in the screen changes. Useful for scenarios like ad exposure tracking.<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-visible-area-change-event-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-component-visible-area-change-event-V5</a>  </p>
<pre><code class="language-typescript">onVisibleAreaChange(ratios: Array&lt;number&gt;, event: (isVisible: boolean, currentRatio: number) =&gt; void): T
</code></pre>
<p><strong>Parameters</strong>:  </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>ratios</code></td>
<td><code>Array&lt;number&gt;</code></td>
<td>Yes</td>
<td>Threshold array. Each threshold represents the ratio of the component’s visible area (within its parent) to its total area. The callback triggers when this ratio approaches a threshold. Valid range: [0.0, 1.0]. Values outside this range are clamped to 0.0 or 1.0.<br><br><strong>Note</strong>: Values near 0 or 1 are rounded with a tolerance of 0.001 (e.g., 0.9997 becomes 1).</td>
</tr>
<tr>
<td><code>event</code></td>
<td><code>(isVisible: boolean, currentRatio: number) =&gt; void</code></td>
<td>Yes</td>
<td>- <code>isVisible</code>: Indicates if the visible ratio increased (<code>true</code>) or decreased (<code>false</code>).<br><br>- <code>currentRatio</code>: The current visible area ratio when the callback is triggered.</td>
</tr>
</tbody></table>
<p>This event is useful for scenarios like determining if a component is fully or partially visible on screen (e.g., for ad impression tracking).</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/414%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Intercepting-Touch-Events-Disabling-Side-Swipe-Back-Data-Driven-UI-Text-Ellipsis-Trigger-Obtaining-Component-Screen-Coordinates/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/414%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Intercepting-Touch-Events-Disabling-Side-Swipe-Back-Data-Driven-UI-Text-Ellipsis-Trigger-Obtaining-Component-Screen-Coordinates/" class="post-title-link" itemprop="url">414【Daily HarmonyOS Next Knowledge】Intercepting Touch Events, Disabling Side Swipe Back, Data-Driven UI, Text Ellipsis Trigger, Obtaining Component Screen Coordinates</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 06:57:30" itemprop="dateCreated datePublished" datetime="2025-06-25T06:57:30+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-App-Configuration-Information-Map-Type-Global-Popup-Dynamic-Import-Reflection-Default-Keyboard-Popup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Obtaining-App-Configuration-Information-Map-Type-Global-Popup-Dynamic-Import-Reflection-Default-Keyboard-Popup/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Obtaining App Configuration Information, Map Type, Global Popup, Dynamic Import Reflection, Default Keyboard Popup</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 06:55:15" itemprop="dateCreated datePublished" datetime="2025-06-25T06:55:15+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Bottom-Placement-Adding-Search-Component-to-Custom-Dialog-Modifying-APP-Name-and-Icon-Page-Navigation-Animation-Options/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91-Bottom-Placement-Adding-Search-Component-to-Custom-Dialog-Modifying-APP-Name-and-Icon-Page-Navigation-Animation-Options/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】 Bottom Placement, Adding Search Component to Custom Dialog, Modifying APP Name and Icon, Page Navigation, Animation Options</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 06:53:43" itemprop="dateCreated datePublished" datetime="2025-06-25T06:53:43+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Using-Semi-modal-in-Lists-Custom-Toast-Popup-Following-Image-Base64-Encoding-Routing-Optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/25/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Using-Semi-modal-in-Lists-Custom-Toast-Popup-Following-Image-Base64-Encoding-Routing-Optimization/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Using Semi-modal in Lists, Custom Toast, Popup Following, Image Base64 Encoding, Routing Optimization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-25 06:45:07" itemprop="dateCreated datePublished" datetime="2025-06-25T06:45:07+08:00">2025-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Getting App Package Name, Popup Background Color, Decorator Nesting Issues, Regex Problems, Text Component Max Width Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:54:49 / Modified: 23:56:24" itemprop="dateCreated datePublished" datetime="2025-06-24T23:54:49+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting"><a href="#【Daily-HarmonyOS-Next-Knowledge】-Getting-App-Package-Name-Popup-Background-Color-Decorator-Nesting-Issues-Regex-Problems-Text-Component-Max-Width-Setting" class="headerlink" title="【Daily HarmonyOS Next Knowledge】 Getting App Package Name, Popup Background Color, Decorator Nesting Issues, Regex Problems, Text Component Max Width Setting"></a>【Daily HarmonyOS Next Knowledge】 Getting App Package Name, Popup Background Color, Decorator Nesting Issues, Regex Problems, Text Component Max Width Setting</h3><h4 id="1-How-to-obtain-the-current-app-package-name-active-AbilityName-and-active-ModuleName-in-a-HAR-package-in-HarmonyOS"><a href="#1-How-to-obtain-the-current-app-package-name-active-AbilityName-and-active-ModuleName-in-a-HAR-package-in-HarmonyOS" class="headerlink" title="1. How to obtain the current app package name, active AbilityName, and active ModuleName in a HAR package in HarmonyOS?"></a>1. How to obtain the current app package name, active AbilityName, and active ModuleName in a HAR package in HarmonyOS?</h4><p>The NFC card reading interface requires passing bundleManager.ElementName, which includes bundleName, abilityName, and moduleName. If the card reading logic is written in a HAR package, how to obtain these values?  </p>
<pre><code class="language-typescript">import &#123; MainPage &#125; from &#39;harApp/Index&#39;;
import &#123; common &#125; from &#39;@kit.AbilityKit&#39;;
import &#123; hilog &#125; from &#39;@kit.PerformanceAnalysisKit&#39;;
const TAG: string = &#39;testTag&#39;

@Entry
@Component
struct OutPage &#123;
  @State message: string = &#39;OutPage&#39;;
  private bundleName: string = &#39;&#39;
  private abilityName: string = &#39;&#39;
  private moduleName: string = &#39;&#39;

  aboutToAppear(): void &#123;
    let context = getContext() as common.UIAbilityContext
    hilog.info(0x0000, TAG, &#39;OutPage-bundleName: %&#123;public&#125;s&#39;, context.abilityInfo.bundleName)
    hilog.info(0x0000, TAG, &#39;OutPage-abilityName: %&#123;public&#125;s&#39;, context.abilityInfo.name)
    hilog.info(0x0000, TAG, &#39;OutPage-moduleName: %&#123;public&#125;s&#39;, context.abilityInfo.moduleName)
    this.bundleName = context.abilityInfo.bundleName
    this.abilityName = context.abilityInfo.name
    this.moduleName = context.abilityInfo.moduleName
  &#125;

  build() &#123;
    Column() &#123;
      MainPage(&#123; bundleName: this.bundleName, abilityName: this.abilityName, moduleName: this.moduleName &#125;)
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="2-Does-the-HarmonyOS-popup-window-have-a-built-in-background-color"><a href="#2-Does-the-HarmonyOS-popup-window-have-a-built-in-background-color" class="headerlink" title="2. Does the HarmonyOS popup window have a built-in background color?"></a>2. Does the HarmonyOS popup window have a built-in background color?</h4><p>Currently, custom popups have a default blurred material. To set <code>backgroundColor: Color.Transparent</code>, also disable the blur effect with <code>backgroundBlurStyle: BlurStyle.NONE</code>.  </p>
<h4 id="3-When-nesting-second-level-decorators-in-HarmonyOS-why-isn’t-the-list-item-control联动-dynamically-updated"><a href="#3-When-nesting-second-level-decorators-in-HarmonyOS-why-isn’t-the-list-item-control联动-dynamically-updated" class="headerlink" title="3. When nesting second-level decorators in HarmonyOS, why isn’t the list item control联动 (dynamically updated)?"></a>3. When nesting second-level decorators in HarmonyOS, why isn’t the list item control联动 (dynamically updated)?</h4><p>Issues with @Observed and @ObjectLink decorators: Nesting class object properties doesn’t trigger updates even with the same annotation format.  </p>
<p><strong>Cause</strong>: When assigning <code>this.titleList = response.data?.form_info!!</code>, the objects in titleList are not of the “Form_info” type, so @Observed can’t monitor changes.<br><strong>Solution</strong>: Use the third-party library <code>class-transformer</code> to convert data to the “Form_info” type:<br><code>this.titleList = plainToClass(Form_info, response.data?.form_info!!)</code>  </p>
<h4 id="4-Why-does-TS-code-execute-differently-in-VSCode-and-HarmonyOS-ArkTS"><a href="#4-Why-does-TS-code-execute-differently-in-VSCode-and-HarmonyOS-ArkTS" class="headerlink" title="4. Why does TS code execute differently in VSCode and HarmonyOS ArkTS?"></a>4. Why does TS code execute differently in VSCode and HarmonyOS ArkTS?</h4><p>TS code behaves differently in VSCode and HarmonyOS ArkTS due to ArkTS’s adaptation of regular expressions.<br><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-more-cases-V5#arkts-no-regexp-literals">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-more-cases-V5#arkts-no-regexp-literals</a>  </p>
<p><strong>Example</strong>:  </p>
<pre><code class="language-typescript">// Not recommended in ArkTS
let regex: RegExp = /\s*/g;

// Recommended
let regexp: RegExp = new RegExp(&#39;\\s*&#39;, &#39;g&#39;);

// Alternative for regex with flags
const combinedPattern = new RegExp(&quot;&lt;[&gt;]+&gt;(?:[\s\S]*?)&lt;\/[&gt;]+&gt;|\[[^\]]+\]&quot;, &#39;g&#39;);
</code></pre>
<h4 id="5-How-to-set-the-maximum-display-width-for-a-HarmonyOS-Text-component"><a href="#5-How-to-set-the-maximum-display-width-for-a-HarmonyOS-Text-component" class="headerlink" title="5. How to set the maximum display width for a HarmonyOS Text component?"></a>5. How to set the maximum display width for a HarmonyOS Text component?</h4><p><strong>Demo</strong>:  </p>
<pre><code class="language-typescript">@Entry
@Component
struct TextInputExample2 &#123;
  controller: TextInputController = new TextInputController()
  @State text: string = &#39;&#39;

  build() &#123;
    Column(&#123; space: 20 &#125;) &#123;
      Text(&#39;1111111111111111111111111111111&#39;.split(&#39;&#39;).join(&#39;\u200B&#39;))
        .textOverflow(&#123; overflow: TextOverflow.Ellipsis &#125;)
        .maxLines(1)
        .fontSize(12)
        .border(&#123; width: 1 &#125;)
        .margin(100)
        .constraintSize(&#123; maxWidth: 200 &#125;)
    &#125;.width(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-size-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-universal-attributes-size-V5</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] URL Encoding, Resource Adaptation, Routing Mixing, Custom Root Container, News-related Examples</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-06-24 23:49:41" itemprop="dateCreated datePublished" datetime="2025-06-24T23:49:41+08:00">2025-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-25 00:06:32" itemprop="dateModified" datetime="2025-06-25T00:06:32+08:00">2025-06-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples"><a href="#Daily-HarmonyOS-Next-Knowledge-URL-Encoding-Resource-Adaptation-Routing-Mixing-Custom-Root-Container-News-related-Examples" class="headerlink" title="[Daily HarmonyOS Next Knowledge] URL Encoding, Resource Adaptation, Routing Mixing, Custom Root Container, News-related Examples"></a>[Daily HarmonyOS Next Knowledge] URL Encoding, Resource Adaptation, Routing Mixing, Custom Root Container, News-related Examples</h3><h4 id="1-HarmonyOS-encodeURIComponent"><a href="#1-HarmonyOS-encodeURIComponent" class="headerlink" title="1. HarmonyOS encodeURIComponent?"></a>1. HarmonyOS encodeURIComponent?</h4><p>How to implement similar functionality: <code>const imgParams = encodeURIComponent(imgBase64Str)</code>  </p>
<p>String encoding demo:  </p>
<pre><code class="language-typescript">@Entry 
@Component struct Index &#123; 
  @State message: string = &#39;Hello World&#39;; 
  name: string = &quot;张三&quot;;
  
  build() &#123;
    Row() &#123; 
      Column() &#123;
        Text(this.message) 
          .fontSize(25) 
          .fontWeight(FontWeight.Bold) 
        
        Button(&#123;
          type: ButtonType.Capsule,
          margin: &#123; bottom: 20 &#125;
        &#125;) &#123;
          Text(&#39;encodeURIComponent&#39;)
            .fontSize(25)
        &#125;
        .onClick(() =&gt; &#123;
          this.message = &quot;http://example.com/index.html?url=&quot; + encodeURIComponent(&quot;http://example.com?name=&quot; + this.name); 
        &#125;) 
        
        Button(&#123;
          type: ButtonType.Capsule,
          margin: &#123; bottom: 20 &#125;
        &#125;) &#123;
          Text(&#39;encodeURI&#39;)
            .fontSize(25)
        &#125;
        .onClick(() =&gt; &#123;
          this.message = encodeURI(&quot;http://example.com/index.html?name=&quot; + this.name); 
        &#125;) 
      &#125;
      .width(&#39;100%&#39;) 
    &#125; 
    .height(&#39;100%&#39;)
  &#125;
&#125;
</code></pre>
<h4 id="2-HarmonyOS-resource-adaptation"><a href="#2-HarmonyOS-resource-adaptation" class="headerlink" title="2. HarmonyOS resource adaptation?"></a>2. HarmonyOS resource adaptation?</h4><p>If only one set of float resources is defined in the <code>resources</code> directory, do references to these resources need to be converted to the corresponding dimensions for mobile devices?  </p>
<ul>
<li>If there is only one set of UI resources, the adaptation of width&#x2F;height in formal projects requires manual conversion decisions, as the system does not automatically convert based on mobile device dimensions.  </li>
<li>For better adaptation without conversion, consider:  <ul>
<li>Using <code>vp</code> for pixel units, <code>fp</code> for text, and responsive layouts.  </li>
<li>Using <code>designWidth</code> to define the design baseline width, then scaling elements based on the actual device width.</li>
</ul>
</li>
</ul>
<p><strong>Virtual pixel unit (vp)</strong>:<br>Virtual pixels provide a flexible way to adapt to different screen densities, differing from hardware pixel units.  </p>
<p><strong>Font pixel unit (fp)</strong>:<br>Fp is identical to vp by default (1fp &#x3D; 1vp). If users enable larger fonts in settings, fp scales by the system font ratio (1fp &#x3D; 1vp * scale).  </p>
<p><strong>Best practices</strong>:  </p>
<ul>
<li>Use <code>fp</code> for text (default unit is <code>px</code>, which may cause layout deviations on different devices; <code>fp</code> handles screen density automatically).  </li>
<li>Use <code>vp</code> for distance units (similar to <code>sp/dp</code> in other frameworks).  </li>
<li><code>vp</code> is unaffected by <code>designWidth</code> configuration, while <code>lpx</code> is scaled based on <code>designWidth</code>.  <ul>
<li>Example: If <code>designWidth</code> is changed from 720 to 750, a container with <code>720lpx</code> width will:  <ul>
<li>Fill the screen when <code>designWidth: 720</code>.  </li>
<li>Not fill the screen when <code>designWidth: 750</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-Can-HarmonyOS-Navigation-and-router-be-used-mixedly"><a href="#3-Can-HarmonyOS-Navigation-and-router-be-used-mixedly" class="headerlink" title="3. Can HarmonyOS Navigation and router be used mixedly?"></a>3. Can HarmonyOS Navigation and router be used mixedly?</h4><p>Navigation and router can be used mixedly with specific restrictions and recommended strategies:  </p>
<ol>
<li><p><strong>router use cases</strong>:  </p>
<ul>
<li>Suitable for simple page jumps without complex animations, interactions, or multi-level routing.  </li>
<li>Ideal for scenarios requiring UIContext of the main window for navigation.</li>
</ul>
</li>
<li><p><strong>Navigation use cases</strong>:  </p>
<ul>
<li>Suitable for complex scenarios needing to replace router capabilities, offering more robust routing and navigation features.  </li>
<li>Handles complex interaction logic and multi-level routing requirements.</li>
</ul>
</li>
<li><p><strong>Mixed usage strategies</strong>:  </p>
<ul>
<li><strong>Recommendation</strong>: Use <code>router</code> for simple scenarios; use <code>Navigation</code> for complex needs to ensure consistency and user experience.  </li>
<li><strong>Evolution</strong>: <code>router</code> will continue to be maintained, but new routing features will prioritize <code>Navigation</code>.</li>
</ul>
</li>
<li><p><strong>Mixed usage restrictions</strong>:  </p>
<ul>
<li>When using <code>Navigation</code>, pay attention to details like hiding the title bar (<code>hideTitleBar</code>) and handling large icons.  </li>
<li>Ensure routing consistency and correctness to avoid errors.</li>
</ul>
</li>
</ol>
<h4 id="4-How-to-define-a-root-container-in-HarmonyOS"><a href="#4-How-to-define-a-root-container-in-HarmonyOS" class="headerlink" title="4. How to define a root container in HarmonyOS?"></a>4. How to define a root container in HarmonyOS?</h4><p>How to define a root component&#x2F;container similar to <code>Column</code>&#x2F;<code>Row</code>?  </p>
<p>ArkTS supports TypeScript decorator syntax prior to TS5.0. For decorator definitions and runtime behavior, refer to the <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/decorators.html">TS official documentation</a>. Note that decorators defined in <code>.ets</code> files must comply with ArkTS syntax (e.g., no <code>any</code> types).  </p>
<p><strong>Decorator examples (class, property, method, parameter)</strong>:  </p>
<pre><code class="language-typescript">function TestClassDecorator(target: Function) &#123;&#125;
function TestMemberDecorator(target: testClass, memberName: String) &#123;&#125;
function TestFunDecorator(target: testClass, propertyName: String, descriptor: PropertyDescriptor) &#123;&#125;
function TestArgDecorator(target: Function, methodName: String, paramIndex: Number) &#123;&#125;

@TestClassDecorator
class testClass &#123;
  @TestMemberDecorator
  count: number = 123;
  
  @TestFunDecorator
  TestFun(@TestArgDecorator param: string) &#123;&#125;
&#125;
</code></pre>
<p><strong>Root container demo with decorators</strong>:  </p>
<pre><code class="language-typescript">import &#123; MyDescriptor &#125; from ‘…/common/decorators’

@Entry
@Component
struct Index_231129191721035 &#123;
  @State message: string = ‘Hello World’;
  
  aboutToAppear() &#123;
    this.demo()
  &#125;
  
  build() &#123;
    Flex() &#123;
      // Content
    &#125;
    .backgroundColor(Color.Green)
    .constraintSize(&#123;
      minWidth: 100,
      maxWidth: 200,
      minHeight: 0,
      maxHeight: 200
    &#125;)
    .height(‘100%’)
  &#125;
  
  @MyDescriptor
  demo() &#123;
    console.log(‘ccc’)
    return ‘cccc’
  &#125;
&#125;

export function MyDescriptor(target: Object, key: string, descriptor: PropertyDescriptor) &#123;
  const originalMethod: Function = descriptor.value;
  descriptor.value = (...args: Object[]) =&gt; &#123;
    console.log(`Calling $&#123;target.constructor.name&#125; method $&#123;key&#125; with argument: $&#123;args&#125;`);
    const result: Object = originalMethod(...args);
    console.log(`Method $&#123;key&#125; returned: $&#123;result&#125;`);
    return result;
  &#125;
  return descriptor;
&#125;
</code></pre>
<p><strong>Note</strong>: A class decorated by a decorator (e.g., <code>class A</code>) requires <code>new A()</code> to trigger the decorator.  </p>
<h4 id="5-HarmonyOS-news-related-demo-reference"><a href="#5-HarmonyOS-news-related-demo-reference" class="headerlink" title="5. HarmonyOS news-related demo reference?"></a>5. HarmonyOS news-related demo reference?</h4><p>Refer to <a target="_blank" rel="noopener" href="https://gitee.com/harmonyos_samples/multi-news-read">UI Framework - Multi-news Reading</a>.  </p>
<p><strong>Media news interface (repeating layout)</strong>:  </p>
<ul>
<li>Uses grid layout, controlling column count via breakpoints.  </li>
<li>The <code>onBreakChange</code> callback of <code>GridRow</code> updates breakpoints and data source counts when the interface size changes.  </li>
<li><code>columns = 1</code> for <code>sm/md</code> breakpoints; <code>columns = 2</code> for <code>lg</code> and above.</li>
</ul>
<p><strong>News channel interface (repeating layout)</strong>:  </p>
<ul>
<li>Similarly uses grid layout with column count controlled by breakpoints.  </li>
<li>For <code>sm/md</code> breakpoints: <code>columns = 1</code>, hide news summaries; for <code>lg</code> and above: <code>columns = 2</code>, display summaries with max 2 lines and ellipsis.</li>
</ul>
<p><strong>News list interface (list to grid conversion)</strong>:  </p>
<ul>
<li>Uses <code>List</code> for <code>sm</code> breakpoints; uses grid layout for breakpoints above <code>sm</code>.  </li>
<li><code>md</code> breakpoint: 2 columns; <code>lg</code> breakpoint: 4 columns, with <code>GridCol</code> width adjusted as needed.</li>
</ul>
<p><img src="/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.09.png" alt="text"><br><img src="/images/%E3%80%90%E6%AF%8F%E6%97%A5%E5%AD%A6%E7%82%B9HarmonyOS%20Next%E7%9F%A5%E8%AF%86%E3%80%9125.04.09-1.png" alt="text"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/%E3%80%90Daily-HarmonyOS-Next-Knowledge%E3%80%91Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild/" class="post-title-link" itemprop="url">【Daily HarmonyOS Next Knowledge】Text Content Font, Half-screen Routing, Input Cursor Movement Monitoring, DidBuild</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:47:26 / Modified: 23:47:52" itemprop="dateCreated datePublished" datetime="2025-06-24T23:47:26+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="【Daily-HarmonyOS-Next-Knowledge】Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild"><a href="#【Daily-HarmonyOS-Next-Knowledge】Text-Content-Font-Half-screen-Routing-Input-Cursor-Movement-Monitoring-DidBuild" class="headerlink" title="【Daily HarmonyOS Next Knowledge】Text Content Font, Half-screen Routing, Input Cursor Movement Monitoring, DidBuild"></a>【Daily HarmonyOS Next Knowledge】Text Content Font, Half-screen Routing, Input Cursor Movement Monitoring, DidBuild</h3><h4 id="1-HarmonyOS-Text-content-not-displayed-when-using-fontFamily"><a href="#1-HarmonyOS-Text-content-not-displayed-when-using-fontFamily" class="headerlink" title="1. HarmonyOS Text content not displayed when using fontFamily?"></a>1. HarmonyOS Text content not displayed when using fontFamily?</h4><p>To globally use custom fonts in an app, register them via the <code>windowStage.loadContent</code> callback in the <code>onWindowStageCreate</code> lifecycle of the <code>EntryAbility.ets</code> file.  </p>
<h4 id="2-How-to-open-a-half-screen-via-routing-in-HarmonyOS"><a href="#2-How-to-open-a-half-screen-via-routing-in-HarmonyOS" class="headerlink" title="2. How to open a half-screen via routing in HarmonyOS?"></a>2. How to open a half-screen via routing in HarmonyOS?</h4><p>In scenarios like live broadcast rooms or feed streams, clicking a button opens a half-screen container with an RNView. Clicking within RN opens a new half-screen, allowing multiple half-screens to be stacked. Routing simplifies this by abstracting the jump logic, eliminating the need for business parties to care about the entry point or write separate components for each scenario.  </p>
<p>Use consistent component navigation with the <code>NavDestinationMode.DIALOG</code> display type:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-navigation-navigation-V5</a>  </p>
<h4 id="3-HarmonyOS-router-replaceUrl-issue"><a href="#3-HarmonyOS-router-replaceUrl-issue" class="headerlink" title="3. HarmonyOS router.replaceUrl issue?"></a>3. HarmonyOS router.replaceUrl issue?</h4><p>When page A uses <code>pushUrl</code> with <code>router.RouterMode.Single</code> to navigate to page B, and page B uses <code>replaceUrl</code> with <code>router.RouterMode.Single</code> to return to page A, clicking the back button in page A or the system back button may fail to navigate properly (e.g., returning directly to the desktop).  </p>
<p><strong>Solution</strong>: Replace <code>router.replaceUrl()</code> with <code>router.pushUrl()</code>. <code>replaceUrl</code> replaces the current page and destroys the replaced page, while <code>pushUrl</code> maintains the page stack.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5#routerback">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-router-V5#routerback</a>  </p>
<p><strong>Demo example</strong>:  </p>
<pre><code class="language-typescript">// searchDetail.ets
import &#123; router &#125; from &#39;@kit.ArkUI&#39;

@Entry
@Component
struct searchDeatil &#123;
  onPageHide(): void &#123;
    router.clear() // Clear all historical pages, keeping only the current page at the stack top.
  &#125;
  @State message: string = &#39;Return&#39;

  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(&#39;Page B&#39;)
        Button(this.message).fontSize(20).onClick(() =&gt; &#123;
          router.replaceUrl(&#123;
            url: &#39;pages/Index&#39;
          &#125;, router.RouterMode.Single, (err) =&gt; &#123;
            if (err) &#123;
              console.error(`Invoke replaceUrl failed, code is $&#123;err.code&#125;, message is $&#123;err.message&#125;`);
              return;
            &#125;
            console.info(&#39;Invoke replaceUrl succeeded.&#39;);
          &#125;)
        &#125;)
      &#125;
    &#125;
  &#125;
&#125;

// index.ets
import router from &#39;@ohos.router&#39;;
@Entry
@Component
struct Index &#123;
  build() &#123;
    Row() &#123;
      Column() &#123;
        Text(&#39;Page A&#39;)
        Button(&#39;Jump to B&#39;).onClick(() =&gt; &#123;
          router.pushUrl(&#123;
            url: &#39;pages/SearchDetail&#39; // Target URL
          &#125;, router.RouterMode.Single, (err) =&gt; &#123;
            if (err) &#123;
              console.error(`Invoke replaceUrl failed, code is $&#123;err.code&#125;, message is $&#123;err.message&#125;`);
              return;
            &#125;
            console.info(&#39;Invoke replaceUrl succeeded.&#39;);
          &#125;)
        &#125;)
        Button(&#39;Return&#39;).onClick(() =&gt; &#123;
          router.back()
        &#125;)
      &#125;
    &#125;
  &#125;
&#125;
</code></pre>
<h4 id="4-HarmonyOS-input-cursor-movement-monitoring"><a href="#4-HarmonyOS-input-cursor-movement-monitoring" class="headerlink" title="4. HarmonyOS input cursor movement monitoring?"></a>4. HarmonyOS input cursor movement monitoring?</h4><p>When using a custom keyboard with <code>TextInput</code>, setting <code>maxLength</code>, and inputting beyond the limit, deleting characters may not trigger the <code>onChange</code> callback until excess inputs are cleared. Monitoring cursor movement to reset it to the end is needed.  </p>
<p>Use the <code>@ohos.inputMethodEngine</code> service’s <code>KeyboardDelegate.on(&#39;cursorContextChange&#39;)</code> to subscribe to cursor events:<br><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inputmethodengine-V5#oncursorcontextchange">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inputmethodengine-V5#oncursorcontextchange</a>  </p>
<p><code>on(type: &#39;cursorContextChange&#39;, callback: (x: number, y: number, height: number) =&gt; void): void</code>  </p>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Type</th>
<th align="left">Required</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">type</td>
<td align="left">string</td>
<td align="left">Yes</td>
<td align="left">Cursor change event, fixed as <code>&#39;cursorContextChange&#39;</code>.</td>
</tr>
<tr>
<td align="left">callback</td>
<td align="left"><code>(x: number, y: number, height: number) =&gt; void</code></td>
<td align="left">Yes</td>
<td align="left">Callback returning cursor info: <br>- <code>x</code>: X-coordinate of the cursor top <br>- <code>y</code>: Y-coordinate of the cursor top <br>- <code>height</code>: Cursor height</td>
</tr>
</tbody></table>
<p><strong>Example</strong>:  </p>
<pre><code class="language-typescript">try &#123;
  inputMethodEngine.getKeyboardDelegate().on(&#39;cursorContextChange&#39;, (x: number, y: number, height: number) =&gt; &#123;
    console.log(&#39;inputMethodEngine cursorContextChange x:&#39; + x);
    console.log(&#39;inputMethodEngine cursorContextChange y:&#39; + y);
    console.log(&#39;inputMethodEngine cursorContextChange height:&#39; + height);
  &#125;);
&#125; catch (err) &#123;
  console.error(`Failed to cursorContextChange: $&#123;JSON.stringify(err)&#125;`);
&#125;
</code></pre>
<h4 id="5-What-is-the-role-and-application-scenario-of-HarmonyOS-onDidBuild"><a href="#5-What-is-the-role-and-application-scenario-of-HarmonyOS-onDidBuild" class="headerlink" title="5. What is the role and application scenario of HarmonyOS onDidBuild?"></a>5. What is the role and application scenario of HarmonyOS onDidBuild?</h4><p>The <code>build()</code> method is for defining UI components, while <code>onDidBuild</code> runs after <code>build()</code> completes, making it suitable for non-UI logic (e.g.,埋点 (tracking), simple calculations). Avoid modifying components in <code>onDidBuild</code> since the UI structure is finalized. In contrast, <code>aboutToAppear</code> runs before <code>build()</code>.  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://harmonyostech.github.io/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qingkouwei">
      <meta itemprop="description" content="Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HarmonyOS NEXT Knowledge Charging Station">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/24/Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting/" class="post-title-link" itemprop="url">[Daily HarmonyOS Next Knowledge] Input Box Focus Color, Text Overflow Handling, Device-Aware Screen Rotation, Basic Control Encapsulation, Global Font Setting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-06-24 23:45:36 / Modified: 23:46:06" itemprop="dateCreated datePublished" datetime="2025-06-24T23:45:36+08:00">2025-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Daily-HarmonyOS-Next-Knowledge/" itemprop="url" rel="index"><span itemprop="name">Daily HarmonyOS Next Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting"><a href="#Daily-HarmonyOS-Next-Knowledge-Input-Box-Focus-Color-Text-Overflow-Handling-Device-Aware-Screen-Rotation-Basic-Control-Encapsulation-Global-Font-Setting" class="headerlink" title="[Daily HarmonyOS Next Knowledge] Input Box Focus Color, Text Overflow Handling, Device-Aware Screen Rotation, Basic Control Encapsulation, Global Font Setting"></a>[Daily HarmonyOS Next Knowledge] Input Box Focus Color, Text Overflow Handling, Device-Aware Screen Rotation, Basic Control Encapsulation, Global Font Setting</h3><h4 id="1-Does-HarmonyOS-support-modifying-the-focus-cursor-color-for-input-boxes"><a href="#1-Does-HarmonyOS-support-modifying-the-focus-cursor-color-for-input-boxes" class="headerlink" title="1. Does HarmonyOS support modifying the focus cursor color for input boxes?"></a>1. Does HarmonyOS support modifying the focus cursor color for input boxes?</h4><ul>
<li>RichEditor: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5#ZH-CN_TOPIC_0000001930676557__caretcolor12">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-richeditor-V5#ZH-CN_TOPIC_0000001930676557__caretcolor12</a>  </li>
<li>TextInput: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-textinput-V5</a>  </li>
<li>Search: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-search-V5</a></li>
</ul>
<h4 id="2-How-to-display-an-“ellipsis-more”-when-text-exceeds-the-limit-in-HarmonyOS"><a href="#2-How-to-display-an-“ellipsis-more”-when-text-exceeds-the-limit-in-HarmonyOS" class="headerlink" title="2. How to display an “ellipsis + more” when text exceeds the limit in HarmonyOS?"></a>2. How to display an “ellipsis + more” when text exceeds the limit in HarmonyOS?</h4><p>Control text overflow with <code>overflow: TextOverflow.Ellipsis</code>.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-text-V5#textoverflow">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-text-V5#textoverflow</a>  </p>
<p><code>textOverflow(value: &#123; overflow: TextOverflow &#125;)</code>  </p>
<ul>
<li>Sets the display mode for overflow text, truncating by character (e.g., words for English). To truncate by letter, use zero-width spaces (<code>\u200B</code>). From API version 11, combine with <code>wordBreak: WordBreak.BREAK_ALL</code> for letter-level truncation.  </li>
<li>When <code>overflow</code> is set to <code>TextOverflow.None</code>, <code>TextOverflow.Clip</code>, or <code>TextOverflow.Ellipsis</code>, <code>maxLines</code> must be configured; otherwise, it fails. <code>TextOverflow.None</code> and <code>TextOverflow.Clip</code> have the same effect.  </li>
<li>When <code>overflow</code> is set to <code>TextOverflow.MARQUEE</code>, text scrolls in a single line. <code>maxLines</code> and <code>copyOption</code> are ignored. <code>textAlign</code> works only when text is non-scrollable. The <code>clip</code> property defaults to <code>true</code> in marquee mode, and <code>CustomSpan</code> in attribute strings is unsupported.</li>
</ul>
<h4 id="3-How-to-enable-screen-rotation-based-on-device-settings-in-HarmonyOS"><a href="#3-How-to-enable-screen-rotation-based-on-device-settings-in-HarmonyOS" class="headerlink" title="3. How to enable screen rotation based on device settings in HarmonyOS?"></a>3. How to enable screen rotation based on device settings in HarmonyOS?</h4><p>Dynamically detect device types and configure auto-rotation support: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setpreferredorientation9">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#setpreferredorientation9</a>  </p>
<p><code>setPreferredOrientation(orientation: Orientation, callback: AsyncCallback&lt;void&gt;): void</code>  </p>
<ul>
<li>Sets the main window’s display orientation with an async callback. Effective only on devices supporting sensor-driven rotation, not on 2-in-1 devices, free multi-window mode, or sub-windows.</li>
</ul>
<p>Use device information APIs to distinguish device types and enable auto-rotation accordingly:<br>Reference: <code>@ohos.distributedDeviceManager</code> (Device Management): <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-distributeddevicemanager-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-distributeddevicemanager-V5</a>  </p>
<p>Key capabilities:  </p>
<ul>
<li>Register&#x2F;unregister device online&#x2F;offline listeners.  </li>
<li>Discover nearby untrusted devices.  </li>
<li>Authenticate&#x2F;取消认证设备.  </li>
<li>Query trusted device lists.  </li>
<li>Retrieve local device info (name, type, ID, etc.).</li>
</ul>
<h4 id="4-How-to-encapsulate-commonly-used-basic-controls-e-g-Button-Text-Column-in-HarmonyOS-projects"><a href="#4-How-to-encapsulate-commonly-used-basic-controls-e-g-Button-Text-Column-in-HarmonyOS-projects" class="headerlink" title="4. How to encapsulate commonly used basic controls (e.g., Button, Text, Column) in HarmonyOS projects?"></a>4. How to encapsulate commonly used basic controls (e.g., Button, Text, Column) in HarmonyOS projects?</h4><p>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-create-custom-components-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-create-custom-components-V5</a>  </p>
<p>In ArkUI, UI elements are components: system-provided or developer-defined (custom components). Custom components enhance code reusability, separate business logic from UI, and facilitate version evolution.  </p>
<p>Key features:  </p>
<ul>
<li><strong>Composability</strong>: Combine system components, properties, and methods.  </li>
<li><strong>Reusability</strong>: Reuse custom components as instances in different parent components&#x2F;containers.  </li>
<li><strong>Data-driven UI update</strong>: Modify state variables to trigger UI refreshes.</li>
</ul>
<h4 id="5-How-to-set-global-fonts-in-HarmonyOS"><a href="#5-How-to-set-global-fonts-in-HarmonyOS" class="headerlink" title="5. How to set global fonts in HarmonyOS?"></a>5. How to set global fonts in HarmonyOS?</h4><ul>
<li><strong>Text components</strong>: Use <code>Text.Font.family</code> for custom fonts.<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-types-V5#font">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-types-V5#font</a>  </li>
<li><strong>Canvas</strong>: Does not support custom fonts. Use <code>RenderingContextSettings.font</code> with supported families (e.g., <code>&#39;sans-serif&#39;</code>, <code>&#39;serif&#39;</code>, <code>&#39;monospace&#39;</code>).<br>Reference: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-canvasrenderingcontext2d-V5">https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-canvasrenderingcontext2d-V5</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qingkouwei</p>
  <div class="site-description" itemprop="description">Welcome to the HarmonyOS NEXT Knowledge Charging Station!  This is a hub for knowledge about HarmonyOS Next`s new-generation system. With its self-developed kernel, HarmonyOS NEXT achieves native smoothness, security, intelligence, and interconnectivity. We deeply analyze how its new distributed soft bus revolutionizes device connectivity experiences and explain the principles behind the enhanced perception and reasoning capabilities of the Xiaoyi intelligent agent based on the Pangu large model. Whether you are a developer exploring application development or an ordinary user eager to understand system features, you can "recharge" here and quickly grasp the essence of HarmonyOS NEXT.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingkouwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
